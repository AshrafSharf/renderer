{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "awayjs-renderergl.js",
    "awayjs-renderergl/lib/DefaultRenderer.ts",
    "awayjs-renderergl/lib/DepthRenderer.ts",
    "awayjs-renderergl/lib/DistanceRenderer.ts",
    "awayjs-renderergl/lib/Filter3DRenderer.ts",
    "awayjs-renderergl/lib/RendererBase.ts",
    "awayjs-renderergl/lib/RendererGL.ts",
    "awayjs-renderergl/lib/animators/AnimationSetBase.ts",
    "awayjs-renderergl/lib/animators/AnimatorBase.ts",
    "awayjs-renderergl/lib/animators/ParticleAnimationSet.ts",
    "awayjs-renderergl/lib/animators/ParticleAnimator.ts",
    "awayjs-renderergl/lib/animators/SkeletonAnimationSet.ts",
    "awayjs-renderergl/lib/animators/SkeletonAnimator.ts",
    "awayjs-renderergl/lib/animators/VertexAnimationSet.ts",
    "awayjs-renderergl/lib/animators/VertexAnimator.ts",
    "awayjs-renderergl/lib/animators/data/AnimationRegisterCache.ts",
    "awayjs-renderergl/lib/animators/data/AnimationSubGeometry.ts",
    "awayjs-renderergl/lib/animators/data/ColorSegmentPoint.ts",
    "awayjs-renderergl/lib/animators/data/JointPose.ts",
    "awayjs-renderergl/lib/animators/data/ParticleAnimationData.ts",
    "awayjs-renderergl/lib/animators/data/ParticleData.ts",
    "awayjs-renderergl/lib/animators/data/ParticlePropertiesMode.ts",
    "awayjs-renderergl/lib/animators/data/ParticleProperties.ts",
    "awayjs-renderergl/lib/animators/data/SkeletonJoint.ts",
    "awayjs-renderergl/lib/animators/data/SkeletonPose.ts",
    "awayjs-renderergl/lib/animators/data/Skeleton.ts",
    "awayjs-renderergl/lib/animators/data/VertexAnimationMode.ts",
    "awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleAccelerationNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleBezierCurveNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleBillboardNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleColorNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleFollowNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleInitialColorNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleNodeBase.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleOrbitNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleOscillatorNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticlePositionNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleRotateToHeadingNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleRotateToPositionNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleRotationalVelocityNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleScaleNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleSegmentedColorNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleSpriteSheetNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleTimeNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleUVNode.ts",
    "awayjs-renderergl/lib/animators/nodes/ParticleVelocityNode.ts",
    "awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode.ts",
    "awayjs-renderergl/lib/animators/nodes/SkeletonClipNode.ts",
    "awayjs-renderergl/lib/animators/nodes/SkeletonDifferenceNode.ts",
    "awayjs-renderergl/lib/animators/nodes/SkeletonDirectionalNode.ts",
    "awayjs-renderergl/lib/animators/nodes/SkeletonNaryLERPNode.ts",
    "awayjs-renderergl/lib/animators/nodes/VertexClipNode.ts",
    "awayjs-renderergl/lib/animators/states/AnimationClipState.ts",
    "awayjs-renderergl/lib/animators/states/AnimationStateBase.ts",
    "awayjs-renderergl/lib/animators/states/ParticleAccelerationState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleBezierCurveState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleBillboardState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleColorState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleFollowState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleInitialColorState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleOrbitState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleOscillatorState.ts",
    "awayjs-renderergl/lib/animators/states/ParticlePositionState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleRotateToHeadingState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleRotateToPositionState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleRotationalVelocityState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleScaleState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleSegmentedColorState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleSpriteSheetState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleStateBase.ts",
    "awayjs-renderergl/lib/animators/states/ParticleTimeState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleUVState.ts",
    "awayjs-renderergl/lib/animators/states/ParticleVelocityState.ts",
    "awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState.ts",
    "awayjs-renderergl/lib/animators/states/SkeletonClipState.ts",
    "awayjs-renderergl/lib/animators/states/SkeletonDifferenceState.ts",
    "awayjs-renderergl/lib/animators/states/SkeletonDirectionalState.ts",
    "awayjs-renderergl/lib/animators/states/SkeletonNaryLERPState.ts",
    "awayjs-renderergl/lib/animators/states/VertexClipState.ts",
    "awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionNode.ts",
    "awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionState.ts",
    "awayjs-renderergl/lib/animators/transitions/CrossfadeTransition.ts",
    "awayjs-renderergl/lib/base/ParticleGeometry.ts",
    "awayjs-renderergl/lib/errors/AnimationSetError.ts",
    "awayjs-renderergl/lib/events/AnimationStateEvent.ts",
    "awayjs-renderergl/lib/events/AnimatorEvent.ts",
    "awayjs-renderergl/lib/events/PassEvent.ts",
    "awayjs-renderergl/lib/events/RTTEvent.ts",
    "awayjs-renderergl/lib/events/ShadingMethodEvent.ts",
    "awayjs-renderergl/lib/filters/BlurFilter3D.ts",
    "awayjs-renderergl/lib/filters/CompositeFilter3D.ts",
    "awayjs-renderergl/lib/filters/Filter3DBase.ts",
    "awayjs-renderergl/lib/filters/tasks/Filter3DCompositeTask.ts",
    "awayjs-renderergl/lib/filters/tasks/Filter3DFXAATask.ts",
    "awayjs-renderergl/lib/filters/tasks/Filter3DHBlurTask.ts",
    "awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase.ts",
    "awayjs-renderergl/lib/filters/tasks/Filter3DVBlurTask.ts",
    "awayjs-renderergl/lib/managers/RTTBufferManager.ts",
    "awayjs-renderergl/lib/pick/ShaderPicker.ts",
    "awayjs-renderergl/lib/render/BasicMaterialRender.ts",
    "awayjs-renderergl/lib/render/DepthRender.ts",
    "awayjs-renderergl/lib/render/DistanceRender.ts",
    "awayjs-renderergl/lib/render/RenderBase.ts",
    "awayjs-renderergl/lib/render/RenderPassBase.ts",
    "awayjs-renderergl/lib/render/RenderPool.ts",
    "awayjs-renderergl/lib/render/SkyboxRender.ts",
    "awayjs-renderergl/lib/render/passes/BasicMaterialPass.ts",
    "awayjs-renderergl/lib/render/passes/PassBase.ts",
    "awayjs-renderergl/lib/renderables/BillboardRenderable.ts",
    "awayjs-renderergl/lib/renderables/CurveSubMeshRenderable.ts",
    "awayjs-renderergl/lib/renderables/LineSegmentRenderable.ts",
    "awayjs-renderergl/lib/renderables/LineSubMeshRenderable.ts",
    "awayjs-renderergl/lib/renderables/RenderableBase.ts",
    "awayjs-renderergl/lib/renderables/SkyboxRenderable.ts",
    "awayjs-renderergl/lib/renderables/TriangleSubMeshRenderable.ts",
    "awayjs-renderergl/lib/shaders/LightingShader.ts",
    "awayjs-renderergl/lib/shaders/RegisterPool.ts",
    "awayjs-renderergl/lib/shaders/ShaderBase.ts",
    "awayjs-renderergl/lib/shaders/ShaderRegisterCache.ts",
    "awayjs-renderergl/lib/shaders/ShaderRegisterData.ts",
    "awayjs-renderergl/lib/shaders/ShaderRegisterElement.ts",
    "awayjs-renderergl/lib/shaders/compilers/CompilerBase.ts",
    "awayjs-renderergl/lib/shaders/compilers/LightingCompiler.ts",
    "awayjs-renderergl/lib/sort/RenderableMergeSort.ts",
    "awayjs-renderergl/lib/sort/RenderableNullSort.ts",
    "awayjs-renderergl/lib/tools/commands/Merge.ts",
    "awayjs-renderergl/lib/tools/data/ParticleGeometryTransform.ts",
    "awayjs-renderergl/lib/utils/ParticleGeometryHelper.ts",
    "awayjs-renderergl/lib/utils/PerspectiveMatrix3D.ts",
    "awayjs-renderergl/lib/vos/CurveSubGeometryVO.ts",
    "awayjs-renderergl/lib/vos/LineSubGeometryVO.ts",
    "awayjs-renderergl/lib/vos/Single2DTextureVO.ts",
    "awayjs-renderergl/lib/vos/SingleCubeTextureVO.ts",
    "awayjs-renderergl/lib/vos/SubGeometryVOBase.ts",
    "awayjs-renderergl/lib/vos/TextureVOBase.ts",
    "awayjs-renderergl/lib/vos/TriangleSubGeometryVO.ts"
  ],
  "names": [
    "require",
    "e",
    "t",
    "n",
    "r",
    "s",
    "o",
    "u",
    "a",
    "i",
    "f",
    "Error",
    "code",
    "l",
    "exports",
    "call",
    "length",
    "awayjs-renderergl/lib/DefaultRenderer",
    "module",
    "__extends",
    "this",
    "d",
    "b",
    "p",
    "hasOwnProperty",
    "__",
    "constructor",
    "prototype",
    "BitmapImage2D",
    "Matrix3D",
    "Vector3D",
    "ContextGLCompareMode",
    "ContextGLClearMask",
    "RendererBase",
    "DepthRenderer",
    "DistanceRenderer",
    "Filter3DRenderer",
    "RTTBufferManager",
    "DefaultRenderer",
    "_super",
    "stage",
    "forceSoftware",
    "profile",
    "mode",
    "_skyboxProjection",
    "_antiAlias",
    "_shareContext",
    "_pRttBufferManager",
    "getInstance",
    "_pStage",
    "_pDepthRenderer",
    "_pDistanceRenderer",
    "_width",
    "width",
    "window",
    "innerWidth",
    "viewWidth",
    "_height",
    "height",
    "innerHeight",
    "viewHeight",
    "Object",
    "defineProperty",
    "get",
    "set",
    "value",
    "_pBackBufferInvalid",
    "enumerable",
    "configurable",
    "_depthPrepass",
    "_pFilter3DRenderer",
    "filters",
    "dispose",
    "_pRequireDepthRender",
    "requireDepthRender",
    "_pDepthRender",
    "render",
    "entityCollector",
    "recoverFromDisposal",
    "pUpdateBackBuffer",
    "_pContext",
    "clear",
    "DEPTH",
    "textureRatioX",
    "textureRatioY",
    "pRenderSceneDepthToTexture",
    "pRenderDepthPrepass",
    "_iRender",
    "getMainInputTexture",
    "renderToTextureRect",
    "camera",
    "_pScissorRect",
    "present",
    "bufferClear",
    "pExecuteRender",
    "target",
    "scissorRect",
    "surfaceSelector",
    "updateLights",
    "dirLights",
    "directionalLights",
    "pointLights",
    "len",
    "light",
    "shadowMapper",
    "castsShadows",
    "autoUpdateShadows",
    "_iShadowsInvalid",
    "iRenderDepthMap",
    "pDraw",
    "skyBox",
    "setDepthTest",
    "ALWAYS",
    "drawSkybox",
    "renderable",
    "getAbstraction",
    "updateSkyboxProjection",
    "getRenderPool",
    "renderableOwner",
    "renderOwner",
    "pass",
    "passes",
    "activatePass",
    "deactivatePass",
    "near",
    "copyFrom",
    "_pRttViewProjectionMatrix",
    "copyRowTo",
    "camPos",
    "scenePosition",
    "cx",
    "x",
    "cy",
    "y",
    "cz",
    "z",
    "cw",
    "Math",
    "sqrt",
    "signX",
    "signY",
    "inverse",
    "clone",
    "invert",
    "q",
    "transformVector",
    "w",
    "copyRowFrom",
    "disableColor",
    "_pDepthTextureInvalid",
    "initDepthTexture",
    "context",
    "configureBackBuffer",
    "textureWidth",
    "textureHeight",
    "awayjs-core/lib/geom/Matrix3D",
    "undefined",
    "awayjs-core/lib/geom/Vector3D",
    "awayjs-core/lib/image/BitmapImage2D",
    "awayjs-renderergl/lib/DepthRenderer",
    "awayjs-renderergl/lib/DistanceRenderer",
    "awayjs-renderergl/lib/Filter3DRenderer",
    "awayjs-renderergl/lib/RendererBase",
    "awayjs-renderergl/lib/managers/RTTBufferManager",
    "awayjs-stagegl/lib/base/ContextGLClearMask",
    "awayjs-stagegl/lib/base/ContextGLCompareMode",
    "DepthRender",
    "_iBackgroundR",
    "_iBackgroundG",
    "_iBackgroundB",
    "awayjs-renderergl/lib/render/DepthRender",
    "DistanceRender",
    "awayjs-renderergl/lib/render/DistanceRender",
    "ContextGLDrawMode",
    "ContextGLBlendFactor",
    "ContextGLVertexBufferFormat",
    "RTTEvent",
    "_this",
    "_filterSizesInvalid",
    "_onRTTResizeDelegate",
    "event",
    "onRTTResize",
    "_stage",
    "_rttManager",
    "addEventListener",
    "RESIZE",
    "_requireDepthRender",
    "_filterTasksInvalid",
    "updateFilterTasks",
    "_mainInputTexture",
    "_filters",
    "updateFilterSizes",
    "_tasks",
    "Array",
    "filter",
    "setRenderTargets",
    "concat",
    "tasks",
    "depthTexture",
    "task",
    "indexBuffer",
    "vertexBuffer",
    "renderToTextureVertexBuffer",
    "update",
    "setProgram",
    "getProgram",
    "setVertexBufferAt",
    "FLOAT_2",
    "setRenderTarget",
    "activate",
    "renderToScreenVertexBuffer",
    "setBlendFactors",
    "ONE",
    "ZERO",
    "drawIndices",
    "TRIANGLES",
    "deactivate",
    "setTextureAt",
    "removeEventListener",
    "awayjs-renderergl/lib/events/RTTEvent",
    "awayjs-stagegl/lib/base/ContextGLBlendFactor",
    "awayjs-stagegl/lib/base/ContextGLDrawMode",
    "awayjs-stagegl/lib/base/ContextGLVertexBufferFormat",
    "Point",
    "Rectangle",
    "EventDispatcher",
    "RendererEvent",
    "EntityCollector",
    "AGALMiniAssembler",
    "StageEvent",
    "StageManager",
    "RenderPool",
    "RenderableMergeSort",
    "renderClass",
    "_objectPools",
    "_abstractionPool",
    "_activeMasksConfig",
    "_registeredMasks",
    "_numUsedStreams",
    "_numUsedTextures",
    "_viewPort",
    "_backgroundR",
    "_backgroundG",
    "_backgroundB",
    "_backgroundAlpha",
    "_localPos",
    "_globalPos",
    "_pNumElements",
    "_disableColor",
    "_renderBlended",
    "_onViewportUpdatedDelegate",
    "onViewportUpdated",
    "_onContextUpdateDelegate",
    "onContextUpdate",
    "renderableSorter",
    "getFreeStage",
    "CONTEXT_CREATED",
    "CONTEXT_RECREATED",
    "VIEWPORT_UPDATED",
    "_abstractionClassPool",
    "updateGlobalPos",
    "notifyScissorUpdate",
    "id",
    "assetType",
    "clearAbstraction",
    "registerAbstraction",
    "assetClass",
    "shader",
    "numUsedStreams",
    "numUsedTextures",
    "programData",
    "program",
    "createProgram",
    "vertexByteCode",
    "assemble",
    "vertexString",
    "data",
    "fragmentByteCode",
    "fragmentString",
    "upload",
    "_iActivate",
    "_iDeactivate",
    "_iCreateEntityCollector",
    "_viewportDirty",
    "_scissorDirty",
    "viewProjection",
    "appendScale",
    "_iRenderCascades",
    "numCascades",
    "scissorRects",
    "cameras",
    "_applyCollector",
    "LESS",
    "head",
    "_pOpaqueRenderableHead",
    "first",
    "LESS_EQUAL",
    "_pBlendedRenderableHead",
    "item",
    "entityHead",
    "_pCamera",
    "_iEntryPoint",
    "_pCameraForward",
    "transform",
    "forwardVector",
    "entity",
    "_applyRenderer",
    "next",
    "sortOpaqueRenderables",
    "sortBlendedRenderables",
    "_snapshotRequired",
    "_snapshotBitmapImage2D",
    "drawToBitmapImage2D",
    "queueSnapshot",
    "bmd",
    "setColorMask",
    "drawRenderables",
    "renderable2",
    "setStencilActions",
    "gl",
    "disable",
    "STENCIL_TEST",
    "_maskConfig",
    "_renderOwner",
    "alphaThreshold",
    "_activeMasksDirty",
    "_checkMasksConfig",
    "masksConfig",
    "stencilFunc",
    "stencilOp",
    "KEEP",
    "_renderMasks",
    "sourceEntity",
    "_iAssignedMasks",
    "maskId",
    "_registerMask",
    "_scissorUpdated",
    "SCISSOR_UPDATED",
    "dispatchEvent",
    "notifyViewportUpdate",
    "_viewPortUpdated",
    "viewPort",
    "_iApplyRenderableOwner",
    "renderId",
    "renderOrderId",
    "cascaded",
    "position",
    "subtract",
    "zIndex",
    "zOffset",
    "dotProduct",
    "_iAssignedMaskId",
    "_iMasksConfig",
    "renderSceneTransform",
    "getRenderSceneTransform",
    "requiresBlending",
    "subGeometryVO",
    "subGeometry",
    "numElements",
    "obj",
    "push",
    "masks",
    "enable",
    "REPLACE",
    "numLayers",
    "numRenderables",
    "children",
    "numChildren",
    "mask",
    "EQUAL",
    "INCR",
    "j",
    "k",
    "_drawMask",
    "childConfig",
    "activeNumChildren",
    "activeChildConfig",
    "awayjs-core/lib/events/EventDispatcher",
    "awayjs-core/lib/geom/Point",
    "awayjs-core/lib/geom/Rectangle",
    "awayjs-display/lib/events/RendererEvent",
    "awayjs-display/lib/traverse/EntityCollector",
    "awayjs-renderergl/lib/render/RenderPool",
    "awayjs-renderergl/lib/sort/RenderableMergeSort",
    "awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler",
    "awayjs-stagegl/lib/events/StageEvent",
    "awayjs-stagegl/lib/managers/StageManager",
    "awayjs-renderergl/lib/RendererGL",
    "BasicMaterial",
    "Skybox",
    "Billboard",
    "LineSegment",
    "CurveSubMesh",
    "CurveSubGeometry",
    "LineSubMesh",
    "LineSubGeometry",
    "TriangleSubMesh",
    "TriangleSubGeometry",
    "Single2DTexture",
    "SingleCubeTexture",
    "Stage",
    "BasicMaterialRender",
    "SkyboxRender",
    "BillboardRenderable",
    "LineSegmentRenderable",
    "LineSubMeshRenderable",
    "TriangleSubMeshRenderable",
    "CurveSubMeshRenderable",
    "SkyboxRenderable",
    "ShaderBase",
    "CurveSubGeometryVO",
    "LineSubGeometryVO",
    "TriangleSubGeometryVO",
    "Single2DTextureVO",
    "SingleCubeTextureVO",
    "renderergl",
    "addDefaults",
    "test",
    "main",
    "awayjs-display/lib/base/CurveSubGeometry",
    "awayjs-display/lib/base/CurveSubMesh",
    "awayjs-display/lib/base/LineSubGeometry",
    "awayjs-display/lib/base/LineSubMesh",
    "awayjs-display/lib/base/TriangleSubGeometry",
    "awayjs-display/lib/base/TriangleSubMesh",
    "awayjs-display/lib/entities/Billboard",
    "awayjs-display/lib/entities/LineSegment",
    "awayjs-display/lib/entities/Skybox",
    "awayjs-display/lib/materials/BasicMaterial",
    "awayjs-display/lib/textures/Single2DTexture",
    "awayjs-display/lib/textures/SingleCubeTexture",
    "awayjs-renderergl/lib/render/BasicMaterialRender",
    "awayjs-renderergl/lib/render/SkyboxRender",
    "awayjs-renderergl/lib/renderables/BillboardRenderable",
    "awayjs-renderergl/lib/renderables/CurveSubMeshRenderable",
    "awayjs-renderergl/lib/renderables/LineSegmentRenderable",
    "awayjs-renderergl/lib/renderables/LineSubMeshRenderable",
    "awayjs-renderergl/lib/renderables/SkyboxRenderable",
    "awayjs-renderergl/lib/renderables/TriangleSubMeshRenderable",
    "awayjs-renderergl/lib/shaders/ShaderBase",
    "awayjs-renderergl/lib/vos/CurveSubGeometryVO",
    "awayjs-renderergl/lib/vos/LineSubGeometryVO",
    "awayjs-renderergl/lib/vos/Single2DTextureVO",
    "awayjs-renderergl/lib/vos/SingleCubeTextureVO",
    "awayjs-renderergl/lib/vos/TriangleSubGeometryVO",
    "awayjs-stagegl/lib/base/Stage",
    "awayjs-renderergl/lib/animators/AnimationSetBase",
    "AssetBase",
    "AbstractMethodError",
    "AnimationSetError",
    "AnimationSetBase",
    "_animations",
    "_animationNames",
    "_animationDictionary",
    "_pFindTempReg",
    "exclude",
    "excludeAnother",
    "reg",
    "indexOf",
    "_usesCPU",
    "resetGPUCompatibility",
    "cancelGPUCompatibility",
    "getAGALVertexCode",
    "getAGALFragmentCode",
    "shadedTarget",
    "getAGALUVCode",
    "doneAGALCode",
    "hasAnimation",
    "name",
    "getAnimation",
    "addAnimation",
    "node",
    "awayjs-core/lib/errors/AbstractMethodError",
    "awayjs-core/lib/library/AssetBase",
    "awayjs-renderergl/lib/errors/AnimationSetError",
    "awayjs-renderergl/lib/animators/AnimatorBase",
    "RequestAnimationFrame",
    "getTimer",
    "AnimatorEvent",
    "AnimatorBase",
    "animationSet",
    "_autoUpdate",
    "_time",
    "_playbackSpeed",
    "_pOwners",
    "_pAbsoluteTime",
    "_animationStates",
    "updatePosition",
    "_pAnimationSet",
    "_broadcaster",
    "onEnterFrame",
    "getAnimationState",
    "className",
    "stateClass",
    "uID",
    "getAnimationStateByName",
    "_pActiveState",
    "_pActiveAnimationName",
    "start",
    "stop",
    "phase",
    "setRenderState",
    "vertexConstantOffset",
    "vertexStreamOffset",
    "_isPlaying",
    "hasEventListener",
    "START",
    "_startEvent",
    "STOP",
    "_stopEvent",
    "time",
    "dt",
    "playbackSpeed",
    "_pUpdateDeltaTime",
    "reset",
    "offset",
    "addOwner",
    "mesh",
    "removeOwner",
    "splice",
    "applyPositionDelta",
    "delta",
    "positionDelta",
    "dist",
    "translateLocal",
    "dispatchCycleEvent",
    "CYCLE_COMPLETE",
    "_cycleEvent",
    "testGPUCompatibility",
    "getRenderableSubGeometry",
    "sourceSubGeometry",
    "awayjs-core/lib/utils/RequestAnimationFrame",
    "awayjs-core/lib/utils/getTimer",
    "awayjs-renderergl/lib/events/AnimatorEvent",
    "awayjs-renderergl/lib/animators/ParticleAnimationSet",
    "AnimationRegisterCache",
    "AnimationSubGeometry",
    "ParticleAnimationData",
    "ParticleProperties",
    "ParticlePropertiesMode",
    "ParticleTimeNode",
    "ParticleAnimationSet",
    "usesDuration",
    "usesLooping",
    "usesDelay",
    "_animationSubGeometries",
    "_particleNodes",
    "_localDynamicNodes",
    "_localStaticNodes",
    "_totalLenOfOneVertex",
    "_timeNode",
    "_iProcessAnimationSetting",
    "LOCAL_STATIC",
    "_iDataOffset",
    "dataLength",
    "LOCAL_DYNAMIC",
    "priority",
    "_iAnimationRegisterCache",
    "animationRegisterCache",
    "numUsedVertexConstants",
    "vertexAttributesOffset",
    "varyingsOffset",
    "numUsedVaryings",
    "fragmentConstantOffset",
    "numUsedFragmentConstants",
    "hasUVNode",
    "needVelocity",
    "hasBillboard",
    "sourceRegisters",
    "animatableAttributes",
    "targetRegisters",
    "animationTargetRegisters",
    "needFragmentAnimation",
    "usesFragmentAnimation",
    "needUVAnimation",
    "usesUVTransform",
    "hasColorAddNode",
    "hasColorMulNode",
    "getInitCode",
    "POST_PRIORITY",
    "getCombinationCode",
    "COLOR_PRIORITY",
    "initColorRegisters",
    "getColorPassCode",
    "setUVSourceAndTarget",
    "uvSource",
    "uvTarget",
    "uvAttribute",
    "toString",
    "uvVar",
    "getColorCombinationCode",
    "setDataLength",
    "setVertexConst",
    "vertexZeroConst",
    "index",
    "key",
    "getAnimationSubGeometry",
    "subMesh",
    "parentMesh",
    "animationSubGeometry",
    "_iGenerateAnimationSubGeometries",
    "initParticleFunc",
    "geometry",
    "newAnimationSubGeometry",
    "localNode",
    "subMeshes",
    "shareAnimationGeometry",
    "createVertexData",
    "numVertices",
    "particles",
    "particlesLength",
    "numParticles",
    "particleProperties",
    "particle",
    "oneDataLen",
    "oneDataOffset",
    "counterForVertex",
    "counterForOneData",
    "oneData",
    "vertexData",
    "vertexLength",
    "startingOffset",
    "vertexOffset",
    "total",
    "startTime",
    "duration",
    "delay",
    "initParticleScope",
    "_iGeneratePropertyOfOneParticle",
    "particleIndex",
    "numProcessedVertices",
    "animationParticles",
    "awayjs-renderergl/lib/animators/data/AnimationRegisterCache",
    "awayjs-renderergl/lib/animators/data/AnimationSubGeometry",
    "awayjs-renderergl/lib/animators/data/ParticleAnimationData",
    "awayjs-renderergl/lib/animators/data/ParticleProperties",
    "awayjs-renderergl/lib/animators/data/ParticlePropertiesMode",
    "awayjs-renderergl/lib/animators/nodes/ParticleTimeNode",
    "awayjs-renderergl/lib/animators/ParticleAnimator",
    "ContextGLProgramType",
    "ParticleAnimator",
    "particleAnimationSet",
    "_animationParticleStates",
    "_animatorParticleStates",
    "_timeParticleStates",
    "_animatorSubGeometries",
    "_particleAnimationSet",
    "state",
    "particleNodes",
    "needUpdateTime",
    "animatorSubGeometry",
    "getAnimatorSubGeometry",
    "setProgramConstantsFromArray",
    "VERTEX",
    "vertexConstantData",
    "numVertexConstant",
    "numFragmentConstant",
    "FRAGMENT",
    "fragmentConstantData",
    "resetTime",
    "awayjs-stagegl/lib/base/ContextGLProgramType",
    "awayjs-renderergl/lib/animators/SkeletonAnimationSet",
    "SkeletonAnimationSet",
    "jointsPerVertex",
    "_jointsPerVertex",
    "indexOffset0",
    "indexOffset1",
    "indexOffset2",
    "indexStream",
    "weightStream",
    "indices",
    "weights",
    "temp1",
    "temp2",
    "dot",
    "src",
    "awayjs-renderergl/lib/animators/SkeletonAnimator",
    "SubGeometryEvent",
    "JointPose",
    "SkeletonPose",
    "AnimationStateEvent",
    "SkeletonAnimator",
    "skeleton",
    "forceCPU",
    "_globalPose",
    "_morphedSubGeometry",
    "_morphedSubGeometryDirty",
    "_skeleton",
    "_forceCPU",
    "_numJoints",
    "numJoints",
    "_globalMatrices",
    "Float32Array",
    "_onTransitionCompleteDelegate",
    "onTransitionComplete",
    "_onIndicesUpdateDelegate",
    "onIndicesUpdate",
    "_onVerticesUpdateDelegate",
    "onVerticesUpdate",
    "_globalPropertiesDirty",
    "updateGlobalProperties",
    "_useCondensedIndices",
    "play",
    "transition",
    "NaN",
    "_pActiveNode",
    "getAnimationNode",
    "TRANSITION_COMPLETE",
    "_activeSkeletonState",
    "isNaN",
    "useCondensedIndices",
    "updateCondensedMatrices",
    "condensedIndexLookUp",
    "_condensedMatrices",
    "usesCPU",
    "morphSubGeometry",
    "jointIndexIndex",
    "jointWeightIndex",
    "srcIndex",
    "localToGlobalPose",
    "getSkeletonPose",
    "mtxOffset",
    "globalPoses",
    "jointPoses",
    "raw",
    "ox",
    "oy",
    "oz",
    "ow",
    "xy2",
    "xz2",
    "xw2",
    "yz2",
    "yw2",
    "zw2",
    "n11",
    "n12",
    "n13",
    "n21",
    "n22",
    "n23",
    "n31",
    "n32",
    "n33",
    "m11",
    "m12",
    "m13",
    "m14",
    "m21",
    "m22",
    "m23",
    "m24",
    "m31",
    "m32",
    "m33",
    "m34",
    "joints",
    "pose",
    "quat",
    "vec",
    "orientation",
    "translation",
    "inverseBindPose",
    "targetSubGeometry",
    "autoDeriveNormals",
    "autoDeriveTangents",
    "autoDeriveUVs",
    "INVALIDATE_INDICES",
    "INVALIDATE_VERTICES",
    "sourcePositions",
    "positions",
    "sourceNormals",
    "normals",
    "sourceTangents",
    "tangents",
    "jointIndices",
    "jointWeights",
    "targetPositions",
    "targetNormals",
    "targetTangents",
    "vx",
    "vy",
    "vz",
    "nx",
    "ny",
    "nz",
    "tx",
    "ty",
    "tz",
    "weight",
    "vertX",
    "vertY",
    "vertZ",
    "normX",
    "normY",
    "normZ",
    "tangX",
    "tangY",
    "tangZ",
    "setPositions",
    "setNormals",
    "setTangents",
    "sourcePose",
    "targetPose",
    "globalJointPose",
    "numJointPoses",
    "parentIndex",
    "joint",
    "parentPose",
    "or",
    "tr",
    "x1",
    "y1",
    "z1",
    "w1",
    "x2",
    "y2",
    "z2",
    "w2",
    "x3",
    "y3",
    "z3",
    "type",
    "animationNode",
    "animationState",
    "setIndices",
    "morphGeometry",
    "attributesView",
    "uvs",
    "setUVs",
    "secondaryUVs",
    "setSecondaryUVs",
    "awayjs-display/lib/events/SubGeometryEvent",
    "awayjs-renderergl/lib/animators/data/JointPose",
    "awayjs-renderergl/lib/animators/data/SkeletonPose",
    "awayjs-renderergl/lib/events/AnimationStateEvent",
    "awayjs-renderergl/lib/animators/VertexAnimationSet",
    "VertexAnimationMode",
    "VertexAnimationSet",
    "numPoses",
    "blendMode",
    "_numPoses",
    "_blendMode",
    "ABSOLUTE",
    "getAbsoluteAGALCode",
    "getAdditiveAGALCode",
    "regs",
    "constantReg",
    "streamIndex",
    "tangentDependencies",
    "outputsNormals",
    "normalDependencies",
    "awayjs-renderergl/lib/animators/data/VertexAnimationMode",
    "awayjs-renderergl/lib/animators/VertexAnimator",
    "VertexAnimator",
    "vertexAnimationSet",
    "_poses",
    "_weights",
    "_vertexAnimationSet",
    "_activeVertexState",
    "geometryFlag",
    "currentGeometry",
    "nextGeometry",
    "blendWeight",
    "_iInvalidateRenderableGeometries",
    "subGeom",
    "setNullPose",
    "subGeometries",
    "_iIndex",
    "_indexMappings",
    "getIndexMappings",
    "activateVertexBufferVO",
    "ShaderRegisterCache",
    "ShaderRegisterElement",
    "indexDictionary",
    "rotationRegisters",
    "positionAttribute",
    "getRegisterFromString",
    "scaleAndRotateTarget",
    "addVertexTempUsages",
    "regName",
    "getFreeVertexConstant",
    "vertexOneConst",
    "vertexTwoConst",
    "positionTarget",
    "getFreeVertexVectorTemp",
    "velocityTarget",
    "vertexTime",
    "vertexLife",
    "tempTime",
    "UVAttribute",
    "UVVaring",
    "setRegisterIndex",
    "parameterIndex",
    "registerIndex",
    "getRegisterIndex",
    "colorMulTarget",
    "colorMulVary",
    "getFreeVarying",
    "colorAddTarget",
    "colorAddVary",
    "colorTarget",
    "addFragmentTempUsages",
    "temp",
    "split",
    "parseInt",
    "_numVertexConstant",
    "_numFragmentConstant",
    "_index",
    "setVertexConstFromArray",
    "setVertexConstFromMatrix",
    "matrix",
    "rawData",
    "setFragmentConst",
    "awayjs-renderergl/lib/shaders/ShaderRegisterCache",
    "awayjs-renderergl/lib/shaders/ShaderRegisterElement",
    "_pVertexBuffer",
    "_pBufferContext",
    "_pBufferDirty",
    "previousTime",
    "Number",
    "NEGATIVE_INFINITY",
    "_iUniqueId",
    "SUBGEOM_ID_COUNT",
    "totalLenOfOneVertex",
    "_numVertices",
    "_pVertexData",
    "activateVertexBuffer",
    "bufferOffset",
    "format",
    "contextIndex",
    "stageIndex",
    "buffer",
    "createVertexBuffer",
    "uploadFromArray",
    "pop",
    "invalidateBuffer",
    "awayjs-renderergl/lib/animators/data/ColorSegmentPoint",
    "ColorSegmentPoint",
    "life",
    "color",
    "_life",
    "_color",
    "Quaternion",
    "toMatrix3D",
    "appendTranslation",
    "awayjs-core/lib/geom/Quaternion",
    "totalTime",
    "startVertexIndex",
    "awayjs-renderergl/lib/animators/data/ParticleData",
    "ParticleData",
    "GLOBAL",
    "awayjs-renderergl/lib/animators/data/SkeletonJoint",
    "SkeletonJoint",
    "jointPoseFromName",
    "jointName",
    "jointPoseIndex",
    "jointPoseIndexFromName",
    "jointPose",
    "cloneJointPose",
    "thisJointPose",
    "awayjs-renderergl/lib/animators/data/Skeleton",
    "Skeleton",
    "jointFromName",
    "jointIndex",
    "jointIndexFromName",
    "ADDITIVE",
    "awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase",
    "AnimationNodeBase",
    "AnimationClipNodeBase",
    "_pLooping",
    "_pTotalDuration",
    "_pStitchDirty",
    "_pStitchFinalFrame",
    "_pNumFrames",
    "_pDurations",
    "_pTotalDelta",
    "fixedFrameRate",
    "_pUpdateStitch",
    "_pLastFrame",
    "awayjs-display/lib/animators/nodes/AnimationNodeBase",
    "awayjs-renderergl/lib/animators/nodes/ParticleAccelerationNode",
    "ParticleNodeBase",
    "ParticleAccelerationState",
    "ParticleAccelerationNode",
    "acceleration",
    "_pStateClass",
    "_acceleration",
    "pGetAGALVertexCode",
    "accelerationValue",
    "_pMode",
    "getFreeVertexAttribute",
    "ACCELERATION_INDEX",
    "removeVertexTempUsage",
    "animator",
    "param",
    "tempAcceleration",
    "ACCELERATION_VECTOR3D",
    "_pOneData",
    "awayjs-renderergl/lib/animators/nodes/ParticleNodeBase",
    "awayjs-renderergl/lib/animators/states/ParticleAccelerationState",
    "awayjs-renderergl/lib/animators/nodes/ParticleBezierCurveNode",
    "ParticleBezierCurveState",
    "ParticleBezierCurveNode",
    "controlPoint",
    "endPoint",
    "_iControlPoint",
    "_iEndPoint",
    "controlValue",
    "BEZIER_CONTROL_INDEX",
    "endValue",
    "BEZIER_END_INDEX",
    "rev_time",
    "time_2",
    "time_temp",
    "distance",
    "bezierControl",
    "BEZIER_CONTROL_VECTOR3D",
    "bezierEnd",
    "BEZIER_END_VECTOR3D",
    "awayjs-renderergl/lib/animators/states/ParticleBezierCurveState",
    "awayjs-renderergl/lib/animators/nodes/ParticleBillboardNode",
    "ParticleBillboardState",
    "ParticleBillboardNode",
    "billboardAxis",
    "_iBillboardAxis",
    "rotationMatrixRegister",
    "MATRIX_INDEX",
    "shaderRegisterElement",
    "awayjs-renderergl/lib/animators/states/ParticleBillboardState",
    "awayjs-renderergl/lib/animators/nodes/ParticleColorNode",
    "ColorTransform",
    "ParticleColorState",
    "ParticleColorNode",
    "usesMultiplier",
    "usesOffset",
    "usesCycle",
    "usesPhase",
    "startColor",
    "endColor",
    "cycleDuration",
    "cyclePhase",
    "_iUsesMultiplier",
    "_iUsesOffset",
    "_iUsesCycle",
    "_iUsesPhase",
    "_iStartColor",
    "_iEndColor",
    "_iCycleDuration",
    "_iCyclePhase",
    "cycleConst",
    "CYCLE_INDEX",
    "sin",
    "getFreeVertexSingleTemp",
    "startMultiplierValue",
    "deltaMultiplierValue",
    "START_MULTIPLIER_INDEX",
    "DELTA_MULTIPLIER_INDEX",
    "startOffsetValue",
    "deltaOffsetValue",
    "START_OFFSET_INDEX",
    "DELTA_OFFSET_INDEX",
    "COLOR_START_COLORTRANSFORM",
    "COLOR_END_COLORTRANSFORM",
    "redMultiplier",
    "greenMultiplier",
    "blueMultiplier",
    "alphaMultiplier",
    "redOffset",
    "greenOffset",
    "blueOffset",
    "alphaOffset",
    "awayjs-core/lib/geom/ColorTransform",
    "awayjs-renderergl/lib/animators/states/ParticleColorState",
    "awayjs-renderergl/lib/animators/nodes/ParticleFollowNode",
    "ParticleFollowState",
    "ParticleFollowNode",
    "usesPosition",
    "usesRotation",
    "smooth",
    "_iUsesPosition",
    "_iUsesRotation",
    "_iSmooth",
    "rotationAttribute",
    "FOLLOW_ROTATION_INDEX",
    "temp3",
    "temp4",
    "FOLLOW_POSITION_INDEX",
    "awayjs-renderergl/lib/animators/states/ParticleFollowState",
    "awayjs-renderergl/lib/animators/nodes/ParticleInitialColorNode",
    "ParticleInitialColorState",
    "ParticleInitialColorNode",
    "initialColor",
    "_iInitialColor",
    "multiplierValue",
    "MULTIPLIER_INDEX",
    "offsetValue",
    "OFFSET_INDEX",
    "COLOR_INITIAL_COLORTRANSFORM",
    "awayjs-renderergl/lib/animators/states/ParticleInitialColorState",
    "_pDataLength",
    "MODES",
    "_priority",
    1,
    2,
    "awayjs-renderergl/lib/animators/nodes/ParticleOrbitNode",
    "ParticleOrbitState",
    "ParticleOrbitNode",
    "usesEulers",
    "radius",
    "eulers",
    "_iUsesEulers",
    "_iRadius",
    "_iEulers",
    "orbitRegister",
    "ORBIT_INDEX",
    "eulersMatrixRegister",
    "EULERS_INDEX",
    "cos",
    "degree",
    "orbit",
    "ORBIT_VECTOR3D",
    "PI",
    "awayjs-renderergl/lib/animators/states/ParticleOrbitState",
    "awayjs-renderergl/lib/animators/nodes/ParticleOscillatorNode",
    "ParticleOscillatorState",
    "ParticleOscillatorNode",
    "oscillator",
    "_iOscillator",
    "oscillatorRegister",
    "OSCILLATOR_INDEX",
    "dgree",
    "drift",
    "OSCILLATOR_VECTOR3D",
    "awayjs-renderergl/lib/animators/states/ParticleOscillatorState",
    "awayjs-renderergl/lib/animators/nodes/ParticlePositionNode",
    "ParticlePositionState",
    "ParticlePositionNode",
    "_iPosition",
    "POSITION_INDEX",
    "POSITION_VECTOR3D",
    "awayjs-renderergl/lib/animators/states/ParticlePositionState",
    "awayjs-renderergl/lib/animators/nodes/ParticleRotateToHeadingNode",
    "ParticleRotateToHeadingState",
    "ParticleRotateToHeadingNode",
    "nrmVel",
    "xAxis",
    "R",
    "R_rev",
    "cos2",
    "tempSingle",
    "awayjs-renderergl/lib/animators/states/ParticleRotateToHeadingState",
    "awayjs-renderergl/lib/animators/nodes/ParticleRotateToPositionNode",
    "ParticleRotateToPositionState",
    "ParticleRotateToPositionNode",
    "nrmDirection",
    "o_temp",
    "awayjs-renderergl/lib/animators/states/ParticleRotateToPositionState",
    "awayjs-renderergl/lib/animators/nodes/ParticleRotationalVelocityNode",
    "ParticleRotationalVelocityState",
    "ParticleRotationalVelocityNode",
    "rotationalVelocity",
    "_iRotationalVelocity",
    "rotationRegister",
    "ROTATIONALVELOCITY_INDEX",
    "Rtemp",
    "rotate",
    "ROTATIONALVELOCITY_VECTOR3D",
    "normalize",
    "awayjs-renderergl/lib/animators/states/ParticleRotationalVelocityState",
    "awayjs-renderergl/lib/animators/nodes/ParticleScaleNode",
    "ParticleScaleState",
    "ParticleScaleNode",
    "minScale",
    "maxScale",
    "_iMinScale",
    "_iMaxScale",
    "scaleRegister",
    "SCALE_INDEX",
    "scale",
    "SCALE_VECTOR3D",
    "abs",
    "awayjs-renderergl/lib/animators/states/ParticleScaleState",
    "awayjs-renderergl/lib/animators/nodes/ParticleSegmentedColorNode",
    "ParticleSegmentedColorState",
    "ParticleSegmentedColorNode",
    "numSegmentPoint",
    "segmentPoints",
    "_iNumSegmentPoint",
    "_iSegmentPoints",
    "accMultiplierColor",
    "tempColor",
    "accTime",
    "lifeTimeRegister",
    "TIME_DATA_INDEX",
    "startMulValue",
    "deltaMulValues",
    "deltaOffsetValues",
    "awayjs-renderergl/lib/animators/states/ParticleSegmentedColorState",
    "awayjs-renderergl/lib/animators/nodes/ParticleSpriteSheetNode",
    "ParticleSpriteSheetState",
    "ParticleSpriteSheetNode",
    "numColumns",
    "numRows",
    "totalFrames",
    "MAX_VALUE",
    "_iNumColumns",
    "_iNumRows",
    "_iTotalFrames",
    "min",
    "uvParamConst1",
    "uvParamConst2",
    "UV_INDEX_0",
    "UV_INDEX_1",
    "uTotal",
    "uStep",
    "vStep",
    "uSpeed",
    "cycle",
    "phaseTime",
    "vOffset",
    "v",
    "uvCycle",
    "UV_VECTOR3D",
    "awayjs-renderergl/lib/animators/states/ParticleSpriteSheetState",
    "ParticleTimeState",
    "_iUsesDuration",
    "_iUsesLooping",
    "_iUsesDelay",
    "timeStreamRegister",
    "TIME_STREAM_INDEX",
    "timeConst",
    "TIME_CONSTANT_INDEX",
    "div",
    "sge",
    "awayjs-renderergl/lib/animators/states/ParticleTimeState",
    "awayjs-renderergl/lib/animators/nodes/ParticleUVNode",
    "ParticleUVState",
    "ParticleUVNode",
    "axis",
    "_cycle",
    "_scale",
    "_axis",
    "updateUVData",
    "uvConst",
    "UV_INDEX",
    "axisIndex",
    "_iUvData",
    "U_AXIS",
    "V_AXIS",
    "awayjs-renderergl/lib/animators/states/ParticleUVState",
    "awayjs-renderergl/lib/animators/nodes/ParticleVelocityNode",
    "ParticleVelocityState",
    "ParticleVelocityNode",
    "velocity",
    "_iVelocity",
    "velocityValue",
    "VELOCITY_INDEX",
    "_tempVelocity",
    "VELOCITY_VECTOR3D",
    "awayjs-renderergl/lib/animators/states/ParticleVelocityState",
    "awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode",
    "SkeletonBinaryLERPState",
    "SkeletonBinaryLERPNode",
    "awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState",
    "awayjs-renderergl/lib/animators/nodes/SkeletonClipNode",
    "SkeletonClipState",
    "SkeletonClipNode",
    "_frames",
    "highQuality",
    "addFrame",
    "skeletonPose",
    "p1",
    "p2",
    "awayjs-renderergl/lib/animators/states/SkeletonClipState",
    "awayjs-renderergl/lib/animators/nodes/SkeletonDifferenceNode",
    "SkeletonDifferenceState",
    "SkeletonDifferenceNode",
    "awayjs-renderergl/lib/animators/states/SkeletonDifferenceState",
    "awayjs-renderergl/lib/animators/nodes/SkeletonDirectionalNode",
    "SkeletonDirectionalState",
    "SkeletonDirectionalNode",
    "awayjs-renderergl/lib/animators/states/SkeletonDirectionalState",
    "awayjs-renderergl/lib/animators/nodes/SkeletonNaryLERPNode",
    "SkeletonNaryLERPState",
    "SkeletonNaryLERPNode",
    "_iInputs",
    "_numInputs",
    "getInputIndex",
    "input",
    "getInputAt",
    "addInput",
    "awayjs-renderergl/lib/animators/states/SkeletonNaryLERPState",
    "awayjs-renderergl/lib/animators/nodes/VertexClipNode",
    "VertexClipState",
    "VertexClipNode",
    "_translations",
    "awayjs-renderergl/lib/animators/states/VertexClipState",
    "awayjs-renderergl/lib/animators/states/AnimationClipState",
    "AnimationStateBase",
    "AnimationClipState",
    "animationClipNode",
    "_pFramesDirty",
    "_animationClipNode",
    "_pUpdateFrames",
    "_pBlendWeight",
    "_pCurrentFrame",
    "_pNextFrame",
    "looping",
    "_pStartTime",
    "totalDuration",
    "_pTime",
    "_pUpdateTime",
    "_pTimeDir",
    "lastFrame",
    "notifyPlaybackComplete",
    "floor",
    "dur",
    "frameTime",
    "durations",
    "_animationStatePlaybackComplete",
    "PLAYBACK_COMPLETE",
    "_pAnimator",
    "awayjs-renderergl/lib/animators/states/AnimationStateBase",
    "_pRootDelta",
    "_pPositionDeltaDirty",
    "_pAnimationNode",
    "_pUpdatePositionDelta",
    "awayjs-renderergl/lib/animators/states/IAnimationState",
    "awayjs-renderergl/lib/animators/states/ISkeletonAnimationState",
    "awayjs-renderergl/lib/animators/states/IVertexAnimationState",
    "ParticleStateBase",
    "particleAccelerationNode",
    "_particleAccelerationNode",
    "updateAccelerationData",
    "FLOAT_3",
    "_halfAcceleration",
    "awayjs-renderergl/lib/animators/states/ParticleStateBase",
    "particleBezierCurveNode",
    "_particleBezierCurveNode",
    "_controlPoint",
    "_endPoint",
    "controlIndex",
    "endIndex",
    "MathConsts",
    "Orientation3D",
    "particleNode",
    "_matrix",
    "_billboardAxis",
    "comps",
    "pos",
    "sceneTransform",
    "look",
    "right",
    "crossProduct",
    "decompose",
    "AXIS_ANGLE",
    "copyColumnFrom",
    "appendRotation",
    "RADIANS_TO_DEGREES",
    "append",
    "inverseSceneTransform",
    "identity",
    "awayjs-core/lib/geom/MathConsts",
    "awayjs-core/lib/geom/Orientation3D",
    "particleColorNode",
    "_particleColorNode",
    "_usesMultiplier",
    "_usesOffset",
    "_usesCycle",
    "_usesPhase",
    "_startColor",
    "_endColor",
    "_cycleDuration",
    "_cyclePhase",
    "updateColorData",
    "dataOffset",
    "_cycleData",
    "FLOAT_4",
    "_startMultiplierData",
    "_deltaMultiplierData",
    "_startOffsetData",
    "_deltaOffsetData",
    "particleFollowNode",
    "_targetPos",
    "_targetEuler",
    "_temp",
    "_particleFollowNode",
    "_smooth",
    "_followTarget",
    "scaleX",
    "scaleY",
    "scaleZ",
    "rotationX",
    "rotationY",
    "rotationZ",
    "scaleBy",
    "DEGREES_TO_RADIANS",
    "_prePos",
    "_preEuler",
    "currentTime",
    "deltaTime",
    "needProcess",
    "processPositionAndRotation",
    "processPosition",
    "precessRotation",
    "changed",
    "interpolatedPos",
    "posVelocity",
    "inc",
    "add",
    "interpolatedRotation",
    "rotationVelocity",
    "particleInitialColorNode",
    "_particleInitialColorNode",
    "_initialColor",
    "_multiplierData",
    "_offsetData",
    "particleOrbitNode",
    "_particleOrbitNode",
    "_usesEulers",
    "_eulers",
    "_radius",
    "updateOrbitData",
    "_orbitData",
    "_eulersMatrix",
    "X_AXIS",
    "Y_AXIS",
    "Z_AXIS",
    "particleOscillatorNode",
    "_particleOscillatorNode",
    "_oscillator",
    "updateOscillatorData",
    "_oscillatorData",
    "particlePositionNode",
    "_particlePositionNode",
    "_position",
    "getPositions",
    "_pDynamicProperties",
    "_pDynamicPropertiesDirty",
    "_pUpdateDynamicProperties",
    "particleRotateToPositionNode",
    "_particleRotateToPositionNode",
    "_offset",
    "particleRotationNode",
    "_particleRotationalVelocityNode",
    "_rotationalVelocity",
    "updateRotationalVelocityData",
    "getRotationalVelocities",
    "setRotationalVelocities",
    "_rotationalVelocityData",
    "rotation",
    "particleScaleNode",
    "_particleScaleNode",
    "_minScale",
    "_maxScale",
    "updateScaleData",
    "_scaleData",
    "particleSegmentedColorNode",
    "_segmentPoints",
    "_numSegmentPoint",
    "_timeLifeData",
    "particleSpriteSheetNode",
    "_particleSpriteSheetNode",
    "_totalFrames",
    "_numColumns",
    "_numRows",
    "updateSpriteSheetData",
    "_spriteSheetData",
    "_particleNode",
    "_pNeedUpdateTime",
    "animationParticle",
    "particleTimeNode",
    "_particleTimeNode",
    "particleTime",
    "particleUVNode",
    "_particleUVNode",
    "particleVelocityNode",
    "_particleVelocityNode",
    "_velocity",
    "getVelocities",
    "setVelocities",
    "skeletonAnimationNode",
    "_blendWeight",
    "_skeletonPose",
    "_skeletonPoseDirty",
    "_skeletonAnimationNode",
    "_inputA",
    "inputA",
    "_inputB",
    "inputB",
    "updateSkeletonPose",
    "deltA",
    "deltB",
    "endPose",
    "endPoses",
    "poses1",
    "poses2",
    "pose1",
    "pose2",
    "lerp",
    "skeletonClipNode",
    "_rootPos",
    "_skeletonClipNode",
    "frames",
    "_currentPose",
    "_nextPose",
    "currentPose",
    "nextPose",
    "slerp",
    "p3",
    "totalDelta",
    "_pOldFrame",
    "dx",
    "dy",
    "dz",
    "stitchFinalFrame",
    "_baseInput",
    "baseInput",
    "_differenceInput",
    "differenceInput",
    "basePoses",
    "diffPoses",
    "base",
    "diff",
    "basePos",
    "diffPos",
    "_tempQuat",
    "multiply",
    "_direction",
    "_blendDirty",
    "_forward",
    "forward",
    "_backward",
    "backward",
    "_left",
    "left",
    "_right",
    "updateBlend",
    "_pUdateTime",
    "_blendWeights",
    "_inputs",
    "numInputs",
    "getBlendWeightAt",
    "setBlendWeightAt",
    "poses",
    "endTr",
    "endQuat",
    "firstPose",
    "w0",
    "x0",
    "y0",
    "z0",
    "vertexClipNode",
    "_vertexClipNode",
    "_currentGeometry",
    "_nextGeometry",
    "awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionNode",
    "CrossfadeTransitionState",
    "CrossfadeTransitionNode",
    "awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionState",
    "_crossfadeTransitionNode",
    "startBlend",
    "blendSpeed",
    "_animationStateTransitionComplete",
    "awayjs-renderergl/lib/animators/transitions/CrossfadeTransition",
    "CrossfadeTransition",
    "startNode",
    "endNode",
    "crossFadeTransitionNode",
    "awayjs-renderergl/lib/animators/transitions/IAnimationTransition",
    "awayjs-renderergl/lib/base/ParticleGeometry",
    "Geometry",
    "ParticleGeometry",
    "apply",
    "arguments",
    "awayjs-display/lib/base/Geometry",
    "ErrorBase",
    "message",
    "awayjs-core/lib/errors/ErrorBase",
    "EventBase",
    "_animator",
    "_animationState",
    "_animationNode",
    "awayjs-core/lib/events/EventBase",
    "awayjs-renderergl/lib/events/PassEvent",
    "PassEvent",
    "_pass",
    "INVALIDATE",
    "rttManager",
    "awayjs-renderergl/lib/events/ShadingMethodEvent",
    "ShadingMethodEvent",
    "SHADER_INVALIDATED",
    "awayjs-renderergl/lib/filters/BlurFilter3D",
    "Filter3DHBlurTask",
    "Filter3DVBlurTask",
    "Filter3DBase",
    "BlurFilter3D",
    "blurX",
    "blurY",
    "stepSize",
    "_hBlurTask",
    "_vBlurTask",
    "addTask",
    "amount",
    "mainTarget",
    "awayjs-renderergl/lib/filters/Filter3DBase",
    "awayjs-renderergl/lib/filters/tasks/Filter3DHBlurTask",
    "awayjs-renderergl/lib/filters/tasks/Filter3DVBlurTask",
    "awayjs-renderergl/lib/filters/CompositeFilter3D",
    "Filter3DCompositeTask",
    "CompositeFilter3D",
    "exposure",
    "_compositeTask",
    "overlayTexture",
    "awayjs-renderergl/lib/filters/tasks/Filter3DCompositeTask",
    "_textureWidth",
    "_textureHeight",
    "Filter3DTaskBase",
    "_data",
    "_overlayTexture",
    "_overlayWidth",
    "_overlayHeight",
    "getFragmentCode",
    "op",
    "camera3D",
    "_scaledTextureWidth",
    "_scaledTextureHeight",
    "awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase",
    "awayjs-renderergl/lib/filters/tasks/Filter3DFXAATask",
    "Filter3DFXAATask",
    "_stepSize",
    "_amount",
    "invalidateProgram",
    "updateBlurData",
    "calculateStepSize",
    "uv_in",
    "lum",
    "pix",
    "mOne",
    "mul",
    "delta1",
    "delta2",
    "delta3",
    "delta4",
    "_0",
    "_025",
    "_05",
    "_075",
    "_1",
    "uv",
    "uvx",
    "uvy",
    "TL",
    "TR",
    "BL",
    "BR",
    "M",
    "tempf1",
    "tempf2",
    "tempf3",
    "tex",
    "dir",
    "dirx",
    "diry",
    "dirxy",
    "dirReduce",
    "inverseDirAdjustment",
    "result1",
    "result2",
    "fxaaReduceMin",
    "fxaaReduceMul",
    "fxaaSpanMax",
    "lumaMin",
    "lumaMax",
    "sample",
    "tempxy",
    "join",
    "updateTextures",
    "invH",
    "_realStepSize",
    "MAX_AUTO_SAMPLES",
    "numSamples",
    "invW",
    "Image2D",
    "_textureDimensionsInvalid",
    "_program3DInvalid",
    "_textureScale",
    "_target",
    "_program3D",
    "updateProgram",
    "getVertexCode",
    "awayjs-core/lib/image/Image2D",
    "ImageUtils",
    "_viewWidth",
    "_viewHeight",
    "_buffersInvalid",
    "_renderToTextureRect",
    "_instances",
    "rttBufferManager",
    "getRTTBufferManagerFromStage",
    "vo",
    "RTTBufferManagerVO",
    "stage3d",
    "rttbfm",
    "c",
    "deleteRTTBufferManager",
    "updateRTTBuffers",
    "_textureRatioX",
    "_textureRatioY",
    "getBestPowerOf2",
    "_renderToTextureVertexBuffer",
    "_renderToScreenVertexBuffer",
    "_indexBuffer",
    "textureVerts",
    "screenVerts",
    "createIndexBuffer",
    "u1",
    "u2",
    "v1",
    "v2",
    "awayjs-core/lib/utils/ImageUtils",
    "awayjs-renderergl/lib/pick/ShaderPicker",
    "Debug",
    "Matrix3DUtils",
    "ContextGLTriangleFace",
    "ShaderPicker",
    "shaderPickingDetails",
    "_onlyMouseEnabled",
    "_interactives",
    "_localHitPosition",
    "_hitUV",
    "_localHitNormal",
    "_rayPos",
    "_rayDir",
    "_shaderPickingDetails",
    "_id",
    "_viewportData",
    "_boundOffsetScale",
    "getViewCollision",
    "view",
    "collector",
    "iEntityCollector",
    "renderer",
    "_context",
    "_projX",
    "_projY",
    "_potentialFound",
    "_blendedRenderableHead",
    "_opaqueRenderableHead",
    "_bitmapImage2D",
    "_hitColor",
    "getPixel",
    "_hitRenderable",
    "_hitEntity",
    "_iIsMouseEnabled",
    "_collisionVO",
    "_iPickingCollisionVO",
    "getHitDetails",
    "localPosition",
    "localNormal",
    "_faceIndex",
    "getSceneCollision",
    "direction",
    "scene",
    "MOUSE_SCISSOR_RECT",
    "_interactiveId",
    "_objectProgram",
    "initObjectProgram",
    "CALCULATION_MATRIX",
    "setCulling",
    "bothSides",
    "NONE",
    "BACK",
    "projection",
    "coordinateSystem",
    "setProgramConstantsFromMatrix",
    "getIndexBufferVO",
    "draw",
    "numIndices",
    "updateRay",
    "getRay",
    "vertexCode",
    "fragmentCode",
    "throwPIR",
    "initTriangleProgram",
    "_triangleProgram",
    "getApproximatePosition",
    "getPreciseDetails",
    "bounds",
    "getBox",
    "col",
    "scX",
    "scY",
    "scZ",
    "offsX",
    "offsY",
    "offsZ",
    "localViewProjection",
    "depth",
    "setScissorRectangle",
    "t1",
    "t2",
    "t3",
    "v0x",
    "v0y",
    "v0z",
    "v1x",
    "v1y",
    "v1z",
    "v2x",
    "v2y",
    "v2z",
    "ni1",
    "ni2",
    "ni3",
    "n1",
    "n2",
    "n3",
    "nLength",
    "dot00",
    "dot01",
    "dot02",
    "dot11",
    "dot12",
    "invDenom",
    "ui1",
    "ui2",
    "ui3",
    "s0x",
    "s0y",
    "s0z",
    "s1x",
    "s1y",
    "s1z",
    "nl",
    "_pGetSubGeometry",
    "posDim",
    "dimensions",
    "uvDim",
    "normalDim",
    "getPrecisePosition",
    "invSceneTransform",
    "px",
    "py",
    "pz",
    "rx",
    "ry",
    "rz",
    "RAW_DATA_CONTAINER",
    "copyRawDataTo",
    "awayjs-core/lib/geom/Matrix3DUtils",
    "awayjs-core/lib/utils/Debug",
    "awayjs-stagegl/lib/base/ContextGLTriangleFace",
    "BlendMode",
    "BasicMaterialPass",
    "RenderBase",
    "material",
    "renderableClass",
    "renderPool",
    "_material",
    "_pAddPass",
    "onClear",
    "_pUpdateRender",
    "_pRequiresBlending",
    "NORMAL",
    "alphaBlending",
    "colorTransform",
    "preserveAlpha",
    "setBlendMode",
    "LAYER",
    "awayjs-core/lib/image/BlendMode",
    "awayjs-renderergl/lib/render/RenderBase",
    "awayjs-renderergl/lib/render/passes/BasicMaterialPass",
    "RenderPassBase",
    "_shader",
    "invalidate",
    "_textureVO",
    "getTextureAt",
    "_iIncludeDependencies",
    "projectionDependencies",
    "uvDependencies",
    "_iInitConstantData",
    "_fragmentConstantsIndex",
    "_iGetFragmentCode",
    "registerCache",
    "sharedRegisters",
    "targetReg",
    "dataReg1",
    "getFreeFragmentConstant",
    "dataReg2",
    "getFreeFragmentVectorTemp",
    "projectionFragment",
    "albedo",
    "uvVarying",
    "cutOffReg",
    "removeFragmentTempUsage",
    "awayjs-renderergl/lib/render/RenderPassBase",
    "viewDirDependencies",
    "globalPosDependencies",
    "viewDirVarying",
    "far",
    "awayjs-renderergl/lib/render/IRenderClass",
    "AbstractionBase",
    "RenderOwnerEvent",
    "MaterialBase",
    "DefaultMaterialManager",
    "usages",
    "_forceSeparateMVP",
    "_invalidAnimation",
    "_invalidRender",
    "_invalidImages",
    "_passes",
    "_imageIndices",
    "images",
    "samplers",
    "_onInvalidateAnimationDelegate",
    "onInvalidateAnimation",
    "_onInvalidatePassesDelegate",
    "onInvalidatePasses",
    "_renderableClass",
    "INVALIDATE_ANIMATION",
    "INVALIDATE_PASSES",
    "_onPassInvalidateDelegate",
    "onPassInvalidate",
    "_updateAnimation",
    "_renderOrderId",
    "_updateImages",
    "_numImages",
    "useImageRect",
    "imageRect",
    "useAlphaPremultiplied",
    "alphaPremultiplied",
    "useBothSides",
    "animateUVs",
    "usesColorTransform",
    "useColorTransform",
    "getImageIndex",
    "texture",
    "onInvalidate",
    "enabledGPUAnimation",
    "_getEnabledGPUAnimation",
    "mult",
    "usesAnimation",
    "numTextures",
    "getNumTextures",
    "numImages",
    "image",
    "sampler",
    "getNumImages",
    "getImageAt",
    "style",
    "getDefaultImage2D",
    "getSamplerAt",
    "getDefaultSampler",
    "_pRemovePass",
    "_pClearPasses",
    "owners",
    "iOwners",
    "numOwners",
    "awayjs-core/lib/library/AbstractionBase",
    "awayjs-display/lib/events/RenderOwnerEvent",
    "awayjs-display/lib/managers/DefaultMaterialManager",
    "awayjs-display/lib/materials/MaterialBase",
    "invalidateShader",
    "_iGetPreLightingVertexCode",
    "_iGetPreLightingFragmentCode",
    "_iGetVertexCode",
    "_iGetNormalVertexCode",
    "_iGetNormalFragmentCode",
    "_pool",
    "_renderClass",
    "getClass",
    "AssetEvent",
    "skybox",
    "_skybox",
    "_texture",
    "CLEAR",
    "usesLocalPosFragment",
    "localPositionVarying",
    "_setRenderState",
    "awayjs-core/lib/events/AssetEvent",
    "PassBase",
    "_diffuseR",
    "_diffuseG",
    "_diffuseB",
    "_diffuseA",
    "regCache",
    "sharedReg",
    "alphaReg",
    "getFreeFragmentSingleTemp",
    "colorBufferIndex",
    "colorVarying",
    "diffuseInputReg",
    "_render",
    "awayjs-renderergl/lib/render/passes/PassBase",
    "awayjs-renderergl/lib/render/passes/ILightingPass",
    "awayjs-renderergl/lib/render/passes/IPass",
    "_preserveAlpha",
    "AttributesBuffer",
    "RenderableBase",
    "billboard",
    "_billboard",
    "_samplerGeometry",
    "billboardWidth",
    "billboardHeight",
    "billboardRect",
    "_pGetRenderOwner",
    "globalPositionVertex",
    "viewMatrixReg",
    "viewMatrixIndex",
    "sceneMatrixIndex",
    "matrix3D",
    "awayjs-core/lib/attributes/AttributesBuffer",
    "awayjs-renderergl/lib/renderables/RenderableBase",
    "sd",
    "standardDerivatives",
    "out",
    "curve",
    "curvex",
    "curvey",
    "curvez",
    "free",
    "free1",
    "free2",
    "d2",
    "fixa",
    "fixb",
    "constantsReg",
    "_aa",
    "applyAA",
    "_constants",
    "awayjs-renderergl/lib/renderables/IRenderableClass",
    "lineSegment",
    "_thickness",
    "_lineSegment",
    "_calcMatrix",
    "_lineGeometry",
    "startPostion",
    "end",
    "endPosition",
    "thickness",
    "setThickness",
    "colorDependencies",
    "pONE_VECTOR",
    "pFRONT_VECTOR",
    "_pGetOverflowRenderable",
    "indexOffset",
    "_renderer",
    "RenderableOwnerEvent",
    "_geometryDirty",
    "_renderOwnerDirty",
    "_onRenderOwnerUpdatedDelegate",
    "_onRenderOwnerUpdated",
    "_onInvalidateGeometryDelegate",
    "onInvalidateGeometry",
    "INVALIDATE_RENDER_OWNER",
    "INVALIDATE_GEOMETRY",
    "_updateGeometry",
    "_subGeometryVO",
    "_updateRenderOwner",
    "_subGeometry",
    "getDefaultMaterial",
    "awayjs-display/lib/events/RenderableOwnerEvent",
    "_vertexArray",
    "_geometry",
    "awayjs-renderergl/lib/shaders/LightingShader",
    "LightSources",
    "ContextGLProfile",
    "LightingCompiler",
    "LightingShader",
    "lightingPass",
    "_includeCasters",
    "_lightingPass",
    "numPointLights",
    "numDirectionalLights",
    "numLightProbes",
    "numAllLights",
    "diffuseLightSources",
    "_iUsesDiffuse",
    "specularLightSources",
    "_iUsesSpecular",
    "combinedLightSources",
    "usesLightFallOff",
    "enableLightFallOff",
    "BASELINE_CONSTRAINED",
    "usesCommonData",
    "numLights",
    "usesLights",
    "LIGHTS",
    "usesProbes",
    "PROBES",
    "usesLightsForSpecular",
    "usesProbesForSpecular",
    "usesLightsForDiffuse",
    "usesProbesForDiffuse",
    "usesShadows",
    "_iUsesShadows",
    "createCompiler",
    "lightPicker",
    "collectLights",
    "updateProbes",
    "dirLight",
    "pointLight",
    "dirPos",
    "numLightTypes",
    "ambientR",
    "ambientG",
    "ambientB",
    "lightVertexConstantIndex",
    "lightFragmentConstantIndex",
    "cast",
    "directionalLightsOffset",
    "castingDirectionalLights",
    "sceneDirection",
    "_iAmbientR",
    "_iAmbientG",
    "_iAmbientB",
    "usesTangentSpace",
    "_pInverseSceneMatrix",
    "_iDiffuseR",
    "_iDiffuseG",
    "_iDiffuseB",
    "_iSpecularR",
    "_iSpecularG",
    "_iSpecularB",
    "pointLightsOffset",
    "castingPointLights",
    "usesGlobalPosFragment",
    "_pRadius",
    "_pFallOffFactor",
    "probe",
    "lightProbes",
    "lightProbeWeights",
    "lightProbesOffset",
    "addDiff",
    "addSpec",
    "diffuseMap",
    "lightProbeDiffuseIndices",
    "diffuseSampler",
    "mipmap",
    "specularMap",
    "lightProbeSpecularIndices",
    "probeWeightsIndex",
    "awayjs-display/lib/materials/LightSources",
    "awayjs-renderergl/lib/shaders/compilers/LightingCompiler",
    "awayjs-stagegl/lib/base/ContextGLProfile",
    "awayjs-renderergl/lib/shaders/RegisterPool",
    "RegisterPool",
    "regCount",
    "persistent",
    "_regName",
    "_regCount",
    "_persistent",
    "initRegisters",
    "requestFreeVectorReg",
    "isRegisterUsed",
    "_usedVectorCount",
    "_vectorRegisters",
    "requestFreeRegComponent",
    "_usedSingleCount",
    "_registerComponents",
    "addUsage",
    "register",
    "usageCount",
    "_component",
    "removeUsage",
    "hasRegisteredRegs",
    "hash",
    "_initPool",
    "_regPool",
    "_regCompsPool",
    "_initArray",
    "vectorRegisters",
    "registerComponents",
    "val",
    "ArgumentError",
    "CompilerBase",
    "_blendFactorSource",
    "_blendFactorDest",
    "_invalidShader",
    "_invalidProgram",
    "_animationVertexCode",
    "_animationFragmentCode",
    "usesBlending",
    "usesUVBuffer",
    "depthCompareMode",
    "writeDepth",
    "_defaultCulling",
    "imageIndices",
    "_updateProgram",
    "_programData",
    "secondaryUVDependencies",
    "outputsTangentNormals",
    "pInitRegisterIndices",
    "commonsDataIndex",
    "cameraPositionIndex",
    "uvBufferIndex",
    "uvTransformIndex",
    "colorTransformIndex",
    "secondaryUVBufferIndex",
    "normalBufferIndex",
    "tangentBufferIndex",
    "sceneNormalMatrixIndex",
    "initConstantData",
    "SOURCE_ALPHA",
    "ONE_MINUS_SOURCE_ALPHA",
    "MULTIPLY",
    "SOURCE_COLOR",
    "ADD",
    "ALPHA",
    "uvTransform",
    "_iAssignedColorTransform",
    "compiler",
    "compile",
    "_calcAnimationCode",
    "getProgramData",
    "postAnimationFragmentCode",
    "awayjs-core/lib/errors/ArgumentError",
    "awayjs-renderergl/lib/shaders/compilers/CompilerBase",
    "_numUsedVertexConstants",
    "_numUsedFragmentConstants",
    "_numUsedVaryings",
    "_profile",
    "_fragmentTempCache",
    "_vertexTempCache",
    "_varyingCache",
    "_textureCache",
    "_vertexAttributesCache",
    "_fragmentConstantsCache",
    "_vertexConstantsCache",
    "_fragmentOutputRegister",
    "_vertexOutputRegister",
    "_vertexAttributesOffset",
    "_vertexConstantOffset",
    "_varyingsOffset",
    "_fragmentConstantOffset",
    "getFreeTextureReg",
    "awayjs-renderergl/lib/shaders/ShaderRegisterData",
    "ShaderRegisterData",
    "textures",
    "component",
    "_toStr",
    "COMPONENTS",
    "_pVertexCode",
    "_pFragmentCode",
    "_pPostAnimationFragmentCode",
    "_pRenderableClass",
    "_pRenderPass",
    "_pShader",
    "_pSharedRegisters",
    "_pRegisterCache",
    "pCompileDependencies",
    "compileColorTransformCode",
    "fragmentOutputRegister",
    "_pAnimatableAttributes",
    "_pAnimationTargetRegisters",
    "_uvSource",
    "_uvTarget",
    "ct1",
    "ct2",
    "compileGlobalPositionCode",
    "compileLocalPositionCode",
    "compileUVCode",
    "compileSecondaryUVCode",
    "compileNormalCode",
    "compileViewDirCode",
    "sceneMatrixReg",
    "globalPositionVarying",
    "uvAttributeReg",
    "varying",
    "uvTransform1",
    "uvTransform2",
    "secondaryUVVarying",
    "cameraPositionReg",
    "viewDirFragment",
    "animatedTangent",
    "normalFragment",
    "normalMatrix",
    "normalVarying",
    "animatedNormal",
    "bitangent",
    "tangentVarying",
    "bitangentVarying",
    "normalInput",
    "commons",
    "tangentInput",
    "colorInput",
    "shaderLightingObject",
    "_shaderLightingObject",
    "pCompileShadowCode",
    "initLightRegisters",
    "compileLightCode",
    "compileLightProbeCode",
    "_iGetPostLightingVertexCode",
    "_iGetPostLightingFragmentCode",
    "shadowTarget",
    "_dirLightVertexConstants",
    "_pointLightVertexConstants",
    "_dirLightFragmentConstants",
    "_pointLightFragmentConstants",
    "diffuseColorReg",
    "specularColorReg",
    "lightPosReg",
    "lightDirReg",
    "vertexRegIndex",
    "fragmentRegIndex",
    "lightVarying",
    "_iGetPerLightDiffuseFragmentCode",
    "_iGetPerLightSpecularFragmentCode",
    "weightReg",
    "weightComponents",
    "weightRegisters",
    "texReg",
    "_pNumProbeRegisters",
    "_iGetPerProbeDiffuseFragmentCode",
    "_iGetPerProbeSpecularFragmentCode",
    "ceil",
    "awayjs-renderergl/lib/sort/IEntitySorter",
    "headB",
    "fast",
    "slow",
    "result",
    "curr",
    "cmp",
    "aid",
    "bid",
    "ma",
    "mb",
    "awayjs-renderergl/lib/sort/RenderableNullSort",
    "RenderableNullSort",
    "awayjs-renderergl/lib/tools/commands/Merge",
    "Mesh",
    "Merge",
    "keepMaterial",
    "disposeSources",
    "objectSpace",
    "_keepMaterial",
    "_disposeSources",
    "_objectSpace",
    "applyToContainer",
    "receiver",
    "objectContainer",
    "parseContainer",
    "collect",
    "merge",
    "applyToMeshes",
    "meshes",
    "_toDispose",
    "_geomVOs",
    "destMesh",
    "subIdx",
    "oldGeom",
    "destGeom",
    "useSubMaterials",
    "sub",
    "vertices",
    "addSubGeometry",
    "m",
    "calc",
    "iIdx",
    "vIdx",
    "nIdx",
    "tIdx",
    "uIdx",
    "ind",
    "pd",
    "nd",
    "td",
    "ud",
    "getSubGeomData",
    "transformVectors",
    "deltaTransformVectors",
    "GeometryVO",
    "object",
    "child",
    "getChildAt",
    "awayjs-display/lib/entities/Mesh",
    "awayjs-renderergl/lib/tools/data/ParticleGeometryTransform",
    "ParticleGeometryTransform",
    "_defaultVertexTransform",
    "_defaultInvVertexTransform",
    "transpose",
    "_defaultUVTransform",
    "awayjs-renderergl/lib/utils/ParticleGeometryHelper",
    "ParticleGeometryHelper",
    "generateGeometry",
    "geometries",
    "transforms",
    "indicesVector",
    "positionsVector",
    "normalsVector",
    "tangentsVector",
    "uvsVector",
    "vertexCounters",
    "sourceSubGeometries",
    "numSubGeometries",
    "vertexCounter",
    "sub2SubMap",
    "tempVertex",
    "tempNormal",
    "tempTangents",
    "tempUV",
    "MAX_VERTEX",
    "particleData",
    "tempLen",
    "compact",
    "product",
    "sourceUVs",
    "particleGeometryTransform",
    "vertexTransform",
    "invVertexTransform",
    "UVTransform",
    "deltaTransformVector",
    "transformPoint",
    "sourceIndices",
    "particleGeometry",
    "awayjs-renderergl/lib/utils/PerspectiveMatrix3D",
    "PerspectiveMatrix3D",
    "perspectiveFieldOfViewLH",
    "fieldOfViewY",
    "aspectRatio",
    "zNear",
    "zFar",
    "yScale",
    "tan",
    "xScale",
    "SubGeometryVOBase",
    "curveSubGeometry",
    "_curveSubGeometry",
    "_onClearVertices",
    "CLEAR_VERTICES",
    "curves",
    "_drawElements",
    "firstIndex",
    "_drawArrays",
    "firstVertex",
    "drawVertices",
    "_pGetOverflowSubGeometry",
    "awayjs-renderergl/lib/vos/SubGeometryVOBase",
    "awayjs-renderergl/lib/vos/ITextureVOClass",
    "lineSubGeometry",
    "_lineSubGeometry",
    "colors",
    "MappingMode",
    "TextureVOBase",
    "single2DTexture",
    "_single2DTexture",
    "inputReg",
    "wrap",
    "mappingMode",
    "RADIAL_GRADIENT",
    "samplerReg",
    "_samplerIndex",
    "_imageIndex",
    "textureReg",
    "getTextureReg",
    "_textureIndex",
    "_sampler",
    "renderImage",
    "_asset",
    "renderableImage",
    "awayjs-display/lib/textures/MappingMode",
    "awayjs-renderergl/lib/vos/TextureVOBase",
    "singleCubeTexture",
    "_singleCubeTexture",
    "includeInput",
    "SubGeometryUtils",
    "_vertices",
    "_verticesUpdated",
    "_numIndices",
    "_onInvalidateIndicesDelegate",
    "_onInvalidateIndices",
    "_onClearIndicesDelegate",
    "_onClearIndices",
    "_onInvalidateVerticesDelegate",
    "_onInvalidateVertices",
    "_onClearVerticesDelegate",
    "CLEAR_INDICES",
    "_indicesUpdated",
    "_updateIndices",
    "_indices",
    "getVertexBufferVO",
    "bufferId",
    "_updateVertices",
    "size",
    "_overflow",
    "getSubIndices",
    "_attributesBuffer",
    "count",
    "getSubVertices",
    "awayjs-display/lib/utils/SubGeometryUtils",
    "ContextGLTextureFormat",
    "imageIndex",
    "getFormatString",
    "COMPRESSED",
    "COMPRESSED_ALPHA",
    "awayjs-stagegl/lib/base/ContextGLTextureFormat",
    "triangleSubGeometry",
    "_triangleSubGeometry"
  ],
  "mappings": "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",
  "file": "awayjs-renderergl.min.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    null,
    "import ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport LightBase\t\t\t\t\t= require(\"awayjs-display/lib/base/LightBase\");\nimport EntityCollector\t\t\t\t= require(\"awayjs-display/lib/traverse/EntityCollector\");\nimport CollectorBase\t\t\t\t= require(\"awayjs-display/lib/traverse/CollectorBase\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport DirectionalLight\t\t\t\t= require(\"awayjs-display/lib/entities/DirectionalLight\");\nimport PointLight\t\t\t\t\t= require(\"awayjs-display/lib/entities/PointLight\");\nimport ShadowMapperBase\t\t\t\t= require(\"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase\");\n\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLBlendFactor\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLCompareMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport ContextGLClearMask\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLClearMask\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport DepthRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DepthRenderer\");\nimport DistanceRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DistanceRenderer\");\nimport Filter3DRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/Filter3DRenderer\");\nimport Filter3DBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/filters/Filter3DBase\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport SkyboxRenderable\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/SkyboxRenderable\");\nimport RTTBufferManager\t\t\t\t= require(\"awayjs-renderergl/lib/managers/RTTBufferManager\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\n\n/**\n * The DefaultRenderer class provides the default rendering method. It renders the scene graph objects using the\n * materials assigned to them.\n *\n * @class away.render.DefaultRenderer\n */\nclass DefaultRenderer extends RendererBase\n{\n\tpublic _pRequireDepthRender:boolean;\n\n\tprivate _pDistanceRenderer:DepthRenderer;\n\tprivate _pDepthRenderer:DepthRenderer;\n\tprivate _skyboxProjection:Matrix3D = new Matrix3D();\n\tpublic _pFilter3DRenderer:Filter3DRenderer;\n\n\tpublic _pDepthRender:BitmapImage2D;\n\n\tprivate _antiAlias:number = 0;\n\n\tpublic get antiAlias():number\n\t{\n\t\treturn this._antiAlias;\n\t}\n\n\tpublic set antiAlias(value:number)\n\t{\n\t\tif (this._antiAlias == value)\n\t\t\treturn;\n\n\t\tthis._antiAlias = value;\n\n\t\tthis._pBackBufferInvalid = true;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get depthPrepass():boolean\n\t{\n\t\treturn this._depthPrepass;\n\t}\n\n\tpublic set depthPrepass(value:boolean)\n\t{\n\t\tthis._depthPrepass = value;\n\t}\n\n\t/**\n\t *\n\t * @returns {*}\n\t */\n\tpublic get filters3d():Array<Filter3DBase>\n\t{\n\t\treturn this._pFilter3DRenderer? this._pFilter3DRenderer.filters : null;\n\t}\n\tpublic set filters3d(value:Array<Filter3DBase>)\n\t{\n\t\tif (value && value.length == 0)\n\t\t\tvalue = null;\n\n\t\tif (this._pFilter3DRenderer && !value) {\n\t\t\tthis._pFilter3DRenderer.dispose();\n\t\t\tthis._pFilter3DRenderer = null;\n\t\t} else if (!this._pFilter3DRenderer && value) {\n\t\t\tthis._pFilter3DRenderer = new Filter3DRenderer(this._pStage);\n\t\t\tthis._pFilter3DRenderer.filters = value;\n\t\t}\n\n\t\tif (this._pFilter3DRenderer) {\n\t\t\tthis._pFilter3DRenderer.filters = value;\n\t\t\tthis._pRequireDepthRender = this._pFilter3DRenderer.requireDepthRender;\n\t\t} else {\n\t\t\tthis._pRequireDepthRender = false;\n\n\t\t\tif (this._pDepthRender) {\n\t\t\t\tthis._pDepthRender.dispose();\n\t\t\t\tthis._pDepthRender = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new DefaultRenderer object.\n\t *\n\t * @param antiAlias The amount of anti-aliasing to use.\n\t * @param renderMode The render mode to use.\n\t */\n\tconstructor(stage:Stage = null, forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\")\n\t{\n\t\tsuper(stage, null, forceSoftware, profile, mode);\n\n\t\tif (stage)\n\t\t\tthis._shareContext = true;\n\n\t\tthis._pRttBufferManager = RTTBufferManager.getInstance(this._pStage);\n\n\t\tthis._pDepthRenderer = new DepthRenderer(this._pStage);\n\t\tthis._pDistanceRenderer = new DistanceRenderer(this._pStage);\n\n\t\tif (this._width == 0)\n\t\t\tthis.width = window.innerWidth;\n\t\telse\n\t\t\tthis._pRttBufferManager.viewWidth = this._width;\n\n\t\tif (this._height == 0)\n\t\t\tthis.height = window.innerHeight;\n\t\telse\n\t\t\tthis._pRttBufferManager.viewHeight = this._height;\n\t}\n\n\tpublic render(entityCollector:CollectorBase)\n\t{\n\t\tsuper.render(entityCollector);\n\n\t\tif (!this._pStage.recoverFromDisposal()) {//if context has Disposed by the OS,don't render at this frame\n\t\t\tthis._pBackBufferInvalid = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._pBackBufferInvalid)// reset or update render settings\n\t\t\tthis.pUpdateBackBuffer();\n\n\t\tif (this._shareContext && this._pContext)\n\t\t\tthis._pContext.clear(0, 0, 0, 1, 1, 0, ContextGLClearMask.DEPTH);\n\n\t\tif (this._pFilter3DRenderer) {\n\t\t\tthis.textureRatioX = this._pRttBufferManager.textureRatioX;\n\t\t\tthis.textureRatioY = this._pRttBufferManager.textureRatioY;\n\t\t} else {\n\t\t\tthis.textureRatioX = 1;\n\t\t\tthis.textureRatioY = 1;\n\t\t}\n\n\t\tif (this._pRequireDepthRender)\n\t\t\tthis.pRenderSceneDepthToTexture(<EntityCollector> entityCollector);\n\n\t\tif (this._depthPrepass)\n\t\t\tthis.pRenderDepthPrepass(<EntityCollector> entityCollector);\n\n\t\tif (this._pFilter3DRenderer && this._pContext) { //TODO\n\t\t\tthis._iRender(entityCollector, this._pFilter3DRenderer.getMainInputTexture(this._pStage), this._pRttBufferManager.renderToTextureRect);\n\t\t\tthis._pFilter3DRenderer.render(this._pStage, entityCollector.camera, this._pDepthRender);\n\t\t} else {\n\n\t\t\tif (this._shareContext)\n\t\t\t\tthis._iRender(entityCollector, null, this._pScissorRect);\n\t\t\telse\n\t\t\t\tthis._iRender(entityCollector);\n\t\t}\n\n\t\tif (!this._shareContext && this._pContext)\n\t\t\tthis._pContext.present();\n\n\t\t// register that a view has been rendered\n\t\tthis._pStage.bufferClear = false;\n\t}\n\n\tpublic pExecuteRender(entityCollector:EntityCollector, target:ImageBase = null, scissorRect:Rectangle = null, surfaceSelector:number = 0)\n\t{\n\t\tthis.updateLights(entityCollector);\n\n\t\tsuper.pExecuteRender(entityCollector, target, scissorRect, surfaceSelector);\n\t}\n\n\tprivate updateLights(entityCollector:EntityCollector)\n\t{\n\t\tvar dirLights:Array<DirectionalLight> = entityCollector.directionalLights;\n\t\tvar pointLights:Array<PointLight> = entityCollector.pointLights;\n\t\tvar len:number, i:number;\n\t\tvar light:LightBase;\n\t\tvar shadowMapper:ShadowMapperBase;\n\n\t\tlen = dirLights.length;\n\t\tfor (i = 0; i < len; ++i) {\n\t\t\tlight = dirLights[i];\n\n\t\t\tshadowMapper = light.shadowMapper;\n\n\t\t\tif (light.castsShadows && (shadowMapper.autoUpdateShadows || shadowMapper._iShadowsInvalid ))\n\t\t\t\tshadowMapper.iRenderDepthMap(entityCollector, this._pDepthRenderer);\n\t\t}\n\n\t\tlen = pointLights.length;\n\t\tfor (i = 0; i < len; ++i) {\n\t\t\tlight = pointLights[i];\n\n\t\t\tshadowMapper = light.shadowMapper;\n\n\t\t\tif (light.castsShadows && (shadowMapper.autoUpdateShadows || shadowMapper._iShadowsInvalid))\n\t\t\t\tshadowMapper.iRenderDepthMap(entityCollector, this._pDistanceRenderer);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic pDraw(entityCollector:EntityCollector)\n\t{\n\t\tif (entityCollector.skyBox) {\n\t\t\tthis._pContext.setDepthTest(false, ContextGLCompareMode.ALWAYS);\n\n\t\t\tthis.drawSkybox(entityCollector);\n\t\t}\n\n\t\tsuper.pDraw(entityCollector);\n\t}\n\n\t/**\n\t * Draw the skybox if present.\n\t *\n\t * @param entityCollector The EntityCollector containing all potentially visible information.\n\t */\n\tprivate drawSkybox(entityCollector:EntityCollector)\n\t{\n\t\tvar renderable:RenderableBase = this.getAbstraction(entityCollector.skyBox);\n\n\t\tvar camera:Camera = entityCollector.camera;\n\n\t\tthis.updateSkyboxProjection(camera);\n\n\t\tvar render:RenderBase = this.getRenderPool(renderable.renderableOwner).getAbstraction(renderable.render.renderOwner);\n\n\t\tvar pass:IPass = render.passes[0];\n\n\t\tthis.activatePass(renderable, pass, camera);\n\t\trenderable._iRender(pass, camera, this._skyboxProjection);\n\t\tthis.deactivatePass(renderable, pass);\n\t}\n\n\tprivate updateSkyboxProjection(camera:Camera)\n\t{\n\t\tvar near:Vector3D = new Vector3D();\n\n\t\tthis._skyboxProjection.copyFrom(this._pRttViewProjectionMatrix);\n\t\tthis._skyboxProjection.copyRowTo(2, near);\n\n\t\tvar camPos:Vector3D = camera.scenePosition;\n\n\t\tvar cx:number = near.x;\n\t\tvar cy:number = near.y;\n\t\tvar cz:number = near.z;\n\t\tvar cw:number = -(near.x*camPos.x + near.y*camPos.y + near.z*camPos.z + Math.sqrt(cx*cx + cy*cy + cz*cz));\n\n\t\tvar signX:number = cx >= 0? 1 : -1;\n\t\tvar signY:number = cy >= 0? 1 : -1;\n\n\t\tvar p:Vector3D = new Vector3D(signX, signY, 1, 1);\n\n\t\tvar inverse:Matrix3D = this._skyboxProjection.clone();\n\t\tinverse.invert();\n\n\t\tvar q:Vector3D = inverse.transformVector(p);\n\n\t\tthis._skyboxProjection.copyRowTo(3, p);\n\n\t\tvar a:number = (q.x*p.x + q.y*p.y + q.z*p.z + q.w*p.w)/(cx*q.x + cy*q.y + cz*q.z + cw*q.w);\n\n\t\tthis._skyboxProjection.copyRowFrom(2, new Vector3D(cx*a, cy*a, cz*a, cw*a));\n\t}\n\n\tpublic dispose()\n\t{\n\t\tif (!this._shareContext)\n\t\t\tthis._pStage.dispose();\n\n\t\tthis._pRttBufferManager.dispose();\n\t\tthis._pRttBufferManager = null;\n\n\t\tthis._pDepthRenderer.dispose();\n\t\tthis._pDistanceRenderer.dispose();\n\t\tthis._pDepthRenderer = null;\n\t\tthis._pDistanceRenderer = null;\n\n\t\tthis._pDepthRender = null;\n\n\t\tsuper.dispose();\n\t}\n\n\n\t/**\n\t *\n\t */\n\tpublic pRenderDepthPrepass(entityCollector:EntityCollector)\n\t{\n\t\tthis._pDepthRenderer.disableColor = true;\n\n\t\tif (this._pFilter3DRenderer) {\n\t\t\tthis._pDepthRenderer.textureRatioX = this._pRttBufferManager.textureRatioX;\n\t\t\tthis._pDepthRenderer.textureRatioY = this._pRttBufferManager.textureRatioY;\n\t\t\tthis._pDepthRenderer._iRender(entityCollector, this._pFilter3DRenderer.getMainInputTexture(this._pStage), this._pRttBufferManager.renderToTextureRect);\n\t\t} else {\n\t\t\tthis._pDepthRenderer.textureRatioX = 1;\n\t\t\tthis._pDepthRenderer.textureRatioY = 1;\n\t\t\tthis._pDepthRenderer._iRender(entityCollector);\n\t\t}\n\n\t\tthis._pDepthRenderer.disableColor = false;\n\t}\n\n\n\t/**\n\t *\n\t */\n\tpublic pRenderSceneDepthToTexture(entityCollector:EntityCollector)\n\t{\n\t\tif (this._pDepthTextureInvalid || !this._pDepthRender)\n\t\t\tthis.initDepthTexture(<IContextGL> this._pStage.context);\n\n\t\tthis._pDepthRenderer.textureRatioX = this._pRttBufferManager.textureRatioX;\n\t\tthis._pDepthRenderer.textureRatioY = this._pRttBufferManager.textureRatioY;\n\t\tthis._pDepthRenderer._iRender(entityCollector, this._pDepthRender);\n\t}\n\n\n\t/**\n\t * Updates the backbuffer dimensions.\n\t */\n\tpublic pUpdateBackBuffer()\n\t{\n\t\t// No reason trying to configure back buffer if there is no context available.\n\t\t// Doing this anyway (and relying on _stage to cache width/height for\n\t\t// context does get available) means usesSoftwareRendering won't be reliable.\n\t\tif (this._pStage.context && !this._shareContext) {\n\t\t\tif (this._width && this._height) {\n\t\t\t\tthis._pStage.configureBackBuffer(this._width, this._height, this._antiAlias, true);\n\t\t\t\tthis._pBackBufferInvalid = false;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initDepthTexture(context:IContextGL):void\n\t{\n\t\tthis._pDepthTextureInvalid = false;\n\n\t\tif (this._pDepthRender)\n\t\t\tthis._pDepthRender.dispose();\n\n\t\tthis._pDepthRender = new BitmapImage2D(this._pRttBufferManager.textureWidth, this._pRttBufferManager.textureHeight);\n\t}\n}\n\nexport = DefaultRenderer;",
    "import Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport DepthRender\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/DepthRender\");\n\n/**\n * The DepthRenderer class renders 32-bit depth information encoded as RGBA\n *\n * @class away.render.DepthRenderer\n */\nclass DepthRenderer extends RendererBase\n{\n\t/**\n\t * Creates a new DepthRenderer object.\n\t * @param renderBlended Indicates whether semi-transparent objects should be rendered.\n\t * @param distanceBased Indicates whether the written depth value is distance-based or projected depth-based\n\t */\n\tconstructor(stage:Stage = null)\n\t{\n\t\tsuper(stage, DepthRender);\n\n\t\tthis._iBackgroundR = 1;\n\t\tthis._iBackgroundG = 1;\n\t\tthis._iBackgroundB = 1;\n\n\t}\n}\n\nexport = DepthRenderer;",
    "import Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport DistanceRender\t\t\t\t= require(\"awayjs-renderergl/lib/render/DistanceRender\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * The DistanceRenderer class renders 32-bit depth information encoded as RGBA\n *\n * @class away.render.DistanceRenderer\n */\nclass DistanceRenderer extends RendererBase\n{\n\t/**\n\t * Creates a new DistanceRenderer object.\n\t * @param renderBlended Indicates whether semi-transparent objects should be rendered.\n\t * @param distanceBased Indicates whether the written depth value is distance-based or projected depth-based\n\t */\n\tconstructor(stage:Stage = null)\n\t{\n\t\tsuper(stage, DistanceRender);\n\n\t\tthis._iBackgroundR = 1;\n\t\tthis._iBackgroundG = 1;\n\t\tthis._iBackgroundB = 1;\n\n\t}\n}\n\nexport = DistanceRenderer;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLDrawMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLDrawMode\");\nimport ContextGLBlendFactor\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLVertexBufferFormat\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IIndexBuffer\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\nimport IVertexBuffer\t\t\t\t= require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\n\nimport RTTEvent\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/events/RTTEvent\");\nimport RTTBufferManager\t\t\t\t= require(\"awayjs-renderergl/lib/managers/RTTBufferManager\");\nimport Filter3DBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/filters/Filter3DBase\");\nimport Filter3DTaskBase\t\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase\");\n\n/**\n * @class away.render.Filter3DRenderer\n */\nclass Filter3DRenderer\n{\n\tprivate _filters:Array<Filter3DBase>;\n\tprivate _tasks:Array<Filter3DTaskBase>;\n\tprivate _filterTasksInvalid:boolean;\n\tprivate _mainInputTexture:Image2D;\n\tprivate _requireDepthRender:boolean;\n\tprivate _rttManager:RTTBufferManager;\n\tprivate _stage:Stage;\n\tprivate _filterSizesInvalid:boolean = true;\n\tprivate _onRTTResizeDelegate:(event:RTTEvent) => void;\n\n\tconstructor(stage:Stage)\n\t{\n\t\tthis._onRTTResizeDelegate = (event:RTTEvent) => this.onRTTResize(event);\n\n\t\tthis._stage = stage;\n\t\tthis._rttManager = RTTBufferManager.getInstance(stage);\n\t\tthis._rttManager.addEventListener(RTTEvent.RESIZE, this._onRTTResizeDelegate);\n\n\t}\n\n\tprivate onRTTResize(event:RTTEvent)\n\t{\n\t\tthis._filterSizesInvalid = true;\n\t}\n\n\tpublic get requireDepthRender():boolean\n\t{\n\t\treturn this._requireDepthRender;\n\t}\n\n\tpublic getMainInputTexture(stage:Stage):Image2D\n\t{\n\t\tif (this._filterTasksInvalid)\n\t\t\tthis.updateFilterTasks(stage);\n\n\t\treturn this._mainInputTexture;\n\t}\n\n\tpublic get filters():Filter3DBase[]\n\t{\n\t\treturn this._filters;\n\t}\n\n\tpublic set filters(value:Filter3DBase[])\n\t{\n\t\tthis._filters = value;\n\n\t\tthis._filterTasksInvalid = true;\n\n\t\tthis._requireDepthRender = false;\n\n\t\tif (!this._filters)\n\t\t\treturn;\n\n\t\tfor (var i:number = 0; i < this._filters.length; ++i)\n\t\t\tif (this._filters[i].requireDepthRender)\n\t\t\t\tthis._requireDepthRender = true;\n\n\t\tthis._filterSizesInvalid = true;\n\t}\n\n\tprivate updateFilterTasks(stage:Stage)\n\t{\n\t\tvar len:number;\n\n\t\tif (this._filterSizesInvalid)\n\t\t\tthis.updateFilterSizes();\n\n\t\tif (!this._filters) {\n\t\t\tthis._tasks = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._tasks = new Array<Filter3DTaskBase>();\n\n\t\tlen = this._filters.length - 1;\n\n\t\tvar filter:Filter3DBase;\n\n\t\tfor (var i:number = 0; i <= len; ++i) {\n\n\t\t\t// make sure all internal tasks are linked together\n\t\t\tfilter = this._filters[i];\n\n\t\t\tfilter.setRenderTargets(i == len? null : this._filters[i + 1].getMainInputTexture(stage), stage);\n\n\t\t\tthis._tasks = this._tasks.concat(filter.tasks);\n\n\t\t}\n\n\t\tthis._mainInputTexture = this._filters[0].getMainInputTexture(stage);\n\n\t}\n\n\tpublic render(stage:Stage, camera:Camera, depthTexture:Image2D)\n\t{\n\t\tvar len:number;\n\t\tvar i:number;\n\t\tvar task:Filter3DTaskBase;\n\t\tvar context:IContextGL = <IContextGL> stage.context;\n\n\t\tvar indexBuffer:IIndexBuffer = this._rttManager.indexBuffer;\n\n\t\tvar vertexBuffer:IVertexBuffer = this._rttManager.renderToTextureVertexBuffer;\n\n\t\tif (!this._filters)\n\t\t\treturn;\n\n\t\tif (this._filterSizesInvalid)\n\t\t\tthis.updateFilterSizes();\n\n\t\tif (this._filterTasksInvalid)\n\t\t\tthis.updateFilterTasks(stage);\n\n\t\tlen = this._filters.length;\n\n\t\tfor (i = 0; i < len; ++i)\n\t\t\tthis._filters[i].update(stage, camera);\n\n\t\tlen = this._tasks.length;\n\n\t\tif (len > 1) {\n\t\t\tcontext.setProgram(this._tasks[0].getProgram(stage));\n\t\t\tcontext.setVertexBufferAt(0, vertexBuffer, 0, ContextGLVertexBufferFormat.FLOAT_2);\n\t\t\tcontext.setVertexBufferAt(1, vertexBuffer, 8, ContextGLVertexBufferFormat.FLOAT_2);\n\t\t}\n\n\t\tfor (i = 0; i < len; ++i) {\n\n\t\t\ttask = this._tasks[i];\n\n\t\t\tstage.setRenderTarget(task.target);\n\n\t\t\tcontext.setProgram(task.getProgram(stage));\n\t\t\t(<GL_ImageBase> stage.getAbstraction(task.getMainInputTexture(stage))).activate(0, false);\n\n\n\t\t\tif (!task.target) {\n\n\t\t\t\tstage.scissorRect = null;\n\t\t\t\tvertexBuffer = this._rttManager.renderToScreenVertexBuffer;\n\t\t\t\tcontext.setVertexBufferAt(0, vertexBuffer, 0, ContextGLVertexBufferFormat.FLOAT_2);\n\t\t\t\tcontext.setVertexBufferAt(1, vertexBuffer, 8, ContextGLVertexBufferFormat.FLOAT_2);\n\n\t\t\t}\n\t\t\tcontext.clear(0.0, 0.0, 0.0, 0.0);\n\n\t\t\ttask.activate(stage, camera, depthTexture);\n\n\t\t\tcontext.setBlendFactors(ContextGLBlendFactor.ONE, ContextGLBlendFactor.ZERO);\n\t\t\tcontext.drawIndices(ContextGLDrawMode.TRIANGLES, indexBuffer, 0, 6);\n\n\t\t\ttask.deactivate(stage);\n\t\t}\n\n\t\tcontext.setTextureAt(0, null);\n\t\tcontext.setVertexBufferAt(0, null);\n\t\tcontext.setVertexBufferAt(1, null);\n\t}\n\n\tprivate updateFilterSizes()\n\t{\n\t\tfor (var i:number = 0; i < this._filters.length; ++i) {\n\t\t\tthis._filters[i].textureWidth = this._rttManager.textureWidth;\n\t\t\tthis._filters[i].textureHeight = this._rttManager.textureHeight;\n\t\t}\n\n\t\tthis._filterSizesInvalid = true;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._rttManager.removeEventListener(RTTEvent.RESIZE, this._onRTTResizeDelegate);\n\t\tthis._rttManager = null;\n\t\tthis._stage = null;\n\t}\n}\n\nexport = Filter3DRenderer;",
    "import ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Plane3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Plane3D\");\nimport Point\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\nimport Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\nimport EventDispatcher\t\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\nimport IAssetClass\t\t\t\t\t= require(\"awayjs-core/lib/library/IAssetClass\");\nimport IAbstractionPool\t\t\t\t= require(\"awayjs-core/lib/library/IAbstractionPool\");\nimport ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport EntityListItem\t\t\t\t= require(\"awayjs-display/lib/pool/EntityListItem\");\nimport IRenderer\t\t\t\t\t= require(\"awayjs-display/lib/IRenderer\");\nimport DisplayObject\t\t\t\t= require(\"awayjs-display/lib/base/DisplayObject\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport IEntity\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/IEntity\");\nimport RendererEvent\t\t\t\t= require(\"awayjs-display/lib/events/RendererEvent\");\nimport EntityCollector\t\t\t\t= require(\"awayjs-display/lib/traverse/EntityCollector\");\nimport CollectorBase\t\t\t\t= require(\"awayjs-display/lib/traverse/CollectorBase\");\nimport ShadowCasterCollector\t\t= require(\"awayjs-display/lib/traverse/ShadowCasterCollector\");\n\nimport AGALMiniAssembler\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler\");\nimport ContextGLBlendFactor\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLCompareMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport StageEvent\t\t\t\t\t= require(\"awayjs-stagegl/lib/events/StageEvent\");\nimport StageManager\t\t\t\t\t= require(\"awayjs-stagegl/lib/managers/StageManager\");\nimport ProgramData\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/ProgramData\");\n\nimport IRenderClass\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/IRenderClass\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport RTTBufferManager\t\t\t\t= require(\"awayjs-renderergl/lib/managers/RTTBufferManager\");\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport IEntitySorter\t\t\t\t= require(\"awayjs-renderergl/lib/sort/IEntitySorter\");\nimport RenderableMergeSort\t\t\t= require(\"awayjs-renderergl/lib/sort/RenderableMergeSort\");\n\n\n/**\n * RendererBase forms an abstract base class for classes that are used in the rendering pipeline to render the\n * contents of a partition\n *\n * @class away.render.RendererBase\n */\nclass RendererBase extends EventDispatcher implements IRenderer, IAbstractionPool\n{\n\tpublic static _abstractionClassPool:Object = new Object();\n\n\tprivate _objectPools:Object = new Object();\n\tprivate _abstractionPool:Object = new Object();\n\n\tprivate _maskConfig:number;\n\tprivate _activeMasksDirty:boolean;\n\tprivate _activeMasksConfig:Array<Array<number>> = new Array<Array<number>>();\n\tprivate _registeredMasks : Array<RenderableBase> = new Array<RenderableBase>();\n\tprivate _numUsedStreams:number = 0;\n\tprivate _numUsedTextures:number = 0;\n\n\tpublic _pContext:IContextGL;\n\tpublic _pStage:Stage;\n\n\tpublic _pCamera:Camera;\n\tpublic _iEntryPoint:Vector3D;\n\tpublic _pCameraForward:Vector3D;\n\n\tpublic _pRttBufferManager:RTTBufferManager;\n\tprivate _viewPort:Rectangle = new Rectangle();\n\tprivate _viewportDirty:boolean;\n\tprivate _scissorDirty:boolean;\n\n\tpublic _pBackBufferInvalid:boolean = true;\n\tpublic _pDepthTextureInvalid:boolean = true;\n\tpublic _depthPrepass:boolean = false;\n\tprivate _backgroundR:number = 0;\n\tprivate _backgroundG:number = 0;\n\tprivate _backgroundB:number = 0;\n\tprivate _backgroundAlpha:number = 1;\n\tpublic _shareContext:boolean;\n\n\t// only used by renderers that need to render geometry to textures\n\tpublic _width:number;\n\tpublic _height:number;\n\n\tpublic textureRatioX:number = 1;\n\tpublic textureRatioY:number = 1;\n\n\tprivate _snapshotBitmapImage2D:BitmapImage2D;\n\tprivate _snapshotRequired:boolean;\n\n\tpublic _pRttViewProjectionMatrix:Matrix3D = new Matrix3D();\n\n\tprivate _localPos:Point = new Point();\n\tprivate _globalPos:Point = new Point();\n\tpublic _pScissorRect:Rectangle = new Rectangle();\n\n\tprivate _scissorUpdated:RendererEvent;\n\tprivate _viewPortUpdated:RendererEvent;\n\n\tprivate _onContextUpdateDelegate:(event:StageEvent) => void;\n\tprivate _onViewportUpdatedDelegate:(event:StageEvent) => void;\n\n\tpublic _pNumElements:number = 0;\n\n\tpublic _pOpaqueRenderableHead:RenderableBase;\n\tpublic _pBlendedRenderableHead:RenderableBase;\n\tpublic _disableColor:boolean = false;\n\tpublic _renderBlended:boolean = true;\n\n\n\tpublic get renderBlended():boolean\n\t{\n\t\treturn this._renderBlended;\n\t}\n\n\tpublic set renderBlended(value:boolean)\n\t{\n\t\tthis._renderBlended = value;\n\t}\n\n\n\tpublic get disableColor():boolean\n\t{\n\t\treturn this._disableColor;\n\t}\n\n\tpublic set disableColor(value:boolean)\n\t{\n\t\tthis._disableColor = value;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get numElements():number\n\t{\n\t\treturn this._pNumElements;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic renderableSorter:IEntitySorter;\n\n\n\t/**\n\t * A viewPort rectangle equivalent of the Stage size and position.\n\t */\n\tpublic get viewPort():Rectangle\n\t{\n\t\treturn this._viewPort;\n\t}\n\n\t/**\n\t * A scissor rectangle equivalent of the view size and position.\n\t */\n\tpublic get scissorRect():Rectangle\n\t{\n\t\treturn this._pScissorRect;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get x():number\n\t{\n\t\treturn this._localPos.x;\n\t}\n\n\tpublic set x(value:number)\n\t{\n\t\tif (this.x == value)\n\t\t\treturn;\n\n\t\tthis._globalPos.x = this._localPos.x = value;\n\n\t\tthis.updateGlobalPos();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get y():number\n\t{\n\t\treturn this._localPos.y;\n\t}\n\n\tpublic set y(value:number)\n\t{\n\t\tif (this.y == value)\n\t\t\treturn;\n\n\t\tthis._globalPos.y = this._localPos.y = value;\n\n\t\tthis.updateGlobalPos();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get width():number\n\t{\n\t\treturn this._width;\n\t}\n\n\tpublic set width(value:number)\n\t{\n\t\tif (this._width == value)\n\t\t\treturn;\n\n\t\tthis._width = value;\n\t\tthis._pScissorRect.width = value;\n\n\t\tif (this._pRttBufferManager)\n\t\t\tthis._pRttBufferManager.viewWidth = value;\n\n\t\tthis._pBackBufferInvalid = true;\n\t\tthis._pDepthTextureInvalid = true;\n\n\t\tthis.notifyScissorUpdate();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get height():number\n\t{\n\t\treturn this._height;\n\t}\n\n\tpublic set height(value:number)\n\t{\n\t\tif (this._height == value)\n\t\t\treturn;\n\n\t\tthis._height = value;\n\t\tthis._pScissorRect.height = value;\n\n\t\tif (this._pRttBufferManager)\n\t\t\tthis._pRttBufferManager.viewHeight = value;\n\n\t\tthis._pBackBufferInvalid = true;\n\t\tthis._pDepthTextureInvalid = true;\n\n\t\tthis.notifyScissorUpdate();\n\t}\n\n\t/**\n\t * Creates a new RendererBase object.\n\t */\n\tconstructor(stage:Stage = null, renderClass:IRenderClass = null, forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\")\n\t{\n\t\tsuper();\n\n\t\tthis._onViewportUpdatedDelegate = (event:StageEvent) => this.onViewportUpdated(event);\n\t\tthis._onContextUpdateDelegate = (event:StageEvent) => this.onContextUpdate(event);\n\n\t\t//default sorting algorithm\n\t\tthis.renderableSorter = new RenderableMergeSort();\n\n\t\t//set stage\n\t\tthis._pStage = stage || StageManager.getInstance().getFreeStage(forceSoftware, profile, mode);\n\n\t\tthis._pStage.addEventListener(StageEvent.CONTEXT_CREATED, this._onContextUpdateDelegate);\n\t\tthis._pStage.addEventListener(StageEvent.CONTEXT_RECREATED, this._onContextUpdateDelegate);\n\t\tthis._pStage.addEventListener(StageEvent.VIEWPORT_UPDATED, this._onViewportUpdatedDelegate);\n\n\t\t/*\n\t\t if (_backgroundImageRenderer)\n\t\t _backgroundImageRenderer.stage = value;\n\t\t */\n\t\tif (this._pStage.context)\n\t\t\tthis._pContext = <IContextGL> this._pStage.context;\n\n\t\tfor (var i in RendererBase._abstractionClassPool)\n\t\t\tthis._objectPools[i] = new RenderPool(RendererBase._abstractionClassPool[i], this._pStage, renderClass);\n\t}\n\n\n\tpublic getAbstraction(renderableOwner:IRenderableOwner):RenderableBase\n\t{\n\t\treturn (this._abstractionPool[renderableOwner.id] || (this._abstractionPool[renderableOwner.id] = new (<IRenderableClass> RendererBase._abstractionClassPool[renderableOwner.assetType])(renderableOwner, this)));\n\t}\n\n\t/**\n\t *\n\t * @param image\n\t */\n\tpublic clearAbstraction(renderableOwner:IRenderableOwner)\n\t{\n\t\tthis._abstractionPool[renderableOwner.id] = null;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param renderableClass\n\t * @returns RenderPool\n\t */\n\tpublic getRenderPool(renderableOwner:IRenderableOwner):RenderPool\n\t{\n\t\treturn this._objectPools[renderableOwner.assetType];\n\t}\n\n\t/**\n\t *\n\t * @param imageObjectClass\n\t */\n\tpublic static registerAbstraction(renderable:IRenderableClass, assetClass:IAssetClass)\n\t{\n\t\tRendererBase._abstractionClassPool[assetClass.assetType] = renderable;\n\t}\n\n\tpublic activatePass(renderable:RenderableBase, pass:IPass, camera:Camera)\n\t{\n\t\t//clear unused vertex streams\n\t\tfor (var i = pass.shader.numUsedStreams; i < this._numUsedStreams; i++)\n\t\t\tthis._pContext.setVertexBufferAt(i, null);\n\n\t\t//clear unused texture streams\n\t\tfor (var i = pass.shader.numUsedTextures; i < this._numUsedTextures; i++)\n\t\t\tthis._pContext.setTextureAt(i, null);\n\n\t\t//check program data is uploaded\n\t\tvar programData:ProgramData = pass.shader.programData;\n\n\t\tif (!programData.program) {\n\t\t\tprogramData.program = this._pContext.createProgram();\n\t\t\tvar vertexByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part vertex 1\\n\" + programData.vertexString + \"endpart\"))['vertex'].data;\n\t\t\tvar fragmentByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part fragment 1\\n\" + programData.fragmentString + \"endpart\"))['fragment'].data;\n\t\t\tprogramData.program.upload(vertexByteCode, fragmentByteCode);\n\t\t}\n\n\t\t//set program data\n\t\tthis._pContext.setProgram(programData.program);\n\n\t\t//activate shader object through renderable\n\t\trenderable._iActivate(pass, camera);\n\t}\n\n\tpublic deactivatePass(renderable:RenderableBase, pass:IPass)\n\t{\n\t\t//deactivate shader object\n\t\trenderable._iDeactivate(pass);\n\n\t\tthis._numUsedStreams = pass.shader.numUsedStreams;\n\t\tthis._numUsedTextures = pass.shader.numUsedTextures;\n\t}\n\n\tpublic _iCreateEntityCollector():CollectorBase\n\t{\n\t\treturn new EntityCollector();\n\t}\n\n\t/**\n\t * The background color's red component, used when clearing.\n\t *\n\t * @private\n\t */\n\tpublic get _iBackgroundR():number\n\t{\n\t\treturn this._backgroundR;\n\t}\n\n\tpublic set _iBackgroundR(value:number)\n\t{\n\t\tif (this._backgroundR == value)\n\t\t\treturn;\n\n\t\tthis._backgroundR = value;\n\n\t\tthis._pBackBufferInvalid = true;\n\t}\n\n\t/**\n\t * The background color's green component, used when clearing.\n\t *\n\t * @private\n\t */\n\tpublic get _iBackgroundG():number\n\t{\n\t\treturn this._backgroundG;\n\t}\n\n\tpublic set _iBackgroundG(value:number)\n\t{\n\t\tif (this._backgroundG == value)\n\t\t\treturn;\n\n\t\tthis._backgroundG = value;\n\n\t\tthis._pBackBufferInvalid = true;\n\t}\n\n\t/**\n\t * The background color's blue component, used when clearing.\n\t *\n\t * @private\n\t */\n\tpublic get _iBackgroundB():number\n\t{\n\t\treturn this._backgroundB;\n\t}\n\n\tpublic set _iBackgroundB(value:number)\n\t{\n\t\tif (this._backgroundB == value)\n\t\t\treturn;\n\n\t\tthis._backgroundB = value;\n\n\t\tthis._pBackBufferInvalid = true;\n\t}\n\n\tpublic get context():IContextGL\n\t{\n\t\treturn this._pContext;\n\t}\n\n\t/**\n\t * The Stage that will provide the ContextGL used for rendering.\n\t */\n\tpublic get stage():Stage\n\t{\n\t\treturn this._pStage;\n\t}\n\n\t/**\n\t * Defers control of ContextGL clear() and present() calls to Stage, enabling multiple Stage frameworks\n\t * to share the same ContextGL object.\n\t */\n\tpublic get shareContext():boolean\n\t{\n\t\treturn this._shareContext;\n\t}\n\n\t/**\n\t * Disposes the resources used by the RendererBase.\n\t */\n\tpublic dispose()\n\t{\n\t\tfor (var id in this._abstractionPool)\n\t\t\tthis._abstractionPool[id].clear();\n\n\t\tthis._abstractionPool = null;\n\n\t\tthis._pStage.removeEventListener(StageEvent.CONTEXT_CREATED, this._onContextUpdateDelegate);\n\t\tthis._pStage.removeEventListener(StageEvent.CONTEXT_RECREATED, this._onContextUpdateDelegate);\n\t\tthis._pStage.removeEventListener(StageEvent.VIEWPORT_UPDATED, this._onViewportUpdatedDelegate);\n\n\t\tthis._pStage = null;\n\t\tthis._pContext = null;\n\t\t/*\n\t\t if (_backgroundImageRenderer) {\n\t\t _backgroundImageRenderer.dispose();\n\t\t _backgroundImageRenderer = null;\n\t\t }\n\t\t */\n\t}\n\n\tpublic render(entityCollector:CollectorBase)\n\t{\n\t\tthis._viewportDirty = false;\n\t\tthis._scissorDirty = false;\n\t}\n\n\t/**\n\t * Renders the potentially visible geometry to the back buffer or texture.\n\t * @param entityCollector The EntityCollector object containing the potentially visible geometry.\n\t * @param target An option target texture to render to.\n\t * @param surfaceSelector The index of a CubeTexture's face to render to.\n\t * @param additionalClearMask Additional clear mask information, in case extra clear channels are to be omitted.\n\t */\n\tpublic _iRender(entityCollector:CollectorBase, target:ImageBase = null, scissorRect:Rectangle = null, surfaceSelector:number = 0)\n\t{\n\t\t//TODO refactor setTarget so that rendertextures are created before this check\n\t\tif (!this._pStage || !this._pContext)\n\t\t\treturn;\n\n\t\tthis._pRttViewProjectionMatrix.copyFrom(entityCollector.camera.viewProjection);\n\t\tthis._pRttViewProjectionMatrix.appendScale(this.textureRatioX, this.textureRatioY, 1);\n\n\t\tthis.pExecuteRender(entityCollector, target, scissorRect, surfaceSelector);\n\n\t\t// generate mip maps on target (if target exists) //TODO\n\t\t//if (target)\n\t\t//\t(<Texture>target).generateMipmaps();\n\n\t\t// clear buffers\n\t\tfor (var i:number = 0; i < 8; ++i) {\n\t\t\tthis._pContext.setVertexBufferAt(i, null);\n\t\t\tthis._pContext.setTextureAt(i, null);\n\t\t}\n\t}\n\n\tpublic _iRenderCascades(entityCollector:ShadowCasterCollector, target:ImageBase, numCascades:number, scissorRects:Array<Rectangle>, cameras:Array<Camera>)\n\t{\n\t\tthis._applyCollector(entityCollector);\n\n\t\tthis._pStage.setRenderTarget(target, true, 0);\n\t\tthis._pContext.clear(1, 1, 1, 1, 1, 0);\n\n\t\tthis._pContext.setBlendFactors(ContextGLBlendFactor.ONE, ContextGLBlendFactor.ZERO);\n\t\tthis._pContext.setDepthTest(true, ContextGLCompareMode.LESS);\n\n\t\tvar head:RenderableBase = this._pOpaqueRenderableHead;\n\n\t\tvar first:boolean = true;\n\n\t\t//TODO cascades must have separate collectors, rather than separate draw commands\n\t\tfor (var i:number = numCascades - 1; i >= 0; --i) {\n\t\t\tthis._pStage.scissorRect = scissorRects[i];\n\t\t\t//this.drawCascadeRenderables(head, cameras[i], first? null : cameras[i].frustumPlanes);\n\t\t\tfirst = false;\n\t\t}\n\n\t\t//line required for correct rendering when using away3d with starling. DO NOT REMOVE UNLESS STARLING INTEGRATION IS RETESTED!\n\t\tthis._pContext.setDepthTest(false, ContextGLCompareMode.LESS_EQUAL);\n\n\t\tthis._pStage.scissorRect = null;\n\t}\n\n\tprivate _applyCollector(entityCollector:CollectorBase)\n\t{\n\t\t//reset head values\n\t\tthis._pBlendedRenderableHead = null;\n\t\tthis._pOpaqueRenderableHead = null;\n\t\tthis._pNumElements = 0;\n\n\t\t//grab entity head\n\t\tvar item:EntityListItem = entityCollector.entityHead;\n\n\t\t//set temp values for entry point and camera forward vector\n\t\tthis._pCamera = entityCollector.camera;\n\t\tthis._iEntryPoint = this._pCamera.scenePosition;\n\t\tthis._pCameraForward = this._pCamera.transform.forwardVector;\n\n\t\t//iterate through all entities\n\t\twhile (item) {\n\t\t\titem.entity._applyRenderer(this);\n\t\t\titem = item.next;\n\t\t}\n\n\t\t//sort the resulting renderables\n\t\tif (this.renderableSorter) {\n\t\t\tthis._pOpaqueRenderableHead = <RenderableBase> this.renderableSorter.sortOpaqueRenderables(this._pOpaqueRenderableHead);\n\t\t\tthis._pBlendedRenderableHead = <RenderableBase> this.renderableSorter.sortBlendedRenderables(this._pBlendedRenderableHead);\n\t\t}\n\t}\n\n\t/**\n\t * Renders the potentially visible geometry to the back buffer or texture. Only executed if everything is set up.\n\t *\n\t * @param entityCollector The EntityCollector object containing the potentially visible geometry.\n\t * @param target An option target texture to render to.\n\t * @param surfaceSelector The index of a CubeTexture's face to render to.\n\t * @param additionalClearMask Additional clear mask information, in case extra clear channels are to be omitted.\n\t */\n\tpublic pExecuteRender(entityCollector:CollectorBase, target:ImageBase = null, scissorRect:Rectangle = null, surfaceSelector:number = 0)\n\t{\n\t\tthis._pStage.setRenderTarget(target, true, surfaceSelector);\n\n\t\tif ((target || !this._shareContext) && !this._depthPrepass)\n\t\t\tthis._pContext.clear(this._backgroundR, this._backgroundG, this._backgroundB, this._backgroundAlpha, 1, 0);\n\n\t\tthis._pStage.scissorRect = scissorRect;\n\n\t\t/*\n\t\t if (_backgroundImageRenderer)\n\t\t _backgroundImageRenderer.render();\n\t\t */\n\t\tthis._applyCollector(entityCollector);\n\n\t\tthis._pContext.setBlendFactors(ContextGLBlendFactor.ONE, ContextGLBlendFactor.ZERO);\n\n\t\tthis.pDraw(entityCollector);\n\n\t\t//line required for correct rendering when using away3d with starling. DO NOT REMOVE UNLESS STARLING INTEGRATION IS RETESTED!\n\t\t//this._pContext.setDepthTest(false, ContextGLCompareMode.LESS_EQUAL); //oopsie\n\n\t\tif (!this._shareContext) {\n\t\t\tif (this._snapshotRequired && this._snapshotBitmapImage2D) {\n\t\t\t\tthis._pContext.drawToBitmapImage2D(this._snapshotBitmapImage2D);\n\t\t\t\tthis._snapshotRequired = false;\n\t\t\t}\n\t\t}\n\n\t\tthis._pStage.scissorRect = null;\n\t}\n\n\t/*\n\t * Will draw the renderer's output on next render to the provided bitmap data.\n\t * */\n\tpublic queueSnapshot(bmd:BitmapImage2D)\n\t{\n\t\tthis._snapshotRequired = true;\n\t\tthis._snapshotBitmapImage2D = bmd;\n\t}\n\n\t/**\n\t * Performs the actual drawing of geometry to the target.\n\t * @param entityCollector The EntityCollector object containing the potentially visible geometry.\n\t */\n\tpublic pDraw(entityCollector:CollectorBase)\n\t{\n\t\tthis._pContext.setDepthTest(true, ContextGLCompareMode.LESS_EQUAL);\n\n\t\tif (this._disableColor)\n\t\t\tthis._pContext.setColorMask(false, false, false, false);\n\n\t\tthis.drawRenderables(this._pOpaqueRenderableHead, entityCollector);\n\n\t\tif (this._renderBlended)\n\t\t\tthis.drawRenderables(this._pBlendedRenderableHead, entityCollector);\n\n\t\tif (this._disableColor)\n\t\t\tthis._pContext.setColorMask(true, true, true, true);\n\t}\n\n\t//private drawCascadeRenderables(renderable:RenderableBase, camera:Camera, cullPlanes:Array<Plane3D>)\n\t//{\n\t//\tvar renderable2:RenderableBase;\n\t//\tvar render:RenderBase;\n\t//\tvar pass:IPass;\n\t//\n\t//\twhile (renderable) {\n\t//\t\trenderable2 = renderable;\n\t//\t\trender = renderable.render;\n\t//\t\tpass = render.passes[0] //assuming only one pass per material\n\t//\n\t//\t\tthis.activatePass(renderable, pass, camera);\n\t//\n\t//\t\tdo {\n\t//\t\t\t// if completely in front, it will fall in a different cascade\n\t//\t\t\t// do not use near and far planes\n\t//\t\t\tif (!cullPlanes || renderable2.sourceEntity.worldBounds.isInFrustum(cullPlanes, 4)) {\n\t//\t\t\t\trenderable2._iRender(pass, camera, this._pRttViewProjectionMatrix);\n\t//\t\t\t} else {\n\t//\t\t\t\trenderable2.cascaded = true;\n\t//\t\t\t}\n\t//\n\t//\t\t\trenderable2 = renderable2.next;\n\t//\n\t//\t\t} while (renderable2 && renderable2.render == render && !renderable2.cascaded);\n\t//\n\t//\t\tthis.deactivatePass(renderable, pass);\n\t//\n\t//\t\trenderable = renderable2;\n\t//\t}\n\t//}\n\n\t/**\n\t * Draw a list of renderables.\n\t *\n\t * @param renderables The renderables to draw.\n\t * @param entityCollector The EntityCollector containing all potentially visible information.\n\t */\n\tpublic drawRenderables(renderable:RenderableBase, entityCollector:CollectorBase)\n\t{\n\t\tvar i:number;\n\t\tvar len:number;\n\t\tvar renderable2:RenderableBase;\n\t\tvar render:RenderBase;\n\t\tvar passes:Array<IPass>;\n\t\tvar pass:IPass;\n\t\tvar camera:Camera = entityCollector.camera;\n\n\t\tthis._pContext.setStencilActions(\"frontAndBack\", \"always\", \"keep\", \"keep\", \"keep\");\n\n\t\tthis._registeredMasks.length = 0;\n\t\tvar gl = this._pContext[\"_gl\"];\n\t\tif(gl) {\n\t\t\tgl.disable(gl.STENCIL_TEST);\n\t\t}\n\n\t\tthis._maskConfig = 0;\n\n\t\twhile (renderable) {\n\t\t\trender = renderable.render;\n\t\t\tpasses = render.passes;\n\n\t\t\t// otherwise this would result in depth rendered anyway because fragment shader kil is ignored\n\t\t\tif (this._disableColor && render._renderOwner.alphaThreshold != 0) {\n\t\t\t\trenderable2 = renderable;\n\t\t\t\t// fast forward\n\t\t\t\tdo {\n\t\t\t\t\trenderable2 = renderable2.next;\n\n\t\t\t\t} while (renderable2 && renderable2.render == render);\n\t\t\t} else {\n\t\t\t\tif (this._activeMasksDirty || this._checkMasksConfig(renderable.masksConfig)) {\n\t\t\t\t\tthis._activeMasksConfig = renderable.masksConfig;\n\t\t\t\t\tif (!this._activeMasksConfig.length) {\n\t\t\t\t\t\t// disable stencil\n\t\t\t\t\t\tif(gl) {\n\t\t\t\t\t\t\tgl.disable(gl.STENCIL_TEST);\n\t\t\t\t\t\t\tgl.stencilFunc(gl.ALWAYS, 0, 0xff);\n\t\t\t\t\t\t\tgl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._renderMasks(renderable.sourceEntity._iAssignedMasks());\n\t\t\t\t\t}\n\t\t\t\t\tthis._activeMasksDirty = false;\n\t\t\t\t}\n\n\n\t\t\t\t//iterate through each shader object\n\t\t\t\tlen = passes.length;\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\trenderable2 = renderable;\n\t\t\t\t\tpass = passes[i];\n\n\t\t\t\t\tthis.activatePass(renderable, pass, camera);\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (renderable2.maskId !== -1) {\n\t\t\t\t\t\t\tif (i == 0)\n\t\t\t\t\t\t\t\tthis._registerMask(renderable2);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trenderable2._iRender(pass, camera, this._pRttViewProjectionMatrix);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trenderable2 = renderable2.next;\n\n\t\t\t\t\t} while (renderable2 && renderable2.render == render && !(this._activeMasksDirty = this._checkMasksConfig(renderable2.masksConfig)));\n\n\t\t\t\t\tthis.deactivatePass(renderable, pass);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trenderable = renderable2;\n\t\t}\n\t}\n\n\t/**\n\t * Assign the context once retrieved\n\t */\n\tprivate onContextUpdate(event:StageEvent)\n\t{\n\t\tthis._pContext = <IContextGL> this._pStage.context;\n\t}\n\n\tpublic get _iBackgroundAlpha():number\n\t{\n\t\treturn this._backgroundAlpha;\n\t}\n\n\tpublic set _iBackgroundAlpha(value:number)\n\t{\n\t\tif (this._backgroundAlpha == value)\n\t\t\treturn;\n\n\t\tthis._backgroundAlpha = value;\n\n\t\tthis._pBackBufferInvalid = true;\n\t}\n\n\t/*\n\t public get iBackground():Texture2DBase\n\t {\n\t return this._background;\n\t }\n\t */\n\n\t/*\n\t public set iBackground(value:Texture2DBase)\n\t {\n\t if (this._backgroundImageRenderer && !value) {\n\t this._backgroundImageRenderer.dispose();\n\t this._backgroundImageRenderer = null;\n\t }\n\n\t if (!this._backgroundImageRenderer && value)\n\t {\n\n\t this._backgroundImageRenderer = new BackgroundImageRenderer(this._pStage);\n\n\t }\n\n\n\t this._background = value;\n\n\t if (this._backgroundImageRenderer)\n\t this._backgroundImageRenderer.texture = value;\n\t }\n\t */\n\t/*\n\t public get backgroundImageRenderer():BackgroundImageRenderer\n\t {\n\t return _backgroundImageRenderer;\n\t }\n\t */\n\n\n\t/**\n\t * @private\n\t */\n\tprivate notifyScissorUpdate()\n\t{\n\t\tif (this._scissorDirty)\n\t\t\treturn;\n\n\t\tthis._scissorDirty = true;\n\n\t\tif (!this._scissorUpdated)\n\t\t\tthis._scissorUpdated = new RendererEvent(RendererEvent.SCISSOR_UPDATED);\n\n\t\tthis.dispatchEvent(this._scissorUpdated);\n\t}\n\n\n\t/**\n\t * @private\n\t */\n\tprivate notifyViewportUpdate()\n\t{\n\t\tif (this._viewportDirty)\n\t\t\treturn;\n\n\t\tthis._viewportDirty = true;\n\n\t\tif (!this._viewPortUpdated)\n\t\t\tthis._viewPortUpdated = new RendererEvent(RendererEvent.VIEWPORT_UPDATED);\n\n\t\tthis.dispatchEvent(this._viewPortUpdated);\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onViewportUpdated(event:StageEvent)\n\t{\n\t\tthis._viewPort = this._pStage.viewPort;\n\t\t//TODO stop firing viewport updated for every stagegl viewport change\n\n\t\tif (this._shareContext) {\n\t\t\tthis._pScissorRect.x = this._globalPos.x - this._pStage.x;\n\t\t\tthis._pScissorRect.y = this._globalPos.y - this._pStage.y;\n\t\t\tthis.notifyScissorUpdate();\n\t\t}\n\n\t\tthis.notifyViewportUpdate();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic updateGlobalPos()\n\t{\n\t\tif (this._shareContext) {\n\t\t\tthis._pScissorRect.x = this._globalPos.x - this._viewPort.x;\n\t\t\tthis._pScissorRect.y = this._globalPos.y - this._viewPort.y;\n\t\t} else {\n\t\t\tthis._pScissorRect.x = 0;\n\t\t\tthis._pScissorRect.y = 0;\n\t\t\tthis._viewPort.x = this._globalPos.x;\n\t\t\tthis._viewPort.y = this._globalPos.y;\n\t\t}\n\n\t\tthis.notifyScissorUpdate();\n\t}\n\n\tpublic _iApplyRenderableOwner(renderableOwner:IRenderableOwner)\n\t{\n\t\tvar renderable:RenderableBase = this.getAbstraction(renderableOwner);\n\t\tvar render:RenderBase = renderable.render;\n\n\t\t//set local vars for faster referencing\n\t\trenderable.renderId = render.renderId;\n\t\trenderable.renderOrderId = render.renderOrderId;\n\n\t\trenderable.cascaded = false;\n\n\t\tvar entity:IEntity = renderable.sourceEntity;\n\t\tvar position:Vector3D = entity.scenePosition;\n\n\t\t// project onto camera's z-axis\n\t\tposition = this._iEntryPoint.subtract(position);\n\t\trenderable.zIndex = entity.zOffset + position.dotProduct(this._pCameraForward);\n\t\trenderable.maskId = entity._iAssignedMaskId();\n\t\trenderable.masksConfig = entity._iMasksConfig();\n\n\t\t//store reference to scene transform\n\t\trenderable.renderSceneTransform = renderable.sourceEntity.getRenderSceneTransform(this._pCamera);\n\n\t\tif (render.requiresBlending) {\n\t\t\trenderable.next = this._pBlendedRenderableHead;\n\t\t\tthis._pBlendedRenderableHead = renderable;\n\t\t} else {\n\t\t\trenderable.next = this._pOpaqueRenderableHead;\n\t\t\tthis._pOpaqueRenderableHead = renderable;\n\t\t}\n\n\t\tthis._pNumElements += renderable.subGeometryVO.subGeometry.numElements;\n\t}\n\n\tprivate _registerMask(obj:RenderableBase)\n\t{\n\t\t//console.log(\"registerMask\");\n\t\tthis._registeredMasks.push(obj);\n\t}\n\n\tpublic _renderMasks(masks:DisplayObject[][])\n\t{\n\t\tvar gl = this._pContext[\"_gl\"];\n\t\t//var oldRenderTarget = this._stage.renderTarget;\n\n\t\t//this._stage.setRenderTarget(this._image);\n\t\t//this._stage.clear();\n\t\tthis._pContext.setColorMask(false, false, false, false);\n\t\t// TODO: Could we create masks within masks by providing a previous configID, and supply \"clear/keep\" on stencil fail\n\t\t//context.setStencilActions(\"frontAndBack\", \"always\", \"set\", \"set\", \"set\");\n\t\tgl.enable(gl.STENCIL_TEST);\n\t\tthis._maskConfig++;\n\t\tgl.stencilFunc(gl.ALWAYS, this._maskConfig, 0xff);\n\t\tgl.stencilOp(gl.REPLACE, gl.REPLACE, gl.REPLACE);\n\n\t\tvar numLayers:number = masks.length;\n\t\tvar numRenderables:number = this._registeredMasks.length;\n\t\tvar renderable:RenderableBase;\n\t\tvar children:Array<DisplayObject>;\n\t\tvar numChildren:number;\n\t\tvar mask:DisplayObject;\n\n\t\tfor (var i:number = 0; i < numLayers; ++i) {\n\t\t\tif (i != 0) {\n\t\t\t\tgl.stencilFunc(gl.EQUAL, this._maskConfig, 0xff);\n\t\t\t\tgl.stencilOp(gl.KEEP, gl.INCR, gl.INCR);\n\t\t\t\tthis._maskConfig++;\n\t\t\t}\n\n\t\t\tchildren = masks[i];\n\t\t\tnumChildren = children.length;\n\n\t\t\tfor (var j:number = 0; j < numChildren; ++j) {\n\t\t\t\tmask = children[j];\n\t\t\t\tfor (var k:number = 0; k < numRenderables; ++k) {\n\t\t\t\t\trenderable = this._registeredMasks[k];\n\t\t\t\t\t//console.log(\"testing for \" + mask[\"hierarchicalMaskID\"] + \", \" + mask.name);\n\t\t\t\t\tif (renderable.maskId == mask.id) {\n\t\t\t\t\t\t//console.log(\"Rendering hierarchicalMaskID \" + mask[\"hierarchicalMaskID\"]);\n\t\t\t\t\t\tthis._drawMask(renderable);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgl.stencilFunc(gl.EQUAL, this._maskConfig, 0xff);\n\t\tgl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n\n\t\tthis._pContext.setColorMask(true, true, true, true);\n\t\t//this._stage.setRenderTarget(oldRenderTarget);\n\t}\n\n\tprivate _drawMask(renderable:RenderableBase)\n\t{\n\t\tvar render = renderable.render;\n\t\tvar passes = render.passes;\n\t\tvar len = passes.length;\n\t\tvar pass = passes[len-1];\n\n\t\tthis.activatePass(renderable, pass, this._pCamera);\n\t\t// only render last pass for now\n\t\trenderable._iRender(pass, this._pCamera, this._pRttViewProjectionMatrix);\n\t\tthis.deactivatePass(renderable, pass);\n\t}\n\n\tprivate _checkMasksConfig(masksConfig:Array<Array<number>>):boolean\n\t{\n\t\tif (this._activeMasksConfig.length != masksConfig.length)\n\t\t\treturn true;\n\n\t\tvar numLayers:number = masksConfig.length;\n\t\tvar numChildren:number;\n\t\tvar childConfig:Array<number>;\n\t\tvar activeNumChildren:number;\n\t\tvar activeChildConfig:Array<number>;\n\t\tfor (var i:number = 0; i < numLayers; i++) {\n\t\t\tchildConfig = masksConfig[i];\n\t\t\tnumChildren = childConfig.length;\n\t\t\tactiveChildConfig = this._activeMasksConfig[i];\n\t\t\tactiveNumChildren = activeChildConfig.length;\n\t\t\tif (activeNumChildren != numChildren)\n\t\t\t\treturn true;\n\n\t\t\tfor (var j:number = 0; j < numChildren; j++) {\n\t\t\t\tif (activeChildConfig[j] != childConfig[j])\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nexport = RendererBase;",
    "import BasicMaterial\t\t\t\t= require(\"awayjs-display/lib/materials/BasicMaterial\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport Billboard\t\t\t\t\t= require(\"awayjs-display/lib/entities/Billboard\");\nimport LineSegment\t\t\t\t\t= require(\"awayjs-display/lib/entities/LineSegment\");\nimport CurveSubMesh\t\t\t\t\t= require(\"awayjs-display/lib/base/CurveSubMesh\");\nimport CurveSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/CurveSubGeometry\");\nimport LineSubMesh\t\t\t\t\t= require(\"awayjs-display/lib/base/LineSubMesh\");\nimport LineSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/LineSubGeometry\");\nimport TriangleSubMesh\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubMesh\");\nimport TriangleSubGeometry\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport Single2DTexture\t\t\t\t= require(\"awayjs-display/lib/textures/Single2DTexture\");\nimport SingleCubeTexture\t\t\t= require(\"awayjs-display/lib/textures/SingleCubeTexture\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\nimport BasicMaterialRender\t\t\t= require(\"awayjs-renderergl/lib/render/BasicMaterialRender\");\nimport SkyboxRender\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/SkyboxRender\");\nimport BillboardRenderable\t\t\t= require(\"awayjs-renderergl/lib/renderables/BillboardRenderable\");\nimport LineSegmentRenderable\t\t= require(\"awayjs-renderergl/lib/renderables/LineSegmentRenderable\");\nimport LineSubMeshRenderable\t\t= require(\"awayjs-renderergl/lib/renderables/LineSubMeshRenderable\");\nimport TriangleSubMeshRenderable\t= require(\"awayjs-renderergl/lib/renderables/TriangleSubMeshRenderable\");\nimport CurveSubMeshRenderable\t\t= require(\"awayjs-renderergl/lib/renderables/CurveSubMeshRenderable\");\nimport SkyboxRenderable\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/SkyboxRenderable\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport CurveSubGeometryVO\t\t\t= require(\"awayjs-renderergl/lib/vos/CurveSubGeometryVO\");\nimport LineSubGeometryVO\t\t\t= require(\"awayjs-renderergl/lib/vos/LineSubGeometryVO\");\nimport TriangleSubGeometryVO\t\t= require(\"awayjs-renderergl/lib/vos/TriangleSubGeometryVO\");\nimport Single2DTextureVO\t\t\t= require(\"awayjs-renderergl/lib/vos/Single2DTextureVO\");\nimport SingleCubeTextureVO\t\t\t= require(\"awayjs-renderergl/lib/vos/SingleCubeTextureVO\");\n\nStage.registerAbstraction(CurveSubGeometryVO, CurveSubGeometry);\nStage.registerAbstraction(LineSubGeometryVO, LineSubGeometry);\nStage.registerAbstraction(TriangleSubGeometryVO, TriangleSubGeometry);\n\nRenderPool.registerAbstraction(BasicMaterialRender, BasicMaterial);\nRenderPool.registerAbstraction(SkyboxRender, Skybox);\n\nShaderBase.registerAbstraction(Single2DTextureVO, Single2DTexture);\nShaderBase.registerAbstraction(SingleCubeTextureVO, SingleCubeTexture);\n\nRendererBase.registerAbstraction(BillboardRenderable, Billboard);\nRendererBase.registerAbstraction(LineSegmentRenderable, LineSegment);\nRendererBase.registerAbstraction(TriangleSubMeshRenderable, TriangleSubMesh);\nRendererBase.registerAbstraction(LineSubMeshRenderable, LineSubMesh);\nRendererBase.registerAbstraction(CurveSubMeshRenderable, CurveSubMesh);\nRendererBase.registerAbstraction(SkyboxRenderable, Skybox);\n\n/**\n *\n * static shim\n */\nclass renderergl\n{\n\tpublic static test:number = 0;\n\n\tprivate static main = renderergl.addDefaults();\n\n\tprivate static addDefaults()\n\t{\n\t\tRenderPool.registerAbstraction(BasicMaterialRender, BasicMaterial);\n\t\tRenderPool.registerAbstraction(SkyboxRender, Skybox);\n\n\t}\n}\n\nexport = renderergl;",
    "import IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport AssetBase\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\nimport AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\n\nimport AnimationNodeBase\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport AnimationSetError\t\t\t= require(\"awayjs-renderergl/lib/errors/AnimationSetError\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\n/**\n * Provides an abstract base class for data set classes that hold animation data for use in animator classes.\n *\n * @see away.animators.AnimatorBase\n */\nclass AnimationSetBase extends AssetBase implements IAsset\n{\n\tpublic static assetType:string = \"[asset AnimationSet]\";\n\n\tprivate _usesCPU:boolean;\n\tprivate _animations:Array<AnimationNodeBase> = new Array<AnimationNodeBase>();\n\tprivate _animationNames:Array<string> = new Array<string>();\n\tprivate _animationDictionary:Object = new Object();\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\t/**\n\t * Retrieves a temporary GPU register that's still free.\n\t *\n\t * @param exclude An array of non-free temporary registers.\n\t * @param excludeAnother An additional register that's not free.\n\t * @return A temporary register that can be used.\n\t */\n\tpublic _pFindTempReg(exclude:Array<string>, excludeAnother:string = null):string\n\t{\n\t\tvar i:number /*uint*/ = 0;\n\t\tvar reg:string;\n\n\t\twhile (true) {\n\t\t\treg = \"vt\" + i;\n\t\t\tif (exclude.indexOf(reg) == -1 && excludeAnother != reg)\n\t\t\t\treturn reg;\n\t\t\t++i;\n\t\t}\n\n\t\t// can't be reached\n\t\treturn null;\n\t}\n\n\t/**\n\t * Indicates whether the properties of the animation data contained within the set combined with\n\t * the vertex registers already in use on shading materials allows the animation data to utilise\n\t * GPU calls.\n\t */\n\tpublic get usesCPU():boolean\n\t{\n\t\treturn this._usesCPU;\n\t}\n\n\t/**\n\t * Called by the material to reset the GPU indicator before testing whether register space in the shader\n\t * is available for running GPU-based animation code.\n\t *\n\t * @private\n\t */\n\tpublic resetGPUCompatibility()\n\t{\n\t\tthis._usesCPU = false;\n\t}\n\n\tpublic cancelGPUCompatibility()\n\t{\n\t\tthis._usesCPU = true;\n\t}\n\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase):string\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic activate(shader:ShaderBase, stage:Stage)\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic deactivate(shader:ShaderBase, stage:Stage)\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALFragmentCode(shader:ShaderBase, shadedTarget:string):string\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALUVCode(shader:ShaderBase):string\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic doneAGALCode(shader:ShaderBase)\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get assetType():string\n\t{\n\t\treturn AnimationSetBase.assetType;\n\t}\n\n\t/**\n\t * Returns a vector of animation state objects that make up the contents of the animation data set.\n\t */\n\tpublic get animations():Array<AnimationNodeBase>\n\t{\n\t\treturn this._animations;\n\t}\n\n\t/**\n\t * Returns a vector of animation state objects that make up the contents of the animation data set.\n\t */\n\tpublic get animationNames():Array<string>\n\t{\n\t\treturn this._animationNames;\n\t}\n\n\t/**\n\t * Check to determine whether a state is registered in the animation set under the given name.\n\t *\n\t * @param stateName The name of the animation state object to be checked.\n\t */\n\tpublic hasAnimation(name:string):boolean\n\t{\n\t\treturn this._animationDictionary[name] != null;\n\t}\n\n\t/**\n\t * Retrieves the animation state object registered in the animation data set under the given name.\n\t *\n\t * @param stateName The name of the animation state object to be retrieved.\n\t */\n\tpublic getAnimation(name:string):AnimationNodeBase\n\t{\n\t\treturn this._animationDictionary[name];\n\t}\n\n\t/**\n\t * Adds an animation state object to the aniamtion data set under the given name.\n\t *\n\t * @param stateName The name under which the animation state object will be stored.\n\t * @param animationState The animation state object to be staored in the set.\n\t */\n\tpublic addAnimation(node:AnimationNodeBase)\n\t{\n\t\tif (this._animationDictionary[node.name])\n\t\t\tthrow new AnimationSetError(\"root node name '\" + node.name + \"' already exists in the set\");\n\n\t\tthis._animationDictionary[node.name] = node;\n\n\t\tthis._animations.push(node);\n\n\t\tthis._animationNames.push(node.name);\n\t}\n\n\t/**\n\t * Cleans up any resources used by the current object.\n\t */\n\tpublic dispose()\n\t{\n\t}\n}\n\nexport = AnimationSetBase;",
    "import Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport AssetBase\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\nimport AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\nimport getTimer\t\t\t\t\t\t= require(\"awayjs-core/lib/utils/getTimer\");\n\nimport IAnimationSet\t\t\t\t= require(\"awayjs-display/lib/animators/IAnimationSet\");\nimport IAnimator\t\t\t\t\t= require(\"awayjs-display/lib/animators/IAnimator\");\nimport AnimationNodeBase\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\nimport SubGeometryBase\t\t\t\t= require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport IAnimationState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/IAnimationState\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport AnimatorEvent\t\t\t\t= require(\"awayjs-renderergl/lib/events/AnimatorEvent\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\n\n/**\n * Dispatched when playback of an animation inside the animator object starts.\n *\n * @eventType away3d.events.AnimatorEvent\n */\n//[Event(name=\"start\", type=\"away3d.events.AnimatorEvent\")]\n\n/**\n * Dispatched when playback of an animation inside the animator object stops.\n *\n * @eventType away3d.events.AnimatorEvent\n */\n//[Event(name=\"stop\", type=\"away3d.events.AnimatorEvent\")]\n\n/**\n * Dispatched when playback of an animation reaches the end of an animation.\n *\n * @eventType away3d.events.AnimatorEvent\n */\n//[Event(name=\"cycle_complete\", type=\"away3d.events.AnimatorEvent\")]\n\n/**\n * Provides an abstract base class for animator classes that control animation output from a data set subtype of <code>AnimationSetBase</code>.\n *\n * @see away.animators.AnimationSetBase\n */\nclass AnimatorBase extends AssetBase implements IAnimator\n{\n\tpublic static assetType:string = \"[asset Animator]\";\n\n\tprivate _broadcaster:RequestAnimationFrame;\n\tprivate _isPlaying:boolean;\n\tprivate _autoUpdate:boolean = true;\n\tprivate _startEvent:AnimatorEvent;\n\tprivate _stopEvent:AnimatorEvent;\n\tprivate _cycleEvent:AnimatorEvent;\n\tprivate _time:number /*int*/ = 0;\n\tprivate _playbackSpeed:number = 1;\n\n\tpublic _pAnimationSet:IAnimationSet;\n\tpublic _pOwners:Array<Mesh> = new Array<Mesh>();\n\tpublic _pActiveNode:AnimationNodeBase;\n\tpublic _pActiveState:IAnimationState;\n\tpublic _pActiveAnimationName:string;\n\tpublic _pAbsoluteTime:number = 0;\n\n\tprivate _animationStates:Object = new Object();\n\n\t/**\n\t * Enables translation of the animated mesh from data returned per frame via the positionDelta property of the active animation node. Defaults to true.\n\t *\n\t * @see away.animators.IAnimationState#positionDelta\n\t */\n\tpublic updatePosition:boolean = true;\n\n\tpublic getAnimationState(node:AnimationNodeBase):IAnimationState\n\t{\n\t\tvar className:any = node.stateClass;\n\t\tvar uID:number = node.id;\n\n\t\tif (this._animationStates[uID] == null)\n\t\t\tthis._animationStates[uID] = new className(this, node);\n\n\t\treturn this._animationStates[uID];\n\t}\n\n\tpublic getAnimationStateByName(name:string):IAnimationState\n\t{\n\t\treturn this.getAnimationState(this._pAnimationSet.getAnimation(name));\n\t}\n\n\t/**\n\t * Returns the internal absolute time of the animator, calculated by the current time and the playback speed.\n\t *\n\t * @see #time\n\t * @see #playbackSpeed\n\t */\n\tpublic get absoluteTime():number\n\t{\n\t\treturn this._pAbsoluteTime;\n\t}\n\n\t/**\n\t * Returns the animation data set in use by the animator.\n\t */\n\tpublic get animationSet():IAnimationSet\n\t{\n\t\treturn this._pAnimationSet;\n\t}\n\n\t/**\n\t * Returns the current active animation state.\n\t */\n\tpublic get activeState():IAnimationState\n\t{\n\t\treturn this._pActiveState;\n\t}\n\n\t/**\n\t * Returns the current active animation node.\n\t */\n\tpublic get activeAnimation():AnimationNodeBase\n\t{\n\t\treturn this._pAnimationSet.getAnimation(this._pActiveAnimationName);\n\t}\n\n\t/**\n\t * Returns the current active animation node.\n\t */\n\tpublic get activeAnimationName():string\n\t{\n\t\treturn this._pActiveAnimationName;\n\t}\n\n\t/**\n\t * Determines whether the animators internal update mechanisms are active. Used in cases\n\t * where manual updates are required either via the <code>time</code> property or <code>update()</code> method.\n\t * Defaults to true.\n\t *\n\t * @see #time\n\t * @see #update()\n\t */\n\tpublic get autoUpdate():boolean\n\t{\n\t\treturn this._autoUpdate;\n\t}\n\n\tpublic set autoUpdate(value:boolean)\n\t{\n\t\tif (this._autoUpdate == value)\n\t\t\treturn;\n\n\t\tthis._autoUpdate = value;\n\n\t\tif (this._autoUpdate)\n\t\t\tthis.start(); else\n\t\t\tthis.stop();\n\t}\n\n\t/**\n\t * Gets and sets the internal time clock of the animator.\n\t */\n\tpublic get time():number /*int*/\n\t{\n\t\treturn this._time;\n\t}\n\n\tpublic set time(value:number /*int*/)\n\t{\n\t\tif (this._time == value)\n\t\t\treturn;\n\n\t\tthis.update(value);\n\t}\n\n\t/**\n\t * Sets the animation phase of the current active state's animation clip(s).\n\t *\n\t * @param value The phase value to use. 0 represents the beginning of an animation clip, 1 represents the end.\n\t */\n\tpublic phase(value:number)\n\t{\n\t\tthis._pActiveState.phase(value);\n\t}\n\n\t/**\n\t * Creates a new <code>AnimatorBase</code> object.\n\t *\n\t * @param animationSet The animation data set to be used by the animator object.\n\t */\n\tconstructor(animationSet:IAnimationSet)\n\t{\n\t\tsuper();\n\n\t\tthis._pAnimationSet = animationSet;\n\n\t\tthis._broadcaster = new RequestAnimationFrame(this.onEnterFrame, this);\n\t}\n\n\t/**\n\t * The amount by which passed time should be scaled. Used to slow down or speed up animations. Defaults to 1.\n\t */\n\tpublic get playbackSpeed():number\n\t{\n\t\treturn this._playbackSpeed;\n\t}\n\n\tpublic set playbackSpeed(value:number)\n\t{\n\t\tthis._playbackSpeed = value;\n\t}\n\n\tpublic setRenderState(shader:ShaderBase, renderable:RenderableBase, stage:Stage, camera:Camera, vertexConstantOffset:number /*int*/, vertexStreamOffset:number /*int*/)\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * Resumes the automatic playback clock controling the active state of the animator.\n\t */\n\tpublic start()\n\t{\n\t\tif (this._isPlaying || !this._autoUpdate)\n\t\t\treturn;\n\n\t\tthis._time = this._pAbsoluteTime = getTimer();\n\n\t\tthis._isPlaying = true;\n\n\t\tthis._broadcaster.start();\n\n\t\tif (!this.hasEventListener(AnimatorEvent.START))\n\t\t\treturn;\n\n\t\tif (this._startEvent == null)\n\t\t\tthis._startEvent = new AnimatorEvent(AnimatorEvent.START, this);\n\n\t\tthis.dispatchEvent(this._startEvent);\n\t}\n\n\t/**\n\t * Pauses the automatic playback clock of the animator, in case manual updates are required via the\n\t * <code>time</code> property or <code>update()</code> method.\n\t *\n\t * @see #time\n\t * @see #update()\n\t */\n\tpublic stop()\n\t{\n\t\tif (!this._isPlaying)\n\t\t\treturn;\n\n\t\tthis._isPlaying = false;\n\n\t\tthis._broadcaster.stop();\n\n\t\tif (!this.hasEventListener(AnimatorEvent.STOP))\n\t\t\treturn;\n\n\t\tif (this._stopEvent == null)\n\t\t\tthis._stopEvent = new AnimatorEvent(AnimatorEvent.STOP, this);\n\n\t\tthis.dispatchEvent(this._stopEvent);\n\t}\n\n\t/**\n\t * Provides a way to manually update the active state of the animator when automatic\n\t * updates are disabled.\n\t *\n\t * @see #stop()\n\t * @see #autoUpdate\n\t */\n\tpublic update(time:number /*int*/)\n\t{\n\t\tvar dt:number = (time - this._time)*this.playbackSpeed;\n\n\t\tthis._pUpdateDeltaTime(dt);\n\n\t\tthis._time = time;\n\t}\n\n\tpublic reset(name:string, offset:number = 0)\n\t{\n\t\tthis.getAnimationState(this._pAnimationSet.getAnimation(name)).offset(offset + this._pAbsoluteTime);\n\t}\n\n\t/**\n\t * Used by the mesh object to which the animator is applied, registers the owner for internal use.\n\t *\n\t * @private\n\t */\n\tpublic addOwner(mesh:Mesh)\n\t{\n\t\tthis._pOwners.push(mesh);\n\t}\n\n\t/**\n\t * Used by the mesh object from which the animator is removed, unregisters the owner for internal use.\n\t *\n\t * @private\n\t */\n\tpublic removeOwner(mesh:Mesh)\n\t{\n\t\tthis._pOwners.splice(this._pOwners.indexOf(mesh), 1);\n\t}\n\n\t/**\n\t * Internal abstract method called when the time delta property of the animator's contents requires updating.\n\t *\n\t * @private\n\t */\n\tpublic _pUpdateDeltaTime(dt:number)\n\t{\n\t\tthis._pAbsoluteTime += dt;\n\n\t\tthis._pActiveState.update(this._pAbsoluteTime);\n\n\t\tif (this.updatePosition)\n\t\t\tthis.applyPositionDelta();\n\t}\n\n\t/**\n\t * Enter frame event handler for automatically updating the active state of the animator.\n\t */\n\tprivate onEnterFrame(event:Event = null)\n\t{\n\t\tthis.update(getTimer());\n\t}\n\n\tprivate applyPositionDelta()\n\t{\n\t\tvar delta:Vector3D = this._pActiveState.positionDelta;\n\t\tvar dist:number = delta.length;\n\t\tvar len:number /*uint*/;\n\t\tif (dist > 0) {\n\t\t\tlen = this._pOwners.length;\n\t\t\tfor (var i:number /*uint*/ = 0; i < len; ++i)\n\t\t\t\tthis._pOwners[i].transform.translateLocal(delta, dist);\n\t\t}\n\t}\n\n\t/**\n\t *  for internal use.\n\t *\n\t * @private\n\t */\n\tpublic dispatchCycleEvent()\n\t{\n\t\tif (this.hasEventListener(AnimatorEvent.CYCLE_COMPLETE)) {\n\t\t\tif (this._cycleEvent == null)\n\t\t\t\tthis._cycleEvent = new AnimatorEvent(AnimatorEvent.CYCLE_COMPLETE, this);\n\n\t\t\tthis.dispatchEvent(this._cycleEvent);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic clone():AnimatorBase\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic dispose()\n\t{\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic testGPUCompatibility(shader:ShaderBase)\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get assetType():string\n\t{\n\t\treturn AnimatorBase.assetType;\n\t}\n\n\n\tpublic getRenderableSubGeometry(renderable:RenderableBase, sourceSubGeometry:SubGeometryBase):SubGeometryBase\n\t{\n\t\t//nothing to do here\n\t\treturn sourceSubGeometry;\n\t}\n}\n\nexport = AnimatorBase;",
    "import SubGeometryBase\t\t\t\t\t= require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport IAnimationSet\t\t\t\t\t= require(\"awayjs-display/lib/animators/IAnimationSet\");\nimport AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\nimport ISubMesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/ISubMesh\");\nimport Mesh\t\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport AnimationSetBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimationSetBase\");\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticleAnimationData\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleAnimationData\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleData\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleData\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleTimeNode\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleTimeNode\");\nimport ParticleGeometry\t\t\t\t\t= require(\"awayjs-renderergl/lib/base/ParticleGeometry\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\n\n\n/**\n * The animation data set used by particle-based animators, containing particle animation data.\n *\n * @see away.animators.ParticleAnimator\n */\nclass ParticleAnimationSet extends AnimationSetBase implements IAnimationSet\n{\n\t/** @private */\n\tpublic _iAnimationRegisterCache:AnimationRegisterCache;\n\n\t//all other nodes dependent on it\n\tprivate _timeNode:ParticleTimeNode;\n\n\t/**\n\t * Property used by particle nodes that require compilers at the end of the shader\n\t */\n\tpublic static POST_PRIORITY:number /*int*/ = 9;\n\n\t/**\n\t * Property used by particle nodes that require color compilers\n\t */\n\tpublic static COLOR_PRIORITY:number /*int*/ = 18;\n\n\tprivate _animationSubGeometries:Object = new Object();\n\tprivate _particleNodes:Array<ParticleNodeBase> = new Array<ParticleNodeBase>();\n\tprivate _localDynamicNodes:Array<ParticleNodeBase> = new Array<ParticleNodeBase>();\n\tprivate _localStaticNodes:Array<ParticleNodeBase> = new Array<ParticleNodeBase>();\n\tprivate _totalLenOfOneVertex:number /*int*/ = 0;\n\n\t//set true if has an node which will change UV\n\tpublic hasUVNode:boolean;\n\t//set if the other nodes need to access the velocity\n\tpublic needVelocity:boolean;\n\t//set if has a billboard node.\n\tpublic hasBillboard:boolean;\n\t//set if has an node which will apply color multiple operation\n\tpublic hasColorMulNode:boolean;\n\t//set if has an node which will apply color add operation\n\tpublic hasColorAddNode:boolean;\n\n\t/**\n\t * Initialiser function for static particle properties. Needs to reference a with the following format\n\t *\n\t * <code>\n\t * initParticleFunc(prop:ParticleProperties)\n\t * {\n\t * \t\t//code for settings local properties\n\t * }\n\t * </code>\n\t *\n\t * Aside from setting any properties required in particle animation nodes using local static properties, the initParticleFunc function\n\t * is required to time node requirements as they may be needed. These properties on the ParticleProperties object can include\n\t * <code>startTime</code>, <code>duration</code> and <code>delay</code>. The use of these properties is determined by the setting\n\t * arguments passed in the constructor of the particle animation set. By default, only the <code>startTime</code> property is required.\n\t */\n\tpublic initParticleFunc:Function;\n\n\t/**\n\t * Initialiser function scope for static particle properties\n\t */\n\tpublic initParticleScope:Object;\n\n\t/**\n\t * Creates a new <code>ParticleAnimationSet</code>\n\t *\n\t * @param    [optional] usesDuration    Defines whether the animation set uses the <code>duration</code> data in its static properties to determine how long a particle is visible for. Defaults to false.\n\t * @param    [optional] usesLooping     Defines whether the animation set uses a looping timeframe for each particle determined by the <code>startTime</code>, <code>duration</code> and <code>delay</code> data in its static properties function. Defaults to false. Requires <code>usesDuration</code> to be true.\n\t * @param    [optional] usesDelay       Defines whether the animation set uses the <code>delay</code> data in its static properties to determine how long a particle is hidden for. Defaults to false. Requires <code>usesLooping</code> to be true.\n\t */\n\tconstructor(usesDuration:boolean = false, usesLooping:boolean = false, usesDelay:boolean = false)\n\t{\n\t\tsuper();\n\n\t\t//automatically add a particle time node to the set\n\t\tthis.addAnimation(this._timeNode = new ParticleTimeNode(usesDuration, usesLooping, usesDelay));\n\t}\n\n\t/**\n\t * Returns a vector of the particle animation nodes contained within the set.\n\t */\n\tpublic get particleNodes():Array<ParticleNodeBase>\n\t{\n\t\treturn this._particleNodes;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic addAnimation(node:AnimationNodeBase)\n\t{\n\t\tvar i:number /*int*/;\n\t\tvar n:ParticleNodeBase = <ParticleNodeBase> node;\n\t\tn._iProcessAnimationSetting(this);\n\t\tif (n.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\tn._iDataOffset = this._totalLenOfOneVertex;\n\t\t\tthis._totalLenOfOneVertex += n.dataLength;\n\t\t\tthis._localStaticNodes.push(n);\n\t\t} else if (n.mode == ParticlePropertiesMode.LOCAL_DYNAMIC)\n\t\t\tthis._localDynamicNodes.push(n);\n\n\t\tfor (i = this._particleNodes.length - 1; i >= 0; i--) {\n\t\t\tif (this._particleNodes[i].priority <= n.priority)\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis._particleNodes.splice(i + 1, 0, n);\n\n\t\tsuper.addAnimation(node);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic activate(shader:ShaderBase, stage:Stage)\n\t{\n//\t\t\tthis._iAnimationRegisterCache = pass.animationRegisterCache;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic deactivate(shader:ShaderBase, stage:Stage)\n\t{\n//\t\t\tvar context:IContextGL = <IContextGL> stage.context;\n//\t\t\tvar offset:number /*int*/ = this._iAnimationRegisterCache.vertexAttributesOffset;\n//\t\t\tvar used:number /*int*/ = this._iAnimationRegisterCache.numUsedStreams;\n//\t\t\tfor (var i:number /*int*/ = offset; i < used; i++)\n//\t\t\t\tcontext.setVertexBufferAt(i, null);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase):string\n\t{\n\t\t//grab animationRegisterCache from the materialpassbase or create a new one if the first time\n\t\tthis._iAnimationRegisterCache = shader.animationRegisterCache;\n\n\t\tif (this._iAnimationRegisterCache == null)\n\t\t\tthis._iAnimationRegisterCache = shader.animationRegisterCache = new AnimationRegisterCache(shader.profile);\n\n\t\t//reset animationRegisterCache\n\t\tthis._iAnimationRegisterCache.vertexConstantOffset = shader.numUsedVertexConstants;\n\t\tthis._iAnimationRegisterCache.vertexAttributesOffset = shader.numUsedStreams;\n\t\tthis._iAnimationRegisterCache.varyingsOffset = shader.numUsedVaryings;\n\t\tthis._iAnimationRegisterCache.fragmentConstantOffset = shader.numUsedFragmentConstants;\n\t\tthis._iAnimationRegisterCache.hasUVNode = this.hasUVNode;\n\t\tthis._iAnimationRegisterCache.needVelocity = this.needVelocity;\n\t\tthis._iAnimationRegisterCache.hasBillboard = this.hasBillboard;\n\t\tthis._iAnimationRegisterCache.sourceRegisters = shader.animatableAttributes;\n\t\tthis._iAnimationRegisterCache.targetRegisters = shader.animationTargetRegisters;\n\t\tthis._iAnimationRegisterCache.needFragmentAnimation = shader.usesFragmentAnimation;\n\t\tthis._iAnimationRegisterCache.needUVAnimation = !shader.usesUVTransform;\n\t\tthis._iAnimationRegisterCache.hasColorAddNode = this.hasColorAddNode;\n\t\tthis._iAnimationRegisterCache.hasColorMulNode = this.hasColorMulNode;\n\t\tthis._iAnimationRegisterCache.reset();\n\n\t\tvar code:string = \"\";\n\n\t\tcode += this._iAnimationRegisterCache.getInitCode();\n\n\t\tvar node:ParticleNodeBase;\n\t\tvar i:number /*int*/;\n\n\t\tfor (i = 0; i < this._particleNodes.length; i++) {\n\t\t\tnode = this._particleNodes[i];\n\t\t\tif (node.priority < ParticleAnimationSet.POST_PRIORITY)\n\t\t\t\tcode += node.getAGALVertexCode(shader, this._iAnimationRegisterCache);\n\t\t}\n\n\t\tcode += this._iAnimationRegisterCache.getCombinationCode();\n\n\t\tfor (i = 0; i < this._particleNodes.length; i++) {\n\t\t\tnode = this._particleNodes[i];\n\t\t\tif (node.priority >= ParticleAnimationSet.POST_PRIORITY && node.priority < ParticleAnimationSet.COLOR_PRIORITY)\n\t\t\t\tcode += node.getAGALVertexCode(shader, this._iAnimationRegisterCache);\n\t\t}\n\n\t\tcode += this._iAnimationRegisterCache.initColorRegisters();\n\n\t\tfor (i = 0; i < this._particleNodes.length; i++) {\n\t\t\tnode = this._particleNodes[i];\n\t\t\tif (node.priority >= ParticleAnimationSet.COLOR_PRIORITY)\n\t\t\t\tcode += node.getAGALVertexCode(shader, this._iAnimationRegisterCache);\n\t\t}\n\t\tcode += this._iAnimationRegisterCache.getColorPassCode();\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALUVCode(shader:ShaderBase):string\n\t{\n\t\tvar code:string = \"\";\n\t\tif (this.hasUVNode) {\n\t\t\tthis._iAnimationRegisterCache.setUVSourceAndTarget(shader.uvSource, shader.uvTarget);\n\t\t\tcode += \"mov \" + this._iAnimationRegisterCache.uvTarget + \".xy,\" + this._iAnimationRegisterCache.uvAttribute.toString() + \"\\n\";\n\t\t\tvar node:ParticleNodeBase;\n\t\t\tfor (var i:number /*uint*/ = 0; i < this._particleNodes.length; i++)\n\t\t\t\tnode = this._particleNodes[i];\n\t\t\t\tcode += node.getAGALUVCode(shader, this._iAnimationRegisterCache);\n\t\t\tcode += \"mov \" + this._iAnimationRegisterCache.uvVar.toString() + \",\" + this._iAnimationRegisterCache.uvTarget + \".xy\\n\";\n\t\t} else\n\t\t\tcode += \"mov \" + shader.uvTarget + \",\" + shader.uvSource + \"\\n\";\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALFragmentCode(shader:ShaderBase, shadedTarget:string):string\n\t{\n\t\treturn this._iAnimationRegisterCache.getColorCombinationCode(shadedTarget);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic doneAGALCode(shader:ShaderBase)\n\t{\n\t\tthis._iAnimationRegisterCache.setDataLength();\n\n\t\t//set vertexZeroConst,vertexOneConst,vertexTwoConst\n\t\tthis._iAnimationRegisterCache.setVertexConst(this._iAnimationRegisterCache.vertexZeroConst.index, 0, 1, 2, 0);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get usesCPU():boolean\n\t{\n\t\treturn false;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic cancelGPUCompatibility()\n\t{\n\n\t}\n\n\tpublic dispose()\n\t{\n\t\tfor (var key in this._animationSubGeometries)\n\t\t\t(<AnimationSubGeometry> this._animationSubGeometries[key]).dispose();\n\n\t\tsuper.dispose();\n\t}\n\n\tpublic getAnimationSubGeometry(subMesh:ISubMesh)\n\t{\n\t\tvar mesh:Mesh = subMesh.parentMesh;\n\t\tvar animationSubGeometry:AnimationSubGeometry = (mesh.shareAnimationGeometry)? this._animationSubGeometries[subMesh.subGeometry.id] : this._animationSubGeometries[subMesh.id];\n\n\t\tif (animationSubGeometry)\n\t\t\treturn animationSubGeometry;\n\n\t\tthis._iGenerateAnimationSubGeometries(mesh);\n\n\t\treturn (mesh.shareAnimationGeometry)? this._animationSubGeometries[subMesh.subGeometry.id] : this._animationSubGeometries[subMesh.id];\n\t}\n\n\n\t/** @private */\n\tpublic _iGenerateAnimationSubGeometries(mesh:Mesh)\n\t{\n\t\tif (this.initParticleFunc == null)\n\t\t\tthrow(new Error(\"no initParticleFunc set\"));\n\n\t\tvar geometry:ParticleGeometry = <ParticleGeometry> mesh.geometry;\n\n\t\tif (!geometry)\n\t\t\tthrow(new Error(\"Particle animation can only be performed on a ParticleGeometry object\"));\n\n\t\tvar i:number /*int*/, j:number /*int*/, k:number /*int*/;\n\t\tvar animationSubGeometry:AnimationSubGeometry;\n\t\tvar newAnimationSubGeometry:boolean = false;\n\t\tvar subGeometry:SubGeometryBase;\n\t\tvar subMesh:ISubMesh;\n\t\tvar localNode:ParticleNodeBase;\n\n\t\tfor (i = 0; i < mesh.subMeshes.length; i++) {\n\t\t\tsubMesh = mesh.subMeshes[i];\n\t\t\tsubGeometry = subMesh.subGeometry;\n\t\t\tif (mesh.shareAnimationGeometry) {\n\t\t\t\tanimationSubGeometry = this._animationSubGeometries[subGeometry.id];\n\n\t\t\t\tif (animationSubGeometry)\n\t\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tanimationSubGeometry = new AnimationSubGeometry();\n\n\t\t\tif (mesh.shareAnimationGeometry)\n\t\t\t\tthis._animationSubGeometries[subGeometry.id] = animationSubGeometry;\n\t\t\telse\n\t\t\t\tthis._animationSubGeometries[subMesh.id] = animationSubGeometry;\n\n\t\t\tnewAnimationSubGeometry = true;\n\n\t\t\t//create the vertexData vector that will be used for local node data\n\t\t\tanimationSubGeometry.createVertexData(subGeometry.numVertices, this._totalLenOfOneVertex);\n\t\t}\n\n\t\tif (!newAnimationSubGeometry)\n\t\t\treturn;\n\n\t\tvar particles:Array<ParticleData> = geometry.particles;\n\t\tvar particlesLength:number /*uint*/ = particles.length;\n\t\tvar numParticles:number /*uint*/ = geometry.numParticles;\n\t\tvar particleProperties:ParticleProperties = new ParticleProperties();\n\t\tvar particle:ParticleData;\n\n\t\tvar oneDataLen:number /*int*/;\n\t\tvar oneDataOffset:number /*int*/;\n\t\tvar counterForVertex:number /*int*/;\n\t\tvar counterForOneData:number /*int*/;\n\t\tvar oneData:Array<number>;\n\t\tvar numVertices:number /*uint*/;\n\t\tvar vertexData:Array<number>;\n\t\tvar vertexLength:number /*uint*/;\n\t\tvar startingOffset:number /*uint*/;\n\t\tvar vertexOffset:number /*uint*/;\n\n\t\t//default values for particle param\n\t\tparticleProperties.total = numParticles;\n\t\tparticleProperties.startTime = 0;\n\t\tparticleProperties.duration = 1000;\n\t\tparticleProperties.delay = 0.1;\n\n\t\ti = 0;\n\t\tj = 0;\n\t\twhile (i < numParticles) {\n\t\t\tparticleProperties.index = i;\n\n\t\t\t//call the init on the particle parameters\n\t\t\tthis.initParticleFunc.call(this.initParticleScope, particleProperties);\n\n\t\t\t//create the next set of node properties for the particle\n\t\t\tfor (k = 0; k < this._localStaticNodes.length; k++)\n\t\t\t\tthis._localStaticNodes[k]._iGeneratePropertyOfOneParticle(particleProperties);\n\n\t\t\t//loop through all particle data for the curent particle\n\t\t\twhile (j < particlesLength && (particle = particles[j]).particleIndex == i) {\n\t\t\t\t//find the target animationSubGeometry\n\t\t\t\tfor (k = 0; k < mesh.subMeshes.length; k++) {\n\t\t\t\t\tsubMesh = mesh.subMeshes[k];\n\t\t\t\t\tif (subMesh.subGeometry == particle.subGeometry) {\n\t\t\t\t\t\tanimationSubGeometry = (mesh.shareAnimationGeometry)? this._animationSubGeometries[subMesh.subGeometry.id] : this._animationSubGeometries[subMesh.id];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnumVertices = particle.numVertices;\n\t\t\t\tvertexData = animationSubGeometry.vertexData;\n\t\t\t\tvertexLength = numVertices*this._totalLenOfOneVertex;\n\t\t\t\tstartingOffset = animationSubGeometry.numProcessedVertices*this._totalLenOfOneVertex;\n\n\t\t\t\t//loop through each static local node in the animation set\n\t\t\t\tfor (k = 0; k < this._localStaticNodes.length; k++) {\n\t\t\t\t\tlocalNode = this._localStaticNodes[k];\n\t\t\t\t\toneData = localNode.oneData;\n\t\t\t\t\toneDataLen = localNode.dataLength;\n\t\t\t\t\toneDataOffset = startingOffset + localNode._iDataOffset;\n\n\t\t\t\t\t//loop through each vertex set in the vertex data\n\t\t\t\t\tfor (counterForVertex = 0; counterForVertex < vertexLength; counterForVertex += this._totalLenOfOneVertex) {\n\t\t\t\t\t\tvertexOffset = oneDataOffset + counterForVertex;\n\n\t\t\t\t\t\t//add the data for the local node to the vertex data\n\t\t\t\t\t\tfor (counterForOneData = 0; counterForOneData < oneDataLen; counterForOneData++)\n\t\t\t\t\t\t\tvertexData[vertexOffset + counterForOneData] = oneData[counterForOneData];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//store particle properties if they need to be retreived for dynamic local nodes\n\t\t\t\tif (this._localDynamicNodes.length)\n\t\t\t\t\tanimationSubGeometry.animationParticles.push(new ParticleAnimationData(i, particleProperties.startTime, particleProperties.duration, particleProperties.delay, particle));\n\n\t\t\t\tanimationSubGeometry.numProcessedVertices += numVertices;\n\n\t\t\t\t//next index\n\t\t\t\tj++;\n\t\t\t}\n\n\t\t\t//next particle\n\t\t\ti++;\n\t\t}\n\t}\n}\n\nexport = ParticleAnimationSet;",
    "import SubGeometryBase\t\t\t\t\t= require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport ISubMesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/ISubMesh\");\n\nimport ContextGLProgramType\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticleAnimationData\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleAnimationData\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport TriangleSubMeshRenderable\t\t= require(\"awayjs-renderergl/lib/renderables/TriangleSubMeshRenderable\");\n\n/**\n * Provides an interface for assigning paricle-based animation data sets to mesh-based entity objects\n * and controlling the various available states of animation through an interative playhead that can be\n * automatically updated or manually triggered.\n *\n * Requires that the containing geometry of the parent mesh is particle geometry\n *\n * @see away.base.ParticleGeometry\n */\nclass ParticleAnimator extends AnimatorBase\n{\n\n\tprivate _particleAnimationSet:ParticleAnimationSet;\n\tprivate _animationParticleStates:Array<ParticleStateBase> = new Array<ParticleStateBase>();\n\tprivate _animatorParticleStates:Array<ParticleStateBase> = new Array<ParticleStateBase>();\n\tprivate _timeParticleStates:Array<ParticleStateBase> = new Array<ParticleStateBase>();\n\tprivate _totalLenOfOneVertex:number /*uint*/ = 0;\n\tprivate _animatorSubGeometries:Object = new Object();\n\n\t/**\n\t * Creates a new <code>ParticleAnimator</code> object.\n\t *\n\t * @param particleAnimationSet The animation data set containing the particle animations used by the animator.\n\t */\n\tconstructor(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tsuper(particleAnimationSet);\n\t\tthis._particleAnimationSet = particleAnimationSet;\n\n\t\tvar state:ParticleStateBase;\n\t\tvar node:ParticleNodeBase;\n\n\t\tfor (var i:number = 0; i < this._particleAnimationSet.particleNodes.length; i++) {\n\t\t\tnode = this._particleAnimationSet.particleNodes[i];\n\t\t\tstate = <ParticleStateBase> this.getAnimationState(node);\n\t\t\tif (node.mode == ParticlePropertiesMode.LOCAL_DYNAMIC) {\n\t\t\t\tthis._animatorParticleStates.push(state);\n\t\t\t\tnode._iDataOffset = this._totalLenOfOneVertex;\n\t\t\t\tthis._totalLenOfOneVertex += node.dataLength;\n\t\t\t} else {\n\t\t\t\tthis._animationParticleStates.push(state);\n\t\t\t}\n\t\t\tif (state.needUpdateTime)\n\t\t\t\tthis._timeParticleStates.push(state);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic clone():AnimatorBase\n\t{\n\t\treturn new ParticleAnimator(this._particleAnimationSet);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(shader:ShaderBase, renderable:RenderableBase, stage:Stage, camera:Camera, vertexConstantOffset:number /*int*/, vertexStreamOffset:number /*int*/)\n\t{\n\t\tvar animationRegisterCache:AnimationRegisterCache = this._particleAnimationSet._iAnimationRegisterCache;\n\n\t\tvar subMesh:ISubMesh = (<TriangleSubMeshRenderable> renderable).subMesh;\n\t\tvar state:ParticleStateBase;\n\t\tvar i:number;\n\n\t\tif (!subMesh)\n\t\t\tthrow(new Error(\"Must be subMesh\"));\n\n\t\t//process animation sub geometries\n\t\tvar animationSubGeometry:AnimationSubGeometry = this._particleAnimationSet.getAnimationSubGeometry(subMesh);\n\n\t\tfor (i = 0; i < this._animationParticleStates.length; i++)\n\t\t\tthis._animationParticleStates[i].setRenderState(stage, renderable, animationSubGeometry, animationRegisterCache, camera);\n\n\t\t//process animator subgeometries\n\t\tvar animatorSubGeometry:AnimationSubGeometry = this.getAnimatorSubGeometry(subMesh);\n\n\t\tfor (i = 0; i < this._animatorParticleStates.length; i++)\n\t\t\tthis._animatorParticleStates[i].setRenderState(stage, renderable, animatorSubGeometry, animationRegisterCache, camera);\n\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, animationRegisterCache.vertexConstantOffset, animationRegisterCache.vertexConstantData, animationRegisterCache.numVertexConstant);\n\n\t\tif (animationRegisterCache.numFragmentConstant > 0)\n\t\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, animationRegisterCache.fragmentConstantOffset, animationRegisterCache.fragmentConstantData, animationRegisterCache.numFragmentConstant);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic testGPUCompatibility(shader:ShaderBase)\n\t{\n\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic start()\n\t{\n\t\tsuper.start();\n\n\t\tfor (var i:number = 0; i < this._timeParticleStates.length; i++)\n\t\t\tthis._timeParticleStates[i].offset(this._pAbsoluteTime);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateDeltaTime(dt:number)\n\t{\n\t\tthis._pAbsoluteTime += dt;\n\n\t\tfor (var i:number = 0; i < this._timeParticleStates.length; i++)\n\t\t\tthis._timeParticleStates[i].update(this._pAbsoluteTime);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic resetTime(offset:number /*int*/ = 0)\n\t{\n\t\tfor (var i:number = 0; i < this._timeParticleStates.length; i++)\n\t\t\tthis._timeParticleStates[i].offset(this._pAbsoluteTime + offset);\n\t\tthis.update(this.time);\n\t}\n\n\tpublic dispose()\n\t{\n\t\tfor (var key in this._animatorSubGeometries)\n\t\t\t(<AnimationSubGeometry> this._animatorSubGeometries[key]).dispose();\n\t}\n\n\tprivate getAnimatorSubGeometry(subMesh:ISubMesh):AnimationSubGeometry\n\t{\n\t\tif (!this._animatorParticleStates.length)\n\t\t\treturn;\n\n\t\tvar subGeometry:SubGeometryBase = subMesh.subGeometry;\n\t\tvar animatorSubGeometry:AnimationSubGeometry = this._animatorSubGeometries[subGeometry.id] = new AnimationSubGeometry();\n\n\t\t//create the vertexData vector that will be used for local state data\n\t\tanimatorSubGeometry.createVertexData(subGeometry.numVertices, this._totalLenOfOneVertex);\n\n\t\t//pass the particles data to the animator subGeometry\n\t\tanimatorSubGeometry.animationParticles = this._particleAnimationSet.getAnimationSubGeometry(subMesh).animationParticles;\n\t}\n}\n\nexport = ParticleAnimator;",
    "import IAnimationSet\t\t\t\t\t= require(\"awayjs-display/lib/animators/IAnimationSet\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport AnimationSetBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimationSetBase\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\n\n/**\n * The animation data set used by skeleton-based animators, containing skeleton animation data.\n *\n * @see away.animators.SkeletonAnimator\n */\nclass SkeletonAnimationSet extends AnimationSetBase implements IAnimationSet\n{\n\tprivate _jointsPerVertex:number /*uint*/;\n\n\t/**\n\t * Returns the amount of skeleton joints that can be linked to a single vertex via skinned weight values. For GPU-base animation, the\n\t * maximum allowed value is 4.\n\t */\n\tpublic get jointsPerVertex():number /*uint*/\n\t{\n\t\treturn this._jointsPerVertex;\n\t}\n\n\t/**\n\t * Creates a new <code>SkeletonAnimationSet</code> object.\n\t *\n\t * @param jointsPerVertex Sets the amount of skeleton joints that can be linked to a single vertex via skinned weight values. For GPU-base animation, the maximum allowed value is 4. Defaults to 4.\n\t */\n\tconstructor(jointsPerVertex:number /*uint*/ = 4)\n\t{\n\t\tsuper();\n\n\t\tthis._jointsPerVertex = jointsPerVertex;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase):string\n\t{\n\t\tvar len:number /*uint*/ = shader.animatableAttributes.length;\n\n\t\tvar indexOffset0:number /*uint*/ = shader.numUsedVertexConstants;\n\t\tvar indexOffset1:number /*uint*/ = indexOffset0 + 1;\n\t\tvar indexOffset2:number /*uint*/ = indexOffset0 + 2;\n\t\tvar indexStream:string = \"va\" + shader.numUsedStreams;\n\t\tvar weightStream:string = \"va\" + (shader.numUsedStreams + 1);\n\t\tvar indices:Array<string> = [ indexStream + \".x\", indexStream + \".y\", indexStream + \".z\", indexStream + \".w\" ];\n\t\tvar weights:Array<string> = [ weightStream + \".x\", weightStream + \".y\", weightStream + \".z\", weightStream + \".w\" ];\n\t\tvar temp1:string = this._pFindTempReg(shader.animationTargetRegisters);\n\t\tvar temp2:string = this._pFindTempReg(shader.animationTargetRegisters, temp1);\n\t\tvar dot:string = \"dp4\";\n\t\tvar code:string = \"\";\n\n\t\tfor (var i:number /*uint*/ = 0; i < len; ++i) {\n\n\t\t\tvar src:string = shader.animatableAttributes[i];\n\n\t\t\tfor (var j:number /*uint*/ = 0; j < this._jointsPerVertex; ++j) {\n\t\t\t\tcode += dot + \" \" + temp1 + \".x, \" + src + \", vc[\" + indices[j] + \"+\" + indexOffset0 + \"]\\n\" +\n\t\t\t\t\tdot + \" \" + temp1 + \".y, \" + src + \", vc[\" + indices[j] + \"+\" + indexOffset1 + \"]\\n\" +\n\t\t\t\t\tdot + \" \" + temp1 + \".z, \" + src + \", vc[\" + indices[j] + \"+\" + indexOffset2 + \"]\\n\" +\n\t\t\t\t\t\"mov \" + temp1 + \".w, \" + src + \".w\\n\" +\n\t\t\t\t\t\"mul \" + temp1 + \", \" + temp1 + \", \" + weights[j] + \"\\n\"; // apply weight\n\n\t\t\t\t// add or mov to target. Need to write to a temp reg first, because an output can be a target\n\t\t\t\tif (j == 0)\n\t\t\t\t\tcode += \"mov \" + temp2 + \", \" + temp1 + \"\\n\"; else\n\t\t\t\t\tcode += \"add \" + temp2 + \", \" + temp2 + \", \" + temp1 + \"\\n\";\n\t\t\t}\n\t\t\t// switch to dp3 once positions have been transformed, from now on, it should only be vectors instead of points\n\t\t\tdot = \"dp3\";\n\t\t\tcode += \"mov \" + shader.animationTargetRegisters[i] + \", \" + temp2 + \"\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic activate(shader:ShaderBase, stage:Stage)\n\t{\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic deactivate(shader:ShaderBase, stage:Stage)\n\t{\n//\t\t\tvar streamOffset:number /*uint*/ = pass.numUsedStreams;\n//\t\t\tvar context:IContextGL = <IContextGL> stage.context;\n//\t\t\tcontext.setVertexBufferAt(streamOffset, null);\n//\t\t\tcontext.setVertexBufferAt(streamOffset + 1, null);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALFragmentCode(shader:ShaderBase, shadedTarget:string):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALUVCode(shader:ShaderBase):string\n\t{\n\t\treturn \"mov \" + shader.uvTarget + \",\" + shader.uvSource + \"\\n\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic doneAGALCode(shader:ShaderBase)\n\t{\n\n\t}\n}\n\nexport = SkeletonAnimationSet;",
    "import Quaternion\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Quaternion\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport TriangleSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport TriangleSubMesh\t\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubMesh\");\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport SubGeometryEvent\t\t\t\t\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\n\nimport ContextGLProgramType\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport SkeletonAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/SkeletonAnimationSet\");\nimport JointPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/JointPose\");\nimport Skeleton\t\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/Skeleton\");\nimport SkeletonJoint\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonJoint\");\nimport SkeletonPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonPose\");\nimport ISkeletonAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ISkeletonAnimationState\");\nimport IAnimationTransition\t\t\t\t= require(\"awayjs-renderergl/lib/animators/transitions/IAnimationTransition\");\nimport AnimationStateEvent\t\t\t\t= require(\"awayjs-renderergl/lib/events/AnimationStateEvent\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport TriangleSubMeshRenderable\t\t= require(\"awayjs-renderergl/lib/renderables/TriangleSubMeshRenderable\");\n\n/**\n * Provides an interface for assigning skeleton-based animation data sets to mesh-based entity objects\n * and controlling the various available states of animation through an interative playhead that can be\n * automatically updated or manually triggered.\n */\nclass SkeletonAnimator extends AnimatorBase\n{\n\tprivate _globalMatrices:Float32Array;\n\tprivate _globalPose:SkeletonPose = new SkeletonPose();\n\tprivate _globalPropertiesDirty:boolean;\n\tprivate _numJoints:number /*uint*/;\n\tprivate _morphedSubGeometry:Object = new Object();\n\tprivate _morphedSubGeometryDirty:Object = new Object();\n\tprivate _condensedMatrices:Float32Array;\n\n\tprivate _skeleton:Skeleton;\n\tprivate _forceCPU:boolean;\n\tprivate _useCondensedIndices:boolean;\n\tprivate _jointsPerVertex:number /*uint*/;\n\tprivate _activeSkeletonState:ISkeletonAnimationState;\n\tprivate _onTransitionCompleteDelegate:(event:AnimationStateEvent) => void;\n\n\tprivate _onIndicesUpdateDelegate:(event:SubGeometryEvent) => void;\n\tprivate _onVerticesUpdateDelegate:(event:SubGeometryEvent) => void;\n\n\t/**\n\t * returns the calculated global matrices of the current skeleton pose.\n\t *\n\t * @see #globalPose\n\t */\n\tpublic get globalMatrices():Float32Array\n\t{\n\t\tif (this._globalPropertiesDirty)\n\t\t\tthis.updateGlobalProperties();\n\n\t\treturn this._globalMatrices;\n\t}\n\n\t/**\n\t * returns the current skeleton pose output from the animator.\n\t *\n\t * @see away.animators.data.SkeletonPose\n\t */\n\tpublic get globalPose():SkeletonPose\n\t{\n\t\tif (this._globalPropertiesDirty)\n\t\t\tthis.updateGlobalProperties();\n\n\t\treturn this._globalPose;\n\t}\n\n\t/**\n\t * Returns the skeleton object in use by the animator - this defines the number and heirarchy of joints used by the\n\t * skinned geoemtry to which skeleon animator is applied.\n\t */\n\tpublic get skeleton():Skeleton\n\t{\n\t\treturn this._skeleton;\n\t}\n\n\t/**\n\t * Indicates whether the skeleton animator is disabled by default for GPU rendering, something that allows the animator to perform calculation on the GPU.\n\t * Defaults to false.\n\t */\n\tpublic get forceCPU():boolean\n\t{\n\t\treturn this._forceCPU;\n\t}\n\n\t/**\n\t * Offers the option of enabling GPU accelerated animation on skeletons larger than 32 joints\n\t * by condensing the number of joint index values required per mesh. Only applicable to\n\t * skeleton animations that utilise more than one mesh object. Defaults to false.\n\t */\n\tpublic get useCondensedIndices():boolean\n\t{\n\t\treturn this._useCondensedIndices;\n\t}\n\n\tpublic set useCondensedIndices(value:boolean)\n\t{\n\t\tthis._useCondensedIndices = value;\n\t}\n\n\t/**\n\t * Creates a new <code>SkeletonAnimator</code> object.\n\t *\n\t * @param skeletonAnimationSet The animation data set containing the skeleton animations used by the animator.\n\t * @param skeleton The skeleton object used for calculating the resulting global matrices for transforming skinned mesh data.\n\t * @param forceCPU Optional value that only allows the animator to perform calculation on the CPU. Defaults to false.\n\t */\n\tconstructor(animationSet:SkeletonAnimationSet, skeleton:Skeleton, forceCPU:boolean = false)\n\t{\n\t\tsuper(animationSet);\n\n\t\tthis._skeleton = skeleton;\n\t\tthis._forceCPU = forceCPU;\n\t\tthis._jointsPerVertex = animationSet.jointsPerVertex;\n\n\t\tthis._numJoints = this._skeleton.numJoints;\n\t\tthis._globalMatrices = new Float32Array(this._numJoints*12);\n\n\t\tvar j:number /*int*/ = 0;\n\t\tfor (var i:number /*uint*/ = 0; i < this._numJoints; ++i) {\n\t\t\tthis._globalMatrices[j++] = 1;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 1;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t\tthis._globalMatrices[j++] = 1;\n\t\t\tthis._globalMatrices[j++] = 0;\n\t\t}\n\n\t\tthis._onTransitionCompleteDelegate = (event:AnimationStateEvent) => this.onTransitionComplete(event);\n\t\tthis._onIndicesUpdateDelegate = (event:SubGeometryEvent) => this.onIndicesUpdate(event);\n\t\tthis._onVerticesUpdateDelegate = (event:SubGeometryEvent) => this.onVerticesUpdate(event);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic clone():AnimatorBase\n\t{\n\t\t/* The cast to SkeletonAnimationSet should never fail, as _animationSet can only be set\n\t\t through the constructor, which will only accept a SkeletonAnimationSet. */\n\t\treturn new SkeletonAnimator(<SkeletonAnimationSet> this._pAnimationSet, this._skeleton, this._forceCPU);\n\t}\n\n\t/**\n\t * Plays an animation state registered with the given name in the animation data set.\n\t *\n\t * @param name The data set name of the animation state to be played.\n\t * @param transition An optional transition object that determines how the animator will transition from the currently active animation state.\n\t * @param offset An option offset time (in milliseconds) that resets the state's internal clock to the absolute time of the animator plus the offset value. Required for non-looping animation states.\n\t */\n\tpublic play(name:string, transition:IAnimationTransition = null, offset:number = NaN)\n\t{\n\t\tif (this._pActiveAnimationName == name)\n\t\t\treturn;\n\n\t\tthis._pActiveAnimationName = name;\n\n\t\tif (!this._pAnimationSet.hasAnimation(name))\n\t\t\tthrow new Error(\"Animation root node \" + name + \" not found!\");\n\n\t\tif (transition && this._pActiveNode) {\n\t\t\t//setup the transition\n\t\t\tthis._pActiveNode = transition.getAnimationNode(this, this._pActiveNode, this._pAnimationSet.getAnimation(name), this._pAbsoluteTime);\n\t\t\tthis._pActiveNode.addEventListener(AnimationStateEvent.TRANSITION_COMPLETE, this._onTransitionCompleteDelegate);\n\t\t} else\n\t\t\tthis._pActiveNode = this._pAnimationSet.getAnimation(name);\n\n\t\tthis._pActiveState = this.getAnimationState(this._pActiveNode);\n\n\t\tif (this.updatePosition) {\n\t\t\t//update straight away to reset position deltas\n\t\t\tthis._pActiveState.update(this._pAbsoluteTime);\n\t\t\tthis._pActiveState.positionDelta;\n\t\t}\n\n\t\tthis._activeSkeletonState = <ISkeletonAnimationState> this._pActiveState;\n\n\t\tthis.start();\n\n\t\t//apply a time offset if specified\n\t\tif (!isNaN(offset))\n\t\t\tthis.reset(name, offset);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(shader:ShaderBase, renderable:RenderableBase, stage:Stage, camera:Camera, vertexConstantOffset:number /*int*/, vertexStreamOffset:number /*int*/)\n\t{\n\t\t// do on request of globalProperties\n\t\tif (this._globalPropertiesDirty)\n\t\t\tthis.updateGlobalProperties();\n\n\t\tvar subGeometry:TriangleSubGeometry = <TriangleSubGeometry> (<TriangleSubMesh> (<TriangleSubMeshRenderable> renderable).subMesh).subGeometry;\n\n\t\tsubGeometry.useCondensedIndices = this._useCondensedIndices;\n\n\t\tif (this._useCondensedIndices) {\n\t\t\t// using a condensed data set\n\t\t\tthis.updateCondensedMatrices(subGeometry.condensedIndexLookUp);\n\t\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, vertexConstantOffset, this._condensedMatrices, this._condensedMatrices.length/4);\n\t\t} else {\n\t\t\tif (this._pAnimationSet.usesCPU) {\n\t\t\t\tif (this._morphedSubGeometryDirty[subGeometry.id])\n\t\t\t\t\tthis.morphSubGeometry(<TriangleSubMeshRenderable> renderable, subGeometry);\n\n\t\t\t\treturn\n\t\t\t}\n\t\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, vertexConstantOffset, this._globalMatrices, this._numJoints*3);\n\t\t}\n\n\t\tshader.jointIndexIndex = vertexStreamOffset++;\n\t\tshader.jointWeightIndex = vertexStreamOffset++;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic testGPUCompatibility(shader:ShaderBase)\n\t{\n\t\tif (!this._useCondensedIndices && (this._forceCPU || this._jointsPerVertex > 4 || shader.numUsedVertexConstants + this._numJoints*3 > 128))\n\t\t\tthis._pAnimationSet.cancelGPUCompatibility();\n\t}\n\n\t/**\n\t * Applies the calculated time delta to the active animation state node or state transition object.\n\t */\n\tpublic _pUpdateDeltaTime(dt:number)\n\t{\n\t\tsuper._pUpdateDeltaTime(dt);\n\n\t\t//invalidate pose matrices\n\t\tthis._globalPropertiesDirty = true;\n\n\t\t//trigger geometry invalidation if using CPU animation\n\t\tif (this._pAnimationSet.usesCPU)\n\t\t\tfor (var key in this._morphedSubGeometryDirty)\n\t\t\t\tthis._morphedSubGeometryDirty[key] = true;\n\t}\n\n\tprivate updateCondensedMatrices(condensedIndexLookUp:Array<number>)\n\t{\n\t\tvar j:number = 0, k:number = 0;\n\t\tvar len:number = condensedIndexLookUp.length;\n\t\tvar srcIndex:number /*uint*/;\n\n\t\tthis._condensedMatrices = new Float32Array(len*12);\n\n\t\tfor (var i:number = 0; i < len; i++) {\n\t\t\tsrcIndex = condensedIndexLookUp[i]*12; //12 required for the three 4-component vectors that store the matrix\n\t\t\tk = 12;\n\t\t\t// copy into condensed\n\t\t\twhile (k--)\n\t\t\t\tthis._condensedMatrices[j++] = this._globalMatrices[srcIndex++];\n\t\t}\n\t}\n\n\tprivate updateGlobalProperties()\n\t{\n\t\tthis._globalPropertiesDirty = false;\n\n\t\t//get global pose\n\t\tthis.localToGlobalPose(this._activeSkeletonState.getSkeletonPose(this._skeleton), this._globalPose, this._skeleton);\n\n\t\t// convert pose to matrix\n\t\tvar mtxOffset:number /*uint*/ = 0;\n\t\tvar globalPoses:Array<JointPose> = this._globalPose.jointPoses;\n\t\tvar raw:Float32Array;\n\t\tvar ox:number, oy:number, oz:number, ow:number;\n\t\tvar xy2:number, xz2:number, xw2:number;\n\t\tvar yz2:number, yw2:number, zw2:number;\n\t\tvar n11:number, n12:number, n13:number;\n\t\tvar n21:number, n22:number, n23:number;\n\t\tvar n31:number, n32:number, n33:number;\n\t\tvar m11:number, m12:number, m13:number, m14:number;\n\t\tvar m21:number, m22:number, m23:number, m24:number;\n\t\tvar m31:number, m32:number, m33:number, m34:number;\n\t\tvar joints:Array<SkeletonJoint> = this._skeleton.joints;\n\t\tvar pose:JointPose;\n\t\tvar quat:Quaternion;\n\t\tvar vec:Vector3D;\n\t\tvar t:number;\n\n\t\tfor (var i:number /*uint*/ = 0; i < this._numJoints; ++i) {\n\t\t\tpose = globalPoses[i];\n\t\t\tquat = pose.orientation;\n\t\t\tvec = pose.translation;\n\t\t\tox = quat.x;\n\t\t\toy = quat.y;\n\t\t\toz = quat.z;\n\t\t\tow = quat.w;\n\n\t\t\txy2 = (t = 2.0*ox)*oy;\n\t\t\txz2 = t*oz;\n\t\t\txw2 = t*ow;\n\t\t\tyz2 = (t = 2.0*oy)*oz;\n\t\t\tyw2 = t*ow;\n\t\t\tzw2 = 2.0*oz*ow;\n\n\t\t\tyz2 = 2.0*oy*oz;\n\t\t\tyw2 = 2.0*oy*ow;\n\t\t\tzw2 = 2.0*oz*ow;\n\t\t\tox *= ox;\n\t\t\toy *= oy;\n\t\t\toz *= oz;\n\t\t\tow *= ow;\n\n\t\t\tn11 = (t = ox - oy) - oz + ow;\n\t\t\tn12 = xy2 - zw2;\n\t\t\tn13 = xz2 + yw2;\n\t\t\tn21 = xy2 + zw2;\n\t\t\tn22 = -t - oz + ow;\n\t\t\tn23 = yz2 - xw2;\n\t\t\tn31 = xz2 - yw2;\n\t\t\tn32 = yz2 + xw2;\n\t\t\tn33 = -ox - oy + oz + ow;\n\n\t\t\t// prepend inverse bind pose\n\t\t\traw = joints[i].inverseBindPose;\n\t\t\tm11 = raw[0];\n\t\t\tm12 = raw[4];\n\t\t\tm13 = raw[8];\n\t\t\tm14 = raw[12];\n\t\t\tm21 = raw[1];\n\t\t\tm22 = raw[5];\n\t\t\tm23 = raw[9];\n\t\t\tm24 = raw[13];\n\t\t\tm31 = raw[2];\n\t\t\tm32 = raw[6];\n\t\t\tm33 = raw[10];\n\t\t\tm34 = raw[14];\n\n\t\t\tthis._globalMatrices[mtxOffset] = n11*m11 + n12*m21 + n13*m31;\n\t\t\tthis._globalMatrices[mtxOffset + 1] = n11*m12 + n12*m22 + n13*m32;\n\t\t\tthis._globalMatrices[mtxOffset + 2] = n11*m13 + n12*m23 + n13*m33;\n\t\t\tthis._globalMatrices[mtxOffset + 3] = n11*m14 + n12*m24 + n13*m34 + vec.x;\n\t\t\tthis._globalMatrices[mtxOffset + 4] = n21*m11 + n22*m21 + n23*m31;\n\t\t\tthis._globalMatrices[mtxOffset + 5] = n21*m12 + n22*m22 + n23*m32;\n\t\t\tthis._globalMatrices[mtxOffset + 6] = n21*m13 + n22*m23 + n23*m33;\n\t\t\tthis._globalMatrices[mtxOffset + 7] = n21*m14 + n22*m24 + n23*m34 + vec.y;\n\t\t\tthis._globalMatrices[mtxOffset + 8] = n31*m11 + n32*m21 + n33*m31;\n\t\t\tthis._globalMatrices[mtxOffset + 9] = n31*m12 + n32*m22 + n33*m32;\n\t\t\tthis._globalMatrices[mtxOffset + 10] = n31*m13 + n32*m23 + n33*m33;\n\t\t\tthis._globalMatrices[mtxOffset + 11] = n31*m14 + n32*m24 + n33*m34 + vec.z;\n\n\t\t\tmtxOffset = mtxOffset + 12;\n\t\t}\n\t}\n\n\n\tpublic getRenderableSubGeometry(renderable:TriangleSubMeshRenderable, sourceSubGeometry:TriangleSubGeometry):TriangleSubGeometry\n\t{\n\t\tthis._morphedSubGeometryDirty[sourceSubGeometry.id] = true;\n\n\t\t//early out for GPU animations\n\t\tif (!this._pAnimationSet.usesCPU)\n\t\t\treturn sourceSubGeometry;\n\n\t\tvar targetSubGeometry:TriangleSubGeometry;\n\n\t\tif (!(targetSubGeometry = this._morphedSubGeometry[sourceSubGeometry.id])) {\n\t\t\t//not yet stored\n\t\t\ttargetSubGeometry = this._morphedSubGeometry[sourceSubGeometry.id] = sourceSubGeometry.clone();\n\t\t\t//turn off auto calculations on the morphed geometry\n\t\t\ttargetSubGeometry.autoDeriveNormals = false;\n\t\t\ttargetSubGeometry.autoDeriveTangents = false;\n\t\t\ttargetSubGeometry.autoDeriveUVs = false;\n\t\t\t//add event listeners for any changes in UV values on the source geometry\n\t\t\tsourceSubGeometry.addEventListener(SubGeometryEvent.INVALIDATE_INDICES, this._onIndicesUpdateDelegate);\n\t\t\tsourceSubGeometry.addEventListener(SubGeometryEvent.INVALIDATE_VERTICES, this._onVerticesUpdateDelegate);\n\t\t}\n\n\t\treturn targetSubGeometry;\n\t}\n\n\t/**\n\t * If the animation can't be performed on GPU, transform vertices manually\n\t * @param subGeom The subgeometry containing the weights and joint index data per vertex.\n\t * @param pass The material pass for which we need to transform the vertices\n\t */\n\tpublic morphSubGeometry(renderable:TriangleSubMeshRenderable, sourceSubGeometry:TriangleSubGeometry)\n\t{\n\t\tthis._morphedSubGeometryDirty[sourceSubGeometry.id] = false;\n\n\t\tvar numVertices:number = sourceSubGeometry.numVertices;\n\t\tvar sourcePositions:Float32Array = sourceSubGeometry.positions.get(numVertices);\n\t\tvar sourceNormals:Float32Array = sourceSubGeometry.normals.get(numVertices);\n\t\tvar sourceTangents:Float32Array = sourceSubGeometry.tangents.get(numVertices);\n\n\t\tvar jointIndices:Float32Array = <Float32Array> sourceSubGeometry.jointIndices.get(numVertices);\n\t\tvar jointWeights:Float32Array = <Float32Array> sourceSubGeometry.jointWeights.get(numVertices);\n\n\t\tvar targetSubGeometry:TriangleSubGeometry = this._morphedSubGeometry[sourceSubGeometry.id];\n\n\t\tvar targetPositions:Float32Array = targetSubGeometry.positions.get(numVertices);\n\t\tvar targetNormals:Float32Array = targetSubGeometry.normals.get(numVertices);\n\t\tvar targetTangents:Float32Array = targetSubGeometry.tangents.get(numVertices);\n\n\t\tvar index:number /*uint*/ = 0;\n\t\tvar j:number /*uint*/ = 0;\n\t\tvar k:number /*uint*/;\n\t\tvar vx:number, vy:number, vz:number;\n\t\tvar nx:number, ny:number, nz:number;\n\t\tvar tx:number, ty:number, tz:number;\n\t\tvar len:number /*int*/ = sourcePositions.length;\n\t\tvar weight:number;\n\t\tvar vertX:number, vertY:number, vertZ:number;\n\t\tvar normX:number, normY:number, normZ:number;\n\t\tvar tangX:number, tangY:number, tangZ:number;\n\t\tvar m11:number, m12:number, m13:number, m14:number;\n\t\tvar m21:number, m22:number, m23:number, m24:number;\n\t\tvar m31:number, m32:number, m33:number, m34:number;\n\n\t\twhile (index < len) {\n\t\t\tvertX = sourcePositions[index];\n\t\t\tvertY = sourcePositions[index + 1];\n\t\t\tvertZ = sourcePositions[index + 2];\n\t\t\tnormX = sourceNormals[index];\n\t\t\tnormY = sourceNormals[index + 1];\n\t\t\tnormZ = sourceNormals[index + 2];\n\t\t\ttangX = sourceTangents[index];\n\t\t\ttangY = sourceTangents[index + 1];\n\t\t\ttangZ = sourceTangents[index + 2];\n\t\t\tvx = 0;\n\t\t\tvy = 0;\n\t\t\tvz = 0;\n\t\t\tnx = 0;\n\t\t\tny = 0;\n\t\t\tnz = 0;\n\t\t\ttx = 0;\n\t\t\tty = 0;\n\t\t\ttz = 0;\n\t\t\tk = 0;\n\t\t\twhile (k < this._jointsPerVertex) {\n\t\t\t\tweight = jointWeights[j];\n\t\t\t\tif (weight > 0) {\n\t\t\t\t\t// implicit /3*12 (/3 because indices are multiplied by 3 for gpu matrix access, *12 because it's the matrix size)\n\t\t\t\t\tvar mtxOffset:number /*uint*/ = jointIndices[j++] << 2;\n\t\t\t\t\tm11 = this._globalMatrices[mtxOffset];\n\t\t\t\t\tm12 = this._globalMatrices[mtxOffset + 1];\n\t\t\t\t\tm13 = this._globalMatrices[mtxOffset + 2];\n\t\t\t\t\tm14 = this._globalMatrices[mtxOffset + 3];\n\t\t\t\t\tm21 = this._globalMatrices[mtxOffset + 4];\n\t\t\t\t\tm22 = this._globalMatrices[mtxOffset + 5];\n\t\t\t\t\tm23 = this._globalMatrices[mtxOffset + 6];\n\t\t\t\t\tm24 = this._globalMatrices[mtxOffset + 7];\n\t\t\t\t\tm31 = this._globalMatrices[mtxOffset + 8];\n\t\t\t\t\tm32 = this._globalMatrices[mtxOffset + 9];\n\t\t\t\t\tm33 = this._globalMatrices[mtxOffset + 10];\n\t\t\t\t\tm34 = this._globalMatrices[mtxOffset + 11];\n\t\t\t\t\tvx += weight*(m11*vertX + m12*vertY + m13*vertZ + m14);\n\t\t\t\t\tvy += weight*(m21*vertX + m22*vertY + m23*vertZ + m24);\n\t\t\t\t\tvz += weight*(m31*vertX + m32*vertY + m33*vertZ + m34);\n\t\t\t\t\tnx += weight*(m11*normX + m12*normY + m13*normZ);\n\t\t\t\t\tny += weight*(m21*normX + m22*normY + m23*normZ);\n\t\t\t\t\tnz += weight*(m31*normX + m32*normY + m33*normZ);\n\t\t\t\t\ttx += weight*(m11*tangX + m12*tangY + m13*tangZ);\n\t\t\t\t\tty += weight*(m21*tangX + m22*tangY + m23*tangZ);\n\t\t\t\t\ttz += weight*(m31*tangX + m32*tangY + m33*tangZ);\n\t\t\t\t\t++k;\n\t\t\t\t} else {\n\t\t\t\t\tj += (this._jointsPerVertex - k);\n\t\t\t\t\tk = this._jointsPerVertex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttargetPositions[index] = vx;\n\t\t\ttargetPositions[index + 1] = vy;\n\t\t\ttargetPositions[index + 2] = vz;\n\t\t\ttargetNormals[index] = nx;\n\t\t\ttargetNormals[index + 1] = ny;\n\t\t\ttargetNormals[index + 2] = nz;\n\t\t\ttargetTangents[index] = tx;\n\t\t\ttargetTangents[index + 1] = ty;\n\t\t\ttargetTangents[index + 2] = tz;\n\n\t\t\tindex += 3;\n\t\t}\n\n\t\ttargetSubGeometry.setPositions(targetPositions);\n\t\ttargetSubGeometry.setNormals(targetNormals);\n\t\ttargetSubGeometry.setTangents(targetTangents);\n\t}\n\n\t/**\n\t * Converts a local hierarchical skeleton pose to a global pose\n\t * @param targetPose The SkeletonPose object that will contain the global pose.\n\t * @param skeleton The skeleton containing the joints, and as such, the hierarchical data to transform to global poses.\n\t */\n\tprivate localToGlobalPose(sourcePose:SkeletonPose, targetPose:SkeletonPose, skeleton:Skeleton)\n\t{\n\t\tvar globalPoses:Array<JointPose> = targetPose.jointPoses;\n\t\tvar globalJointPose:JointPose;\n\t\tvar joints:Array<SkeletonJoint> = skeleton.joints;\n\t\tvar len:number /*uint*/ = sourcePose.numJointPoses;\n\t\tvar jointPoses:Array<JointPose> = sourcePose.jointPoses;\n\t\tvar parentIndex:number /*int*/;\n\t\tvar joint:SkeletonJoint;\n\t\tvar parentPose:JointPose;\n\t\tvar pose:JointPose;\n\t\tvar or:Quaternion;\n\t\tvar tr:Vector3D;\n\t\tvar t:Vector3D;\n\t\tvar q:Quaternion;\n\n\t\tvar x1:number, y1:number, z1:number, w1:number;\n\t\tvar x2:number, y2:number, z2:number, w2:number;\n\t\tvar x3:number, y3:number, z3:number;\n\n\t\t// :s\n\t\tif (globalPoses.length != len)\n\t\t\tglobalPoses.length = len;\n\n\t\tfor (var i:number /*uint*/ = 0; i < len; ++i) {\n\t\t\tglobalJointPose = globalPoses[i];\n\n\t\t\tif (globalJointPose == null)\n\t\t\t\tglobalJointPose = globalPoses[i] = new JointPose();\n\n\t\t\tjoint = joints[i];\n\t\t\tparentIndex = joint.parentIndex;\n\t\t\tpose = jointPoses[i];\n\n\t\t\tq = globalJointPose.orientation;\n\t\t\tt = globalJointPose.translation;\n\n\t\t\tif (parentIndex < 0) {\n\t\t\t\ttr = pose.translation;\n\t\t\t\tor = pose.orientation;\n\t\t\t\tq.x = or.x;\n\t\t\t\tq.y = or.y;\n\t\t\t\tq.z = or.z;\n\t\t\t\tq.w = or.w;\n\t\t\t\tt.x = tr.x;\n\t\t\t\tt.y = tr.y;\n\t\t\t\tt.z = tr.z;\n\t\t\t} else {\n\t\t\t\t// append parent pose\n\t\t\t\tparentPose = globalPoses[parentIndex];\n\n\t\t\t\t// rotate point\n\t\t\t\tor = parentPose.orientation;\n\t\t\t\ttr = pose.translation;\n\t\t\t\tx2 = or.x;\n\t\t\t\ty2 = or.y;\n\t\t\t\tz2 = or.z;\n\t\t\t\tw2 = or.w;\n\t\t\t\tx3 = tr.x;\n\t\t\t\ty3 = tr.y;\n\t\t\t\tz3 = tr.z;\n\n\t\t\t\tw1 = -x2*x3 - y2*y3 - z2*z3;\n\t\t\t\tx1 = w2*x3 + y2*z3 - z2*y3;\n\t\t\t\ty1 = w2*y3 - x2*z3 + z2*x3;\n\t\t\t\tz1 = w2*z3 + x2*y3 - y2*x3;\n\n\t\t\t\t// append parent translation\n\t\t\t\ttr = parentPose.translation;\n\t\t\t\tt.x = -w1*x2 + x1*w2 - y1*z2 + z1*y2 + tr.x;\n\t\t\t\tt.y = -w1*y2 + x1*z2 + y1*w2 - z1*x2 + tr.y;\n\t\t\t\tt.z = -w1*z2 - x1*y2 + y1*x2 + z1*w2 + tr.z;\n\n\t\t\t\t// append parent orientation\n\t\t\t\tx1 = or.x;\n\t\t\t\ty1 = or.y;\n\t\t\t\tz1 = or.z;\n\t\t\t\tw1 = or.w;\n\t\t\t\tor = pose.orientation;\n\t\t\t\tx2 = or.x;\n\t\t\t\ty2 = or.y;\n\t\t\t\tz2 = or.z;\n\t\t\t\tw2 = or.w;\n\n\t\t\t\tq.w = w1*w2 - x1*x2 - y1*y2 - z1*z2;\n\t\t\t\tq.x = w1*x2 + x1*w2 + y1*z2 - z1*y2;\n\t\t\t\tq.y = w1*y2 - x1*z2 + y1*w2 + z1*x2;\n\t\t\t\tq.z = w1*z2 + x1*y2 - y1*x2 + z1*w2;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onTransitionComplete(event:AnimationStateEvent)\n\t{\n\t\tif (event.type == AnimationStateEvent.TRANSITION_COMPLETE) {\n\t\t\tevent.animationNode.removeEventListener(AnimationStateEvent.TRANSITION_COMPLETE, this._onTransitionCompleteDelegate);\n\t\t\t//if this is the current active state transition, revert control to the active node\n\t\t\tif (this._pActiveState == event.animationState) {\n\t\t\t\tthis._pActiveNode = this._pAnimationSet.getAnimation(this._pActiveAnimationName);\n\t\t\t\tthis._pActiveState = this.getAnimationState(this._pActiveNode);\n\t\t\t\tthis._activeSkeletonState = <ISkeletonAnimationState> this._pActiveState;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onIndicesUpdate(event:SubGeometryEvent)\n\t{\n\t\tvar subGeometry:TriangleSubGeometry = <TriangleSubGeometry> event.target;\n\n\t\t(<TriangleSubGeometry> this._morphedSubGeometry[subGeometry.id]).setIndices(subGeometry.indices);\n\t}\n\n\tprivate onVerticesUpdate(event:SubGeometryEvent)\n\t{\n\t\tvar subGeometry:TriangleSubGeometry = <TriangleSubGeometry> event.target;\n\t\tvar morphGeometry:TriangleSubGeometry = <TriangleSubGeometry> this._morphedSubGeometry[subGeometry.id];\n\n\t\tswitch(event.attributesView) {\n\t\t\tcase subGeometry.uvs:\n\t\t\t\tmorphGeometry.setUVs(subGeometry.uvs.get(subGeometry.numVertices));\n\t\t\t\tbreak;\n\t\t\tcase subGeometry.secondaryUVs:\n\t\t\t\tmorphGeometry.setSecondaryUVs(subGeometry.secondaryUVs.get(subGeometry.numVertices));\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport = SkeletonAnimator;",
    "import IAnimationSet\t\t\t\t\t= require(\"awayjs-display/lib/animators/IAnimationSet\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport AnimationSetBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimationSetBase\");\nimport VertexAnimationMode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/VertexAnimationMode\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\n\n/**\n * The animation data set used by vertex-based animators, containing vertex animation state data.\n *\n * @see VertexAnimator\n */\nclass VertexAnimationSet extends AnimationSetBase implements IAnimationSet\n{\n\tprivate _numPoses:number /*uint*/;\n\tprivate _blendMode:string;\n\n\t/**\n\t * Returns the number of poses made available at once to the GPU animation code.\n\t */\n\tpublic get numPoses():number /*uint*/\n\t{\n\t\treturn this._numPoses;\n\t}\n\n\t/**\n\t * Returns the active blend mode of the vertex animator object.\n\t */\n\tpublic get blendMode():string\n\t{\n\t\treturn this._blendMode;\n\t}\n\n\t/**\n\t * Returns whether or not normal data is used in last set GPU pass of the vertex shader.\n\t */\n//\t\tpublic get useNormals():boolean\n//\t\t{\n//\t\t\treturn this._uploadNormals;\n//\t\t}\n\n\t/**\n\t * Creates a new <code>VertexAnimationSet</code> object.\n\t *\n\t * @param numPoses The number of poses made available at once to the GPU animation code.\n\t * @param blendMode Optional value for setting the animation mode of the vertex animator object.\n\t *\n\t * @see away3d.animators.data.VertexAnimationMode\n\t */\n\tconstructor(numPoses:number /*uint*/ = 2, blendMode:string = \"absolute\")\n\t{\n\t\tsuper();\n\t\tthis._numPoses = numPoses;\n\t\tthis._blendMode = blendMode;\n\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase):string\n\t{\n\t\tif (this._blendMode == VertexAnimationMode.ABSOLUTE)\n\t\t\treturn this.getAbsoluteAGALCode(shader);\n\t\telse\n\t\t\treturn this.getAdditiveAGALCode(shader);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic activate(shader:ShaderBase, stage:Stage)\n\t{\n//\t\t\tvar uID:number = pass._iUniqueId;\n//\t\t\tthis._uploadNormals = <boolean> this._useNormals[uID];\n//\t\t\tthis._uploadTangents = <boolean> this._useTangents[uID];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic deactivate(shader:ShaderBase, stage:Stage)\n\t{\n//\t\t\tvar uID:number = pass._iUniqueId;\n//\t\t\tvar index:number /*uint*/ = this._streamIndices[uID];\n//\t\t\tvar context:IContextGL = <IContextGL> stage.context;\n//\t\t\tcontext.setVertexBufferAt(index, null);\n//\t\t\tif (this._uploadNormals)\n//\t\t\t\tcontext.setVertexBufferAt(index + 1, null);\n//\t\t\tif (this._uploadTangents)\n//\t\t\t\tcontext.setVertexBufferAt(index + 2, null);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALFragmentCode(shader:ShaderBase, shadedTarget:string):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALUVCode(shader:ShaderBase):string\n\t{\n\t\treturn \"mov \" + shader.uvTarget + \",\" + shader.uvSource + \"\\n\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic doneAGALCode(shader:ShaderBase)\n\t{\n\n\t}\n\n\t/**\n\t * Generates the vertex AGAL code for absolute blending.\n\t */\n\tprivate getAbsoluteAGALCode(shader:ShaderBase):string\n\t{\n\t\tvar code:string = \"\";\n\t\tvar temp1:string = this._pFindTempReg(shader.animationTargetRegisters);\n\t\tvar temp2:string = this._pFindTempReg(shader.animationTargetRegisters, temp1);\n\t\tvar regs:Array<string> = new Array<string>(\"x\", \"y\", \"z\", \"w\");\n\t\tvar len:number /*uint*/ = shader.animatableAttributes.length;\n\t\tvar constantReg:string = \"vc\" + shader.numUsedVertexConstants;\n\n\t\tif (len > 2)\n\t\t\tlen = 2;\n\t\tvar streamIndex:number /*uint*/ = shader.numUsedStreams;\n\n\t\tfor (var i:number /*uint*/ = 0; i < len; ++i) {\n\t\t\tcode += \"mul \" + temp1 + \", \" + shader.animatableAttributes[i] + \", \" + constantReg + \".\" + regs[0] + \"\\n\";\n\n\t\t\tfor (var j:number /*uint*/ = 1; j < this._numPoses; ++j) {\n\t\t\t\tcode += \"mul \" + temp2 + \", va\" + streamIndex + \", \" + constantReg + \".\" + regs[j] + \"\\n\";\n\n\t\t\t\tif (j < this._numPoses - 1)\n\t\t\t\t\tcode += \"add \" + temp1 + \", \" + temp1 + \", \" + temp2 + \"\\n\";\n\n\t\t\t\t++streamIndex;\n\t\t\t}\n\n\t\t\tcode += \"add \" + shader.animationTargetRegisters[i] + \", \" + temp1 + \", \" + temp2 + \"\\n\";\n\t\t}\n\n\t\t// add code for bitangents if tangents are used\n\t\tif (shader.tangentDependencies > 0 || shader.outputsNormals) {\n\t\t\tcode += \"dp3 \" + temp1 + \".x, \" + shader.animatableAttributes[2] + \", \" + shader.animationTargetRegisters[1] + \"\\n\" +\n\t\t\t\t\"mul \" + temp1 + \", \" + shader.animationTargetRegisters[1] + \", \" + temp1 + \".x\\n\" +\n\t\t\t\t\"sub \" + shader.animationTargetRegisters[2] + \", \" + shader.animationTargetRegisters[2] + \", \" + temp1 + \"\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\t/**\n\t * Generates the vertex AGAL code for additive blending.\n\t */\n\tprivate getAdditiveAGALCode(shader:ShaderBase):string\n\t{\n\t\tvar code:string = \"\";\n\t\tvar len:number /*uint*/ = shader.animatableAttributes.length;\n\t\tvar regs:Array<string> = [\"x\", \"y\", \"z\", \"w\"];\n\t\tvar temp1:string = this._pFindTempReg(shader.animationTargetRegisters);\n\t\tvar k:number /*uint*/;\n\n\t\tvar streamIndex:number /*uint*/ = shader.numUsedStreams;\n\n\t\tif (len > 2)\n\t\t\tlen = 2;\n\n\t\tcode += \"mov  \" + shader.animationTargetRegisters[0] + \", \" + shader.animatableAttributes[0] + \"\\n\";\n\t\tif (shader.normalDependencies > 0)\n\t\t\tcode += \"mov \" + shader.animationTargetRegisters[1] + \", \" + shader.animatableAttributes[1] + \"\\n\";\n\n\t\tfor (var i:number /*uint*/ = 0; i < len; ++i) {\n\t\t\tfor (var j:number /*uint*/ = 0; j < this._numPoses; ++j) {\n\t\t\t\tcode += \"mul \" + temp1 + \", va\" + (streamIndex + k) + \", vc\" + shader.numUsedVertexConstants + \".\" + regs[j] + \"\\n\" +\n\t\t\t\t\t\"add \" + shader.animationTargetRegisters[i] + \", \" + shader.animationTargetRegisters[i] + \", \" + temp1 + \"\\n\";\n\t\t\t\tk++;\n\t\t\t}\n\t\t}\n\n\t\tif (shader.tangentDependencies > 0 || shader.outputsNormals) {\n\t\t\tcode += \"dp3 \" + temp1 + \".x, \" + shader.animatableAttributes[2] + \", \" + shader.animationTargetRegisters[1] + \"\\n\" +\n\t\t\t\t\"mul \" + temp1 + \", \" + shader.animationTargetRegisters[1] + \", \" + temp1 + \".x\\n\" +\n\t\t\t\t\"sub \" + shader.animationTargetRegisters[2] + \", \" + shader.animatableAttributes[2] + \", \" + temp1 + \"\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n}\n\nexport = VertexAnimationSet;",
    "import Geometry\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/Geometry\");\nimport SubGeometryBase\t\t\t\t\t= require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport TriangleSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport TriangleSubMesh\t\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubMesh\");\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport Mesh\t\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLProgramType\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport VertexAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/VertexAnimationSet\");\nimport VertexAnimationMode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/VertexAnimationMode\");\nimport IVertexAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/IVertexAnimationState\");\nimport IAnimationTransition\t\t\t\t= require(\"awayjs-renderergl/lib/animators/transitions/IAnimationTransition\");\nimport TriangleSubMeshRenderable\t\t= require(\"awayjs-renderergl/lib/renderables/TriangleSubMeshRenderable\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport SubGeometryVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/SubGeometryVOBase\");\n\n/**\n * Provides an interface for assigning vertex-based animation data sets to mesh-based entity objects\n * and controlling the various available states of animation through an interative playhead that can be\n * automatically updated or manually triggered.\n */\nclass VertexAnimator extends AnimatorBase\n{\n\tprivate _vertexAnimationSet:VertexAnimationSet;\n\tprivate _poses:Array<Geometry> = new Array<Geometry>();\n\tprivate _weights:Float32Array = new Float32Array([1, 0, 0, 0]);\n\tprivate _numPoses:number /*uint*/;\n\tprivate _blendMode:string;\n\tprivate _activeVertexState:IVertexAnimationState;\n\n\t/**\n\t * Creates a new <code>VertexAnimator</code> object.\n\t *\n\t * @param vertexAnimationSet The animation data set containing the vertex animations used by the animator.\n\t */\n\tconstructor(vertexAnimationSet:VertexAnimationSet)\n\t{\n\t\tsuper(vertexAnimationSet);\n\n\t\tthis._vertexAnimationSet = vertexAnimationSet;\n\t\tthis._numPoses = vertexAnimationSet.numPoses;\n\t\tthis._blendMode = vertexAnimationSet.blendMode;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic clone():AnimatorBase\n\t{\n\t\treturn new VertexAnimator(this._vertexAnimationSet);\n\t}\n\n\t/**\n\t * Plays a sequence with a given name. If the sequence is not found, it may not be loaded yet, and it will retry every frame.\n\t * @param sequenceName The name of the clip to be played.\n\t */\n\tpublic play(name:string, transition:IAnimationTransition = null, offset:number = NaN)\n\t{\n\t\tif (this._pActiveAnimationName == name)\n\t\t\treturn;\n\n\t\tthis._pActiveAnimationName = name;\n\n\t\t//TODO: implement transitions in vertex animator\n\n\t\tif (!this._pAnimationSet.hasAnimation(name))\n\t\t\tthrow new Error(\"Animation root node \" + name + \" not found!\");\n\n\t\tthis._pActiveNode = this._pAnimationSet.getAnimation(name);\n\n\t\tthis._pActiveState = this.getAnimationState(this._pActiveNode);\n\n\t\tif (this.updatePosition) {\n\t\t\t//update straight away to reset position deltas\n\t\t\tthis._pActiveState.update(this._pAbsoluteTime);\n\t\t\tthis._pActiveState.positionDelta;\n\t\t}\n\n\t\tthis._activeVertexState = <IVertexAnimationState> this._pActiveState;\n\n\t\tthis.start();\n\n\t\t//apply a time offset if specified\n\t\tif (!isNaN(offset))\n\t\t\tthis.reset(name, offset);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateDeltaTime(dt:number)\n\t{\n\t\tsuper._pUpdateDeltaTime(dt);\n\n\t\tvar geometryFlag:boolean = false;\n\n\t\tif (this._poses[0] != this._activeVertexState.currentGeometry) {\n\t\t\tthis._poses[0] = this._activeVertexState.currentGeometry;\n\t\t\tgeometryFlag = true;\n\t\t}\n\n\t\tif (this._poses[1] != this._activeVertexState.nextGeometry) {\n\t\t\tthis._poses[1] = this._activeVertexState.nextGeometry;\n\t\t\tgeometryFlag = true;\n\t\t}\n\n\t\tthis._weights[0] = 1 - (this._weights[1] = this._activeVertexState.blendWeight);\n\n\t\tif (geometryFlag) {\n\t\t\t//invalidate meshes\n\t\t\tvar mesh:Mesh;\n\t\t\tvar len:number = this._pOwners.length;\n\t\t\tfor (var i:number = 0; i < len; i++) {\n\t\t\t\tmesh = this._pOwners[i];\n\t\t\t\tmesh._iInvalidateRenderableGeometries();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(shader:ShaderBase, renderable:RenderableBase, stage:Stage, camera:Camera, vertexConstantOffset:number /*int*/, vertexStreamOffset:number /*int*/)\n\t{\n\t\t// todo: add code for when running on cpu\n\t\t// this type of animation can only be SubMesh\n\t\tvar subMesh:TriangleSubMesh = <TriangleSubMesh> (<TriangleSubMeshRenderable> renderable).subMesh;\n\t\tvar subGeom:TriangleSubGeometry = subMesh.subGeometry;\n\n\t\t// if no poses defined, set temp data\n\t\tif (!this._poses.length) {\n\t\t\tthis.setNullPose(shader, subGeom, stage, vertexConstantOffset, vertexStreamOffset);\n\t\t\treturn;\n\t\t}\n\n\n\t\tvar i:number /*uint*/;\n\t\tvar len:number /*uint*/ = this._numPoses;\n\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, vertexConstantOffset, this._weights, 1);\n\n\t\tif (this._blendMode == VertexAnimationMode.ABSOLUTE)\n\t\t\ti = 1;\n\t\telse\n\t\t\ti = 0;\n\n\t\tvar subGeometryVO:SubGeometryVOBase;\n\n\t\tfor (; i < len; ++i) {\n\t\t\tsubGeom = <TriangleSubGeometry> this._poses[i].subGeometries[subMesh._iIndex] || subMesh.subGeometry;\n\n\t\t\tsubGeometryVO = <SubGeometryVOBase> stage.getAbstraction(subGeom);\n\t\t\tsubGeometryVO._indexMappings = (<SubGeometryVOBase> stage.getAbstraction(subMesh.subGeometry)).getIndexMappings();\n\n\t\t\tsubGeometryVO.activateVertexBufferVO(vertexStreamOffset++, subGeom.positions);\n\n\t\t\tif (shader.normalDependencies > 0)\n\t\t\t\tsubGeometryVO.activateVertexBufferVO(vertexStreamOffset++, subGeom.normals);\n\t\t}\n\t}\n\n\tprivate setNullPose(shader:ShaderBase, subGeometry:TriangleSubGeometry, stage:Stage, vertexConstantOffset:number /*int*/, vertexStreamOffset:number /*int*/)\n\t{\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, vertexConstantOffset, this._weights, 1);\n\n\t\tvar subGeometryVO:SubGeometryVOBase = <SubGeometryVOBase> stage.getAbstraction(subGeometry);\n\n\t\tif (this._blendMode == VertexAnimationMode.ABSOLUTE) {\n\t\t\tvar len:number /*uint*/ = this._numPoses;\n\t\t\tfor (var i:number /*uint*/ = 1; i < len; ++i) {\n\t\t\t\tsubGeometryVO.activateVertexBufferVO(vertexStreamOffset++, subGeometry.positions);\n\n\t\t\t\tif (shader.normalDependencies > 0)\n\t\t\t\t\tsubGeometryVO.activateVertexBufferVO(vertexStreamOffset++, subGeometry.normals);\n\t\t\t}\n\t\t}\n\t\t// todo: set temp data for additive?\n\t}\n\n\t/**\n\t * Verifies if the animation will be used on cpu. Needs to be true for all passes for a material to be able to use it on gpu.\n\t * Needs to be called if gpu code is potentially required.\n\t */\n\tpublic testGPUCompatibility(shader:ShaderBase)\n\t{\n\t}\n\n\tpublic getRenderableSubGeometry(renderable:TriangleSubMeshRenderable, sourceSubGeometry:TriangleSubGeometry):TriangleSubGeometry\n\t{\n\t\tif (this._blendMode == VertexAnimationMode.ABSOLUTE && this._poses.length)\n\t\t\treturn <TriangleSubGeometry> this._poses[0].subGeometries[renderable.subMesh._iIndex] || sourceSubGeometry;\n\n\t\t//nothing to do here\n\t\treturn sourceSubGeometry;\n\t}\n}\n\nexport = VertexAnimator;",
    "import Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\n\nimport AnimationNodeBase\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\n\n/**\n * ...\n */\nclass AnimationRegisterCache extends ShaderRegisterCache\n{\n\t//vertex\n\tpublic positionAttribute:ShaderRegisterElement;\n\tpublic uvAttribute:ShaderRegisterElement;\n\tpublic positionTarget:ShaderRegisterElement;\n\tpublic scaleAndRotateTarget:ShaderRegisterElement;\n\tpublic velocityTarget:ShaderRegisterElement;\n\tpublic vertexTime:ShaderRegisterElement;\n\tpublic vertexLife:ShaderRegisterElement;\n\tpublic vertexZeroConst:ShaderRegisterElement;\n\tpublic vertexOneConst:ShaderRegisterElement;\n\tpublic vertexTwoConst:ShaderRegisterElement;\n\tpublic uvTarget:ShaderRegisterElement;\n\tpublic colorAddTarget:ShaderRegisterElement;\n\tpublic colorMulTarget:ShaderRegisterElement;\n\t//vary\n\tpublic colorAddVary:ShaderRegisterElement;\n\tpublic colorMulVary:ShaderRegisterElement;\n\n\t//fragment\n\n\tpublic uvVar:ShaderRegisterElement;\n\n\t//these are targets only need to rotate ( normal and tangent )\n\tpublic rotationRegisters:Array<ShaderRegisterElement>;\n\n\tpublic needFragmentAnimation:boolean;\n\tpublic needUVAnimation:boolean;\n\n\tpublic sourceRegisters:Array<string>;\n\tpublic targetRegisters:Array<string>;\n\n\tprivate indexDictionary:Object = new Object();\n\n\t//set true if has an node which will change UV\n\tpublic hasUVNode:boolean;\n\t//set if the other nodes need to access the velocity\n\tpublic needVelocity:boolean;\n\t//set if has a billboard node.\n\tpublic hasBillboard:boolean;\n\t//set if has an node which will apply color multiple operation\n\tpublic hasColorMulNode:boolean;\n\t//set if has an node which will apply color add operation\n\tpublic hasColorAddNode:boolean;\n\n\tconstructor(profile:string)\n\t{\n\t\tsuper(profile);\n\t}\n\n\tpublic reset()\n\t{\n\t\tsuper.reset();\n\n\t\tthis.rotationRegisters = new Array<ShaderRegisterElement>();\n\t\tthis.positionAttribute = this.getRegisterFromString(this.sourceRegisters[0]);\n\t\tthis.scaleAndRotateTarget = this.getRegisterFromString(this.targetRegisters[0]);\n\t\tthis.addVertexTempUsages(this.scaleAndRotateTarget, 1);\n\n\t\tfor (var i:number /*int*/ = 1; i < this.targetRegisters.length; i++) {\n\t\t\tthis.rotationRegisters.push(this.getRegisterFromString(this.targetRegisters[i]));\n\t\t\tthis.addVertexTempUsages(this.rotationRegisters[i - 1], 1);\n\t\t}\n\n\t\tthis.scaleAndRotateTarget = new ShaderRegisterElement(this.scaleAndRotateTarget.regName, this.scaleAndRotateTarget.index); //only use xyz, w is used as vertexLife\n\n\t\t//allot const register\n\n\t\tthis.vertexZeroConst = this.getFreeVertexConstant();\n\t\tthis.vertexZeroConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 0);\n\t\tthis.vertexOneConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 1);\n\t\tthis.vertexTwoConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 2);\n\n\t\t//allot temp register\n\t\tthis.positionTarget = this.getFreeVertexVectorTemp();\n\t\tthis.addVertexTempUsages(this.positionTarget, 1);\n\t\tthis.positionTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);\n\n\t\tif (this.needVelocity) {\n\t\t\tthis.velocityTarget = this.getFreeVertexVectorTemp();\n\t\t\tthis.addVertexTempUsages(this.velocityTarget, 1);\n\t\t\tthis.velocityTarget = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index);\n\t\t\tthis.vertexTime = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index, 3);\n\t\t\tthis.vertexLife = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index, 3);\n\t\t} else {\n\t\t\tvar tempTime:ShaderRegisterElement = this.getFreeVertexVectorTemp();\n\t\t\tthis.addVertexTempUsages(tempTime, 1);\n\t\t\tthis.vertexTime = new ShaderRegisterElement(tempTime.regName, tempTime.index, 0);\n\t\t\tthis.vertexLife = new ShaderRegisterElement(tempTime.regName, tempTime.index, 1);\n\t\t}\n\n\t}\n\n\tpublic setUVSourceAndTarget(UVAttribute:string, UVVaring:string)\n\t{\n\t\tthis.uvVar = this.getRegisterFromString(UVVaring);\n\t\tthis.uvAttribute = this.getRegisterFromString(UVAttribute);\n\t\t//uv action is processed after normal actions,so use offsetTarget as uvTarget\n\t\tthis.uvTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);\n\t}\n\n\tpublic setRegisterIndex(node:AnimationNodeBase, parameterIndex:number /*int*/, registerIndex:number /*int*/)\n\t{\n\t\t//8 should be enough for any node.\n\t\tvar t:Array<number> /*int*/ = this.indexDictionary[node.id];\n\n\t\tif (t == null)\n\t\t\tt = this.indexDictionary[node.id] = new Array<number>(8) /*int*/;\n\n\t\tt[parameterIndex] = registerIndex;\n\t}\n\n\tpublic getRegisterIndex(node:AnimationNodeBase, parameterIndex:number /*int*/):number /*int*/\n\t{\n\t\treturn (<Array<number>> this.indexDictionary[node.id])[parameterIndex];\n\t}\n\n\tpublic getInitCode():string\n\t{\n\t\tvar len:number /*int*/ = this.sourceRegisters.length;\n\t\tvar code:string = \"\";\n\t\tfor (var i:number /*int*/ = 0; i < len; i++)\n\t\t\tcode += \"mov \" + this.targetRegisters[i] + \",\" + this.sourceRegisters[i] + \"\\n\";\n\n\t\tcode += \"mov \" + this.positionTarget + \".xyz,\" + this.vertexZeroConst.toString() + \"\\n\";\n\n\t\tif (this.needVelocity)\n\t\t\tcode += \"mov \" + this.velocityTarget + \".xyz,\" + this.vertexZeroConst.toString() + \"\\n\";\n\n\t\treturn code;\n\t}\n\n\tpublic getCombinationCode():string\n\t{\n\t\treturn \"add \" + this.scaleAndRotateTarget + \".xyz,\" + this.scaleAndRotateTarget + \".xyz,\" + this.positionTarget + \".xyz\\n\";\n\t}\n\n\tpublic initColorRegisters():string\n\t{\n\t\tvar code:string = \"\";\n\t\tif (this.hasColorMulNode) {\n\t\t\tthis.colorMulTarget = this.getFreeVertexVectorTemp();\n\t\t\tthis.addVertexTempUsages(this.colorMulTarget, 1);\n\t\t\tthis.colorMulVary = this.getFreeVarying();\n\t\t\tcode += \"mov \" + this.colorMulTarget + \",\" + this.vertexOneConst + \"\\n\";\n\t\t}\n\t\tif (this.hasColorAddNode) {\n\t\t\tthis.colorAddTarget = this.getFreeVertexVectorTemp();\n\t\t\tthis.addVertexTempUsages(this.colorAddTarget, 1);\n\t\t\tthis.colorAddVary = this.getFreeVarying();\n\t\t\tcode += \"mov \" + this.colorAddTarget + \",\" + this.vertexZeroConst + \"\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tpublic getColorPassCode():string\n\t{\n\t\tvar code:string = \"\";\n\t\tif (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {\n\t\t\tif (this.hasColorMulNode)\n\t\t\t\tcode += \"mov \" + this.colorMulVary + \",\" + this.colorMulTarget + \"\\n\";\n\t\t\tif (this.hasColorAddNode)\n\t\t\t\tcode += \"mov \" + this.colorAddVary + \",\" + this.colorAddTarget + \"\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tpublic getColorCombinationCode(shadedTarget:string):string\n\t{\n\t\tvar code:string = \"\";\n\t\tif (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {\n\t\t\tvar colorTarget:ShaderRegisterElement = this.getRegisterFromString(shadedTarget);\n\t\t\tthis.addFragmentTempUsages(colorTarget, 1);\n\t\t\tif (this.hasColorMulNode)\n\t\t\t\tcode += \"mul \" + colorTarget + \",\" + colorTarget + \",\" + this.colorMulVary + \"\\n\";\n\t\t\tif (this.hasColorAddNode)\n\t\t\t\tcode += \"add \" + colorTarget + \",\" + colorTarget + \",\" + this.colorAddVary + \"\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tprivate getRegisterFromString(code:string):ShaderRegisterElement\n\t{\n\t\tvar temp:Array<string> = code.split(/(\\d+)/);\n\t\treturn new ShaderRegisterElement(temp[0], parseInt(temp[1]));\n\t}\n\n\tpublic vertexConstantData:Float32Array;\n\tpublic fragmentConstantData:Float32Array;\n\n\tprivate _numVertexConstant:number /*int*/;\n\tprivate _numFragmentConstant:number /*int*/;\n\n\tpublic get numVertexConstant():number /*int*/\n\t{\n\t\treturn this._numVertexConstant;\n\t}\n\n\tpublic get numFragmentConstant():number /*int*/\n\t{\n\t\treturn this._numFragmentConstant;\n\t}\n\n\tpublic setDataLength()\n\t{\n\t\tthis._numVertexConstant = this.numUsedVertexConstants - this.vertexConstantOffset;\n\t\tthis._numFragmentConstant = this.numUsedFragmentConstants - this.fragmentConstantOffset;\n\t\tthis.vertexConstantData = new Float32Array(this._numVertexConstant*4);\n\t\tthis.fragmentConstantData = new Float32Array(this._numFragmentConstant*4);\n\t}\n\n\tpublic setVertexConst(index:number /*int*/, x:number = 0, y:number = 0, z:number = 0, w:number = 0)\n\t{\n\t\tvar _index:number /*int*/ = (index - this.vertexConstantOffset)*4;\n\t\tthis.vertexConstantData[_index++] = x;\n\t\tthis.vertexConstantData[_index++] = y;\n\t\tthis.vertexConstantData[_index++] = z;\n\t\tthis.vertexConstantData[_index] = w;\n\t}\n\n\tpublic setVertexConstFromArray(index:number /*int*/, data:Array<number>)\n\t{\n\t\tvar _index:number /*int*/ = (index - this.vertexConstantOffset)*4;\n\t\tfor (var i:number /*int*/ = 0; i < data.length; i++)\n\t\t\tthis.vertexConstantData[_index++] = data[i];\n\t}\n\n\tpublic setVertexConstFromMatrix(index:number /*int*/, matrix:Matrix3D)\n\t{\n\t\tvar rawData:Float32Array = matrix.rawData;\n\t\tvar _index:number /*int*/ = (index - this.vertexConstantOffset)*4;\n\t\tthis.vertexConstantData[_index++] = rawData[0];\n\t\tthis.vertexConstantData[_index++] = rawData[4];\n\t\tthis.vertexConstantData[_index++] = rawData[8];\n\t\tthis.vertexConstantData[_index++] = rawData[12];\n\t\tthis.vertexConstantData[_index++] = rawData[1];\n\t\tthis.vertexConstantData[_index++] = rawData[5];\n\t\tthis.vertexConstantData[_index++] = rawData[9];\n\t\tthis.vertexConstantData[_index++] = rawData[13];\n\t\tthis.vertexConstantData[_index++] = rawData[2];\n\t\tthis.vertexConstantData[_index++] = rawData[6];\n\t\tthis.vertexConstantData[_index++] = rawData[10];\n\t\tthis.vertexConstantData[_index++] = rawData[14];\n\t\tthis.vertexConstantData[_index++] = rawData[3];\n\t\tthis.vertexConstantData[_index++] = rawData[7];\n\t\tthis.vertexConstantData[_index++] = rawData[11];\n\t\tthis.vertexConstantData[_index] = rawData[15];\n\n\t}\n\n\tpublic setFragmentConst(index:number /*int*/, x:number = 0, y:number = 0, z:number = 0, w:number = 0)\n\t{\n\t\tvar _index:number /*int*/ = (index - this.fragmentConstantOffset)*4;\n\t\tthis.fragmentConstantData[_index++] = x;\n\t\tthis.fragmentConstantData[_index++] = y;\n\t\tthis.fragmentConstantData[_index++] = z;\n\t\tthis.fragmentConstantData[_index] = w;\n\t}\n}\n\nexport = AnimationRegisterCache;",
    "import Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport IContextGL\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IVertexBuffer\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\n\nimport ParticleAnimationData\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleAnimationData\");\n\n/**\n * ...\n */\nclass AnimationSubGeometry\n{\n\tpublic static SUBGEOM_ID_COUNT:number = 0;\n\n\tpublic _pVertexData:Array<number>;\n\n\tpublic _pVertexBuffer:Array<IVertexBuffer> = new Array<IVertexBuffer>(8);\n\tpublic _pBufferContext:Array<IContextGL> = new Array<IContextGL>(8);\n\tpublic _pBufferDirty:Array<boolean> = new Array<boolean>(8);\n\n\tprivate _numVertices:number /*uint*/;\n\n\tprivate _totalLenOfOneVertex:number /*uint*/;\n\n\tpublic numProcessedVertices:number /*int*/ = 0;\n\n\tpublic previousTime:number = Number.NEGATIVE_INFINITY;\n\n\tpublic animationParticles:Array<ParticleAnimationData> = new Array<ParticleAnimationData>();\n\n\t/**\n\t * An id for this animation subgeometry, used to identify animation subgeometries when using animation sets.\n\t *\n\t * @private\n\t */\n\tpublic _iUniqueId:number;//Arcane\n\n\tconstructor()\n\t{\n\t\tfor (var i:number /*int*/ = 0; i < 8; i++)\n\t\t\tthis._pBufferDirty[i] = true;\n\n\t\tthis._iUniqueId = AnimationSubGeometry.SUBGEOM_ID_COUNT++;\n\t}\n\n\tpublic createVertexData(numVertices:number /*uint*/, totalLenOfOneVertex:number /*uint*/)\n\t{\n\t\tthis._numVertices = numVertices;\n\t\tthis._totalLenOfOneVertex = totalLenOfOneVertex;\n\t\tthis._pVertexData = new Array<number>(numVertices*totalLenOfOneVertex);\n\t}\n\n\tpublic activateVertexBuffer(index:number /*int*/, bufferOffset:number /*int*/, stage:Stage, format:number)\n\t{\n\t\tvar contextIndex:number /*int*/ = stage.stageIndex;\n\t\tvar context:IContextGL = <IContextGL> stage.context;\n\n\t\tvar buffer:IVertexBuffer = this._pVertexBuffer[contextIndex];\n\t\tif (!buffer || this._pBufferContext[contextIndex] != context) {\n\t\t\tbuffer = this._pVertexBuffer[contextIndex] = context.createVertexBuffer(this._numVertices, this._totalLenOfOneVertex*4);\n\t\t\tthis._pBufferContext[contextIndex] = context;\n\t\t\tthis._pBufferDirty[contextIndex] = true;\n\t\t}\n\t\tif (this._pBufferDirty[contextIndex]) {\n\t\t\tbuffer.uploadFromArray(this._pVertexData, 0, this._numVertices);\n\t\t\tthis._pBufferDirty[contextIndex] = false;\n\t\t}\n\t\tcontext.setVertexBufferAt(index, buffer, bufferOffset*4, format);\n\t}\n\n\tpublic dispose()\n\t{\n\t\twhile (this._pVertexBuffer.length) {\n\t\t\tvar vertexBuffer:IVertexBuffer = this._pVertexBuffer.pop()\n\n\t\t\tif (vertexBuffer)\n\t\t\t\tvertexBuffer.dispose();\n\t\t}\n\t}\n\n\tpublic invalidateBuffer()\n\t{\n\t\tfor (var i:number /*int*/ = 0; i < 8; i++)\n\t\t\tthis._pBufferDirty[i] = true;\n\t}\n\n\tpublic get vertexData():Array<number>\n\t{\n\t\treturn this._pVertexData;\n\t}\n\n\tpublic get numVertices():number /*uint*/\n\t{\n\t\treturn this._numVertices;\n\t}\n\n\tpublic get totalLenOfOneVertex():number /*uint*/\n\t{\n\t\treturn this._totalLenOfOneVertex;\n\t}\n}\n\nexport = AnimationSubGeometry;",
    "import ColorTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\n\nclass ColorSegmentPoint\n{\n\tprivate _color:ColorTransform;\n\tprivate _life:number;\n\n\tconstructor(life:number, color:ColorTransform)\n\t{\n\t\t//0<life<1\n\t\tif (life <= 0 || life >= 1)\n\t\t\tthrow(new Error(\"life exceeds range (0,1)\"));\n\t\tthis._life = life;\n\t\tthis._color = color;\n\t}\n\n\tpublic get color():ColorTransform\n\t{\n\t\treturn this._color;\n\t}\n\n\tpublic get life():number\n\t{\n\t\treturn this._life;\n\t}\n\n}\n\nexport = ColorSegmentPoint;",
    "import Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Quaternion\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Quaternion\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\n/**\n * Contains transformation data for a skeleton joint, used for skeleton animation.\n *\n * @see away.animation.Skeleton\n * @see away.animation.SkeletonJoint\n *\n * todo: support (uniform) scale\n */\nclass JointPose\n{\n\t/**\n\t * The name of the joint to which the pose is associated\n\t */\n\tpublic name:string; // intention is that this should be used only at load time, not in the main loop\n\n\t/**\n\t * The rotation of the pose stored as a quaternion\n\t */\n\tpublic orientation:Quaternion = new Quaternion();\n\n\t/**\n\t * The translation of the pose\n\t */\n\tpublic translation:Vector3D = new Vector3D();\n\n\tconstructor()\n\t{\n\n\t}\n\n\t/**\n\t * Converts the transformation to a Matrix3D representation.\n\t *\n\t * @param target An optional target matrix to store the transformation. If not provided, it will create a new instance.\n\t * @return The transformation matrix of the pose.\n\t */\n\tpublic toMatrix3D(target:Matrix3D = null):Matrix3D\n\t{\n\t\tif (target == null)\n\t\t\ttarget = new Matrix3D();\n\n\t\tthis.orientation.toMatrix3D(target);\n\t\ttarget.appendTranslation(this.translation.x, this.translation.y, this.translation.z);\n\t\treturn target;\n\t}\n\n\t/**\n\t * Copies the transformation data from a source pose object into the existing pose object.\n\t *\n\t * @param pose The source pose to copy from.\n\t */\n\tpublic copyFrom(pose:JointPose)\n\t{\n\t\tvar or:Quaternion = pose.orientation;\n\t\tvar tr:Vector3D = pose.translation;\n\t\tthis.orientation.x = or.x;\n\t\tthis.orientation.y = or.y;\n\t\tthis.orientation.z = or.z;\n\t\tthis.orientation.w = or.w;\n\t\tthis.translation.x = tr.x;\n\t\tthis.translation.y = tr.y;\n\t\tthis.translation.z = tr.z;\n\t}\n}\n\nexport = JointPose;",
    "import ParticleData\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleData\");\n\n/**\n * ...\n */\nclass ParticleAnimationData\n{\n\tpublic index:number /*uint*/;\n\tpublic startTime:number;\n\tpublic totalTime:number;\n\tpublic duration:number;\n\tpublic delay:number;\n\tpublic startVertexIndex:number /*uint*/;\n\tpublic numVertices:number /*uint*/;\n\n\tconstructor(index:number /*uint*/, startTime:number, duration:number, delay:number, particle:ParticleData)\n\t{\n\t\tthis.index = index;\n\t\tthis.startTime = startTime;\n\t\tthis.totalTime = duration + delay;\n\t\tthis.duration = duration;\n\t\tthis.delay = delay;\n\t\tthis.startVertexIndex = particle.startVertexIndex;\n\t\tthis.numVertices = particle.numVertices;\n\t}\n}\n\nexport = ParticleAnimationData;",
    "import TriangleSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\n\nclass ParticleData\n{\n\tpublic particleIndex:number /*uint*/;\n\tpublic numVertices:number /*uint*/;\n\tpublic startVertexIndex:number /*uint*/;\n\tpublic subGeometry:TriangleSubGeometry;\n}\n\nexport = ParticleData",
    "/**\n * Options for setting the properties mode of a particle animation node.\n */\nclass ParticlePropertiesMode\n{\n\t/**\n\t * Mode that defines the particle node as acting on global properties (ie. the properties set in the node constructor or the corresponding animation state).\n\t */\n\tpublic static GLOBAL:number /*uint*/ = 0;\n\n\t/**\n\t * Mode that defines the particle node as acting on local static properties (ie. the properties of particles set in the initialising on the animation set).\n\t */\n\tpublic static LOCAL_STATIC:number /*uint*/ = 1;\n\n\t/**\n\t * Mode that defines the particle node as acting on local dynamic properties (ie. the properties of the particles set in the corresponding animation state).\n\t */\n\tpublic static LOCAL_DYNAMIC:number /*uint*/ = 2;\n}\n\nexport = ParticlePropertiesMode;",
    "/**\n * Dynamic class for holding the local properties of a particle, used for processing the static properties\n * of particles in the particle animation set before beginning upload to the GPU.\n */\nclass ParticleProperties\n{\n\t/**\n\t * The index of the current particle being set.\n\t */\n\tpublic index:number /*uint*/;\n\n\t/**\n\t * The total number of particles being processed by the particle animation set.\n\t */\n\tpublic total:number /*uint*/;\n\n\t/**\n\t * The start time of the particle.\n\t */\n\tpublic startTime:number;\n\n\t/**\n\t * The duration of the particle, an optional value used when the particle aniamtion set settings for <code>useDuration</code> are enabled in the constructor.\n\t *\n\t * @see away.animators.ParticleAnimationSet\n\t */\n\tpublic duration:number;\n\n\t/**\n\t * The delay between cycles of the particle, an optional value used when the particle aniamtion set settings for <code>useLooping</code> and  <code>useDelay</code> are enabled in the constructor.\n\t *\n\t * @see away.animators.ParticleAnimationSet\n\t */\n\tpublic delay:number;\n}\n\nexport = ParticleProperties;",
    "/**\n * A value obect representing a single joint in a skeleton object.\n *\n * @see away.animators.Skeleton\n */\nclass SkeletonJoint\n{\n\t/**\n\t * The index of the parent joint in the skeleton's joints vector.\n\t *\n\t * @see away.animators.Skeleton#joints\n\t */\n\tpublic parentIndex:number /*int*/ = -1;\n\n\t/**\n\t * The name of the joint\n\t */\n\tpublic name:string; // intention is that this should be used only at load time, not in the main loop\n\n\t/**\n\t * The inverse bind pose matrix, as raw data, used to transform vertices to bind joint space in preparation for transformation using the joint matrix.\n\t */\n\tpublic inverseBindPose:Float32Array;\n\n\t/**\n\t * Creates a new <code>SkeletonJoint</code> object\n\t */\n\tconstructor()\n\t{\n\t}\n}\n\nexport = SkeletonJoint;",
    "import IAsset\t\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport AssetBase\t\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\n\nimport JointPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/JointPose\");\n\n\n/**\n * A collection of pose objects, determining the pose for an entire skeleton.\n * The <code>jointPoses</code> vector object corresponds to a skeleton's <code>joints</code> vector object, however, there is no\n * reference to a skeleton's instance, since several skeletons can be influenced by the same pose (eg: animation\n * clips are added to any animator with a valid skeleton)\n *\n * @see away.animators.Skeleton\n * @see away.animators.JointPose\n */\nclass SkeletonPose extends AssetBase implements IAsset\n{\n\tpublic static assetType:string = \"[asset SkeletonPose]\";\n\n\t/**\n\t * A flat list of pose objects that comprise the skeleton pose. The pose indices correspond to the target skeleton's joint indices.\n\t *\n\t * @see away.animators.Skeleton#joints\n\t */\n\tpublic jointPoses:Array<JointPose>;\n\n\t/**\n\t * The total number of joint poses in the skeleton pose.\n\t */\n\tpublic get numJointPoses():number /*uint*/\n\t{\n\t\treturn this.jointPoses.length;\n\t}\n\n\t/**\n\t * Creates a new <code>SkeletonPose</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.jointPoses = new Array<JointPose>();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get assetType():string\n\t{\n\t\treturn SkeletonPose.assetType;\n\t}\n\n\t/**\n\t * Returns the joint pose object with the given joint name, otherwise returns a null object.\n\t *\n\t * @param jointName The name of the joint object whose pose is to be found.\n\t * @return The pose object with the given joint name.\n\t */\n\tpublic jointPoseFromName(jointName:string):JointPose\n\t{\n\t\tvar jointPoseIndex:number /*int*/ = this.jointPoseIndexFromName(jointName);\n\t\tif (jointPoseIndex != -1)\n\t\t\treturn this.jointPoses[jointPoseIndex]; else\n\t\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the pose index, given the joint name. -1 is returned if the joint name is not found in the pose.\n\t *\n\t * @param The name of the joint object whose pose is to be found.\n\t * @return The index of the pose object in the jointPoses Array\n\t *\n\t * @see #jointPoses\n\t */\n\tpublic jointPoseIndexFromName(jointName:string):number /*int*/\n\t{\n\t\t// this is implemented as a linear search, rather than a possibly\n\t\t// more optimal method (Dictionary lookup, for example) because:\n\t\t// a) it is assumed that it will be called once for each joint\n\t\t// b) it is assumed that it will be called only during load, and not during main loop\n\t\t// c) maintaining a dictionary (for safety) would dictate an interface to access JointPoses,\n\t\t//    rather than direct array access.  this would be sub-optimal.\n\t\tvar jointPoseIndex:number /*int*/;\n\t\tvar jointPose:JointPose;\n\t\tfor (var i:number /*uint*/; i < this.jointPoses.length; i++) {\n\t\t\tjointPose = this.jointPoses[i];\n\t\t\tif (jointPose.name == jointName)\n\t\t\t\treturn jointPoseIndex;\n\t\t\tjointPoseIndex++;\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Creates a copy of the <code>SkeletonPose</code> object, with a dulpicate of its component joint poses.\n\t *\n\t * @return SkeletonPose\n\t */\n\tpublic clone():SkeletonPose\n\t{\n\t\tvar clone:SkeletonPose = new SkeletonPose();\n\t\tvar numJointPoses:number /*uint*/ = this.jointPoses.length;\n\t\tfor (var i:number /*uint*/ = 0; i < numJointPoses; i++) {\n\t\t\tvar cloneJointPose:JointPose = new JointPose();\n\t\t\tvar thisJointPose:JointPose = this.jointPoses[i];\n\t\t\tcloneJointPose.name = thisJointPose.name;\n\t\t\tcloneJointPose.copyFrom(thisJointPose);\n\t\t\tclone.jointPoses[i] = cloneJointPose;\n\t\t}\n\t\treturn clone;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic dispose()\n\t{\n\t\tthis.jointPoses.length = 0;\n\t}\n}\n\nexport = SkeletonPose;",
    "import SkeletonJoint\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonJoint\");\n\nimport IAsset\t\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport AssetBase\t\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\n\n/**\n * A Skeleton object is a hierarchical grouping of joint objects that can be used for skeletal animation.\n *\n * @see away.animators.SkeletonJoint\n */\nclass Skeleton extends AssetBase implements IAsset\n{\n\tpublic static assetType:string = \"[asset Skeleton]\";\n\n\t/**\n\t * A flat list of joint objects that comprise the skeleton. Every joint except for the root has a parentIndex\n\t * property that is an index into this list.\n\t * A child joint should always have a higher index than its parent.\n\t */\n\tpublic joints:Array<SkeletonJoint>;\n\n\t/**\n\t * The total number of joints in the skeleton.\n\t */\n\tpublic get numJoints():number /*uint*/\n\t{\n\t\treturn this.joints.length;\n\t}\n\n\t/**\n\t * Creates a new <code>Skeleton</code> object\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\t// in the long run, it might be a better idea to not store Joint objects, but keep all data in Vectors, that we can upload easily?\n\t\tthis.joints = new Array<SkeletonJoint>();\n\t}\n\n\t/**\n\t * Returns the joint object in the skeleton with the given name, otherwise returns a null object.\n\t *\n\t * @param jointName The name of the joint object to be found.\n\t * @return The joint object with the given name.\n\t *\n\t * @see #joints\n\t */\n\tpublic jointFromName(jointName:string):SkeletonJoint\n\t{\n\t\tvar jointIndex:number /*int*/ = this.jointIndexFromName(jointName);\n\t\tif (jointIndex != -1)\n\t\t\treturn this.joints[jointIndex]; else\n\t\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the joint index, given the joint name. -1 is returned if the joint name is not found.\n\t *\n\t * @param jointName The name of the joint object to be found.\n\t * @return The index of the joint object in the joints Array\n\t *\n\t * @see #joints\n\t */\n\tpublic jointIndexFromName(jointName:string):number /*int*/\n\t{\n\t\t// this is implemented as a linear search, rather than a possibly\n\t\t// more optimal method (Dictionary lookup, for example) because:\n\t\t// a) it is assumed that it will be called once for each joint\n\t\t// b) it is assumed that it will be called only during load, and not during main loop\n\t\t// c) maintaining a dictionary (for safety) would dictate an interface to access SkeletonJoints,\n\t\t//    rather than direct array access.  this would be sub-optimal.\n\t\tvar jointIndex:number /*int*/;\n\t\tvar joint:SkeletonJoint;\n\t\tfor (var i:number /*int*/; i < this.joints.length; i++) {\n\t\t\tjoint = this.joints[i];\n\t\t\tif (joint.name == jointName)\n\t\t\t\treturn jointIndex;\n\t\t\tjointIndex++;\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic dispose()\n\t{\n\t\tthis.joints.length = 0;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get assetType():string\n\t{\n\t\treturn Skeleton.assetType;\n\t}\n}\n\nexport = Skeleton;",
    "/**\n * Options for setting the animation mode of a vertex animator object.\n *\n * @see away.animators.VertexAnimator\n */\nclass VertexAnimationMode\n{\n\t/**\n\t * Animation mode that adds all outputs from active vertex animation state to form the current vertex animation pose.\n\t */\n\tpublic static ADDITIVE:string = \"additive\";\n\n\t/**\n\t * Animation mode that picks the output from a single vertex animation state to form the current vertex animation pose.\n\t */\n\tpublic static ABSOLUTE:string = \"absolute\";\n}\n\nexport = VertexAnimationMode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\n/**\n * Provides an abstract base class for nodes with time-based animation data in an animation blend tree.\n */\nclass AnimationClipNodeBase extends AnimationNodeBase\n{\n\tpublic _pLooping:boolean = true;\n\tpublic _pTotalDuration:number /*uint*/ = 0;\n\tpublic _pLastFrame:number /*uint*/;\n\n\tpublic _pStitchDirty:boolean = true;\n\tpublic _pStitchFinalFrame:boolean = false;\n\tpublic _pNumFrames:number /*uint*/ = 0;\n\n\tpublic _pDurations:Array<number> = new Array<number>();\n\t/*uint*/\n\tpublic _pTotalDelta:Vector3D = new Vector3D();\n\n\tpublic fixedFrameRate:boolean = true;\n\n\t/**\n\t * Determines whether the contents of the animation node have looping characteristics enabled.\n\t */\n\tpublic get looping():boolean\n\t{\n\t\treturn this._pLooping;\n\t}\n\n\tpublic set looping(value:boolean)\n\t{\n\t\tif (this._pLooping == value)\n\t\t\treturn;\n\n\t\tthis._pLooping = value;\n\n\t\tthis._pStitchDirty = true;\n\t}\n\n\t/**\n\t * Defines if looping content blends the final frame of animation data with the first (true) or works on the\n\t * assumption that both first and last frames are identical (false). Defaults to false.\n\t */\n\tpublic get stitchFinalFrame():boolean\n\t{\n\t\treturn this._pStitchFinalFrame;\n\t}\n\n\tpublic set stitchFinalFrame(value:boolean)\n\t{\n\t\tif (this._pStitchFinalFrame == value)\n\t\t\treturn;\n\n\t\tthis._pStitchFinalFrame = value;\n\n\t\tthis._pStitchDirty = true;\n\t}\n\n\tpublic get totalDuration():number /*uint*/\n\t{\n\t\tif (this._pStitchDirty)\n\t\t\tthis._pUpdateStitch();\n\n\t\treturn this._pTotalDuration;\n\t}\n\n\tpublic get totalDelta():Vector3D\n\t{\n\t\tif (this._pStitchDirty)\n\t\t\tthis._pUpdateStitch();\n\n\t\treturn this._pTotalDelta;\n\t}\n\n\tpublic get lastFrame():number /*uint*/\n\t{\n\t\tif (this._pStitchDirty)\n\t\t\tthis._pUpdateStitch();\n\n\t\treturn this._pLastFrame;\n\t}\n\n\t/**\n\t * Returns a vector of time values representing the duration (in milliseconds) of each animation frame in the clip.\n\t */\n\tpublic get durations():Array<number> /*uint*/\n\t{\n\t\treturn this._pDurations;\n\t}\n\n\t/**\n\t * Creates a new <code>AnimationClipNodeBase</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\t/**\n\t * Updates the node's final frame stitch state.\n\t *\n\t * @see #stitchFinalFrame\n\t */\n\tpublic _pUpdateStitch()\n\t{\n\t\tthis._pStitchDirty = false;\n\n\t\tthis._pLastFrame = (this._pStitchFinalFrame)? this._pNumFrames : this._pNumFrames - 1;\n\n\t\tthis._pTotalDuration = 0;\n\t\tthis._pTotalDelta.x = 0;\n\t\tthis._pTotalDelta.y = 0;\n\t\tthis._pTotalDelta.z = 0;\n\t}\n}\n\nexport = AnimationClipNodeBase;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleAccelerationState\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleAccelerationState\");\n\n/**\n * A particle animation node used to apply a constant acceleration vector to the motion of a particle.\n */\nclass ParticleAccelerationNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _acceleration:Vector3D;\n\n\t/**\n\t * Reference for acceleration node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the direction of acceleration on the particle.\n\t */\n\tpublic static ACCELERATION_VECTOR3D:string = \"AccelerationVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleAccelerationNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] acceleration    Defines the default acceleration vector of the node, used when in global mode.\n\t */\n\tconstructor(mode:number /*uint*/, acceleration:Vector3D = null)\n\t{\n\t\tsuper(\"ParticleAcceleration\", mode, 3);\n\n\t\tthis._pStateClass = ParticleAccelerationState;\n\n\t\tthis._acceleration = acceleration || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic pGetAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar accelerationValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleAccelerationState.ACCELERATION_INDEX, accelerationValue.index);\n\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tanimationRegisterCache.addVertexTempUsages(temp, 1);\n\n\t\tvar code:string = \"mul \" + temp + \",\" + animationRegisterCache.vertexTime + \",\" + accelerationValue + \"\\n\";\n\n\t\tif (animationRegisterCache.needVelocity) {\n\t\t\tvar temp2:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tcode += \"mul \" + temp2 + \",\" + temp + \",\" + animationRegisterCache.vertexTwoConst + \"\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.velocityTarget + \".xyz,\" + temp2 + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz\\n\";\n\t\t}\n\t\tanimationRegisterCache.removeVertexTempUsage(temp);\n\n\t\tcode += \"mul \" + temp + \",\" + temp + \",\" + animationRegisterCache.vertexTime + \"\\n\";\n\t\tcode += \"add \" + animationRegisterCache.positionTarget + \".xyz,\" + temp + \",\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleAccelerationState\n\t{\n\t\treturn <ParticleAccelerationState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar tempAcceleration:Vector3D = param[ParticleAccelerationNode.ACCELERATION_VECTOR3D];\n\t\tif (!tempAcceleration)\n\t\t\tthrow new Error(\"there is no \" + ParticleAccelerationNode.ACCELERATION_VECTOR3D + \" in param!\");\n\n\t\tthis._pOneData[0] = tempAcceleration.x/2;\n\t\tthis._pOneData[1] = tempAcceleration.y/2;\n\t\tthis._pOneData[2] = tempAcceleration.z/2;\n\t}\n}\n\nexport = ParticleAccelerationNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleBezierCurveState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleBezierCurveState\");\n\n/**\n * A particle animation node used to control the position of a particle over time along a bezier curve.\n */\nclass ParticleBezierCurveNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iControlPoint:Vector3D;\n\t/** @private */\n\tpublic _iEndPoint:Vector3D;\n\n\t/**\n\t * Reference for bezier curve node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the control point position (0, 1, 2) of the curve.\n\t */\n\tpublic static BEZIER_CONTROL_VECTOR3D:string = \"BezierControlVector3D\";\n\n\t/**\n\t * Reference for bezier curve node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the end point position (0, 1, 2) of the curve.\n\t */\n\tpublic static BEZIER_END_VECTOR3D:string = \"BezierEndVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleBezierCurveNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] controlPoint    Defines the default control point of the node, used when in global mode.\n\t * @param    [optional] endPoint        Defines the default end point of the node, used when in global mode.\n\t */\n\tconstructor(mode:number /*uint*/, controlPoint:Vector3D = null, endPoint:Vector3D = null)\n\t{\n\t\tsuper(\"ParticleBezierCurve\", mode, 6);\n\n\t\tthis._pStateClass = ParticleBezierCurveState;\n\n\t\tthis._iControlPoint = controlPoint || new Vector3D();\n\t\tthis._iEndPoint = endPoint || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar controlValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleBezierCurveState.BEZIER_CONTROL_INDEX, controlValue.index);\n\n\t\tvar endValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleBezierCurveState.BEZIER_END_INDEX, endValue.index);\n\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tvar rev_time:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\n\t\tvar time_2:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\n\t\tvar time_temp:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 2);\n\t\tanimationRegisterCache.addVertexTempUsages(temp, 1);\n\t\tvar temp2:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tvar distance:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index);\n\t\tanimationRegisterCache.removeVertexTempUsage(temp);\n\n\t\tvar code:string = \"\";\n\t\tcode += \"sub \" + rev_time + \",\" + animationRegisterCache.vertexOneConst + \",\" + animationRegisterCache.vertexLife + \"\\n\";\n\t\tcode += \"mul \" + time_2 + \",\" + animationRegisterCache.vertexLife + \",\" + animationRegisterCache.vertexLife + \"\\n\";\n\n\t\tcode += \"mul \" + time_temp + \",\" + animationRegisterCache.vertexLife + \",\" + rev_time + \"\\n\";\n\t\tcode += \"mul \" + time_temp + \",\" + time_temp + \",\" + animationRegisterCache.vertexTwoConst + \"\\n\";\n\t\tcode += \"mul \" + distance + \".xyz,\" + time_temp + \",\" + controlValue + \"\\n\";\n\t\tcode += \"add \" + animationRegisterCache.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\t\tcode += \"mul \" + distance + \".xyz,\" + time_2 + \",\" + endValue + \"\\n\";\n\t\tcode += \"add \" + animationRegisterCache.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\n\t\tif (animationRegisterCache.needVelocity) {\n\t\t\tcode += \"mul \" + time_2 + \",\" + animationRegisterCache.vertexLife + \",\" + animationRegisterCache.vertexTwoConst + \"\\n\";\n\t\t\tcode += \"sub \" + time_temp + \",\" + animationRegisterCache.vertexOneConst + \",\" + time_2 + \"\\n\";\n\t\t\tcode += \"mul \" + time_temp + \",\" + animationRegisterCache.vertexTwoConst + \",\" + time_temp + \"\\n\";\n\t\t\tcode += \"mul \" + distance + \".xyz,\" + controlValue + \",\" + time_temp + \"\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.velocityTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz\\n\";\n\t\t\tcode += \"mul \" + distance + \".xyz,\" + endValue + \",\" + time_2 + \"\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.velocityTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleBezierCurveState\n\t{\n\t\treturn <ParticleBezierCurveState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar bezierControl:Vector3D = param[ParticleBezierCurveNode.BEZIER_CONTROL_VECTOR3D];\n\t\tif (!bezierControl)\n\t\t\tthrow new Error(\"there is no \" + ParticleBezierCurveNode.BEZIER_CONTROL_VECTOR3D + \" in param!\");\n\n\t\tvar bezierEnd:Vector3D = param[ParticleBezierCurveNode.BEZIER_END_VECTOR3D];\n\t\tif (!bezierEnd)\n\t\t\tthrow new Error(\"there is no \" + ParticleBezierCurveNode.BEZIER_END_VECTOR3D + \" in param!\");\n\n\t\tthis._pOneData[0] = bezierControl.x;\n\t\tthis._pOneData[1] = bezierControl.y;\n\t\tthis._pOneData[2] = bezierControl.z;\n\t\tthis._pOneData[3] = bezierEnd.x;\n\t\tthis._pOneData[4] = bezierEnd.y;\n\t\tthis._pOneData[5] = bezierEnd.z;\n\t}\n}\n\nexport = ParticleBezierCurveNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleBillboardState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleBillboardState\");\n\n/**\n * A particle animation node that controls the rotation of a particle to always face the camera.\n */\nclass ParticleBillboardNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iBillboardAxis:Vector3D;\n\n\t/**\n\t * Creates a new <code>ParticleBillboardNode</code>\n\t */\n\tconstructor(billboardAxis:Vector3D = null)\n\t{\n\t\tsuper(\"ParticleBillboard\", ParticlePropertiesMode.GLOBAL, 0, 4);\n\n\t\tthis._pStateClass = ParticleBillboardState;\n\n\t\tthis._iBillboardAxis = billboardAxis;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar rotationMatrixRegister:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleBillboardState.MATRIX_INDEX, rotationMatrixRegister.index);\n\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.getFreeVertexConstant();\n\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\n\t\tvar code:string = \"m33 \" + temp + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \",\" + rotationMatrixRegister + \"\\n\" +\n\t\t\t\t\t\t  \"mov \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp + \"\\n\";\n\n\t\tvar shaderRegisterElement:ShaderRegisterElement;\n\t\tfor (var i:number /*uint*/ = 0; i < animationRegisterCache.rotationRegisters.length; i++) {\n\t\t\tshaderRegisterElement = animationRegisterCache.rotationRegisters[i];\n\t\t\tcode += \"m33 \" + temp + \".xyz,\" + shaderRegisterElement + \",\" + rotationMatrixRegister + \"\\n\" +\n\t\t\t\t\t\"mov \" + shaderRegisterElement + \".xyz,\" + shaderRegisterElement + \"\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleBillboardState\n\t{\n\t\treturn <ParticleBillboardState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tparticleAnimationSet.hasBillboard = true;\n\t}\n}\n\nexport = ParticleBillboardNode;",
    "import ColorTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleColorState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleColorState\");\n\n/**\n * A particle animation node used to control the color variation of a particle over time.\n */\nclass ParticleColorNode extends ParticleNodeBase\n{\n\t//default values used when creating states\n\t/** @private */\n\tpublic _iUsesMultiplier:boolean;\n\t/** @private */\n\tpublic _iUsesOffset:boolean;\n\t/** @private */\n\tpublic _iUsesCycle:boolean;\n\t/** @private */\n\tpublic _iUsesPhase:boolean;\n\t/** @private */\n\tpublic _iStartColor:ColorTransform;\n\t/** @private */\n\tpublic _iEndColor:ColorTransform;\n\t/** @private */\n\tpublic _iCycleDuration:number;\n\t/** @private */\n\tpublic _iCyclePhase:number;\n\n\t/**\n\t * Reference for color node properties on a single particle (when in local property mode).\n\t * Expects a <code>ColorTransform</code> object representing the start color transform applied to the particle.\n\t */\n\tpublic static COLOR_START_COLORTRANSFORM:string = \"ColorStartColorTransform\";\n\n\t/**\n\t * Reference for color node properties on a single particle (when in local property mode).\n\t * Expects a <code>ColorTransform</code> object representing the end color transform applied to the particle.\n\t */\n\tpublic static COLOR_END_COLORTRANSFORM:string = \"ColorEndColorTransform\";\n\n\t/**\n\t * Creates a new <code>ParticleColorNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] usesMultiplier  Defines whether the node uses multiplier data in the shader for its color transformations. Defaults to true.\n\t * @param    [optional] usesOffset      Defines whether the node uses offset data in the shader for its color transformations. Defaults to true.\n\t * @param    [optional] usesCycle       Defines whether the node uses the <code>cycleDuration</code> property in the shader to calculate the period of the animation independent of particle duration. Defaults to false.\n\t * @param    [optional] usesPhase       Defines whether the node uses the <code>cyclePhase</code> property in the shader to calculate a starting offset to the cycle rotation of the particle. Defaults to false.\n\t * @param    [optional] startColor      Defines the default start color transform of the node, when in global mode.\n\t * @param    [optional] endColor        Defines the default end color transform of the node, when in global mode.\n\t * @param    [optional] cycleDuration   Defines the duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\n\t * @param    [optional] cyclePhase      Defines the phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\n\t */\n\tconstructor(mode:number /*uint*/, usesMultiplier:boolean = true, usesOffset:boolean = true, usesCycle:boolean = false, usesPhase:boolean = false, startColor:ColorTransform = null, endColor:ColorTransform = null, cycleDuration:number = 1, cyclePhase:number = 0)\n\t{\n\t\tsuper(\"ParticleColor\", mode, (usesMultiplier && usesOffset)? 16 : 8, ParticleAnimationSet.COLOR_PRIORITY);\n\n\t\tthis._pStateClass = ParticleColorState;\n\n\t\tthis._iUsesMultiplier = usesMultiplier;\n\t\tthis._iUsesOffset = usesOffset;\n\t\tthis._iUsesCycle = usesCycle;\n\t\tthis._iUsesPhase = usesPhase;\n\n\t\tthis._iStartColor = startColor || new ColorTransform();\n\t\tthis._iEndColor = endColor || new ColorTransform();\n\t\tthis._iCycleDuration = cycleDuration;\n\t\tthis._iCyclePhase = cyclePhase;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar code:string = \"\";\n\t\tif (animationRegisterCache.needFragmentAnimation) {\n\t\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\n\t\t\tif (this._iUsesCycle) {\n\t\t\t\tvar cycleConst:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleColorState.CYCLE_INDEX, cycleConst.index);\n\n\t\t\t\tanimationRegisterCache.addVertexTempUsages(temp, 1);\n\t\t\t\tvar sin:ShaderRegisterElement = animationRegisterCache.getFreeVertexSingleTemp();\n\t\t\t\tanimationRegisterCache.removeVertexTempUsage(temp);\n\n\t\t\t\tcode += \"mul \" + sin + \",\" + animationRegisterCache.vertexTime + \",\" + cycleConst + \".x\\n\";\n\n\t\t\t\tif (this._iUsesPhase)\n\t\t\t\t\tcode += \"add \" + sin + \",\" + sin + \",\" + cycleConst + \".y\\n\";\n\n\t\t\t\tcode += \"sin \" + sin + \",\" + sin + \"\\n\";\n\t\t\t}\n\n\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\tvar startMultiplierValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\t\t\tvar deltaMultiplierValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleColorState.START_MULTIPLIER_INDEX, startMultiplierValue.index);\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleColorState.DELTA_MULTIPLIER_INDEX, deltaMultiplierValue.index);\n\n\t\t\t\tcode += \"mul \" + temp + \",\" + deltaMultiplierValue + \",\" + (this._iUsesCycle? sin : animationRegisterCache.vertexLife) + \"\\n\";\n\t\t\t\tcode += \"add \" + temp + \",\" + temp + \",\" + startMultiplierValue + \"\\n\";\n\t\t\t\tcode += \"mul \" + animationRegisterCache.colorMulTarget + \",\" + temp + \",\" + animationRegisterCache.colorMulTarget + \"\\n\";\n\t\t\t}\n\n\t\t\tif (this._iUsesOffset) {\n\t\t\t\tvar startOffsetValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.LOCAL_STATIC)? animationRegisterCache.getFreeVertexAttribute() : animationRegisterCache.getFreeVertexConstant();\n\t\t\t\tvar deltaOffsetValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.LOCAL_STATIC)? animationRegisterCache.getFreeVertexAttribute() : animationRegisterCache.getFreeVertexConstant();\n\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleColorState.START_OFFSET_INDEX, startOffsetValue.index);\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleColorState.DELTA_OFFSET_INDEX, deltaOffsetValue.index);\n\n\t\t\t\tcode += \"mul \" + temp + \",\" + deltaOffsetValue + \",\" + (this._iUsesCycle? sin : animationRegisterCache.vertexLife) + \"\\n\";\n\t\t\t\tcode += \"add \" + temp + \",\" + temp + \",\" + startOffsetValue + \"\\n\";\n\t\t\t\tcode += \"add \" + animationRegisterCache.colorAddTarget + \",\" + temp + \",\" + animationRegisterCache.colorAddTarget + \"\\n\";\n\t\t\t}\n\t\t}\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleColorState\n\t{\n\t\treturn <ParticleColorState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tif (this._iUsesMultiplier)\n\t\t\tparticleAnimationSet.hasColorMulNode = true;\n\t\tif (this._iUsesOffset)\n\t\t\tparticleAnimationSet.hasColorAddNode = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar startColor:ColorTransform = param[ParticleColorNode.COLOR_START_COLORTRANSFORM];\n\t\tif (!startColor)\n\t\t\tthrow(new Error(\"there is no \" + ParticleColorNode.COLOR_START_COLORTRANSFORM + \" in param!\"));\n\n\t\tvar endColor:ColorTransform = param[ParticleColorNode.COLOR_END_COLORTRANSFORM];\n\t\tif (!endColor)\n\t\t\tthrow(new Error(\"there is no \" + ParticleColorNode.COLOR_END_COLORTRANSFORM + \" in param!\"));\n\n\t\tvar i:number /*uint*/ = 0;\n\n\t\tif (!this._iUsesCycle) {\n\t\t\t//multiplier\n\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\tthis._pOneData[i++] = startColor.redMultiplier;\n\t\t\t\tthis._pOneData[i++] = startColor.greenMultiplier;\n\t\t\t\tthis._pOneData[i++] = startColor.blueMultiplier;\n\t\t\t\tthis._pOneData[i++] = startColor.alphaMultiplier;\n\t\t\t\tthis._pOneData[i++] = endColor.redMultiplier - startColor.redMultiplier;\n\t\t\t\tthis._pOneData[i++] = endColor.greenMultiplier - startColor.greenMultiplier;\n\t\t\t\tthis._pOneData[i++] = endColor.blueMultiplier - startColor.blueMultiplier;\n\t\t\t\tthis._pOneData[i++] = endColor.alphaMultiplier - startColor.alphaMultiplier;\n\t\t\t}\n\n\t\t\t//offset\n\t\t\tif (this._iUsesOffset) {\n\t\t\t\tthis._pOneData[i++] = startColor.redOffset/255;\n\t\t\t\tthis._pOneData[i++] = startColor.greenOffset/255;\n\t\t\t\tthis._pOneData[i++] = startColor.blueOffset/255;\n\t\t\t\tthis._pOneData[i++] = startColor.alphaOffset/255;\n\t\t\t\tthis._pOneData[i++] = (endColor.redOffset - startColor.redOffset)/255;\n\t\t\t\tthis._pOneData[i++] = (endColor.greenOffset - startColor.greenOffset)/255;\n\t\t\t\tthis._pOneData[i++] = (endColor.blueOffset - startColor.blueOffset)/255;\n\t\t\t\tthis._pOneData[i++] = (endColor.alphaOffset - startColor.alphaOffset)/255;\n\t\t\t}\n\t\t} else {\n\t\t\t//multiplier\n\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\tthis._pOneData[i++] = (startColor.redMultiplier + endColor.redMultiplier)/2;\n\t\t\t\tthis._pOneData[i++] = (startColor.greenMultiplier + endColor.greenMultiplier)/2;\n\t\t\t\tthis._pOneData[i++] = (startColor.blueMultiplier + endColor.blueMultiplier)/2;\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaMultiplier + endColor.alphaMultiplier)/2;\n\t\t\t\tthis._pOneData[i++] = (startColor.redMultiplier - endColor.redMultiplier)/2;\n\t\t\t\tthis._pOneData[i++] = (startColor.greenMultiplier - endColor.greenMultiplier)/2;\n\t\t\t\tthis._pOneData[i++] = (startColor.blueMultiplier - endColor.blueMultiplier)/2;\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaMultiplier - endColor.alphaMultiplier)/2;\n\t\t\t}\n\n\t\t\t//offset\n\t\t\tif (this._iUsesOffset) {\n\t\t\t\tthis._pOneData[i++] = (startColor.redOffset + endColor.redOffset)/(255*2);\n\t\t\t\tthis._pOneData[i++] = (startColor.greenOffset + endColor.greenOffset)/(255*2);\n\t\t\t\tthis._pOneData[i++] = (startColor.blueOffset + endColor.blueOffset)/(255*2);\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaOffset + endColor.alphaOffset)/(255*2);\n\t\t\t\tthis._pOneData[i++] = (startColor.redOffset - endColor.redOffset)/(255*2);\n\t\t\t\tthis._pOneData[i++] = (startColor.greenOffset - endColor.greenOffset)/(255*2);\n\t\t\t\tthis._pOneData[i++] = (startColor.blueOffset - endColor.blueOffset)/(255*2);\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaOffset - endColor.alphaOffset)/(255*2);\n\t\t\t}\n\t\t}\n\n\t}\n}\n\nexport = ParticleColorNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleFollowState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleFollowState\");\n\n/**\n * A particle animation node used to create a follow behaviour on a particle system.\n */\nclass ParticleFollowNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iUsesPosition:boolean;\n\n\t/** @private */\n\tpublic _iUsesRotation:boolean;\n\n\t/** @private */\n\tpublic _iSmooth:boolean;\n\n\t/**\n\t * Creates a new <code>ParticleFollowNode</code>\n\t *\n\t * @param    [optional] usesPosition     Defines wehether the individual particle reacts to the position of the target.\n\t * @param    [optional] usesRotation     Defines wehether the individual particle reacts to the rotation of the target.\n\t * @param    [optional] smooth     Defines wehether the state calculate the interpolated value.\n\t */\n\tconstructor(usesPosition:boolean = true, usesRotation:boolean = true, smooth:boolean = false)\n\t{\n\t\tsuper(\"ParticleFollow\", ParticlePropertiesMode.LOCAL_DYNAMIC, (usesPosition && usesRotation)? 6 : 3, ParticleAnimationSet.POST_PRIORITY);\n\n\t\tthis._pStateClass = ParticleFollowState;\n\n\t\tthis._iUsesPosition = usesPosition;\n\t\tthis._iUsesRotation = usesRotation;\n\t\tthis._iSmooth = smooth;\n\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\t//TODO: use Quaternion to implement this function\n\t\tvar code:string = \"\";\n\t\tif (this._iUsesRotation) {\n\t\t\tvar rotationAttribute:ShaderRegisterElement = animationRegisterCache.getFreeVertexAttribute();\n\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleFollowState.FOLLOW_ROTATION_INDEX, rotationAttribute.index);\n\n\t\t\tvar temp1:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(temp1, 1);\n\t\t\tvar temp2:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(temp2, 1);\n\t\t\tvar temp3:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\n\t\t\tvar temp4:ShaderRegisterElement;\n\t\t\tif (animationRegisterCache.hasBillboard) {\n\t\t\t\tanimationRegisterCache.addVertexTempUsages(temp3, 1);\n\t\t\t\ttemp4 = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\t}\n\n\t\t\tanimationRegisterCache.removeVertexTempUsage(temp1);\n\t\t\tanimationRegisterCache.removeVertexTempUsage(temp2);\n\t\t\tif (animationRegisterCache.hasBillboard)\n\t\t\t\tanimationRegisterCache.removeVertexTempUsage(temp3);\n\n\t\t\tvar len:number /*int*/ = animationRegisterCache.rotationRegisters.length;\n\t\t\tvar i:number /*int*/;\n\n\t\t\t//x axis\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"sin \" + temp3 + \".y,\" + rotationAttribute + \".x\\n\";\n\t\t\tcode += \"cos \" + temp3 + \".z,\" + rotationAttribute + \".x\\n\";\n\t\t\tcode += \"mov \" + temp2 + \".x,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + temp3 + \".z\\n\";\n\t\t\tcode += \"neg \" + temp2 + \".z,\" + temp3 + \".y\\n\";\n\n\t\t\tif (animationRegisterCache.hasBillboard)\n\t\t\t\tcode += \"m33 \" + temp4 + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz,\" + temp1 + \"\\n\";\n\t\t\telse {\n\t\t\t\tcode += \"m33 \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\n\t\t\t\tfor (i = 0; i < len; i++)\n\t\t\t\t\tcode += \"m33 \" + animationRegisterCache.rotationRegisters[i] + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\n\t\t\t}\n\n\t\t\t//y axis\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"cos \" + temp1 + \".x,\" + rotationAttribute + \".y\\n\";\n\t\t\tcode += \"sin \" + temp1 + \".z,\" + rotationAttribute + \".y\\n\";\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"neg \" + temp3 + \".x,\" + temp1 + \".z\\n\";\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + temp1 + \".x\\n\";\n\n\t\t\tif (animationRegisterCache.hasBillboard)\n\t\t\t\tcode += \"m33 \" + temp4 + \".xyz,\" + temp4 + \".xyz,\" + temp1 + \"\\n\";\n\t\t\telse {\n\t\t\t\tcode += \"m33 \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\n\t\t\t\tfor (i = 0; i < len; i++)\n\t\t\t\t\tcode += \"m33 \" + animationRegisterCache.rotationRegisters[i] + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\n\t\t\t}\n\n\t\t\t//z axis\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"sin \" + temp2 + \".x,\" + rotationAttribute + \".z\\n\";\n\t\t\tcode += \"cos \" + temp2 + \".y,\" + rotationAttribute + \".z\\n\";\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + temp2 + \".y\\n\";\n\t\t\tcode += \"neg \" + temp1 + \".y,\" + temp2 + \".x\\n\";\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\n\t\t\tif (animationRegisterCache.hasBillboard) {\n\t\t\t\tcode += \"m33 \" + temp4 + \".xyz,\" + temp4 + \".xyz,\" + temp1 + \"\\n\";\n\t\t\t\tcode += \"sub \" + temp4 + \".xyz,\" + temp4 + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\t\t\t\tcode += \"add \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp4 + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\t\t\t} else {\n\t\t\t\tcode += \"m33 \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\n\t\t\t\tfor (i = 0; i < len; i++)\n\t\t\t\t\tcode += \"m33 \" + animationRegisterCache.rotationRegisters[i] + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\n\t\t\t}\n\n\t\t}\n\n\t\tif (this._iUsesPosition) {\n\t\t\tvar positionAttribute:ShaderRegisterElement = animationRegisterCache.getFreeVertexAttribute();\n\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleFollowState.FOLLOW_POSITION_INDEX, positionAttribute.index);\n\t\t\tcode += \"add \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + positionAttribute + \",\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleFollowState\n\t{\n\t\treturn <ParticleFollowState> animator.getAnimationState(this);\n\t}\n}\n\nexport = ParticleFollowNode;",
    "import ColorTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleInitialColorState\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleInitialColorState\");\n\n/**\n *\n */\nclass ParticleInitialColorNode extends ParticleNodeBase\n{\n\t//default values used when creating states\n\t/** @private */\n\tpublic _iUsesMultiplier:boolean;\n\t/** @private */\n\tpublic _iUsesOffset:boolean;\n\t/** @private */\n\tpublic _iInitialColor:ColorTransform;\n\n\t/**\n\t * Reference for color node properties on a single particle (when in local property mode).\n\t * Expects a <code>ColorTransform</code> object representing the color transform applied to the particle.\n\t */\n\tpublic static COLOR_INITIAL_COLORTRANSFORM:string = \"ColorInitialColorTransform\";\n\n\tconstructor(mode:number /*uint*/, usesMultiplier:boolean = true, usesOffset:boolean = false, initialColor:ColorTransform = null)\n\t{\n\t\tsuper(\"ParticleInitialColor\", mode, (usesMultiplier && usesOffset)? 8 : 4, ParticleAnimationSet.COLOR_PRIORITY);\n\n\t\tthis._pStateClass = ParticleInitialColorState;\n\n\t\tthis._iUsesMultiplier = usesMultiplier;\n\t\tthis._iUsesOffset = usesOffset;\n\t\tthis._iInitialColor = initialColor || new ColorTransform();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar code:string = \"\";\n\t\tif (animationRegisterCache.needFragmentAnimation) {\n\n\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\tvar multiplierValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleInitialColorState.MULTIPLIER_INDEX, multiplierValue.index);\n\n\t\t\t\tcode += \"mul \" + animationRegisterCache.colorMulTarget + \",\" + multiplierValue + \",\" + animationRegisterCache.colorMulTarget + \"\\n\";\n\t\t\t}\n\n\t\t\tif (this._iUsesOffset) {\n\t\t\t\tvar offsetValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.LOCAL_STATIC)? animationRegisterCache.getFreeVertexAttribute() : animationRegisterCache.getFreeVertexConstant();\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleInitialColorState.OFFSET_INDEX, offsetValue.index);\n\n\t\t\t\tcode += \"add \" + animationRegisterCache.colorAddTarget + \",\" + offsetValue + \",\" + animationRegisterCache.colorAddTarget + \"\\n\";\n\t\t\t}\n\t\t}\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tif (this._iUsesMultiplier)\n\t\t\tparticleAnimationSet.hasColorMulNode = true;\n\t\tif (this._iUsesOffset)\n\t\t\tparticleAnimationSet.hasColorAddNode = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar initialColor:ColorTransform = param[ParticleInitialColorNode.COLOR_INITIAL_COLORTRANSFORM];\n\t\tif (!initialColor)\n\t\t\tthrow(new Error(\"there is no \" + ParticleInitialColorNode.COLOR_INITIAL_COLORTRANSFORM + \" in param!\"));\n\n\t\tvar i:number /*uint*/ = 0;\n\n\t\t//multiplier\n\t\tif (this._iUsesMultiplier) {\n\t\t\tthis._pOneData[i++] = initialColor.redMultiplier;\n\t\t\tthis._pOneData[i++] = initialColor.greenMultiplier;\n\t\t\tthis._pOneData[i++] = initialColor.blueMultiplier;\n\t\t\tthis._pOneData[i++] = initialColor.alphaMultiplier;\n\t\t}\n\t\t//offset\n\t\tif (this._iUsesOffset) {\n\t\t\tthis._pOneData[i++] = initialColor.redOffset/255;\n\t\t\tthis._pOneData[i++] = initialColor.greenOffset/255;\n\t\t\tthis._pOneData[i++] = initialColor.blueOffset/255;\n\t\t\tthis._pOneData[i++] = initialColor.alphaOffset/255;\n\t\t}\n\n\t}\n\n}\n\nexport = ParticleInitialColorNode;",
    "import AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\n\n/**\n * Provides an abstract base class for particle animation nodes.\n */\nclass ParticleNodeBase extends AnimationNodeBase\n{\n\tprivate _priority:number /*int*/;\n\n\tpublic _pMode:number /*uint*/;\n\tpublic _pDataLength:number /*uint*/ = 3;\n\tpublic _pOneData:Array<number>;\n\n\tpublic _iDataOffset:number /*uint*/;\n\n\t//modes alias\n\tprivate static GLOBAL:string = 'Global';\n\tprivate static LOCAL_STATIC:string = 'LocalStatic';\n\tprivate static LOCAL_DYNAMIC:string = 'LocalDynamic';\n\n\t//modes list\n\tprivate static MODES:Object =\n\t{\n\t\t0:ParticleNodeBase.GLOBAL,\n\t\t1:ParticleNodeBase.LOCAL_STATIC,\n\t\t2:ParticleNodeBase.LOCAL_DYNAMIC\n\t};\n\n\t/**\n\t * Returns the property mode of the particle animation node. Typically set in the node constructor\n\t *\n\t * @see away.animators.ParticlePropertiesMode\n\t */\n\tpublic get mode():number /*uint*/\n\t{\n\t\treturn this._pMode;\n\t}\n\n\t/**\n\t * Returns the priority of the particle animation node, used to order the agal generated in a particle animation set. Set automatically on instantiation.\n\t *\n\t * @see away.animators.ParticleAnimationSet\n\t * @see #getAGALVertexCode\n\t */\n\tpublic get priority():number /*int*/\n\t{\n\t\treturn this._priority;\n\t}\n\n\t/**\n\t * Returns the length of the data used by the node when in <code>LOCAL_STATIC</code> mode. Used to generate the local static data of the particle animation set.\n\t *\n\t * @see away.animators.ParticleAnimationSet\n\t * @see #getAGALVertexCode\n\t */\n\tpublic get dataLength():number /*int*/\n\t{\n\t\treturn this._pDataLength;\n\t}\n\n\t/**\n\t * Returns the generated data vector of the node after one particle pass during the generation of all local static data of the particle animation set.\n\t *\n\t * @see away.animators.ParticleAnimationSet\n\t * @see #generatePropertyOfOneParticle\n\t */\n\tpublic get oneData():Array<number>\n\t{\n\t\treturn this._pOneData;\n\t}\n\n\t/**\n\t * Creates a new <code>ParticleNodeBase</code> object.\n\t *\n\t * @param               name            Defines the generic name of the particle animation node.\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param               dataLength      Defines the length of the data used by the node when in <code>LOCAL_STATIC</code> mode.\n\t * @param    [optional] priority        the priority of the particle animation node, used to order the agal generated in a particle animation set. Defaults to 1.\n\t */\n\tconstructor(name:string, mode:number /*uint*/, dataLength:number /*uint*/, priority:number /*int*/ = 1)\n\t{\n\t\tsuper();\n\n\t\tname = name + ParticleNodeBase.MODES[mode];\n\n\t\tthis.name = name;\n\t\tthis._pMode = mode;\n\t\tthis._priority = priority;\n\t\tthis._pDataLength = dataLength;\n\n\t\tthis._pOneData = new Array<number>(this._pDataLength);\n\t}\n\n\t/**\n\t * Returns the AGAL code of the particle animation node for use in the vertex shader.\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Returns the AGAL code of the particle animation node for use in the fragment shader.\n\t */\n\tpublic getAGALFragmentCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Returns the AGAL code of the particle animation node for use in the fragment shader when UV coordinates are required.\n\t */\n\tpublic getAGALUVCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Called internally by the particle animation set when assigning the set of static properties originally defined by the initParticleFunc of the set.\n\t *\n\t * @see away.animators.ParticleAnimationSet#initParticleFunc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\n\t}\n\n\t/**\n\t * Called internally by the particle animation set when determining the requirements of the particle animation node AGAL.\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\n\t}\n}\n\nexport = ParticleNodeBase;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleOrbitState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleOrbitState\");\n\n/**\n * A particle animation node used to control the position of a particle over time around a circular orbit.\n */\nclass ParticleOrbitNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iUsesEulers:boolean;\n\n\t/** @private */\n\tpublic _iUsesCycle:boolean;\n\n\t/** @private */\n\tpublic _iUsesPhase:boolean;\n\n\t/** @private */\n\tpublic _iRadius:number;\n\t/** @private */\n\tpublic _iCycleDuration:number;\n\t/** @private */\n\tpublic _iCyclePhase:number;\n\t/** @private */\n\tpublic _iEulers:Vector3D;\n\n\t/**\n\t * Reference for orbit node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the radius (x), cycle speed (y) and cycle phase (z) of the motion on the particle.\n\t */\n\tpublic static ORBIT_VECTOR3D:string = \"OrbitVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleOrbitNode</code> object.\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] usesEulers      Defines whether the node uses the <code>eulers</code> property in the shader to calculate a rotation on the orbit. Defaults to true.\n\t * @param    [optional] usesCycle       Defines whether the node uses the <code>cycleDuration</code> property in the shader to calculate the period of the orbit independent of particle duration. Defaults to false.\n\t * @param    [optional] usesPhase       Defines whether the node uses the <code>cyclePhase</code> property in the shader to calculate a starting offset to the cycle rotation of the particle. Defaults to false.\n\t * @param    [optional] radius          Defines the radius of the orbit when in global mode. Defaults to 100.\n\t * @param    [optional] cycleDuration   Defines the duration of the orbit in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\n\t * @param    [optional] cyclePhase      Defines the phase of the orbit in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\n\t * @param    [optional] eulers          Defines the euler rotation in degrees, applied to the orientation of the orbit when in global mode.\n\t */\n\tconstructor(mode:number /*uint*/, usesEulers:boolean = true, usesCycle:boolean = false, usesPhase:boolean = false, radius:number = 100, cycleDuration:number = 1, cyclePhase:number = 0, eulers:Vector3D = null)\n\t{\n\t\tvar len:number /*int*/ = 3;\n\t\tif (usesPhase)\n\t\t\tlen++;\n\t\tsuper(\"ParticleOrbit\", mode, len);\n\n\t\tthis._pStateClass = ParticleOrbitState;\n\n\t\tthis._iUsesEulers = usesEulers;\n\t\tthis._iUsesCycle = usesCycle;\n\t\tthis._iUsesPhase = usesPhase;\n\n\t\tthis._iRadius = radius;\n\t\tthis._iCycleDuration = cycleDuration;\n\t\tthis._iCyclePhase = cyclePhase;\n\t\tthis._iEulers = eulers || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar orbitRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleOrbitState.ORBIT_INDEX, orbitRegister.index);\n\n\t\tvar eulersMatrixRegister:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleOrbitState.EULERS_INDEX, eulersMatrixRegister.index);\n\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.getFreeVertexConstant();\n\n\t\tvar temp1:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tanimationRegisterCache.addVertexTempUsages(temp1, 1);\n\t\tvar distance:ShaderRegisterElement = new ShaderRegisterElement(temp1.regName, temp1.index);\n\n\t\tvar temp2:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index, 0);\n\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index, 1);\n\t\tvar degree:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index, 2);\n\t\tanimationRegisterCache.removeVertexTempUsage(temp1);\n\n\t\tvar code:string = \"\";\n\n\t\tif (this._iUsesCycle) {\n\t\t\tcode += \"mul \" + degree + \",\" + animationRegisterCache.vertexTime + \",\" + orbitRegister + \".y\\n\";\n\n\t\t\tif (this._iUsesPhase)\n\t\t\t\tcode += \"add \" + degree + \",\" + degree + \",\" + orbitRegister + \".w\\n\";\n\t\t} else\n\t\t\tcode += \"mul \" + degree + \",\" + animationRegisterCache.vertexLife + \",\" + orbitRegister + \".y\\n\";\n\n\t\tcode += \"cos \" + cos + \",\" + degree + \"\\n\";\n\t\tcode += \"sin \" + sin + \",\" + degree + \"\\n\";\n\t\tcode += \"mul \" + distance + \".x,\" + cos + \",\" + orbitRegister + \".x\\n\";\n\t\tcode += \"mul \" + distance + \".y,\" + sin + \",\" + orbitRegister + \".x\\n\";\n\t\tcode += \"mov \" + distance + \".wz\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\tif (this._iUsesEulers)\n\t\t\tcode += \"m44 \" + distance + \",\" + distance + \",\" + eulersMatrixRegister + \"\\n\";\n\t\tcode += \"add \" + animationRegisterCache.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\n\t\tif (animationRegisterCache.needVelocity) {\n\t\t\tcode += \"neg \" + distance + \".x,\" + sin + \"\\n\";\n\t\t\tcode += \"mov \" + distance + \".y,\" + cos + \"\\n\";\n\t\t\tcode += \"mov \" + distance + \".zw,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tif (this._iUsesEulers)\n\t\t\t\tcode += \"m44 \" + distance + \",\" + distance + \",\" + eulersMatrixRegister + \"\\n\";\n\t\t\tcode += \"mul \" + distance + \",\" + distance + \",\" + orbitRegister + \".z\\n\";\n\t\t\tcode += \"div \" + distance + \",\" + distance + \",\" + orbitRegister + \".y\\n\";\n\t\t\tif (!this._iUsesCycle)\n\t\t\t\tcode += \"div \" + distance + \",\" + distance + \",\" + animationRegisterCache.vertexLife + \"\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.velocityTarget + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz,\" + distance + \".xyz\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleOrbitState\n\t{\n\t\treturn <ParticleOrbitState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\t//Vector3D.x is radius, Vector3D.y is cycle duration, Vector3D.z is phase\n\t\tvar orbit:Vector3D = param[ParticleOrbitNode.ORBIT_VECTOR3D];\n\t\tif (!orbit)\n\t\t\tthrow new Error(\"there is no \" + ParticleOrbitNode.ORBIT_VECTOR3D + \" in param!\");\n\n\t\tthis._pOneData[0] = orbit.x;\n\t\tif (this._iUsesCycle && orbit.y <= 0)\n\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\n\t\tthis._pOneData[1] = Math.PI*2/(!this._iUsesCycle? 1 : orbit.y);\n\t\tthis._pOneData[2] = orbit.x*Math.PI*2;\n\t\tif (this._iUsesPhase)\n\t\t\tthis._pOneData[3] = orbit.z*Math.PI/180;\n\t}\n}\n\nexport = ParticleOrbitNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleOscillatorState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleOscillatorState\");\n\n/**\n * A particle animation node used to control the position of a particle over time using simple harmonic motion.\n */\nclass ParticleOscillatorNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iOscillator:Vector3D;\n\n\t/**\n\t * Reference for ocsillator node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the axis (x,y,z) and cycle speed (w) of the motion on the particle.\n\t */\n\tpublic static OSCILLATOR_VECTOR3D:string = \"OscillatorVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleOscillatorNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] oscillator      Defines the default oscillator axis (x, y, z) and cycleDuration (w) of the node, used when in global mode.\n\t */\n\tconstructor(mode:number /*uint*/, oscillator:Vector3D = null)\n\t{\n\t\tsuper(\"ParticleOscillator\", mode, 4);\n\n\t\tthis._pStateClass = ParticleOscillatorState;\n\n\t\tthis._iOscillator = oscillator || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar oscillatorRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleOscillatorState.OSCILLATOR_INDEX, oscillatorRegister.index);\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tvar dgree:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\n\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\n\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 2);\n\t\tanimationRegisterCache.addVertexTempUsages(temp, 1);\n\t\tvar temp2:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tvar distance:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index);\n\t\tanimationRegisterCache.removeVertexTempUsage(temp);\n\n\t\tvar code:string = \"\";\n\t\tcode += \"mul \" + dgree + \",\" + animationRegisterCache.vertexTime + \",\" + oscillatorRegister + \".w\\n\";\n\t\tcode += \"sin \" + sin + \",\" + dgree + \"\\n\";\n\t\tcode += \"mul \" + distance + \".xyz,\" + sin + \",\" + oscillatorRegister + \".xyz\\n\";\n\t\tcode += \"add \" + animationRegisterCache.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\n\t\tif (animationRegisterCache.needVelocity) {\n\t\t\tcode += \"cos \" + cos + \",\" + dgree + \"\\n\";\n\t\t\tcode += \"mul \" + distance + \".xyz,\" + cos + \",\" + oscillatorRegister + \".xyz\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.velocityTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleOscillatorState\n\t{\n\t\treturn <ParticleOscillatorState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\t//(Vector3D.x,Vector3D.y,Vector3D.z) is oscillator axis, Vector3D.w is oscillator cycle duration\n\t\tvar drift:Vector3D = param[ParticleOscillatorNode.OSCILLATOR_VECTOR3D];\n\t\tif (!drift)\n\t\t\tthrow(new Error(\"there is no \" + ParticleOscillatorNode.OSCILLATOR_VECTOR3D + \" in param!\"));\n\n\t\tthis._pOneData[0] = drift.x;\n\t\tthis._pOneData[1] = drift.y;\n\t\tthis._pOneData[2] = drift.z;\n\t\tif (drift.w <= 0)\n\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\n\t\tthis._pOneData[3] = Math.PI*2/drift.w;\n\t}\n}\n\nexport = ParticleOscillatorNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticlePositionState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticlePositionState\");\n\n/**\n * A particle animation node used to set the starting position of a particle.\n */\nclass ParticlePositionNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iPosition:Vector3D;\n\n\t/**\n\t * Reference for position node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing position of the particle.\n\t */\n\tpublic static POSITION_VECTOR3D:string = \"PositionVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticlePositionNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] position        Defines the default position of the particle when in global mode. Defaults to 0,0,0.\n\t */\n\tconstructor(mode:number /*uint*/, position:Vector3D = null)\n\t{\n\t\tsuper(\"ParticlePosition\", mode, 3);\n\n\t\tthis._pStateClass = ParticlePositionState;\n\n\t\tthis._iPosition = position || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar positionAttribute:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticlePositionState.POSITION_INDEX, positionAttribute.index);\n\n\t\treturn \"add \" + animationRegisterCache.positionTarget + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticlePositionState\n\t{\n\t\treturn <ParticlePositionState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar offset:Vector3D = param[ParticlePositionNode.POSITION_VECTOR3D];\n\t\tif (!offset)\n\t\t\tthrow(new Error(\"there is no \" + ParticlePositionNode.POSITION_VECTOR3D + \" in param!\"));\n\n\t\tthis._pOneData[0] = offset.x;\n\t\tthis._pOneData[1] = offset.y;\n\t\tthis._pOneData[2] = offset.z;\n\t}\n}\n\nexport = ParticlePositionNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleRotateToHeadingState\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleRotateToHeadingState\");\n\n/**\n * A particle animation node used to control the rotation of a particle to match its heading vector.\n */\nclass ParticleRotateToHeadingNode extends ParticleNodeBase\n{\n\t/**\n\t * Creates a new <code>ParticleBillboardNode</code>\n\t */\n\tconstructor()\n\t{\n\t\tsuper(\"ParticleRotateToHeading\", ParticlePropertiesMode.GLOBAL, 0, 3);\n\n\t\tthis._pStateClass = ParticleRotateToHeadingState;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar code:string = \"\";\n\t\tvar len:number /*int*/ = animationRegisterCache.rotationRegisters.length;\n\t\tvar i:number /*int*/;\n\t\tif (animationRegisterCache.hasBillboard) {\n\t\t\tvar temp1:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(temp1, 1);\n\t\t\tvar temp2:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(temp2, 1);\n\t\t\tvar temp3:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\n\t\t\tvar rotationMatrixRegister:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleRotateToHeadingState.MATRIX_INDEX, rotationMatrixRegister.index);\n\t\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\t\tanimationRegisterCache.getFreeVertexConstant();\n\n\t\t\tanimationRegisterCache.removeVertexTempUsage(temp1);\n\t\t\tanimationRegisterCache.removeVertexTempUsage(temp2);\n\n\t\t\t//process the velocity\n\t\t\tcode += \"m33 \" + temp1 + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz,\" + rotationMatrixRegister + \"\\n\";\n\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp3 + \".xy,\" + temp1 + \".xy\\n\";\n\t\t\tcode += \"nrm \" + temp3 + \".xyz,\" + temp3 + \".xyz\\n\";\n\n\t\t\t//temp3.x=cos,temp3.y=sin\n\t\t\t//only process z axis\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp2 + \".x,\" + temp3 + \".y\\n\";\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + temp3 + \".x\\n\";\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + temp3 + \".x\\n\";\n\t\t\tcode += \"neg \" + temp1 + \".y,\" + temp3 + \".y\\n\";\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\tcode += \"m33 \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\n\t\t\tfor (i = 0; i < len; i++)\n\t\t\t\tcode += \"m33 \" + animationRegisterCache.rotationRegisters[i] + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\n\t\t} else {\n\t\t\tvar nrmVel:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(nrmVel, 1);\n\n\t\t\tvar xAxis:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(xAxis, 1);\n\n\t\t\tvar R:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(R, 1);\n\t\t\tvar R_rev:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(R.regName, R.index, 3);\n\t\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(R_rev.regName, R_rev.index, 3);\n\t\t\tvar cos2:ShaderRegisterElement = new ShaderRegisterElement(nrmVel.regName, nrmVel.index, 3);\n\t\t\tvar tempSingle:ShaderRegisterElement = sin;\n\n\t\t\tanimationRegisterCache.removeVertexTempUsage(nrmVel);\n\t\t\tanimationRegisterCache.removeVertexTempUsage(xAxis);\n\t\t\tanimationRegisterCache.removeVertexTempUsage(R);\n\n\t\t\tcode += \"mov \" + xAxis + \".x,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\tcode += \"mov \" + xAxis + \".yz,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\n\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz\\n\";\n\t\t\tcode += \"dp3 \" + cos2 + \",\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + xAxis + \".xyz,\" + nrmVel + \".xyz\\n\";\n\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\n\t\t\t//use R as temp to judge if nrm is (0,0,0).\n\t\t\t//if nrm is (0,0,0) ,change it to (0,0,1).\n\t\t\tcode += \"dp3 \" + R + \".x,\" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\n\t\t\tcode += \"sge \" + R + \".x,\" + animationRegisterCache.vertexZeroConst + \",\" + R + \".x\\n\";\n\t\t\tcode += \"add \" + nrmVel + \".z,\" + R + \".x,\" + nrmVel + \".z\\n\";\n\n\t\t\tcode += \"add \" + tempSingle + \",\" + cos2 + \",\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterCache.vertexTwoConst + \"\\n\";\n\t\t\tcode += \"sqt \" + cos + \",\" + tempSingle + \"\\n\";\n\n\t\t\tcode += \"sub \" + tempSingle + \",\" + animationRegisterCache.vertexOneConst + \",\" + cos2 + \"\\n\";\n\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterCache.vertexTwoConst + \"\\n\";\n\t\t\tcode += \"sqt \" + sin + \",\" + tempSingle + \"\\n\";\n\n\t\t\tcode += \"mul \" + R + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\n\t\t\t//use cos as R.w\n\n\t\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\t\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\n\n\t\t\t//use cos as R_rev.w\n\n\t\t\t//nrmVel and xAxis are used as temp register\n\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + R + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\n\t\t\t//use cos as R.w\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\t\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\tcode += \"dp3 \" + xAxis + \".w,\" + R + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\t\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\n\n\t\t\tcode += \"crs \" + R + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\n\t\t\t//code += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" +R_rev + \".w\\n\";\n\t\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\n\t\t\tcode += \"add \" + R + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\n\n\t\t\tcode += \"add \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t//just repeat the calculate above\n\t\t\t\t//because of the limited registers, no need to optimise\n\t\t\t\tcode += \"mov \" + xAxis + \".x,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\t\tcode += \"mov \" + xAxis + \".yz,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz\\n\";\n\t\t\t\tcode += \"dp3 \" + cos2 + \",\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + xAxis + \".xyz,\" + nrmVel + \".xyz\\n\";\n\t\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\n\t\t\t\tcode += \"dp3 \" + R + \".x,\" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\n\t\t\t\tcode += \"sge \" + R + \".x,\" + animationRegisterCache.vertexZeroConst + \",\" + R + \".x\\n\";\n\t\t\t\tcode += \"add \" + nrmVel + \".z,\" + R + \".x,\" + nrmVel + \".z\\n\";\n\t\t\t\tcode += \"add \" + tempSingle + \",\" + cos2 + \",\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterCache.vertexTwoConst + \"\\n\";\n\t\t\t\tcode += \"sqt \" + cos + \",\" + tempSingle + \"\\n\";\n\t\t\t\tcode += \"sub \" + tempSingle + \",\" + animationRegisterCache.vertexOneConst + \",\" + cos2 + \"\\n\";\n\t\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterCache.vertexTwoConst + \"\\n\";\n\t\t\t\tcode += \"sqt \" + sin + \",\" + tempSingle + \"\\n\";\n\t\t\t\tcode += \"mul \" + R + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\t\t\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\t\t\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\n\t\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + R + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \".xyz\\n\";\n\t\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterCache.rotationRegisters[i] + \".xyz\\n\";\n\t\t\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\t\tcode += \"dp3 \" + xAxis + \".w,\" + R + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \".xyz\\n\";\n\t\t\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\n\t\t\t\tcode += \"crs \" + R + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\n\t\t\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\n\t\t\t\tcode += \"add \" + R + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\n\t\t\t\tcode += \"add \" + animationRegisterCache.rotationRegisters[i] + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\t}\n\n\t\t}\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleRotateToHeadingState\n\t{\n\t\treturn <ParticleRotateToHeadingState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tparticleAnimationSet.needVelocity = true;\n\t}\n}\n\nexport = ParticleRotateToHeadingNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleRotateToPositionState\t= require(\"awayjs-renderergl/lib/animators/states/ParticleRotateToPositionState\");\n\n/**\n * A particle animation node used to control the rotation of a particle to face to a position\n */\nclass ParticleRotateToPositionNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iPosition:Vector3D;\n\n\t/**\n\t * Reference for the position the particle will rotate to face for a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the position that the particle must face.\n\t */\n\tpublic static POSITION_VECTOR3D:string = \"RotateToPositionVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleRotateToPositionNode</code>\n\t */\n\tconstructor(mode:number /*uint*/, position:Vector3D = null)\n\t{\n\t\tsuper(\"ParticleRotateToPosition\", mode, 3, 3);\n\n\t\tthis._pStateClass = ParticleRotateToPositionState;\n\n\t\tthis._iPosition = position || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar positionAttribute:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleRotateToPositionState.POSITION_INDEX, positionAttribute.index);\n\n\t\tvar code:string = \"\";\n\t\tvar len:number /*int*/ = animationRegisterCache.rotationRegisters.length;\n\t\tvar i:number /*int*/;\n\t\tif (animationRegisterCache.hasBillboard) {\n\t\t\tvar temp1:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(temp1, 1);\n\t\t\tvar temp2:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(temp2, 1);\n\t\t\tvar temp3:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\n\t\t\tvar rotationMatrixRegister:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleRotateToPositionState.MATRIX_INDEX, rotationMatrixRegister.index);\n\t\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\t\tanimationRegisterCache.getFreeVertexConstant();\n\t\t\tanimationRegisterCache.getFreeVertexConstant();\n\n\t\t\tanimationRegisterCache.removeVertexTempUsage(temp1);\n\t\t\tanimationRegisterCache.removeVertexTempUsage(temp2);\n\n\t\t\t//process the position\n\t\t\tcode += \"sub \" + temp1 + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\t\t\tcode += \"m33 \" + temp1 + \".xyz,\" + temp1 + \".xyz,\" + rotationMatrixRegister + \"\\n\";\n\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp3 + \".xy,\" + temp1 + \".xy\\n\";\n\t\t\tcode += \"nrm \" + temp3 + \".xyz,\" + temp3 + \".xyz\\n\";\n\n\t\t\t//temp3.x=cos,temp3.y=sin\n\t\t\t//only process z axis\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp2 + \".x,\" + temp3 + \".y\\n\";\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + temp3 + \".x\\n\";\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + temp3 + \".x\\n\";\n\t\t\tcode += \"neg \" + temp1 + \".y,\" + temp3 + \".y\\n\";\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\tcode += \"m33 \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\n\t\t\tfor (i = 0; i < len; i++)\n\t\t\t\tcode += \"m33 \" + animationRegisterCache.rotationRegisters[i] + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\n\t\t} else {\n\t\t\tvar nrmDirection:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(nrmDirection, 1);\n\n\t\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(temp, 1);\n\t\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\n\t\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\n\t\t\tvar o_temp:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 2);\n\t\t\tvar tempSingle:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 3);\n\n\t\t\tvar R:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(R, 1);\n\n\t\t\tanimationRegisterCache.removeVertexTempUsage(nrmDirection);\n\t\t\tanimationRegisterCache.removeVertexTempUsage(temp);\n\t\t\tanimationRegisterCache.removeVertexTempUsage(R);\n\n\t\t\tcode += \"sub \" + nrmDirection + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\n\n\t\t\tcode += \"mov \" + sin + \",\" + nrmDirection + \".y\\n\";\n\t\t\tcode += \"mul \" + cos + \",\" + sin + \",\" + sin + \"\\n\";\n\t\t\tcode += \"sub \" + cos + \",\" + animationRegisterCache.vertexOneConst + \",\" + cos + \"\\n\";\n\t\t\tcode += \"sqt \" + cos + \",\" + cos + \"\\n\";\n\n\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterCache.scaleAndRotateTarget + \".y\\n\";\n\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterCache.scaleAndRotateTarget + \".z\\n\";\n\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterCache.scaleAndRotateTarget + \".y\\n\";\n\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterCache.scaleAndRotateTarget + \".z\\n\";\n\n\t\t\tcode += \"sub \" + animationRegisterCache.scaleAndRotateTarget + \".y,\" + R + \".x,\" + R + \".y\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.scaleAndRotateTarget + \".z,\" + R + \".z,\" + R + \".w\\n\";\n\n\t\t\tcode += \"abs \" + R + \".y,\" + nrmDirection + \".y\\n\";\n\t\t\tcode += \"sge \" + R + \".z,\" + R + \".y,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\tcode += \"mul \" + R + \".x,\" + R + \".y,\" + nrmDirection + \".y\\n\";\n\n\t\t\t//judgu if nrmDirection=(0,1,0);\n\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"dp3 \" + sin + \",\" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\n\t\t\tcode += \"sge \" + tempSingle + \",\" + animationRegisterCache.vertexZeroConst + \",\" + sin + \"\\n\";\n\n\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\n\n\t\t\tcode += \"sub \" + sin + \",\" + animationRegisterCache.vertexOneConst + \",\" + tempSingle + \"\\n\";\n\t\t\tcode += \"mul \" + sin + \",\" + sin + \",\" + nrmDirection + \".x\\n\";\n\n\t\t\tcode += \"mov \" + cos + \",\" + nrmDirection + \".z\\n\";\n\t\t\tcode += \"neg \" + cos + \",\" + cos + \"\\n\";\n\t\t\tcode += \"sub \" + o_temp + \",\" + animationRegisterCache.vertexOneConst + \",\" + cos + \"\\n\";\n\t\t\tcode += \"mul \" + o_temp + \",\" + R + \".x,\" + tempSingle + \"\\n\";\n\t\t\tcode += \"add \" + cos + \",\" + cos + \",\" + o_temp + \"\\n\";\n\n\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterCache.scaleAndRotateTarget + \".x\\n\";\n\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterCache.scaleAndRotateTarget + \".z\\n\";\n\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterCache.scaleAndRotateTarget + \".x\\n\";\n\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterCache.scaleAndRotateTarget + \".z\\n\";\n\n\t\t\tcode += \"sub \" + animationRegisterCache.scaleAndRotateTarget + \".x,\" + R + \".x,\" + R + \".y\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.scaleAndRotateTarget + \".z,\" + R + \".z,\" + R + \".w\\n\";\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t//just repeat the calculate above\n\t\t\t\t//because of the limited registers, no need to optimise\n\t\t\t\tcode += \"sub \" + nrmDirection + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\t\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\n\t\t\t\tcode += \"mov \" + sin + \",\" + nrmDirection + \".y\\n\";\n\t\t\t\tcode += \"mul \" + cos + \",\" + sin + \",\" + sin + \"\\n\";\n\t\t\t\tcode += \"sub \" + cos + \",\" + animationRegisterCache.vertexOneConst + \",\" + cos + \"\\n\";\n\t\t\t\tcode += \"sqt \" + cos + \",\" + cos + \"\\n\";\n\t\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterCache.rotationRegisters[i] + \".y\\n\";\n\t\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterCache.rotationRegisters[i] + \".z\\n\";\n\t\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterCache.rotationRegisters[i] + \".y\\n\";\n\t\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterCache.rotationRegisters[i] + \".z\\n\";\n\t\t\t\tcode += \"sub \" + animationRegisterCache.rotationRegisters[i] + \".y,\" + R + \".x,\" + R + \".y\\n\";\n\t\t\t\tcode += \"add \" + animationRegisterCache.rotationRegisters[i] + \".z,\" + R + \".z,\" + R + \".w\\n\";\n\t\t\t\tcode += \"abs \" + R + \".y,\" + nrmDirection + \".y\\n\";\n\t\t\t\tcode += \"sge \" + R + \".z,\" + R + \".y,\" + animationRegisterCache.vertexOneConst + \"\\n\";\n\t\t\t\tcode += \"mul \" + R + \".x,\" + R + \".y,\" + nrmDirection + \".y\\n\";\n\t\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\t\tcode += \"dp3 \" + sin + \",\" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\n\t\t\t\tcode += \"sge \" + tempSingle + \",\" + animationRegisterCache.vertexZeroConst + \",\" + sin + \"\\n\";\n\t\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\n\t\t\t\tcode += \"sub \" + sin + \",\" + animationRegisterCache.vertexOneConst + \",\" + tempSingle + \"\\n\";\n\t\t\t\tcode += \"mul \" + sin + \",\" + sin + \",\" + nrmDirection + \".x\\n\";\n\t\t\t\tcode += \"mov \" + cos + \",\" + nrmDirection + \".z\\n\";\n\t\t\t\tcode += \"neg \" + cos + \",\" + cos + \"\\n\";\n\t\t\t\tcode += \"sub \" + o_temp + \",\" + animationRegisterCache.vertexOneConst + \",\" + cos + \"\\n\";\n\t\t\t\tcode += \"mul \" + o_temp + \",\" + R + \".x,\" + tempSingle + \"\\n\";\n\t\t\t\tcode += \"add \" + cos + \",\" + cos + \",\" + o_temp + \"\\n\";\n\t\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterCache.rotationRegisters[i] + \".x\\n\";\n\t\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterCache.rotationRegisters[i] + \".z\\n\";\n\t\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterCache.rotationRegisters[i] + \".x\\n\";\n\t\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterCache.rotationRegisters[i] + \".z\\n\";\n\t\t\t\tcode += \"sub \" + animationRegisterCache.rotationRegisters[i] + \".x,\" + R + \".x,\" + R + \".y\\n\";\n\t\t\t\tcode += \"add \" + animationRegisterCache.rotationRegisters[i] + \".z,\" + R + \".z,\" + R + \".w\\n\";\n\t\t\t}\n\t\t}\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleRotateToPositionState\n\t{\n\t\treturn <ParticleRotateToPositionState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar offset:Vector3D = param[ParticleRotateToPositionNode.POSITION_VECTOR3D];\n\t\tif (!offset)\n\t\t\tthrow(new Error(\"there is no \" + ParticleRotateToPositionNode.POSITION_VECTOR3D + \" in param!\"));\n\n\t\tthis._pOneData[0] = offset.x;\n\t\tthis._pOneData[1] = offset.y;\n\t\tthis._pOneData[2] = offset.z;\n\t}\n}\n\nexport = ParticleRotateToPositionNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleRotationalVelocityState\t= require(\"awayjs-renderergl/lib/animators/states/ParticleRotationalVelocityState\");\n\n/**\n * A particle animation node used to set the starting rotational velocity of a particle.\n */\nclass ParticleRotationalVelocityNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iRotationalVelocity:Vector3D;\n\n\t/**\n\t * Reference for rotational velocity node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the rotational velocity around an axis of the particle.\n\t */\n\tpublic static ROTATIONALVELOCITY_VECTOR3D:string = \"RotationalVelocityVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleRotationalVelocityNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t */\n\tconstructor(mode:number /*uint*/, rotationalVelocity:Vector3D = null)\n\t{\n\t\tsuper(\"ParticleRotationalVelocity\", mode, 4);\n\n\t\tthis._pStateClass = ParticleRotationalVelocityState;\n\n\t\tthis._iRotationalVelocity = rotationalVelocity || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar rotationRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleRotationalVelocityState.ROTATIONALVELOCITY_INDEX, rotationRegister.index);\n\n\t\tvar nrmVel:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tanimationRegisterCache.addVertexTempUsages(nrmVel, 1);\n\n\t\tvar xAxis:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tanimationRegisterCache.addVertexTempUsages(xAxis, 1);\n\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tanimationRegisterCache.addVertexTempUsages(temp, 1);\n\t\tvar Rtemp:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index);\n\t\tvar R_rev:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tR_rev = new ShaderRegisterElement(R_rev.regName, R_rev.index);\n\n\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(Rtemp.regName, Rtemp.index, 3);\n\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(R_rev.regName, R_rev.index, 3);\n\n\t\tanimationRegisterCache.removeVertexTempUsage(nrmVel);\n\t\tanimationRegisterCache.removeVertexTempUsage(xAxis);\n\t\tanimationRegisterCache.removeVertexTempUsage(temp);\n\n\t\tvar code:string = \"\";\n\t\tcode += \"mov \" + nrmVel + \".xyz,\" + rotationRegister + \".xyz\\n\";\n\t\tcode += \"mov \" + nrmVel + \".w,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\n\t\tcode += \"mul \" + cos + \",\" + animationRegisterCache.vertexTime + \",\" + rotationRegister + \".w\\n\";\n\n\t\tcode += \"sin \" + sin + \",\" + cos + \"\\n\";\n\t\tcode += \"cos \" + cos + \",\" + cos + \"\\n\";\n\n\t\tcode += \"mul \" + Rtemp + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\n\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\n\n\t\t//nrmVel and xAxis are used as temp register\n\t\tcode += \"crs \" + nrmVel + \".xyz,\" + Rtemp + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\n\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\tcode += \"dp3 \" + xAxis + \".w,\" + Rtemp + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz\\n\";\n\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\n\n\t\tcode += \"crs \" + Rtemp + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\n\n\t\t//use cos as R_rev.w\n\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\n\t\tcode += \"add \" + Rtemp + \".xyz,\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\n\n\t\tcode += \"add \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\n\n\t\tvar len:number /*int*/ = animationRegisterCache.rotationRegisters.length;\n\t\tfor (var i:number /*int*/ = 0; i < len; i++) {\n\t\t\tcode += \"mov \" + nrmVel + \".xyz,\" + rotationRegister + \".xyz\\n\";\n\t\t\tcode += \"mov \" + nrmVel + \".w,\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\tcode += \"mul \" + cos + \",\" + animationRegisterCache.vertexTime + \",\" + rotationRegister + \".w\\n\";\n\t\t\tcode += \"sin \" + sin + \",\" + cos + \"\\n\";\n\t\t\tcode += \"cos \" + cos + \",\" + cos + \"\\n\";\n\t\t\tcode += \"mul \" + Rtemp + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\t\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\n\t\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\n\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + Rtemp + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \".xyz\\n\";\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterCache.rotationRegisters[i] + \"\\n\";\n\t\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\tcode += \"dp3 \" + xAxis + \".w,\" + Rtemp + \".xyz,\" + animationRegisterCache.rotationRegisters[i] + \"\\n\";\n\t\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\n\t\t\tcode += \"crs \" + Rtemp + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\n\t\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\n\t\t\tcode += \"add \" + Rtemp + \".xyz,\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\n\t\t\tcode += \"add \" + animationRegisterCache.rotationRegisters[i] + \",\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleRotationalVelocityState\n\t{\n\t\treturn <ParticleRotationalVelocityState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\t//(Vector3d.x,Vector3d.y,Vector3d.z) is rotation axis,Vector3d.w is cycle duration\n\t\tvar rotate:Vector3D = param[ParticleRotationalVelocityNode.ROTATIONALVELOCITY_VECTOR3D];\n\t\tif (!rotate)\n\t\t\tthrow(new Error(\"there is no \" + ParticleRotationalVelocityNode.ROTATIONALVELOCITY_VECTOR3D + \" in param!\"));\n\n\t\tif (rotate.length <= 0)\n\t\t\trotate.z = 1; //set the default direction\n\t\telse\n\t\t\trotate.normalize();\n\n\t\tthis._pOneData[0] = rotate.x;\n\t\tthis._pOneData[1] = rotate.y;\n\t\tthis._pOneData[2] = rotate.z;\n\t\tif (rotate.w <= 0)\n\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\n\t\t// it's used as angle/2 in agal\n\t\tthis._pOneData[3] = Math.PI/rotate.w;\n\t}\n}\n\nexport = ParticleRotationalVelocityNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleScaleState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleScaleState\");\n\n/**\n * A particle animation node used to control the scale variation of a particle over time.\n */\nclass ParticleScaleNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iUsesCycle:boolean;\n\n\t/** @private */\n\tpublic _iUsesPhase:boolean;\n\n\t/** @private */\n\tpublic _iMinScale:number;\n\t/** @private */\n\tpublic _iMaxScale:number;\n\t/** @private */\n\tpublic _iCycleDuration:number;\n\t/** @private */\n\tpublic _iCyclePhase:number;\n\n\t/**\n\t * Reference for scale node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> representing the min scale (x), max scale(y), optional cycle speed (z) and phase offset (w) applied to the particle.\n\t */\n\tpublic static SCALE_VECTOR3D:string = \"ScaleVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleScaleNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] usesCycle       Defines whether the node uses the <code>cycleDuration</code> property in the shader to calculate the period of animation independent of particle duration. Defaults to false.\n\t * @param    [optional] usesPhase       Defines whether the node uses the <code>cyclePhase</code> property in the shader to calculate a starting offset to the animation cycle. Defaults to false.\n\t * @param    [optional] minScale        Defines the default min scale transform of the node, when in global mode. Defaults to 1.\n\t * @param    [optional] maxScale        Defines the default max color transform of the node, when in global mode. Defaults to 1.\n\t * @param    [optional] cycleDuration   Defines the default duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\n\t * @param    [optional] cyclePhase      Defines the default phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\n\t */\n\tconstructor(mode:number /*uint*/, usesCycle:boolean, usesPhase:boolean, minScale:number = 1, maxScale:number = 1, cycleDuration:number = 1, cyclePhase:number = 0)\n\t{\n\t\tsuper(\"ParticleScale\", mode, (usesCycle && usesPhase)? 4 : ((usesCycle || usesPhase)? 3 : 2), 3);\n\n\t\tthis._pStateClass = ParticleScaleState;\n\n\t\tthis._iUsesCycle = usesCycle;\n\t\tthis._iUsesPhase = usesPhase;\n\n\t\tthis._iMinScale = minScale;\n\t\tthis._iMaxScale = maxScale;\n\t\tthis._iCycleDuration = cycleDuration;\n\t\tthis._iCyclePhase = cyclePhase;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar code:string = \"\";\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexSingleTemp();\n\n\t\tvar scaleRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleScaleState.SCALE_INDEX, scaleRegister.index);\n\n\t\tif (this._iUsesCycle) {\n\t\t\tcode += \"mul \" + temp + \",\" + animationRegisterCache.vertexTime + \",\" + scaleRegister + \".z\\n\";\n\n\t\t\tif (this._iUsesPhase)\n\t\t\t\tcode += \"add \" + temp + \",\" + temp + \",\" + scaleRegister + \".w\\n\";\n\n\t\t\tcode += \"sin \" + temp + \",\" + temp + \"\\n\";\n\t\t}\n\n\t\tcode += \"mul \" + temp + \",\" + scaleRegister + \".y,\" + ((this._iUsesCycle)? temp : animationRegisterCache.vertexLife) + \"\\n\";\n\t\tcode += \"add \" + temp + \",\" + scaleRegister + \".x,\" + temp + \"\\n\";\n\t\tcode += \"mul \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp + \"\\n\";\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleScaleState\n\t{\n\t\treturn <ParticleScaleState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar scale:Vector3D = param[ParticleScaleNode.SCALE_VECTOR3D];\n\t\tif (!scale)\n\t\t\tthrow(new Error(\"there is no \" + ParticleScaleNode.SCALE_VECTOR3D + \" in param!\"));\n\n\t\tif (this._iUsesCycle) {\n\t\t\tthis._pOneData[0] = (scale.x + scale.y)/2;\n\t\t\tthis._pOneData[1] = Math.abs(scale.x - scale.y)/2;\n\t\t\tif (scale.z <= 0)\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\n\t\t\tthis._pOneData[2] = Math.PI*2/scale.z;\n\t\t\tif (this._iUsesPhase)\n\t\t\t\tthis._pOneData[3] = scale.w*Math.PI/180;\n\t\t} else {\n\t\t\tthis._pOneData[0] = scale.x;\n\t\t\tthis._pOneData[1] = scale.y - scale.x;\n\t\t}\n\t}\n}\n\nexport = ParticleScaleNode;",
    "import ColorTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ColorSegmentPoint\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ColorSegmentPoint\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleSegmentedColorState\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleSegmentedColorState\");\n\n/**\n *\n */\nclass ParticleSegmentedColorNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iUsesMultiplier:boolean;\n\t/** @private */\n\tpublic _iUsesOffset:boolean;\n\t/** @private */\n\tpublic _iStartColor:ColorTransform;\n\t/** @private */\n\tpublic _iEndColor:ColorTransform;\n\t/** @private */\n\tpublic _iNumSegmentPoint:number /*int*/;\n\t/** @private */\n\tpublic _iSegmentPoints:Array<ColorSegmentPoint>;\n\n\tconstructor(usesMultiplier:boolean, usesOffset:boolean, numSegmentPoint:number /*int*/, startColor:ColorTransform, endColor:ColorTransform, segmentPoints:Array<ColorSegmentPoint>)\n\t{\n\t\t//because of the stage3d register limitation, it only support the global mode\n\t\tsuper(\"ParticleSegmentedColor\", ParticlePropertiesMode.GLOBAL, 0, ParticleAnimationSet.COLOR_PRIORITY);\n\n\t\tthis._pStateClass = ParticleSegmentedColorState;\n\n\t\tif (numSegmentPoint > 4)\n\t\t\tthrow(new Error(\"the numSegmentPoint must be less or equal 4\"));\n\t\tthis._iUsesMultiplier = usesMultiplier;\n\t\tthis._iUsesOffset = usesOffset;\n\t\tthis._iNumSegmentPoint = numSegmentPoint;\n\t\tthis._iStartColor = startColor;\n\t\tthis._iEndColor = endColor;\n\t\tthis._iSegmentPoints = segmentPoints;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tif (this._iUsesMultiplier)\n\t\t\tparticleAnimationSet.hasColorMulNode = true;\n\t\tif (this._iUsesOffset)\n\t\t\tparticleAnimationSet.hasColorAddNode = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar code:string = \"\";\n\t\tif (animationRegisterCache.needFragmentAnimation) {\n\t\t\tvar accMultiplierColor:ShaderRegisterElement;\n\t\t\t//var accOffsetColor:ShaderRegisterElement;\n\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\taccMultiplierColor = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\t\tanimationRegisterCache.addVertexTempUsages(accMultiplierColor, 1);\n\t\t\t}\n\n\t\t\tvar tempColor:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tanimationRegisterCache.addVertexTempUsages(tempColor, 1);\n\n\t\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\t\tvar accTime:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\n\t\t\tvar tempTime:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\n\n\t\t\tif (this._iUsesMultiplier)\n\t\t\t\tanimationRegisterCache.removeVertexTempUsage(accMultiplierColor);\n\n\t\t\tanimationRegisterCache.removeVertexTempUsage(tempColor);\n\n\t\t\t//for saving all the life values (at most 4)\n\t\t\tvar lifeTimeRegister:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleSegmentedColorState.TIME_DATA_INDEX, lifeTimeRegister.index);\n\n\t\t\tvar i:number /*int*/;\n\n\t\t\tvar startMulValue:ShaderRegisterElement;\n\t\t\tvar deltaMulValues:Array<ShaderRegisterElement>;\n\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\tstartMulValue = animationRegisterCache.getFreeVertexConstant();\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleSegmentedColorState.START_MULTIPLIER_INDEX, startMulValue.index);\n\t\t\t\tdeltaMulValues = new Array<ShaderRegisterElement>();\n\t\t\t\tfor (i = 0; i < this._iNumSegmentPoint + 1; i++)\n\t\t\t\t\tdeltaMulValues.push(animationRegisterCache.getFreeVertexConstant());\n\t\t\t}\n\n\t\t\tvar startOffsetValue:ShaderRegisterElement;\n\t\t\tvar deltaOffsetValues:Array<ShaderRegisterElement>;\n\t\t\tif (this._iUsesOffset) {\n\t\t\t\tstartOffsetValue = animationRegisterCache.getFreeVertexConstant();\n\t\t\t\tanimationRegisterCache.setRegisterIndex(this, ParticleSegmentedColorState.START_OFFSET_INDEX, startOffsetValue.index);\n\t\t\t\tdeltaOffsetValues = new Array<ShaderRegisterElement>();\n\t\t\t\tfor (i = 0; i < this._iNumSegmentPoint + 1; i++)\n\t\t\t\t\tdeltaOffsetValues.push(animationRegisterCache.getFreeVertexConstant());\n\t\t\t}\n\n\t\t\tif (this._iUsesMultiplier)\n\t\t\t\tcode += \"mov \" + accMultiplierColor + \",\" + startMulValue + \"\\n\";\n\t\t\tif (this._iUsesOffset)\n\t\t\t\tcode += \"add \" + animationRegisterCache.colorAddTarget + \",\" + animationRegisterCache.colorAddTarget + \",\" + startOffsetValue + \"\\n\";\n\n\t\t\tfor (i = 0; i < this._iNumSegmentPoint; i++) {\n\t\t\t\tswitch (i) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + animationRegisterCache.vertexLife + \",\" + lifeTimeRegister + \".x\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + animationRegisterCache.vertexLife + \",\" + lifeTimeRegister + \".x\\n\";\n\t\t\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + tempTime + \",\" + lifeTimeRegister + \".y\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".y\\n\";\n\t\t\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + tempTime + \",\" + lifeTimeRegister + \".z\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".z\\n\";\n\t\t\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + tempTime + \",\" + lifeTimeRegister + \".w\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaMulValues[i] + \"\\n\";\n\t\t\t\t\tcode += \"add \" + accMultiplierColor + \",\" + accMultiplierColor + \",\" + tempColor + \"\\n\";\n\t\t\t\t}\n\t\t\t\tif (this._iUsesOffset) {\n\t\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaOffsetValues[i] + \"\\n\";\n\t\t\t\t\tcode += \"add \" + animationRegisterCache.colorAddTarget + \",\" + animationRegisterCache.colorAddTarget + \",\" + tempColor + \"\\n\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//for the last segment:\n\t\t\tif (this._iNumSegmentPoint == 0)\n\t\t\t\ttempTime = animationRegisterCache.vertexLife;\n\t\t\telse {\n\t\t\t\tswitch (this._iNumSegmentPoint) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + animationRegisterCache.vertexLife + \",\" + lifeTimeRegister + \".x\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".y\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".z\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".w\\n\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\t\t}\n\t\t\tif (this._iUsesMultiplier) {\n\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaMulValues[this._iNumSegmentPoint] + \"\\n\";\n\t\t\t\tcode += \"add \" + accMultiplierColor + \",\" + accMultiplierColor + \",\" + tempColor + \"\\n\";\n\t\t\t\tcode += \"mul \" + animationRegisterCache.colorMulTarget + \",\" + animationRegisterCache.colorMulTarget + \",\" + accMultiplierColor + \"\\n\";\n\t\t\t}\n\t\t\tif (this._iUsesOffset) {\n\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaOffsetValues[this._iNumSegmentPoint] + \"\\n\";\n\t\t\t\tcode += \"add \" + animationRegisterCache.colorAddTarget + \",\" + animationRegisterCache.colorAddTarget + \",\" + tempColor + \"\\n\";\n\t\t\t}\n\n\t\t}\n\t\treturn code;\n\t}\n\n}\n\nexport = ParticleSegmentedColorNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleSpriteSheetState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleSpriteSheetState\");\n\n/**\n * A particle animation node used when a spritesheet texture is required to animate the particle.\n * NB: to enable use of this node, the <code>repeat</code> property on the material has to be set to true.\n */\nclass ParticleSpriteSheetNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iUsesCycle:boolean;\n\n\t/** @private */\n\tpublic _iUsesPhase:boolean;\n\n\t/** @private */\n\tpublic _iTotalFrames:number /*int*/;\n\t/** @private */\n\tpublic _iNumColumns:number /*int*/;\n\t/** @private */\n\tpublic _iNumRows:number /*int*/;\n\t/** @private */\n\tpublic _iCycleDuration:number;\n\t/** @private */\n\tpublic _iCyclePhase:number;\n\n\t/**\n\t * Reference for spritesheet node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> representing the cycleDuration (x), optional phaseTime (y).\n\t */\n\tpublic static UV_VECTOR3D:string = \"UVVector3D\";\n\n\t/**\n\t * Defines the number of columns in the spritesheet, when in global mode. Defaults to 1. Read only.\n\t */\n\tpublic get numColumns():number\n\t{\n\t\treturn this._iNumColumns;\n\t}\n\n\t/**\n\t * Defines the number of rows in the spritesheet, when in global mode. Defaults to 1. Read only.\n\t */\n\tpublic get numRows():number\n\t{\n\t\treturn this._iNumRows;\n\t}\n\n\t/**\n\t * Defines the total number of frames used by the spritesheet, when in global mode. Defaults to the number defined by numColumns and numRows. Read only.\n\t */\n\tpublic get totalFrames():number\n\t{\n\t\treturn this._iTotalFrames;\n\t}\n\n\t/**\n\t * Creates a new <code>ParticleSpriteSheetNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] numColumns      Defines the number of columns in the spritesheet, when in global mode. Defaults to 1.\n\t * @param    [optional] numRows         Defines the number of rows in the spritesheet, when in global mode. Defaults to 1.\n\t * @param    [optional] cycleDuration   Defines the default cycle duration in seconds, when in global mode. Defaults to 1.\n\t * @param    [optional] cyclePhase      Defines the default cycle phase, when in global mode. Defaults to 0.\n\t * @param    [optional] totalFrames     Defines the total number of frames used by the spritesheet, when in global mode. Defaults to the number defined by numColumns and numRows.\n\t * @param    [optional] looping         Defines whether the spritesheet animation is set to loop indefinitely. Defaults to true.\n\t */\n\tconstructor(mode:number /*uint*/, usesCycle:boolean, usesPhase:boolean, numColumns:number /*int*/ = 1, numRows:number /*uint*/ = 1, cycleDuration:number = 1, cyclePhase:number = 0, totalFrames:number /*uint*/ = Number.MAX_VALUE)\n\t{\n\t\tsuper(\"ParticleSpriteSheet\", mode, usesCycle? (usesPhase? 3 : 2) : 1, ParticleAnimationSet.POST_PRIORITY + 1);\n\n\t\tthis._pStateClass = ParticleSpriteSheetState;\n\n\t\tthis._iUsesCycle = usesCycle;\n\t\tthis._iUsesPhase = usesPhase;\n\n\t\tthis._iNumColumns = numColumns;\n\t\tthis._iNumRows = numRows;\n\t\tthis._iCyclePhase = cyclePhase;\n\t\tthis._iCycleDuration = cycleDuration;\n\t\tthis._iTotalFrames = Math.min(totalFrames, numColumns*numRows);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALUVCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\t//get 2 vc\n\t\tvar uvParamConst1:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\tvar uvParamConst2:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleSpriteSheetState.UV_INDEX_0, uvParamConst1.index);\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleSpriteSheetState.UV_INDEX_1, uvParamConst2.index);\n\n\t\tvar uTotal:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst1.regName, uvParamConst1.index, 0);\n\t\tvar uStep:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst1.regName, uvParamConst1.index, 1);\n\t\tvar vStep:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst1.regName, uvParamConst1.index, 2);\n\n\t\tvar uSpeed:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst2.regName, uvParamConst2.index, 0);\n\t\tvar cycle:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst2.regName, uvParamConst2.index, 1);\n\t\tvar phaseTime:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst2.regName, uvParamConst2.index, 2);\n\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tvar time:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\n\t\tvar vOffset:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\n\t\ttemp = new ShaderRegisterElement(temp.regName, temp.index, 2);\n\t\tvar temp2:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 3);\n\n\t\tvar u:ShaderRegisterElement = new ShaderRegisterElement(animationRegisterCache.uvTarget.regName, animationRegisterCache.uvTarget.index, 0);\n\t\tvar v:ShaderRegisterElement = new ShaderRegisterElement(animationRegisterCache.uvTarget.regName, animationRegisterCache.uvTarget.index, 1);\n\n\t\tvar code:string = \"\";\n\t\t//scale uv\n\t\tcode += \"mul \" + u + \",\" + u + \",\" + uStep + \"\\n\";\n\t\tif (this._iNumRows > 1)\n\t\t\tcode += \"mul \" + v + \",\" + v + \",\" + vStep + \"\\n\";\n\n\t\tif (this._iUsesCycle) {\n\t\t\tif (this._iUsesPhase)\n\t\t\t\tcode += \"add \" + time + \",\" + animationRegisterCache.vertexTime + \",\" + phaseTime + \"\\n\";\n\t\t\telse\n\t\t\t\tcode += \"mov \" + time + \",\" + animationRegisterCache.vertexTime + \"\\n\";\n\t\t\tcode += \"div \" + time + \",\" + time + \",\" + cycle + \"\\n\";\n\t\t\tcode += \"frc \" + time + \",\" + time + \"\\n\";\n\t\t\tcode += \"mul \" + time + \",\" + time + \",\" + cycle + \"\\n\";\n\t\t\tcode += \"mul \" + temp + \",\" + time + \",\" + uSpeed + \"\\n\";\n\t\t} else\n\t\t\tcode += \"mul \" + temp.toString() + \",\" + animationRegisterCache.vertexLife + \",\" + uTotal + \"\\n\";\n\n\t\tif (this._iNumRows > 1) {\n\t\t\tcode += \"frc \" + temp2 + \",\" + temp + \"\\n\";\n\t\t\tcode += \"sub \" + vOffset + \",\" + temp + \",\" + temp2 + \"\\n\";\n\t\t\tcode += \"mul \" + vOffset + \",\" + vOffset + \",\" + vStep + \"\\n\";\n\t\t\tcode += \"add \" + v + \",\" + v + \",\" + vOffset + \"\\n\";\n\t\t}\n\n\t\tcode += \"div \" + temp2 + \",\" + temp + \",\" + uStep + \"\\n\";\n\t\tcode += \"frc \" + temp + \",\" + temp2 + \"\\n\";\n\t\tcode += \"sub \" + temp2 + \",\" + temp2 + \",\" + temp + \"\\n\";\n\t\tcode += \"mul \" + temp + \",\" + temp2 + \",\" + uStep + \"\\n\";\n\n\t\tif (this._iNumRows > 1)\n\t\t\tcode += \"frc \" + temp + \",\" + temp + \"\\n\";\n\t\tcode += \"add \" + u + \",\" + u + \",\" + temp + \"\\n\";\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleSpriteSheetState\n\t{\n\t\treturn <ParticleSpriteSheetState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tparticleAnimationSet.hasUVNode = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tif (this._iUsesCycle) {\n\t\t\tvar uvCycle:Vector3D = param[ParticleSpriteSheetNode.UV_VECTOR3D];\n\t\t\tif (!uvCycle)\n\t\t\t\tthrow(new Error(\"there is no \" + ParticleSpriteSheetNode.UV_VECTOR3D + \" in param!\"));\n\t\t\tif (uvCycle.x <= 0)\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\n\t\t\tvar uTotal:number = this._iTotalFrames/this._iNumColumns;\n\t\t\tthis._pOneData[0] = uTotal/uvCycle.x;\n\t\t\tthis._pOneData[1] = uvCycle.x;\n\t\t\tif (this._iUsesPhase)\n\t\t\t\tthis._pOneData[2] = uvCycle.y;\n\t\t}\n\t}\n}\n\nexport = ParticleSpriteSheetNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleTimeState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleTimeState\");\n\n/**\n * A particle animation node used as the base node for timekeeping inside a particle. Automatically added to a particle animation set on instatiation.\n */\nclass ParticleTimeNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iUsesDuration:boolean;\n\t/** @private */\n\tpublic _iUsesDelay:boolean;\n\t/** @private */\n\tpublic _iUsesLooping:boolean;\n\n\t/**\n\t * Creates a new <code>ParticleTimeNode</code>\n\t *\n\t * @param    [optional] usesDuration    Defines whether the node uses the <code>duration</code> data in the static properties to determine how long a particle is visible for. Defaults to false.\n\t * @param    [optional] usesDelay       Defines whether the node uses the <code>delay</code> data in the static properties to determine how long a particle is hidden for. Defaults to false. Requires <code>usesDuration</code> to be true.\n\t * @param    [optional] usesLooping     Defines whether the node creates a looping timeframe for each particle determined by the <code>startTime</code>, <code>duration</code> and <code>delay</code> data in the static properties function. Defaults to false. Requires <code>usesLooping</code> to be true.\n\t */\n\tconstructor(usesDuration:boolean = false, usesLooping:boolean = false, usesDelay:boolean = false)\n\t{\n\t\tthis._pStateClass = ParticleTimeState;\n\n\t\tthis._iUsesDuration = usesDuration;\n\t\tthis._iUsesLooping = usesLooping;\n\t\tthis._iUsesDelay = usesDelay;\n\n\t\tsuper(\"ParticleTime\", ParticlePropertiesMode.LOCAL_STATIC, 4, 0);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar timeStreamRegister:ShaderRegisterElement = animationRegisterCache.getFreeVertexAttribute(); //timeStreamRegister.x is start，timeStreamRegister.y is during time\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleTimeState.TIME_STREAM_INDEX, timeStreamRegister.index);\n\t\tvar timeConst:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleTimeState.TIME_CONSTANT_INDEX, timeConst.index);\n\n\t\tvar code:string = \"\";\n\t\tcode += \"sub \" + animationRegisterCache.vertexTime + \",\" + timeConst + \",\" + timeStreamRegister + \".x\\n\";\n\t\t//if time=0,set the position to zero.\n\t\tvar temp:ShaderRegisterElement = animationRegisterCache.getFreeVertexSingleTemp();\n\t\tcode += \"sge \" + temp + \",\" + animationRegisterCache.vertexTime + \",\" + animationRegisterCache.vertexZeroConst + \"\\n\";\n\t\tcode += \"mul \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + temp + \"\\n\";\n\t\tif (this._iUsesDuration) {\n\t\t\tif (this._iUsesLooping) {\n\t\t\t\tvar div:ShaderRegisterElement = animationRegisterCache.getFreeVertexSingleTemp();\n\t\t\t\tif (this._iUsesDelay) {\n\t\t\t\t\tcode += \"div \" + div + \",\" + animationRegisterCache.vertexTime + \",\" + timeStreamRegister + \".z\\n\";\n\t\t\t\t\tcode += \"frc \" + div + \",\" + div + \"\\n\";\n\t\t\t\t\tcode += \"mul \" + animationRegisterCache.vertexTime + \",\" + div + \",\" + timeStreamRegister + \".z\\n\";\n\t\t\t\t\tcode += \"slt \" + div + \",\" + animationRegisterCache.vertexTime + \",\" + timeStreamRegister + \".y\\n\";\n\t\t\t\t\tcode += \"mul \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + div + \"\\n\";\n\t\t\t\t} else {\n\t\t\t\t\tcode += \"mul \" + div + \",\" + animationRegisterCache.vertexTime + \",\" + timeStreamRegister + \".w\\n\";\n\t\t\t\t\tcode += \"frc \" + div + \",\" + div + \"\\n\";\n\t\t\t\t\tcode += \"mul \" + animationRegisterCache.vertexTime + \",\" + div + \",\" + timeStreamRegister + \".y\\n\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar sge:ShaderRegisterElement = animationRegisterCache.getFreeVertexSingleTemp();\n\t\t\t\tcode += \"sge \" + sge + \",\" + timeStreamRegister + \".y,\" + animationRegisterCache.vertexTime + \"\\n\";\n\t\t\t\tcode += \"mul \" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + animationRegisterCache.scaleAndRotateTarget + \".xyz,\" + sge + \"\\n\";\n\t\t\t}\n\t\t}\n\t\tcode += \"mul \" + animationRegisterCache.vertexLife + \",\" + animationRegisterCache.vertexTime + \",\" + timeStreamRegister + \".w\\n\";\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleTimeState\n\t{\n\t\treturn <ParticleTimeState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tthis._pOneData[0] = param.startTime;\n\t\tthis._pOneData[1] = param.duration;\n\t\tthis._pOneData[2] = param.delay + param.duration;\n\t\tthis._pOneData[3] = 1/param.duration;\n\n\t}\n}\n\nexport = ParticleTimeNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleAnimationSet\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimationSet\");\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleUVState\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleUVState\");\n\n/**\n * A particle animation node used to control the UV offset and scale of a particle over time.\n */\nclass ParticleUVNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iUvData:Vector3D;\n\n\t/**\n\t *\n\t */\n\tpublic static U_AXIS:string = \"x\";\n\n\t/**\n\t *\n\t */\n\tpublic static V_AXIS:string = \"y\";\n\n\tprivate _cycle:number;\n\tprivate _scale:number;\n\tprivate _axis:string;\n\n\t/**\n\t * Creates a new <code>ParticleTimeNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] cycle           Defines whether the time track is in loop mode. Defaults to false.\n\t * @param    [optional] scale           Defines whether the time track is in loop mode. Defaults to false.\n\t * @param    [optional] axis            Defines whether the time track is in loop mode. Defaults to false.\n\t */\n\tconstructor(mode:number /*uint*/, cycle:number = 1, scale:number = 1, axis:string = \"x\")\n\t{\n\t\t//because of the stage3d register limitation, it only support the global mode\n\t\tsuper(\"ParticleUV\", ParticlePropertiesMode.GLOBAL, 4, ParticleAnimationSet.POST_PRIORITY + 1);\n\n\t\tthis._pStateClass = ParticleUVState;\n\n\t\tthis._cycle = cycle;\n\t\tthis._scale = scale;\n\t\tthis._axis = axis;\n\n\t\tthis.updateUVData();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get cycle():number\n\t{\n\t\treturn this._cycle;\n\t}\n\n\tpublic set cycle(value:number)\n\t{\n\t\tthis._cycle = value;\n\n\t\tthis.updateUVData();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get scale():number\n\t{\n\t\treturn this._scale;\n\t}\n\n\tpublic set scale(value:number)\n\t{\n\t\tthis._scale = value;\n\n\t\tthis.updateUVData();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic get axis():string\n\t{\n\t\treturn this._axis;\n\t}\n\n\tpublic set axis(value:string)\n\t{\n\t\tthis._axis = value;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALUVCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar code:string = \"\";\n\n\t\tvar uvConst:ShaderRegisterElement = animationRegisterCache.getFreeVertexConstant();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleUVState.UV_INDEX, uvConst.index);\n\n\t\tvar axisIndex:number = this._axis == \"x\"? 0 : (this._axis == \"y\"? 1 : 2);\n\n\t\tvar target:ShaderRegisterElement = new ShaderRegisterElement(animationRegisterCache.uvTarget.regName, animationRegisterCache.uvTarget.index, axisIndex);\n\n\t\tvar sin:ShaderRegisterElement = animationRegisterCache.getFreeVertexSingleTemp();\n\n\t\tif (this._scale != 1)\n\t\t\tcode += \"mul \" + target + \",\" + target + \",\" + uvConst + \".y\\n\";\n\n\t\tcode += \"mul \" + sin + \",\" + animationRegisterCache.vertexTime + \",\" + uvConst + \".x\\n\";\n\t\tcode += \"sin \" + sin + \",\" + sin + \"\\n\";\n\t\tcode += \"add \" + target + \",\" + target + \",\" + sin + \"\\n\";\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleUVState\n\t{\n\t\treturn <ParticleUVState> animator.getAnimationState(this);\n\t}\n\n\tprivate updateUVData()\n\t{\n\t\tthis._iUvData = new Vector3D(Math.PI*2/this._cycle, this._scale, 0, 0);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet)\n\t{\n\t\tparticleAnimationSet.hasUVNode = true;\n\t}\n}\n\nexport = ParticleUVNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport ShaderBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterElement\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\nimport ParticleProperties\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleProperties\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleVelocityState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleVelocityState\");\n\n/**\n * A particle animation node used to set the starting velocity of a particle.\n */\nclass ParticleVelocityNode extends ParticleNodeBase\n{\n\t/** @private */\n\tpublic _iVelocity:Vector3D;\n\n\t/**\n\t * Reference for velocity node properties on a single particle (when in local property mode).\n\t * Expects a <code>Vector3D</code> object representing the direction of movement on the particle.\n\t */\n\tpublic static VELOCITY_VECTOR3D:string = \"VelocityVector3D\";\n\n\t/**\n\t * Creates a new <code>ParticleVelocityNode</code>\n\t *\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\n\t * @param    [optional] velocity        Defines the default velocity vector of the node, used when in global mode.\n\t */\n\tconstructor(mode:number /*uint*/, velocity:Vector3D = null)\n\t{\n\t\tsuper(\"ParticleVelocity\", mode, 3);\n\n\t\tthis._pStateClass = ParticleVelocityState;\n\n\t\tthis._iVelocity = velocity || new Vector3D();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAGALVertexCode(shader:ShaderBase, animationRegisterCache:AnimationRegisterCache):string\n\t{\n\t\tvar velocityValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? animationRegisterCache.getFreeVertexConstant() : animationRegisterCache.getFreeVertexAttribute();\n\t\tanimationRegisterCache.setRegisterIndex(this, ParticleVelocityState.VELOCITY_INDEX, velocityValue.index);\n\n\t\tvar distance:ShaderRegisterElement = animationRegisterCache.getFreeVertexVectorTemp();\n\t\tvar code:string = \"\";\n\t\tcode += \"mul \" + distance + \",\" + animationRegisterCache.vertexTime + \",\" + velocityValue + \"\\n\";\n\t\tcode += \"add \" + animationRegisterCache.positionTarget + \".xyz,\" + distance + \",\" + animationRegisterCache.positionTarget + \".xyz\\n\";\n\n\t\tif (animationRegisterCache.needVelocity)\n\t\t\tcode += \"add \" + animationRegisterCache.velocityTarget + \".xyz,\" + velocityValue + \".xyz,\" + animationRegisterCache.velocityTarget + \".xyz\\n\";\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):ParticleVelocityState\n\t{\n\t\treturn <ParticleVelocityState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties)\n\t{\n\t\tvar _tempVelocity:Vector3D = param[ParticleVelocityNode.VELOCITY_VECTOR3D];\n\t\tif (!_tempVelocity)\n\t\t\tthrow new Error(\"there is no \" + ParticleVelocityNode.VELOCITY_VECTOR3D + \" in param!\");\n\n\t\tthis._pOneData[0] = _tempVelocity.x;\n\t\tthis._pOneData[1] = _tempVelocity.y;\n\t\tthis._pOneData[2] = _tempVelocity.z;\n\t}\n}\n\nexport = ParticleVelocityNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\nimport SkeletonBinaryLERPState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState\");\n\n/**\n * A skeleton animation node that uses two animation node inputs to blend a lineraly interpolated output of a skeleton pose.\n */\nclass SkeletonBinaryLERPNode extends AnimationNodeBase\n{\n\t/**\n\t * Defines input node A to use for the blended output.\n\t */\n\tpublic inputA:AnimationNodeBase;\n\n\t/**\n\t * Defines input node B to use for the blended output.\n\t */\n\tpublic inputB:AnimationNodeBase;\n\n\t/**\n\t * Creates a new <code>SkeletonBinaryLERPNode</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._pStateClass = SkeletonBinaryLERPState;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonBinaryLERPState\n\t{\n\t\treturn <SkeletonBinaryLERPState> animator.getAnimationState(this);\n\t}\n}\n\nexport = SkeletonBinaryLERPNode;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\nimport SkeletonPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonPose\");\nimport AnimationClipNodeBase\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase\");\nimport SkeletonClipState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/SkeletonClipState\");\n\n/**\n * A skeleton animation node containing time-based animation data as individual skeleton poses.\n */\nclass SkeletonClipNode extends AnimationClipNodeBase\n{\n\tprivate _frames:Array<SkeletonPose> = new Array<SkeletonPose>();\n\n\t/**\n\t * Determines whether to use SLERP equations (true) or LERP equations (false) in the calculation\n\t * of the output skeleton pose. Defaults to false.\n\t */\n\tpublic highQuality:boolean = false;\n\n\t/**\n\t * Returns a vector of skeleton poses representing the pose of each animation frame in the clip.\n\t */\n\tpublic get frames():Array<SkeletonPose>\n\t{\n\t\treturn this._frames;\n\t}\n\n\t/**\n\t * Creates a new <code>SkeletonClipNode</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._pStateClass = SkeletonClipState;\n\t}\n\n\t/**\n\t * Adds a skeleton pose frame to the internal timeline of the animation node.\n\t *\n\t * @param skeletonPose The skeleton pose object to add to the timeline of the node.\n\t * @param duration The specified duration of the frame in milliseconds.\n\t */\n\tpublic addFrame(skeletonPose:SkeletonPose, duration:number /*number /*uint*/)\n\t{\n\t\tthis._frames.push(skeletonPose);\n\t\tthis._pDurations.push(duration);\n\n\t\tthis._pNumFrames = this._pDurations.length;\n\n\t\tthis._pStitchDirty = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonClipState\n\t{\n\t\treturn <SkeletonClipState> animator.getAnimationState(this);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateStitch()\n\t{\n\t\tsuper._pUpdateStitch();\n\n\t\tvar i:number /*uint*/ = this._pNumFrames - 1;\n\t\tvar p1:Vector3D, p2:Vector3D, delta:Vector3D;\n\t\twhile (i--) {\n\t\t\tthis._pTotalDuration += this._pDurations[i];\n\t\t\tp1 = this._frames[i].jointPoses[0].translation;\n\t\t\tp2 = this._frames[i + 1].jointPoses[0].translation;\n\t\t\tdelta = p2.subtract(p1);\n\t\t\tthis._pTotalDelta.x += delta.x;\n\t\t\tthis._pTotalDelta.y += delta.y;\n\t\t\tthis._pTotalDelta.z += delta.z;\n\t\t}\n\n\t\tif (this._pStitchFinalFrame || !this._pLooping) {\n\t\t\tthis._pTotalDuration += this._pDurations[this._pNumFrames - 1];\n\t\t\tp1 = this._frames[0].jointPoses[0].translation;\n\t\t\tp2 = this._frames[1].jointPoses[0].translation;\n\t\t\tdelta = p2.subtract(p1);\n\t\t\tthis._pTotalDelta.x += delta.x;\n\t\t\tthis._pTotalDelta.y += delta.y;\n\t\t\tthis._pTotalDelta.z += delta.z;\n\t\t}\n\t}\n}\n\nexport = SkeletonClipNode;",
    "import AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\nimport SkeletonDifferenceState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/SkeletonDifferenceState\");\n\n/**\n * A skeleton animation node that uses a difference input pose with a base input pose to blend a linearly interpolated output of a skeleton pose.\n */\nclass SkeletonDifferenceNode extends AnimationNodeBase\n{\n\t/**\n\t * Defines a base input node to use for the blended output.\n\t */\n\tpublic baseInput:AnimationNodeBase;\n\n\t/**\n\t * Defines a difference input node to use for the blended output.\n\t */\n\tpublic differenceInput:AnimationNodeBase;\n\n\t/**\n\t * Creates a new <code>SkeletonAdditiveNode</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._pStateClass = SkeletonDifferenceState;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonDifferenceState\n\t{\n\t\treturn <SkeletonDifferenceState> animator.getAnimationState(this);\n\t}\n}\n\nexport = SkeletonDifferenceNode",
    "import AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\nimport SkeletonDirectionalState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/SkeletonDirectionalState\");\n\n/**\n * A skeleton animation node that uses four directional input poses with an input direction to blend a linearly interpolated output of a skeleton pose.\n */\nclass SkeletonDirectionalNode extends AnimationNodeBase\n{\n\t/**\n\t * Defines the forward configured input node to use for the blended output.\n\t */\n\tpublic forward:AnimationNodeBase;\n\n\t/**\n\t * Defines the backwards configured input node to use for the blended output.\n\t */\n\tpublic backward:AnimationNodeBase;\n\n\t/**\n\t * Defines the left configured input node to use for the blended output.\n\t */\n\tpublic left:AnimationNodeBase;\n\n\t/**\n\t * Defines the right configured input node to use for the blended output.\n\t */\n\tpublic right:AnimationNodeBase;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._pStateClass = SkeletonDirectionalState;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonDirectionalState\n\t{\n\t\treturn <SkeletonDirectionalState> animator.getAnimationState(this);\n\t}\n\n}\n\nexport = SkeletonDirectionalNode;",
    "import AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\nimport SkeletonNaryLERPState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/SkeletonNaryLERPState\");\n\n/**\n * A skeleton animation node that uses an n-dimensional array of animation node inputs to blend a lineraly interpolated output of a skeleton pose.\n */\nclass SkeletonNaryLERPNode extends AnimationNodeBase\n{\n\tpublic _iInputs:Array<AnimationNodeBase> = new Array<AnimationNodeBase>();\n\n\tprivate _numInputs:number /*uint*/;\n\n\tpublic get numInputs():number /*uint*/\n\t{\n\t\treturn this._numInputs;\n\t}\n\n\t/**\n\t * Creates a new <code>SkeletonNaryLERPNode</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._pStateClass = SkeletonNaryLERPState;\n\t}\n\n\t/**\n\t * Returns an integer representing the input index of the given skeleton animation node.\n\t *\n\t * @param input The skeleton animation node for with the input index is requested.\n\t */\n\tpublic getInputIndex(input:AnimationNodeBase):number /*int*/\n\t{\n\t\treturn this._iInputs.indexOf(input);\n\t}\n\n\t/**\n\t * Returns the skeleton animation node object that resides at the given input index.\n\t *\n\t * @param index The input index for which the skeleton animation node is requested.\n\t */\n\tpublic getInputAt(index:number /*uint*/):AnimationNodeBase\n\t{\n\t\treturn this._iInputs[index];\n\t}\n\n\t/**\n\t * Adds a new skeleton animation node input to the animation node.\n\t */\n\tpublic addInput(input:AnimationNodeBase)\n\t{\n\t\tthis._iInputs[this._numInputs++] = input;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonNaryLERPState\n\t{\n\t\treturn <SkeletonNaryLERPState> animator.getAnimationState(this);\n\t}\n}\n\nexport = SkeletonNaryLERPNode",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Geometry\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/Geometry\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\nimport AnimationClipNodeBase\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase\");\nimport VertexClipState\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/VertexClipState\");\n\n/**\n * A vertex animation node containing time-based animation data as individual geometry obejcts.\n */\nclass VertexClipNode extends AnimationClipNodeBase\n{\n\tprivate _frames:Array<Geometry> = new Array<Geometry>();\n\tprivate _translations:Array<Vector3D> = new Array<Vector3D>();\n\n\t/**\n\t * Returns a vector of geometry frames representing the vertex values of each animation frame in the clip.\n\t */\n\tpublic get frames():Array<Geometry>\n\t{\n\t\treturn this._frames;\n\t}\n\n\t/**\n\t * Creates a new <code>VertexClipNode</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._pStateClass = VertexClipState;\n\t}\n\n\t/**\n\t * Adds a geometry object to the internal timeline of the animation node.\n\t *\n\t * @param geometry The geometry object to add to the timeline of the node.\n\t * @param duration The specified duration of the frame in milliseconds.\n\t * @param translation The absolute translation of the frame, used in root delta calculations for mesh movement.\n\t */\n\tpublic addFrame(geometry:Geometry, duration:number /*uint*/, translation:Vector3D = null)\n\t{\n\t\tthis._frames.push(geometry);\n\t\tthis._pDurations.push(duration);\n\t\tthis._translations.push(translation || new Vector3D());\n\n\t\tthis._pNumFrames = this._pDurations.length;\n\n\t\tthis._pStitchDirty = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateStitch()\n\t{\n\t\tsuper._pUpdateStitch();\n\n\t\tvar i:number /*uint*/ = this._pNumFrames - 1;\n\t\tvar p1:Vector3D, p2:Vector3D, delta:Vector3D;\n\t\twhile (i--) {\n\t\t\tthis._pTotalDuration += this._pDurations[i];\n\t\t\tp1 = this._translations[i];\n\t\t\tp2 = this._translations[i + 1];\n\t\t\tdelta = p2.subtract(p1);\n\t\t\tthis._pTotalDelta.x += delta.x;\n\t\t\tthis._pTotalDelta.y += delta.y;\n\t\t\tthis._pTotalDelta.z += delta.z;\n\t\t}\n\n\t\tif (this._pNumFrames > 1 && (this._pStitchFinalFrame || !this._pLooping)) {\n\t\t\tthis._pTotalDuration += this._pDurations[this._pNumFrames - 1];\n\t\t\tp1 = this._translations[0];\n\t\t\tp2 = this._translations[1];\n\t\t\tdelta = p2.subtract(p1);\n\t\t\tthis._pTotalDelta.x += delta.x;\n\t\t\tthis._pTotalDelta.y += delta.y;\n\t\t\tthis._pTotalDelta.z += delta.z;\n\t\t}\n\t}\n}\n\nexport = VertexClipNode;",
    "import AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\nimport AnimationClipNodeBase\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase\");\nimport AnimationStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationStateBase\");\nimport AnimationStateEvent\t\t\t\t= require(\"awayjs-renderergl/lib/events/AnimationStateEvent\");\n\n/**\n *\n */\nclass AnimationClipState extends AnimationStateBase\n{\n\tprivate _animationClipNode:AnimationClipNodeBase;\n\tprivate _animationStatePlaybackComplete:AnimationStateEvent;\n\tpublic _pBlendWeight:number;\n\tpublic _pCurrentFrame:number /*uint*/;\n\tpublic _pNextFrame:number /*uint*/;\n\n\tpublic _pOldFrame:number /*uint*/;\n\tpublic _pTimeDir:number /*int*/;\n\tpublic _pFramesDirty:boolean = true;\n\n\t/**\n\t * Returns a fractional value between 0 and 1 representing the blending ratio of the current playhead position\n\t * between the current frame (0) and next frame (1) of the animation.\n\t *\n\t * @see #currentFrame\n\t * @see #nextFrame\n\t */\n\tpublic get blendWeight():number\n\t{\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\treturn this._pBlendWeight;\n\t}\n\n\t/**\n\t * Returns the current frame of animation in the clip based on the internal playhead position.\n\t */\n\tpublic get currentFrame():number /*uint*/\n\t{\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\treturn this._pCurrentFrame;\n\t}\n\n\t/**\n\t * Returns the next frame of animation in the clip based on the internal playhead position.\n\t */\n\tpublic get nextFrame():number /*uint*/\n\t{\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\treturn this._pNextFrame;\n\t}\n\n\tconstructor(animator:AnimatorBase, animationClipNode:AnimationClipNodeBase)\n\t{\n\t\tsuper(animator, animationClipNode);\n\n\t\tthis._animationClipNode = animationClipNode;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic update(time:number /*int*/)\n\t{\n\t\tif (!this._animationClipNode.looping) {\n\t\t\tif (time > this._pStartTime + this._animationClipNode.totalDuration)\n\t\t\t\ttime = this._pStartTime + this._animationClipNode.totalDuration; else if (time < this._pStartTime)\n\t\t\t\ttime = this._pStartTime;\n\t\t}\n\n\t\tif (this._pTime == time - this._pStartTime)\n\t\t\treturn;\n\n\t\tthis._pUpdateTime(time);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic phase(value:number)\n\t{\n\t\tvar time:number /*int*/ = value*this._animationClipNode.totalDuration + this._pStartTime;\n\n\t\tif (this._pTime == time - this._pStartTime)\n\t\t\treturn;\n\n\t\tthis._pUpdateTime(time);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateTime(time:number /*int*/)\n\t{\n\t\tthis._pFramesDirty = true;\n\n\t\tthis._pTimeDir = (time - this._pStartTime > this._pTime)? 1 : -1;\n\n\t\tsuper._pUpdateTime(time);\n\t}\n\n\t/**\n\t * Updates the nodes internal playhead to determine the current and next animation frame, and the blendWeight between the two.\n\t *\n\t * @see #currentFrame\n\t * @see #nextFrame\n\t * @see #blendWeight\n\t */\n\tpublic _pUpdateFrames()\n\t{\n\t\tthis._pFramesDirty = false;\n\n\t\tvar looping:boolean = this._animationClipNode.looping;\n\t\tvar totalDuration:number /*uint*/ = this._animationClipNode.totalDuration;\n\t\tvar lastFrame:number /*uint*/ = this._animationClipNode.lastFrame;\n\t\tvar time:number /*int*/ = this._pTime;\n\n\t\t//trace(\"time\", time, totalDuration)\n\t\tif (looping && (time >= totalDuration || time < 0)) {\n\t\t\ttime %= totalDuration;\n\t\t\tif (time < 0)\n\t\t\t\ttime += totalDuration;\n\t\t}\n\n\t\tif (!looping && time >= totalDuration) {\n\t\t\tthis.notifyPlaybackComplete();\n\t\t\tthis._pCurrentFrame = lastFrame;\n\t\t\tthis._pNextFrame = lastFrame;\n\t\t\tthis._pBlendWeight = 0;\n\t\t} else if (!looping && time <= 0) {\n\t\t\tthis._pCurrentFrame = 0;\n\t\t\tthis._pNextFrame = 0;\n\t\t\tthis._pBlendWeight = 0;\n\t\t} else if (this._animationClipNode.fixedFrameRate) {\n\t\t\tvar t:number = time/totalDuration*lastFrame;\n\t\t\tthis._pCurrentFrame = Math.floor(t);\n\t\t\tthis._pBlendWeight = t - this._pCurrentFrame;\n\t\t\tthis._pNextFrame = this._pCurrentFrame + 1;\n\t\t} else {\n\t\t\tthis._pCurrentFrame = 0;\n\t\t\tthis._pNextFrame = 0;\n\n\t\t\tvar dur:number /*uint*/ = 0, frameTime:number /*uint*/;\n\t\t\tvar durations:Array<number> /*uint*/ = this._animationClipNode.durations;\n\n\t\t\tdo {\n\t\t\t\tframeTime = dur;\n\t\t\t\tdur += durations[this._pNextFrame];\n\t\t\t\tthis._pCurrentFrame = this._pNextFrame++;\n\t\t\t} while (time > dur);\n\n\t\t\tif (this._pCurrentFrame == lastFrame) {\n\t\t\t\tthis._pCurrentFrame = 0;\n\t\t\t\tthis._pNextFrame = 1;\n\t\t\t}\n\n\t\t\tthis._pBlendWeight = (time - frameTime)/durations[this._pCurrentFrame];\n\t\t}\n\t}\n\n\tprivate notifyPlaybackComplete()\n\t{\n\t\tif (this._animationStatePlaybackComplete == null)\n\t\t\tthis._animationStatePlaybackComplete = new AnimationStateEvent(AnimationStateEvent.PLAYBACK_COMPLETE, this._pAnimator, this, this._animationClipNode);\n\n\t\tthis._animationClipNode.dispatchEvent(this._animationStatePlaybackComplete);\n\t}\n}\n\nexport = AnimationClipState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport IAnimationState\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/IAnimationState\");\n\nimport AnimationStateEvent\t\t\t\t= require(\"awayjs-renderergl/lib/events/AnimationStateEvent\");\n\n/**\n *\n */\nclass AnimationStateBase implements IAnimationState\n{\n\tpublic _pAnimationNode:AnimationNodeBase;\n\tpublic _pRootDelta:Vector3D = new Vector3D();\n\tpublic _pPositionDeltaDirty:boolean = true;\n\n\tpublic _pTime:number;\n\tpublic _pStartTime:number = 0;\n\tpublic _pAnimator:AnimatorBase;\n\n\t/**\n\t * Returns a 3d vector representing the translation delta of the animating entity for the current timestep of animation\n\t */\n\tpublic get positionDelta():Vector3D\n\t{\n\t\tif (this._pPositionDeltaDirty) {\n\n\t\t\tthis._pUpdatePositionDelta();\n\t\t}\n\n\t\treturn this._pRootDelta;\n\n\t}\n\n\tconstructor(animator:AnimatorBase, animationNode:AnimationNodeBase)\n\t{\n\t\tthis._pAnimator = animator;\n\t\tthis._pAnimationNode = animationNode;\n\t}\n\n\t/**\n\t * Resets the start time of the node to a  new value.\n\t *\n\t * @param startTime The absolute start time (in milliseconds) of the node's starting time.\n\t */\n\tpublic offset(startTime:number)\n\t{\n\t\tthis._pStartTime = startTime;\n\n\t\tthis._pPositionDeltaDirty = true;\n\t}\n\n\t/**\n\t * Updates the configuration of the node to its current state.\n\t *\n\t * @param time The absolute time (in milliseconds) of the animator's play head position.\n\t *\n\t * @see AnimatorBase#update()\n\t */\n\tpublic update(time:number)\n\t{\n\t\tif (this._pTime == time - this._pStartTime) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._pUpdateTime(time);\n\n\t}\n\n\t/**\n\t * Sets the animation phase of the node.\n\t *\n\t * @param value The phase value to use. 0 represents the beginning of an animation clip, 1 represents the end.\n\t */\n\tpublic phase(value:number)\n\t{\n\n\t}\n\n\t/**\n\t * Updates the node's internal playhead position.\n\t *\n\t * @param time The local time (in milliseconds) of the node's playhead position.\n\t */\n\tpublic _pUpdateTime(time:number)\n\t{\n\t\tthis._pTime = time - this._pStartTime;\n\n\t\tthis._pPositionDeltaDirty = true;\n\t}\n\n\t/**\n\t * Updates the node's root delta position\n\t */\n\tpublic _pUpdatePositionDelta()\n\t{\n\t}\n}\n\nexport = AnimationStateBase;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleAccelerationNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleAccelerationNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleAccelerationState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static ACCELERATION_INDEX:number /*int*/ = 0;\n\n\tprivate _particleAccelerationNode:ParticleAccelerationNode;\n\tprivate _acceleration:Vector3D;\n\tprivate _halfAcceleration:Vector3D;\n\t\n\t/**\n\t * Defines the acceleration vector of the state, used when in global mode.\n\t */\n\tpublic get acceleration():Vector3D\n\t{\n\t\treturn this._acceleration;\n\t}\n\t\n\tpublic set acceleration(value:Vector3D)\n\t{\n\t\tthis._acceleration.x = value.x;\n\t\tthis._acceleration.y = value.y;\n\t\tthis._acceleration.z = value.z;\n\n\t\tthis.updateAccelerationData();\n\t}\n\t\n\tconstructor(animator:ParticleAnimator, particleAccelerationNode:ParticleAccelerationNode)\n\t{\n\t\tsuper(animator, particleAccelerationNode);\n\n\t\tthis._particleAccelerationNode = particleAccelerationNode;\n\t\tthis._acceleration = this._particleAccelerationNode._acceleration;\n\n\t\tthis.updateAccelerationData();\n\t}\n\t\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleAccelerationState.ACCELERATION_INDEX);\n\t\t\n\t\tif (this._particleAccelerationNode.mode == ParticlePropertiesMode.LOCAL_STATIC)\n\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleAccelerationNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\telse\n\t\t\tanimationRegisterCache.setVertexConst(index, this._halfAcceleration.x, this._halfAcceleration.y, this._halfAcceleration.z);\n\t}\n\t\n\tprivate updateAccelerationData()\n\t{\n\t\tif (this._particleAccelerationNode.mode == ParticlePropertiesMode.GLOBAL)\n\t\t\tthis._halfAcceleration = new Vector3D(this._acceleration.x/2, this._acceleration.y/2, this._acceleration.z/2);\n\t}\n}\n\nexport = ParticleAccelerationState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleBezierCurveNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleBezierCurveNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n/**\n * ...\n */\nclass ParticleBezierCurveState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static BEZIER_CONTROL_INDEX:number /*int*/ = 0;\n\n\t/** @private */\n\tpublic static BEZIER_END_INDEX:number /*int*/ = 1;\n\n\tprivate _particleBezierCurveNode:ParticleBezierCurveNode;\n\tprivate _controlPoint:Vector3D;\n\tprivate _endPoint:Vector3D;\n\n\t/**\n\t * Defines the default control point of the node, used when in global mode.\n\t */\n\tpublic get controlPoint():Vector3D\n\t{\n\t\treturn this._controlPoint;\n\t}\n\n\tpublic set controlPoint(value:Vector3D)\n\t{\n\t\tthis._controlPoint = value;\n\t}\n\n\t/**\n\t * Defines the default end point of the node, used when in global mode.\n\t */\n\tpublic get endPoint():Vector3D\n\t{\n\t\treturn this._endPoint;\n\t}\n\n\tpublic set endPoint(value:Vector3D)\n\t{\n\t\tthis._endPoint = value;\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleBezierCurveNode:ParticleBezierCurveNode)\n\t{\n\t\tsuper(animator, particleBezierCurveNode);\n\n\t\tthis._particleBezierCurveNode = particleBezierCurveNode;\n\t\tthis._controlPoint = this._particleBezierCurveNode._iControlPoint;\n\t\tthis._endPoint = this._particleBezierCurveNode._iEndPoint;\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tvar controlIndex:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleBezierCurveState.BEZIER_CONTROL_INDEX);\n\t\tvar endIndex:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleBezierCurveState.BEZIER_END_INDEX);\n\n\t\tif (this._particleBezierCurveNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\tanimationSubGeometry.activateVertexBuffer(controlIndex, this._particleBezierCurveNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t\tanimationSubGeometry.activateVertexBuffer(endIndex, this._particleBezierCurveNode._iDataOffset + 3, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t} else {\n\t\t\tanimationRegisterCache.setVertexConst(controlIndex, this._controlPoint.x, this._controlPoint.y, this._controlPoint.z);\n\t\t\tanimationRegisterCache.setVertexConst(endIndex, this._endPoint.x, this._endPoint.y, this._endPoint.z);\n\t\t}\n\t}\n}\n\nexport = ParticleBezierCurveState;",
    "import MathConsts\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/MathConsts\");\nimport Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport Orientation3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Orientation3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticleBillboardNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleBillboardNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleBillboardState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static MATRIX_INDEX:number /*int*/ = 0;\n\n\tprivate _matrix:Matrix3D = new Matrix3D;\n\n\tprivate _billboardAxis:Vector3D;\n\n\t/**\n\t *\n\t */\n\tconstructor(animator:ParticleAnimator, particleNode:ParticleBillboardNode)\n\t{\n\t\tsuper(animator, particleNode);\n\n\t\tthis._billboardAxis = particleNode._iBillboardAxis;\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tvar comps:Array<Vector3D>;\n\t\tif (this._billboardAxis) {\n\t\t\tvar pos:Vector3D = renderable.sourceEntity.sceneTransform.position;\n\t\t\tvar look:Vector3D = camera.sceneTransform.position.subtract(pos);\n\t\t\tvar right:Vector3D = look.crossProduct(this._billboardAxis);\n\t\t\tright.normalize();\n\t\t\tlook = this.billboardAxis.crossProduct(right);\n\t\t\tlook.normalize();\n\n\t\t\t//create a quick inverse projection matrix\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\n\t\t\tcomps = this._matrix.decompose(Orientation3D.AXIS_ANGLE);\n\t\t\tthis._matrix.copyColumnFrom(0, right);\n\t\t\tthis._matrix.copyColumnFrom(1, this.billboardAxis);\n\t\t\tthis._matrix.copyColumnFrom(2, look);\n\t\t\tthis._matrix.copyColumnFrom(3, pos);\n\t\t\tthis._matrix.appendRotation(-comps[1].w*MathConsts.RADIANS_TO_DEGREES, comps[1]);\n\t\t} else {\n\t\t\t//create a quick inverse projection matrix\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\n\t\t\tthis._matrix.append(camera.inverseSceneTransform);\n\n\t\t\t//decompose using axis angle rotations\n\t\t\tcomps = this._matrix.decompose(Orientation3D.AXIS_ANGLE);\n\n\t\t\t//recreate the matrix with just the rotation data\n\t\t\tthis._matrix.identity();\n\t\t\tthis._matrix.appendRotation(-comps[1].w*MathConsts.RADIANS_TO_DEGREES, comps[1]);\n\t\t}\n\n\t\t//set a new matrix transform constant\n\t\tanimationRegisterCache.setVertexConstFromMatrix(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleBillboardState.MATRIX_INDEX), this._matrix);\n\t}\n\n\t/**\n\t * Defines the billboard axis.\n\t */\n\tpublic get billboardAxis():Vector3D\n\t{\n\t\treturn this.billboardAxis;\n\t}\n\n\tpublic set billboardAxis(value:Vector3D)\n\t{\n\t\tthis.billboardAxis = value? value.clone() : null;\n\t\tif (this.billboardAxis)\n\t\t\tthis.billboardAxis.normalize();\n\t}\n\n}\n\nexport = ParticleBillboardState;",
    "import ColorTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleColorNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleColorNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n * @author ...\n */\nclass ParticleColorState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static START_MULTIPLIER_INDEX:number /*uint*/ = 0;\n\n\t/** @private */\n\tpublic static DELTA_MULTIPLIER_INDEX:number /*uint*/ = 1;\n\n\t/** @private */\n\tpublic static START_OFFSET_INDEX:number /*uint*/ = 2;\n\n\t/** @private */\n\tpublic static DELTA_OFFSET_INDEX:number /*uint*/ = 3;\n\n\t/** @private */\n\tpublic static CYCLE_INDEX:number /*uint*/ = 4;\n\n\tprivate _particleColorNode:ParticleColorNode;\n\tprivate _usesMultiplier:boolean;\n\tprivate _usesOffset:boolean;\n\tprivate _usesCycle:boolean;\n\tprivate _usesPhase:boolean;\n\tprivate _startColor:ColorTransform;\n\tprivate _endColor:ColorTransform;\n\tprivate _cycleDuration:number;\n\tprivate _cyclePhase:number;\n\tprivate _cycleData:Vector3D;\n\tprivate _startMultiplierData:Vector3D;\n\tprivate _deltaMultiplierData:Vector3D;\n\tprivate _startOffsetData:Vector3D;\n\tprivate _deltaOffsetData:Vector3D;\n\n\t/**\n\t * Defines the start color transform of the state, when in global mode.\n\t */\n\tpublic get startColor():ColorTransform\n\t{\n\t\treturn this._startColor;\n\t}\n\n\tpublic set startColor(value:ColorTransform)\n\t{\n\t\tthis._startColor = value;\n\n\t\tthis.updateColorData();\n\t}\n\n\t/**\n\t * Defines the end color transform of the state, when in global mode.\n\t */\n\tpublic get endColor():ColorTransform\n\t{\n\t\treturn this._endColor;\n\t}\n\n\tpublic set endColor(value:ColorTransform)\n\t{\n\t\tthis._endColor = value;\n\n\t\tthis.updateColorData();\n\t}\n\n\t/**\n\t * Defines the duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\n\t */\n\tpublic get cycleDuration():number\n\t{\n\t\treturn this._cycleDuration;\n\t}\n\n\tpublic set cycleDuration(value:number)\n\t{\n\t\tthis._cycleDuration = value;\n\n\t\tthis.updateColorData();\n\t}\n\n\t/**\n\t * Defines the phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\n\t */\n\tpublic get cyclePhase():number\n\t{\n\t\treturn this._cyclePhase;\n\t}\n\n\tpublic set cyclePhase(value:number)\n\t{\n\t\tthis._cyclePhase = value;\n\n\t\tthis.updateColorData();\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleColorNode:ParticleColorNode)\n\t{\n\t\tsuper(animator, particleColorNode);\n\n\t\tthis._particleColorNode = particleColorNode;\n\t\tthis._usesMultiplier = this._particleColorNode._iUsesMultiplier;\n\t\tthis._usesOffset = this._particleColorNode._iUsesOffset;\n\t\tthis._usesCycle = this._particleColorNode._iUsesCycle;\n\t\tthis._usesPhase = this._particleColorNode._iUsesPhase;\n\t\tthis._startColor = this._particleColorNode._iStartColor;\n\t\tthis._endColor = this._particleColorNode._iEndColor;\n\t\tthis._cycleDuration = this._particleColorNode._iCycleDuration;\n\t\tthis._cyclePhase = this._particleColorNode._iCyclePhase;\n\n\t\tthis.updateColorData();\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (animationRegisterCache.needFragmentAnimation) {\n\t\t\tvar dataOffset:number /*uint*/ = this._particleColorNode._iDataOffset;\n\t\t\tif (this._usesCycle)\n\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.CYCLE_INDEX), this._cycleData.x, this._cycleData.y, this._cycleData.z, this._cycleData.w);\n\n\t\t\tif (this._usesMultiplier) {\n\t\t\t\tif (this._particleColorNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_MULTIPLIER_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\t\t\tdataOffset += 4;\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_MULTIPLIER_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\t\t\tdataOffset += 4;\n\t\t\t\t} else {\n\t\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_MULTIPLIER_INDEX), this._startMultiplierData.x, this._startMultiplierData.y, this._startMultiplierData.z, this._startMultiplierData.w);\n\t\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_MULTIPLIER_INDEX), this._deltaMultiplierData.x, this._deltaMultiplierData.y, this._deltaMultiplierData.z, this._deltaMultiplierData.w);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._usesOffset) {\n\t\t\t\tif (this._particleColorNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_OFFSET_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\t\t\tdataOffset += 4;\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_OFFSET_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\t\t\tdataOffset += 4;\n\t\t\t\t} else {\n\t\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_OFFSET_INDEX), this._startOffsetData.x, this._startOffsetData.y, this._startOffsetData.z, this._startOffsetData.w);\n\t\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_OFFSET_INDEX), this._deltaOffsetData.x, this._deltaOffsetData.y, this._deltaOffsetData.z, this._deltaOffsetData.w);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateColorData()\n\t{\n\t\tif (this._usesCycle) {\n\t\t\tif (this._cycleDuration <= 0)\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\n\t\t\tthis._cycleData = new Vector3D(Math.PI*2/this._cycleDuration, this._cyclePhase*Math.PI/180, 0, 0);\n\t\t}\n\t\tif (this._particleColorNode.mode == ParticlePropertiesMode.GLOBAL) {\n\t\t\tif (this._usesCycle) {\n\t\t\t\tif (this._usesMultiplier) {\n\t\t\t\t\tthis._startMultiplierData = new Vector3D((this._startColor.redMultiplier + this._endColor.redMultiplier)/2, (this._startColor.greenMultiplier + this._endColor.greenMultiplier)/2, (this._startColor.blueMultiplier + this._endColor.blueMultiplier)/2, (this._startColor.alphaMultiplier + this._endColor.alphaMultiplier)/2);\n\t\t\t\t\tthis._deltaMultiplierData = new Vector3D((this._endColor.redMultiplier - this._startColor.redMultiplier)/2, (this._endColor.greenMultiplier - this._startColor.greenMultiplier)/2, (this._endColor.blueMultiplier - this._startColor.blueMultiplier)/2, (this._endColor.alphaMultiplier - this._startColor.alphaMultiplier)/2);\n\t\t\t\t}\n\n\t\t\t\tif (this._usesOffset) {\n\t\t\t\t\tthis._startOffsetData = new Vector3D((this._startColor.redOffset + this._endColor.redOffset)/(255*2), (this._startColor.greenOffset + this._endColor.greenOffset)/(255*2), (this._startColor.blueOffset + this._endColor.blueOffset)/(255*2), (this._startColor.alphaOffset + this._endColor.alphaOffset)/(255*2));\n\t\t\t\t\tthis._deltaOffsetData = new Vector3D((this._endColor.redOffset - this._startColor.redOffset)/(255*2), (this._endColor.greenOffset - this._startColor.greenOffset)/(255*2), (this._endColor.blueOffset - this._startColor.blueOffset)/(255*2), (this._endColor.alphaOffset - this._startColor.alphaOffset)/(255*2));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._usesMultiplier) {\n\t\t\t\t\tthis._startMultiplierData = new Vector3D(this._startColor.redMultiplier, this._startColor.greenMultiplier, this._startColor.blueMultiplier, this._startColor.alphaMultiplier);\n\t\t\t\t\tthis._deltaMultiplierData = new Vector3D((this._endColor.redMultiplier - this._startColor.redMultiplier), (this._endColor.greenMultiplier - this._startColor.greenMultiplier), (this._endColor.blueMultiplier - this._startColor.blueMultiplier), (this._endColor.alphaMultiplier - this._startColor.alphaMultiplier));\n\t\t\t\t}\n\n\t\t\t\tif (this._usesOffset) {\n\t\t\t\t\tthis._startOffsetData = new Vector3D(this._startColor.redOffset/255, this._startColor.greenOffset/255, this._startColor.blueOffset/255, this._startColor.alphaOffset/255);\n\t\t\t\t\tthis._deltaOffsetData = new Vector3D((this._endColor.redOffset - this._startColor.redOffset)/255, (this._endColor.greenOffset - this._startColor.greenOffset)/255, (this._endColor.blueOffset - this._startColor.blueOffset )/255, (this._endColor.alphaOffset - this._startColor.alphaOffset)/255);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport = ParticleColorState;",
    "import MathConsts\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/MathConsts\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport DisplayObject\t\t\t\t\t= require(\"awayjs-display/lib/base/DisplayObject\");\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticleAnimationData\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleAnimationData\");\nimport ParticleFollowNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleFollowNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleFollowState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static FOLLOW_POSITION_INDEX:number /*uint*/ = 0;\n\n\t/** @private */\n\tpublic static FOLLOW_ROTATION_INDEX:number /*uint*/ = 1;\n\n\tprivate _particleFollowNode:ParticleFollowNode;\n\tprivate _followTarget:DisplayObject;\n\n\tprivate _targetPos:Vector3D = new Vector3D();\n\tprivate _targetEuler:Vector3D = new Vector3D();\n\tprivate _prePos:Vector3D;\n\tprivate _preEuler:Vector3D;\n\tprivate _smooth:boolean;\n\n\t//temporary vector3D for calculation\n\tprivate _temp:Vector3D = new Vector3D();\n\n\tconstructor(animator:ParticleAnimator, particleFollowNode:ParticleFollowNode)\n\t{\n\t\tsuper(animator, particleFollowNode, true);\n\n\t\tthis._particleFollowNode = particleFollowNode;\n\t\tthis._smooth = particleFollowNode._iSmooth;\n\t}\n\n\tpublic get followTarget():DisplayObject\n\t{\n\t\treturn this._followTarget;\n\t}\n\n\tpublic set followTarget(value:DisplayObject)\n\t{\n\t\tthis._followTarget = value;\n\t}\n\n\tpublic get smooth():boolean\n\t{\n\t\treturn this._smooth;\n\t}\n\n\tpublic set smooth(value:boolean)\n\t{\n\t\tthis._smooth = value;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (this._followTarget) {\n\t\t\tif (this._particleFollowNode._iUsesPosition) {\n\t\t\t\tthis._targetPos.x = this._followTarget.transform.position.x/renderable.sourceEntity.scaleX;\n\t\t\t\tthis._targetPos.y = this._followTarget.transform.position.y/renderable.sourceEntity.scaleY;\n\t\t\t\tthis._targetPos.z = this._followTarget.transform.position.z/renderable.sourceEntity.scaleZ;\n\t\t\t}\n\t\t\tif (this._particleFollowNode._iUsesRotation) {\n\t\t\t\tthis._targetEuler.x = this._followTarget.rotationX;\n\t\t\t\tthis._targetEuler.y = this._followTarget.rotationY;\n\t\t\t\tthis._targetEuler.z = this._followTarget.rotationZ;\n\t\t\t\tthis._targetEuler.scaleBy(MathConsts.DEGREES_TO_RADIANS);\n\t\t\t}\n\t\t}\n\t\t//initialization\n\t\tif (!this._prePos)\n\t\t\tthis._prePos = this._targetPos.clone();\n\t\tif (!this._preEuler)\n\t\t\tthis._preEuler = this._targetEuler.clone();\n\n\t\tvar currentTime:number = this._pTime/1000;\n\t\tvar previousTime:number = animationSubGeometry.previousTime;\n\t\tvar deltaTime:number = currentTime - previousTime;\n\n\t\tvar needProcess:boolean = previousTime != currentTime;\n\n\t\tif (this._particleFollowNode._iUsesPosition && this._particleFollowNode._iUsesRotation) {\n\t\t\tif (needProcess)\n\t\t\t\tthis.processPositionAndRotation(currentTime, deltaTime, animationSubGeometry);\n\n\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_POSITION_INDEX), this._particleFollowNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_ROTATION_INDEX), this._particleFollowNode._iDataOffset + 3, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t} else if (this._particleFollowNode._iUsesPosition) {\n\t\t\tif (needProcess)\n\t\t\t\tthis.processPosition(currentTime, deltaTime, animationSubGeometry);\n\n\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_POSITION_INDEX), this._particleFollowNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t} else if (this._particleFollowNode._iUsesRotation) {\n\t\t\tif (needProcess)\n\t\t\t\tthis.precessRotation(currentTime, deltaTime, animationSubGeometry);\n\n\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_ROTATION_INDEX), this._particleFollowNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t}\n\n\t\tthis._prePos.copyFrom(this._targetPos);\n\t\tthis._targetEuler.copyFrom(this._targetEuler);\n\t\tanimationSubGeometry.previousTime = currentTime;\n\t}\n\n\tprivate processPosition(currentTime:number, deltaTime:number, animationSubGeometry:AnimationSubGeometry)\n\t{\n\t\tvar data:Array<ParticleAnimationData> = animationSubGeometry.animationParticles;\n\t\tvar vertexData:Array<number> = animationSubGeometry.vertexData;\n\n\t\tvar changed:boolean = false;\n\t\tvar len:number /*uint*/ = data.length;\n\t\tvar interpolatedPos:Vector3D;\n\t\tvar posVelocity:Vector3D;\n\t\tif (this._smooth) {\n\t\t\tposVelocity = this._prePos.subtract(this._targetPos);\n\t\t\tposVelocity.scaleBy(1/deltaTime);\n\t\t} else\n\t\t\tinterpolatedPos = this._targetPos;\n\t\tfor (var i:number /*uint*/ = 0; i < len; i++) {\n\t\t\tvar k:number = (currentTime - data[i].startTime)/data[i].totalTime;\n\t\t\tvar t:number = (k - Math.floor(k))*data[i].totalTime;\n\t\t\tif (t - deltaTime <= 0) {\n\t\t\t\tvar inc:number /*int*/ = data[i].startVertexIndex*animationSubGeometry.totalLenOfOneVertex + this._particleFollowNode._iDataOffset;\n\n\t\t\t\tif (this._smooth) {\n\t\t\t\t\tthis._temp.copyFrom(posVelocity);\n\t\t\t\t\tthis._temp.scaleBy(t);\n\t\t\t\t\tinterpolatedPos = this._targetPos.add(this._temp);\n\t\t\t\t}\n\n\t\t\t\tif (vertexData[inc] != interpolatedPos.x || vertexData[inc + 1] != interpolatedPos.y || vertexData[inc + 2] != interpolatedPos.z) {\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tfor (var j:number /*uint*/ = 0; j < data[i].numVertices; j++) {\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.x;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.y;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.z;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (changed)\n\t\t\tanimationSubGeometry.invalidateBuffer();\n\n\t}\n\n\tprivate precessRotation(currentTime:number, deltaTime:number, animationSubGeometry:AnimationSubGeometry)\n\t{\n\t\tvar data:Array<ParticleAnimationData> = animationSubGeometry.animationParticles;\n\t\tvar vertexData:Array<number> = animationSubGeometry.vertexData;\n\n\t\tvar changed:boolean = false;\n\t\tvar len:number /*uint*/ = data.length;\n\n\t\tvar interpolatedRotation:Vector3D;\n\t\tvar rotationVelocity:Vector3D;\n\n\t\tif (this._smooth) {\n\t\t\trotationVelocity = this._preEuler.subtract(this._targetEuler);\n\t\t\trotationVelocity.scaleBy(1/deltaTime);\n\t\t} else\n\t\t\tinterpolatedRotation = this._targetEuler;\n\n\t\tfor (var i:number /*uint*/ = 0; i < len; i++) {\n\t\t\tvar k:number = (currentTime - data[i].startTime)/data[i].totalTime;\n\t\t\tvar t:number = (k - Math.floor(k))*data[i].totalTime;\n\t\t\tif (t - deltaTime <= 0) {\n\t\t\t\tvar inc:number /*int*/ = data[i].startVertexIndex*animationSubGeometry.totalLenOfOneVertex + this._particleFollowNode._iDataOffset;\n\n\t\t\t\tif (this._smooth) {\n\t\t\t\t\tthis._temp.copyFrom(rotationVelocity);\n\t\t\t\t\tthis._temp.scaleBy(t);\n\t\t\t\t\tinterpolatedRotation = this._targetEuler.add(this._temp);\n\t\t\t\t}\n\n\t\t\t\tif (vertexData[inc] != interpolatedRotation.x || vertexData[inc + 1] != interpolatedRotation.y || vertexData[inc + 2] != interpolatedRotation.z) {\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tfor (var j:number /*uint*/ = 0; j < data[i].numVertices; j++) {\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.x;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.y;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.z;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (changed)\n\t\t\tanimationSubGeometry.invalidateBuffer();\n\n\t}\n\n\tprivate processPositionAndRotation(currentTime:number, deltaTime:number, animationSubGeometry:AnimationSubGeometry)\n\t{\n\t\tvar data:Array<ParticleAnimationData> = animationSubGeometry.animationParticles;\n\t\tvar vertexData:Array<number> = animationSubGeometry.vertexData;\n\n\t\tvar changed:boolean = false;\n\t\tvar len:number /*uint*/ = data.length;\n\n\t\tvar interpolatedPos:Vector3D;\n\t\tvar interpolatedRotation:Vector3D;\n\n\t\tvar posVelocity:Vector3D;\n\t\tvar rotationVelocity:Vector3D;\n\t\tif (this._smooth) {\n\t\t\tposVelocity = this._prePos.subtract(this._targetPos);\n\t\t\tposVelocity.scaleBy(1/deltaTime);\n\t\t\trotationVelocity = this._preEuler.subtract(this._targetEuler);\n\t\t\trotationVelocity.scaleBy(1/deltaTime);\n\t\t} else {\n\t\t\tinterpolatedPos = this._targetPos;\n\t\t\tinterpolatedRotation = this._targetEuler;\n\t\t}\n\n\t\tfor (var i:number /*uint*/ = 0; i < len; i++) {\n\t\t\tvar k:number = (currentTime - data[i].startTime)/data[i].totalTime;\n\t\t\tvar t:number = (k - Math.floor(k))*data[i].totalTime;\n\t\t\tif (t - deltaTime <= 0) {\n\t\t\t\tvar inc:number /*int*/ = data[i].startVertexIndex*animationSubGeometry.totalLenOfOneVertex + this._particleFollowNode._iDataOffset;\n\t\t\t\tif (this._smooth) {\n\t\t\t\t\tthis._temp.copyFrom(posVelocity);\n\t\t\t\t\tthis._temp.scaleBy(t);\n\t\t\t\t\tinterpolatedPos = this._targetPos.add(this._temp);\n\n\t\t\t\t\tthis._temp.copyFrom(rotationVelocity);\n\t\t\t\t\tthis._temp.scaleBy(t);\n\t\t\t\t\tinterpolatedRotation = this._targetEuler.add(this._temp);\n\t\t\t\t}\n\n\t\t\t\tif (vertexData[inc] != interpolatedPos.x || vertexData[inc + 1] != interpolatedPos.y || vertexData[inc + 2] != interpolatedPos.z || vertexData[inc + 3] != interpolatedRotation.x || vertexData[inc + 4] != interpolatedRotation.y || vertexData[inc + 5] != interpolatedRotation.z) {\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tfor (var j:number /*uint*/ = 0; j < data[i].numVertices; j++) {\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.x;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.y;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.z;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.x;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.y;\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.z;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (changed)\n\t\t\tanimationSubGeometry.invalidateBuffer();\n\t}\n\n}\n\nexport = ParticleFollowState;",
    "import ColorTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleInitialColorNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleInitialColorNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n*\n*/\nclass ParticleInitialColorState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static MULTIPLIER_INDEX:number /*uint*/ = 0;\n\t/** @private */\n\tpublic static OFFSET_INDEX:number /*uint*/ = 1;\n\n\tprivate _particleInitialColorNode:ParticleInitialColorNode;\n\tprivate _usesMultiplier:boolean;\n\tprivate _usesOffset:boolean;\n\tprivate _initialColor:ColorTransform;\n\tprivate _multiplierData:Vector3D;\n\tprivate _offsetData:Vector3D;\n\n\tconstructor(animator:ParticleAnimator, particleInitialColorNode:ParticleInitialColorNode)\n\t{\n\t\tsuper(animator, particleInitialColorNode);\n\n\t\tthis._particleInitialColorNode = particleInitialColorNode;\n\t\tthis._usesMultiplier = particleInitialColorNode._iUsesMultiplier;\n\t\tthis._usesOffset = particleInitialColorNode._iUsesOffset;\n\t\tthis._initialColor = particleInitialColorNode._iInitialColor;\n\n\t\tthis.updateColorData();\n\t}\n\n\t/**\n\t * Defines the initial color transform of the state, when in global mode.\n\t */\n\tpublic get initialColor():ColorTransform\n\t{\n\t\treturn this._initialColor;\n\t}\n\n\tpublic set initialColor(value:ColorTransform)\n\t{\n\t\tthis._initialColor = value;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\t// TODO: not used\n\t\trenderable = renderable;\n\t\tcamera = camera;\n\n\t\tif (animationRegisterCache.needFragmentAnimation) {\n\t\t\tif (this._particleInitialColorNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\t\tvar dataOffset:number /*uint*/ = this._particleInitialColorNode._iDataOffset;\n\t\t\t\tif (this._usesMultiplier) {\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.MULTIPLIER_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\t\t\tdataOffset += 4;\n\t\t\t\t}\n\t\t\t\tif (this._usesOffset)\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.OFFSET_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\t} else {\n\t\t\t\tif (this._usesMultiplier)\n\t\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.MULTIPLIER_INDEX), this._multiplierData.x, this._multiplierData.y, this._multiplierData.z, this._multiplierData.w);\n\t\t\t\tif (this._usesOffset)\n\t\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.OFFSET_INDEX), this._offsetData.x, this._offsetData.y, this._offsetData.z, this._offsetData.w);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateColorData()\n\t{\n\t\tif (this._particleInitialColorNode.mode == ParticlePropertiesMode.GLOBAL) {\n\t\t\tif (this._usesMultiplier)\n\t\t\t\tthis._multiplierData = new Vector3D(this._initialColor.redMultiplier, this._initialColor.greenMultiplier, this._initialColor.blueMultiplier, this._initialColor.alphaMultiplier);\n\t\t\tif (this._usesOffset)\n\t\t\t\tthis._offsetData = new Vector3D(this._initialColor.redOffset/255, this._initialColor.greenOffset/255, this._initialColor.blueOffset/255, this._initialColor.alphaOffset/255);\n\t\t}\n\t}\n\n}\n\nexport = ParticleInitialColorState;",
    "import Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleOrbitNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleOrbitNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleOrbitState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static ORBIT_INDEX:number /*uint*/ = 0;\n\n\t/** @private */\n\tpublic static EULERS_INDEX:number /*uint*/ = 1;\n\n\tprivate _particleOrbitNode:ParticleOrbitNode;\n\tprivate _usesEulers:boolean;\n\tprivate _usesCycle:boolean;\n\tprivate _usesPhase:boolean;\n\tprivate _radius:number;\n\tprivate _cycleDuration:number;\n\tprivate _cyclePhase:number;\n\tprivate _eulers:Vector3D;\n\tprivate _orbitData:Vector3D;\n\tprivate _eulersMatrix:Matrix3D;\n\n\t/**\n\t * Defines the radius of the orbit when in global mode. Defaults to 100.\n\t */\n\tpublic get radius():number\n\t{\n\t\treturn this._radius;\n\t}\n\n\tpublic set radius(value:number)\n\t{\n\t\tthis._radius = value;\n\n\t\tthis.updateOrbitData();\n\t}\n\n\t/**\n\t * Defines the duration of the orbit in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\n\t */\n\tpublic get cycleDuration():number\n\t{\n\t\treturn this._cycleDuration;\n\t}\n\n\tpublic set cycleDuration(value:number)\n\t{\n\t\tthis._cycleDuration = value;\n\n\t\tthis.updateOrbitData();\n\t}\n\n\t/**\n\t * Defines the phase of the orbit in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\n\t */\n\tpublic get cyclePhase():number\n\t{\n\t\treturn this._cyclePhase;\n\t}\n\n\tpublic set cyclePhase(value:number)\n\t{\n\t\tthis._cyclePhase = value;\n\n\t\tthis.updateOrbitData();\n\t}\n\n\t/**\n\t * Defines the euler rotation in degrees, applied to the orientation of the orbit when in global mode.\n\t */\n\tpublic get eulers():Vector3D\n\t{\n\t\treturn this._eulers;\n\t}\n\n\tpublic set eulers(value:Vector3D)\n\t{\n\t\tthis._eulers = value;\n\n\t\tthis.updateOrbitData();\n\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleOrbitNode:ParticleOrbitNode)\n\t{\n\t\tsuper(animator, particleOrbitNode);\n\n\t\tthis._particleOrbitNode = particleOrbitNode;\n\t\tthis._usesEulers = this._particleOrbitNode._iUsesEulers;\n\t\tthis._usesCycle = this._particleOrbitNode._iUsesCycle;\n\t\tthis._usesPhase = this._particleOrbitNode._iUsesPhase;\n\t\tthis._eulers = this._particleOrbitNode._iEulers;\n\t\tthis._radius = this._particleOrbitNode._iRadius;\n\t\tthis._cycleDuration = this._particleOrbitNode._iCycleDuration;\n\t\tthis._cyclePhase = this._particleOrbitNode._iCyclePhase;\n\t\tthis.updateOrbitData();\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleOrbitState.ORBIT_INDEX);\n\n\t\tif (this._particleOrbitNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\tif (this._usesPhase)\n\t\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleOrbitNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\telse\n\t\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleOrbitNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t} else\n\t\t\tanimationRegisterCache.setVertexConst(index, this._orbitData.x, this._orbitData.y, this._orbitData.z, this._orbitData.w);\n\n\t\tif (this._usesEulers)\n\t\t\tanimationRegisterCache.setVertexConstFromMatrix(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleOrbitState.EULERS_INDEX), this._eulersMatrix);\n\t}\n\n\tprivate updateOrbitData()\n\t{\n\t\tif (this._usesEulers) {\n\t\t\tthis._eulersMatrix = new Matrix3D();\n\t\t\tthis._eulersMatrix.appendRotation(this._eulers.x, Vector3D.X_AXIS);\n\t\t\tthis._eulersMatrix.appendRotation(this._eulers.y, Vector3D.Y_AXIS);\n\t\t\tthis._eulersMatrix.appendRotation(this._eulers.z, Vector3D.Z_AXIS);\n\t\t}\n\t\tif (this._particleOrbitNode.mode == ParticlePropertiesMode.GLOBAL) {\n\t\t\tthis._orbitData = new Vector3D(this._radius, 0, this._radius*Math.PI*2, this._cyclePhase*Math.PI/180);\n\t\t\tif (this._usesCycle) {\n\t\t\t\tif (this._cycleDuration <= 0)\n\t\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\n\t\t\t\tthis._orbitData.y = Math.PI*2/this._cycleDuration;\n\t\t\t} else\n\t\t\t\tthis._orbitData.y = Math.PI*2;\n\t\t}\n\t}\n}\n\nexport = ParticleOrbitState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleOscillatorNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleOscillatorNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleOscillatorState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static OSCILLATOR_INDEX:number /*uint*/ = 0;\n\n\tprivate _particleOscillatorNode:ParticleOscillatorNode;\n\tprivate _oscillator:Vector3D;\n\tprivate _oscillatorData:Vector3D;\n\n\t/**\n\t * Defines the default oscillator axis (x, y, z) and cycleDuration (w) of the state, used when in global mode.\n\t */\n\tpublic get oscillator():Vector3D\n\t{\n\t\treturn this._oscillator;\n\t}\n\n\tpublic set oscillator(value:Vector3D)\n\t{\n\t\tthis._oscillator = value;\n\n\t\tthis.updateOscillatorData();\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleOscillatorNode:ParticleOscillatorNode)\n\t{\n\t\tsuper(animator, particleOscillatorNode);\n\n\t\tthis._particleOscillatorNode = particleOscillatorNode;\n\t\tthis._oscillator = this._particleOscillatorNode._iOscillator;\n\n\t\tthis.updateOscillatorData();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleOscillatorState.OSCILLATOR_INDEX);\n\n\t\tif (this._particleOscillatorNode.mode == ParticlePropertiesMode.LOCAL_STATIC)\n\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleOscillatorNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\telse\n\t\t\tanimationRegisterCache.setVertexConst(index, this._oscillatorData.x, this._oscillatorData.y, this._oscillatorData.z, this._oscillatorData.w);\n\t}\n\n\tprivate updateOscillatorData()\n\t{\n\t\tif (this._particleOscillatorNode.mode == ParticlePropertiesMode.GLOBAL) {\n\t\t\tif (this._oscillator.w <= 0)\n\t\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\n\n\t\t\tif (this._oscillatorData == null)\n\t\t\t\tthis._oscillatorData = new Vector3D();\n\n\t\t\tthis._oscillatorData.x = this._oscillator.x;\n\t\t\tthis._oscillatorData.y = this._oscillator.y;\n\t\t\tthis._oscillatorData.z = this._oscillator.z;\n\t\t\tthis._oscillatorData.w = Math.PI*2/this._oscillator.w;\n\t\t}\n\t}\n}\n\nexport = ParticleOscillatorState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticlePositionNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticlePositionNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n * @author ...\n */\nclass ParticlePositionState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static POSITION_INDEX:number /*uint*/ = 0;\n\n\tprivate _particlePositionNode:ParticlePositionNode;\n\tprivate _position:Vector3D;\n\n\t/**\n\t * Defines the position of the particle when in global mode. Defaults to 0,0,0.\n\t */\n\tpublic get position():Vector3D\n\t{\n\t\treturn this._position;\n\t}\n\n\tpublic set position(value:Vector3D)\n\t{\n\t\tthis._position = value;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic getPositions():Array<Vector3D>\n\t{\n\t\treturn this._pDynamicProperties;\n\t}\n\n\tpublic setPositions(value:Array<Vector3D>)\n\t{\n\t\tthis._pDynamicProperties = value;\n\n\t\tthis._pDynamicPropertiesDirty = new Object();\n\t}\n\n\tconstructor(animator:ParticleAnimator, particlePositionNode:ParticlePositionNode)\n\t{\n\t\tsuper(animator, particlePositionNode);\n\n\t\tthis._particlePositionNode = particlePositionNode;\n\t\tthis._position = this._particlePositionNode._iPosition;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (this._particlePositionNode.mode == ParticlePropertiesMode.LOCAL_DYNAMIC && !this._pDynamicPropertiesDirty[animationSubGeometry._iUniqueId])\n\t\t\tthis._pUpdateDynamicProperties(animationSubGeometry);\n\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticlePositionState.POSITION_INDEX);\n\n\t\tif (this._particlePositionNode.mode == ParticlePropertiesMode.GLOBAL)\n\t\t\tanimationRegisterCache.setVertexConst(index, this._position.x, this._position.y, this._position.z);\n\t\telse\n\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particlePositionNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t}\n}\n\nexport = ParticlePositionState;",
    "import Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport ParticleRotateToHeadingNode\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleRotateToHeadingNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleRotateToHeadingState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static MATRIX_INDEX:number /*int*/ = 0;\n\n\tprivate _matrix:Matrix3D = new Matrix3D();\n\n\tconstructor(animator:ParticleAnimator, particleNode:ParticleNodeBase)\n\t{\n\t\tsuper(animator, particleNode);\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (animationRegisterCache.hasBillboard) {\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\n\t\t\tthis._matrix.append(camera.inverseSceneTransform);\n\t\t\tanimationRegisterCache.setVertexConstFromMatrix(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleRotateToHeadingState.MATRIX_INDEX), this._matrix);\n\t\t}\n\t}\n\n}\n\nexport = ParticleRotateToHeadingState;",
    "import Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleRotateToPositionNode\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleRotateToPositionNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleRotateToPositionState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static MATRIX_INDEX:number /*int*/ = 0;\n\t/** @private */\n\tpublic static POSITION_INDEX:number /*int*/ = 1;\n\n\tprivate _particleRotateToPositionNode:ParticleRotateToPositionNode;\n\tprivate _position:Vector3D;\n\tprivate _matrix:Matrix3D = new Matrix3D();\n\tprivate _offset:Vector3D;\n\n\t/**\n\t * Defines the position of the point the particle will rotate to face when in global mode. Defaults to 0,0,0.\n\t */\n\tpublic get position():Vector3D\n\t{\n\t\treturn this._position;\n\t}\n\n\tpublic set position(value:Vector3D)\n\t{\n\t\tthis._position = value;\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleRotateToPositionNode:ParticleRotateToPositionNode)\n\t{\n\t\tsuper(animator, particleRotateToPositionNode);\n\n\t\tthis._particleRotateToPositionNode = particleRotateToPositionNode;\n\t\tthis._position = this._particleRotateToPositionNode._iPosition;\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleRotateToPositionState.POSITION_INDEX);\n\n\t\tif (animationRegisterCache.hasBillboard) {\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\n\t\t\tthis._matrix.append(camera.inverseSceneTransform);\n\t\t\tanimationRegisterCache.setVertexConstFromMatrix(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleRotateToPositionState.MATRIX_INDEX), this._matrix);\n\t\t}\n\n\t\tif (this._particleRotateToPositionNode.mode == ParticlePropertiesMode.GLOBAL) {\n\t\t\tthis._offset = renderable.sourceEntity.inverseSceneTransform.transformVector(this._position);\n\t\t\tanimationRegisterCache.setVertexConst(index, this._offset.x, this._offset.y, this._offset.z);\n\t\t} else\n\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleRotateToPositionNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\n\t}\n\n}\n\nexport = ParticleRotateToPositionState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleRotationalVelocityNode\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleRotationalVelocityNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleRotationalVelocityState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static ROTATIONALVELOCITY_INDEX:number /*uint*/ = 0;\n\n\tprivate _particleRotationalVelocityNode:ParticleRotationalVelocityNode;\n\tprivate _rotationalVelocityData:Vector3D;\n\tprivate _rotationalVelocity:Vector3D;\n\n\t/**\n\t * Defines the default rotationalVelocity of the state, used when in global mode.\n\t */\n\tpublic get rotationalVelocity():Vector3D\n\t{\n\t\treturn this._rotationalVelocity;\n\t}\n\n\tpublic set rotationalVelocity(value:Vector3D)\n\t{\n\t\tthis._rotationalVelocity = value;\n\n\t\tthis.updateRotationalVelocityData();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic getRotationalVelocities():Array<Vector3D>\n\t{\n\t\treturn this._pDynamicProperties;\n\t}\n\n\tpublic setRotationalVelocities(value:Array<Vector3D>)\n\t{\n\t\tthis._pDynamicProperties = value;\n\n\t\tthis._pDynamicPropertiesDirty = new Object();\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleRotationNode:ParticleRotationalVelocityNode)\n\t{\n\t\tsuper(animator, particleRotationNode);\n\n\t\tthis._particleRotationalVelocityNode = particleRotationNode;\n\t\tthis._rotationalVelocity = this._particleRotationalVelocityNode._iRotationalVelocity;\n\n\t\tthis.updateRotationalVelocityData();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (this._particleRotationalVelocityNode.mode == ParticlePropertiesMode.LOCAL_DYNAMIC && !this._pDynamicPropertiesDirty[animationSubGeometry._iUniqueId])\n\t\t\tthis._pUpdateDynamicProperties(animationSubGeometry);\n\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleRotationalVelocityState.ROTATIONALVELOCITY_INDEX);\n\n\t\tif (this._particleRotationalVelocityNode.mode == ParticlePropertiesMode.GLOBAL)\n\t\t\tanimationRegisterCache.setVertexConst(index, this._rotationalVelocityData.x, this._rotationalVelocityData.y, this._rotationalVelocityData.z, this._rotationalVelocityData.w);\n\t\telse\n\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleRotationalVelocityNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t}\n\n\tprivate updateRotationalVelocityData()\n\t{\n\t\tif (this._particleRotationalVelocityNode.mode == ParticlePropertiesMode.GLOBAL) {\n\t\t\tif (this._rotationalVelocity.w <= 0)\n\t\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\n\t\t\tvar rotation:Vector3D = this._rotationalVelocity.clone();\n\n\t\t\tif (rotation.length <= 0)\n\t\t\t\trotation.z = 1; //set the default direction\n\t\t\telse\n\t\t\t\trotation.normalize();\n\t\t\t// w is used as angle/2 in agal\n\t\t\tthis._rotationalVelocityData = new Vector3D(rotation.x, rotation.y, rotation.z, Math.PI/rotation.w);\n\t\t}\n\t}\n}\n\nexport = ParticleRotationalVelocityState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleScaleNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleScaleNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleScaleState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static SCALE_INDEX:number /*uint*/ = 0;\n\n\tprivate _particleScaleNode:ParticleScaleNode;\n\tprivate _usesCycle:boolean;\n\tprivate _usesPhase:boolean;\n\tprivate _minScale:number;\n\tprivate _maxScale:number;\n\tprivate _cycleDuration:number;\n\tprivate _cyclePhase:number;\n\tprivate _scaleData:Vector3D;\n\n\t/**\n\t * Defines the end scale of the state, when in global mode. Defaults to 1.\n\t */\n\tpublic get minScale():number\n\t{\n\t\treturn this._minScale;\n\t}\n\n\tpublic set minScale(value:number)\n\t{\n\t\tthis._minScale = value;\n\n\t\tthis.updateScaleData();\n\t}\n\n\t/**\n\t * Defines the end scale of the state, when in global mode. Defaults to 1.\n\t */\n\tpublic get maxScale():number\n\t{\n\t\treturn this._maxScale;\n\t}\n\n\tpublic set maxScale(value:number)\n\t{\n\t\tthis._maxScale = value;\n\n\t\tthis.updateScaleData();\n\t}\n\n\t/**\n\t * Defines the duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\n\t */\n\tpublic get cycleDuration():number\n\t{\n\t\treturn this._cycleDuration;\n\t}\n\n\tpublic set cycleDuration(value:number)\n\t{\n\t\tthis._cycleDuration = value;\n\n\t\tthis.updateScaleData();\n\t}\n\n\t/**\n\t * Defines the phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\n\t */\n\tpublic get cyclePhase():number\n\t{\n\t\treturn this._cyclePhase;\n\t}\n\n\tpublic set cyclePhase(value:number)\n\t{\n\t\tthis._cyclePhase = value;\n\n\t\tthis.updateScaleData();\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleScaleNode:ParticleScaleNode)\n\t{\n\t\tsuper(animator, particleScaleNode);\n\n\t\tthis._particleScaleNode = particleScaleNode;\n\t\tthis._usesCycle = this._particleScaleNode._iUsesCycle;\n\t\tthis._usesPhase = this._particleScaleNode._iUsesPhase;\n\t\tthis._minScale = this._particleScaleNode._iMinScale;\n\t\tthis._maxScale = this._particleScaleNode._iMaxScale;\n\t\tthis._cycleDuration = this._particleScaleNode._iCycleDuration;\n\t\tthis._cyclePhase = this._particleScaleNode._iCyclePhase;\n\n\t\tthis.updateScaleData();\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleScaleState.SCALE_INDEX);\n\n\t\tif (this._particleScaleNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\tif (this._usesCycle) {\n\t\t\t\tif (this._usesPhase)\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleScaleNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\t\t\t\telse\n\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleScaleNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t\t} else\n\t\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleScaleNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_2);\n\t\t} else\n\t\t\tanimationRegisterCache.setVertexConst(index, this._scaleData.x, this._scaleData.y, this._scaleData.z, this._scaleData.w);\n\t}\n\n\tprivate updateScaleData()\n\t{\n\t\tif (this._particleScaleNode.mode == ParticlePropertiesMode.GLOBAL) {\n\t\t\tif (this._usesCycle) {\n\t\t\t\tif (this._cycleDuration <= 0)\n\t\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\n\t\t\t\tthis._scaleData = new Vector3D((this._minScale + this._maxScale)/2, Math.abs(this._minScale - this._maxScale)/2, Math.PI*2/this._cycleDuration, this._cyclePhase*Math.PI/180);\n\t\t\t} else\n\t\t\t\tthis._scaleData = new Vector3D(this._minScale, this._maxScale - this._minScale, 0, 0);\n\t\t}\n\t}\n}\n\nexport = ParticleScaleState;",
    "import ColorTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ColorSegmentPoint\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ColorSegmentPoint\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleSegmentedColorNode\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleSegmentedColorNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n *\n */\nclass ParticleSegmentedColorState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static START_MULTIPLIER_INDEX:number /*uint*/ = 0;\n\n\t/** @private */\n\tpublic static START_OFFSET_INDEX:number /*uint*/ = 1;\n\n\t/** @private */\n\tpublic static TIME_DATA_INDEX:number /*uint*/ = 2;\n\n\tprivate _usesMultiplier:boolean;\n\tprivate _usesOffset:boolean;\n\tprivate _startColor:ColorTransform;\n\tprivate _endColor:ColorTransform;\n\tprivate _segmentPoints:Array<ColorSegmentPoint>;\n\tprivate _numSegmentPoint:number /*int*/;\n\n\tprivate _timeLifeData:Array<number>;\n\tprivate _multiplierData:Array<number>;\n\tprivate _offsetData:Array<number>;\n\n\t/**\n\t * Defines the start color transform of the state, when in global mode.\n\t */\n\tpublic get startColor():ColorTransform\n\t{\n\t\treturn this._startColor;\n\t}\n\n\tpublic set startColor(value:ColorTransform)\n\t{\n\t\tthis._startColor = value;\n\n\t\tthis.updateColorData();\n\t}\n\n\t/**\n\t * Defines the end color transform of the state, when in global mode.\n\t */\n\tpublic get endColor():ColorTransform\n\t{\n\t\treturn this._endColor;\n\t}\n\n\tpublic set endColor(value:ColorTransform)\n\t{\n\t\tthis._endColor = value;\n\t\tthis.updateColorData();\n\t}\n\n\t/**\n\t * Defines the number of segments.\n\t */\n\tpublic get numSegmentPoint():number /*int*/\n\t{\n\t\treturn this._numSegmentPoint;\n\t}\n\n\t/**\n\t * Defines the key points of color\n\t */\n\tpublic get segmentPoints():Array<ColorSegmentPoint>\n\t{\n\t\treturn this._segmentPoints;\n\t}\n\n\tpublic set segmentPoints(value:Array<ColorSegmentPoint>)\n\t{\n\t\tthis._segmentPoints = value;\n\t\tthis.updateColorData();\n\t}\n\n\tpublic get usesMultiplier():boolean\n\t{\n\t\treturn this._usesMultiplier;\n\t}\n\n\tpublic get usesOffset():boolean\n\t{\n\t\treturn this._usesOffset;\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleSegmentedColorNode:ParticleSegmentedColorNode)\n\t{\n\t\tsuper(animator, particleSegmentedColorNode);\n\n\t\tthis._usesMultiplier = particleSegmentedColorNode._iUsesMultiplier;\n\t\tthis._usesOffset = particleSegmentedColorNode._iUsesOffset;\n\t\tthis._startColor = particleSegmentedColorNode._iStartColor;\n\t\tthis._endColor = particleSegmentedColorNode._iEndColor;\n\t\tthis._segmentPoints = particleSegmentedColorNode._iSegmentPoints;\n\t\tthis._numSegmentPoint = particleSegmentedColorNode._iNumSegmentPoint;\n\t\tthis.updateColorData();\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (animationRegisterCache.needFragmentAnimation) {\n\t\t\tif (this._numSegmentPoint > 0)\n\t\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.TIME_DATA_INDEX), this._timeLifeData[0], this._timeLifeData[1], this._timeLifeData[2], this._timeLifeData[3]);\n\t\t\tif (this._usesMultiplier)\n\t\t\t\tanimationRegisterCache.setVertexConstFromArray(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_MULTIPLIER_INDEX), this._multiplierData);\n\t\t\tif (this._usesOffset)\n\t\t\t\tanimationRegisterCache.setVertexConstFromArray(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_OFFSET_INDEX), this._offsetData);\n\t\t}\n\t}\n\n\tprivate updateColorData()\n\t{\n\t\tthis._timeLifeData = new Array<number>();\n\t\tthis._multiplierData = new Array<number>();\n\t\tthis._offsetData = new Array<number>();\n\t\tvar i:number /*int*/;\n\t\tfor (i = 0; i < this._numSegmentPoint; i++) {\n\t\t\tif (i == 0)\n\t\t\t\tthis._timeLifeData.push(this._segmentPoints[i].life);\n\t\t\telse\n\t\t\t\tthis._timeLifeData.push(this._segmentPoints[i].life - this._segmentPoints[i - 1].life);\n\t\t}\n\t\tif (this._numSegmentPoint == 0)\n\t\t\tthis._timeLifeData.push(1);\n\t\telse\n\t\t\tthis._timeLifeData.push(1 - this._segmentPoints[i - 1].life);\n\n\t\tif (this._usesMultiplier) {\n\t\t\tthis._multiplierData.push(this._startColor.redMultiplier, this._startColor.greenMultiplier, this._startColor.blueMultiplier, this._startColor.alphaMultiplier);\n\t\t\tfor (i = 0; i < this._numSegmentPoint; i++) {\n\t\t\t\tif (i == 0)\n\t\t\t\t\tthis._multiplierData.push((this._segmentPoints[i].color.redMultiplier - this._startColor.redMultiplier)/this._timeLifeData[i], (this._segmentPoints[i].color.greenMultiplier - this._startColor.greenMultiplier)/this._timeLifeData[i], (this._segmentPoints[i].color.blueMultiplier - this._startColor.blueMultiplier)/this._timeLifeData[i], (this._segmentPoints[i].color.alphaMultiplier - this._startColor.alphaMultiplier)/this._timeLifeData[i]);\n\t\t\t\telse\n\t\t\t\t\tthis._multiplierData.push((this._segmentPoints[i].color.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier)/this._timeLifeData[i], (this._segmentPoints[i].color.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier)/this._timeLifeData[i], (this._segmentPoints[i].color.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier)/this._timeLifeData[i], (this._segmentPoints[i].color.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier)/this._timeLifeData[i]);\n\t\t\t}\n\t\t\tif (this._numSegmentPoint == 0)\n\t\t\t\tthis._multiplierData.push(this._endColor.redMultiplier - this._startColor.redMultiplier, this._endColor.greenMultiplier - this._startColor.greenMultiplier, this._endColor.blueMultiplier - this._startColor.blueMultiplier, this._endColor.alphaMultiplier - this._startColor.alphaMultiplier);\n\t\t\telse\n\t\t\t\tthis._multiplierData.push((this._endColor.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier)/this._timeLifeData[i], (this._endColor.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier)/this._timeLifeData[i], (this._endColor.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier)/this._timeLifeData[i], (this._endColor.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier)/this._timeLifeData[i]);\n\t\t}\n\n\t\tif (this._usesOffset) {\n\t\t\tthis._offsetData.push(this._startColor.redOffset/255, this._startColor.greenOffset/255, this._startColor.blueOffset/255, this._startColor.alphaOffset/255);\n\t\t\tfor (i = 0; i < this._numSegmentPoint; i++) {\n\t\t\t\tif (i == 0)\n\t\t\t\t\tthis._offsetData.push((this._segmentPoints[i].color.redOffset - this._startColor.redOffset)/this._timeLifeData[i]/255, (this._segmentPoints[i].color.greenOffset - this._startColor.greenOffset)/this._timeLifeData[i]/255, (this._segmentPoints[i].color.blueOffset - this._startColor.blueOffset)/this._timeLifeData[i]/255, (this._segmentPoints[i].color.alphaOffset - this._startColor.alphaOffset)/this._timeLifeData[i]/255);\n\t\t\t\telse\n\t\t\t\t\tthis._offsetData.push((this._segmentPoints[i].color.redOffset - this._segmentPoints[i - 1].color.redOffset)/this._timeLifeData[i]/255, (this._segmentPoints[i].color.greenOffset - this._segmentPoints[i - 1].color.greenOffset)/this._timeLifeData[i]/255, (this._segmentPoints[i].color.blueOffset - this._segmentPoints[i - 1].color.blueOffset)/this._timeLifeData[i]/255, (this._segmentPoints[i].color.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset)/this._timeLifeData[i]/255);\n\t\t\t}\n\t\t\tif (this._numSegmentPoint == 0)\n\t\t\t\tthis._offsetData.push((this._endColor.redOffset - this._startColor.redOffset)/255, (this._endColor.greenOffset - this._startColor.greenOffset)/255, (this._endColor.blueOffset - this._startColor.blueOffset)/255, (this._endColor.alphaOffset - this._startColor.alphaOffset)/255);\n\t\t\telse\n\t\t\t\tthis._offsetData.push((this._endColor.redOffset - this._segmentPoints[i - 1].color.redOffset)/this._timeLifeData[i]/255, (this._endColor.greenOffset - this._segmentPoints[i - 1].color.greenOffset)/this._timeLifeData[i]/255, (this._endColor.blueOffset - this._segmentPoints[i - 1].color.blueOffset)/this._timeLifeData[i]/255, (this._endColor.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset)/this._timeLifeData[i]/255);\n\t\t}\n\t\t//cut off the data\n\t\tthis._timeLifeData.length = 4;\n\t}\n}\n\nexport = ParticleSegmentedColorState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleSpriteSheetNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleSpriteSheetNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleSpriteSheetState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static UV_INDEX_0:number /*uint*/ = 0;\n\n\t/** @private */\n\tpublic static UV_INDEX_1:number /*uint*/ = 1;\n\n\tprivate _particleSpriteSheetNode:ParticleSpriteSheetNode;\n\tprivate _usesCycle:boolean;\n\tprivate _usesPhase:boolean;\n\tprivate _totalFrames:number /*int*/;\n\tprivate _numColumns:number /*int*/;\n\tprivate _numRows:number /*int*/;\n\tprivate _cycleDuration:number;\n\tprivate _cyclePhase:number;\n\tprivate _spriteSheetData:Array<number>;\n\n\t/**\n\t * Defines the cycle phase, when in global mode. Defaults to zero.\n\t */\n\tpublic get cyclePhase():number\n\t{\n\t\treturn this._cyclePhase;\n\t}\n\n\tpublic set cyclePhase(value:number)\n\t{\n\t\tthis._cyclePhase = value;\n\n\t\tthis.updateSpriteSheetData();\n\t}\n\n\t/**\n\t * Defines the cycle duration in seconds, when in global mode. Defaults to 1.\n\t */\n\tpublic get cycleDuration():number\n\t{\n\t\treturn this._cycleDuration;\n\t}\n\n\tpublic set cycleDuration(value:number)\n\t{\n\t\tthis._cycleDuration = value;\n\n\t\tthis.updateSpriteSheetData();\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleSpriteSheetNode:ParticleSpriteSheetNode)\n\t{\n\t\tsuper(animator, particleSpriteSheetNode);\n\n\t\tthis._particleSpriteSheetNode = particleSpriteSheetNode;\n\n\t\tthis._usesCycle = this._particleSpriteSheetNode._iUsesCycle;\n\t\tthis._usesPhase = this._particleSpriteSheetNode._iUsesCycle;\n\t\tthis._totalFrames = this._particleSpriteSheetNode._iTotalFrames;\n\t\tthis._numColumns = this._particleSpriteSheetNode._iNumColumns;\n\t\tthis._numRows = this._particleSpriteSheetNode._iNumRows;\n\t\tthis._cycleDuration = this._particleSpriteSheetNode._iCycleDuration;\n\t\tthis._cyclePhase = this._particleSpriteSheetNode._iCyclePhase;\n\n\t\tthis.updateSpriteSheetData();\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (animationRegisterCache.needUVAnimation) {\n\t\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSpriteSheetState.UV_INDEX_0), this._spriteSheetData[0], this._spriteSheetData[1], this._spriteSheetData[2], this._spriteSheetData[3]);\n\t\t\tif (this._usesCycle) {\n\t\t\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSpriteSheetState.UV_INDEX_1);\n\t\t\t\tif (this._particleSpriteSheetNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\n\t\t\t\t\tif (this._usesPhase)\n\t\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleSpriteSheetNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t\t\t\t\telse\n\t\t\t\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleSpriteSheetNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_2);\n\t\t\t\t} else\n\t\t\t\t\tanimationRegisterCache.setVertexConst(index, this._spriteSheetData[4], this._spriteSheetData[5]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateSpriteSheetData()\n\t{\n\t\tthis._spriteSheetData = new Array<number>(8);\n\n\t\tvar uTotal:number = this._totalFrames/this._numColumns;\n\n\t\tthis._spriteSheetData[0] = uTotal;\n\t\tthis._spriteSheetData[1] = 1/this._numColumns;\n\t\tthis._spriteSheetData[2] = 1/this._numRows;\n\n\t\tif (this._usesCycle) {\n\t\t\tif (this._cycleDuration <= 0)\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\n\t\t\tthis._spriteSheetData[4] = uTotal/this._cycleDuration;\n\t\t\tthis._spriteSheetData[5] = this._cycleDuration;\n\t\t\tif (this._usesPhase)\n\t\t\t\tthis._spriteSheetData[6] = this._cyclePhase;\n\t\t}\n\t}\n}\n\nexport = ParticleSpriteSheetState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticleAnimationData\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleAnimationData\");\nimport ParticleNodeBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase\");\nimport AnimationStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleStateBase extends AnimationStateBase\n{\n\tprivate _particleNode:ParticleNodeBase;\n\n\tpublic _pDynamicProperties:Array<Vector3D> = new Array<Vector3D>();\n\tpublic _pDynamicPropertiesDirty:Object = new Object();\n\n\tpublic _pNeedUpdateTime:boolean;\n\n\tconstructor(animator:ParticleAnimator, particleNode:ParticleNodeBase, needUpdateTime:boolean = false)\n\t{\n\t\tsuper(animator, particleNode);\n\n\t\tthis._particleNode = particleNode;\n\t\tthis._pNeedUpdateTime = needUpdateTime;\n\t}\n\n\tpublic get needUpdateTime():boolean\n\t{\n\t\treturn this._pNeedUpdateTime;\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\n\t}\n\n\tpublic _pUpdateDynamicProperties(animationSubGeometry:AnimationSubGeometry)\n\t{\n\t\tthis._pDynamicPropertiesDirty[animationSubGeometry._iUniqueId] = true;\n\n\t\tvar animationParticles:Array<ParticleAnimationData> = animationSubGeometry.animationParticles;\n\t\tvar vertexData:Array<number> = animationSubGeometry.vertexData;\n\t\tvar totalLenOfOneVertex:number /*uint*/ = animationSubGeometry.totalLenOfOneVertex;\n\t\tvar dataLength:number /*uint*/ = this._particleNode.dataLength;\n\t\tvar dataOffset:number /*uint*/ = this._particleNode._iDataOffset;\n\t\tvar vertexLength:number /*uint*/;\n\t\t//\t\t\tvar particleOffset:number /*uint*/;\n\t\tvar startingOffset:number /*uint*/;\n\t\tvar vertexOffset:number /*uint*/;\n\t\tvar data:Vector3D;\n\t\tvar animationParticle:ParticleAnimationData;\n\n\t\t//\t\t\tvar numParticles:number /*uint*/ = _positions.length/dataLength;\n\t\tvar numParticles:number /*uint*/ = this._pDynamicProperties.length;\n\t\tvar i:number /*uint*/ = 0;\n\t\tvar j:number /*uint*/ = 0;\n\t\tvar k:number /*uint*/ = 0;\n\n\t\t//loop through all particles\n\t\twhile (i < numParticles) {\n\t\t\t//loop through each particle data for the current particle\n\t\t\twhile (j < numParticles && (animationParticle = animationParticles[j]).index == i) {\n\t\t\t\tdata = this._pDynamicProperties[i];\n\t\t\t\tvertexLength = animationParticle.numVertices*totalLenOfOneVertex;\n\t\t\t\tstartingOffset = animationParticle.startVertexIndex*totalLenOfOneVertex + dataOffset;\n\t\t\t\t//loop through each vertex in the particle data\n\t\t\t\tfor (k = 0; k < vertexLength; k += totalLenOfOneVertex) {\n\t\t\t\t\tvertexOffset = startingOffset + k;\n\t\t\t\t\t//\t\t\t\t\t\tparticleOffset = i * dataLength;\n\t\t\t\t\t//loop through all vertex data for the current particle data\n\t\t\t\t\tfor (k = 0; k < vertexLength; k += totalLenOfOneVertex) {\n\t\t\t\t\t\tvertexOffset = startingOffset + k;\n\t\t\t\t\t\tvertexData[vertexOffset++] = data.x;\n\t\t\t\t\t\tvertexData[vertexOffset++] = data.y;\n\t\t\t\t\t\tvertexData[vertexOffset++] = data.z;\n\n\t\t\t\t\t\tif (dataLength == 4)\n\t\t\t\t\t\t\tvertexData[vertexOffset++] = data.w;\n\t\t\t\t\t}\n\t\t\t\t\t\t//loop through each value in the particle vertex\n\t\t\t\t\t\t//\t\t\t\t\t\tswitch(dataLength) {\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\n\t\t\t\t\t\t//\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tj++;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\n\t\tanimationSubGeometry.invalidateBuffer();\n\t}\n\n}\n\nexport = ParticleStateBase;",
    "import Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleTimeNode\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleTimeNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleTimeState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static TIME_STREAM_INDEX:number /*uint*/ = 0;\n\n\t/** @private */\n\tpublic static TIME_CONSTANT_INDEX:number /*uint*/ = 1;\n\n\tprivate _particleTimeNode:ParticleTimeNode;\n\n\tconstructor(animator:ParticleAnimator, particleTimeNode:ParticleTimeNode)\n\t{\n\t\tsuper(animator, particleTimeNode, true);\n\n\t\tthis._particleTimeNode = particleTimeNode;\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tanimationSubGeometry.activateVertexBuffer(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleTimeState.TIME_STREAM_INDEX), this._particleTimeNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\n\n\t\tvar particleTime:number = this._pTime/1000;\n\t\tanimationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleTimeState.TIME_CONSTANT_INDEX), particleTime, particleTime, particleTime, particleTime);\n\t}\n\n}\n\nexport = ParticleTimeState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticleUVNode\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleUVNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleUVState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static UV_INDEX:number /*uint*/ = 0;\n\n\tprivate _particleUVNode:ParticleUVNode;\n\n\tconstructor(animator:ParticleAnimator, particleUVNode:ParticleUVNode)\n\t{\n\t\tsuper(animator, particleUVNode);\n\n\t\tthis._particleUVNode = particleUVNode;\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (animationRegisterCache.needUVAnimation) {\n\t\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleUVState.UV_INDEX);\n\t\t\tvar data:Vector3D = this._particleUVNode._iUvData;\n\t\t\tanimationRegisterCache.setVertexConst(index, data.x, data.y);\n\t\t}\n\t}\n\n}\n\nexport = ParticleUVState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLVertexBufferFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\n\nimport ParticleAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/ParticleAnimator\");\nimport AnimationRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport AnimationSubGeometry\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationSubGeometry\");\nimport ParticlePropertiesMode\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode\");\nimport ParticleVelocityNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/ParticleVelocityNode\");\nimport ParticleStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ParticleStateBase\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ...\n */\nclass ParticleVelocityState extends ParticleStateBase\n{\n\t/** @private */\n\tpublic static VELOCITY_INDEX:number /*int*/ = 0;\n\n\tprivate _particleVelocityNode:ParticleVelocityNode;\n\tprivate _velocity:Vector3D;\n\n\t/**\n\t * Defines the default velocity vector of the state, used when in global mode.\n\t */\n\tpublic get velocity():Vector3D\n\t{\n\t\treturn this._velocity;\n\t}\n\n\tpublic set velocity(value:Vector3D)\n\t{\n\t\tthis._velocity = value;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic getVelocities():Array<Vector3D>\n\t{\n\t\treturn this._pDynamicProperties;\n\t}\n\n\tpublic setVelocities(value:Array<Vector3D>)\n\t{\n\t\tthis._pDynamicProperties = value;\n\n\t\tthis._pDynamicPropertiesDirty = new Object();\n\t}\n\n\tconstructor(animator:ParticleAnimator, particleVelocityNode:ParticleVelocityNode)\n\t{\n\t\tsuper(animator, particleVelocityNode);\n\n\t\tthis._particleVelocityNode = particleVelocityNode;\n\t\tthis._velocity = this._particleVelocityNode._iVelocity;\n\t}\n\n\tpublic setRenderState(stage:Stage, renderable:RenderableBase, animationSubGeometry:AnimationSubGeometry, animationRegisterCache:AnimationRegisterCache, camera:Camera)\n\t{\n\t\tif (this._particleVelocityNode.mode == ParticlePropertiesMode.LOCAL_DYNAMIC && !this._pDynamicPropertiesDirty[animationSubGeometry._iUniqueId])\n\t\t\tthis._pUpdateDynamicProperties(animationSubGeometry);\n\n\t\tvar index:number /*int*/ = animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleVelocityState.VELOCITY_INDEX);\n\n\t\tif (this._particleVelocityNode.mode == ParticlePropertiesMode.GLOBAL)\n\t\t\tanimationRegisterCache.setVertexConst(index, this._velocity.x, this._velocity.y, this._velocity.z);\n\t\telse\n\t\t\tanimationSubGeometry.activateVertexBuffer(index, this._particleVelocityNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\n\t}\n}\n\nexport = ParticleVelocityState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport JointPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/JointPose\");\nimport Skeleton\t\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/Skeleton\");\nimport SkeletonPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonPose\");\nimport SkeletonBinaryLERPNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode\");\nimport AnimationStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationStateBase\");\nimport ISkeletonAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ISkeletonAnimationState\");\n\n/**\n *\n */\nclass SkeletonBinaryLERPState extends AnimationStateBase implements ISkeletonAnimationState\n{\n\tprivate _blendWeight:number = 0;\n\tprivate _skeletonAnimationNode:SkeletonBinaryLERPNode;\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\n\tprivate _skeletonPoseDirty:boolean = true;\n\tprivate _inputA:ISkeletonAnimationState;\n\tprivate _inputB:ISkeletonAnimationState;\n\n\t/**\n\t * Defines a fractional value between 0 and 1 representing the blending ratio between inputA (0) and inputB (1),\n\t * used to produce the skeleton pose output.\n\t *\n\t * @see inputA\n\t * @see inputB\n\t */\n\tpublic get blendWeight():number\n\t{\n\t\treturn this._blendWeight;\n\t}\n\n\tpublic set blendWeight(value:number)\n\t{\n\t\tthis._blendWeight = value;\n\n\t\tthis._pPositionDeltaDirty = true;\n\t\tthis._skeletonPoseDirty = true;\n\t}\n\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonBinaryLERPNode)\n\t{\n\t\tsuper(animator, skeletonAnimationNode);\n\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\n\n\t\tthis._inputA = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.inputA);\n\t\tthis._inputB = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.inputB);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic phase(value:number)\n\t{\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tthis._pPositionDeltaDirty = true;\n\n\t\tthis._inputA.phase(value);\n\t\tthis._inputB.phase(value);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateTime(time:number /*int*/)\n\t{\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tthis._inputA.update(time);\n\t\tthis._inputB.update(time);\n\n\t\tsuper._pUpdateTime(time);\n\t}\n\n\t/**\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\n\t */\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\n\t{\n\t\tif (this._skeletonPoseDirty)\n\t\t\tthis.updateSkeletonPose(skeleton);\n\n\t\treturn this._skeletonPose;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdatePositionDelta()\n\t{\n\t\tthis._pPositionDeltaDirty = false;\n\n\t\tvar deltA:Vector3D = this._inputA.positionDelta;\n\t\tvar deltB:Vector3D = this._inputB.positionDelta;\n\n\t\tthis._pRootDelta.x = deltA.x + this._blendWeight*(deltB.x - deltA.x);\n\t\tthis._pRootDelta.y = deltA.y + this._blendWeight*(deltB.y - deltA.y);\n\t\tthis._pRootDelta.z = deltA.z + this._blendWeight*(deltB.z - deltA.z);\n\t}\n\n\t/**\n\t * Updates the output skeleton pose of the node based on the blendWeight value between input nodes.\n\t *\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\n\t */\n\tprivate updateSkeletonPose(skeleton:Skeleton)\n\t{\n\t\tthis._skeletonPoseDirty = false;\n\n\t\tvar endPose:JointPose;\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\n\t\tvar poses1:Array<JointPose> = this._inputA.getSkeletonPose(skeleton).jointPoses;\n\t\tvar poses2:Array<JointPose> = this._inputB.getSkeletonPose(skeleton).jointPoses;\n\t\tvar pose1:JointPose, pose2:JointPose;\n\t\tvar p1:Vector3D, p2:Vector3D;\n\t\tvar tr:Vector3D;\n\t\tvar numJoints:number /*uint*/ = skeleton.numJoints;\n\n\t\t// :s\n\t\tif (endPoses.length != numJoints)\n\t\t\tendPoses.length = numJoints;\n\n\t\tfor (var i:number /*uint*/ = 0; i < numJoints; ++i) {\n\t\t\tendPose = endPoses[i];\n\n\t\t\tif (endPose == null)\n\t\t\t\tendPose = endPoses[i] = new JointPose();\n\n\t\t\tpose1 = poses1[i];\n\t\t\tpose2 = poses2[i];\n\t\t\tp1 = pose1.translation;\n\t\t\tp2 = pose2.translation;\n\n\t\t\tendPose.orientation.lerp(pose1.orientation, pose2.orientation, this._blendWeight);\n\n\t\t\ttr = endPose.translation;\n\t\t\ttr.x = p1.x + this._blendWeight*(p2.x - p1.x);\n\t\t\ttr.y = p1.y + this._blendWeight*(p2.y - p1.y);\n\t\t\ttr.z = p1.z + this._blendWeight*(p2.z - p1.z);\n\t\t}\n\t}\n}\n\nexport = SkeletonBinaryLERPState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport SkeletonAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/SkeletonAnimator\");\nimport JointPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/JointPose\");\nimport Skeleton\t\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/Skeleton\");\nimport SkeletonPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonPose\");\nimport SkeletonClipNode\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonClipNode\");\nimport AnimationClipState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationClipState\");\nimport ISkeletonAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ISkeletonAnimationState\");\n\n/**\n *\n */\nclass SkeletonClipState extends AnimationClipState implements ISkeletonAnimationState\n{\n\tprivate _rootPos:Vector3D = new Vector3D();\n\tprivate _frames:Array<SkeletonPose>;\n\tprivate _skeletonClipNode:SkeletonClipNode;\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\n\tprivate _skeletonPoseDirty:boolean = true;\n\tprivate _currentPose:SkeletonPose;\n\tprivate _nextPose:SkeletonPose;\n\n\t/**\n\t * Returns the current skeleton pose frame of animation in the clip based on the internal playhead position.\n\t */\n\tpublic get currentPose():SkeletonPose\n\t{\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\treturn this._currentPose;\n\t}\n\n\t/**\n\t * Returns the next skeleton pose frame of animation in the clip based on the internal playhead position.\n\t */\n\tpublic get nextPose():SkeletonPose\n\t{\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\treturn this._nextPose;\n\t}\n\n\tconstructor(animator:AnimatorBase, skeletonClipNode:SkeletonClipNode)\n\t{\n\t\tsuper(animator, skeletonClipNode);\n\n\t\tthis._skeletonClipNode = skeletonClipNode;\n\t\tthis._frames = this._skeletonClipNode.frames;\n\t}\n\n\t/**\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\n\t */\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\n\t{\n\t\tif (this._skeletonPoseDirty)\n\t\t\tthis.updateSkeletonPose(skeleton);\n\n\t\treturn this._skeletonPose;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateTime(time:number /*int*/)\n\t{\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tsuper._pUpdateTime(time);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateFrames()\n\t{\n\t\tsuper._pUpdateFrames();\n\n\t\tthis._currentPose = this._frames[this._pCurrentFrame];\n\n\t\tif (this._skeletonClipNode.looping && this._pNextFrame >= this._skeletonClipNode.lastFrame) {\n\t\t\tthis._nextPose = this._frames[0];\n\t\t\t(<SkeletonAnimator> this._pAnimator).dispatchCycleEvent();\n\t\t} else\n\t\t\tthis._nextPose = this._frames[this._pNextFrame];\n\t}\n\n\t/**\n\t * Updates the output skeleton pose of the node based on the internal playhead position.\n\t *\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\n\t */\n\tprivate updateSkeletonPose(skeleton:Skeleton)\n\t{\n\t\tthis._skeletonPoseDirty = false;\n\n\t\tif (!this._skeletonClipNode.totalDuration)\n\t\t\treturn;\n\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\tvar currentPose:Array<JointPose> = this._currentPose.jointPoses;\n\t\tvar nextPose:Array<JointPose> = this._nextPose.jointPoses;\n\t\tvar numJoints:number /*uint*/ = skeleton.numJoints;\n\t\tvar p1:Vector3D, p2:Vector3D;\n\t\tvar pose1:JointPose, pose2:JointPose;\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\n\t\tvar endPose:JointPose;\n\t\tvar tr:Vector3D;\n\n\t\t// :s\n\t\tif (endPoses.length != numJoints)\n\t\t\tendPoses.length = numJoints;\n\n\t\tif ((numJoints != currentPose.length) || (numJoints != nextPose.length))\n\t\t\tthrow new Error(\"joint counts don't match!\");\n\n\t\tfor (var i:number /*uint*/ = 0; i < numJoints; ++i) {\n\t\t\tendPose = endPoses[i];\n\n\t\t\tif (endPose == null)\n\t\t\t\tendPose = endPoses[i] = new JointPose();\n\n\t\t\tpose1 = currentPose[i];\n\t\t\tpose2 = nextPose[i];\n\t\t\tp1 = pose1.translation;\n\t\t\tp2 = pose2.translation;\n\n\t\t\tif (this._skeletonClipNode.highQuality)\n\t\t\t\tendPose.orientation.slerp(pose1.orientation, pose2.orientation, this._pBlendWeight); else\n\t\t\t\tendPose.orientation.lerp(pose1.orientation, pose2.orientation, this._pBlendWeight);\n\n\t\t\tif (i > 0) {\n\t\t\t\ttr = endPose.translation;\n\t\t\t\ttr.x = p1.x + this._pBlendWeight*(p2.x - p1.x);\n\t\t\t\ttr.y = p1.y + this._pBlendWeight*(p2.y - p1.y);\n\t\t\t\ttr.z = p1.z + this._pBlendWeight*(p2.z - p1.z);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdatePositionDelta()\n\t{\n\t\tthis._pPositionDeltaDirty = false;\n\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\tvar p1:Vector3D, p2:Vector3D, p3:Vector3D;\n\t\tvar totalDelta:Vector3D = this._skeletonClipNode.totalDelta;\n\n\t\t// jumping back, need to reset position\n\t\tif ((this._pTimeDir > 0 && this._pNextFrame < this._pOldFrame) || (this._pTimeDir < 0 && this._pNextFrame > this._pOldFrame)) {\n\t\t\tthis._rootPos.x -= totalDelta.x*this._pTimeDir;\n\t\t\tthis._rootPos.y -= totalDelta.y*this._pTimeDir;\n\t\t\tthis._rootPos.z -= totalDelta.z*this._pTimeDir;\n\t\t}\n\n\t\tvar dx:number = this._rootPos.x;\n\t\tvar dy:number = this._rootPos.y;\n\t\tvar dz:number = this._rootPos.z;\n\n\t\tif (this._skeletonClipNode.stitchFinalFrame && this._pNextFrame == this._skeletonClipNode.lastFrame) {\n\t\t\tp1 = this._frames[0].jointPoses[0].translation;\n\t\t\tp2 = this._frames[1].jointPoses[0].translation;\n\t\t\tp3 = this._currentPose.jointPoses[0].translation;\n\n\t\t\tthis._rootPos.x = p3.x + p1.x + this._pBlendWeight*(p2.x - p1.x);\n\t\t\tthis._rootPos.y = p3.y + p1.y + this._pBlendWeight*(p2.y - p1.y);\n\t\t\tthis._rootPos.z = p3.z + p1.z + this._pBlendWeight*(p2.z - p1.z);\n\t\t} else {\n\t\t\tp1 = this._currentPose.jointPoses[0].translation;\n\t\t\tp2 = this._frames[this._pNextFrame].jointPoses[0].translation; //cover the instances where we wrap the pose but still want the final frame translation values\n\t\t\tthis._rootPos.x = p1.x + this._pBlendWeight*(p2.x - p1.x);\n\t\t\tthis._rootPos.y = p1.y + this._pBlendWeight*(p2.y - p1.y);\n\t\t\tthis._rootPos.z = p1.z + this._pBlendWeight*(p2.z - p1.z);\n\t\t}\n\n\t\tthis._pRootDelta.x = this._rootPos.x - dx;\n\t\tthis._pRootDelta.y = this._rootPos.y - dy;\n\t\tthis._pRootDelta.z = this._rootPos.z - dz;\n\n\t\tthis._pOldFrame = this._pNextFrame;\n\t}\n}\n\nexport = SkeletonClipState;",
    "import Quaternion\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Quaternion\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport JointPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/JointPose\");\nimport Skeleton\t\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/Skeleton\");\nimport SkeletonPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonPose\");\nimport SkeletonDifferenceNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonDifferenceNode\");\nimport AnimationStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationStateBase\");\nimport ISkeletonAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ISkeletonAnimationState\");\n\n/**\n *\n */\nclass SkeletonDifferenceState extends AnimationStateBase implements ISkeletonAnimationState\n{\n\tprivate _blendWeight:number = 0;\n\tprivate static _tempQuat:Quaternion = new Quaternion();\n\tprivate _skeletonAnimationNode:SkeletonDifferenceNode;\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\n\tprivate _skeletonPoseDirty:boolean = true;\n\tprivate _baseInput:ISkeletonAnimationState;\n\tprivate _differenceInput:ISkeletonAnimationState;\n\n\t/**\n\t * Defines a fractional value between 0 and 1 representing the blending ratio between the base input (0) and difference input (1),\n\t * used to produce the skeleton pose output.\n\t *\n\t * @see #baseInput\n\t * @see #differenceInput\n\t */\n\tpublic get blendWeight():number\n\t{\n\t\treturn this._blendWeight;\n\t}\n\n\tpublic set blendWeight(value:number)\n\t{\n\t\tthis._blendWeight = value;\n\n\t\tthis._pPositionDeltaDirty = true;\n\t\tthis._skeletonPoseDirty = true;\n\t}\n\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonDifferenceNode)\n\t{\n\t\tsuper(animator, skeletonAnimationNode);\n\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\n\n\t\tthis._baseInput = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.baseInput);\n\t\tthis._differenceInput = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.differenceInput);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic phase(value:number)\n\t{\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tthis._pPositionDeltaDirty = true;\n\n\t\tthis._baseInput.phase(value);\n\t\tthis._baseInput.phase(value);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateTime(time:number /*int*/)\n\t{\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tthis._baseInput.update(time);\n\t\tthis._differenceInput.update(time);\n\n\t\tsuper._pUpdateTime(time);\n\t}\n\n\t/**\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\n\t */\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\n\t{\n\t\tif (this._skeletonPoseDirty)\n\t\t\tthis.updateSkeletonPose(skeleton);\n\n\t\treturn this._skeletonPose;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdatePositionDelta()\n\t{\n\t\tthis._pPositionDeltaDirty = false;\n\n\t\tvar deltA:Vector3D = this._baseInput.positionDelta;\n\t\tvar deltB:Vector3D = this._differenceInput.positionDelta;\n\n\t\tthis.positionDelta.x = deltA.x + this._blendWeight*deltB.x;\n\t\tthis.positionDelta.y = deltA.y + this._blendWeight*deltB.y;\n\t\tthis.positionDelta.z = deltA.z + this._blendWeight*deltB.z;\n\t}\n\n\t/**\n\t * Updates the output skeleton pose of the node based on the blendWeight value between base input and difference input nodes.\n\t *\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\n\t */\n\tprivate updateSkeletonPose(skeleton:Skeleton)\n\t{\n\t\tthis._skeletonPoseDirty = false;\n\n\t\tvar endPose:JointPose;\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\n\t\tvar basePoses:Array<JointPose> = this._baseInput.getSkeletonPose(skeleton).jointPoses;\n\t\tvar diffPoses:Array<JointPose> = this._differenceInput.getSkeletonPose(skeleton).jointPoses;\n\t\tvar base:JointPose, diff:JointPose;\n\t\tvar basePos:Vector3D, diffPos:Vector3D;\n\t\tvar tr:Vector3D;\n\t\tvar numJoints:number /*uint*/ = skeleton.numJoints;\n\n\t\t// :s\n\t\tif (endPoses.length != numJoints)\n\t\t\tendPoses.length = numJoints;\n\n\t\tfor (var i:number /*uint*/ = 0; i < numJoints; ++i) {\n\t\t\tendPose = endPoses[i];\n\n\t\t\tif (endPose == null)\n\t\t\t\tendPose = endPoses[i] = new JointPose();\n\n\t\t\tbase = basePoses[i];\n\t\t\tdiff = diffPoses[i];\n\t\t\tbasePos = base.translation;\n\t\t\tdiffPos = diff.translation;\n\n\t\t\tSkeletonDifferenceState._tempQuat.multiply(diff.orientation, base.orientation);\n\t\t\tendPose.orientation.lerp(base.orientation, SkeletonDifferenceState._tempQuat, this._blendWeight);\n\n\t\t\ttr = endPose.translation;\n\t\t\ttr.x = basePos.x + this._blendWeight*diffPos.x;\n\t\t\ttr.y = basePos.y + this._blendWeight*diffPos.y;\n\t\t\ttr.z = basePos.z + this._blendWeight*diffPos.z;\n\t\t}\n\t}\n}\n\nexport = SkeletonDifferenceState;",
    "import Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport JointPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/JointPose\");\nimport Skeleton\t\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/Skeleton\");\nimport SkeletonPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonPose\");\nimport SkeletonDirectionalNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonDirectionalNode\");\nimport AnimationStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationStateBase\");\nimport ISkeletonAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ISkeletonAnimationState\");\n\n/**\n *\n */\nclass SkeletonDirectionalState extends AnimationStateBase implements ISkeletonAnimationState\n{\n\tprivate _skeletonAnimationNode:SkeletonDirectionalNode;\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\n\tprivate _skeletonPoseDirty:boolean = true;\n\tprivate _inputA:ISkeletonAnimationState;\n\tprivate _inputB:ISkeletonAnimationState;\n\tprivate _blendWeight:number = 0;\n\tprivate _direction:number = 0;\n\tprivate _blendDirty:boolean = true;\n\tprivate _forward:ISkeletonAnimationState;\n\tprivate _backward:ISkeletonAnimationState;\n\tprivate _left:ISkeletonAnimationState;\n\tprivate _right:ISkeletonAnimationState;\n\n\t/**\n\t * Defines the direction in degrees of the aniamtion between the forwards (0), right(90) backwards (180) and left(270) input nodes,\n\t * used to produce the skeleton pose output.\n\t */\n\tpublic set direction(value:number)\n\t{\n\t\tif (this._direction == value)\n\t\t\treturn;\n\n\t\tthis._direction = value;\n\n\t\tthis._blendDirty = true;\n\n\t\tthis._skeletonPoseDirty = true;\n\t\tthis._pPositionDeltaDirty = true;\n\t}\n\n\tpublic get direction():number\n\t{\n\t\treturn this._direction;\n\t}\n\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonDirectionalNode)\n\t{\n\t\tsuper(animator, skeletonAnimationNode);\n\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\n\n\t\tthis._forward = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.forward);\n\t\tthis._backward = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.backward);\n\t\tthis._left = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.left);\n\t\tthis._right = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.right);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic phase(value:number)\n\t{\n\t\tif (this._blendDirty)\n\t\t\tthis.updateBlend();\n\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tthis._pPositionDeltaDirty = true;\n\n\t\tthis._inputA.phase(value);\n\t\tthis._inputB.phase(value);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUdateTime(time:number /*int*/)\n\t{\n\t\tif (this._blendDirty)\n\t\t\tthis.updateBlend();\n\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tthis._inputA.update(time);\n\t\tthis._inputB.update(time);\n\n\t\tsuper._pUpdateTime(time);\n\t}\n\n\t/**\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\n\t */\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\n\t{\n\t\tif (this._skeletonPoseDirty)\n\t\t\tthis.updateSkeletonPose(skeleton);\n\n\t\treturn this._skeletonPose;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdatePositionDelta()\n\t{\n\t\tthis._pPositionDeltaDirty = false;\n\n\t\tif (this._blendDirty)\n\t\t\tthis.updateBlend();\n\n\t\tvar deltA:Vector3D = this._inputA.positionDelta;\n\t\tvar deltB:Vector3D = this._inputB.positionDelta;\n\n\t\tthis.positionDelta.x = deltA.x + this._blendWeight*(deltB.x - deltA.x);\n\t\tthis.positionDelta.y = deltA.y + this._blendWeight*(deltB.y - deltA.y);\n\t\tthis.positionDelta.z = deltA.z + this._blendWeight*(deltB.z - deltA.z);\n\t}\n\n\t/**\n\t * Updates the output skeleton pose of the node based on the direction value between forward, backwards, left and right input nodes.\n\t *\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\n\t */\n\tprivate updateSkeletonPose(skeleton:Skeleton)\n\t{\n\t\tthis._skeletonPoseDirty = false;\n\n\t\tif (this._blendDirty)\n\t\t\tthis.updateBlend();\n\n\t\tvar endPose:JointPose;\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\n\t\tvar poses1:Array<JointPose> = this._inputA.getSkeletonPose(skeleton).jointPoses;\n\t\tvar poses2:Array<JointPose> = this._inputB.getSkeletonPose(skeleton).jointPoses;\n\t\tvar pose1:JointPose, pose2:JointPose;\n\t\tvar p1:Vector3D, p2:Vector3D;\n\t\tvar tr:Vector3D;\n\t\tvar numJoints:number /*uint*/ = skeleton.numJoints;\n\n\t\t// :s\n\t\tif (endPoses.length != numJoints)\n\t\t\tendPoses.length = numJoints;\n\n\t\tfor (var i:number /*uint*/ = 0; i < numJoints; ++i) {\n\t\t\tendPose = endPoses[i];\n\n\t\t\tif (endPose == null)\n\t\t\t\tendPose = endPoses[i] = new JointPose();\n\n\t\t\tpose1 = poses1[i];\n\t\t\tpose2 = poses2[i];\n\t\t\tp1 = pose1.translation;\n\t\t\tp2 = pose2.translation;\n\n\t\t\tendPose.orientation.lerp(pose1.orientation, pose2.orientation, this._blendWeight);\n\n\t\t\ttr = endPose.translation;\n\t\t\ttr.x = p1.x + this._blendWeight*(p2.x - p1.x);\n\t\t\ttr.y = p1.y + this._blendWeight*(p2.y - p1.y);\n\t\t\ttr.z = p1.z + this._blendWeight*(p2.z - p1.z);\n\t\t}\n\t}\n\n\t/**\n\t * Updates the blend value for the animation output based on the direction value between forward, backwards, left and right input nodes.\n\t *\n\t * @private\n\t */\n\tprivate updateBlend()\n\t{\n\t\tthis._blendDirty = false;\n\n\t\tif (this._direction < 0 || this._direction > 360) {\n\t\t\tthis._direction %= 360;\n\t\t\tif (this._direction < 0)\n\t\t\t\tthis._direction += 360;\n\t\t}\n\n\t\tif (this._direction < 90) {\n\t\t\tthis._inputA = this._forward;\n\t\t\tthis._inputB = this._right;\n\t\t\tthis._blendWeight = this._direction/90;\n\t\t} else if (this._direction < 180) {\n\t\t\tthis._inputA = this._right;\n\t\t\tthis._inputB = this._backward;\n\t\t\tthis._blendWeight = (this._direction - 90)/90;\n\t\t} else if (this._direction < 270) {\n\t\t\tthis._inputA = this._backward;\n\t\t\tthis._inputB = this._left;\n\t\t\tthis._blendWeight = (this._direction - 180)/90;\n\t\t} else {\n\t\t\tthis._inputA = this._left;\n\t\t\tthis._inputB = this._forward;\n\t\t\tthis._blendWeight = (this._direction - 270)/90;\n\t\t}\n\t}\n}\n\nexport = SkeletonDirectionalState;",
    "import Quaternion\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Quaternion\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport JointPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/JointPose\");\nimport Skeleton\t\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/Skeleton\");\nimport SkeletonPose\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/SkeletonPose\");\nimport SkeletonNaryLERPNode\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonNaryLERPNode\");\nimport AnimationStateBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationStateBase\");\nimport ISkeletonAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/ISkeletonAnimationState\");\n\n/**\n *\n */\nclass SkeletonNaryLERPState extends AnimationStateBase implements ISkeletonAnimationState\n{\n\tprivate _skeletonAnimationNode:SkeletonNaryLERPNode;\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\n\tprivate _skeletonPoseDirty:boolean = true;\n\tprivate _blendWeights:Array<number> = new Array<number>();\n\tprivate _inputs:Array<ISkeletonAnimationState> = new Array<ISkeletonAnimationState>();\n\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonNaryLERPNode)\n\t{\n\t\tsuper(animator, skeletonAnimationNode);\n\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\n\n\t\tvar i:number /*uint*/ = this._skeletonAnimationNode.numInputs;\n\n\t\twhile (i--)\n\t\t\tthis._inputs[i] = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode._iInputs[i]);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic phase(value:number)\n\t{\n\t\tthis._skeletonPoseDirty = true;\n\n\t\tthis._pPositionDeltaDirty = true;\n\n\t\tfor (var j:number /*uint*/ = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\n\t\t\tif (this._blendWeights[j])\n\t\t\t\tthis._inputs[j].update(value);\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUdateTime(time:number /*int*/)\n\t{\n\t\tfor (var j:number /*uint*/ = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\n\t\t\tif (this._blendWeights[j])\n\t\t\t\tthis._inputs[j].update(time);\n\t\t}\n\n\t\tsuper._pUpdateTime(time);\n\t}\n\n\t/**\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\n\t */\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\n\t{\n\t\tif (this._skeletonPoseDirty)\n\t\t\tthis.updateSkeletonPose(skeleton);\n\n\t\treturn this._skeletonPose;\n\t}\n\n\t/**\n\t * Returns the blend weight of the skeleton aniamtion node that resides at the given input index.\n\t *\n\t * @param index The input index for which the skeleton animation node blend weight is requested.\n\t */\n\tpublic getBlendWeightAt(index:number /*uint*/):number\n\t{\n\t\treturn this._blendWeights[index];\n\t}\n\n\t/**\n\t * Sets the blend weight of the skeleton aniamtion node that resides at the given input index.\n\t *\n\t * @param index The input index on which the skeleton animation node blend weight is to be set.\n\t * @param blendWeight The blend weight value to use for the given skeleton animation node index.\n\t */\n\tpublic setBlendWeightAt(index:number /*uint*/, blendWeight:number)\n\t{\n\t\tthis._blendWeights[index] = blendWeight;\n\n\t\tthis._pPositionDeltaDirty = true;\n\t\tthis._skeletonPoseDirty = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdatePositionDelta()\n\t{\n\t\tthis._pPositionDeltaDirty = false;\n\n\t\tvar delta:Vector3D;\n\t\tvar weight:number;\n\n\t\tthis.positionDelta.x = 0;\n\t\tthis.positionDelta.y = 0;\n\t\tthis.positionDelta.z = 0;\n\n\t\tfor (var j:number /*uint*/ = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\n\t\t\tweight = this._blendWeights[j];\n\n\t\t\tif (weight) {\n\t\t\t\tdelta = this._inputs[j].positionDelta;\n\t\t\t\tthis.positionDelta.x += weight*delta.x;\n\t\t\t\tthis.positionDelta.y += weight*delta.y;\n\t\t\t\tthis.positionDelta.z += weight*delta.z;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Updates the output skeleton pose of the node based on the blend weight values given to the input nodes.\n\t *\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\n\t */\n\tprivate updateSkeletonPose(skeleton:Skeleton)\n\t{\n\t\tthis._skeletonPoseDirty = false;\n\n\t\tvar weight:number;\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\n\t\tvar poses:Array<JointPose>;\n\t\tvar endPose:JointPose, pose:JointPose;\n\t\tvar endTr:Vector3D, tr:Vector3D;\n\t\tvar endQuat:Quaternion, q:Quaternion;\n\t\tvar firstPose:Array<JointPose>;\n\t\tvar i:number /*uint*/;\n\t\tvar w0:number, x0:number, y0:number, z0:number;\n\t\tvar w1:number, x1:number, y1:number, z1:number;\n\t\tvar numJoints:number /*uint*/ = skeleton.numJoints;\n\n\t\t// :s\n\t\tif (endPoses.length != numJoints)\n\t\t\tendPoses.length = numJoints;\n\n\t\tfor (var j:number /*uint*/ = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\n\t\t\tweight = this._blendWeights[j];\n\n\t\t\tif (!weight)\n\t\t\t\tcontinue;\n\n\t\t\tposes = this._inputs[j].getSkeletonPose(skeleton).jointPoses;\n\n\t\t\tif (!firstPose) {\n\t\t\t\tfirstPose = poses;\n\t\t\t\tfor (i = 0; i < numJoints; ++i) {\n\t\t\t\t\tendPose = endPoses[i];\n\n\t\t\t\t\tif (endPose == null)\n\t\t\t\t\t\tendPose = endPoses[i] = new JointPose();\n\n\t\t\t\t\tpose = poses[i];\n\t\t\t\t\tq = pose.orientation;\n\t\t\t\t\ttr = pose.translation;\n\n\t\t\t\t\tendQuat = endPose.orientation;\n\n\t\t\t\t\tendQuat.x = weight*q.x;\n\t\t\t\t\tendQuat.y = weight*q.y;\n\t\t\t\t\tendQuat.z = weight*q.z;\n\t\t\t\t\tendQuat.w = weight*q.w;\n\n\t\t\t\t\tendTr = endPose.translation;\n\t\t\t\t\tendTr.x = weight*tr.x;\n\t\t\t\t\tendTr.y = weight*tr.y;\n\t\t\t\t\tendTr.z = weight*tr.z;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < skeleton.numJoints; ++i) {\n\t\t\t\t\tendPose = endPoses[i];\n\t\t\t\t\tpose = poses[i];\n\n\t\t\t\t\tq = firstPose[i].orientation;\n\t\t\t\t\tx0 = q.x;\n\t\t\t\t\ty0 = q.y;\n\t\t\t\t\tz0 = q.z;\n\t\t\t\t\tw0 = q.w;\n\n\t\t\t\t\tq = pose.orientation;\n\t\t\t\t\ttr = pose.translation;\n\n\t\t\t\t\tx1 = q.x;\n\t\t\t\t\ty1 = q.y;\n\t\t\t\t\tz1 = q.z;\n\t\t\t\t\tw1 = q.w;\n\t\t\t\t\t// find shortest direction\n\t\t\t\t\tif (x0*x1 + y0*y1 + z0*z1 + w0*w1 < 0) {\n\t\t\t\t\t\tx1 = -x1;\n\t\t\t\t\t\ty1 = -y1;\n\t\t\t\t\t\tz1 = -z1;\n\t\t\t\t\t\tw1 = -w1;\n\t\t\t\t\t}\n\t\t\t\t\tendQuat = endPose.orientation;\n\t\t\t\t\tendQuat.x += weight*x1;\n\t\t\t\t\tendQuat.y += weight*y1;\n\t\t\t\t\tendQuat.z += weight*z1;\n\t\t\t\t\tendQuat.w += weight*w1;\n\n\t\t\t\t\tendTr = endPose.translation;\n\t\t\t\t\tendTr.x += weight*tr.x;\n\t\t\t\t\tendTr.y += weight*tr.y;\n\t\t\t\t\tendTr.z += weight*tr.z;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < skeleton.numJoints; ++i)\n\t\t\tendPoses[i].orientation.normalize();\n\t}\n}\n\nexport = SkeletonNaryLERPState;",
    "import Geometry\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/Geometry\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport VertexAnimator\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/VertexAnimator\");\nimport VertexClipNode\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/VertexClipNode\");\nimport AnimationClipState\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/AnimationClipState\");\nimport IVertexAnimationState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/IVertexAnimationState\");\n\n/**\n *\n */\nclass VertexClipState extends AnimationClipState implements IVertexAnimationState\n{\n\tprivate _frames:Array<Geometry>;\n\tprivate _vertexClipNode:VertexClipNode;\n\tprivate _currentGeometry:Geometry;\n\tprivate _nextGeometry:Geometry;\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get currentGeometry():Geometry\n\t{\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\treturn this._currentGeometry;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get nextGeometry():Geometry\n\t{\n\t\tif (this._pFramesDirty)\n\t\t\tthis._pUpdateFrames();\n\n\t\treturn this._nextGeometry;\n\t}\n\n\tconstructor(animator:AnimatorBase, vertexClipNode:VertexClipNode)\n\t{\n\t\tsuper(animator, vertexClipNode);\n\n\t\tthis._vertexClipNode = vertexClipNode;\n\t\tthis._frames = this._vertexClipNode.frames;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateFrames()\n\t{\n\t\tsuper._pUpdateFrames();\n\n\t\tthis._currentGeometry = this._frames[this._pCurrentFrame];\n\n\t\tif (this._vertexClipNode.looping && this._pNextFrame >= this._vertexClipNode.lastFrame) {\n\t\t\tthis._nextGeometry = this._frames[0];\n\t\t\t(<VertexAnimator> this._pAnimator).dispatchCycleEvent();\n\t\t} else\n\t\t\tthis._nextGeometry = this._frames[this._pNextFrame];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdatePositionDelta()\n\t{\n\t\t//TODO:implement positiondelta functionality for vertex animations\n\t}\n}\n\nexport = VertexClipState;",
    "import SkeletonBinaryLERPNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode\");\nimport CrossfadeTransitionState\t\t\t= require(\"awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionState\");\n\n/**\n * A skeleton animation node that uses two animation node inputs to blend a lineraly interpolated output of a skeleton pose.\n */\nclass CrossfadeTransitionNode extends SkeletonBinaryLERPNode\n{\n\tpublic blendSpeed:number;\n\n\tpublic startBlend:number /*int*/;\n\n\t/**\n\t * Creates a new <code>CrossfadeTransitionNode</code> object.\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._pStateClass = CrossfadeTransitionState;\n\t}\n}\n\nexport = CrossfadeTransitionNode;",
    "import AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport SkeletonBinaryLERPNode\t\t\t= require(\"awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode\");\nimport SkeletonBinaryLERPState\t\t\t= require(\"awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState\");\nimport CrossfadeTransitionNode\t\t\t= require(\"awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionNode\");\nimport AnimationStateEvent\t\t\t\t= require(\"awayjs-renderergl/lib/events/AnimationStateEvent\");\n\n/**\n *\n */\nclass CrossfadeTransitionState extends SkeletonBinaryLERPState\n{\n\tprivate _crossfadeTransitionNode:CrossfadeTransitionNode;\n\tprivate _animationStateTransitionComplete:AnimationStateEvent;\n\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:CrossfadeTransitionNode)\n\t{\n\t\tsuper(animator, <SkeletonBinaryLERPNode> skeletonAnimationNode);\n\n\t\tthis._crossfadeTransitionNode = skeletonAnimationNode;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateTime(time:number /*int*/)\n\t{\n\t\tthis.blendWeight = Math.abs(time - this._crossfadeTransitionNode.startBlend)/(1000*this._crossfadeTransitionNode.blendSpeed);\n\n\t\tif (this.blendWeight >= 1) {\n\t\t\tthis.blendWeight = 1;\n\n\t\t\tif (this._animationStateTransitionComplete == null)\n\t\t\t\tthis._animationStateTransitionComplete = new AnimationStateEvent(AnimationStateEvent.TRANSITION_COMPLETE, this._pAnimator, this, this._crossfadeTransitionNode);\n\n\t\t\tthis._crossfadeTransitionNode.dispatchEvent(this._animationStateTransitionComplete);\n\t\t}\n\n\t\tsuper._pUpdateTime(time);\n\t}\n}\n\nexport = CrossfadeTransitionState;",
    "import AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport CrossfadeTransitionNode\t\t\t= require(\"awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionNode\");\nimport IAnimationTransition\t\t\t\t= require(\"awayjs-renderergl/lib/animators/transitions/IAnimationTransition\");\n\n/**\n *\n */\nclass CrossfadeTransition implements IAnimationTransition\n{\n\tpublic blendSpeed:number = 0.5;\n\n\tconstructor(blendSpeed:number)\n\t{\n\t\tthis.blendSpeed = blendSpeed;\n\t}\n\n\tpublic getAnimationNode(animator:AnimatorBase, startNode:AnimationNodeBase, endNode:AnimationNodeBase, startBlend:number /*int*/):AnimationNodeBase\n\t{\n\t\tvar crossFadeTransitionNode:CrossfadeTransitionNode = new CrossfadeTransitionNode();\n\t\tcrossFadeTransitionNode.inputA = startNode;\n\t\tcrossFadeTransitionNode.inputB = endNode;\n\t\tcrossFadeTransitionNode.blendSpeed = this.blendSpeed;\n\t\tcrossFadeTransitionNode.startBlend = startBlend;\n\n\t\treturn <AnimationNodeBase> crossFadeTransitionNode;\n\t}\n}\n\nexport = CrossfadeTransition;",
    "import Geometry\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/Geometry\");\n\nimport ParticleData\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleData\");\n\n/**\n * @class away.base.ParticleGeometry\n */\nclass ParticleGeometry extends Geometry\n{\n\tpublic particles:Array<ParticleData>;\n\n\tpublic numParticles:number /*uint*/;\n\n}\n\nexport = ParticleGeometry;",
    "import ErrorBase\t\t\t\t\t= require(\"awayjs-core/lib/errors/ErrorBase\");\n\nclass AnimationSetError extends ErrorBase\n{\n\tconstructor(message:string)\n\t{\n\t\tsuper(message);\n\t}\n}\n\nexport = AnimationSetError;",
    "import AnimationNodeBase\t\t\t\t= require(\"awayjs-display/lib/animators/nodes/AnimationNodeBase\");\n\nimport EventBase\t\t\t\t\t\t= require(\"awayjs-core/lib/events/EventBase\");\n\nimport AnimatorBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport IAnimationState\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/states/IAnimationState\");\n\n/**\n * Dispatched to notify changes in an animation state's state.\n */\nclass AnimationStateEvent extends EventBase\n{\n\t/**\n\t * Dispatched when a non-looping clip node inside an animation state reaches the end of its timeline.\n\t */\n\tpublic static PLAYBACK_COMPLETE:string = \"playbackComplete\";\n\n\tpublic static TRANSITION_COMPLETE:string = \"transitionComplete\";\n\n\tprivate _animator:AnimatorBase;\n\tprivate _animationState:IAnimationState;\n\tprivate _animationNode:AnimationNodeBase;\n\n\t/**\n\t * Create a new <code>AnimatonStateEvent</code>\n\t *\n\t * @param type The event type.\n\t * @param animator The animation state object that is the subject of this event.\n\t * @param animationNode The animation node inside the animation state from which the event originated.\n\t */\n\tconstructor(type:string, animator:AnimatorBase, animationState:IAnimationState, animationNode:AnimationNodeBase)\n\t{\n\t\tsuper(type);\n\n\t\tthis._animator = animator;\n\t\tthis._animationState = animationState;\n\t\tthis._animationNode = animationNode;\n\t}\n\n\t/**\n\t * The animator object that is the subject of this event.\n\t */\n\tpublic get animator():AnimatorBase\n\t{\n\t\treturn this._animator;\n\t}\n\n\t/**\n\t * The animation state object that is the subject of this event.\n\t */\n\tpublic get animationState():IAnimationState\n\t{\n\t\treturn this._animationState;\n\t}\n\n\t/**\n\t * The animation node inside the animation state from which the event originated.\n\t */\n\tpublic get animationNode():AnimationNodeBase\n\t{\n\t\treturn this._animationNode;\n\t}\n\n\t/**\n\t * Clones the event.\n\t *\n\t * @return An exact duplicate of the current object.\n\t */\n\tpublic clone():AnimationStateEvent\n\t{\n\t\treturn new AnimationStateEvent(this.type, this._animator, this._animationState, this._animationNode);\n\t}\n}\n\nexport = AnimationStateEvent;",
    "import EventBase\t\t\t\t\t= require(\"awayjs-core/lib/events/EventBase\");\n\nimport AnimatorBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\n\n/**\n * Dispatched to notify changes in an animator's state.\n */\nclass AnimatorEvent extends EventBase\n{\n\t/**\n\t * Defines the value of the type property of a start event object.\n\t */\n\tpublic static START:string = \"animatorStart\";\n\n\t/**\n\t * Defines the value of the type property of a stop event object.\n\t */\n\tpublic static STOP:string = \"animatorStop\";\n\n\t/**\n\t * Defines the value of the type property of a cycle complete event object.\n\t */\n\tpublic static CYCLE_COMPLETE:string = \"animatorCycleComplete\";\n\n\tprivate _animator:AnimatorBase;\n\n\t/**\n\t * Create a new <code>AnimatorEvent</code> object.\n\t *\n\t * @param type The event type.\n\t * @param animator The animator object that is the subject of this event.\n\t */\n\tconstructor(type:string, animator:AnimatorBase)\n\t{\n\t\tsuper(type);\n\t\tthis._animator = animator;\n\t}\n\n\tpublic get animator():AnimatorBase\n\t{\n\t\treturn this._animator;\n\t}\n\n\t/**\n\t * Clones the event.\n\t *\n\t * @return An exact duplicate of the current event object.\n\t */\n\tpublic clone():AnimatorEvent\n\t{\n\t\treturn new AnimatorEvent(this.type, this._animator);\n\t}\n}\n\nexport = AnimatorEvent;",
    "import EventBase\t\t\t\t= require(\"awayjs-core/lib/events/EventBase\");\n\nimport IPass\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\n\nclass PassEvent extends EventBase\n{\n\t/**\n\t *\n\t */\n\tpublic static INVALIDATE:string = \"invalidatePass\";\n\n\tprivate _pass:IPass;\n\n\t/**\n\t *\n\t */\n\tpublic get pass():IPass\n\t{\n\t\treturn this._pass;\n\t}\n\n\tconstructor(type:string, pass:IPass)\n\t{\n\t\tsuper(type);\n\n\t\tthis._pass = pass;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic clone():PassEvent\n\t{\n\t\treturn new PassEvent(this.type, this._pass);\n\t}\n}\n\nexport = PassEvent;",
    "import EventBase\t\t\t\t= require(\"awayjs-core/lib/events/EventBase\");\n\nimport RTTBufferManager\t\t\t= require(\"awayjs-renderergl/lib/managers/RTTBufferManager\");\n\nclass RTTEvent extends EventBase\n{\n\t/**\n\t *\n\t */\n\tpublic static RESIZE:string = \"rttManagerResize\";\n\n\tprivate _rttManager:RTTBufferManager;\n\n\t/**\n\t *\n\t */\n\tpublic get rttManager():RTTBufferManager\n\t{\n\t\treturn this._rttManager;\n\t}\n\n\tconstructor(type:string, rttManager:RTTBufferManager)\n\t{\n\t\tsuper(type);\n\n\t\tthis._rttManager = rttManager;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic clone():RTTEvent\n\t{\n\t\treturn new RTTEvent(this.type, this._rttManager);\n\t}\n}\n\nexport = RTTEvent;",
    "import EventBase\t\t\t\t\t= require(\"awayjs-core/lib/events/EventBase\");\n\nclass ShadingMethodEvent extends EventBase\n{\n\tpublic static SHADER_INVALIDATED:string = \"ShaderInvalidated\";\n\n\tconstructor(type:string)\n\t{\n\n\t\tsuper(type);\n\n\t}\n}\n\nexport = ShadingMethodEvent;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport Filter3DHBlurTask\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DHBlurTask\");\nimport Filter3DVBlurTask\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DVBlurTask\");\nimport Filter3DBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/filters/Filter3DBase\");\n\nclass BlurFilter3D extends Filter3DBase\n{\n\tprivate _hBlurTask:Filter3DHBlurTask;\n\tprivate _vBlurTask:Filter3DVBlurTask;\n\t\n\t/**\n\t * Creates a new BlurFilter3D object\n\t * @param blurX The amount of horizontal blur to apply\n\t * @param blurY The amount of vertical blur to apply\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\n\t */\n\tconstructor(blurX:number = 3, blurY:number = 3, stepSize:number = -1)\n\t{\n\t\tsuper();\n\n\t\tthis._hBlurTask = new Filter3DHBlurTask(blurX, stepSize);\n\t\tthis._vBlurTask = new Filter3DVBlurTask(blurY, stepSize);\n\n\t\tthis.addTask(this._hBlurTask);\n\t\tthis.addTask(this._vBlurTask);\n\t}\n\t\n\tpublic get blurX():number\n\t{\n\t\treturn this._hBlurTask.amount;\n\t}\n\t\n\tpublic set blurX(value:number)\n\t{\n\t\tthis._hBlurTask.amount = value;\n\t}\n\t\n\tpublic get blurY():number\n\t{\n\t\treturn this._vBlurTask.amount;\n\t}\n\t\n\tpublic set blurY(value:number)\n\t{\n\t\tthis._vBlurTask.amount = value;\n\t}\n\t\n\t/**\n\t * The distance between two blur samples. Set to -1 to autodetect with acceptable quality (default value).\n\t * Higher values provide better performance at the cost of reduces quality.\n\t */\n\tpublic get stepSize():number\n\t{\n\t\treturn this._hBlurTask.stepSize;\n\t}\n\t\n\tpublic set stepSize(value:number)\n\t{\n\t\tthis._hBlurTask.stepSize = value;\n\t\tthis._vBlurTask.stepSize = value;\n\t}\n\t\n\tpublic setRenderTargets(mainTarget:Image2D, stage:Stage)\n\t{\n\t\tthis._hBlurTask.target = this._vBlurTask.getMainInputTexture(stage);\n\t\tsuper.setRenderTargets(mainTarget, stage);\n\t}\n}\n\nexport = BlurFilter3D;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport Filter3DCompositeTask\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DCompositeTask\");\nimport Filter3DBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/filters/Filter3DBase\");\n\nclass CompositeFilter3D extends Filter3DBase\n{\n\tprivate _compositeTask:Filter3DCompositeTask;\n\t\n\t/**\n\t * Creates a new CompositeFilter3D object\n\t * @param blurX The amount of horizontal blur to apply\n\t * @param blurY The amount of vertical blur to apply\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\n\t */\n\tconstructor(blendMode:string, exposure:number = 1)\n\t{\n\t\tsuper();\n\n\t\tthis._compositeTask = new Filter3DCompositeTask(blendMode, exposure);\n\n\t\tthis.addTask(this._compositeTask);\n\t}\n\t\n\tpublic get exposure():number\n\t{\n\t\treturn this._compositeTask.exposure;\n\t}\n\t\n\tpublic set exposure(value:number)\n\t{\n\t\tthis._compositeTask.exposure = value;\n\t}\n\n\n\tpublic get overlayTexture():Image2D\n\t{\n\t\treturn this._compositeTask.overlayTexture;\n\t}\n\n\tpublic set overlayTexture(value:Image2D)\n\t{\n\t\tthis._compositeTask.overlayTexture = value;\n\t}\n}\n\nexport = CompositeFilter3D;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport Filter3DTaskBase\t\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase\");\n\nclass Filter3DBase\n{\n\tprivate _tasks:Array<Filter3DTaskBase>;\n\tprivate _requireDepthRender:boolean;\n\tprivate _textureWidth:number;\n\tprivate _textureHeight:number;\n\n\tconstructor()\n\t{\n\t\tthis._tasks = new Array<Filter3DTaskBase>();\n\t}\n\n\tpublic get requireDepthRender():boolean\n\t{\n\t\treturn this._requireDepthRender;\n\t}\n\n\tpublic addTask(filter:Filter3DTaskBase)\n\t{\n\t\tthis._tasks.push(filter);\n\n\t\tif (this._requireDepthRender == null)\n\t\t\tthis._requireDepthRender = filter.requireDepthRender;\n\t}\n\n\tpublic get tasks():Filter3DTaskBase[]\n\t{\n\t\treturn this._tasks;\n\t}\n\n\tpublic getMainInputTexture(stage:Stage):Image2D\n\t{\n\t\treturn this._tasks[0].getMainInputTexture(stage);\n\t}\n\n\tpublic get textureWidth():number\n\t{\n\t\treturn this._textureWidth;\n\t}\n\n\tpublic set textureWidth(value:number)\n\t{\n\t\tthis._textureWidth = value;\n\n\t\tfor (var i:number = 0; i < this._tasks.length; ++i)\n\t\t\tthis._tasks[i].textureWidth = value;\n\t}\n\n\tpublic get textureHeight():number\n\t{\n\t\treturn this._textureHeight;\n\t}\n\n\tpublic set textureHeight(value:number)\n\t{\n\t\tthis._textureHeight = value;\n\n\t\tfor (var i:number = 0; i < this._tasks.length; ++i)\n\t\t\tthis._tasks[i].textureHeight = value;\n\t}\n\n\t// link up the filters correctly with the next filter\n\tpublic setRenderTargets(mainTarget:Image2D, stage:Stage)\n\t{\n\t\tthis._tasks[this._tasks.length - 1].target = mainTarget;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tfor (var i:number = 0; i < this._tasks.length; ++i)\n\t\t\tthis._tasks[i].dispose();\n\t}\n\n\tpublic update(stage:Stage, camera:Camera)\n\t{\n\n\t}\n}\n\nexport = Filter3DBase;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\n\nimport Filter3DTaskBase\t\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase\");\n\n\nclass Filter3DCompositeTask extends Filter3DTaskBase\n{\n\tprivate _data:Float32Array;\n\tprivate _overlayTexture:Image2D;\n\tprivate _overlayWidth:number;\n\tprivate _overlayHeight:number;\n\tprivate _blendMode:string;\n\t\n\tconstructor(blendMode:string, exposure:number = 1)\n\t{\n\t\tsuper();\n\t\tthis._data = new Float32Array([exposure, 0.5, 2.0, -1, 0.0, 0.0, 0.0, 0.0 ]);\n\t\tthis._blendMode = blendMode;\n\t}\n\t\n\tpublic get overlayTexture():Image2D\n\t{\n\t\treturn this._overlayTexture;\n\t}\n\t\n\tpublic set overlayTexture(value:Image2D)\n\t{\n\t\tthis._overlayTexture = value;\n\t\tthis._overlayWidth = this._overlayTexture.width;\n\t\tthis._overlayHeight = this._overlayTexture.height;\n\t}\n\t\n\tpublic get exposure():number\n\t{\n\t\treturn this._data[0];\n\t}\n\t\n\tpublic set exposure(value:number)\n\t{\n\t\tthis._data[0] = value;\n\t}\n\t\n\tpublic getFragmentCode():string\n\t{\n\n\t\tvar code:string;\n\t\tvar op:string;\n\t\tcode = \"tex ft0, v0, fs0 <2d,linear,clamp>\\n\" +\n\t\t\t\"mul ft1, v0, fc1.zw\\n\" +\n\t\t\t\"add ft1, ft1, fc1.xy\\n\" +\n\t\t\t\"tex ft1, ft1, fs1 <2d,linear,clamp>\\n\" +\n\t\t\t\"mul ft1, ft1, fc0.xxx\\n\" +\n\t\t\t\"add ft1, ft1, fc0.xxx\\n\";\n\t\tswitch (this._blendMode) {\n\t\t\tcase \"multiply\":\n\t\t\t\tcode += \"mul oc, ft0, ft1\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"add\":\n\t\t\t\tcode += \"add oc, ft0, ft1\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"subtract\":\n\t\t\t\tcode += \"sub oc, ft0, ft1\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"overlay\":\n\t\t\t\tcode += \"sge ft2, ft0, fc0.yyy\\n\"; // t2 = (blend >= 0.5)? 1 : 0\n\t\t\t\tcode += \"sub ft0, ft2, ft0\\n\"; // base = (1 : 0 - base)\n\t\t\t\tcode += \"sub ft1, ft1, ft2\\n\"; // blend = (blend - 1 : 0)\n\t\t\t\tcode += \"mul ft1, ft1, ft0\\n\"; // blend = blend * base\n\t\t\t\tcode += \"sub ft3, ft2, fc0.yyy\\n\"; // t3 = (blend >= 0.5)? 0.5 : -0.5\n\t\t\t\tcode += \"div ft1, ft1, ft3\\n\"; // blend = blend / ( 0.5 : -0.5)\n\t\t\t\tcode += \"add oc, ft1, ft2\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"normal\":\n\t\t\t\t// for debugging purposes\n\t\t\t\tcode += \"mov oc, ft0\\n\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unknown blend mode\");\n\t\t}\n\t\treturn code;\n\t}\n\t\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D)\n\t{\n\t\tthis._data[4] = -0.5*(this._scaledTextureWidth - this._overlayWidth)/this._overlayWidth;\n\t\tthis._data[5] = -0.5*(this._scaledTextureHeight - this._overlayHeight)/this._overlayHeight;\n\n\t\tthis._data[6] = this._scaledTextureWidth/this._overlayWidth;\n\t\tthis._data[7] = this._scaledTextureHeight/this._overlayHeight;\n\n\t\tvar context:IContextGL = stage.context;\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, this._data, 2);\n\t\t(<GL_ImageBase> stage.getAbstraction(this._overlayTexture)).activate(1, false);\n\t}\n\t\n\tpublic deactivate(stage:Stage)\n\t{\n\t\tstage.context.setTextureAt(1, null);\n\t}\n}\n\nexport = Filter3DCompositeTask;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport Filter3DTaskBase\t\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase\");\n\nclass Filter3DFXAATask extends Filter3DTaskBase\n{\n\tprivate _data:Float32Array;\n\t//TODO - remove blur variables and create setters/getters for FXAA\n\tprivate static MAX_AUTO_SAMPLES:number = 15;\n\tprivate _amount:number;\n\tprivate _stepSize:number = 1;\n\tprivate _realStepSize:number;\n\t\n\t/**\n\t *\n\t * @param amount\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\n\t */\n\tconstructor(amount:number, stepSize:number = -1)\n\t{\n\t\tsuper();\n\n\t\tthis._data =  new Float32Array(16);\n\t\t//luma\n\t\tthis._data.set([0.299, 0.587, 0.114, 1],0);//0.212, 0.716, 0.072\n\t\t//helpers\n\t\tthis._data.set([0.25, 0.5, 0.75, 8], 4);\n\t\t//settings (screen x, screen y, ...)\n\t\tthis._data.set([1/1024, 1/1024, 1/128, 1/8], 8);\n\t\t//deltas\n\t\tthis._data.set([1.0/3.0 - 0.5, 2.0/3.0 - 0.5, 0.0/3.0 - 0.5, 3.0/3.0 - 0.5], 12);\n\n\t\tthis.stepSize = stepSize;\n\t}\n\n\tpublic get amount():number\n\t{\n\t\treturn this._amount;\n\t}\n\n\tpublic set amount(value:number)\n\t{\n\t\tif (this._amount == value)\n\t\t\treturn;\n\n\t\tthis._amount = value;\n\n\t\tthis.invalidateProgram();\n\t\tthis.updateBlurData();\n\t}\n\n\tpublic get stepSize():number\n\t{\n\t\treturn this._stepSize;\n\t}\n\n\tpublic set stepSize(value:number)\n\t{\n\t\tif (this._stepSize == value)\n\t\t\treturn;\n\t\tthis._stepSize = value;\n\t\tthis.calculateStepSize();\n\t\tthis.invalidateProgram();\n\t\tthis.updateBlurData();\n\t}\n\n\tpublic getFragmentCode():string\n\t{\n\t\tvar uv_in:string = \"v0\";\n\n\t\tvar w:string = \"fc2.z\";\t\t//\t1.75\n\n\t\tvar lum:string = \"fc0\";\t\t//\t0.299, 0.587, 0.114\n\t\tvar s:string = \"fc2.w\";\t\t//\t1/16\n\t\tvar div:string = \"fc1.w\";\t//\t4.3\n\n\t\tvar pix:string = \"fc2.xy\";\n\t\tvar dx:string = \"fc2.x\";\n\t\tvar dy:string = \"fc2.y\";\n\t\tvar mOne:string = \"fc3.w\";\n\t\tvar mul:string = \"fc3.x\";\n\n\t\tvar delta1:string = \"fc4.x\";\t//1.0/3.0 - 0.5\n\t\tvar delta2:string = \"fc4.y\";\t//2.0/3.0 - 0.5\n\t\tvar delta3:string = \"fc4.z\";\t//0.0/3.0 - 0.5\n\t\tvar delta4:string = \"fc4.w\";\t//3.0/3.0 - 0.5\n\n\t\tvar _0:string = \"fc3.x\";\n\t\tvar _025:string = \"fc1.x\";\n\t\tvar _05:string = \"fc1.y\";\n\t\tvar _075:string = \"fc1.z\";\n\t\tvar _1:string = \"fc0.w\";\n\n\n\t\tvar uv:string = \"ft0.xy\";\n\t\tvar uvx:string = \"ft0.x\";\n\t\tvar uvy:string = \"ft0.y\";\n\n\t\tvar TL:string = \"ft2.x\";\n\t\tvar TR:string = \"ft2.y\";\n\t\tvar BL:string = \"ft2.z\";\n\t\tvar BR:string = \"ft2.w\";\n\t\tvar M:string = \"ft3.x\";\n\n\t\tvar tempf1:string = \"ft3.y\";\n\t\tvar tempf2:string = \"ft3.z\";\n\t\tvar tempf3:string = \"ft3.w\";\n\n\t\tvar tex:string = \"ft1\";\n\n\t\tvar dir:string = \"ft4\";\n\t\tvar dirx:string = \"ft4.x\";\n\t\tvar diry:string = \"ft4.y\";\n\t\tvar dirxy:string = \"ft4.xy\";\n\n\t\tvar dirReduce:string = \"ft5.x\";\n\t\tvar inverseDirAdjustment:string = \"ft5.y\";\n\n\t\tvar result1:string = \"ft6\";\n\t\tvar result2:string = \"ft7\";\n\n\t\tvar fxaaReduceMin :string = \"fc2.x\";\t//1/128\n\t\tvar fxaaReduceMul :string = \"fc2.y\";\t//1/8\n\t\tvar fxaaSpanMax :string = \"fc1.w\";\t\t//8\n\n\t\tvar lumaMin:string = \"ft5.x\";\n\t\tvar lumaMax:string = \"ft5.y\";\n\n\t\tvar sample:string = \"fs0\";\n\n\n\t\tvar temp:string = tex;\n\t\tvar tempxy:string = temp + \".xy\";\n\t\t\n\t\tvar code:Array<string> =  new Array<string>();\n\n\t\t//lumas\n\t\tcode.push(tex, tex, uv_in, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"dp3\", M, tex, lum, \"\\n\");\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\n\t\tcode.push(\"sub\", uv, uv, pix, \"\\n\");\n\t\tcode.push(\"tex\", tex, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"dp3\", TL, tex, lum, \"\\n\");\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\n\t\tcode.push(\"add\", uv, uv, pix, \"\\n\");\n\t\tcode.push(\"tex\", tex, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"dp3\",  BR, tex, lum, \"\\n\");\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\n\t\tcode.push(\"sub\", uvy, uvy, dy, \"\\n\");\n\t\tcode.push(\"add\", uvx, uvx, dx, \"\\n\");\n\t\tcode.push(\"tex\", tex, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"dp3\", TR, tex, lum, \"\\n\");\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\n\t\tcode.push(\"add\", uvy, uvy, dy, \"\\n\");\n\t\tcode.push(\"sub\", uvx, uvx, dx, \"\\n\");\n\t\tcode.push(\"tex\", tex, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"dp3\", BL, tex, lum, \"\\n\");\n\n\t\t//dir\n\t\tcode.push(\"add\", tempf1, TL, TR, \"\\n\");\n\t\tcode.push(\"add\", tempf2, BL, BR, \"\\n\");\n\t\tcode.push(\"sub\", dirx, tempf1, tempf2, \"\\n\");\n\t\tcode.push(\"neg\", dirx, dirx, \"\\n\");\n\n\t\tcode.push(\"add\", tempf1, TL, BL, \"\\n\");\n\t\tcode.push(\"add\", tempf2, TR, BR, \"\\n\");\n\t\tcode.push(\"sub\", diry, tempf1, tempf2, \"\\n\");\n\n\t\tcode.push(\"add\", tempf1, tempf1, tempf2, \"\\n\");\n\t\tcode.push(\"mul\", tempf1, tempf1, fxaaReduceMul, \"\\n\");\n\t\tcode.push(\"mul\", tempf1, tempf1, _025, \"\\n\");\n\t\tcode.push(\"max\", dirReduce, tempf1, fxaaReduceMin, \"\\n\");\n\n\t\tcode.push(\"abs\", tempf1, dirx, \"\\n\");\n\t\tcode.push(\"abs\", tempf2, diry, \"\\n\");\n\t\tcode.push(\"min\", tempf1, tempf1, tempf2, \"\\n\");\n\t\tcode.push(\"add\", tempf1, tempf1, dirReduce, \"\\n\");\n\t\tcode.push(\"rcp\", inverseDirAdjustment, tempf1, \"\\n\");\n\n\t\tcode.push(\"mul\", tempf1, dirx, inverseDirAdjustment, \"\\n\");\n\t\tcode.push(\"mov\", tempf2, fxaaSpanMax, \"\\n\");\n\t\tcode.push(\"neg\", tempf2, tempf2, \"\\n\");\n\t\tcode.push(\"max\", tempf1, tempf1, tempf2, \"\\n\");\n\t\tcode.push(\"min\", tempf1, fxaaSpanMax, tempf1, \"\\n\");\n\t\tcode.push(\"mul\", dirx, tempf1, dx, \"\\n\");\n\n\t\tcode.push(\"mul\", tempf1, diry, inverseDirAdjustment, \"\\n\");\n\t\tcode.push(\"mov\", tempf2, fxaaSpanMax, \"\\n\");\n\t\tcode.push(\"neg\", tempf2, tempf2, \"\\n\");\n\t\tcode.push(\"max\", tempf1, tempf1, tempf2, \"\\n\");\n\t\tcode.push(\"min\", tempf1, fxaaSpanMax, tempf1, \"\\n\");\n\t\tcode.push(\"mul\", diry, tempf1, dy, \"\\n\");\n\n\n\t\tcode.push(\"mul\", tempxy, dirxy, delta1, \"\\n\");\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\n\t\tcode.push(\"tex\", result1, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"mul\", tempxy, dirxy, delta2, \"\\n\");\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\n\t\tcode.push(\"tex\", tex, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"add\", result1, result1, tex, \"\\n\");\n\t\tcode.push(\"mul\", result1, result1, _05, \"\\n\");\n\n\t\tcode.push(\"mul\", tempxy, dirxy, delta3, \"\\n\");\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\n\t\tcode.push(\"tex\", result2, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"mul\", tempxy, dirxy, delta4, \"\\n\");\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\n\t\tcode.push(\"tex\", tex, uv, sample, \"2d\", \"wrap\", \"linear\", \"\\n\");\n\t\tcode.push(\"add\", result2, result2, tex, \"\\n\");\n\t\tcode.push(\"mul\", result2, result2, _025, \"\\n\");\n\t\tcode.push(\"mul\", tex, result1, _05, \"\\n\");\n\t\tcode.push(\"add\", result2, result2, tex, \"\\n\");\n\n\t\tcode.push(\"min\", tempf1, BL, BR, \"\\n\");\n\t\tcode.push(\"min\", tempf2, TL, TR, \"\\n\");\n\t\tcode.push(\"min\", tempf1, tempf1, tempf2, \"\\n\");\n\t\tcode.push(\"min\", lumaMin, tempf1, M, \"\\n\");\n\n\t\tcode.push(\"max\", tempf1, BL, BR, \"\\n\");\n\t\tcode.push(\"max\", tempf2, TL, TR, \"\\n\");\n\t\tcode.push(\"max\", tempf1, tempf1, tempf2, \"\\n\");\n\t\tcode.push(\"max\", lumaMax, tempf1, M, \"\\n\");\n\n\t\tcode.push(\"dp3\", tempf1, lum, result2, \"\\n\");\n\n\t\tcode.push(\"slt\", tempf2, tempf1, lumaMin, \"\\n\");\n\t\tcode.push(\"sge\", tempf3, tempf1, lumaMax, \"\\n\");\n\t\tcode.push(\"mul\", tempf2, tempf2, tempf3, \"\\n\");\n\n\t\tcode.push(\"mul\", result1, result1, tempf2, \"\\n\");\n\t\tcode.push(\"sub\", tempf2, _1, tempf2, \"\\n\");\n\t\tcode.push(\"mul\", result2, result2, tempf2, \"\\n\");\n\n\t\tcode.push(\"add\", \"oc\", result1, result2, \"\\n\");\n\n\t\t//this._data[2] = 1/numSamples;\n\n\t\treturn code.join(\" \");\n\t}\n\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D)\n\t{\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, this._data, 1);\n\t}\n\n\tpublic updateTextures(stage:Stage)\n\t{\n\t\tsuper.updateTextures(stage);\n\n\t\tthis.updateBlurData();\n\t}\n\n\tprivate updateBlurData()\n\t{\n\t\t// todo: must be normalized using view size ratio instead of texture\n\t\tvar invH:number = 1/this._textureHeight;\n\n\t\tthis._data[0] = this._amount*.5*invH;\n\t\tthis._data[1] = this._realStepSize*invH;\n\t}\n\n\tprivate calculateStepSize()\n\t{\n\t\tthis._realStepSize = 1;//this._stepSize > 0? this._stepSize : this._amount > Filter3DVBlurTask.MAX_AUTO_SAMPLES? this._amount/Filter3DVBlurTask.MAX_AUTO_SAMPLES : 1;\n\t}\n}\n\nexport = Filter3DFXAATask;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport Filter3DTaskBase\t\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase\");\n\nclass Filter3DHBlurTask extends Filter3DTaskBase\n{\n\tprivate static MAX_AUTO_SAMPLES:number = 15;\n\tprivate _amount:number;\n\tprivate _data:Float32Array;\n\tprivate _stepSize:number = 1;\n\tprivate _realStepSize:number;\n\n\t/**\n\t * Creates a new Filter3DHDepthOfFFieldTask\n\t * @param amount The maximum amount of blur to apply in pixels at the most out-of-focus areas\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\n\t */\n\tconstructor(amount:number, stepSize:number = -1)\n\t{\n\t\tsuper();\n\t\tthis._amount = amount;\n\t\tthis._data = new Float32Array([0, 0, 0, 1]);\n\t\tthis.stepSize = stepSize;\n\t}\n\n\tpublic get amount():number\n\t{\n\t\treturn this._amount;\n\t}\n\n\tpublic set amount(value:number)\n\t{\n\t\tif (this._amount == value)\n\t\t\treturn;\n\n\t\tthis._amount = value;\n\n\t\tthis.invalidateProgram();\n\t\tthis.updateBlurData();\n\t\tthis.calculateStepSize();\n\t}\n\n\tpublic get stepSize():number\n\t{\n\t\treturn this._stepSize;\n\t}\n\n\tpublic set stepSize(value:number)\n\t{\n\t\tif (this._stepSize == value)\n\t\t\treturn;\n\n\t\tthis._stepSize = value;\n\t\tthis.calculateStepSize();\n\t\tthis.invalidateProgram();\n\t\tthis.updateBlurData();\n\t}\n\n\tpublic getFragmentCode():string\n\t{\n\t\tvar code:string;\n\t\tvar numSamples:number = 1;\n\n\t\tcode = \"mov ft0, v0\t\\n\" +\n\t\t\t\"sub ft0.x, v0.x, fc0.x\\n\";\n\n\t\tcode += \"tex ft1, ft0, fs0 <2d,linear,clamp>\\n\";\n\n\t\tfor (var x:number = this._realStepSize; x <= this._amount; x += this._realStepSize) {\n\t\t\tcode += \"add ft0.x, ft0.x, fc0.y\\n\" +\n\t\t\t\t\"tex ft2, ft0, fs0 <2d,linear,clamp>\\n\" +\n\t\t\t\t\"add ft1, ft1, ft2\\n\";\n\t\t\t++numSamples;\n\t\t}\n\n\t\tcode += \"mul oc, ft1, fc0.z\\n\";\n\n\t\tthis._data[2] = 1/numSamples;\n\n\t\treturn code;\n\t}\n\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D)\n\t{\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, this._data, 1);\n\t}\n\n\tpublic updateTextures(stage:Stage)\n\t{\n\t\tsuper.updateTextures(stage);\n\n\t\tthis.updateBlurData();\n\t}\n\n\tprivate updateBlurData()\n\t{\n\t\t// todo: must be normalized using view size ratio instead of texture\n\t\tvar invW:number = 1/this._textureWidth;\n\n\t\tthis._data[0] = this._amount*.5*invW;\n\t\tthis._data[1] = this._realStepSize*invW;\n\t}\n\n\tprivate calculateStepSize()\n\t{\n\t\tthis._realStepSize = this._stepSize > 0? this._stepSize : this._amount > Filter3DHBlurTask.MAX_AUTO_SAMPLES? this._amount/Filter3DHBlurTask.MAX_AUTO_SAMPLES : 1;\n\t}\n}\n\nexport = Filter3DHBlurTask;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\nimport ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport AGALMiniAssembler\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler\");\nimport ContextGLTextureFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFormat\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IProgram\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IProgram\");\n\nclass Filter3DTaskBase\n{\n\tprivate _mainInputTexture:Image2D;\n\n\tpublic _scaledTextureWidth:number = -1;\n\tpublic _scaledTextureHeight:number = -1;\n\tpublic _textureWidth:number = -1;\n\tpublic _textureHeight:number = -1;\n\tprivate _textureDimensionsInvalid:boolean = true;\n\tprivate _program3DInvalid:boolean = true;\n\tprivate _program3D:IProgram;\n\tprivate _target:Image2D;\n\tprivate _requireDepthRender:boolean;\n\tprivate _textureScale:number = 0;\n\n\tconstructor(requireDepthRender:boolean = false)\n\t{\n\t\tthis._requireDepthRender = requireDepthRender;\n\t}\n\n\t/**\n\t * The texture scale for the input of this texture. This will define the output of the previous entry in the chain\n\t */\n\tpublic get textureScale():number\n\t{\n\t\treturn this._textureScale;\n\t}\n\n\tpublic set textureScale(value:number)\n\t{\n\t\tif (this._textureScale == value)\n\t\t\treturn;\n\n\t\tthis._textureScale = value;\n\t\tthis._scaledTextureWidth = this._textureWidth >> this._textureScale;\n\t\tthis._scaledTextureHeight = this._textureHeight >> this._textureScale;\n\t\tthis._textureDimensionsInvalid = true;\n\t}\n\n\tpublic get target():Image2D\n\t{\n\t\treturn this._target;\n\t}\n\n\tpublic set target(value:Image2D)\n\t{\n\t\tthis._target = value;\n\t}\n\n\tpublic get textureWidth():number\n\t{\n\t\treturn this._textureWidth;\n\t}\n\n\tpublic set textureWidth(value:number)\n\t{\n\t\tif (this._textureWidth == value)\n\t\t\treturn;\n\n\t\tthis._textureWidth = value;\n\t\tthis._scaledTextureWidth = this._textureWidth >> this._textureScale;\n\t\tthis._textureDimensionsInvalid = true;\n\t}\n\n\tpublic get textureHeight():number\n\t{\n\t\treturn this._textureHeight;\n\t}\n\n\tpublic set textureHeight(value:number)\n\t{\n\t\tif (this._textureHeight == value)\n\t\t\treturn;\n\n\t\tthis._textureHeight = value;\n\t\tthis._scaledTextureHeight = this._textureHeight >> this._textureScale;\n\t\tthis._textureDimensionsInvalid = true;\n\t}\n\n\tpublic getMainInputTexture(stage:Stage):Image2D\n\t{\n\t\tif (this._textureDimensionsInvalid)\n\t\t\tthis.updateTextures(stage);\n\n\t\treturn this._mainInputTexture;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tif (this._mainInputTexture)\n\t\t\tthis._mainInputTexture.dispose();\n\n\t\tif (this._program3D)\n\t\t\tthis._program3D.dispose();\n\t}\n\n\tpublic invalidateProgram()\n\t{\n\t\tthis._program3DInvalid = true;\n\t}\n\n\tpublic updateProgram(stage:Stage)\n\t{\n\t\tif (this._program3D)\n\t\t\tthis._program3D.dispose();\n\n\t\tthis._program3D = stage.context.createProgram();\n\n\t\tvar vertexByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part vertex 1\\n\" + this.getVertexCode() + \"endpart\"))['vertex'].data;\n\t\tvar fragmentByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part fragment 1\\n\" + this.getFragmentCode() + \"endpart\"))['fragment'].data;\n\t\tthis._program3D.upload(vertexByteCode, fragmentByteCode);\n\t\tthis._program3DInvalid = false;\n\t}\n\n\tpublic getVertexCode():string\n\t{\n\t\treturn \"mov op, va0\\n\" + \"mov v0, va1\\n\";\n\t}\n\n\tpublic getFragmentCode():string\n\t{\n\t\tthrow new AbstractMethodError();\n\n\t\treturn null;\n\t}\n\n\tpublic updateTextures(stage:Stage)\n\t{\n\t\tif (this._mainInputTexture)\n\t\t\tthis._mainInputTexture.dispose();\n\n\t\tthis._mainInputTexture = new Image2D(this._scaledTextureWidth, this._scaledTextureHeight);\n\n\t\tthis._textureDimensionsInvalid = false;\n\t}\n\n\tpublic getProgram(stage:Stage):IProgram\n\t{\n\t\tif (this._program3DInvalid)\n\t\t\tthis.updateProgram(stage);\n\n\t\treturn this._program3D;\n\t}\n\n\tpublic activate(stage:Stage, camera:Camera, depthTexture:Image2D)\n\t{\n\t}\n\n\tpublic deactivate(stage:Stage)\n\t{\n\t}\n\n\tpublic get requireDepthRender():boolean\n\t{\n\t\treturn this._requireDepthRender;\n\t}\n\n}\n\nexport = Filter3DTaskBase;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport Filter3DTaskBase\t\t\t\t= require(\"awayjs-renderergl/lib/filters/tasks/Filter3DTaskBase\");\n\nclass Filter3DVBlurTask extends Filter3DTaskBase\n{\n\tprivate static MAX_AUTO_SAMPLES:number = 15;\n\tprivate _amount:number;\n\tprivate _data:Float32Array;\n\tprivate _stepSize:number = 1;\n\tprivate _realStepSize:number;\n\t\n\t/**\n\t *\n\t * @param amount\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\n\t */\n\tconstructor(amount:number, stepSize:number = -1)\n\t{\n\t\tsuper();\n\t\tthis._amount = amount;\n\t\tthis._data =  new Float32Array([0, 0, 0, 1]);\n\t\tthis.stepSize = stepSize;\n\t}\n\n\tpublic get amount():number\n\t{\n\t\treturn this._amount;\n\t}\n\n\tpublic set amount(value:number)\n\t{\n\t\tif (this._amount == value)\n\t\t\treturn;\n\n\t\tthis._amount = value;\n\n\t\tthis.invalidateProgram();\n\t\tthis.updateBlurData();\n\t}\n\n\tpublic get stepSize():number\n\t{\n\t\treturn this._stepSize;\n\t}\n\n\tpublic set stepSize(value:number)\n\t{\n\t\tif (this._stepSize == value)\n\t\t\treturn;\n\t\tthis._stepSize = value;\n\t\tthis.calculateStepSize();\n\t\tthis.invalidateProgram();\n\t\tthis.updateBlurData();\n\t}\n\n\tpublic getFragmentCode():string\n\t{\n\t\tvar code:string;\n\t\tvar numSamples:number = 1;\n\n\t\tcode = \"mov ft0, v0\t\\n\" +\n\t\t\t\"sub ft0.y, v0.y, fc0.x\\n\";\n\n\t\tcode += \"tex ft1, ft0, fs0 <2d,linear,clamp>\\n\";\n\n\t\tfor (var x:number = this._realStepSize; x <= this._amount; x += this._realStepSize) {\n\t\t\tcode += \"add ft0.y, ft0.y, fc0.y\\n\";\n\t\t\tcode += \"tex ft2, ft0, fs0 <2d,linear,clamp>\\n\" +\n\t\t\t\t\"add ft1, ft1, ft2\\n\";\n\t\t\t++numSamples;\n\t\t}\n\n\t\tcode += \"mul oc, ft1, fc0.z\\n\";\n\n\t\tthis._data[2] = 1/numSamples;\n\n\t\treturn code;\n\t}\n\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D)\n\t{\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, this._data, 1);\n\t}\n\n\tpublic updateTextures(stage:Stage)\n\t{\n\t\tsuper.updateTextures(stage);\n\n\t\tthis.updateBlurData();\n\t}\n\n\tprivate updateBlurData()\n\t{\n\t\t// todo: must be normalized using view size ratio instead of texture\n\t\tvar invH:number = 1/this._textureHeight;\n\n\t\tthis._data[0] = this._amount*.5*invH;\n\t\tthis._data[1] = this._realStepSize*invH;\n\t}\n\n\tprivate calculateStepSize()\n\t{\n\t\tthis._realStepSize = this._stepSize > 0? this._stepSize : this._amount > Filter3DVBlurTask.MAX_AUTO_SAMPLES? this._amount/Filter3DVBlurTask.MAX_AUTO_SAMPLES : 1;\n\t}\n}\n\nexport = Filter3DVBlurTask;",
    "import Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\nimport EventDispatcher\t\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\nimport ImageUtils\t\t\t\t\t= require(\"awayjs-core/lib/utils/ImageUtils\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IIndexBuffer\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\nimport IVertexBuffer\t\t\t\t= require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\nimport RTTEvent\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/events/RTTEvent\");\n\nclass RTTBufferManager extends EventDispatcher\n{\n\tprivate static _instances:Array<RTTBufferManagerVO>;\n\n\tprivate _renderToTextureVertexBuffer:IVertexBuffer;\n\tprivate _renderToScreenVertexBuffer:IVertexBuffer;\n\n\tprivate _indexBuffer:IIndexBuffer;\n\tprivate _stage:Stage;\n\tprivate _viewWidth:number = -1;\n\tprivate _viewHeight:number = -1;\n\tprivate _textureWidth:number = -1;\n\tprivate _textureHeight:number = -1;\n\tprivate _renderToTextureRect:Rectangle;\n\tprivate _buffersInvalid:boolean = true;\n\n\tprivate _textureRatioX:number;\n\tprivate _textureRatioY:number;\n\n\tconstructor(stage:Stage)\n\t{\n\t\tsuper();\n\n\t\tthis._renderToTextureRect = new Rectangle();\n\n\t\tthis._stage = stage;\n\n\t}\n\n\tpublic static getInstance(stage:Stage):RTTBufferManager\n\t{\n\t\tif (!stage)\n\t\t\tthrow new Error(\"stage key cannot be null!\");\n\n\t\tif (RTTBufferManager._instances == null)\n\t\t\tRTTBufferManager._instances = new Array<RTTBufferManagerVO>();\n\n\t\tvar rttBufferManager:RTTBufferManager = RTTBufferManager.getRTTBufferManagerFromStage(stage);\n\n\t\tif (rttBufferManager == null) {\n\t\t\trttBufferManager = new RTTBufferManager(stage);\n\n\t\t\tvar vo:RTTBufferManagerVO = new RTTBufferManagerVO();\n\n\t\t\tvo.stage3d = stage;\n\t\t\tvo.rttbfm = rttBufferManager;\n\n\t\t\tRTTBufferManager._instances.push(vo);\n\t\t}\n\n\t\treturn rttBufferManager;\n\n\t}\n\n\tprivate static getRTTBufferManagerFromStage(stage:Stage):RTTBufferManager\n\t{\n\n\t\tvar l:number = RTTBufferManager._instances.length;\n\t\tvar r:RTTBufferManagerVO;\n\n\t\tfor (var c:number = 0; c < l; c++) {\n\t\t\tr = RTTBufferManager._instances[c];\n\n\t\t\tif (r.stage3d === stage)\n\t\t\t\treturn r.rttbfm;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate static deleteRTTBufferManager(stage:Stage):void\n\t{\n\t\tvar l:number = RTTBufferManager._instances.length;\n\t\tvar r:RTTBufferManagerVO;\n\n\t\tfor (var c:number = 0; c < l; c++) {\n\t\t\tr = RTTBufferManager._instances[c];\n\n\t\t\tif (r.stage3d === stage) {\n\t\t\t\tRTTBufferManager._instances.splice(c, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get textureRatioX():number\n\t{\n\t\tif (this._buffersInvalid)\n\t\t\tthis.updateRTTBuffers();\n\n\t\treturn this._textureRatioX;\n\t}\n\n\tpublic get textureRatioY():number\n\t{\n\t\tif (this._buffersInvalid)\n\t\t\tthis.updateRTTBuffers();\n\n\t\treturn this._textureRatioY;\n\t}\n\n\tpublic get viewWidth():number\n\t{\n\t\treturn this._viewWidth;\n\t}\n\n\tpublic set viewWidth(value:number)\n\t{\n\t\tif (value == this._viewWidth)\n\t\t\treturn;\n\n\t\tthis._viewWidth = value;\n\n\t\tthis._buffersInvalid = true;\n\n\t\tthis._textureWidth = ImageUtils.getBestPowerOf2(this._viewWidth);\n\n\t\tif (this._textureWidth > this._viewWidth) {\n\t\t\tthis._renderToTextureRect.x = Math.floor((this._textureWidth - this._viewWidth)*.5);\n\t\t\tthis._renderToTextureRect.width = this._viewWidth;\n\t\t} else {\n\t\t\tthis._renderToTextureRect.x = 0;\n\t\t\tthis._renderToTextureRect.width = this._textureWidth;\n\t\t}\n\n\t\tthis.dispatchEvent(new RTTEvent(RTTEvent.RESIZE, this));\n\t}\n\n\tpublic get viewHeight():number\n\t{\n\t\treturn this._viewHeight;\n\t}\n\n\tpublic set viewHeight(value:number)\n\t{\n\t\tif (value == this._viewHeight)\n\t\t\treturn;\n\n\t\tthis._viewHeight = value;\n\n\t\tthis._buffersInvalid = true;\n\n\t\tthis._textureHeight = ImageUtils.getBestPowerOf2(this._viewHeight);\n\n\t\tif (this._textureHeight > this._viewHeight) {\n\t\t\tthis._renderToTextureRect.y = Math.floor((this._textureHeight - this._viewHeight)*.5);\n\t\t\tthis._renderToTextureRect.height = this._viewHeight;\n\t\t} else {\n\t\t\tthis._renderToTextureRect.y = 0;\n\t\t\tthis._renderToTextureRect.height = this._textureHeight;\n\t\t}\n\n\t\tthis.dispatchEvent(new RTTEvent(RTTEvent.RESIZE, this));\n\t}\n\n\tpublic get renderToTextureVertexBuffer():IVertexBuffer\n\t{\n\t\tif (this._buffersInvalid)\n\t\t\tthis.updateRTTBuffers();\n\n\t\treturn this._renderToTextureVertexBuffer;\n\t}\n\n\tpublic get renderToScreenVertexBuffer():IVertexBuffer\n\t{\n\t\tif (this._buffersInvalid)\n\t\t\tthis.updateRTTBuffers();\n\n\t\treturn this._renderToScreenVertexBuffer;\n\n\t}\n\n\tpublic get indexBuffer():IIndexBuffer\n\t{\n\t\treturn this._indexBuffer;\n\t}\n\n\tpublic get renderToTextureRect():Rectangle\n\t{\n\t\tif (this._buffersInvalid)\n\t\t\tthis.updateRTTBuffers();\n\n\t\treturn this._renderToTextureRect;\n\t}\n\n\tpublic get textureWidth():number\n\t{\n\t\treturn this._textureWidth;\n\t}\n\n\tpublic get textureHeight():number\n\t{\n\t\treturn this._textureHeight;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tRTTBufferManager.deleteRTTBufferManager(this._stage);\n\n\t\tif (this._indexBuffer) {\n\t\t\tthis._indexBuffer.dispose();\n\t\t\tthis._renderToScreenVertexBuffer.dispose();\n\t\t\tthis._renderToTextureVertexBuffer.dispose();\n\t\t\tthis._renderToScreenVertexBuffer = null;\n\t\t\tthis._renderToTextureVertexBuffer = null;\n\t\t\tthis._indexBuffer = null;\n\t\t}\n\t}\n\n\t// todo: place all this in a separate model, since it's used all over the place\n\t// maybe it even has a place in the core (together with screenRect etc)?\n\t// needs to be stored per view of course\n\tprivate updateRTTBuffers()\n\t{\n\t\tvar context:IContextGL = this._stage.context;\n\t\tvar textureVerts:number[];\n\t\tvar screenVerts:number[];\n\n\t\tvar x:number;\n\t\tvar y:number;\n\n\t\tif (this._renderToTextureVertexBuffer == null)\n\t\t\tthis._renderToTextureVertexBuffer = context.createVertexBuffer(4, 20);\n\n\t\tif (this._renderToScreenVertexBuffer == null)\n\t\t\tthis._renderToScreenVertexBuffer = context.createVertexBuffer(4, 20);\n\n\t\tif (!this._indexBuffer) {\n\t\t\tthis._indexBuffer = context.createIndexBuffer(6);\n\n\t\t\tthis._indexBuffer.uploadFromArray([2, 1, 0, 3, 2, 0], 0, 6);\n\t\t}\n\n\t\tthis._textureRatioX = x = Math.min(this._viewWidth/this._textureWidth, 1);\n\t\tthis._textureRatioY = y = Math.min(this._viewHeight/this._textureHeight, 1);\n\n\t\tvar u1:number = (1 - x)*.5;\n\t\tvar u2:number = (x + 1)*.5;\n\t\tvar v1:number = (1 - y)*.5;\n\t\tvar v2:number = (y + 1)*.5;\n\n\t\t// last element contains indices for data per vertex that can be passed to the vertex shader if necessary (ie: frustum corners for deferred rendering)\n\t\ttextureVerts = [    -x, -y, u1, v1, 0, x, -y, u2, v1, 1, x, y, u2, v2, 2, -x, y, u1, v2, 3 ];\n\n\t\tscreenVerts = [     -1, -1, u1, v1, 0, 1, -1, u2, v1, 1, 1, 1, u2, v2, 2, -1, 1, u1, v2, 3 ];\n\n\t\tthis._renderToTextureVertexBuffer.uploadFromArray(textureVerts, 0, 4);\n\t\tthis._renderToScreenVertexBuffer.uploadFromArray(screenVerts, 0, 4);\n\n\t\tthis._buffersInvalid = false;\n\t}\n}\n\nexport = RTTBufferManager;\n\nclass RTTBufferManagerVO\n{\n\tpublic stage3d:Stage;\n\n\tpublic rttbfm:RTTBufferManager;\n}",
    "import Debug\t\t\t\t\t\t\t= require(\"awayjs-core/lib/utils/Debug\");\nimport BitmapImage2D\t\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport Box\t\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Box\");\nimport Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport Point\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\nimport Rectangle\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport ByteArray\t\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport TriangleSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport Scene\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/Scene\");\nimport View\t\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport IPicker\t\t\t\t\t\t\t= require(\"awayjs-display/lib/pick/IPicker\");\nimport PickingCollisionVO\t\t\t\t= require(\"awayjs-display/lib/pick/PickingCollisionVO\");\nimport EntityCollector\t\t\t\t\t= require(\"awayjs-display/lib/traverse/EntityCollector\");\nimport Camera\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport IEntity\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/IEntity\");\nimport MaterialBase\t\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\n\nimport AGALMiniAssembler\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler\");\nimport ContextGLDrawMode\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLDrawMode\");\nimport Stage\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLBlendFactor\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLClearMask\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLClearMask\");\nimport ContextGLCompareMode\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport ContextGLProgramType\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport ContextGLTriangleFace\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTriangleFace\");\nimport IContextGL\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IProgram\t\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IProgram\");\nimport ITextureBase\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\n\nimport DefaultRenderer\t\t\t\t\t= require(\"awayjs-renderergl/lib/DefaultRenderer\");\nimport RenderableBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport SubGeometryVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/SubGeometryVOBase\");\n\n/**\n * Picks a 3d object from a view or scene by performing a separate render pass on the scene around the area being picked using key color values,\n * then reading back the color value of the pixel in the render representing the picking ray. Requires multiple passes and readbacks for retriving details\n * on an entity that has its shaderPickingDetails property set to true.\n *\n * A read-back operation from any GPU is not a very efficient process, and the amount of processing used can vary significantly between different hardware.\n *\n * @see away.entities.Entity#shaderPickingDetails\n *\n * @class away.pick.ShaderPicker\n */\nclass ShaderPicker implements IPicker\n{\n\tprivate _opaqueRenderableHead:RenderableBase;\n\tprivate _blendedRenderableHead:RenderableBase;\n\n\tprivate _stage:Stage;\n\tprivate _context:IContextGL;\n\tprivate _onlyMouseEnabled:boolean = true;\n\n\tprivate _objectProgram:IProgram;\n\tprivate _triangleProgram:IProgram;\n\tprivate _bitmapImage2D:BitmapImage2D;\n\tprivate _viewportData:Float32Array;\n\tprivate _boundOffsetScale:Float32Array;\n\tprivate _id:Float32Array;\n\n\tprivate _interactives:Array<RenderableBase> = new Array<RenderableBase>();\n\tprivate _interactiveId:number;\n\tprivate _hitColor:number;\n\tprivate _projX:number;\n\tprivate _projY:number;\n\n\tprivate _hitRenderable:RenderableBase;\n\tprivate _hitEntity:IEntity;\n\tprivate _localHitPosition:Vector3D = new Vector3D();\n\tprivate _hitUV:Point = new Point();\n\tprivate _faceIndex:number;\n\tprivate _subGeometryIndex:number;\n\n\tprivate _localHitNormal:Vector3D = new Vector3D();\n\n\tprivate _rayPos:Vector3D = new Vector3D();\n\tprivate _rayDir:Vector3D = new Vector3D();\n\tprivate _potentialFound:boolean;\n\tprivate static MOUSE_SCISSOR_RECT:Rectangle = new Rectangle(0, 0, 1, 1);\n\n\tprivate _shaderPickingDetails:boolean;\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic get onlyMouseEnabled():boolean\n\t{\n\t\treturn this._onlyMouseEnabled;\n\t}\n\n\tpublic set onlyMouseEnabled(value:boolean)\n\t{\n\t\tthis._onlyMouseEnabled = value;\n\t}\n\n\t/**\n\t * Creates a new <code>ShaderPicker</code> object.\n\t *\n\t * @param shaderPickingDetails Determines whether the picker includes a second pass to calculate extra\n\t * properties such as uv and normal coordinates.\n\t */\n\tconstructor(shaderPickingDetails:boolean = false)\n\t{\n\t\tthis._shaderPickingDetails = shaderPickingDetails;\n\n\t\tthis._id = new Float32Array(4);\n\t\tthis._viewportData = new Float32Array(4); // first 2 contain scale, last 2 translation\n\t\tthis._boundOffsetScale = new Float32Array(8); // first 2 contain scale, last 2 translation\n\t\tthis._boundOffsetScale[3] = 0;\n\t\tthis._boundOffsetScale[7] = 1;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getViewCollision(x:number, y:number, view:View):PickingCollisionVO\n\t{\n\t\tvar collector:EntityCollector = <EntityCollector> view.iEntityCollector;\n\n\t\tthis._stage = (<DefaultRenderer> view.renderer).stage;\n\n\t\tif (!this._stage)\n\t\t\treturn null;\n\n\t\tthis._context = <IContextGL> this._stage.context;\n\n\t\tthis._viewportData[0] = view.width;\n\t\tthis._viewportData[1] = view.height;\n\t\tthis._viewportData[2] = -(this._projX = 2*x/view.width - 1);\n\t\tthis._viewportData[3] = this._projY = 2*y/view.height - 1;\n\n\t\t// _potentialFound will be set to true if any object is actually rendered\n\t\tthis._potentialFound = false;\n\n\t\t//reset head values\n\t\tthis._blendedRenderableHead = null;\n\t\tthis._opaqueRenderableHead = null;\n\n\t\tthis.pDraw(collector, null);\n\n\t\t// clear buffers\n\t\tthis._context.setVertexBufferAt(0, null);\n\n\t\tif (!this._context || !this._potentialFound)\n\t\t\treturn null;\n\n\t\tif (!this._bitmapImage2D)\n\t\t\tthis._bitmapImage2D = new BitmapImage2D(1, 1, false, 0);\n\n\t\tthis._context.drawToBitmapImage2D(this._bitmapImage2D);\n\t\tthis._hitColor = this._bitmapImage2D.getPixel(0, 0);\n\n\t\tif (!this._hitColor) {\n\t\t\tthis._context.present();\n\t\t\treturn null;\n\t\t}\n\n\t\tthis._hitRenderable = this._interactives[this._hitColor - 1];\n\t\tthis._hitEntity = this._hitRenderable.sourceEntity;\n\n\t\tif (this._onlyMouseEnabled && !this._hitEntity._iIsMouseEnabled())\n\t\t\treturn null;\n\n\t\tvar _collisionVO:PickingCollisionVO = this._hitEntity._iPickingCollisionVO;\n\t\tif (this._shaderPickingDetails) {\n\t\t\tthis.getHitDetails(view.camera);\n\t\t\t_collisionVO.localPosition = this._localHitPosition;\n\t\t\t_collisionVO.localNormal = this._localHitNormal;\n\t\t\t_collisionVO.uv = this._hitUV;\n\t\t\t_collisionVO.index = this._faceIndex;\n\t\t\t//_collisionVO.subGeometryIndex = this._subGeometryIndex;\n\n\t\t} else {\n\t\t\t_collisionVO.localPosition = null;\n\t\t\t_collisionVO.localNormal = null;\n\t\t\t_collisionVO.uv = null;\n\t\t\t_collisionVO.index = 0;\n\t\t\t//_collisionVO.subGeometryIndex = 0;\n\t\t}\n\n\t\treturn _collisionVO;\n\t}\n\n\t//*/\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic getSceneCollision(position:Vector3D, direction:Vector3D, scene:Scene):PickingCollisionVO\n\t{\n\t\treturn null;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic pDraw(entityCollector:EntityCollector, target:ITextureBase)\n\t{\n\n\t\tvar camera:Camera = entityCollector.camera;\n\n\t\tthis._context.clear(0, 0, 0, 1);\n\t\tthis._stage.scissorRect = ShaderPicker.MOUSE_SCISSOR_RECT;\n\n\t\tthis._interactives.length = this._interactiveId = 0;\n\n\t\tif (!this._objectProgram)\n\t\t\tthis.initObjectProgram();\n\n\t\tthis._context.setBlendFactors(ContextGLBlendFactor.ONE, ContextGLBlendFactor.ZERO);\n\t\tthis._context.setDepthTest(true, ContextGLCompareMode.LESS);\n\t\tthis._context.setProgram(this._objectProgram);\n\t\tthis._context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 4, this._viewportData, 1);\n\t\t//this.drawRenderables(entityCollector.opaqueRenderableHead, camera);\n\t\t//this.drawRenderables(entityCollector.blendedRenderableHead, camera);\n\t\t//TODO: reimplement ShaderPicker inheriting from RendererBase\n\t}\n\n\t/**\n\t * Draw a list of renderables.\n\t * @param renderables The renderables to draw.\n\t * @param camera The camera for which to render.\n\t */\n\tprivate drawRenderables(renderable:RenderableBase, camera:Camera)\n\t{\n\t\tvar matrix:Matrix3D = Matrix3DUtils.CALCULATION_MATRIX;\n\t\tvar viewProjection:Matrix3D = camera.viewProjection;\n\n\t\twhile (renderable) {\n\t\t\t// it's possible that the renderable was already removed from the scene\n\t\t\tif (!renderable.sourceEntity.scene || !renderable.sourceEntity._iIsMouseEnabled()) {\n\t\t\t\trenderable = renderable.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis._potentialFound = true;\n\n\t\t\tthis._context.setCulling((<MaterialBase> renderable.render.renderOwner).bothSides? ContextGLTriangleFace.NONE : ContextGLTriangleFace.BACK, camera.projection.coordinateSystem);\n\n\t\t\tthis._interactives[this._interactiveId++] = renderable;\n\t\t\t// color code so that reading from bitmapdata will contain the correct value\n\t\t\tthis._id[1] = (this._interactiveId >> 8)/255; // on green channel\n\t\t\tthis._id[2] = (this._interactiveId & 0xff)/255; // on blue channel\n\n\t\t\tmatrix.copyFrom(renderable.sourceEntity.getRenderSceneTransform(camera));\n\t\t\tmatrix.append(viewProjection);\n\t\t\tthis._context.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 0, matrix, true);\n\t\t\tthis._context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, this._id, 1);\n\n\t\t\tvar subGeometryVO:SubGeometryVOBase = this._hitRenderable.subGeometryVO;\n\n\t\t\tsubGeometryVO.activateVertexBufferVO(0, (<TriangleSubGeometry> subGeometryVO.subGeometry).positions);\n\t\t\tsubGeometryVO.getIndexBufferVO().draw(ContextGLDrawMode.TRIANGLES, 0, subGeometryVO.numIndices);\n\n\t\t\trenderable = renderable.next;\n\t\t}\n\n\t}\n\n\tprivate updateRay(camera:Camera)\n\t{\n\t\tthis._rayPos = camera.scenePosition;\n\n\t\tthis._rayDir = camera.getRay(this._projX, this._projY, 1);\n\t\tthis._rayDir.normalize();\n\t}\n\n\t/**\n\t * Creates the Program that color-codes objects.\n\t */\n\tprivate initObjectProgram()\n\t{\n\t\tvar vertexCode:string;\n\t\tvar fragmentCode:string;\n\n\t\tthis._objectProgram = this._context.createProgram();\n\n\t\tvertexCode = \"m44 vt0, va0, vc0\t\t\t\\n\" + \"mul vt1.xy, vt0.w, vc4.zw\t\\n\" + \"add vt0.xy, vt0.xy, vt1.xy\t\\n\" + \"mul vt0.xy, vt0.xy, vc4.xy\t\\n\" + \"mov op, vt0\t\\n\";\n\t\tfragmentCode = \"mov oc, fc0\"; // write identifier\n\n\t\tDebug.throwPIR('ShaderPicker', 'initTriangleProgram', 'Dependency: initObjectProgram')\n\t\t//_objectProgram.upload(new AGALMiniAssembler().assemble(ContextGLProgramType.VERTEX, vertexCode),new AGALMiniAssembler().assemble(ContextGLProgramType.FRAGMENT, fragmentCode));\n\t}\n\n\t/**\n\t * Creates the Program that renders positions.\n\t */\n\n\tprivate initTriangleProgram()\n\t{\n\t\tvar vertexCode:string;\n\t\tvar fragmentCode:string;\n\n\t\tthis._triangleProgram = this._context.createProgram();\n\n\t\t// todo: add animation code\n\t\tvertexCode = \"add vt0, va0, vc5 \t\t\t\\n\" + \"mul vt0, vt0, vc6 \t\t\t\\n\" + \"mov v0, vt0\t\t\t\t\\n\" + \"m44 vt0, va0, vc0\t\t\t\\n\" + \"mul vt1.xy, vt0.w, vc4.zw\t\\n\" + \"add vt0.xy, vt0.xy, vt1.xy\t\\n\" + \"mul vt0.xy, vt0.xy, vc4.xy\t\\n\" + \"mov op, vt0\t\\n\";\n\t\tfragmentCode = \"mov oc, v0\"; // write identifier\n\n\t\tvar vertexByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part vertex 1\\n\" + vertexCode + \"endpart\"))['vertex'].data;\n\t\tvar fragmentByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part fragment 1\\n\" + fragmentCode + \"endpart\"))['fragment'].data;\n\t\tthis._triangleProgram.upload(vertexByteCode, fragmentByteCode);\n\t}\n\n\t/**\n\t * Gets more detailed information about the hir position, if required.\n\t * @param camera The camera used to view the hit object.\n\t */\n\tprivate getHitDetails(camera:Camera)\n\t{\n\t\tthis.getApproximatePosition(camera);\n\t\tthis.getPreciseDetails(camera);\n\t}\n\n\t/**\n\t * Finds a first-guess approximate position about the hit position.\n\t *\n\t * @param camera The camera used to view the hit object.\n\t */\n\tprivate getApproximatePosition(camera:Camera)\n\t{\n\t\tvar bounds:Box = this._hitRenderable.sourceEntity.getBox();\n\t\tvar col:number;\n\t\tvar scX:number, scY:number, scZ:number;\n\t\tvar offsX:number, offsY:number, offsZ:number;\n\t\tvar localViewProjection:Matrix3D = Matrix3DUtils.CALCULATION_MATRIX;\n\n\t\tlocalViewProjection.copyFrom(this._hitRenderable.sourceEntity.getRenderSceneTransform(camera));\n\t\tlocalViewProjection.append(camera.viewProjection);\n\t\tif (!this._triangleProgram) {\n\t\t\tthis.initTriangleProgram();\n\t\t}\n\n\t\tthis._boundOffsetScale[4] = 1/(scX = bounds.width);\n\t\tthis._boundOffsetScale[5] = 1/(scY = bounds.height);\n\t\tthis._boundOffsetScale[6] = 1/(scZ = bounds.depth);\n\t\tthis._boundOffsetScale[0] = offsX = -bounds.x;\n\t\tthis._boundOffsetScale[1] = offsY = -bounds.y;\n\t\tthis._boundOffsetScale[2] = offsZ = -bounds.z;\n\n\t\tthis._context.setProgram(this._triangleProgram);\n\t\tthis._context.clear(0, 0, 0, 0, 1, 0, ContextGLClearMask.DEPTH);\n\t\tthis._context.setScissorRectangle(ShaderPicker.MOUSE_SCISSOR_RECT);\n\t\tthis._context.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 0, localViewProjection, true);\n\t\tthis._context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 5, this._boundOffsetScale, 2);\n\n\t\tvar subGeometryVO:SubGeometryVOBase = this._hitRenderable.subGeometryVO;\n\n\t\tsubGeometryVO.activateVertexBufferVO(0, (<TriangleSubGeometry> subGeometryVO.subGeometry).positions);\n\t\tsubGeometryVO.getIndexBufferVO().draw(ContextGLDrawMode.TRIANGLES, 0, subGeometryVO.numIndices);\n\n\t\tthis._context.drawToBitmapImage2D(this._bitmapImage2D);\n\n\t\tcol = this._bitmapImage2D.getPixel(0, 0);\n\n\t\tthis._localHitPosition.x = ((col >> 16) & 0xff)*scX/255 - offsX;\n\t\tthis._localHitPosition.y = ((col >> 8) & 0xff)*scY/255 - offsY;\n\t\tthis._localHitPosition.z = (col & 0xff)*scZ/255 - offsZ;\n\t}\n\n\t/**\n\t * Use the approximate position info to find the face under the mouse position from which we can derive the precise\n\t * ray-face intersection point, then use barycentric coordinates to figure out the uv coordinates, etc.\n\t * @param camera The camera used to view the hit object.\n\t */\n\tprivate getPreciseDetails(camera:Camera)\n\t{\n\t\tvar len:number = indices.length;\n\t\tvar x1:number, y1:number, z1:number;\n\t\tvar x2:number, y2:number, z2:number;\n\t\tvar x3:number, y3:number, z3:number;\n\t\tvar i:number = 0, j:number = 1, k:number = 2;\n\t\tvar t1:number, t2:number, t3:number;\n\t\tvar v0x:number, v0y:number, v0z:number;\n\t\tvar v1x:number, v1y:number, v1z:number;\n\t\tvar v2x:number, v2y:number, v2z:number;\n\t\tvar ni1:number, ni2:number, ni3:number;\n\t\tvar n1:number, n2:number, n3:number, nLength:number;\n\t\tvar dot00:number, dot01:number, dot02:number, dot11:number, dot12:number;\n\t\tvar s:number, t:number, invDenom:number;\n\t\tvar x:number = this._localHitPosition.x, y:number = this._localHitPosition.y, z:number = this._localHitPosition.z;\n\t\tvar u:number, v:number;\n\t\tvar ui1:number, ui2:number, ui3:number;\n\t\tvar s0x:number, s0y:number, s0z:number;\n\t\tvar s1x:number, s1y:number, s1z:number;\n\t\tvar nl:number;\n\t\tvar subGeom:TriangleSubGeometry = <TriangleSubGeometry> this._hitRenderable._pGetSubGeometry();\n\t\tvar indices:Uint16Array = subGeom.indices.get(subGeom.numElements);\n\n\t\tvar positions:Float32Array = subGeom.positions.get(subGeom.numVertices);\n\t\tvar posDim:number = subGeom.positions.dimensions;\n\n\t\tvar uvs:Float32Array = subGeom.uvs.get(subGeom.numVertices);\n\t\tvar uvDim:number = subGeom.uvs.dimensions;\n\n\t\tvar normals:Float32Array = subGeom.normals.get(subGeom.numVertices);\n\t\tvar normalDim:number = subGeom.normals.dimensions;\n\n\t\tthis.updateRay(camera);\n\n\t\twhile (i < len) {\n\t\t\tt1 = indices[i]*posDim;\n\t\t\tt2 = indices[j]*posDim;\n\t\t\tt3 = indices[k]*posDim;\n\t\t\tx1 = positions[t1];\n\t\t\ty1 = positions[t1 + 1];\n\t\t\tz1 = positions[t1 + 2];\n\t\t\tx2 = positions[t2];\n\t\t\ty2 = positions[t2 + 1];\n\t\t\tz2 = positions[t2 + 2];\n\t\t\tx3 = positions[t3];\n\t\t\ty3 = positions[t3 + 1];\n\t\t\tz3 = positions[t3 + 2];\n\n\t\t\t// if within bounds\n\t\t\tif (!(    (x < x1 && x < x2 && x < x3) || (y < y1 && y < y2 && y < y3) || (z < z1 && z < z2 && z < z3) || (x > x1 && x > x2 && x > x3) || (y > y1 && y > y2 && y > y3) || (z > z1 && z > z2 && z > z3))) {\n\n\t\t\t\t// calculate barycentric coords for approximated position\n\t\t\t\tv0x = x3 - x1;\n\t\t\t\tv0y = y3 - y1;\n\t\t\t\tv0z = z3 - z1;\n\t\t\t\tv1x = x2 - x1;\n\t\t\t\tv1y = y2 - y1;\n\t\t\t\tv1z = z2 - z1;\n\t\t\t\tv2x = x - x1;\n\t\t\t\tv2y = y - y1;\n\t\t\t\tv2z = z - z1;\n\t\t\t\tdot00 = v0x*v0x + v0y*v0y + v0z*v0z;\n\t\t\t\tdot01 = v0x*v1x + v0y*v1y + v0z*v1z;\n\t\t\t\tdot02 = v0x*v2x + v0y*v2y + v0z*v2z;\n\t\t\t\tdot11 = v1x*v1x + v1y*v1y + v1z*v1z;\n\t\t\t\tdot12 = v1x*v2x + v1y*v2y + v1z*v2z;\n\t\t\t\tinvDenom = 1/(dot00*dot11 - dot01*dot01);\n\t\t\t\ts = (dot11*dot02 - dot01*dot12)*invDenom;\n\t\t\t\tt = (dot00*dot12 - dot01*dot02)*invDenom;\n\n\t\t\t\t// if inside the current triangle, fetch details hit information\n\t\t\t\tif (s >= 0 && t >= 0 && (s + t) <= 1) {\n\n\t\t\t\t\tni1 = indices[i]*normalDim;\n\t\t\t\t\tni2 = indices[j]*normalDim;\n\t\t\t\t\tni3 = indices[k]*normalDim;\n\n\t\t\t\t\tn1 = indices[ni1] + indices[ni2] + indices[ni3];\n\t\t\t\t\tn2 = indices[ni1 + 1] + indices[ni2 + 1] + indices[ni3 + 1];\n\t\t\t\t\tn3 = indices[ni1 + 2] + indices[ni2 + 2] + indices[ni3 + 2];\n\n\t\t\t\t\tnLength = Math.sqrt(n1*n1 + n2*n2 + n3*n3);\n\n\t\t\t\t\tn1 /= nLength;\n\t\t\t\t\tn2 /= nLength;\n\t\t\t\t\tn3 /= nLength;\n\n\t\t\t\t\t// this is def the triangle, now calculate precise coords\n\t\t\t\t\tthis.getPrecisePosition(this._hitRenderable.sourceEntity.inverseSceneTransform, n1, n2, n3, x1, y1, z1);\n\n\t\t\t\t\tv2x = this._localHitPosition.x - x1;\n\t\t\t\t\tv2y = this._localHitPosition.y - y1;\n\t\t\t\t\tv2z = this._localHitPosition.z - z1;\n\n\t\t\t\t\ts0x = x2 - x1; // s0 = p1 - p0\n\t\t\t\t\ts0y = y2 - y1;\n\t\t\t\t\ts0z = z2 - z1;\n\t\t\t\t\ts1x = x3 - x1; // s1 = p2 - p0\n\t\t\t\t\ts1y = y3 - y1;\n\t\t\t\t\ts1z = z3 - z1;\n\t\t\t\t\tthis._localHitNormal.x = s0y*s1z - s0z*s1y; // n = s0 x s1\n\t\t\t\t\tthis._localHitNormal.y = s0z*s1x - s0x*s1z;\n\t\t\t\t\tthis._localHitNormal.z = s0x*s1y - s0y*s1x;\n\t\t\t\t\tnl = 1/Math.sqrt(this._localHitNormal.x*this._localHitNormal.x + this._localHitNormal.y*this._localHitNormal.y + this._localHitNormal.z*this._localHitNormal.z); // normalize n\n\t\t\t\t\tthis._localHitNormal.x *= nl;\n\t\t\t\t\tthis._localHitNormal.y *= nl;\n\t\t\t\t\tthis._localHitNormal.z *= nl;\n\n\t\t\t\t\tdot02 = v0x*v2x + v0y*v2y + v0z*v2z;\n\t\t\t\t\tdot12 = v1x*v2x + v1y*v2y + v1z*v2z;\n\t\t\t\t\ts = (dot11*dot02 - dot01*dot12)*invDenom;\n\t\t\t\t\tt = (dot00*dot12 - dot01*dot02)*invDenom;\n\n\t\t\t\t\tui1 = indices[i]*uvDim\n\t\t\t\t\tui2 = indices[j]*uvDim\n\t\t\t\t\tui3 = indices[k]*uvDim\n\n\t\t\t\t\tu = uvs[ui1];\n\t\t\t\t\tv = uvs[ui1 + 1];\n\t\t\t\t\tthis._hitUV.x = u + t*(uvs[ui2] - u) + s*(uvs[ui3] - u);\n\t\t\t\t\tthis._hitUV.y = v + t*(uvs[ui2 + 1] - v) + s*(uvs[ui3 + 1] - v);\n\n\t\t\t\t\tthis._faceIndex = i;\n\t\t\t\t\t//TODO add back subGeometryIndex value\n\t\t\t\t\t//this._subGeometryIndex = away.utils.GeometryUtils.getMeshSubGeometryIndex(subGeom);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti += 3;\n\t\t\tj += 3;\n\t\t\tk += 3;\n\t\t}\n\t}\n\n\t/**\n\t * Finds the precise hit position by unprojecting the screen coordinate back unto the hit face's plane and\n\t * calculating the intersection point.\n\t * @param camera The camera used to render the object.\n\t * @param invSceneTransform The inverse scene transformation of the hit object.\n\t * @param nx The x-coordinate of the face's plane normal.\n\t * @param ny The y-coordinate of the face plane normal.\n\t * @param nz The z-coordinate of the face plane normal.\n\t * @param px The x-coordinate of a point on the face's plane (ie a face vertex)\n\t * @param py The y-coordinate of a point on the face's plane (ie a face vertex)\n\t * @param pz The z-coordinate of a point on the face's plane (ie a face vertex)\n\t */\n\n\tprivate getPrecisePosition(invSceneTransform:Matrix3D, nx:number, ny:number, nz:number, px:number, py:number, pz:number)\n\t{\n\t\t// calculate screen ray and find exact intersection position with triangle\n\t\tvar rx:number, ry:number, rz:number;\n\t\tvar ox:number, oy:number, oz:number;\n\t\tvar t:number;\n\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\n\t\tvar cx:number = this._rayPos.x, cy:number = this._rayPos.y, cz:number = this._rayPos.z;\n\n\t\t// unprojected projection point, gives ray dir in cam space\n\t\tox = this._rayDir.x;\n\t\toy = this._rayDir.y;\n\t\toz = this._rayDir.z;\n\n\t\t// transform ray dir and origin (cam pos) to object space\n\t\t//invSceneTransform.copyRawDataTo( raw  );\n\t\tinvSceneTransform.copyRawDataTo(raw);\n\t\trx = raw[0]*ox + raw[4]*oy + raw[8]*oz;\n\t\try = raw[1]*ox + raw[5]*oy + raw[9]*oz;\n\t\trz = raw[2]*ox + raw[6]*oy + raw[10]*oz;\n\n\t\tox = raw[0]*cx + raw[4]*cy + raw[8]*cz + raw[12];\n\t\toy = raw[1]*cx + raw[5]*cy + raw[9]*cz + raw[13];\n\t\toz = raw[2]*cx + raw[6]*cy + raw[10]*cz + raw[14];\n\n\t\tt = ((px - ox)*nx + (py - oy)*ny + (pz - oz)*nz)/(rx*nx + ry*ny + rz*nz);\n\n\t\tthis._localHitPosition.x = ox + rx*t;\n\t\tthis._localHitPosition.y = oy + ry*t;\n\t\tthis._localHitPosition.z = oz + rz*t;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._bitmapImage2D.dispose();\n\t\tif (this._triangleProgram)\n\t\t\tthis._triangleProgram.dispose();\n\n\t\tif (this._objectProgram)\n\t\t\tthis._objectProgram.dispose();\n\n\t\tthis._triangleProgram = null;\n\t\tthis._objectProgram = null;\n\t\tthis._bitmapImage2D = null;\n\t\tthis._hitRenderable = null;\n\t\tthis._hitEntity = null;\n\t}\n}\n\nexport = ShaderPicker;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport BlendMode\t\t\t\t\t= require(\"awayjs-core/lib/image/BlendMode\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport BasicMaterial\t\t\t\t= require(\"awayjs-display/lib/materials/BasicMaterial\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport BasicMaterialPass\t\t\t= require(\"awayjs-renderergl/lib/render/passes/BasicMaterialPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\n\n/**\n * RenderMaterialObject forms an abstract base class for the default shaded materials provided by Stage,\n * using material methods to define their appearance.\n */\nclass BasicMaterialRender extends RenderBase\n{\n\tprivate _material:BasicMaterial;\n\tprivate _pass:BasicMaterialPass;\n\n\n\tconstructor(material:BasicMaterial, renderableClass:IRenderableClass, renderPool:RenderPool)\n\t{\n\t\tsuper(material, renderableClass, renderPool);\n\n\t\tthis._material = material;\n\n\t\tthis._pAddPass(this._pass = new BasicMaterialPass(this, material, renderableClass, this._stage));\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._material = null;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateRender()\n\t{\n\t\tsuper._pUpdateRender();\n\n\t\tthis._pRequiresBlending = (this._material.blendMode != BlendMode.NORMAL || this._material.alphaBlending || (this._material.colorTransform && this._material.colorTransform.alphaMultiplier < 1));\n\t\tthis._pass.preserveAlpha = this._material.preserveAlpha;//this._pRequiresBlending;\n\t\tthis._pass.shader.setBlendMode((this._renderOwner.blendMode == BlendMode.NORMAL && this._pRequiresBlending)? BlendMode.LAYER : this._material.blendMode);\n\t\t//this._pass.forceSeparateMVP = false;\n\t}\n}\n\nexport = BasicMaterialRender;",
    "import IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport BasicMaterial\t\t\t\t= require(\"awayjs-display/lib/materials/BasicMaterial\");\n\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderPassBase\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPassBase\");\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n * DepthRender forms an abstract base class for the default shaded materials provided by Stage,\n * using material methods to define their appearance.\n */\nclass DepthRender extends RenderPassBase\n{\n\tprivate _fragmentConstantsIndex:number;\n\tprivate _textureVO:TextureVOBase;\n\n\t/**\n\t *\n\t * @param pool\n\t * @param renderOwner\n\t * @param renderableClass\n\t * @param stage\n\t */\n\tconstructor(renderOwner:IRenderOwner, renderableClass:IRenderableClass, renderPool:RenderPool)\n\t{\n\t\tsuper(renderOwner, renderableClass, renderPool);\n\n\t\tthis._shader = new ShaderBase(renderableClass, this, this._stage);\n\n\t\tthis._pAddPass(this);\n\t}\n\n\tpublic invalidate()\n\t{\n\t\tsuper.invalidate();\n\n\t\tthis._textureVO = this._renderOwner.getTextureAt(0)? this._shader.getAbstraction(this._renderOwner.getTextureAt(0)) : null;\n\t}\n\n\tpublic _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tsuper._iIncludeDependencies(shader);\n\n\t\tshader.projectionDependencies++;\n\n\t\tif (shader.alphaThreshold > 0)\n\t\t\tshader.uvDependencies++;\n\t}\n\n\n\tpublic _iInitConstantData(shader:ShaderBase)\n\t{\n\t\tsuper._iInitConstantData(shader);\n\n\t\tvar index:number = this._fragmentConstantsIndex;\n\t\tvar data:Float32Array = shader.fragmentConstantData;\n\t\tdata[index] = 1.0;\n\t\tdata[index + 1] = 255.0;\n\t\tdata[index + 2] = 65025.0;\n\t\tdata[index + 3] = 16581375.0;\n\t\tdata[index + 4] = 1.0/255.0;\n\t\tdata[index + 5] = 1.0/255.0;\n\t\tdata[index + 6] = 1.0/255.0;\n\t\tdata[index + 7] = 0.0;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar code:string = \"\";\n\t\tvar targetReg:ShaderRegisterElement = sharedRegisters.shadedTarget;\n\t\tvar dataReg1:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\n\t\tvar dataReg2:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\n\n\t\tthis._fragmentConstantsIndex = dataReg1.index*4;\n\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\tregisterCache.addFragmentTempUsages(temp1, 1);\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\tregisterCache.addFragmentTempUsages(temp2, 1);\n\n\t\tcode += \"div \" + temp1 + \", \" + sharedRegisters.projectionFragment + \", \" + sharedRegisters.projectionFragment + \".w\\n\" + //\"sub ft2.z, fc0.x, ft2.z\\n\" +    //invert\n\t\t\t\"mul \" + temp1 + \", \" + dataReg1 + \", \" + temp1 + \".z\\n\" +\n\t\t\t\"frc \" + temp1 + \", \" + temp1 + \"\\n\" +\n\t\t\t\"mul \" + temp2 + \", \" + temp1 + \".yzww, \" + dataReg2 + \"\\n\";\n\n\t\t//codeF += \"mov ft1.w, fc1.w\t\\n\" +\n\t\t//    \"mov ft0.w, fc0.x\t\\n\";\n\n\t\tif (this._textureVO && shader.alphaThreshold > 0) {\n\n\t\t\tvar albedo:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\t\tcode += this._textureVO._iGetFragmentCode(albedo, registerCache, sharedRegisters, sharedRegisters.uvVarying);\n\n\t\t\tvar cutOffReg:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\n\n\t\t\tcode += \"sub \" + albedo + \".w, \" + albedo + \".w, \" + cutOffReg + \".x\\n\" +\n\t\t\t\t\"kil \" + albedo + \".w\\n\";\n\t\t}\n\n\t\tcode += \"sub \" + targetReg + \", \" + temp1 + \", \" + temp2 + \"\\n\";\n\n\t\tregisterCache.removeFragmentTempUsage(temp1);\n\t\tregisterCache.removeFragmentTempUsage(temp2);\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iActivate(camera:Camera)\n\t{\n\t\tsuper._iActivate(camera);\n\n\t\tif (this._textureVO && this._shader.alphaThreshold > 0) {\n\t\t\tthis._textureVO.activate(this);\n\n\t\t\tthis._shader.fragmentConstantData[this._fragmentConstantsIndex + 8] = this._shader.alphaThreshold;\n\t\t}\n\t}\n}\n\nexport = DepthRender;",
    "﻿import IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport BasicMaterial\t\t\t\t= require(\"awayjs-display/lib/materials/BasicMaterial\");\n\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\nimport RenderPassBase\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPassBase\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n * DistanceRender is a pass that writes distance values to a depth map as a 32-bit value exploded over the 4 texture channels.\n * This is used to render omnidirectional shadow maps.\n */\nclass DistanceRender extends RenderPassBase\n{\n\tprivate _textureVO:TextureVOBase;\n\tprivate _fragmentConstantsIndex:number;\n\n\t/**\n\t * Creates a new DistanceRender object.\n\t *\n\t * @param material The material to which this pass belongs.\n\t */\n\tconstructor(renderOwner:IRenderOwner, renderableClass:IRenderableClass, renderPool:RenderPool)\n\t{\n\t\tsuper(renderOwner, renderableClass, renderPool);\n\n\t\tthis._shader = new ShaderBase(renderableClass, this, this._stage);\n\n\t\tthis._pAddPass(this);\n\t}\n\n\tpublic invalidate()\n\t{\n\t\tsuper.invalidate();\n\n\t\tthis._textureVO = this._renderOwner.getTextureAt(0)? this._shader.getAbstraction(this._renderOwner.getTextureAt(0)) : null;\n\t}\n\n\t/**\n\t * Initializes the unchanging constant data for this material.\n\t */\n\tpublic _iInitConstantData(shader:ShaderBase)\n\t{\n\t\tsuper._iInitConstantData(shader);\n\n\t\tvar index:number = this._fragmentConstantsIndex;\n\t\tvar data:Float32Array = shader.fragmentConstantData;\n\t\tdata[index + 4] = 1.0/255.0;\n\t\tdata[index + 5] = 1.0/255.0;\n\t\tdata[index + 6] = 1.0/255.0;\n\t\tdata[index + 7] = 0.0;\n\t}\n\n\tpublic _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tsuper._iIncludeDependencies(shader);\n\n\t\tshader.projectionDependencies++;\n\t\tshader.viewDirDependencies++;\n\n\t\tif (shader.alphaThreshold > 0)\n\t\t\tshader.uvDependencies++;\n\n\t\tif (shader.viewDirDependencies > 0)\n\t\t\tshader.globalPosDependencies++;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar code:string;\n\t\tvar targetReg:ShaderRegisterElement = sharedRegisters.shadedTarget;\n\t\tvar dataReg1:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\n\t\tvar dataReg2:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\n\n\t\tthis._fragmentConstantsIndex = dataReg1.index*4;\n\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\tregisterCache.addFragmentTempUsages(temp1, 1);\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\tregisterCache.addFragmentTempUsages(temp2, 1);\n\n\t\t// squared distance to view\n\t\tcode = \"dp3 \" + temp1 + \".z, \" + sharedRegisters.viewDirVarying + \".xyz, \" + sharedRegisters.viewDirVarying + \".xyz\\n\" +\n\t\t\t\"mul \" + temp1 + \", \" + dataReg1 + \", \" + temp1 + \".z\\n\" +\n\t\t\t\"frc \" + temp1 + \", \" + temp1 + \"\\n\" +\n\t\t\t\"mul \" + temp2 + \", \" + temp1 + \".yzww, \" + dataReg2 + \"\\n\";\n\n\t\tif (this._textureVO && shader.alphaThreshold > 0) {\n\n\t\t\tvar albedo:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\t\tcode += this._textureVO._iGetFragmentCode(albedo, registerCache, sharedRegisters, sharedRegisters.uvVarying);\n\n\t\t\tvar cutOffReg:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\n\n\t\t\tcode += \"sub \" + albedo + \".w, \" + albedo + \".w, \" + cutOffReg + \".x\\n\" +\n\t\t\t\t\"kil \" + albedo + \".w\\n\";\n\t\t}\n\n\t\tcode += \"sub \" + targetReg + \", \" + temp1 + \", \" + temp2 + \"\\n\";\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iActivate(camera:Camera)\n\t{\n\t\tsuper._iActivate(camera);\n\n\t\tvar f:number = camera.projection.far;\n\n\t\tf = 1/(2*f*f);\n\t\t// sqrt(f*f+f*f) is largest possible distance for any frustum, so we need to divide by it. Rarely a tight fit, but with 32 bits precision, it's enough.\n\t\tvar index:number = this._fragmentConstantsIndex;\n\t\tvar data:Float32Array = this._shader.fragmentConstantData;\n\t\tdata[index] = 1.0*f;\n\t\tdata[index + 1] = 255.0*f;\n\t\tdata[index + 2] = 65025.0*f;\n\t\tdata[index + 3] = 16581375.0*f;\n\n\t\tif (this._textureVO && this._shader.alphaThreshold > 0) {\n\t\t\tthis._textureVO.activate(this);\n\n\t\t\tdata[index + 8] = this._shader.alphaThreshold;\n\t\t}\n\t}\n}\n\nexport = DistanceRender;",
    "import Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport SamplerBase\t\t\t\t\t= require(\"awayjs-core/lib/image/SamplerBase\");\nimport Sampler2D\t\t\t\t\t= require(\"awayjs-core/lib/image/Sampler2D\");\n\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport RenderOwnerEvent\t\t\t\t= require(\"awayjs-display/lib/events/RenderOwnerEvent\");\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport MaterialBase\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\nimport DefaultMaterialManager\t\t= require(\"awayjs-display/lib/managers/DefaultMaterialManager\");\nimport TextureBase\t\t\t\t\t= require(\"awayjs-display/lib/textures/TextureBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\nimport GL_SamplerBase\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_SamplerBase\");\n\nimport AnimatorBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport PassEvent\t\t\t\t\t= require(\"awayjs-renderergl/lib/events/PassEvent\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n *\n * @class away.pool.Passes\n */\nclass RenderBase extends AbstractionBase\n{\n\tprivate _onInvalidateAnimationDelegate:(event:RenderOwnerEvent) => void;\n\tprivate _onInvalidatePassesDelegate:(event:RenderOwnerEvent) => void;\n\n\tpublic usages:number = 0;\n\tpublic _forceSeparateMVP:boolean = false;\n\n\tpublic _renderOwner:IRenderOwner;\n\tpublic _renderableClass:IRenderableClass;\n\tpublic _stage:Stage;\n\n\tprivate _renderOrderId:number;\n\tprivate _invalidAnimation:boolean = true;\n\tprivate _invalidRender:boolean = true;\n\tprivate _invalidImages:boolean = true;\n\tprivate _passes:Array<IPass> = new Array<IPass>();\n\tprivate _imageIndices:Object = new Object();\n\tprivate _numImages:number;\n\n\n\n\n\tpublic _pRequiresBlending:boolean = false;\n\n\tprivate _onPassInvalidateDelegate:(event:PassEvent) => void;\n\n\tpublic renderId:number;\n\n\tpublic images:Array<GL_ImageBase> = new Array<GL_ImageBase>();\n\tpublic samplers:Array<GL_SamplerBase> = new Array<GL_SamplerBase>();\n\n\t/**\n\t * Indicates whether or not the renderable requires alpha blending during rendering.\n\t */\n\tpublic get requiresBlending():boolean\n\t{\n\t\treturn this._pRequiresBlending;\n\t}\n\n\tpublic get renderOrderId():number\n\t{\n\t\tif (this._invalidAnimation)\n\t\t\tthis._updateAnimation();\n\n\t\treturn this._renderOrderId;\n\t}\n\n\tpublic get passes():Array<IPass>\n\t{\n\t\tif (this._invalidAnimation)\n\t\t\tthis._updateAnimation();\n\n\t\treturn this._passes;\n\t}\n\n\tpublic get renderOwner():IRenderOwner\n\t{\n\t\treturn this._renderOwner;\n\t}\n\n\tpublic get numImages():number\n\t{\n\t\tif (this._invalidImages)\n\t\t\tthis._updateImages();\n\n\t\treturn this._numImages;\n\t}\n\n\tconstructor(renderOwner:IRenderOwner, renderableClass:IRenderableClass, renderPool:RenderPool)\n\t{\n\t\tsuper(renderOwner, renderPool);\n\n\t\tthis._onInvalidateAnimationDelegate = (event:RenderOwnerEvent) => this.onInvalidateAnimation(event);\n\t\tthis._onInvalidatePassesDelegate = (event:RenderOwnerEvent) => this.onInvalidatePasses(event);\n\n\t\tthis.renderId = renderOwner.id;\n\t\tthis._renderOwner = renderOwner;\n\t\tthis._renderableClass = renderableClass;\n\t\tthis._stage = renderPool.stage;\n\n\t\tthis._renderOwner.addEventListener(RenderOwnerEvent.INVALIDATE_ANIMATION, this._onInvalidateAnimationDelegate);\n\t\tthis._renderOwner.addEventListener(RenderOwnerEvent.INVALIDATE_PASSES, this._onInvalidatePassesDelegate);\n\n\t\tthis._onPassInvalidateDelegate = (event:PassEvent) => this.onPassInvalidate(event);\n\t}\n\n\tpublic _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tthis._renderableClass._iIncludeDependencies(shader);\n\n\t\tshader.alphaThreshold = this._renderOwner.alphaThreshold;\n\t\tshader.useImageRect = this._renderOwner.imageRect;\n\t\t//shader.useUVBuffer = this._renderOwner.uvBuffer;\n\n\t\tif (this._renderOwner instanceof MaterialBase) {\n\t\t\tvar material:MaterialBase = <MaterialBase> this._renderOwner;\n\t\t\tshader.useAlphaPremultiplied = material.alphaPremultiplied;\n\t\t\tshader.useBothSides = material.bothSides;\n\t\t\tshader.usesUVTransform = material.animateUVs;\n\t\t\tshader.usesColorTransform = material.useColorTransform;\n\t\t}\n\t}\n\n\tpublic getImageIndex(texture:TextureBase, index:number = 0):number\n\t{\n\t\tif (this._invalidImages)\n\t\t\tthis._updateImages();\n\n\t\treturn this._imageIndices[texture.id][index];\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._renderOwner = null;\n\t\tthis._renderableClass = null;\n\t\tthis._stage = null;\n\n\t\tvar len:number = this._passes.length;\n\t\tfor (var i:number = 0; i < len; i++) {\n\t\t\tthis._passes[i].removeEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\n\t\t\tthis._passes[i].dispose();\n\t\t}\n\n\t\tthis._passes = null;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onInvalidate(event:AssetEvent)\n\t{\n\t\tsuper.onInvalidate(event);\n\n\t\tthis._invalidRender = true;\n\t\tthis._invalidAnimation = true;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onInvalidatePasses(event:RenderOwnerEvent)\n\t{\n\t\tvar len:number = this._passes.length;\n\t\tfor (var i:number = 0; i < len; i++)\n\t\t\tthis._passes[i].invalidate();\n\n\t\tthis._invalidAnimation = true;\n\t\tthis._invalidImages = true;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onInvalidateAnimation(event:RenderOwnerEvent)\n\t{\n\t\tthis._invalidAnimation = true;\n\t}\n\n\t/**\n\t *\n\t * @param renderOwner\n\t */\n\tprivate _updateAnimation()\n\t{\n\t\tif (this._invalidRender)\n\t\t\tthis._pUpdateRender();\n\n\t\tthis._invalidAnimation = false;\n\n\t\tvar enabledGPUAnimation:boolean = this._getEnabledGPUAnimation();\n\n\t\tvar renderOrderId = 0;\n\t\tvar mult:number = 1;\n\t\tvar shader:ShaderBase;\n\t\tvar len:number = this._passes.length;\n\t\tfor (var i:number = 0; i < len; i++) {\n\t\t\tshader = this._passes[i].shader;\n\n\t\t\tif (shader.usesAnimation != enabledGPUAnimation) {\n\t\t\t\tshader.usesAnimation = enabledGPUAnimation;\n\t\t\t\tshader.invalidateProgram();\n\t\t\t}\n\n\t\t\trenderOrderId += shader.programData.id*mult;\n\t\t\tmult *= 1000;\n\t\t}\n\n\t\tthis._renderOrderId = renderOrderId;\n\t}\n\n\tprivate _updateImages()\n\t{\n\t\tthis._invalidImages = false;\n\n\t\tvar numTextures:number = this._renderOwner.getNumTextures();\n\t\tvar texture:TextureBase;\n\t\tvar numImages:number;\n\t\tvar images:Array<number>;\n\t\tvar image:ImageBase;\n\t\tvar sampler:SamplerBase;\n\t\tvar index:number = 0;\n\n\t\tfor (var i:number = 0; i < numTextures; i++) {\n\t\t\ttexture = this._renderOwner.getTextureAt(i);\n\t\t\tnumImages = texture.getNumImages();\n\t\t\timages = this._imageIndices[texture.id] = new Array<number>();\n\t\t\tfor (var j:number = 0; j < numImages; j++) {\n\t\t\t\timage = texture.getImageAt(j) || (this._renderOwner.style? this._renderOwner.style.getImageAt(texture, j) : null) || DefaultMaterialManager.getDefaultImage2D();\n\t\t\t\tthis.images[index] = <GL_ImageBase> this._stage.getAbstraction(image);\n\n\t\t\t\tsampler = texture.getSamplerAt(j) || (this._renderOwner.style? this._renderOwner.style.getSamplerAt(texture, j) : null) || DefaultMaterialManager.getDefaultSampler();\n\t\t\t\tthis.samplers[index] = <GL_SamplerBase> this._stage.getAbstraction(sampler);\n\n\t\t\t\timages[j] = index++;\n\t\t\t}\n\t\t}\n\n\t\tthis._numImages = index;\n\t}\n\n\t/**\n\t * Performs any processing that needs to occur before any of its passes are used.\n\t *\n\t * @private\n\t */\n\tpublic _pUpdateRender()\n\t{\n\t\tthis._invalidRender = false;\n\n\t\t//overrride to update shader object properties\n\t}\n\n\t/**\n\t * Removes a pass from the renderOwner.\n\t * @param pass The pass to be removed.\n\t */\n\tpublic _pRemovePass(pass:IPass)\n\t{\n\t\tpass.removeEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\n\t\tthis._passes.splice(this._passes.indexOf(pass), 1);\n\t}\n\n\t/**\n\t * Removes all passes from the renderOwner\n\t */\n\tpublic _pClearPasses()\n\t{\n\t\tvar len:number = this._passes.length;\n\t\tfor (var i:number = 0; i < len; ++i)\n\t\t\tthis._passes[i].removeEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\n\n\t\tthis._passes.length = 0;\n\t}\n\n\t/**\n\t * Adds a pass to the renderOwner\n\t * @param pass\n\t */\n\tpublic _pAddPass(pass:IPass)\n\t{\n\t\tthis._passes.push(pass);\n\t\tpass.addEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\n\t}\n\n\t/**\n\t * Listener for when a pass's shader code changes. It recalculates the render order id.\n\t */\n\tprivate onPassInvalidate(event:PassEvent)\n\t{\n\t\tthis._invalidAnimation = true;\n\t}\n\n\n\t/**\n\t * test if animation will be able to run on gpu BEFORE compiling materials\n\t * test if the shader objects supports animating the animation set in the vertex shader\n\t * if any object using this material fails to support accelerated animations for any of the shader objects,\n\t * we should do everything on cpu (otherwise we have the cost of both gpu + cpu animations)\n\t */\n\tprivate _getEnabledGPUAnimation():boolean\n\t{\n\t\tif (this._renderOwner.animationSet) {\n\t\t\tthis._renderOwner.animationSet.resetGPUCompatibility();\n\n\t\t\tvar owners:Array<IRenderableOwner> = this._renderOwner.iOwners;\n\t\t\tvar numOwners:number = owners.length;\n\n\t\t\tvar len:number = this._passes.length;\n\t\t\tfor (var i:number = 0; i < len; i++)\n\t\t\t\tfor (var j:number = 0; j < numOwners; j++)\n\t\t\t\t\tif (owners[j].animator)\n\t\t\t\t\t\t(<AnimatorBase> owners[j].animator).testGPUCompatibility(this._passes[i].shader);\n\n\t\t\treturn !this._renderOwner.animationSet.usesCPU;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nexport = RenderBase;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport TextureBase\t\t\t\t\t= require(\"awayjs-display/lib/textures/TextureBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\")\n\nimport AnimationSetBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimationSetBase\");\nimport PassEvent\t\t\t\t\t= require(\"awayjs-renderergl/lib/events/PassEvent\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\n\n/**\n * RenderPassBase provides an abstract base class for material shader passes. A material pass constitutes at least\n * a render call per required renderable.\n */\nclass RenderPassBase extends RenderBase implements IPass\n{\n\tpublic _shader:ShaderBase;\n\n\tpublic get shader():ShaderBase\n\t{\n\t\treturn this._shader;\n\t}\n\n\tpublic get animationSet():AnimationSetBase\n\t{\n\t\treturn <AnimationSetBase> this._renderOwner.animationSet;\n\t}\n\n\t/**\n\t * Marks the shader program as invalid, so it will be recompiled before the next render.\n\t */\n\tpublic invalidate()\n\t{\n\t\tthis._shader.invalidateShader();\n\n\t\tthis.dispatchEvent(new PassEvent(PassEvent.INVALIDATE, this));\n\t}\n\n\tpublic dispose()\n\t{\n\t\tif (this._shader) {\n\t\t\tthis._shader.dispose();\n\t\t\tthis._shader = null;\n\t\t}\n\t}\n\n\t/**\n\t * Renders the current pass. Before calling pass, activatePass needs to be called with the same index.\n\t * @param pass The pass used to render the renderable.\n\t * @param renderable The IRenderable object to draw.\n\t * @param stage The Stage object used for rendering.\n\t * @param entityCollector The EntityCollector object that contains the visible scene data.\n\t * @param viewProjection The view-projection matrix used to project to the screen. This is not the same as\n\t * camera.viewProjection as it includes the scaling factors when rendering to textures.\n\t *\n\t * @internal\n\t */\n\tpublic _iRender(renderable:RenderableBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tthis._shader._iRender(renderable, camera, viewProjection);\n\t}\n\n\t/**\n\t * Sets the render state for the pass that is independent of the rendered object. This needs to be called before\n\t * calling pass. Before activating a pass, the previously used pass needs to be deactivated.\n\t * @param stage The Stage object which is currently used for rendering.\n\t * @param camera The camera from which the scene is viewed.\n\t * @private\n\t */\n\tpublic _iActivate(camera:Camera)\n\t{\n\t\tthis._shader._iActivate(camera);\n\t}\n\n\t/**\n\t * Clears the render state for the pass. This needs to be called before activating another pass.\n\t * @param stage The Stage used for rendering\n\t *\n\t * @private\n\t */\n\tpublic _iDeactivate()\n\t{\n\t\tthis._shader._iDeactivate();\n\t}\n\n\tpublic _iInitConstantData(shader:ShaderBase)\n\t{\n\n\t}\n\n\tpublic _iGetPreLightingVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetPreLightingFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetNormalVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetNormalFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n}\n\nexport = RenderPassBase;",
    "import IAssetClass\t\t\t\t\t= require(\"awayjs-core/lib/library/IAssetClass\");\nimport IAbstractionPool\t\t\t\t= require(\"awayjs-core/lib/library/IAbstractionPool\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport BasicMaterial\t\t\t\t= require(\"awayjs-display/lib/materials/BasicMaterial\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\n\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport BasicMaterialRender\t\t\t= require(\"awayjs-renderergl/lib/render/BasicMaterialRender\");\nimport IRenderClass\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/IRenderClass\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport SkyboxRender\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/SkyboxRender\");\n\n/**\n * @class away.pool.RenderPool\n */\nclass RenderPool implements IAbstractionPool\n{\n\tprivate static _abstractionPool:Object = new Object();\n\t\n\tprivate _pool:Object = new Object();\n\tprivate _renderableClass:IRenderableClass;\n\tprivate _stage:Stage;\n\tprivate _renderClass:IRenderClass;\n\n\tget stage():Stage\n\t{\n\t\treturn this._stage;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param renderClass\n\t */\n\tconstructor(renderableClass:IRenderableClass, stage:Stage, renderClass:IRenderClass = null)\n\t{\n\t\tthis._renderableClass = renderableClass;\n\t\tthis._stage = stage;\n\t\tthis._renderClass = renderClass;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param renderableOwner\n\t * @returns IRenderable\n\t */\n\tpublic getAbstraction(renderOwner:IRenderOwner):RenderBase\n\t{\n\t\treturn (this._pool[renderOwner.id] || (this._pool[renderOwner.id] = new (<IRenderClass> this._renderClass || RenderPool._abstractionPool[renderOwner.assetType])(renderOwner, this._renderableClass, this)));\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param renderableOwner\n\t */\n\tpublic clearAbstraction(renderOwner:IRenderOwner)\n\t{\n\t\tdelete this._pool[renderOwner.id];\n\t}\n\t\n\t/**\n\t *\n\t * @param imageObjectClass\n\t */\n\tpublic static registerAbstraction(renderClass:IRenderClass, assetClass:IAssetClass)\n\t{\n\t\tRenderPool._abstractionPool[assetClass.assetType] = renderClass;\n\t}\n\n\t/**\n\t *\n\t * @param subGeometry\n\t */\n\tpublic static getClass(renderOwner:IRenderOwner):IRenderClass\n\t{\n\t\treturn RenderPool._abstractionPool[renderOwner.assetType];\n\t}\n}\n\nexport = RenderPool;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport BlendMode\t\t\t\t\t= require(\"awayjs-core/lib/image/BlendMode\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport BasicMaterial\t\t\t\t= require(\"awayjs-display/lib/materials/BasicMaterial\");\n\nimport ContextGLCompareMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\n\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderPassBase\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPassBase\");\nimport RenderPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderPool\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n * SkyboxRender forms an abstract base class for the default shaded materials provided by Stage,\n * using material methods to define their appearance.\n */\nclass SkyboxRender extends RenderPassBase\n{\n\tpublic _skybox:Skybox;\n\tpublic _texture:TextureVOBase;\n\n\tconstructor(skybox:Skybox, renderableClass:IRenderableClass, renderPool:RenderPool)\n\t{\n\t\tsuper(skybox, renderableClass, renderPool);\n\n\t\tthis._skybox = skybox;\n\n\t\tthis._shader = new ShaderBase(renderableClass, this, this._stage);\n\n\t\tthis._texture = <TextureVOBase> this._shader.getAbstraction(this._skybox.texture);\n\n\t\tthis._pAddPass(this);\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._texture.onClear(new AssetEvent(AssetEvent.CLEAR, this._skybox.texture));\n\t\tthis._texture = null;\n\n\t\tthis._skybox = null;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _pUpdateRender()\n\t{\n\t\tsuper._pUpdateRender();\n\n\t\tthis._pRequiresBlending = (this._renderOwner.blendMode != BlendMode.NORMAL);\n\n\t\tthis.shader.setBlendMode((this._renderOwner.blendMode == BlendMode.NORMAL && this._pRequiresBlending)? BlendMode.LAYER : this._renderOwner.blendMode);\n\t}\n\n\tpublic _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tsuper._iIncludeDependencies(shader);\n\n\t\tshader.usesLocalPosFragment = true;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn this._texture._iGetFragmentCode(sharedRegisters.shadedTarget, registerCache, sharedRegisters, sharedRegisters.localPositionVarying);\n\t}\n\n\n\tpublic _iRender(renderable:RenderableBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._iRender(renderable, camera, viewProjection);\n\n\t\tthis._texture._setRenderState(renderable);\n\t}\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iActivate(camera:Camera)\n\t{\n\t\tsuper._iActivate(camera);\n\n\t\tthis._stage.context.setDepthTest(false, ContextGLCompareMode.LESS);\n\n\t\tthis._texture.activate(this);\n\t}\n}\n\nexport = SkyboxRender;",
    "import BlendMode\t\t\t\t\t= require(\"awayjs-core/lib/image/BlendMode\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\n\nimport ContextGLCompareMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport ContextGLMipFilter\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLMipFilter\");\nimport ContextGLTextureFilter\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFilter\");\nimport ContextGLWrapMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLWrapMode\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport PassBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/PassBase\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n * BasicMaterialPass forms an abstract base class for the default shaded materials provided by Stage,\n * using material methods to define their appearance.\n */\nclass BasicMaterialPass extends PassBase\n{\n\tprivate _textureVO:TextureVOBase;\n\tprivate _diffuseR:number = 1;\n\tprivate _diffuseG:number = 1;\n\tprivate _diffuseB:number = 1;\n\tprivate _diffuseA:number = 1;\n\n\tprivate _fragmentConstantsIndex:number;\n\n\tconstructor(render:RenderBase, renderOwner:IRenderOwner, renderableClass:IRenderableClass, stage:Stage)\n\t{\n\t\tsuper(render, renderOwner, renderableClass, stage);\n\n\t\tthis._shader = new ShaderBase(renderableClass, this, this._stage);\n\n\t\tthis.invalidate();\n\t}\n\n\tpublic _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tsuper._iIncludeDependencies(shader);\n\n\t\tif (this._textureVO != null)\n\t\t\tshader.uvDependencies++;\n    }\n\n\tpublic invalidate()\n\t{\n\t\tsuper.invalidate();\n\n\t\tthis._textureVO = this._renderOwner.getTextureAt(0)? this._shader.getAbstraction(this._renderOwner.getTextureAt(0)) : null;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tif (this._textureVO) {\n\t\t\tthis._textureVO.onClear(new AssetEvent(AssetEvent.CLEAR, this._renderOwner.getTextureAt(0)));\n\t\t\tthis._textureVO = null;\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iGetFragmentCode(shader:ShaderBase, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData):string\n\t{\n\t\tvar code:string = \"\";\n\n        var alphaReg:ShaderRegisterElement;\n\n        if (this.preserveAlpha) {\n            alphaReg = regCache.getFreeFragmentSingleTemp();\n            regCache.addFragmentTempUsages(alphaReg, 1);\n            code += \"mov \" + alphaReg + \", \" + sharedReg.shadedTarget + \".w\\n\";\n        }\n\n\t\tvar targetReg:ShaderRegisterElement = sharedReg.shadedTarget;\n\n\t\tif (this._textureVO != null) {\n\n\t\t\tcode += this._textureVO._iGetFragmentCode(targetReg, regCache, sharedReg, sharedReg.uvVarying);\n\n\t\t\tif (shader.alphaThreshold > 0) {\n\t\t\t\tvar cutOffReg:ShaderRegisterElement = regCache.getFreeFragmentConstant();\n\t\t\t\tthis._fragmentConstantsIndex = cutOffReg.index*4;\n\n\t\t\t\tcode += \"sub \" + targetReg + \".w, \" + targetReg + \".w, \" + cutOffReg + \".x\\n\" + \"kil \" + targetReg + \".w\\n\" + \"add \" + targetReg + \".w, \" + targetReg + \".w, \" + cutOffReg + \".x\\n\";\n\t\t\t}\n\t\t} else if (shader.colorBufferIndex != -1) {\n\n\t\t\tcode += \"mov \" + targetReg + \", \" + sharedReg.colorVarying + \"\\n\";\n\t\t} else {\n\t\t\tvar diffuseInputReg:ShaderRegisterElement = regCache.getFreeFragmentConstant();\n\n\t\t\tthis._fragmentConstantsIndex = diffuseInputReg.index*4;\n\n\t\t\tcode += \"mov \" + targetReg + \", \" + diffuseInputReg + \"\\n\";\n\t\t}\n\n        if (this.preserveAlpha) {\n            code += \"mul \" + sharedReg.shadedTarget + \".w, \" + sharedReg.shadedTarget + \".w, \" + alphaReg + \"\\n\";\n            regCache.removeFragmentTempUsage(alphaReg);\n        }\n\n\t\treturn code;\n\t}\n\n\tpublic _iRender(renderable:RenderableBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._iRender(renderable, camera, viewProjection);\n\n\t\tif (this._textureVO != null)\n\t\t\tthis._textureVO._setRenderState(renderable);\n\t}\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iActivate(camera:Camera)\n\t{\n\t\tsuper._iActivate(camera);\n\n\t\tif (this._textureVO != null) {\n\t\t\tthis._textureVO.activate(this._render);\n\n\t\t\tif (this._shader.alphaThreshold > 0)\n\t\t\t\tthis._shader.fragmentConstantData[this._fragmentConstantsIndex] = this._shader.alphaThreshold;\n\t\t} else if (this._shader.colorBufferIndex == -1) {\n\t\t\tvar index:number = this._fragmentConstantsIndex;\n\t\t\tvar data:Float32Array = this._shader.fragmentConstantData;\n\t\t\tdata[index] = this._diffuseR;\n\t\t\tdata[index + 1] = this._diffuseG;\n\t\t\tdata[index + 2] = this._diffuseB;\n\t\t\tdata[index + 3] = this._diffuseA;\n\t\t}\n\t}\n}\n\nexport = BasicMaterialPass;",
    "import BlendMode\t\t\t\t\t= require(\"awayjs-core/lib/image/BlendMode\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport AssetBase\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetBase\");\nimport ArgumentError\t\t\t\t= require(\"awayjs-core/lib/errors/ArgumentError\");\nimport EventDispatcher\t\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport LightPickerBase\t\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/LightPickerBase\");\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport TextureBase\t\t\t\t\t= require(\"awayjs-display/lib/textures/TextureBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\")\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport AnimationSetBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimationSetBase\");\nimport PassEvent\t\t\t\t\t= require(\"awayjs-renderergl/lib/events/PassEvent\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\n\n/**\n * PassBase provides an abstract base class for material shader passes. A material pass constitutes at least\n * a render call per required renderable.\n */\nclass PassBase extends EventDispatcher implements IPass\n{\n\tpublic _render:RenderBase;\n\tpublic _renderOwner:IRenderOwner;\n\tpublic _renderableClass:IRenderableClass;\n\tpublic _stage:Stage;\n\t\n\tpublic _shader:ShaderBase;\n\n\tprivate _preserveAlpha:boolean = true;\n\tprivate _forceSeparateMVP:boolean = false;\n\n\tpublic get shader():ShaderBase\n\t{\n\t\treturn this._shader;\n\t}\n\n\tpublic get animationSet():AnimationSetBase\n\t{\n\t\treturn <AnimationSetBase> this._renderOwner.animationSet;\n\t}\n\n\t/**\n\t * Indicates whether the output alpha value should remain unchanged compared to the material's original alpha.\n\t */\n\tpublic get preserveAlpha():boolean\n\t{\n\t\treturn this._preserveAlpha;\n\t}\n\n\tpublic set preserveAlpha(value:boolean)\n\t{\n\t\tif (this._preserveAlpha == value)\n\t\t\treturn;\n\n\t\tthis._preserveAlpha = value;\n\n\t\tthis.invalidate();\n\t}\n\n\t/**\n\t * Indicates whether the screen projection should be calculated by forcing a separate scene matrix and\n\t * view-projection matrix. This is used to prevent rounding errors when using multiple passes with different\n\t * projection code.\n\t */\n\tpublic get forceSeparateMVP():boolean\n\t{\n\t\treturn this._forceSeparateMVP;\n\t}\n\n\tpublic set forceSeparateMVP(value:boolean)\n\t{\n\t\tif (this._forceSeparateMVP == value)\n\t\t\treturn;\n\n\t\tthis._forceSeparateMVP = value;\n\n\t\tthis.invalidate();\n\t}\n\n\t/**\n\t * Creates a new PassBase object.\n\t */\n\tconstructor(render:RenderBase, renderOwner:IRenderOwner, renderableClass:IRenderableClass, stage:Stage)\n\t{\n\t\tsuper();\n\n\t\tthis._render = render;\n\t\tthis._renderOwner = renderOwner;\n\t\tthis._renderableClass = renderableClass;\n\t\tthis._stage = stage;\n\t}\n\n\tpublic getImageIndex(texture:TextureBase, index:number = 0):number\n\t{\n\t\treturn this._render.getImageIndex(texture, index);\n\t}\n\n\t/**\n\t * Marks the shader program as invalid, so it will be recompiled before the next render.\n\t */\n\tpublic invalidate()\n\t{\n\t\tthis._shader.invalidateShader();\n\n\t\tthis.dispatchEvent(new PassEvent(PassEvent.INVALIDATE, this));\n\t}\n\n\t/**\n\t * Cleans up any resources used by the current object.\n\t * @param deep Indicates whether other resources should be cleaned up, that could potentially be shared across different instances.\n\t */\n\tpublic dispose()\n\t{\n\t\tthis._render = null;\n\t\tthis._renderOwner = null;\n\t\tthis._renderableClass = null;\n\t\tthis._stage = null;\n\n\t\tif (this._shader) {\n\t\t\tthis._shader.dispose();\n\t\t\tthis._shader = null;\n\t\t}\n\t}\n\n\t/**\n\t * Renders the current pass. Before calling pass, activatePass needs to be called with the same index.\n\t * @param pass The pass used to render the renderable.\n\t * @param renderable The IRenderable object to draw.\n\t * @param stage The Stage object used for rendering.\n\t * @param entityCollector The EntityCollector object that contains the visible scene data.\n\t * @param viewProjection The view-projection matrix used to project to the screen. This is not the same as\n\t * camera.viewProjection as it includes the scaling factors when rendering to textures.\n\t *\n\t * @internal\n\t */\n\tpublic _iRender(renderable:RenderableBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tthis._shader._iRender(renderable, camera, viewProjection);\n\t}\n\n\t/**\n\t * Sets the render state for the pass that is independent of the rendered object. This needs to be called before\n\t * calling pass. Before activating a pass, the previously used pass needs to be deactivated.\n\t * @param stage The Stage object which is currently used for rendering.\n\t * @param camera The camera from which the scene is viewed.\n\t * @private\n\t */\n\tpublic _iActivate(camera:Camera)\n\t{\n\t\tthis._shader._iActivate(camera);\n\t}\n\n\t/**\n\t * Clears the render state for the pass. This needs to be called before activating another pass.\n\t * @param stage The Stage used for rendering\n\t *\n\t * @private\n\t */\n\tpublic _iDeactivate()\n\t{\n\t\tthis._shader._iDeactivate();\n\t}\n\n\tpublic _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tthis._render._iIncludeDependencies(shader);\n\t\t\n\t\tif (this._forceSeparateMVP)\n\t\t\tshader.globalPosDependencies++;\n\t}\n\n\n\tpublic _iInitConstantData(shader:ShaderBase)\n\t{\n\n\t}\n\n\tpublic _iGetPreLightingVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetPreLightingFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetNormalVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\tpublic _iGetNormalFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n}\n\nexport = PassBase;",
    "import AttributesBuffer\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport SubGeometryBase\t\t\t\t= require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport TriangleSubGeometry\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport Billboard\t\t\t\t\t= require(\"awayjs-display/lib/entities/Billboard\");\nimport MaterialBase\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\nimport DefaultMaterialManager\t\t= require(\"awayjs-display/lib/managers/DefaultMaterialManager\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport TextureBase\t\t\t\t\t= require(\"awayjs-display/lib/textures/TextureBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport PassBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/PassBase\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * @class away.pool.RenderableListItem\n */\nclass BillboardRenderable extends RenderableBase\n{\n\n\tprivate static _samplerGeometry:Object = new Object();\n\n\tpublic static vertexAttributesOffset:number = 1;\n\n\t/**\n\t *\n\t */\n\tprivate _billboard:Billboard;\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param billboard\n\t */\n\tconstructor(billboard:Billboard, renderer:RendererBase)\n\t{\n\t\tsuper(billboard, billboard, billboard.material, renderer);\n\n\t\tthis._billboard = billboard;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._billboard = null;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @returns {away.base.TriangleSubGeometry}\n\t */\n\tpublic _pGetSubGeometry():SubGeometryBase\n\t{\n\t\tvar texture:TextureBase = this._billboard.material.getTextureAt(0);\n\n\t\tvar id:number = -1;\n\n\t\tif (texture)\n\t\t\tid = ((this.renderableOwner.style? this.renderableOwner.style.getSamplerAt(texture) || texture.getSamplerAt(0) : texture.getSamplerAt(0)) || DefaultMaterialManager.getDefaultSampler()).id;\n\n\t\tvar geometry:TriangleSubGeometry = BillboardRenderable._samplerGeometry[id];\n\n\t\tvar width:number = this._billboard.billboardWidth;\n\t\tvar height:number = this._billboard.billboardHeight;\n\t\tvar billboardRect:Rectangle = this._billboard.billboardRect;\n\n\t\tif (!geometry) {\n\t\t\tgeometry = BillboardRenderable._samplerGeometry[id] = new TriangleSubGeometry(new AttributesBuffer(11, 4));\n\t\t\tgeometry.autoDeriveNormals = false;\n\t\t\tgeometry.autoDeriveTangents = false;\n\t\t\tgeometry.setIndices(Array<number>(0, 1, 2, 0, 2, 3));\n\t\t\tgeometry.setPositions(Array<number>(-billboardRect.x, height-billboardRect.y, 0, width-billboardRect.x, height-billboardRect.y, 0, width-billboardRect.x, -billboardRect.y, 0, -billboardRect.x, -billboardRect.y, 0));\n\t\t\tgeometry.setNormals(Array<number>(1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0));\n\t\t\tgeometry.setTangents(Array<number>(0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1));\n\t\t\tgeometry.setUVs(Array<number>(0, 0, 1, 0, 1, 1, 0, 1));\n\t\t} else {\n\t\t\tgeometry.setPositions(Array<number>(-billboardRect.x, height-billboardRect.y, 0, width-billboardRect.x, height-billboardRect.y, 0, width-billboardRect.x, -billboardRect.y, 0, -billboardRect.x, -billboardRect.y, 0));\n\t\t}\n\n\t\treturn geometry;\n\t}\n\n\tpublic _pGetRenderOwner():IRenderOwner\n\t{\n\t\treturn this._billboard.material;\n\t}\n\n\tpublic static _iIncludeDependencies(shader:ShaderBase)\n\t{\n\n\t}\n\n\tpublic static _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar code:string = \"\";\n\n\t\t//get the projection coordinates\n\t\tvar position:ShaderRegisterElement = (shader.globalPosDependencies > 0)? sharedRegisters.globalPositionVertex : sharedRegisters.localPosition;\n\n\t\t//reserving vertex constants for projection matrix\n\t\tvar viewMatrixReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tshader.viewMatrixIndex = viewMatrixReg.index*4;\n\n\t\tif (shader.projectionDependencies > 0) {\n\t\t\tsharedRegisters.projectionFragment = registerCache.getFreeVarying();\n\t\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\n\t\t\tcode += \"m44 \" + temp + \", \" + position + \", \" + viewMatrixReg + \"\\n\" +\n\t\t\t\"mov \" + sharedRegisters.projectionFragment + \", \" + temp + \"\\n\" +\n\t\t\t\"mov op, \" + temp + \"\\n\";\n\t\t} else {\n\t\t\tcode += \"m44 op, \" + position + \", \" + viewMatrixReg + \"\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _setRenderState(pass:PassBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._setRenderState(pass, camera, viewProjection);\n\n\t\tvar shader:ShaderBase = pass.shader;\n\n\t\tif (shader.sceneMatrixIndex >= 0) {\n\t\t\tthis.sourceEntity.getRenderSceneTransform(camera).copyRawDataTo(shader.vertexConstantData, shader.sceneMatrixIndex, true);\n\t\t\tviewProjection.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\n\t\t} else {\n\t\t\tvar matrix3D:Matrix3D = Matrix3DUtils.CALCULATION_MATRIX;\n\n\t\t\tmatrix3D.copyFrom(this.sourceEntity.getRenderSceneTransform(camera));\n\t\t\tmatrix3D.append(viewProjection);\n\n\t\t\tmatrix3D.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\n\t\t}\n\n\t\tvar context:IContextGL = this._stage.context;\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 0, shader.vertexConstantData, shader.numUsedVertexConstants);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, shader.fragmentConstantData, shader.numUsedFragmentConstants);\n\t}\n}\n\nexport = BillboardRenderable;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport CurveSubMesh\t\t\t\t    = require(\"awayjs-display/lib/base/CurveSubMesh\");\nimport CurveSubGeometry\t\t    \t= require(\"awayjs-display/lib/base/CurveSubGeometry\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport ContextWebGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextWebGL\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport AnimatorBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport PassBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/PassBase\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * @class away.pool.TriangleSubMeshRenderable\n */\nclass CurveSubMeshRenderable extends RenderableBase\n{\n\tprivate static _constants:Float32Array = new Float32Array([0, 1, 1, 0.5]);\n\n\tpublic static vertexAttributesOffset:number = 2;\n\n\t/**\n\t *\n\t */\n\tpublic subMesh:CurveSubMesh;\n\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param subMesh\n\t * @param level\n\t * @param indexOffset\n\t */\n\tconstructor(subMesh:CurveSubMesh, renderer:RendererBase)\n\t{\n\t\tsuper(subMesh, subMesh.parentMesh, subMesh.material, renderer);\n\n\t\tthis.subMesh = subMesh;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis.subMesh = null;\n\t}\n\n\t/**\n\t *\n\t * @returns {SubGeometryBase}\n\t * @protected\n\t */\n\tpublic _pGetSubGeometry():CurveSubGeometry\n\t{\n\t\treturn (this.subMesh.animator)? <CurveSubGeometry> (<AnimatorBase> this.subMesh.animator).getRenderableSubGeometry(this, this.subMesh.subGeometry) : this.subMesh.subGeometry;\n\t}\n\n\tpublic _pGetRenderOwner():IRenderOwner\n\t{\n\t\treturn this.subMesh.material;\n\t}\n\n\n\tpublic static _iIncludeDependencies(shader:ShaderBase)\n\t{\n        shader.usesLocalPosFragment = true;\n\t}\n\n\tpublic static _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar code:string = \"\";\n\n\t\t//get the projection coordinates\n\t\tvar position:ShaderRegisterElement = (shader.globalPosDependencies > 0)? sharedRegisters.globalPositionVertex : sharedRegisters.localPosition;\n\n\t\t//reserving vertex constants for projection matrix\n\t\tvar viewMatrixReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tshader.viewMatrixIndex = viewMatrixReg.index*4;\n\n\n\t\tif (shader.projectionDependencies > 0) {\n\t\t\tsharedRegisters.projectionFragment = registerCache.getFreeVarying();\n\t\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\n\t\t\tcode += \"m44 \" + temp + \", \" + position + \".xyw, \" + viewMatrixReg + \"\\n\" +\n\t\t\t\"mov \" + sharedRegisters.projectionFragment + \", \" + temp + \"\\n\" +\n\t\t\t\"mov v2 va1 \\n\" +\n\t\t\t\"mov op, \" + temp + \"\\n\";\n\n\t\t} else {\n\t\t\tcode += \"mov v2 va1 \\n\";\n\t\t\tcode += \"m44 op, \" + position + \".xyw, \" + viewMatrixReg + \"\\n\";\n\t\t}\n\t\treturn code;\n\t}\n    /**\n     * @inheritDoc\n     */\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar sd:boolean = (<ContextWebGL>shader._stage.context).standardDerivatives;\n\t\tvar pos:ShaderRegisterElement = sharedRegisters.localPositionVarying;\n\t\tvar out:ShaderRegisterElement = sharedRegisters.shadedTarget;\n\n\t\tvar curve:string = \"v2\";\n\t\tvar curvex:string = \"v2.x\";\n\t\tvar curvey:string = \"v2.y\";\n\t\tvar curvez:string = pos + \".z\";\n\n\n\t\t//get some free registers\n\t\tvar free:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\tregisterCache.addFragmentTempUsages(free, 1);\n\t\tvar free1:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\tregisterCache.addFragmentTempUsages(free1, 1);\n\t\tvar free2:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\n\t\tregisterCache.addFragmentTempUsages(free2, 1);\n\n\t\t//distance from curve\n\t\tvar d:string = free + \".x\";\n\t\tvar dx:string = free + \".y\";\n\t\tvar dy:string = free + \".z\";\n\t\tvar t:string = free + \".w\";\n\t\tvar d2:string = free1 + \".x\";\n\t\tvar fixa:string = free1 + \".y\";\n\t\tvar fixb:string = free1 + \".z\";\n\n\t\tvar constantsReg:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\n\n\t\tvar _aa:string = constantsReg + \".z\";\n\t\tvar _0:string = constantsReg + \".x\";\n\t\tvar _1:string = constantsReg + \".y\";\n\n\t\tvar nl:string = \"\\n\";\n\n\t\tvar code:Array<string> =  new Array<string>();\n\n\t\t//distance from curve\n\t\tcode.push(\"mul\",d, curvex, curvex, nl);\n\t\tcode.push(\"sub\",d, d, curvey, nl);\n\t\tcode.push(\"mul\",d, d, curvez, nl);\t//flipper\n\n\t\t//kill based on distance from curve\n\t\tcode.push(\"kil\" ,d, nl);\n\n\t\tvar applyAA:boolean = false;\n\t\tif(applyAA && sd)\n\t\t{\n\n\t\t\t//derivatives\n\t\t\tcode.push(\"ddx\", dx, d, nl);\n\t\t\tcode.push(\"ddy\", dy, d, nl);\n\n\t\t\t//AA\n\t\t\tcode.push(\"mul\",dx, dx, dx, nl);\n\t\t\tcode.push(\"mul\",dy, dy, dy, nl);\n\t\t\tcode.push(\"add\",t, dx, dy, nl);\n\t\t\tcode.push(\"sqt\",t, t, nl);\n\n\t\t\tcode.push(\"mul\",t, t, _aa, nl);\n\t\t\tcode.push(\"div\",d, d, t, nl);\n\n/*\n\t\t\t//code.push(\"sge\", fixa, curvex, _1, nl);\n\t\t\tcode.push(\"slt\", fixb, curvex, _1, nl);\n\t\t\tcode.push(\"sub\", fixa, _1, fixb, nl);\n\t\t\t//code.push(\"sub\", fixb, _1, fixa, nl);\n\n\t\t\tcode.push(\"mul\", d, d, fixb, nl);\n\n*/\n//\t\t\tcode.push(\"abs\", d, d, nl);\n\t\t\tcode.push(\"max\", d, d, _0, nl);\n\t\t\tcode.push(\"min\", d, d, _1, nl);\n\t\t\tcode.push(\"mov\", out+\".w\", d, nl);\n\t\t}\n\n\n\t\tcode.push(\"mov\", out+\".w\", _1, nl);\n\t\treturn code.join(\" \");\n\t}\n\n    /**\n     * @inheritDoc\n     */\n    public _iActivate(pass:PassBase, camera:Camera)\n    {\n        super._iActivate(pass, camera);\n\n        var context:IContextGL = this._stage.context;\n\n\t\tvar data:Float32Array = pass.shader.fragmentConstantData;\n\n\t\tdata[0] = CurveSubMeshRenderable._constants[0];\n\t\tdata[1] = CurveSubMeshRenderable._constants[1];\n\t\tdata[2] = CurveSubMeshRenderable._constants[2];\n\t\tdata[3] = CurveSubMeshRenderable._constants[3];\n    }\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _setRenderState(pass:PassBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._setRenderState(pass, camera, viewProjection);\n\n\t\tvar shader:ShaderBase = pass.shader;\n\n\t\tif (shader.sceneMatrixIndex >= 0) {\n\t\t\tthis.sourceEntity.getRenderSceneTransform(camera).copyRawDataTo(shader.vertexConstantData, shader.sceneMatrixIndex, true);\n\t\t\tviewProjection.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\n\t\t} else {\n\t\t\tvar matrix3D:Matrix3D = Matrix3DUtils.CALCULATION_MATRIX;\n\n\t\t\tmatrix3D.copyFrom(this.sourceEntity.getRenderSceneTransform(camera));\n\t\t\tmatrix3D.append(viewProjection);\n\n\t\t\tmatrix3D.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\n\t\t}\n\n\t\tvar context:IContextGL = this._stage.context;\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 0, shader.vertexConstantData, shader.numUsedVertexConstants);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, shader.fragmentConstantData, shader.numUsedFragmentConstants);\n\t}\n}\n\nexport = CurveSubMeshRenderable;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport LineSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/LineSubGeometry\");\nimport SubGeometryEvent\t\t\t\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport LineSegment\t\t\t\t\t= require(\"awayjs-display/lib/entities/LineSegment\");\nimport DefaultMaterialManager\t\t= require(\"awayjs-display/lib/managers/DefaultMaterialManager\");\n\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport PassBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/PassBase\");\n\n/**\n * @class away.pool.LineSubMeshRenderable\n */\nclass LineSegmentRenderable extends RenderableBase\n{\n\tprivate static _lineGeometry:Object = new Object();\n\n\tpublic static pONE_VECTOR:Float32Array = new Float32Array([1, 1, 1, 1]);\n\tpublic static pFRONT_VECTOR:Float32Array = new Float32Array([0, 0, -1, 0]);\n\n\tprivate _constants:Float32Array = new Float32Array([0, 0, 0, 0]);\n\tprivate _calcMatrix:Matrix3D;\n\tprivate _thickness:number = 1.25;\n\n\n\tpublic static vertexAttributesOffset:number = 3;\n\n\t/**\n\t *\n\t */\n\tprivate _lineSegment:LineSegment;\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param subMesh\n\t * @param level\n\t * @param dataOffset\n\t */\n\tconstructor(lineSegment:LineSegment, renderer:RendererBase)\n\t{\n\t\tsuper(lineSegment, lineSegment, lineSegment.material, renderer);\n\n\t\tthis._lineSegment = lineSegment;\n\n\t\tthis._calcMatrix = new Matrix3D();\n\n\t\tthis._constants[1] = 1/255;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._lineSegment = null;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @returns {base.LineSubGeometry}\n\t * @protected\n\t */\n\tpublic _pGetSubGeometry():LineSubGeometry\n\t{\n\t\tvar geometry:LineSubGeometry = LineSegmentRenderable._lineGeometry[this._lineSegment.id] || (LineSegmentRenderable._lineGeometry[this._lineSegment.id] = new LineSubGeometry());\n\n\t\tvar start:Vector3D = this._lineSegment.startPostion;\n\t\tvar end:Vector3D = this._lineSegment.endPosition;\n\n\t\tvar positions:Float32Array;\n\t\tvar thickness:Float32Array;\n\n\t\t//if (geometry.indices != null) {\n\t\t//\tpositions = <Float32Array> geometry.positions.get(geometry.numVertices);\n\t\t//\tthickness = geometry.thickness.get(geometry.numVertices);\n\t\t//} else {\n\t\t\tpositions = new Float32Array(6);\n\t\t\tthickness = new Float32Array(1);\n\t\t//}\n\n\t\tpositions[0] = start.x;\n\t\tpositions[1] = start.y;\n\t\tpositions[2] = start.z;\n\t\tpositions[3] = end.x;\n\t\tpositions[4] = end.y;\n\t\tpositions[5] = end.z;\n\t\tthickness[0] = this._lineSegment.thickness;\n\n\t\tgeometry.setPositions(positions);\n\t\tgeometry.setThickness(thickness);\n\n\t\treturn geometry;\n\t}\n\n\tpublic _pGetRenderOwner():IRenderOwner\n\t{\n\t\treturn this._lineSegment.material;\n\t}\n\n\tpublic static _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tshader.colorDependencies++;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic static _iGetVertexCode(shader:ShaderBase, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData):string\n\t{\n\t\treturn \"m44 vt0, va0, vc8\t\t\t\\n\" + // transform Q0 to eye space\n\t\t\t\"m44 vt1, va1, vc8\t\t\t\\n\" + // transform Q1 to eye space\n\t\t\t\"sub vt2, vt1, vt0 \t\t\t\\n\" + // L = Q1 - Q0\n\n\t\t\t\t// test if behind camera near plane\n\t\t\t\t// if 0 - Q0.z < Camera.near then the point needs to be clipped\n\t\t\t\t//\"neg vt5.x, vt0.z\t\t\t\t\\n\" + // 0 - Q0.z\n\t\t\t\"slt vt5.x, vt0.z, vc7.z\t\t\t\\n\" + // behind = ( 0 - Q0.z < -Camera.near ) ? 1 : 0\n\t\t\t\"sub vt5.y, vc5.x, vt5.x\t\t\t\\n\" + // !behind = 1 - behind\n\n\t\t\t\t// p = point on the plane (0,0,-near)\n\t\t\t\t// n = plane normal (0,0,-1)\n\t\t\t\t// D = Q1 - Q0\n\t\t\t\t// t = ( dot( n, ( p - Q0 ) ) / ( dot( n, d )\n\n\t\t\t\t// solve for t where line crosses Camera.near\n\t\t\t\"add vt4.x, vt0.z, vc7.z\t\t\t\\n\" + // Q0.z + ( -Camera.near )\n\t\t\t\"sub vt4.y, vt0.z, vt1.z\t\t\t\\n\" + // Q0.z - Q1.z\n\n\t\t\t\t// fix divide by zero for horizontal lines\n\t\t\t\"seq vt4.z, vt4.y vc6.x\t\t\t\\n\" + // offset = (Q0.z - Q1.z)==0 ? 1 : 0\n\t\t\t\"add vt4.y, vt4.y, vt4.z\t\t\t\\n\" + // ( Q0.z - Q1.z ) + offset\n\n\t\t\t\"div vt4.z, vt4.x, vt4.y\t\t\t\\n\" + // t = ( Q0.z - near ) / ( Q0.z - Q1.z )\n\n\t\t\t\"mul vt4.xyz, vt4.zzz, vt2.xyz\t\\n\" + // t(L)\n\t\t\t\"add vt3.xyz, vt0.xyz, vt4.xyz\t\\n\" + // Qclipped = Q0 + t(L)\n\t\t\t\"mov vt3.w, vc5.x\t\t\t\\n\" + // Qclipped.w = 1\n\n\t\t\t\t// If necessary, replace Q0 with new Qclipped\n\t\t\t\"mul vt0, vt0, vt5.yyyy\t\t\t\\n\" + // !behind * Q0\n\t\t\t\"mul vt3, vt3, vt5.xxxx\t\t\t\\n\" + // behind * Qclipped\n\t\t\t\"add vt0, vt0, vt3\t\t\t\t\\n\" + // newQ0 = Q0 + Qclipped\n\n\t\t\t\t// calculate side vector for line\n\t\t\t\"sub vt2, vt1, vt0 \t\t\t\\n\" + // L = Q1 - Q0\n\t\t\t\"nrm vt2.xyz, vt2.xyz\t\t\t\\n\" + // normalize( L )\n\t\t\t\"nrm vt5.xyz, vt0.xyz\t\t\t\\n\" + // D = normalize( Q1 )\n\t\t\t\"mov vt5.w, vc5.x\t\t\t\t\\n\" + // D.w = 1\n\t\t\t\"crs vt3.xyz, vt2, vt5\t\t\t\\n\" + // S = L x D\n\t\t\t\"nrm vt3.xyz, vt3.xyz\t\t\t\\n\" + // normalize( S )\n\n\t\t\t\t// face the side vector properly for the given point\n\t\t\t\"mul vt3.xyz, vt3.xyz, va2.xxx\t\\n\" + // S *= weight\n\t\t\t\"mov vt3.w, vc5.x\t\t\t\\n\" + // S.w = 1\n\n\t\t\t\t// calculate the amount required to move at the point's distance to correspond to the line's pixel width\n\t\t\t\t// scale the side vector by that amount\n\t\t\t\"dp3 vt4.x, vt0, vc6\t\t\t\\n\" + // distance = dot( view )\n\t\t\t\"mul vt4.x, vt4.x, vc7.x\t\t\t\\n\" + // distance *= vpsod\n\t\t\t\"mul vt3.xyz, vt3.xyz, vt4.xxx\t\\n\" + // S.xyz *= pixelScaleFactor\n\n\t\t\t\t// add scaled side vector to Q0 and transform to clip space\n\t\t\t\"add vt0.xyz, vt0.xyz, vt3.xyz\t\\n\" + // Q0 + S\n\n\t\t\t\"m44 op, vt0, vc0\t\t\t\\n\"  // transform Q0 to clip space\n\t}\n\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iActivate(pass:PassBase, camera:Camera)\n\t{\n\t\tsuper._iActivate(pass, camera);\n\n\t\tthis._constants[0] = this._thickness/((this._stage.scissorRect)? Math.min(this._stage.scissorRect.width, this._stage.scissorRect.height) : Math.min(this._stage.width, this._stage.height));\n\n\t\t// value to convert distance from camera to model length per pixel width\n\t\tthis._constants[2] = camera.projection.near;\n\n\t\tvar context:IContextGL = this._stage.context;\n\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 5, LineSegmentRenderable.pONE_VECTOR, 1);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 6, LineSegmentRenderable.pFRONT_VECTOR, 1);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 7, this._constants, 1);\n\n\t\t// projection matrix\n\t\tcontext.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 0, camera.projection.matrix, true);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _setRenderState(pass:PassBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._setRenderState(pass, camera, viewProjection);\n\n\t\tvar context:IContextGL = this._stage.context;\n\t\tthis._calcMatrix.copyFrom(this.sourceEntity.sceneTransform);\n\t\tthis._calcMatrix.append(camera.inverseSceneTransform);\n\n\t\tcontext.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 8, this._calcMatrix, true);\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param renderableOwner\n\t * @param level\n\t * @param indexOffset\n\t * @returns {away.pool.LineSubMeshRenderable}\n\t * @private\n\t */\n\tpublic _pGetOverflowRenderable(indexOffset:number):RenderableBase\n\t{\n\t\treturn new LineSegmentRenderable(<LineSegment> this.renderableOwner, this._renderer);\n\t}\n}\n\nexport = LineSegmentRenderable;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport LineSubMesh\t\t\t\t\t= require(\"awayjs-display/lib/base/LineSubMesh\");\nimport LineSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/LineSubGeometry\");\nimport SubGeometryEvent\t\t\t\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport DefaultMaterialManager\t\t= require(\"awayjs-display/lib/managers/DefaultMaterialManager\");\n\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport PassBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/PassBase\");\n\n/**\n * @class away.pool.LineSubMeshRenderable\n */\nclass LineSubMeshRenderable extends RenderableBase\n{\n\tpublic static pONE_VECTOR:Float32Array = new Float32Array([1, 1, 1, 1]);\n\tpublic static pFRONT_VECTOR:Float32Array = new Float32Array([0, 0, -1, 0]);\n\n\tprivate _constants:Float32Array = new Float32Array([0, 0, 0, 0]);\n\tprivate _calcMatrix:Matrix3D;\n\tprivate _thickness:number = 1.25;\n\n\n\tpublic static vertexAttributesOffset:number = 3;\n\n\t/**\n\t *\n\t */\n\tpublic subMesh:LineSubMesh;\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param subMesh\n\t * @param level\n\t * @param dataOffset\n\t */\n\tconstructor(subMesh:LineSubMesh, renderer:RendererBase)\n\t{\n\t\tsuper(subMesh, subMesh.parentMesh, subMesh.material, renderer);\n\n\t\tthis.subMesh = subMesh;\n\n\t\tthis._calcMatrix = new Matrix3D();\n\n\t\tthis._constants[1] = 1/255;\n\t}\n\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis.subMesh = null;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @returns {base.LineSubGeometry}\n\t * @protected\n\t */\n\tpublic _pGetSubGeometry():LineSubGeometry\n\t{\n\t\treturn this.subMesh.subGeometry;\n\t}\n\n\tpublic _pGetRenderOwner():IRenderOwner\n\t{\n\t\treturn this.subMesh.material;\n\t}\n\n\tpublic static _iIncludeDependencies(shader:ShaderBase)\n\t{\n\t\tshader.colorDependencies++;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic static _iGetVertexCode(shader:ShaderBase, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData):string\n\t{\n\t\treturn \"m44 vt0, va0, vc8\t\t\t\\n\" + // transform Q0 to eye space\n\t\t\t\"m44 vt1, va1, vc8\t\t\t\\n\" + // transform Q1 to eye space\n\t\t\t\"sub vt2, vt1, vt0 \t\t\t\\n\" + // L = Q1 - Q0\n\n\t\t\t\t// test if behind camera near plane\n\t\t\t\t// if 0 - Q0.z < Camera.near then the point needs to be clipped\n\t\t\t\t//\"neg vt5.x, vt0.z\t\t\t\t\\n\" + // 0 - Q0.z\n\t\t\t\"slt vt5.x, vt0.z, vc7.z\t\t\t\\n\" + // behind = ( 0 - Q0.z < -Camera.near ) ? 1 : 0\n\t\t\t\"sub vt5.y, vc5.x, vt5.x\t\t\t\\n\" + // !behind = 1 - behind\n\n\t\t\t\t// p = point on the plane (0,0,-near)\n\t\t\t\t// n = plane normal (0,0,-1)\n\t\t\t\t// D = Q1 - Q0\n\t\t\t\t// t = ( dot( n, ( p - Q0 ) ) / ( dot( n, d )\n\n\t\t\t\t// solve for t where line crosses Camera.near\n\t\t\t\"add vt4.x, vt0.z, vc7.z\t\t\t\\n\" + // Q0.z + ( -Camera.near )\n\t\t\t\"sub vt4.y, vt0.z, vt1.z\t\t\t\\n\" + // Q0.z - Q1.z\n\n\t\t\t\t// fix divide by zero for horizontal lines\n\t\t\t\"seq vt4.z, vt4.y vc6.x\t\t\t\\n\" + // offset = (Q0.z - Q1.z)==0 ? 1 : 0\n\t\t\t\"add vt4.y, vt4.y, vt4.z\t\t\t\\n\" + // ( Q0.z - Q1.z ) + offset\n\n\t\t\t\"div vt4.z, vt4.x, vt4.y\t\t\t\\n\" + // t = ( Q0.z - near ) / ( Q0.z - Q1.z )\n\n\t\t\t\"mul vt4.xyz, vt4.zzz, vt2.xyz\t\\n\" + // t(L)\n\t\t\t\"add vt3.xyz, vt0.xyz, vt4.xyz\t\\n\" + // Qclipped = Q0 + t(L)\n\t\t\t\"mov vt3.w, vc5.x\t\t\t\\n\" + // Qclipped.w = 1\n\n\t\t\t\t// If necessary, replace Q0 with new Qclipped\n\t\t\t\"mul vt0, vt0, vt5.yyyy\t\t\t\\n\" + // !behind * Q0\n\t\t\t\"mul vt3, vt3, vt5.xxxx\t\t\t\\n\" + // behind * Qclipped\n\t\t\t\"add vt0, vt0, vt3\t\t\t\t\\n\" + // newQ0 = Q0 + Qclipped\n\n\t\t\t\t// calculate side vector for line\n\t\t\t\"sub vt2, vt1, vt0 \t\t\t\\n\" + // L = Q1 - Q0\n\t\t\t\"nrm vt2.xyz, vt2.xyz\t\t\t\\n\" + // normalize( L )\n\t\t\t\"nrm vt5.xyz, vt0.xyz\t\t\t\\n\" + // D = normalize( Q1 )\n\t\t\t\"mov vt5.w, vc5.x\t\t\t\t\\n\" + // D.w = 1\n\t\t\t\"crs vt3.xyz, vt2, vt5\t\t\t\\n\" + // S = L x D\n\t\t\t\"nrm vt3.xyz, vt3.xyz\t\t\t\\n\" + // normalize( S )\n\n\t\t\t\t// face the side vector properly for the given point\n\t\t\t\"mul vt3.xyz, vt3.xyz, va2.xxx\t\\n\" + // S *= weight\n\t\t\t\"mov vt3.w, vc5.x\t\t\t\\n\" + // S.w = 1\n\n\t\t\t\t// calculate the amount required to move at the point's distance to correspond to the line's pixel width\n\t\t\t\t// scale the side vector by that amount\n\t\t\t\"dp3 vt4.x, vt0, vc6\t\t\t\\n\" + // distance = dot( view )\n\t\t\t\"mul vt4.x, vt4.x, vc7.x\t\t\t\\n\" + // distance *= vpsod\n\t\t\t\"mul vt3.xyz, vt3.xyz, vt4.xxx\t\\n\" + // S.xyz *= pixelScaleFactor\n\n\t\t\t\t// add scaled side vector to Q0 and transform to clip space\n\t\t\t\"add vt0.xyz, vt0.xyz, vt3.xyz\t\\n\" + // Q0 + S\n\n\t\t\t\"m44 op, vt0, vc0\t\t\t\\n\"  // transform Q0 to clip space\n\t}\n\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iActivate(pass:PassBase, camera:Camera)\n\t{\n\t\tsuper._iActivate(pass, camera);\n\n\t\tthis._constants[0] = this._thickness/((this._stage.scissorRect)? Math.min(this._stage.scissorRect.width, this._stage.scissorRect.height) : Math.min(this._stage.width, this._stage.height));\n\n\t\t// value to convert distance from camera to model length per pixel width\n\t\tthis._constants[2] = camera.projection.near;\n\n\t\tvar context:IContextGL = this._stage.context;\n\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 5, LineSubMeshRenderable.pONE_VECTOR, 1);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 6, LineSubMeshRenderable.pFRONT_VECTOR, 1);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 7, this._constants, 1);\n\n\t\t// projection matrix\n\t\tcontext.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 0, camera.projection.matrix, true);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _setRenderState(pass:PassBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._setRenderState(pass, camera, viewProjection);\n\n\t\tvar context:IContextGL = this._stage.context;\n\t\tthis._calcMatrix.copyFrom(this.sourceEntity.sceneTransform);\n\t\tthis._calcMatrix.append(camera.inverseSceneTransform);\n\n\t\tcontext.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 8, this._calcMatrix, true);\n\t}\n}\n\nexport = LineSubMeshRenderable;",
    "import AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport SamplerBase\t\t\t\t\t= require(\"awayjs-core/lib/image/SamplerBase\");\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\n\nimport IRenderer\t\t\t\t\t= require(\"awayjs-display/lib/IRenderer\");\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport SubGeometryBase\t\t\t\t= require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport TriangleSubGeometry\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport IEntity\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/IEntity\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport RenderableOwnerEvent\t\t\t= require(\"awayjs-display/lib/events/RenderableOwnerEvent\");\nimport DefaultMaterialManager\t\t= require(\"awayjs-display/lib/managers/DefaultMaterialManager\");\nimport TextureBase\t\t\t\t\t= require(\"awayjs-display/lib/textures/TextureBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\nimport GL_SamplerBase\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_SamplerBase\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\nimport SubGeometryVOBase\t\t\t= require(\"awayjs-renderergl/lib/vos/SubGeometryVOBase\");\n\n/**\n * @class RenderableListItem\n */\nclass RenderableBase extends AbstractionBase\n{\n\tprivate _onRenderOwnerUpdatedDelegate:(event:RenderableOwnerEvent) => void;\n\tprivate _onInvalidateGeometryDelegate:(event:RenderableOwnerEvent) => void;\n\n\tpublic _subGeometry:SubGeometryBase;\n\tpublic _subGeometryVO:SubGeometryVOBase;\n\tpublic _render:RenderBase;\n\tprivate _geometryDirty:boolean = true;\n\tprivate _renderOwnerDirty:boolean = true;\n\n\tpublic JOINT_INDEX_FORMAT:string;\n\tpublic JOINT_WEIGHT_FORMAT:string;\n\n\t/**\n\t *\n\t */\n\tpublic _renderer:RendererBase;\n\n\tpublic _stage:Stage;\n\n\t/**\n\t *\n\t */\n\tpublic next:RenderableBase;\n\n\tpublic id:number;\n\n\t/**\n\t *\n\t */\n\tpublic renderId:number;\n\n\t/**\n\t *\n\t */\n\tpublic renderOrderId:number;\n\n\t/**\n\t *\n\t */\n\tpublic zIndex:number;\n\n\t/**\n\t *\n\t */\n\tpublic maskId:number;\n\n\t/**\n\t *\n\t */\n\tpublic masksConfig:Array<Array<number>>;\n\n\t/**\n\t *\n\t */\n\tpublic cascaded:boolean;\n\n\t/**\n\t *\n\t */\n\tpublic renderSceneTransform:Matrix3D;\n\n\t/**\n\t *\n\t */\n\tpublic sourceEntity:IEntity;\n\n\t/**\n\t *\n\t */\n\tpublic renderableOwner:IRenderableOwner;\n\n\tpublic images:Array<GL_ImageBase> = new Array<GL_ImageBase>();\n\n\tpublic samplers:Array<GL_SamplerBase> = new Array<GL_SamplerBase>();\n\n\tpublic get subGeometryVO():SubGeometryVOBase\n\t{\n\t\tif (this._geometryDirty)\n\t\t\tthis._updateGeometry();\n\n\t\treturn this._subGeometryVO;\n\t}\n\n\tpublic get render():RenderBase\n\t{\n\t\tif (this._renderOwnerDirty)\n\t\t\tthis._updateRenderOwner();\n\n\t\treturn this._render;\n\t}\n\n\n\t/**\n\t *\n\t * @param renderableOwner\n\t * @param sourceEntity\n\t * @param renderOwner\n\t * @param renderer\n\t */\n\tconstructor(renderableOwner:IRenderableOwner, sourceEntity:IEntity, renderOwner:IRenderOwner, renderer:RendererBase)\n\t{\n\t\tsuper(renderableOwner, renderer);\n\n\t\tthis._onRenderOwnerUpdatedDelegate = (event:RenderableOwnerEvent) => this._onRenderOwnerUpdated(event);\n\t\tthis._onInvalidateGeometryDelegate = (event:RenderableOwnerEvent) => this.onInvalidateGeometry(event);\n\n\t\t//store a reference to the pool for later disposal\n\t\tthis._renderer = renderer;\n\t\tthis._stage = renderer.stage;\n\n\t\tthis.sourceEntity = sourceEntity;\n\n\t\tthis.renderableOwner = renderableOwner;\n\n\t\tthis.renderableOwner.addEventListener(RenderableOwnerEvent.INVALIDATE_RENDER_OWNER, this._onRenderOwnerUpdatedDelegate);\n\t\tthis.renderableOwner.addEventListener(RenderableOwnerEvent.INVALIDATE_GEOMETRY, this._onInvalidateGeometryDelegate);\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis.next = null;\n\t\tthis.masksConfig = null;\n\t\tthis.renderSceneTransform = null;\n\n\t\tthis._renderer.clearAbstraction(this.renderableOwner);\n\t\tthis._renderer = null;\n\t\tthis._stage = null;\n\t\tthis.sourceEntity = null;\n\n\t\tthis.renderableOwner.removeEventListener(RenderableOwnerEvent.INVALIDATE_RENDER_OWNER, this._onRenderOwnerUpdatedDelegate);\n\t\tthis.renderableOwner = null;\n\n\t\tthis._render.usages--;\n\n\t\tif (!this._render.usages)\n\t\t\tthis._render.onClear(new AssetEvent(AssetEvent.CLEAR, this._render.renderOwner));\n\n\t\tthis._render = null;\n\n\t\tif (this._subGeometryVO) {\n\t\t\tthis._subGeometryVO.usages--;\n\n\t\t\tif (!this._subGeometryVO.usages)\n\t\t\t\tthis._subGeometryVO.onClear(new AssetEvent(AssetEvent.CLEAR, this._subGeometry));\n\n\t\t\tthis._subGeometryVO = null;\n\t\t}\n\t}\n\n\tpublic onInvalidateGeometry(event:RenderableOwnerEvent)\n\t{\n\t\tthis._geometryDirty = true;\n\t}\n\n\tprivate _onRenderOwnerUpdated(event:RenderableOwnerEvent)\n\t{\n\t\tthis._renderOwnerDirty = true;\n\t}\n\n\tpublic _pGetSubGeometry():SubGeometryBase\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\tpublic _pGetRenderOwner():IRenderOwner\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * Sets the render state for the pass that is independent of the rendered object. This needs to be called before\n\t * calling pass. Before activating a pass, the previously used pass needs to be deactivated.\n\t * @param stage The Stage object which is currently used for rendering.\n\t * @param camera The camera from which the scene is viewed.\n\t * @private\n\t */\n\tpublic _iActivate(pass:IPass, camera:Camera)\n\t{\n\t\tpass._iActivate(camera);\n\t}\n\n\t/**\n\t * Renders an object to the current render target.\n\t *\n\t * @private\n\t */\n\tpublic _iRender(pass:IPass, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tthis._setRenderState(pass, camera, viewProjection);\n\n\t\tif (this._geometryDirty)\n\t\t\tthis._updateGeometry();\n\n\t\tthis._subGeometryVO._iRender(pass.shader);\n\t}\n\n\tpublic _setRenderState(pass:IPass, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tpass._iRender(this, camera, viewProjection);\n\t}\n\n\t/**\n\t * Clears the render state for the pass. This needs to be called before activating another pass.\n\t * @param stage The Stage used for rendering\n\t *\n\t * @private\n\t */\n\tpublic _iDeactivate(pass:IPass)\n\t{\n\t\tpass._iDeactivate();\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @private\n\t */\n\tprivate _updateGeometry()\n\t{\n\t\tif (this._subGeometryVO) {\n\t\t\tthis._subGeometryVO.usages--;\n\n\t\t\tif (!this._subGeometryVO.usages)\n\t\t\t\tthis._subGeometryVO.onClear(new AssetEvent(AssetEvent.CLEAR, this._subGeometry));\n\t\t}\n\n\t\tthis._subGeometry = this._pGetSubGeometry();\n\t\tthis._subGeometryVO = <SubGeometryVOBase> this._stage.getAbstraction(this._subGeometry);\n\t\tthis._subGeometryVO.usages++;\n\n\t\tthis._geometryDirty = false;\n\t}\n\n\tprivate _updateRenderOwner()\n\t{\n\t\tvar renderOwner:IRenderOwner = this._pGetRenderOwner() || DefaultMaterialManager.getDefaultMaterial(this.renderableOwner);\n\n\t\tvar render:RenderBase = this._renderer.getRenderPool(this.renderableOwner).getAbstraction(renderOwner);\n\n\t\tif (this._render != render) {\n\n\t\t\tif (this._render) {\n\t\t\t\tthis._render.usages--;\n\n\t\t\t\t//dispose current render object\n\t\t\t\tif (!this._render.usages)\n\t\t\t\t\tthis._render.onClear(new AssetEvent(AssetEvent.CLEAR, this._render.renderOwner));\n\t\t\t}\n\n\t\t\tthis._render = render;\n\n\t\t\tthis._render.usages++;\n\t\t}\n\n\t\t//create a cache of image & sampler objects for the renderable\n\t\tvar numImages:number = render.numImages;\n\n\t\tthis.images.length = numImages;\n\t\tthis.samplers.length = numImages;\n\n\t\tvar numTextures:number = renderOwner.getNumTextures();\n\t\tvar texture:TextureBase;\n\t\tvar numImages:number;\n\t\tvar image:ImageBase;\n\t\tvar sampler:SamplerBase;\n\t\tvar index:number;\n\n\t\tfor (var i:number = 0; i < numTextures; i++) {\n\t\t\ttexture = renderOwner.getTextureAt(i);\n\t\t\tnumImages = texture.getNumImages();\n\t\t\tfor (var j:number = 0; j < numImages; j++) {\n\t\t\t\tindex = render.getImageIndex(texture, j);\n\t\t\t\timage =  this.renderableOwner.style? this.renderableOwner.style.getImageAt(texture, j) : null;\n\t\t\t\tthis.images[index] = image? <GL_ImageBase> this._stage.getAbstraction(image) : null;\n\t\t\t\tsampler = this.renderableOwner.style? this.renderableOwner.style.getSamplerAt(texture, j) : null;\n\t\t\t\tthis.samplers[index] = sampler? <GL_SamplerBase> this._stage.getAbstraction(sampler) : null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport = RenderableBase;",
    "import AttributesBuffer\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport TriangleSubGeometry\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport PassBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/PassBase\");\n\n/**\n * @class away.pool.SkyboxRenderable\n */\nclass SkyboxRenderable extends RenderableBase\n{\n\tpublic static vertexAttributesOffset:number = 1;\n\n\t/**\n\t *\n\t */\n\tprivate static _geometry:TriangleSubGeometry;\n\n\tprivate _vertexArray:Float32Array;\n\n\t/**\n\t *\n\t */\n\tprivate _skybox:Skybox;\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param skybox\n\t */\n\tconstructor(skybox:Skybox, renderer:RendererBase)\n\t{\n\t\tsuper(skybox, skybox, skybox, renderer);\n\n\t\tthis._skybox = skybox;\n\n\t\tthis._vertexArray = new Float32Array([0, 0, 0, 0, 1, 1, 1, 1]);\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @returns {away.base.TriangleSubGeometry}\n\t * @private\n\t */\n\tpublic _pGetSubGeometry():TriangleSubGeometry\n\t{\n\t\tvar geometry:TriangleSubGeometry = SkyboxRenderable._geometry;\n\n\t\tif (!geometry) {\n\t\t\tgeometry = SkyboxRenderable._geometry = new TriangleSubGeometry(new AttributesBuffer(11, 4));\n\t\t\tgeometry.autoDeriveNormals = false;\n\t\t\tgeometry.autoDeriveTangents = false;\n\t\t\tgeometry.setIndices(Array<number>(0, 1, 2, 2, 3, 0, 6, 5, 4, 4, 7, 6, 2, 6, 7, 7, 3, 2, 4, 5, 1, 1, 0, 4, 4, 0, 3, 3, 7, 4, 2, 1, 5, 5, 6, 2));\n\t\t\tgeometry.setPositions(Array<number>(-1, 1, -1, 1, 1, -1, 1, 1, 1, -1, 1, 1, -1, -1, -1, 1, -1, -1, 1, -1, 1, -1, -1, 1));\n\t\t}\n\n\t\treturn geometry;\n\t}\n\n\tpublic _pGetRenderOwner():IRenderOwner\n\t{\n\t\treturn this._skybox;\n\t}\n\n\tpublic static _iIncludeDependencies(shader:ShaderBase)\n\t{\n\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic static _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"mul vt0, va0, vc5\\n\" +\n\t\t\t\"add vt0, vt0, vc4\\n\" +\n\t\t\t\"m44 op, vt0, vc0\\n\";\n\t}\n\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _setRenderState(pass:PassBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._setRenderState(pass, camera, viewProjection);\n\n\t\tvar context:IContextGL = this._stage.context;\n\t\tvar pos:Vector3D = camera.scenePosition;\n\t\tthis._vertexArray[0] = pos.x;\n\t\tthis._vertexArray[1] = pos.y;\n\t\tthis._vertexArray[2] = pos.z;\n\t\tthis._vertexArray[4] = this._vertexArray[5] = this._vertexArray[6] = camera.projection.far/Math.sqrt(3);\n\t\tcontext.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 0, viewProjection, true);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 4, this._vertexArray, 2);\n\t}\n}\n\nexport = SkyboxRenderable;",
    "import Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\n\nimport IRenderOwner\t\t\t\t\t= require(\"awayjs-display/lib/base/IRenderOwner\");\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport TriangleSubMesh\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubMesh\");\nimport TriangleSubGeometry\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\n\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\n\nimport RendererBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/RendererBase\");\nimport AnimatorBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport PassBase\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/PassBase\");\n\n/**\n * @class away.pool.TriangleSubMeshRenderable\n */\nclass TriangleSubMeshRenderable extends RenderableBase\n{\n\tpublic static vertexAttributesOffset:number = 1;\n\n\t/**\n\t *\n\t */\n\tpublic subMesh:TriangleSubMesh;\n\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param subMesh\n\t * @param level\n\t * @param indexOffset\n\t */\n\tconstructor(subMesh:TriangleSubMesh, renderer:RendererBase)\n\t{\n\t\tsuper(subMesh, subMesh.parentMesh, subMesh.material, renderer);\n\n\t\tthis.subMesh = subMesh;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis.subMesh = null;\n\t}\n\n\t/**\n\t *\n\t * @returns {SubGeometryBase}\n\t * @protected\n\t */\n\tpublic _pGetSubGeometry():TriangleSubGeometry\n\t{\n\t\treturn (this.subMesh.animator)? <TriangleSubGeometry> (<AnimatorBase> this.subMesh.animator).getRenderableSubGeometry(this, this.subMesh.subGeometry) : this.subMesh.subGeometry;\n\t}\n\n\n\tpublic _pGetRenderOwner():IRenderOwner\n\t{\n\t\treturn this.subMesh.material;\n\t}\n\n\tpublic static _iIncludeDependencies(shader:ShaderBase)\n\t{\n\n\t}\n\n\tpublic static _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar code:string = \"\";\n\n\t\t//get the projection coordinates\n\t\tvar position:ShaderRegisterElement = (shader.globalPosDependencies > 0)? sharedRegisters.globalPositionVertex : sharedRegisters.localPosition;\n\n\t\t//reserving vertex constants for projection matrix\n\t\tvar viewMatrixReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tregisterCache.getFreeVertexConstant();\n\t\tshader.viewMatrixIndex = viewMatrixReg.index*4;\n\n\t\tif (shader.projectionDependencies > 0) {\n\t\t\tsharedRegisters.projectionFragment = registerCache.getFreeVarying();\n\t\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\n\t\t\tcode += \"m44 \" + temp + \", \" + position + \", \" + viewMatrixReg + \"\\n\" +\n\t\t\t\"mov \" + sharedRegisters.projectionFragment + \", \" + temp + \"\\n\" +\n\t\t\t\"mov op, \" + temp + \"\\n\";\n\t\t} else {\n\t\t\tcode += \"m44 op, \" + position + \", \" + viewMatrixReg + \"\\n\";\n\t\t}\n\n\t\treturn code;\n\t}\n\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _setRenderState(pass:PassBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._setRenderState(pass, camera, viewProjection);\n\n\t\tvar shader:ShaderBase = pass.shader;\n\n\t\tif (shader.sceneMatrixIndex >= 0) {\n\t\t\tthis.sourceEntity.getRenderSceneTransform(camera).copyRawDataTo(shader.vertexConstantData, shader.sceneMatrixIndex, true);\n\t\t\tviewProjection.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\n\t\t} else {\n\t\t\tvar matrix3D:Matrix3D = Matrix3DUtils.CALCULATION_MATRIX;\n\n\t\t\tmatrix3D.copyFrom(this.sourceEntity.getRenderSceneTransform(camera));\n\t\t\tmatrix3D.append(viewProjection);\n\n\t\t\tmatrix3D.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\n\t\t}\n\n\t\tvar context:IContextGL = this._stage.context;\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 0, shader.vertexConstantData, shader.numUsedVertexConstants);\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, shader.fragmentConstantData, shader.numUsedFragmentConstants);\n\t}\n}\n\nexport = TriangleSubMeshRenderable;",
    "import Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport DirectionalLight\t\t\t\t= require(\"awayjs-display/lib/entities/DirectionalLight\");\nimport LightProbe\t\t\t\t\t= require(\"awayjs-display/lib/entities/LightProbe\");\nimport PointLight\t\t\t\t\t= require(\"awayjs-display/lib/entities/PointLight\");\nimport LightPickerBase\t\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/LightPickerBase\");\nimport LightSources\t\t\t\t\t= require(\"awayjs-display/lib/materials/LightSources\");\n\nimport ContextGLProfile\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProfile\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\n\nimport ILightingPass\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/ILightingPass\");\n\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport CompilerBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/compilers/CompilerBase\");\nimport LightingCompiler\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/compilers/LightingCompiler\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * ShaderBase keeps track of the number of dependencies for \"named registers\" used across a pass.\n * Named registers are that are not necessarily limited to a single method. They are created by the compiler and\n * passed on to methods. The compiler uses the results to reserve usages through RegisterPool, which can be removed\n * each time a method has been compiled into the shader.\n *\n * @see RegisterPool.addUsage\n */\nclass LightingShader extends ShaderBase\n{\n\tpublic _lightingPass:ILightingPass;\n\n\tprivate _includeCasters:boolean = true;\n\n\t/**\n\t * The first index for the fragment constants containing the light data.\n\t */\n\tpublic lightFragmentConstantIndex:number;\n\n\t/**\n\t * The starting index if the vertex constant to which light data needs to be uploaded.\n\t */\n\tpublic lightVertexConstantIndex:number;\n\n\t/**\n\t * Indices for the light probe diffuse textures.\n\t */\n\tpublic lightProbeDiffuseIndices:Array<number> /*uint*/;\n\n\t/**\n\t * Indices for the light probe specular textures.\n\t */\n\tpublic lightProbeSpecularIndices:Array<number> /*uint*/;\n\n\t/**\n\t * The index of the fragment constant containing the weights for the light probes.\n\t */\n\tpublic probeWeightsIndex:number;\n\n\tpublic numDirectionalLights:number;\n\tpublic numPointLights:number;\n\tpublic numLightProbes:number;\n\n\tpublic usesLightFallOff:boolean;\n\n\tpublic usesShadows:boolean;\n\n\t/**\n\t * Indicates whether the shader uses any lights.\n\t */\n\tpublic usesLights:boolean;\n\n\t/**\n\t * Indicates whether the shader uses any light probes.\n\t */\n\tpublic usesProbes:boolean;\n\n\t/**\n\t * Indicates whether the lights uses any specular components.\n\t */\n\tpublic usesLightsForSpecular:boolean;\n\n\t/**\n\t * Indicates whether the probes uses any specular components.\n\t */\n\tpublic usesProbesForSpecular:boolean;\n\n\t/**\n\t * Indicates whether the lights uses any diffuse components.\n\t */\n\tpublic usesLightsForDiffuse:boolean;\n\n\t/**\n\t * Indicates whether the probes uses any diffuse components.\n\t */\n\tpublic usesProbesForDiffuse:boolean;\n\n\t/**\n\t * Creates a new MethodCompilerVO object.\n\t */\n\tconstructor(renderableClass:IRenderableClass, lightingPass:ILightingPass, stage:Stage)\n\t{\n\t\tsuper(renderableClass, lightingPass, stage);\n\n\t\tthis._lightingPass = lightingPass;\n\t}\n\n\tpublic _iIncludeDependencies()\n\t{\n\t\tthis.numPointLights = this._lightingPass.numPointLights;\n\t\tthis.numDirectionalLights = this._lightingPass.numDirectionalLights;\n\t\tthis.numLightProbes = this._lightingPass.numLightProbes;\n\n\t\tvar numAllLights:number = this._lightingPass.numPointLights + this._lightingPass.numDirectionalLights;\n\t\tvar numLightProbes:number = this._lightingPass.numLightProbes;\n\t\tvar diffuseLightSources:number = this._lightingPass._iUsesDiffuse(this)? this._lightingPass.diffuseLightSources : 0x00;\n\t\tvar specularLightSources:number = this._lightingPass._iUsesSpecular(this)? this._lightingPass.specularLightSources : 0x00;\n\t\tvar combinedLightSources:number = diffuseLightSources | specularLightSources;\n\n\t\tthis.usesLightFallOff = this._lightingPass.enableLightFallOff && this.profile != ContextGLProfile.BASELINE_CONSTRAINED;\n\t\tthis.usesCommonData = this.usesLightFallOff;\n\t\tthis.numLights = numAllLights + numLightProbes;\n\t\tthis.usesLights = numAllLights > 0 && (combinedLightSources & LightSources.LIGHTS) != 0;\n\t\tthis.usesProbes = numLightProbes > 0 && (combinedLightSources & LightSources.PROBES) != 0;\n\t\tthis.usesLightsForSpecular = numAllLights > 0 && (specularLightSources & LightSources.LIGHTS) != 0;\n\t\tthis.usesProbesForSpecular = numLightProbes > 0 && (specularLightSources & LightSources.PROBES) != 0;\n\t\tthis.usesLightsForDiffuse = numAllLights > 0 && (diffuseLightSources & LightSources.LIGHTS) != 0;\n\t\tthis.usesProbesForDiffuse = numLightProbes > 0 && (diffuseLightSources & LightSources.PROBES) != 0;\n\t\tthis.usesShadows = this._lightingPass._iUsesShadows(this);\n\n\t\t//IMPORTANT this must occur after shader lighting initialisation above\n\t\tsuper._iIncludeDependencies();\n\t}\n\n\t/**\n\t * Factory method to create a concrete compiler object for this object\n\t *\n\t * @param materialPassVO\n\t * @returns {away.materials.LightingCompiler}\n\t */\n\tpublic createCompiler(renderableClass:IRenderableClass, pass:ILightingPass):CompilerBase\n\t{\n\t\treturn new LightingCompiler(renderableClass, pass, this);\n\t}\n\n\n\t/**\n\t *\n\t *\n\t * @param renderable\n\t * @param stage\n\t * @param camera\n\t */\n\tpublic _iRender(renderable:RenderableBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tsuper._iRender(renderable, camera, viewProjection);\n\n\t\tif (this._lightingPass.lightPicker)\n\t\t\tthis._lightingPass.lightPicker.collectLights(renderable.sourceEntity);\n\n\t\tif (this.usesLights)\n\t\t\tthis.updateLights();\n\n\t\tif (this.usesProbes)\n\t\t\tthis.updateProbes();\n\t}\n\n\t/**\n\t * Updates constant data render state used by the lights. This method is optional for subclasses to implement.\n\t */\n\tprivate updateLights()\n\t{\n\t\tvar dirLight:DirectionalLight;\n\t\tvar pointLight:PointLight;\n\t\tvar i:number = 0;\n\t\tvar k:number = 0;\n\t\tvar len:number;\n\t\tvar dirPos:Vector3D;\n\t\tvar total:number = 0;\n\t\tvar numLightTypes:number = this.usesShadows? 2 : 1;\n\t\tvar l:number;\n\t\tvar offset:number;\n\n\t\tthis.ambientR = this.ambientG = this.ambientB = 0;\n\n\t\tl = this.lightVertexConstantIndex;\n\t\tk = this.lightFragmentConstantIndex;\n\n\t\tvar cast:number = 0;\n\t\tvar dirLights:Array<DirectionalLight> = this._lightingPass.lightPicker.directionalLights;\n\t\toffset = this._lightingPass.directionalLightsOffset;\n\t\tlen = this._lightingPass.lightPicker.directionalLights.length;\n\n\t\tif (offset > len) {\n\t\t\tcast = 1;\n\t\t\toffset -= len;\n\t\t}\n\n\t\tfor (; cast < numLightTypes; ++cast) {\n\t\t\tif (cast)\n\t\t\t\tdirLights = this._lightingPass.lightPicker.castingDirectionalLights;\n\n\t\t\tlen = dirLights.length;\n\n\t\t\tif (len > this.numDirectionalLights)\n\t\t\t\tlen = this.numDirectionalLights;\n\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\tdirLight = dirLights[offset + i];\n\t\t\t\tdirPos = dirLight.sceneDirection;\n\n\t\t\t\tthis.ambientR += dirLight._iAmbientR;\n\t\t\t\tthis.ambientG += dirLight._iAmbientG;\n\t\t\t\tthis.ambientB += dirLight._iAmbientB;\n\n\t\t\t\tif (this.usesTangentSpace) {\n\t\t\t\t\tvar x:number = -dirPos.x;\n\t\t\t\t\tvar y:number = -dirPos.y;\n\t\t\t\t\tvar z:number = -dirPos.z;\n\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[0]*x + this._pInverseSceneMatrix[4]*y + this._pInverseSceneMatrix[8]*z;\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[1]*x + this._pInverseSceneMatrix[5]*y + this._pInverseSceneMatrix[9]*z;\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[2]*x + this._pInverseSceneMatrix[6]*y + this._pInverseSceneMatrix[10]*z;\n\t\t\t\t\tthis.vertexConstantData[l++] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis.fragmentConstantData[k++] = -dirPos.x;\n\t\t\t\t\tthis.fragmentConstantData[k++] = -dirPos.y;\n\t\t\t\t\tthis.fragmentConstantData[k++] = -dirPos.z;\n\t\t\t\t\tthis.fragmentConstantData[k++] = 1;\n\t\t\t\t}\n\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iDiffuseR;\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iDiffuseG;\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iDiffuseB;\n\t\t\t\tthis.fragmentConstantData[k++] = 1;\n\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iSpecularR;\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iSpecularG;\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iSpecularB;\n\t\t\t\tthis.fragmentConstantData[k++] = 1;\n\n\t\t\t\tif (++total == this.numDirectionalLights) {\n\t\t\t\t\t// break loop\n\t\t\t\t\ti = len;\n\t\t\t\t\tcast = numLightTypes;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// more directional supported than currently picked, need to clamp all to 0\n\t\tif (this.numDirectionalLights > total) {\n\t\t\ti = k + (this.numDirectionalLights - total)*12;\n\n\t\t\twhile (k < i)\n\t\t\t\tthis.fragmentConstantData[k++] = 0;\n\t\t}\n\n\t\ttotal = 0;\n\n\t\tvar pointLights:Array<PointLight> = this._lightingPass.lightPicker.pointLights;\n\t\toffset = this._lightingPass.pointLightsOffset;\n\t\tlen = this._lightingPass.lightPicker.pointLights.length;\n\n\t\tif (offset > len) {\n\t\t\tcast = 1;\n\t\t\toffset -= len;\n\t\t} else {\n\t\t\tcast = 0;\n\t\t}\n\n\t\tfor (; cast < numLightTypes; ++cast) {\n\t\t\tif (cast)\n\t\t\t\tpointLights = this._lightingPass.lightPicker.castingPointLights;\n\n\t\t\tlen = pointLights.length;\n\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\tpointLight = pointLights[offset + i];\n\t\t\t\tdirPos = pointLight.scenePosition;\n\n\t\t\t\tthis.ambientR += pointLight._iAmbientR;\n\t\t\t\tthis.ambientG += pointLight._iAmbientG;\n\t\t\t\tthis.ambientB += pointLight._iAmbientB;\n\n\t\t\t\tif (this.usesTangentSpace) {\n\t\t\t\t\tx = dirPos.x;\n\t\t\t\t\ty = dirPos.y;\n\t\t\t\t\tz = dirPos.z;\n\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[0]*x + this._pInverseSceneMatrix[4]*y + this._pInverseSceneMatrix[8]*z + this._pInverseSceneMatrix[12];\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[1]*x + this._pInverseSceneMatrix[5]*y + this._pInverseSceneMatrix[9]*z + this._pInverseSceneMatrix[13];\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[2]*x + this._pInverseSceneMatrix[6]*y + this._pInverseSceneMatrix[10]*z + this._pInverseSceneMatrix[14];\n\t\t\t\t\tthis.vertexConstantData[l++] = 1;\n\t\t\t\t} else if (!this.usesGlobalPosFragment) {\n\t\t\t\t\tthis.vertexConstantData[l++] = dirPos.x;\n\t\t\t\t\tthis.vertexConstantData[l++] = dirPos.y;\n\t\t\t\t\tthis.vertexConstantData[l++] = dirPos.z;\n\t\t\t\t\tthis.vertexConstantData[l++] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis.fragmentConstantData[k++] = dirPos.x;\n\t\t\t\t\tthis.fragmentConstantData[k++] = dirPos.y;\n\t\t\t\t\tthis.fragmentConstantData[k++] = dirPos.z;\n\t\t\t\t\tthis.fragmentConstantData[k++] = 1;\n\t\t\t\t}\n\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iDiffuseR;\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iDiffuseG;\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iDiffuseB;\n\n\t\t\t\tvar radius:number = pointLight._pRadius;\n\t\t\t\tthis.fragmentConstantData[k++] = radius*radius;\n\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iSpecularR;\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iSpecularG;\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iSpecularB;\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._pFallOffFactor;\n\n\t\t\t\tif (++total == this.numPointLights) {\n\t\t\t\t\t// break loop\n\t\t\t\t\ti = len;\n\t\t\t\t\tcast = numLightTypes;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// more directional supported than currently picked, need to clamp all to 0\n\t\tif (this.numPointLights > total) {\n\t\t\ti = k + (total - this.numPointLights)*12;\n\n\t\t\tfor (; k < i; ++k)\n\t\t\t\tthis.fragmentConstantData[k] = 0;\n\t\t}\n\t}\n\n\t/**\n\t * Updates constant data render state used by the light probes. This method is optional for subclasses to implement.\n\t */\n\tprivate updateProbes()\n\t{\n\t\tvar probe:LightProbe;\n\t\tvar lightProbes:Array<LightProbe> = this._lightingPass.lightPicker.lightProbes;\n\t\tvar weights:Array<number> = this._lightingPass.lightPicker.lightProbeWeights;\n\t\tvar len:number = lightProbes.length - this._lightingPass.lightProbesOffset;\n\t\tvar addDiff:boolean = this.usesProbesForDiffuse;\n\t\tvar addSpec:boolean = this.usesProbesForSpecular;\n\n\t\tif (!(addDiff || addSpec))\n\t\t\treturn;\n\n\t\tif (len > this.numLightProbes)\n\t\t\tlen = this.numLightProbes;\n\n\t\tfor (var i:number = 0; i < len; ++i) {\n\t\t\tprobe = lightProbes[ this._lightingPass.lightProbesOffset + i];\n\n\t\t\tif (addDiff)\n\t\t\t\t(<GL_ImageBase> this._stage.getAbstraction(probe.diffuseMap)).activate(this.lightProbeDiffuseIndices[i], probe.diffuseSampler.mipmap);\n\n\t\t\tif (addSpec)\n\t\t\t\t(<GL_ImageBase> this._stage.getAbstraction(probe.specularMap)).activate(this.lightProbeSpecularIndices[i], probe.diffuseSampler.mipmap);\n\t\t}\n\n\t\tfor (i = 0; i < len; ++i)\n\t\t\tthis.fragmentConstantData[this.probeWeightsIndex + i] = weights[this._lightingPass.lightProbesOffset + i];\n\t}\n}\n\nexport = LightingShader;",
    "import ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\n/**\n * RegisterPool is used by the shader compilers process to keep track of which registers of a certain type are\n * currently used and should not be allowed to be written to. Either entire registers can be requested and locked,\n * or single components (x, y, z, w) of a single register.\n * It is used by ShaderRegisterCache to track usages of individual register types.\n *\n * @see away.materials.ShaderRegisterCache\n */\nclass RegisterPool\n{\n\tprivate static _regPool:Object = new Object();\n\tprivate static _regCompsPool:Object = new Object();\n\n\tprivate _vectorRegisters:Array<ShaderRegisterElement>;\n\tprivate _registerComponents;\n\n\tprivate _regName:string;\n\tprivate _usedSingleCount:Array<Array<number>>;\n\tprivate _usedVectorCount:Array<number> /*uint*/;\n\tprivate _regCount:number;\n\n\tprivate _persistent:boolean;\n\n\t/**\n\t * Creates a new RegisterPool object.\n\t * @param regName The base name of the register type (\"ft\" for fragment temporaries, \"vc\" for vertex constants, etc)\n\t * @param regCount The amount of available registers of this type.\n\t * @param persistent Whether or not registers, once reserved, can be freed again. For example, temporaries are not persistent, but constants are.\n\t */\n\tconstructor(regName:string, regCount:number, persistent:boolean = true)\n\t{\n\t\tthis._regName = regName;\n\t\tthis._regCount = regCount;\n\t\tthis._persistent = persistent;\n\t\tthis.initRegisters(regName, regCount);\n\t}\n\n\t/**\n\t * Retrieve an entire vector register that's still available.\n\t */\n\tpublic requestFreeVectorReg():ShaderRegisterElement\n\t{\n\t\tfor (var i:number = 0; i < this._regCount; ++i) {\n\t\t\tif (!this.isRegisterUsed(i)) {\n\t\t\t\tif (this._persistent)\n\t\t\t\t\tthis._usedVectorCount[i]++;\n\n\t\t\t\treturn this._vectorRegisters[i];\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error(\"Register overflow!\");\n\t}\n\n\t/**\n\t * Retrieve a single vector component that's still available.\n\t */\n\tpublic requestFreeRegComponent():ShaderRegisterElement\n\t{\n\t\tfor (var i:number = 0; i < this._regCount; ++i) {\n\t\t\tif (this._usedVectorCount[i] > 0)\n\t\t\t\tcontinue;\n\n\t\t\tfor (var j:number = 0; j < 4; ++j) {\n\t\t\t\tif (this._usedSingleCount[j][i] == 0) {\n\t\t\t\t\tif (this._persistent)\n\t\t\t\t\t\tthis._usedSingleCount[j][i]++;\n\n\t\t\t\t\treturn this._registerComponents[j][i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error(\"Register overflow!\");\n\t}\n\n\t/**\n\t * Marks a register as used, so it cannot be retrieved. The register won't be able to be used until removeUsage\n\t * has been called usageCount times again.\n\t * @param register The register to mark as used.\n\t * @param usageCount The amount of usages to add.\n\t */\n\tpublic addUsage(register:ShaderRegisterElement, usageCount:number)\n\t{\n\t\tif (register._component > -1)\n\t\t\tthis._usedSingleCount[register._component][register.index] += usageCount;\n\t\telse\n\t\t\tthis._usedVectorCount[register.index] += usageCount;\n\t}\n\n\t/**\n\t * Removes a usage from a register. When usages reach 0, the register is freed again.\n\t * @param register The register for which to remove a usage.\n\t */\n\tpublic removeUsage(register:ShaderRegisterElement)\n\t{\n\t\tif (register._component > -1) {\n\t\t\tif (--this._usedSingleCount[register._component][register.index] < 0)\n\t\t\t\tthrow new Error(\"More usages removed than exist!\");\n\t\t} else {\n\t\t\tif (--this._usedVectorCount[register.index] < 0)\n\t\t\t\tthrow new Error(\"More usages removed than exist!\");\n\t\t}\n\t}\n\n\t/**\n\t * Disposes any resources used by the current RegisterPool object.\n\t */\n\tpublic dispose()\n\t{\n\t\tthis._vectorRegisters = null;\n\t\tthis._registerComponents = null;\n\t\tthis._usedSingleCount = null;\n\t\tthis._usedVectorCount = null;\n\t}\n\n\t/**\n\t * Indicates whether or not any registers are in use.\n\t */\n\tpublic hasRegisteredRegs():boolean\n\t{\n\t\tfor (var i:number = 0; i < this._regCount; ++i)\n\t\t\tif (this.isRegisterUsed(i))\n\t\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Initializes all registers.\n\t */\n\tprivate initRegisters(regName:string, regCount:number)\n\t{\n\t\tvar hash:string = RegisterPool._initPool(regName, regCount);\n\n\t\tthis._vectorRegisters = RegisterPool._regPool[hash];\n\t\tthis._registerComponents = RegisterPool._regCompsPool[hash];\n\n\t\tthis._usedVectorCount = this._initArray(Array<number>(regCount), 0);\n\n\t\tthis._usedSingleCount = new Array<Array<number>>(4);\n\t\tthis._usedSingleCount[0] = this._initArray(new Array<number>(regCount), 0);\n\t\tthis._usedSingleCount[1] = this._initArray(new Array<number>(regCount), 0);\n\t\tthis._usedSingleCount[2] = this._initArray(new Array<number>(regCount), 0);\n\t\tthis._usedSingleCount[3] = this._initArray(new Array<number>(regCount), 0);\n\t}\n\n\tprivate static _initPool(regName:string, regCount:number):string\n\t{\n\t\tvar hash:string = regName + regCount;\n\n\t\tif (RegisterPool._regPool[hash] != undefined)\n\t\t\treturn hash;\n\n\t\tvar vectorRegisters:Array<ShaderRegisterElement> = new Array<ShaderRegisterElement>(regCount);\n\t\tRegisterPool._regPool[hash] = vectorRegisters;\n\n\t\tvar registerComponents = [\n\t\t\t[],\n\t\t\t[],\n\t\t\t[],\n\t\t\t[]\n\t\t];\n\t\tRegisterPool._regCompsPool[hash] = registerComponents;\n\n\t\tfor (var i:number = 0; i < regCount; ++i) {\n\n\t\t\tvectorRegisters[i] = new ShaderRegisterElement(regName, i);\n\n\t\t\tfor (var j:number = 0; j < 4; ++j)\n\t\t\t\tregisterComponents[j][i] = new ShaderRegisterElement(regName, i, j);\n\t\t}\n\n\t\treturn hash;\n\t}\n\n\n\t/**\n\t * Check if the temp register is either used for single or vector use\n\t */\n\tprivate isRegisterUsed(index:number):boolean\n\t{\n\t\tif (this._usedVectorCount[index] > 0)\n\t\t\treturn true;\n\n\t\tfor (var i:number = 0; i < 4; ++i)\n\t\t\tif (this._usedSingleCount[i][index] > 0)\n\t\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\n\tprivate _initArray(a:Array<any>, val:any):Array<any>\n\t{\n\t\tvar l:number = a.length;\n\n\t\tfor (var c:number = 0; c < l; c++)\n\t\t\ta[c] = val;\n\n\t\treturn a;\n\t}\n}\n\nexport = RegisterPool;\n",
    "import BlendMode\t\t\t\t\t= require(\"awayjs-core/lib/image/BlendMode\");\nimport ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport SamplerBase\t\t\t\t\t= require(\"awayjs-core/lib/image/SamplerBase\");\nimport Matrix\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport ColorTransform\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport ArgumentError\t\t\t\t= require(\"awayjs-core/lib/errors/ArgumentError\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\nimport IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport IAssetClass\t\t\t\t\t= require(\"awayjs-core/lib/library/IAssetClass\");\nimport IAbstractionPool\t\t\t\t= require(\"awayjs-core/lib/library/IAbstractionPool\");\n\nimport IRenderableOwner\t\t\t\t= require(\"awayjs-display/lib/base/IRenderableOwner\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport TextureBase\t\t\t\t\t= require(\"awayjs-display/lib/textures/TextureBase\");\n\nimport ContextGLBlendFactor\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLCompareMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport ContextGLTriangleFace\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTriangleFace\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ProgramData\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/ProgramData\");\n\nimport AnimationSetBase\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimationSetBase\");\nimport AnimatorBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/AnimatorBase\");\nimport AnimationRegisterCache\t\t= require(\"awayjs-renderergl/lib/animators/data/AnimationRegisterCache\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport CompilerBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/compilers/CompilerBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ITextureVOClass\t\t\t\t= require(\"awayjs-renderergl/lib/vos/ITextureVOClass\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n * ShaderBase keeps track of the number of dependencies for \"named registers\" used across a pass.\n * Named registers are that are not necessarily limited to a single method. They are created by the compiler and\n * passed on to methods. The compiler uses the results to reserve usages through RegisterPool, which can be removed\n * each time a method has been compiled into the shader.\n *\n * @see RegisterPool.addUsage\n */\nclass ShaderBase implements IAbstractionPool\n{\n\tpublic static _abstractionClassPool:Object = new Object();\n\n\tprivate _abstractionPool:Object = new Object();\n\n\tprivate _renderableClass:IRenderableClass;\n\tprivate _pass:IPass;\n\tpublic _stage:Stage;\n\tprivate _programData:ProgramData;\n\n\tprivate _blendFactorSource:string = ContextGLBlendFactor.ONE;\n\tprivate _blendFactorDest:string = ContextGLBlendFactor.ZERO;\n\n\tprivate _invalidShader:boolean = true;\n\tprivate _invalidProgram:boolean = true;\n\tprivate _animationVertexCode:string = \"\";\n\tprivate _animationFragmentCode:string = \"\";\n\n\tpublic get programData():ProgramData\n\t{\n\t\tif (this._invalidProgram)\n\t\t\tthis._updateProgram();\n\n\t\treturn this._programData;\n\t}\n\n\tpublic usesBlending:boolean = false;\n\n\tpublic useImageRect:boolean = false;\n\n\n\t/**\n\t *\n\t */\n\tpublic usesUVBuffer:boolean = false;\n\n\t/**\n\t * The depth compare mode used to render the renderables using this material.\n\t *\n\t * @see away.stagegl.ContextGLCompareMode\n\t */\n\tpublic depthCompareMode:string = ContextGLCompareMode.LESS_EQUAL;\n\n\n\t/**\n\t * Indicate whether the shader should write to the depth buffer or not. Ignored when blending is enabled.\n\t */\n\tpublic writeDepth:boolean = true;\n\n\tpublic profile:string;\n\n\tpublic usesAnimation:boolean;\n\n\tprivate _defaultCulling:string = ContextGLTriangleFace.BACK;\n\n\tpublic _pInverseSceneMatrix:Float32Array = new Float32Array(16);\n\n\tpublic animationRegisterCache:AnimationRegisterCache;\n\n\t/**\n\t * The amount of used vertex constants in the vertex code. Used by the animation code generation to know from which index on registers are available.\n\t */\n\tpublic numUsedVertexConstants:number;\n\n\t/**\n\t * The amount of used fragment constants in the fragment code. Used by the animation code generation to know from which index on registers are available.\n\t */\n\tpublic numUsedFragmentConstants:number;\n\n\t/**\n\t * The amount of used vertex streams in the vertex code. Used by the animation code generation to know from which index on streams are available.\n\t */\n\tpublic numUsedStreams:number;\n\n\t/**\n\t *\n\t */\n\tpublic numUsedTextures:number;\n\n\t/**\n\t *\n\t */\n\tpublic numUsedVaryings:number;\n\n\tpublic numLights:number;\n\n\tpublic animatableAttributes:Array<string>;\n\tpublic animationTargetRegisters:Array<string>;\n\tpublic uvSource:string;\n\tpublic uvTarget:string;\n\n\tpublic useAlphaPremultiplied:boolean;\n\tpublic useBothSides:boolean;\n\tpublic usesUVTransform:boolean;\n\tpublic usesColorTransform:boolean;\n\tpublic alphaThreshold:number;\n\n\n\t//set ambient values to default\n\tpublic ambientR:number = 0xFF;\n\tpublic ambientG:number = 0xFF;\n\tpublic ambientB:number = 0xFF;\n\n\t/**\n\t *\n\t */\n\tpublic usesCommonData:boolean;\n\n\t/**\n\t * Indicates whether the pass requires any fragment animation code.\n\t */\n\tpublic usesFragmentAnimation:boolean;\n\n\t/**\n\t * The amount of dependencies on the projected position.\n\t */\n\tpublic projectionDependencies:number;\n\n\t/**\n\t * The amount of dependencies on the normal vector.\n\t */\n\tpublic normalDependencies:number;\n\n\t/**\n\t * The amount of dependencies on the vertex color.\n\t */\n\tpublic colorDependencies:number;\n\n\t/**\n\t * The amount of dependencies on the view direction.\n\t */\n\tpublic viewDirDependencies:number;\n\n\t/**\n\t * The amount of dependencies on the primary UV coordinates.\n\t */\n\tpublic uvDependencies:number;\n\n\t/**\n\t * The amount of dependencies on the secondary UV coordinates.\n\t */\n\tpublic secondaryUVDependencies:number;\n\n\t/**\n\t * The amount of dependencies on the global position. This can be 0 while hasGlobalPosDependencies is true when\n\t * the global position is used as a temporary value (fe to calculate the view direction)\n\t */\n\tpublic globalPosDependencies:number;\n\n\t/**\n\t * The amount of tangent vector dependencies (fragment shader).\n\t */\n\tpublic tangentDependencies:number;\n\n\t/**\n\t *\n\t */\n\tpublic outputsColors:boolean;\n\n\t/**\n\t * Indicates whether or not normals are output.\n\t */\n\tpublic outputsNormals:boolean;\n\n\t/**\n\t * Indicates whether or not normal calculations are output in tangent space.\n\t */\n\tpublic outputsTangentNormals:boolean;\n\n\t/**\n\t * Indicates whether or not normal calculations are expected in tangent space. This is only the case if no world-space\n\t * dependencies exist and normals are being output.\n\t */\n\tpublic usesTangentSpace:boolean;\n\n\t/**\n\t * Indicates whether there are any dependencies on the world-space position vector.\n\t */\n\tpublic usesGlobalPosFragment:boolean = false;\n\n\t/**\n\t * Indicates whether there are any dependencies on the local position vector.\n\t */\n\tpublic usesLocalPosFragment:boolean = false;\n\n\tpublic vertexConstantData:Float32Array;\n\tpublic fragmentConstantData:Float32Array;\n\n\t/**\n\t * The index for the common data register.\n\t */\n\tpublic commonsDataIndex:number;\n\n\t/**\n\t * The index for the UV vertex attribute stream.\n\t */\n\tpublic uvBufferIndex:number;\n\n\t/**\n\t * The index for the secondary UV vertex attribute stream.\n\t */\n\tpublic secondaryUVBufferIndex:number;\n\n\t/**\n\t * The index for the vertex normal attribute stream.\n\t */\n\tpublic normalBufferIndex:number;\n\n\t/**\n\t * The index for the color attribute stream.\n\t */\n\tpublic colorBufferIndex:number;\n\n\t/**\n\t * The index for the vertex tangent attribute stream.\n\t */\n\tpublic tangentBufferIndex:number;\n\n\t/**\n\t * The index of the vertex constant containing the view matrix.\n\t */\n\tpublic viewMatrixIndex:number;\n\n\t/**\n\t * The index of the vertex constant containing the scene matrix.\n\t */\n\tpublic sceneMatrixIndex:number;\n\n\t/**\n\t * The index of the vertex constant containing the uniform scene matrix (the inverse transpose).\n\t */\n\tpublic sceneNormalMatrixIndex:number;\n\n\t/**\n\t * The index of the vertex constant containing the camera position.\n\t */\n\tpublic cameraPositionIndex:number;\n\n\t/**\n\t * The index for the UV transformation matrix vertex constant.\n\t */\n\tpublic uvTransformIndex:number;\n\n\t/**\n\t * The index for the color transform fragment constant.\n\t */\n\tpublic colorTransformIndex:number;\n\n\t/**\n\t *\n\t */\n\tpublic jointIndexIndex:number;\n\n\t/**\n\t *\n\t */\n\tpublic jointWeightIndex:number;\n\n\t/**\n\t *\n\t */\n\tpublic imageIndices:Array<number> = new Array<number>();\n\n\t/**\n\t * Creates a new MethodCompilerVO object.\n\t */\n\tconstructor(renderableClass:IRenderableClass, pass:IPass, stage:Stage)\n\t{\n\t\tthis._renderableClass = renderableClass;\n\t\tthis._pass = pass;\n\t\tthis._stage = stage;\n\t\tthis.profile = this._stage.profile;\n\t}\n\n\tpublic getAbstraction(texture:TextureBase):TextureVOBase\n\t{\n\t\treturn (this._abstractionPool[texture.id] || (this._abstractionPool[texture.id] = new (<ITextureVOClass> ShaderBase._abstractionClassPool[texture.assetType])(texture, this)));\n\t}\n\n\t/**\n\t *\n\t * @param image\n\t */\n\tpublic clearAbstraction(renderableOwner:IRenderableOwner)\n\t{\n\t\tthis._abstractionPool[renderableOwner.id] = null;\n\t}\n\n\t/**\n\t *\n\t * @param imageObjectClass\n\t */\n\tpublic static registerAbstraction(texture:ITextureVOClass, assetClass:IAssetClass)\n\t{\n\t\tShaderBase._abstractionClassPool[assetClass.assetType] = texture;\n\t}\n\n\tpublic getImageIndex(texture:TextureBase, index:number = 0):number\n\t{\n\t\treturn this._pass.getImageIndex(texture, index);\n\t}\n\n\tpublic _iIncludeDependencies()\n\t{\n\t\tthis._pass._iIncludeDependencies(this);\n\t}\n\n\t/**\n\t * Factory method to create a concrete compiler object for this object\n\t *\n\t * @param renderableClass\n\t * @param pass\n\t * @param stage\n\t * @returns {CompilerBase}\n\t */\n\tpublic createCompiler(renderableClass:IRenderableClass, pass:IPass):CompilerBase\n\t{\n\t\treturn new CompilerBase(renderableClass, pass, this);\n\t}\n\n\t/**\n\t * Clears dependency counts for all registers. Called when recompiling a pass.\n\t */\n\tpublic reset()\n\t{\n\t\tthis.projectionDependencies = 0;\n\t\tthis.normalDependencies = 0;\n\t\tthis.colorDependencies = 0;\n\t\tthis.viewDirDependencies = 0;\n\t\tthis.uvDependencies = 0;\n\t\tthis.secondaryUVDependencies = 0;\n\t\tthis.globalPosDependencies = 0;\n\t\tthis.tangentDependencies = 0;\n\t\tthis.usesCommonData = false;\n\t\tthis.usesGlobalPosFragment = false;\n\t\tthis.usesLocalPosFragment = false;\n\t\tthis.usesFragmentAnimation = false;\n\t\tthis.usesTangentSpace = false;\n\t\tthis.outputsNormals = false;\n\t\tthis.outputsTangentNormals = false;\n\t}\n\n\tpublic pInitRegisterIndices()\n\t{\n\t\tthis.commonsDataIndex = -1;\n\t\tthis.cameraPositionIndex = -1;\n\t\tthis.uvBufferIndex = -1;\n\t\tthis.uvTransformIndex = -1;\n\t\tthis.colorTransformIndex = -1;\n\t\tthis.secondaryUVBufferIndex = -1;\n\t\tthis.normalBufferIndex = -1;\n\t\tthis.colorBufferIndex = -1;\n\t\tthis.tangentBufferIndex = -1;\n\t\tthis.sceneMatrixIndex = -1;\n\t\tthis.sceneNormalMatrixIndex = -1;\n\t\tthis.jointIndexIndex = -1;\n\t\tthis.jointWeightIndex = -1;\n\t\tthis.imageIndices.length = 0;\n\t}\n\n\t/**\n\t * Initializes the unchanging constant data for this shader object.\n\t */\n\tpublic initConstantData(registerCache:ShaderRegisterCache, animatableAttributes:Array<string>, animationTargetRegisters:Array<string>, uvSource:string, uvTarget:string)\n\t{\n\t\t//Updates the amount of used register indices.\n\t\tthis.numUsedVertexConstants = registerCache.numUsedVertexConstants;\n\t\tthis.numUsedFragmentConstants = registerCache.numUsedFragmentConstants;\n\t\tthis.numUsedStreams = registerCache.numUsedStreams;\n\t\tthis.numUsedTextures = registerCache.numUsedTextures;\n\t\tthis.numUsedVaryings = registerCache.numUsedVaryings;\n\t\tthis.numUsedFragmentConstants = registerCache.numUsedFragmentConstants;\n\n\t\tthis.animatableAttributes = animatableAttributes;\n\t\tthis.animationTargetRegisters = animationTargetRegisters;\n\t\tthis.uvSource = uvSource;\n\t\tthis.uvTarget = uvTarget;\n\n\t\tthis.vertexConstantData = new Float32Array(this.numUsedVertexConstants*4);\n\t\tthis.fragmentConstantData = new Float32Array(this.numUsedFragmentConstants*4);\n\n\t\t//Initializes commonly required constant values.\n\t\tif (this.commonsDataIndex >= 0) {\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex] = .5;\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex + 1] = 0;\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex + 2] = 1/255;\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex + 3] = 1;\n\t\t}\n\n\t\t//Initializes the default UV transformation matrix.\n\t\tif (this.uvTransformIndex >= 0) {\n\t\t\tthis.vertexConstantData[this.uvTransformIndex] = 1;\n\t\t\tthis.vertexConstantData[this.uvTransformIndex + 1] = 0;\n\t\t\tthis.vertexConstantData[this.uvTransformIndex + 2] = 0;\n\t\t\tthis.vertexConstantData[this.uvTransformIndex + 3] = 0;\n\t\t\tthis.vertexConstantData[this.uvTransformIndex + 4] = 0;\n\t\t\tthis.vertexConstantData[this.uvTransformIndex + 5] = 1;\n\t\t\tthis.vertexConstantData[this.uvTransformIndex + 6] = 0;\n\t\t\tthis.vertexConstantData[this.uvTransformIndex + 7] = 0;\n\t\t}\n\n\t\t//Initializes the default colorTransform.\n\t\tif (this.colorTransformIndex >= 0) {\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex] = 1;\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 1] = 1;\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 2] = 1;\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 3] = 1;\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 4] = 0;\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 5] = 0;\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 6] = 0;\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 7] = 0;\n\t\t}\n\t\tif (this.cameraPositionIndex >= 0)\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 3] = 1;\n\t}\n\n\t/**\n\t * The blend mode to use when drawing this renderable. The following blend modes are supported:\n\t * <ul>\n\t * <li>BlendMode.NORMAL: No blending, unless the material inherently needs it</li>\n\t * <li>BlendMode.LAYER: Force blending. This will draw the object the same as NORMAL, but without writing depth writes.</li>\n\t * <li>BlendMode.MULTIPLY</li>\n\t * <li>BlendMode.ADD</li>\n\t * <li>BlendMode.ALPHA</li>\n\t * </ul>\n\t */\n\tpublic setBlendMode(value:string)\n\t{\n\t\tswitch (value) {\n\t\t\tcase BlendMode.NORMAL:\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.ONE;\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.ZERO;\n\t\t\t\tthis.usesBlending = false;\n\t\t\t\tbreak;\n\n\t\t\tcase BlendMode.LAYER:\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.SOURCE_ALPHA;\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.ONE_MINUS_SOURCE_ALPHA;\n\t\t\t\tthis.usesBlending = true;\n\t\t\t\tbreak;\n\n\t\t\tcase BlendMode.MULTIPLY:\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.ZERO;\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.SOURCE_COLOR;\n\t\t\t\tthis.usesBlending = true;\n\t\t\t\tbreak;\n\n\t\t\tcase BlendMode.ADD:\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.SOURCE_ALPHA;\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.ONE;\n\t\t\t\tthis.usesBlending = true;\n\t\t\t\tbreak;\n\n\t\t\tcase BlendMode.ALPHA:\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.ZERO;\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.SOURCE_ALPHA;\n\t\t\t\tthis.usesBlending = true;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new ArgumentError(\"Unsupported blend mode!\");\n\t\t}\n\t}\n\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iActivate(camera:Camera)\n\t{\n\t\tif (this.usesAnimation)\n\t\t\t(<AnimationSetBase> this._pass.animationSet).activate(this, this._stage);\n\n\t\tthis._stage.context.setCulling(this.useBothSides? ContextGLTriangleFace.NONE : this._defaultCulling, camera.projection.coordinateSystem);\n\n\t\tif (!this.usesTangentSpace && this.cameraPositionIndex >= 0) {\n\t\t\tvar pos:Vector3D = camera.scenePosition;\n\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex] = pos.x;\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 1] = pos.y;\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 2] = pos.z;\n\t\t}\n\n\t\tthis._stage.context.setDepthTest(( this.writeDepth && !this.usesBlending ), this.depthCompareMode);\n\n\t\tif (this.usesBlending)\n\t\t\tthis._stage.context.setBlendFactors(this._blendFactorSource, this._blendFactorDest);\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tpublic _iDeactivate()\n\t{\n\t\tif (this.usesAnimation)\n\t\t\t(<AnimationSetBase> this._pass.animationSet).deactivate(this, this._stage);\n\n\t\t//For the love of god don't remove this if you want your multi-material shadows to not flicker like shit\n\t\tthis._stage.context.setDepthTest(true, ContextGLCompareMode.LESS_EQUAL);\n\t}\n\n\n\t/**\n\t *\n\t *\n\t * @param renderable\n\t * @param stage\n\t * @param camera\n\t */\n\tpublic _iRender(renderable:RenderableBase, camera:Camera, viewProjection:Matrix3D)\n\t{\n\t\tif (renderable.renderableOwner.animator)\n\t\t\t(<AnimatorBase> renderable.renderableOwner.animator).setRenderState(this, renderable, this._stage, camera, this.numUsedVertexConstants, this.numUsedStreams);\n\n\t\tif (this.usesUVTransform) {\n\t\t\tvar uvTransform:Matrix = renderable.renderableOwner.uvTransform;\n\n\t\t\tif (uvTransform) {\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex] = uvTransform.a;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 1] = uvTransform.b;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 3] = uvTransform.tx;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 4] = uvTransform.c;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 5] = uvTransform.d;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 7] = uvTransform.ty;\n\t\t\t} else {\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex] = 1;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 1] = 0;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 3] = 0;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 4] = 0;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 5] = 1;\n\t\t\t\tthis.vertexConstantData[this.uvTransformIndex + 7] = 0;\n\t\t\t}\n\t\t}\n\t\tif (this.usesColorTransform) {\n\n\t\t\tvar colorTransform:ColorTransform = renderable.sourceEntity._iAssignedColorTransform();\n\n\t\t\tif (colorTransform) {\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex] = colorTransform.redMultiplier;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 1] = colorTransform.greenMultiplier;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 2] = colorTransform.blueMultiplier;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 3] = colorTransform.alphaMultiplier;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 4] = colorTransform.redOffset/255;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 5] = colorTransform.greenOffset/255;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 6] = colorTransform.blueOffset/255;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 7] = colorTransform.alphaOffset/255;\n\t\t\t} else {\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex] = 1;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 1] = 1;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 2] = 1;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 3] = 1;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 4] = 0;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 5] = 0;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 6] = 0;\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 7] = 0;\n\t\t\t}\n\t\t}\n\t\tif (this.sceneNormalMatrixIndex >= 0)\n\t\t\trenderable.sourceEntity.inverseSceneTransform.copyRawDataTo(this.vertexConstantData, this.sceneNormalMatrixIndex, false);\n\n\t\tif (this.usesTangentSpace && this.cameraPositionIndex >= 0) {\n\n\t\t\trenderable.sourceEntity.inverseSceneTransform.copyRawDataTo(this._pInverseSceneMatrix);\n\t\t\tvar pos:Vector3D = camera.scenePosition;\n\t\t\tvar x:number = pos.x;\n\t\t\tvar y:number = pos.y;\n\t\t\tvar z:number = pos.z;\n\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex] = this._pInverseSceneMatrix[0]*x + this._pInverseSceneMatrix[4]*y + this._pInverseSceneMatrix[8]*z + this._pInverseSceneMatrix[12];\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 1] = this._pInverseSceneMatrix[1]*x + this._pInverseSceneMatrix[5]*y + this._pInverseSceneMatrix[9]*z + this._pInverseSceneMatrix[13];\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 2] = this._pInverseSceneMatrix[2]*x + this._pInverseSceneMatrix[6]*y + this._pInverseSceneMatrix[10]*z + this._pInverseSceneMatrix[14];\n\t\t}\n\t}\n\t\n\tpublic invalidateProgram()\n\t{\n\t\tthis._invalidProgram = true;\n\t}\n\n\tpublic invalidateShader()\n\t{\n\t\tthis._invalidShader = true;\n\t\tthis._invalidProgram = true;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._programData.dispose();\n\t\tthis._programData = null;\n\t}\n\n\tprivate _updateProgram()\n\t{\n\t\tthis._invalidProgram = false;\n\n\t\tvar compiler:CompilerBase;\n\n\t\tif (this._invalidShader) {\n\t\t\tthis._invalidShader = false;\n\n\t\t\tcompiler = this.createCompiler(this._renderableClass, this._pass);\n\t\t\tcompiler.compile();\n\t\t}\n\n\t\tthis._calcAnimationCode(compiler.shadedTarget);\n\n\t\tvar programData:ProgramData = this._stage.getProgramData(this._animationVertexCode + compiler.vertexCode, compiler.fragmentCode + this._animationFragmentCode + compiler.postAnimationFragmentCode);\n\n\t\t//check program data hasn't changed, keep count of program usages\n\t\tif (this._programData != programData) {\n\t\t\tif (this._programData)\n\t\t\t\tthis._programData.dispose();\n\n\t\t\tthis._programData = programData;\n\n\t\t\tprogramData.usages++;\n\t\t}\n\t}\n\n\tprivate _calcAnimationCode(shadedTarget:string)\n\t{\n\t\t//reset code\n\t\tthis._animationVertexCode = \"\";\n\t\tthis._animationFragmentCode = \"\";\n\n\t\t//check to see if GPU animation is used\n\t\tif (this.usesAnimation) {\n\n\t\t\tvar animationSet:AnimationSetBase = <AnimationSetBase> this._pass.animationSet;\n\n\t\t\tthis._animationVertexCode += animationSet.getAGALVertexCode(this);\n\n\t\t\tif (this.uvDependencies > 0 && !this.usesUVTransform)\n\t\t\t\tthis._animationVertexCode += animationSet.getAGALUVCode(this);\n\n\t\t\tif (this.usesFragmentAnimation)\n\t\t\t\tthis._animationFragmentCode += animationSet.getAGALFragmentCode(this, shadedTarget);\n\n\t\t\tanimationSet.doneAGALCode(this);\n\n\t\t} else {\n\t\t\t// simply write attributes to targets, do not animate them\n\t\t\t// projection will pick up on targets[0] to do the projection\n\t\t\tvar len:number = this.animatableAttributes.length;\n\t\t\tfor (var i:number = 0; i < len; ++i)\n\t\t\t\tthis._animationVertexCode += \"mov \" + this.animationTargetRegisters[i] + \", \" + this.animatableAttributes[i] + \"\\n\";\n\n\t\t\tif (this.uvDependencies > 0 && !this.usesUVTransform)\n\t\t\t\tthis._animationVertexCode += \"mov \" + this.uvTarget + \",\" + this.uvSource + \"\\n\";\n\t\t}\n\t}\n}\n\nexport = ShaderBase;",
    "import RegisterPool\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/RegisterPool\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\n/**\n * ShaderRegister Cache provides the usage management system for all registers during shading compilers.\n */\nclass ShaderRegisterCache\n{\n\tprivate _fragmentTempCache:RegisterPool;\n\tprivate _vertexTempCache:RegisterPool;\n\tprivate _varyingCache:RegisterPool;\n\tprivate _fragmentConstantsCache:RegisterPool;\n\tprivate _vertexConstantsCache:RegisterPool;\n\tprivate _textureCache:RegisterPool;\n\tprivate _vertexAttributesCache:RegisterPool;\n\tprivate _vertexConstantOffset:number; //TODO: check if this should be initialised to 0\n\tprivate _vertexAttributesOffset:number;//TODO: check if this should be initialised to 0\n\tprivate _varyingsOffset:number;//TODO: check if this should be initialised to 0\n\tprivate _fragmentConstantOffset:number;//TODO: check if this should be initialised to 0\n\n\tprivate _fragmentOutputRegister:ShaderRegisterElement;\n\tprivate _vertexOutputRegister:ShaderRegisterElement;\n\tprivate _numUsedVertexConstants:number = 0;\n\tprivate _numUsedFragmentConstants:number = 0;\n\tprivate _numUsedStreams:number = 0;\n\tprivate _numUsedTextures:number = 0;\n\tprivate _numUsedVaryings:number = 0;\n\tprivate _profile:string;\n\n\t/**\n\t * Create a new ShaderRegisterCache object.\n\t *\n\t * @param profile The compatibility profile used by the renderer.\n\t */\n\tconstructor(profile:string)\n\t{\n\t\tthis._profile = profile;\n\t}\n\n\t/**\n\t * Resets all registers.\n\t */\n\tpublic reset()\n\t{\n\t\tthis._fragmentTempCache = new RegisterPool(\"ft\", 8, false);\n\t\tthis._vertexTempCache = new RegisterPool(\"vt\", 8, false);\n\t\tthis._varyingCache = new RegisterPool(\"v\", 8);\n\t\tthis._textureCache = new RegisterPool(\"fs\", 8);\n\t\tthis._vertexAttributesCache = new RegisterPool(\"va\", 8);\n\t\tthis._fragmentConstantsCache = new RegisterPool(\"fc\", 28);\n\t\tthis._vertexConstantsCache = new RegisterPool(\"vc\", 128);\n\t\tthis._fragmentOutputRegister = new ShaderRegisterElement(\"oc\", -1);\n\t\tthis._vertexOutputRegister = new ShaderRegisterElement(\"op\", -1);\n\t\tthis._numUsedVertexConstants = 0;\n\t\tthis._numUsedStreams = 0;\n\t\tthis._numUsedTextures = 0;\n\t\tthis._numUsedVaryings = 0;\n\t\tthis._numUsedFragmentConstants = 0;\n\n\t\tvar i:number;\n\n\t\tfor (i = 0; i < this._vertexAttributesOffset; ++i)\n\t\t\tthis.getFreeVertexAttribute();\n\n\t\tfor (i = 0; i < this._vertexConstantOffset; ++i)\n\t\t\tthis.getFreeVertexConstant();\n\n\t\tfor (i = 0; i < this._varyingsOffset; ++i)\n\t\t\tthis.getFreeVarying();\n\n\t\tfor (i = 0; i < this._fragmentConstantOffset; ++i)\n\t\t\tthis.getFreeFragmentConstant();\n\t}\n\n\t/**\n\t * Disposes all resources used.\n\t */\n\tpublic dispose()\n\t{\n\t\tthis._fragmentTempCache.dispose();\n\t\tthis._vertexTempCache.dispose();\n\t\tthis._varyingCache.dispose();\n\t\tthis._fragmentConstantsCache.dispose();\n\t\tthis._vertexAttributesCache.dispose();\n\n\t\tthis._fragmentTempCache = null;\n\t\tthis._vertexTempCache = null;\n\t\tthis._varyingCache = null;\n\t\tthis._fragmentConstantsCache = null;\n\t\tthis._vertexAttributesCache = null;\n\t\tthis._fragmentOutputRegister = null;\n\t\tthis._vertexOutputRegister = null;\n\t}\n\n\t/**\n\t * Marks a fragment temporary register as used, so it cannot be retrieved. The register won't be able to be used until removeUsage\n\t * has been called usageCount times again.\n\t * @param register The register to mark as used.\n\t * @param usageCount The amount of usages to add.\n\t */\n\tpublic addFragmentTempUsages(register:ShaderRegisterElement, usageCount:number)\n\t{\n\t\tthis._fragmentTempCache.addUsage(register, usageCount);\n\t}\n\n\t/**\n\t * Removes a usage from a fragment temporary register. When usages reach 0, the register is freed again.\n\t * @param register The register for which to remove a usage.\n\t */\n\tpublic removeFragmentTempUsage(register:ShaderRegisterElement)\n\t{\n\t\tthis._fragmentTempCache.removeUsage(register);\n\t}\n\n\t/**\n\t * Marks a vertex temporary register as used, so it cannot be retrieved. The register won't be able to be used\n\t * until removeUsage has been called usageCount times again.\n\t * @param register The register to mark as used.\n\t * @param usageCount The amount of usages to add.\n\t */\n\tpublic addVertexTempUsages(register:ShaderRegisterElement, usageCount:number)\n\t{\n\t\tthis._vertexTempCache.addUsage(register, usageCount);\n\t}\n\n\t/**\n\t * Removes a usage from a vertex temporary register. When usages reach 0, the register is freed again.\n\t * @param register The register for which to remove a usage.\n\t */\n\tpublic removeVertexTempUsage(register:ShaderRegisterElement)\n\t{\n\t\tthis._vertexTempCache.removeUsage(register);\n\t}\n\n\t/**\n\t * Retrieve an entire fragment temporary register that's still available. The register won't be able to be used until removeUsage\n\t * has been called usageCount times again.\n\t */\n\tpublic getFreeFragmentVectorTemp():ShaderRegisterElement\n\t{\n\t\treturn this._fragmentTempCache.requestFreeVectorReg();\n\t}\n\n\t/**\n\t * Retrieve a single component from a fragment temporary register that's still available.\n\t */\n\tpublic getFreeFragmentSingleTemp():ShaderRegisterElement\n\t{\n\t\treturn this._fragmentTempCache.requestFreeRegComponent();\n\t}\n\n\t/**\n\t * Retrieve an available varying register\n\t */\n\tpublic getFreeVarying():ShaderRegisterElement\n\t{\n\t\t++this._numUsedVaryings;\n\t\treturn this._varyingCache.requestFreeVectorReg();\n\t}\n\n\t/**\n\t * Retrieve an available fragment constant register\n\t */\n\tpublic getFreeFragmentConstant():ShaderRegisterElement\n\t{\n\t\t++this._numUsedFragmentConstants;\n\t\treturn this._fragmentConstantsCache.requestFreeVectorReg();\n\t}\n\n\t/**\n\t * Retrieve an available vertex constant register\n\t */\n\tpublic getFreeVertexConstant():ShaderRegisterElement\n\t{\n\t\t++this._numUsedVertexConstants;\n\t\treturn this._vertexConstantsCache.requestFreeVectorReg();\n\t}\n\n\t/**\n\t * Retrieve an entire vertex temporary register that's still available.\n\t */\n\tpublic getFreeVertexVectorTemp():ShaderRegisterElement\n\t{\n\t\treturn this._vertexTempCache.requestFreeVectorReg();\n\t}\n\n\t/**\n\t * Retrieve a single component from a vertex temporary register that's still available.\n\t */\n\tpublic getFreeVertexSingleTemp():ShaderRegisterElement\n\t{\n\t\treturn this._vertexTempCache.requestFreeRegComponent();\n\t}\n\n\t/**\n\t * Retrieve an available vertex attribute register\n\t */\n\tpublic getFreeVertexAttribute():ShaderRegisterElement\n\t{\n\t\t++this._numUsedStreams;\n\t\treturn this._vertexAttributesCache.requestFreeVectorReg();\n\t}\n\n\t/**\n\t * Retrieve an available texture register\n\t */\n\tpublic getFreeTextureReg():ShaderRegisterElement\n\t{\n\t\t++this._numUsedTextures;\n\t\treturn this._textureCache.requestFreeVectorReg();\n\t}\n\n\t/**\n\t * Indicates the start index from which to retrieve vertex constants.\n\t */\n\tpublic get vertexConstantOffset():number\n\t{\n\t\treturn this._vertexConstantOffset;\n\t}\n\n\tpublic set vertexConstantOffset(vertexConstantOffset:number)\n\t{\n\t\tthis._vertexConstantOffset = vertexConstantOffset;\n\t}\n\n\t/**\n\t * Indicates the start index from which to retrieve vertex attributes.\n\t */\n\tpublic get vertexAttributesOffset():number\n\t{\n\t\treturn this._vertexAttributesOffset;\n\t}\n\n\tpublic set vertexAttributesOffset(value:number)\n\t{\n\t\tthis._vertexAttributesOffset = value;\n\t}\n\n\t/**\n\t * Indicates the start index from which to retrieve varying registers.\n\t */\n\tpublic get varyingsOffset():number\n\t{\n\t\treturn this._varyingsOffset;\n\t}\n\n\tpublic set varyingsOffset(value:number)\n\t{\n\t\tthis._varyingsOffset = value;\n\t}\n\n\t/**\n\t * Indicates the start index from which to retrieve fragment constants.\n\t */\n\tpublic get fragmentConstantOffset():number\n\t{\n\t\treturn this._fragmentConstantOffset;\n\t}\n\n\tpublic set fragmentConstantOffset(value:number)\n\t{\n\t\tthis._fragmentConstantOffset = value;\n\t}\n\n\t/**\n\t * The fragment output register.\n\t */\n\tpublic get fragmentOutputRegister():ShaderRegisterElement\n\t{\n\t\treturn this._fragmentOutputRegister;\n\t}\n\n\t/**\n\t * The amount of used vertex constant registers.\n\t */\n\tpublic get numUsedVertexConstants():number\n\t{\n\t\treturn this._numUsedVertexConstants;\n\t}\n\n\t/**\n\t * The amount of used fragment constant registers.\n\t */\n\tpublic get numUsedFragmentConstants():number\n\t{\n\t\treturn this._numUsedFragmentConstants;\n\t}\n\n\t/**\n\t * The amount of used vertex streams.\n\t */\n\tpublic get numUsedStreams():number\n\t{\n\t\treturn this._numUsedStreams;\n\t}\n\n\t/**\n\t * The amount of used texture slots.\n\t */\n\tpublic get numUsedTextures():number\n\t{\n\t\treturn this._numUsedTextures;\n\t}\n\n\t/**\n\t * The amount of used varying registers.\n\t */\n\tpublic get numUsedVaryings():number\n\t{\n\t\treturn this._numUsedVaryings;\n\t}\n}\n\nexport = ShaderRegisterCache;",
    "import ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\n/**\n * ShaderRegisterData contains the \"named\" registers, generated by the compiler and to be passed on to the methods.\n */\nclass ShaderRegisterData\n{\n\tpublic normalVarying:ShaderRegisterElement;\n\tpublic colorVarying:ShaderRegisterElement;\n\tpublic tangentVarying:ShaderRegisterElement;\n\tpublic bitangentVarying:ShaderRegisterElement;\n\tpublic uvVarying:ShaderRegisterElement;\n\tpublic secondaryUVVarying:ShaderRegisterElement;\n\tpublic viewDirVarying:ShaderRegisterElement;\n\tpublic shadowTarget:ShaderRegisterElement;\n\tpublic shadedTarget:ShaderRegisterElement;\n\tpublic globalPositionVertex:ShaderRegisterElement;\n\tpublic globalPositionVarying:ShaderRegisterElement;\n    public localPositionVarying:ShaderRegisterElement;\n\tpublic localPosition:ShaderRegisterElement;\n\tpublic normalInput:ShaderRegisterElement;\n\tpublic colorInput:ShaderRegisterElement;\n\tpublic tangentInput:ShaderRegisterElement;\n\tpublic animatedNormal:ShaderRegisterElement;\n\tpublic animatedTangent:ShaderRegisterElement;\n\tpublic commons:ShaderRegisterElement;\n\tpublic projectionFragment:ShaderRegisterElement;\n\tpublic normalFragment:ShaderRegisterElement;\n\tpublic viewDirFragment:ShaderRegisterElement;\n\tpublic bitangent:ShaderRegisterElement;\n\tpublic textures:Array<ShaderRegisterElement> = Array<ShaderRegisterElement>();\n\n\tconstructor()\n\t{\n\n\t}\n}\n\nexport = ShaderRegisterData;",
    "/**\n * A single register element (an entire register or a single register's component) used by the RegisterPool.\n */\nclass ShaderRegisterElement\n{\n\tprivate _regName:string;\n\tprivate _index:number;\n\tprivate _toStr:string;\n\n\tprivate static COMPONENTS = [\"x\", \"y\", \"z\", \"w\"];\n\n\tpublic _component:number;\n\n\t/**\n\t * Creates a new ShaderRegisterElement object.\n\t *\n\t * @param regName The name of the register.\n\t * @param index The index of the register.\n\t * @param component The register's component, if not the entire register is represented.\n\t */\n\tconstructor(regName:string, index:number, component:number = -1)\n\t{\n\t\tthis._component = component;\n\t\tthis._regName = regName;\n\t\tthis._index = index;\n\n\t\tthis._toStr = this._regName;\n\n\t\tif (this._index >= 0)\n\t\t\tthis._toStr += this._index;\n\n\t\tif (component > -1)\n\t\t\tthis._toStr += \".\" + ShaderRegisterElement.COMPONENTS[component];\n\t}\n\n\t/**\n\t * Converts the register or the components AGAL string representation.\n\t */\n\tpublic toString():string\n\t{\n\t\treturn this._toStr;\n\t}\n\n\t/**\n\t * The register's name.\n\t */\n\tpublic get regName():string\n\t{\n\t\treturn this._regName;\n\t}\n\n\t/**\n\t * The register's index.\n\t */\n\tpublic get index():number\n\t{\n\t\treturn this._index;\n\t}\n}\n\nexport = ShaderRegisterElement;",
    "import RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport IPass\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/IPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\n\n/**\n * CompilerBase is an abstract base class for shader compilers that use modular shader methods to assemble a\n * material. Concrete subclasses are used by the default materials.\n *\n * @see away.materials.ShadingMethodBase\n */\nclass CompilerBase\n{\n\tpublic _pShader:ShaderBase;\n\tpublic _pSharedRegisters:ShaderRegisterData;\n\tpublic _pRegisterCache:ShaderRegisterCache;\n\tpublic _pRenderableClass:IRenderableClass;\n\tpublic _pRenderPass:IPass;\n\n\tpublic _pVertexCode:string = ''; // Changed to emtpy string- AwayTS\n\tpublic _pFragmentCode:string = '';// Changed to emtpy string - AwayTS\n\tpublic _pPostAnimationFragmentCode:string = '';// Changed to emtpy string - AwayTS\n\n\t//The attributes that need to be animated by animators.\n\tpublic _pAnimatableAttributes:Array<string>;\n\n\t//The target registers for animated properties, written to by the animators.\n\tpublic _pAnimationTargetRegisters:Array<string>;\n\n\t//The target register to place the animated UV coordinate.\n\tprivate _uvTarget:string;\n\n\t//The souce register providing the UV coordinate to animate.\n\tprivate _uvSource:string;\n\n\t/**\n\t * Creates a new CompilerBase object.\n\t * @param profile The compatibility profile of the renderer.\n\t */\n\tconstructor(renderableClass:IRenderableClass, pass:IPass, shader:ShaderBase)\n\t{\n\t\tthis._pRenderableClass = renderableClass;\n\t\tthis._pRenderPass = pass;\n\t\tthis._pShader = shader;\n\n\t\tthis._pSharedRegisters = new ShaderRegisterData();\n\n\t\tthis._pRegisterCache = new ShaderRegisterCache(shader.profile);\n\t\tthis._pRegisterCache.vertexAttributesOffset = renderableClass.vertexAttributesOffset;\n\t\tthis._pRegisterCache.reset();\n\t}\n\n\t/**\n\t * Compiles the code after all setup on the compiler has finished.\n\t */\n\tpublic compile()\n\t{\n\t\tthis._pShader.reset();\n\n\t\tthis._pShader._iIncludeDependencies();\n\n\t\tthis.pInitRegisterIndices();\n\n\t\tthis.pCompileDependencies();\n\n\t\t//compile custom vertex & fragment codes\n\t\tthis._pVertexCode += this._pRenderPass._iGetVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\t\tthis._pPostAnimationFragmentCode += this._pRenderPass._iGetFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\n\t\tif (this._pShader.usesColorTransform)\n\t\t\tthis.compileColorTransformCode();\n\t\telse\n\t\t\tthis._pShader.colorTransformIndex = -1;\n\n\t\t//assign the final output color to the output register\n\t\tthis._pPostAnimationFragmentCode += \"mov \" + this._pRegisterCache.fragmentOutputRegister + \", \" + this._pSharedRegisters.shadedTarget + \"\\n\";\n\t\tthis._pRegisterCache.removeFragmentTempUsage(this._pSharedRegisters.shadedTarget);\n\n\t\t//initialise the required shader constants\n\t\tthis._pShader.initConstantData(this._pRegisterCache, this._pAnimatableAttributes, this._pAnimationTargetRegisters, this._uvSource, this._uvTarget);\n\t\tthis._pRenderPass._iInitConstantData(this._pShader);\n\t}\n\t/**\n\t * Calculate the transformed colours\n\t */\n\tprivate compileColorTransformCode()\n\t{\n\t\t// rm, gm, bm, am - multiplier\n\t\t// ro, go, bo, ao - offset\n\t\tvar ct1:ShaderRegisterElement = this._pRegisterCache.getFreeFragmentConstant();\n\t\tvar ct2:ShaderRegisterElement = this._pRegisterCache.getFreeFragmentConstant();\n\t\tthis._pShader.colorTransformIndex = ct1.index*4;\n\t\tthis._pPostAnimationFragmentCode += \"mul \" + this._pSharedRegisters.shadedTarget + \", \" + this._pSharedRegisters.shadedTarget + \", \" + ct1 + \"\\n\";\n\t\tthis._pPostAnimationFragmentCode += \"add \" + this._pSharedRegisters.shadedTarget + \", \" + this._pSharedRegisters.shadedTarget + \", \" + ct2 + \"\\n\";\n\t}\n\t/**\n\t * Compile the code for the methods.\n\t */\n\tpublic pCompileDependencies()\n\t{\n\t\tthis._pSharedRegisters.shadedTarget = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadedTarget, 1);\n\n\t\t//compile the world-space position if required\n\t\tif (this._pShader.globalPosDependencies > 0)\n\t\t\tthis.compileGlobalPositionCode();\n\n        //compile the local-space position if required\n        if (this._pShader.usesLocalPosFragment)\n            this.compileLocalPositionCode();\n\n\t\t//Calculate the (possibly animated) UV coordinates.\n\t\tif (this._pShader.uvDependencies > 0)\n\t\t\tthis.compileUVCode();\n\n\t\tif (this._pShader.secondaryUVDependencies > 0)\n\t\t\tthis.compileSecondaryUVCode();\n\n\t\tif (this._pShader.normalDependencies > 0)\n\t\t\tthis.compileNormalCode();\n\n\t\tif (this._pShader.viewDirDependencies > 0)\n\t\t\tthis.compileViewDirCode();\n\n\t\t//collect code from material\n\t\tthis._pVertexCode += this._pRenderableClass._iGetVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\t\tthis._pFragmentCode += this._pRenderableClass._iGetFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\n\t\t//collect code from pass\n\t\tthis._pVertexCode += this._pRenderPass._iGetPreLightingVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\t\tthis._pFragmentCode += this._pRenderPass._iGetPreLightingFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\t}\n\n\tprivate compileGlobalPositionCode()\n\t{\n\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.globalPositionVertex = this._pRegisterCache.getFreeVertexVectorTemp(), this._pShader.globalPosDependencies);\n\n\t\tvar sceneMatrixReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\n\t\tthis._pRegisterCache.getFreeVertexConstant();\n\t\tthis._pRegisterCache.getFreeVertexConstant();\n\t\tthis._pRegisterCache.getFreeVertexConstant();\n\n\t\tthis._pShader.sceneMatrixIndex = sceneMatrixReg.index*4;\n\n\t\tthis._pVertexCode += \"m44 \" + this._pSharedRegisters.globalPositionVertex + \", \" + this._pSharedRegisters.localPosition + \", \" + sceneMatrixReg + \"\\n\";\n\n\t\tif (this._pShader.usesGlobalPosFragment) {\n\t\t\tthis._pSharedRegisters.globalPositionVarying = this._pRegisterCache.getFreeVarying();\n\t\t\tthis._pVertexCode += \"mov \" + this._pSharedRegisters.globalPositionVarying + \", \" + this._pSharedRegisters.globalPositionVertex + \"\\n\";\n\t\t}\n\t}\n    private compileLocalPositionCode()\n    {\n        this._pSharedRegisters.localPositionVarying = this._pRegisterCache.getFreeVarying();\n        this._pVertexCode += \"mov \" + this._pSharedRegisters.localPositionVarying + \", \" + this._pSharedRegisters.localPosition + \"\\n\";\n    }\n\t/**\n\t * Calculate the (possibly animated) UV coordinates.\n\t */\n\tprivate compileUVCode()\n\t{\n\t\tvar uvAttributeReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexAttribute();\n\t\tthis._pShader.uvBufferIndex = uvAttributeReg.index;\n\n\t\tvar varying:ShaderRegisterElement = this._pSharedRegisters.uvVarying = this._pRegisterCache.getFreeVarying();\n\n\t\tif (this._pShader.usesUVTransform) {\n\t\t\t// a, b, 0, tx\n\t\t\t// c, d, 0, ty\n\t\t\tvar uvTransform1:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\n\t\t\tvar uvTransform2:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\n\t\t\tthis._pShader.uvTransformIndex = uvTransform1.index*4;\n\n\t\t\tthis._pVertexCode += \"dp4 \" + varying + \".x, \" + uvAttributeReg + \", \" + uvTransform1 + \"\\n\" +\n\t\t\t\t\t\t\t\t \"dp4 \" + varying + \".y, \" + uvAttributeReg + \", \" + uvTransform2 + \"\\n\" +\n\t\t\t\t\t\t\t\t \"mov \" + varying + \".zw, \" + uvAttributeReg + \".zw \\n\";\n\t\t} else {\n\t\t\tthis._pShader.uvTransformIndex = -1;\n\t\t\tthis._uvTarget = varying.toString();\n\t\t\tthis._uvSource = uvAttributeReg.toString();\n\t\t}\n\t}\n\n\t/**\n\t * Provide the secondary UV coordinates.\n\t */\n\tprivate compileSecondaryUVCode()\n\t{\n\t\tvar uvAttributeReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexAttribute();\n\t\tthis._pShader.secondaryUVBufferIndex = uvAttributeReg.index;\n\t\tthis._pSharedRegisters.secondaryUVVarying = this._pRegisterCache.getFreeVarying();\n\t\tthis._pVertexCode += \"mov \" + this._pSharedRegisters.secondaryUVVarying + \", \" + uvAttributeReg + \"\\n\";\n\t}\n\n\t/**\n\t * Calculate the view direction.\n\t */\n\tpublic compileViewDirCode()\n\t{\n\t\tvar cameraPositionReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\n\t\tthis._pSharedRegisters.viewDirVarying = this._pRegisterCache.getFreeVarying();\n\t\tthis._pSharedRegisters.viewDirFragment = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.viewDirFragment, this._pShader.viewDirDependencies);\n\n\t\tthis._pShader.cameraPositionIndex = cameraPositionReg.index*4;\n\n\t\tif (this._pShader.usesTangentSpace) {\n\t\t\tvar temp:ShaderRegisterElement = this._pRegisterCache.getFreeVertexVectorTemp();\n\t\t\tthis._pVertexCode += \"sub \" + temp + \", \" + cameraPositionReg + \", \" + this._pSharedRegisters.localPosition + \"\\n\" +\n\t\t\t\t\"m33 \" + this._pSharedRegisters.viewDirVarying + \".xyz, \" + temp + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\n\t\t\t\t\"mov \" + this._pSharedRegisters.viewDirVarying + \".w, \" + this._pSharedRegisters.localPosition + \".w\\n\";\n\t\t} else {\n\t\t\tthis._pVertexCode += \"sub \" + this._pSharedRegisters.viewDirVarying + \", \" + cameraPositionReg + \", \" + this._pSharedRegisters.globalPositionVertex + \"\\n\";\n\t\t\tthis._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.globalPositionVertex);\n\t\t}\n\n\t\t//TODO is this required in all cases? (re: distancemappass)\n\t\tthis._pFragmentCode += \"nrm \" + this._pSharedRegisters.viewDirFragment + \".xyz, \" + this._pSharedRegisters.viewDirVarying + \"\\n\" +\n\t\t\t\"mov \" + this._pSharedRegisters.viewDirFragment + \".w,   \" + this._pSharedRegisters.viewDirVarying + \".w\\n\";\n\t}\n\n\t/**\n\t * Calculate the normal.\n\t */\n\tpublic compileNormalCode()\n\t{\n\t\tthis._pSharedRegisters.normalFragment = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.normalFragment, this._pShader.normalDependencies);\n\n\t\t//simple normal aquisition if no tangent space is being used\n\t\tif (this._pShader.outputsNormals && !this._pShader.outputsTangentNormals) {\n\t\t\tthis._pVertexCode += this._pRenderPass._iGetNormalVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\t\t\tthis._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar normalMatrix:Array<ShaderRegisterElement>;\n\n\t\tif (!this._pShader.outputsNormals || !this._pShader.usesTangentSpace) {\n\t\t\tnormalMatrix = new Array<ShaderRegisterElement>(3);\n\t\t\tnormalMatrix[0] = this._pRegisterCache.getFreeVertexConstant();\n\t\t\tnormalMatrix[1] = this._pRegisterCache.getFreeVertexConstant();\n\t\t\tnormalMatrix[2] = this._pRegisterCache.getFreeVertexConstant();\n\n\t\t\tthis._pRegisterCache.getFreeVertexConstant();\n\n\t\t\tthis._pShader.sceneNormalMatrixIndex = normalMatrix[0].index*4;\n\n\t\t\tthis._pSharedRegisters.normalVarying = this._pRegisterCache.getFreeVarying();\n\t\t}\n\n\t\tif (this._pShader.outputsNormals) {\n\t\t\tif (this._pShader.usesTangentSpace) {\n\t\t\t\t// normalize normal + tangent vector and generate (approximated) bitangent used in m33 operation for view\n\t\t\t\tthis._pVertexCode += \"nrm \" + this._pSharedRegisters.animatedNormal + \".xyz, \" + this._pSharedRegisters.animatedNormal + \"\\n\" +\n\t\t\t\t\t\"nrm \" + this._pSharedRegisters.animatedTangent + \".xyz, \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\n\t\t\t\t\t\"crs \" + this._pSharedRegisters.bitangent + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\";\n\n\t\t\t\tthis._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\n\t\t\t} else {\n\t\t\t\t//Compiles the vertex shader code for tangent-space normal maps.\n\t\t\t\tthis._pSharedRegisters.tangentVarying = this._pRegisterCache.getFreeVarying();\n\t\t\t\tthis._pSharedRegisters.bitangentVarying = this._pRegisterCache.getFreeVarying();\n\t\t\t\tvar temp:ShaderRegisterElement = this._pRegisterCache.getFreeVertexVectorTemp();\n\n\t\t\t\tthis._pVertexCode += \"m33 \" + temp + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + normalMatrix[0] + \"\\n\" +\n\t\t\t\t\t\"nrm \" + this._pSharedRegisters.animatedNormal + \".xyz, \" + temp + \"\\n\" +\n\t\t\t\t\t\"m33 \" + temp + \".xyz, \" + this._pSharedRegisters.animatedTangent + \", \" + normalMatrix[0] + \"\\n\" +\n\t\t\t\t\t\"nrm \" + this._pSharedRegisters.animatedTangent + \".xyz, \" + temp + \"\\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".x, \" + this._pSharedRegisters.animatedTangent + \".x  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".z, \" + this._pSharedRegisters.animatedNormal + \".x  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".w, \" + this._pSharedRegisters.normalInput + \".w  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".x, \" + this._pSharedRegisters.animatedTangent + \".y  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".z, \" + this._pSharedRegisters.animatedNormal + \".y  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".w, \" + this._pSharedRegisters.normalInput + \".w  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".x, \" + this._pSharedRegisters.animatedTangent + \".z  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".z, \" + this._pSharedRegisters.animatedNormal + \".z  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".w, \" + this._pSharedRegisters.normalInput + \".w  \\n\" +\n\t\t\t\t\t\"crs \" + temp + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".y, \" + temp + \".x    \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".y, \" + temp + \".y  \\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".y, \" + temp + \".z    \\n\";\n\n\t\t\t\tthis._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedTangent);\n\n\t\t\t\t//Compiles the fragment shader code for tangent-space normal maps.\n\t\t\t\tvar t:ShaderRegisterElement;\n\t\t\t\tvar b:ShaderRegisterElement;\n\t\t\t\tvar n:ShaderRegisterElement;\n\n\t\t\t\tt = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\t\t\tthis._pRegisterCache.addFragmentTempUsages(t, 1);\n\t\t\t\tb = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\t\t\tthis._pRegisterCache.addFragmentTempUsages(b, 1);\n\t\t\t\tn = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\t\t\tthis._pRegisterCache.addFragmentTempUsages(n, 1);\n\n\t\t\t\tthis._pFragmentCode += \"nrm \" + t + \".xyz, \" + this._pSharedRegisters.tangentVarying + \"\\n\" +\n\t\t\t\t\t\"mov \" + t + \".w, \" + this._pSharedRegisters.tangentVarying + \".w\t\\n\" +\n\t\t\t\t\t\"nrm \" + b + \".xyz, \" + this._pSharedRegisters.bitangentVarying + \"\\n\" +\n\t\t\t\t\t\"nrm \" + n + \".xyz, \" + this._pSharedRegisters.normalVarying + \"\\n\";\n\n\t\t\t\t//compile custom fragment code for normal calcs\n\t\t\t\tthis._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters) +\n\t\t\t\t\t\"m33 \" + this._pSharedRegisters.normalFragment + \".xyz, \" + this._pSharedRegisters.normalFragment + \", \" + t + \"\\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalFragment + \".w, \" + this._pSharedRegisters.normalVarying + \".w\\n\";\n\n\t\t\t\tthis._pRegisterCache.removeFragmentTempUsage(b);\n\t\t\t\tthis._pRegisterCache.removeFragmentTempUsage(t);\n\t\t\t\tthis._pRegisterCache.removeFragmentTempUsage(n);\n\t\t\t}\n\t\t} else {\n\t\t\t// no output, world space is enough\n\t\t\tthis._pVertexCode += \"m33 \" + this._pSharedRegisters.normalVarying + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + normalMatrix[0] + \"\\n\" +\n\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".w, \" + this._pSharedRegisters.animatedNormal + \".w\\n\";\n\n\t\t\tthis._pFragmentCode += \"nrm \" + this._pSharedRegisters.normalFragment + \".xyz, \" + this._pSharedRegisters.normalVarying + \"\\n\" +\n\t\t\t\t\"mov \" + this._pSharedRegisters.normalFragment + \".w, \" + this._pSharedRegisters.normalVarying + \".w\\n\";\n\n\t\t\tif (this._pShader.tangentDependencies > 0) {\n\t\t\t\tthis._pSharedRegisters.tangentVarying = this._pRegisterCache.getFreeVarying();\n\n\t\t\t\tthis._pVertexCode += \"m33 \" + this._pSharedRegisters.tangentVarying + \".xyz, \" + this._pSharedRegisters.animatedTangent + \", \" + normalMatrix[0] + \"\\n\" +\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".w, \" + this._pSharedRegisters.animatedTangent + \".w\\n\";\n\t\t\t}\n\t\t}\n\n\t\tif (!this._pShader.usesTangentSpace)\n\t\t\tthis._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedNormal);\n\t}\n\n\t/**\n\t * Reset all the indices to \"unused\".\n\t */\n\tpublic pInitRegisterIndices()\n\t{\n\t\tthis._pShader.pInitRegisterIndices();\n\n\t\tthis._pAnimatableAttributes = new Array<string>(\"va0\");\n\t\tthis._pAnimationTargetRegisters = new Array<string>(\"vt0\");\n\t\tthis._pVertexCode = \"\";\n\t\tthis._pFragmentCode = \"\";\n\t\tthis._pPostAnimationFragmentCode = \"\";\n\n\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.localPosition = this._pRegisterCache.getFreeVertexVectorTemp(), 1);\n\n\t\t//create commonly shared constant registers\n\t\tif (this._pShader.usesCommonData || this._pShader.normalDependencies > 0) {\n\t\t\tthis._pSharedRegisters.commons = this._pRegisterCache.getFreeFragmentConstant();\n\t\t\tthis._pShader.commonsDataIndex = this._pSharedRegisters.commons.index*4;\n\t\t}\n\n\t\t//Creates the registers to contain the tangent data.\n\t\t// need to be created FIRST and in this order (for when using tangent space)\n\t\tif (this._pShader.tangentDependencies > 0 || this._pShader.outputsNormals) {\n\t\t\tthis._pSharedRegisters.tangentInput = this._pRegisterCache.getFreeVertexAttribute();\n\t\t\tthis._pShader.tangentBufferIndex = this._pSharedRegisters.tangentInput.index;\n\n\t\t\tthis._pSharedRegisters.animatedTangent = this._pRegisterCache.getFreeVertexVectorTemp();\n\t\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedTangent, 1);\n\n\t\t\tif (this._pShader.usesTangentSpace) {\n\t\t\t\tthis._pSharedRegisters.bitangent = this._pRegisterCache.getFreeVertexVectorTemp();\n\t\t\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.bitangent, 1);\n\t\t\t}\n\n\t\t\tthis._pAnimatableAttributes.push(this._pSharedRegisters.tangentInput.toString());\n\t\t\tthis._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedTangent.toString());\n\t\t}\n\n\t\tif (this._pShader.normalDependencies > 0) {\n\t\t\tthis._pSharedRegisters.normalInput = this._pRegisterCache.getFreeVertexAttribute();\n\t\t\tthis._pShader.normalBufferIndex = this._pSharedRegisters.normalInput.index;\n\n\t\t\tthis._pSharedRegisters.animatedNormal = this._pRegisterCache.getFreeVertexVectorTemp();\n\t\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedNormal, 1);\n\n\t\t\tthis._pAnimatableAttributes.push(this._pSharedRegisters.normalInput.toString());\n\t\t\tthis._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedNormal.toString());\n\t\t}\n\n\t\tif (this._pShader.colorDependencies > 0) {\n\t\t\tthis._pSharedRegisters.colorInput = this._pRegisterCache.getFreeVertexAttribute();\n\t\t\tthis._pShader.colorBufferIndex = this._pSharedRegisters.colorInput.index;\n\n\t\t\tthis._pSharedRegisters.colorVarying = this._pRegisterCache.getFreeVarying();\n\t\t\tthis._pVertexCode += \"mov \" + this._pSharedRegisters.colorVarying + \", \" + this._pSharedRegisters.colorInput + \"\\n\";\n\t\t}\n\t}\n\n\t/**\n\t * Disposes all resources used by the compiler.\n\t */\n\tpublic dispose()\n\t{\n\t\tthis._pRegisterCache.dispose();\n\t\tthis._pRegisterCache = null;\n\t\tthis._pSharedRegisters = null;\n\t}\n\n\t/**\n\t * The generated vertex code.\n\t */\n\tpublic get vertexCode():string\n\t{\n\t\treturn this._pVertexCode;\n\t}\n\n\t/**\n\t * The generated fragment code.\n\t */\n\tpublic get fragmentCode():string\n\t{\n\t\treturn this._pFragmentCode;\n\t}\n\n\t/**\n\t * The generated fragment code.\n\t */\n\tpublic get postAnimationFragmentCode():string\n\t{\n\t\treturn this._pPostAnimationFragmentCode;\n\t}\n\n\t/**\n\t * The register name containing the final shaded colour.\n\t */\n\tpublic get shadedTarget():string\n\t{\n\t\treturn this._pSharedRegisters.shadedTarget.toString();\n\t}\n}\n\nexport = CompilerBase;",
    "import ContextGLProfile\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProfile\");\n\nimport LightingShader\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/LightingShader\");\nimport CompilerBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/compilers/CompilerBase\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport ILightingPass\t\t\t\t= require(\"awayjs-renderergl/lib/render/passes/ILightingPass\");\nimport IRenderableClass\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/IRenderableClass\");\n\n/**\n * CompilerBase is an abstract base class for shader compilers that use modular shader methods to assemble a\n * material. Concrete subclasses are used by the default materials.\n *\n * @see away.materials.ShadingMethodBase\n */\nclass LightingCompiler extends CompilerBase\n{\n\tprivate _shaderLightingObject:LightingShader;\n\tprivate _lightingPass:ILightingPass;\n\tpublic _pointLightFragmentConstants:Array<ShaderRegisterElement>;\n\tpublic _pointLightVertexConstants:Array<ShaderRegisterElement>;\n\tpublic _dirLightFragmentConstants:Array<ShaderRegisterElement>;\n\tpublic _dirLightVertexConstants:Array<ShaderRegisterElement>;\n\n\tpublic _pNumProbeRegisters:number;\n\n\t/**\n\t * Creates a new CompilerBase object.\n\t * @param profile The compatibility profile of the renderer.\n\t */\n\tconstructor(renderableClass:IRenderableClass, lightingPass:ILightingPass, shaderLightingObject:LightingShader)\n\t{\n\t\tsuper(renderableClass, lightingPass, shaderLightingObject);\n\n\t\tthis._shaderLightingObject = shaderLightingObject;\n\t\tthis._lightingPass = lightingPass;\n\t}\n\n\t/**\n\t * Compile the code for the methods.\n\t */\n\tpublic pCompileDependencies()\n\t{\n\t\tsuper.pCompileDependencies();\n\n\t\t//compile the lighting code\n\t\tif (this._shaderLightingObject.usesShadows)\n\t\t\tthis.pCompileShadowCode();\n\n\t\tif (this._shaderLightingObject.usesLights) {\n\t\t\tthis.initLightRegisters();\n\t\t\tthis.compileLightCode();\n\t\t}\n\n\t\tif (this._shaderLightingObject.usesProbes)\n\t\t\tthis.compileLightProbeCode();\n\n\t\tthis._pVertexCode += this._lightingPass._iGetPostLightingVertexCode(this._shaderLightingObject, this._pRegisterCache, this._pSharedRegisters);\n\t\tthis._pFragmentCode += this._lightingPass._iGetPostLightingFragmentCode(this._shaderLightingObject, this._pRegisterCache, this._pSharedRegisters);\n\t}\n\n\t/**\n\t * Provides the code to provide shadow mapping.\n\t */\n\tpublic pCompileShadowCode()\n\t{\n\t\tif (this._shaderLightingObject.normalDependencies > 0) {\n\t\t\tthis._pSharedRegisters.shadowTarget = this._pSharedRegisters.normalFragment;\n\t\t} else {\n\t\t\tthis._pSharedRegisters.shadowTarget = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadowTarget, 1);\n\t\t}\n\t}\n\n\t/**\n\t * Initializes constant registers to contain light data.\n\t */\n\tprivate initLightRegisters()\n\t{\n\t\t// init these first so we're sure they're in sequence\n\t\tvar i:number, len:number;\n\n\t\tif (this._dirLightVertexConstants) {\n\t\t\tlen = this._dirLightVertexConstants.length;\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\tthis._dirLightVertexConstants[i] = this._pRegisterCache.getFreeVertexConstant();\n\n\t\t\t\tif (this._shaderLightingObject.lightVertexConstantIndex == -1)\n\t\t\t\t\tthis._shaderLightingObject.lightVertexConstantIndex = this._dirLightVertexConstants[i].index*4;\n\t\t\t}\n\t\t}\n\n\t\tif (this._pointLightVertexConstants) {\n\t\t\tlen = this._pointLightVertexConstants.length;\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\tthis._pointLightVertexConstants[i] = this._pRegisterCache.getFreeVertexConstant();\n\n\t\t\t\tif (this._shaderLightingObject.lightVertexConstantIndex == -1)\n\t\t\t\t\tthis._shaderLightingObject.lightVertexConstantIndex = this._pointLightVertexConstants[i].index*4;\n\t\t\t}\n\t\t}\n\n\t\tlen = this._dirLightFragmentConstants.length;\n\t\tfor (i = 0; i < len; ++i) {\n\t\t\tthis._dirLightFragmentConstants[i] = this._pRegisterCache.getFreeFragmentConstant();\n\n\t\t\tif (this._shaderLightingObject.lightFragmentConstantIndex == -1)\n\t\t\t\tthis._shaderLightingObject.lightFragmentConstantIndex = this._dirLightFragmentConstants[i].index*4;\n\t\t}\n\n\t\tlen = this._pointLightFragmentConstants.length;\n\t\tfor (i = 0; i < len; ++i) {\n\t\t\tthis._pointLightFragmentConstants[i] = this._pRegisterCache.getFreeFragmentConstant();\n\n\t\t\tif (this._shaderLightingObject.lightFragmentConstantIndex == -1)\n\t\t\t\tthis._shaderLightingObject.lightFragmentConstantIndex = this._pointLightFragmentConstants[i].index*4;\n\t\t}\n\t}\n\n\t/**\n\t * Compiles the shading code for directional and point lights.\n\t */\n\tprivate compileLightCode()\n\t{\n\t\tvar diffuseColorReg:ShaderRegisterElement;\n\t\tvar specularColorReg:ShaderRegisterElement;\n\t\tvar lightPosReg:ShaderRegisterElement;\n\t\tvar lightDirReg:ShaderRegisterElement;\n\t\tvar vertexRegIndex:number = 0;\n\t\tvar fragmentRegIndex:number = 0;\n\t\tvar addSpec:boolean = this._shaderLightingObject.usesLightsForSpecular;\n\t\tvar addDiff:boolean = this._shaderLightingObject.usesLightsForDiffuse;\n\n\t\t//compile the shading code for directional lights.\n\t\tfor (var i:number = 0; i < this._shaderLightingObject.numDirectionalLights; ++i) {\n\t\t\tif (this._shaderLightingObject.usesTangentSpace) {\n\t\t\t\tlightDirReg = this._dirLightVertexConstants[vertexRegIndex++];\n\n\t\t\t\tvar lightVarying:ShaderRegisterElement = this._pRegisterCache.getFreeVarying();\n\n\t\t\t\tthis._pVertexCode += \"m33 \" + lightVarying + \".xyz, \" + lightDirReg + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\n\t\t\t\t\t\"mov \" + lightVarying + \".w, \" + lightDirReg + \".w\\n\";\n\n\t\t\t\tlightDirReg = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\t\t\tthis._pRegisterCache.addVertexTempUsages(lightDirReg, 1);\n\n\t\t\t\tthis._pFragmentCode += \"nrm \" + lightDirReg + \".xyz, \" + lightVarying + \"\\n\" +\n\t\t\t\t\t\"mov \" + lightDirReg + \".w, \" + lightVarying + \".w\\n\";\n\n\t\t\t} else {\n\t\t\t\tlightDirReg = this._dirLightFragmentConstants[fragmentRegIndex++];\n\t\t\t}\n\n\t\t\tdiffuseColorReg = this._dirLightFragmentConstants[fragmentRegIndex++];\n\t\t\tspecularColorReg = this._dirLightFragmentConstants[fragmentRegIndex++];\n\n\t\t\tif (addDiff)\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject, lightDirReg, diffuseColorReg, this._pRegisterCache, this._pSharedRegisters);\n\n\t\t\tif (addSpec)\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject, lightDirReg, specularColorReg, this._pRegisterCache, this._pSharedRegisters);\n\n\t\t\tif (this._shaderLightingObject.usesTangentSpace)\n\t\t\t\tthis._pRegisterCache.removeVertexTempUsage(lightDirReg);\n\t\t}\n\n\t\tvertexRegIndex = 0;\n\t\tfragmentRegIndex = 0;\n\n\t\t//compile the shading code for point lights\n\t\tfor (var i:number = 0; i < this._shaderLightingObject.numPointLights; ++i) {\n\n\t\t\tif (this._shaderLightingObject.usesTangentSpace || !this._shaderLightingObject.usesGlobalPosFragment)\n\t\t\t\tlightPosReg = this._pointLightVertexConstants[vertexRegIndex++];\n\t\t\telse\n\t\t\t\tlightPosReg = this._pointLightFragmentConstants[fragmentRegIndex++];\n\n\t\t\tdiffuseColorReg = this._pointLightFragmentConstants[fragmentRegIndex++];\n\t\t\tspecularColorReg = this._pointLightFragmentConstants[fragmentRegIndex++];\n\n\t\t\tlightDirReg = this._pRegisterCache.getFreeFragmentVectorTemp();\n\t\t\tthis._pRegisterCache.addFragmentTempUsages(lightDirReg, 1);\n\n\t\t\tvar lightVarying:ShaderRegisterElement;\n\n\t\t\tif (this._shaderLightingObject.usesTangentSpace) {\n\t\t\t\tlightVarying = this._pRegisterCache.getFreeVarying();\n\t\t\t\tvar temp:ShaderRegisterElement = this._pRegisterCache.getFreeVertexVectorTemp();\n\t\t\t\tthis._pVertexCode += \"sub \" + temp + \", \" + lightPosReg + \", \" + this._pSharedRegisters.localPosition + \"\\n\" +\n\t\t\t\t\t\"m33 \" + lightVarying + \".xyz, \" + temp + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\n\t\t\t\t\t\"mov \" + lightVarying + \".w, \" + this._pSharedRegisters.localPosition + \".w\\n\";\n\t\t\t} else if (!this._shaderLightingObject.usesGlobalPosFragment) {\n\t\t\t\tlightVarying = this._pRegisterCache.getFreeVarying();\n\t\t\t\tthis._pVertexCode += \"sub \" + lightVarying + \", \" + lightPosReg + \", \" + this._pSharedRegisters.globalPositionVertex + \"\\n\";\n\t\t\t} else {\n\t\t\t\tlightVarying = lightDirReg;\n\t\t\t\tthis._pFragmentCode += \"sub \" + lightDirReg + \", \" + lightPosReg + \", \" + this._pSharedRegisters.globalPositionVarying + \"\\n\";\n\t\t\t}\n\n\t\t\tif (this._shaderLightingObject.usesLightFallOff) {\n\t\t\t\t// calculate attenuation\n\t\t\t\tthis._pFragmentCode += // attenuate\n\t\t\t\t\t\"dp3 \" + lightDirReg + \".w, \" + lightVarying + \", \" + lightVarying + \"\\n\" + // w = d - radius\n\t\t\t\t\t\"sub \" + lightDirReg + \".w, \" + lightDirReg + \".w, \" + diffuseColorReg + \".w\\n\" + // w = (d - radius)/(max-min)\n\t\t\t\t\t\"mul \" + lightDirReg + \".w, \" + lightDirReg + \".w, \" + specularColorReg + \".w\\n\" + // w = clamp(w, 0, 1)\n\t\t\t\t\t\"sat \" + lightDirReg + \".w, \" + lightDirReg + \".w\\n\" + // w = 1-w\n\t\t\t\t\t\"sub \" + lightDirReg + \".w, \" + this._pSharedRegisters.commons + \".w, \" + lightDirReg + \".w\\n\" + // normalize\n\t\t\t\t\t\"nrm \" + lightDirReg + \".xyz, \" + lightVarying + \"\\n\";\n\t\t\t} else {\n\t\t\t\tthis._pFragmentCode += \"nrm \" + lightDirReg + \".xyz, \" + lightVarying + \"\\n\" +\n\t\t\t\t\t\"mov \" + lightDirReg + \".w, \" + lightVarying + \".w\\n\";\n\t\t\t}\n\n\t\t\tif (this._shaderLightingObject.lightFragmentConstantIndex == -1)\n\t\t\t\tthis._shaderLightingObject.lightFragmentConstantIndex = lightPosReg.index*4;\n\n\t\t\tif (addDiff)\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject, lightDirReg, diffuseColorReg, this._pRegisterCache, this._pSharedRegisters);\n\n\t\t\tif (addSpec)\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject, lightDirReg, specularColorReg, this._pRegisterCache, this._pSharedRegisters);\n\n\t\t\tthis._pRegisterCache.removeFragmentTempUsage(lightDirReg);\n\t\t}\n\t}\n\n\t/**\n\t * Compiles shading code for light probes.\n\t */\n\tprivate compileLightProbeCode()\n\t{\n\t\tvar weightReg:string;\n\t\tvar weightComponents = [ \".x\", \".y\", \".z\", \".w\" ];\n\t\tvar weightRegisters:Array<ShaderRegisterElement> = new Array<ShaderRegisterElement>();\n\t\tvar i:number;\n\t\tvar texReg:ShaderRegisterElement;\n\t\tvar addSpec:boolean = this._shaderLightingObject.usesProbesForSpecular;\n\t\tvar addDiff:boolean = this._shaderLightingObject.usesProbesForDiffuse;\n\n\t\tif (addDiff)\n\t\t\tthis._shaderLightingObject.lightProbeDiffuseIndices = new Array<number>();\n\n\t\tif (addSpec)\n\t\t\tthis._shaderLightingObject.lightProbeSpecularIndices = new Array<number>();\n\n\t\tfor (i = 0; i < this._pNumProbeRegisters; ++i) {\n\t\t\tweightRegisters[i] = this._pRegisterCache.getFreeFragmentConstant();\n\n\t\t\tif (i == 0)\n\t\t\t\tthis._shaderLightingObject.probeWeightsIndex = weightRegisters[i].index*4;\n\t\t}\n\n\t\tfor (i = 0; i < this._shaderLightingObject.numLightProbes; ++i) {\n\t\t\tweightReg = weightRegisters[Math.floor(i/4)].toString() + weightComponents[i%4];\n\n\t\t\tif (addDiff) {\n\t\t\t\ttexReg = this._pRegisterCache.getFreeTextureReg();\n\t\t\t\tthis._shaderLightingObject.lightProbeDiffuseIndices[i] = texReg.index;\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerProbeDiffuseFragmentCode(this._shaderLightingObject, texReg, weightReg, this._pRegisterCache, this._pSharedRegisters);\n\t\t\t}\n\n\t\t\tif (addSpec) {\n\t\t\t\ttexReg = this._pRegisterCache.getFreeTextureReg();\n\t\t\t\tthis._shaderLightingObject.lightProbeSpecularIndices[i] = texReg.index;\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerProbeSpecularFragmentCode(this._shaderLightingObject, texReg, weightReg, this._pRegisterCache, this._pSharedRegisters);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Reset all the indices to \"unused\".\n\t */\n\tpublic pInitRegisterIndices()\n\t{\n\t\tsuper.pInitRegisterIndices();\n\n\t\tthis._shaderLightingObject.lightVertexConstantIndex = -1;\n\t\tthis._shaderLightingObject.lightFragmentConstantIndex = -1;\n\t\tthis._shaderLightingObject.probeWeightsIndex = -1;\n\n\t\tthis._pNumProbeRegisters = Math.ceil(this._shaderLightingObject.numLightProbes/4);\n\n\t\t//init light data\n\t\tif (this._shaderLightingObject.usesTangentSpace || !this._shaderLightingObject.usesGlobalPosFragment) {\n\t\t\tthis._pointLightVertexConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numPointLights);\n\t\t\tthis._pointLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numPointLights*2);\n\t\t} else {\n\t\t\tthis._pointLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numPointLights*3);\n\t\t}\n\n\t\tif (this._shaderLightingObject.usesTangentSpace) {\n\t\t\tthis._dirLightVertexConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numDirectionalLights);\n\t\t\tthis._dirLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numDirectionalLights*2);\n\t\t} else {\n\t\t\tthis._dirLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numDirectionalLights*3);\n\t\t}\n\t}\n}\n\nexport = LightingCompiler;",
    "import IEntitySorter\t\t\t\t= require(\"awayjs-renderergl/lib/sort/IEntitySorter\");\n\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n/**\n * @class away.sort.RenderableMergeSort\n */\nclass RenderableMergeSort implements IEntitySorter\n{\n\tpublic sortBlendedRenderables(head:RenderableBase):RenderableBase\n\t{\n\t\tvar headB:RenderableBase;\n\t\tvar fast:RenderableBase;\n\t\tvar slow:RenderableBase;\n\n\t\tif (!head || !head.next) {\n\t\t\treturn head;\n\t\t}\n\n\t\t// split in two sublists\n\t\tslow = head;\n\t\tfast = head.next;\n\n\t\twhile (fast) {\n\t\t\tfast = fast.next;\n\t\t\tif (fast) {\n\t\t\t\tslow = slow.next;\n\t\t\t\tfast = fast.next;\n\t\t\t}\n\t\t}\n\n\t\theadB = slow.next;\n\t\tslow.next = null;\n\n\t\t// recurse\n\t\thead = this.sortBlendedRenderables(head);\n\t\theadB = this.sortBlendedRenderables(headB);\n\n\t\t// merge sublists while respecting order\n\t\tvar result:RenderableBase;\n\t\tvar curr:RenderableBase;\n\t\tvar l:RenderableBase;\n\n\t\tif (!head)\n\t\t\treturn headB;\n\t\tif (!headB)\n\t\t\treturn head;\n\n\t\twhile (head && headB) {\n\t\t\tif (head.zIndex < headB.zIndex) {\n\t\t\t\tl = head;\n\t\t\t\thead = head.next;\n\t\t\t} else {\n\t\t\t\tl = headB;\n\t\t\t\theadB = headB.next;\n\t\t\t}\n\n\t\t\tif (!result)\n\t\t\t\tresult = l; else\n\t\t\t\tcurr.next = l;\n\n\t\t\tcurr = l;\n\t\t}\n\n\t\tif (head)\n\t\t\tcurr.next = head; else if (headB)\n\t\t\tcurr.next = headB;\n\n\t\treturn result;\n\t}\n\n\tpublic sortOpaqueRenderables(head:RenderableBase):RenderableBase\n\t{\n\t\tvar headB:RenderableBase;\n\t\tvar fast:RenderableBase, slow:RenderableBase;\n\n\t\tif (!head || !head.next) {\n\t\t\treturn head;\n\t\t}\n\n\t\t// split in two sublists\n\t\tslow = head;\n\t\tfast = head.next;\n\n\t\twhile (fast) {\n\t\t\tfast = fast.next;\n\t\t\tif (fast) {\n\t\t\t\tslow = slow.next;\n\t\t\t\tfast = fast.next;\n\t\t\t}\n\t\t}\n\n\t\theadB = slow.next;\n\t\tslow.next = null;\n\n\t\t// recurse\n\t\thead = this.sortOpaqueRenderables(head);\n\t\theadB = this.sortOpaqueRenderables(headB);\n\n\t\t// merge sublists while respecting order\n\t\tvar result:RenderableBase;\n\t\tvar curr:RenderableBase;\n\t\tvar l:RenderableBase;\n\t\tvar cmp:number = 0;\n\n\t\tif (!head)\n\t\t\treturn headB;\n\t\tif (!headB)\n\t\t\treturn head;\n\n\t\twhile (head && headB && head != null && headB != null) {\n\n\t\t\t// first sort per render order id (reduces program3D switches),\n\t\t\t// then on render object id (reduces setting props),\n\t\t\t// then on zIndex (reduces overdraw)\n\t\t\tvar aid:number = head.renderOrderId;\n\t\t\tvar bid:number = headB.renderOrderId;\n\n\t\t\tif (aid == bid) {\n\t\t\t\tvar ma:number = head.renderId;\n\t\t\t\tvar mb:number = headB.renderId;\n\n\t\t\t\tif (ma == mb) {\n\t\t\t\t\tif (head.zIndex < headB.zIndex)\n\t\t\t\t\t\tcmp = 1; else\n\t\t\t\t\t\tcmp = -1;\n\t\t\t\t} else if (ma > mb) {\n\t\t\t\t\tcmp = 1;\n\t\t\t\t} else {\n\t\t\t\t\tcmp = -1;\n\t\t\t\t}\n\t\t\t} else if (aid > bid) {\n\t\t\t\tcmp = 1;\n\t\t\t} else {\n\t\t\t\tcmp = -1;\n\t\t\t}\n\n\t\t\tif (cmp < 0) {\n\t\t\t\tl = head;\n\t\t\t\thead = head.next;\n\t\t\t} else {\n\t\t\t\tl = headB;\n\t\t\t\theadB = headB.next;\n\t\t\t}\n\n\t\t\tif (!result) {\n\t\t\t\tresult = l;\n\t\t\t\tcurr = l;\n\t\t\t} else {\n\t\t\t\tcurr.next = l;\n\t\t\t\tcurr = l;\n\t\t\t}\n\t\t}\n\n\t\tif (head)\n\t\t\tcurr.next = head; else if (headB)\n\t\t\tcurr.next = headB;\n\n\t\treturn result;\n\t}\n}\n\nexport = RenderableMergeSort;",
    "import IEntitySorter\t\t\t\t= require(\"awayjs-renderergl/lib/sort/IEntitySorter\");\n\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\n\n/**\n * @class away.sort.NullSort\n */\nclass RenderableNullSort implements IEntitySorter\n{\n\tpublic sortBlendedRenderables(head:RenderableBase):RenderableBase\n\t{\n\t\treturn head;\n\t}\n\n\tpublic sortOpaqueRenderables(head:RenderableBase):RenderableBase\n\t{\n\t\treturn head;\n\t}\n}\n\nexport = RenderableNullSort;",
    "import AttributesBuffer\t\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport Matrix3DUtils\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\n\nimport DisplayObjectContainer\t\t\t= require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\nimport Geometry\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/Geometry\");\nimport TriangleSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport Mesh\t\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport MaterialBase\t\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\n\n/**\n *  Class Merge merges two or more static meshes into one.<code>Merge</code>\n */\nclass Merge\n{\n\n\t//private const LIMIT:uint = 196605;\n\tprivate _objectSpace:boolean;\n\tprivate _keepMaterial:boolean;\n\tprivate _disposeSources:boolean;\n\tprivate _geomVOs:Array<GeometryVO>;\n\tprivate _toDispose:Array<Mesh>;\n\n\t/**\n\t * @param    keepMaterial    [optional]    Determines if the merged object uses the recevier mesh material information or keeps its source material(s). Defaults to false.\n\t * If false and receiver object has multiple materials, the last material found in receiver submeshes is applied to the merged submesh(es).\n\t * @param    disposeSources  [optional]    Determines if the mesh and geometry source(s) used for the merging are disposed. Defaults to false.\n\t * If true, only receiver geometry and resulting mesh are kept in  memory.\n\t * @param    objectSpace     [optional]    Determines if source mesh(es) is/are merged using objectSpace or worldspace. Defaults to false.\n\t */\n\tconstructor(keepMaterial:boolean = false, disposeSources:boolean = false, objectSpace:boolean = false)\n\t{\n\t\tthis._keepMaterial = keepMaterial;\n\t\tthis._disposeSources = disposeSources;\n\t\tthis._objectSpace = objectSpace;\n\t}\n\n\t/**\n\t * Determines if the mesh and geometry source(s) used for the merging are disposed. Defaults to false.\n\t */\n\tpublic set disposeSources(b:boolean)\n\t{\n\t\tthis._disposeSources = b;\n\t}\n\n\tpublic get disposeSources():boolean\n\t{\n\t\treturn this._disposeSources;\n\t}\n\n\t/**\n\t * Determines if the material source(s) used for the merging are disposed. Defaults to false.\n\t */\n\tpublic set keepMaterial(b:boolean)\n\t{\n\t\tthis._keepMaterial = b;\n\t}\n\n\tpublic get keepMaterial():boolean\n\t{\n\t\treturn this._keepMaterial;\n\t}\n\n\t/**\n\t * Determines if source mesh(es) is/are merged using objectSpace or worldspace. Defaults to false.\n\t */\n\tpublic set objectSpace(b:boolean)\n\t{\n\t\tthis._objectSpace = b;\n\t}\n\n\tpublic get objectSpace():boolean\n\t{\n\t\treturn this._objectSpace;\n\t}\n\n\t/**\n\t * Merges all the children of a container into a single Mesh. If no Mesh object is found, method returns the receiver without modification.\n\t *\n\t * @param    receiver           The Mesh to receive the merged contents of the container.\n\t * @param    objectContainer    The DisplayObjectContainer holding the meshes to be mergd.\n\t *\n\t * @return The merged Mesh instance.\n\t */\n\tpublic applyToContainer(receiver:Mesh, objectContainer:DisplayObjectContainer)\n\t{\n\t\tthis.reset();\n\n\t\t//collect container meshes\n\t\tthis.parseContainer(receiver, objectContainer);\n\n\t\t//collect receiver\n\t\tthis.collect(receiver, false);\n\n\t\t//merge to receiver\n\t\tthis.merge(receiver, this._disposeSources);\n\t}\n\n\t/**\n\t * Merges all the meshes found in the Array&lt;Mesh&gt; into a single Mesh.\n\t *\n\t * @param    receiver    The Mesh to receive the merged contents of the meshes.\n\t * @param    meshes      A series of Meshes to be merged with the reciever mesh.\n\t */\n\tpublic applyToMeshes(receiver:Mesh, meshes:Array<Mesh>)\n\t{\n\t\tthis.reset();\n\n\t\tif (!meshes.length)\n\t\t\treturn;\n\n\t\t//collect meshes in vector\n\t\tfor (var i:number /*uint*/ = 0; i < meshes.length; i++)\n\t\t\tif (meshes[i] != receiver)\n\t\t\t\tthis.collect(meshes[i], this._disposeSources);\n\n\t\t//collect receiver\n\t\tthis.collect(receiver, false);\n\n\t\t//merge to receiver\n\t\tthis.merge(receiver, this._disposeSources);\n\t}\n\n\t/**\n\t *  Merges 2 meshes into one. It is recommand to use apply when 2 meshes are to be merged. If more need to be merged, use either applyToMeshes or applyToContainer methods.\n\t *\n\t * @param    receiver    The Mesh to receive the merged contents of both meshes.\n\t * @param    mesh        The Mesh to be merged with the receiver mesh\n\t */\n\tpublic apply(receiver:Mesh, mesh:Mesh)\n\t{\n\t\tthis.reset();\n\n\t\t//collect mesh\n\t\tthis.collect(mesh, this._disposeSources);\n\n\t\t//collect receiver\n\t\tthis.collect(receiver, false);\n\n\t\t//merge to receiver\n\t\tthis.merge(receiver, this._disposeSources);\n\t}\n\n\tprivate reset()\n\t{\n\t\tthis._toDispose  = new Array<Mesh>();\n\t\tthis._geomVOs = new Array<GeometryVO>();\n\t}\n\n\tprivate merge(destMesh:Mesh, dispose:boolean)\n\t{\n\t\tvar i:number /*uint*/;\n\t\tvar subIdx:number /*uint*/;\n\t\tvar oldGeom:Geometry;\n\t\tvar destGeom:Geometry;\n\t\tvar useSubMaterials:boolean;\n\n\t\toldGeom = destMesh.geometry;\n\t\tdestGeom = destMesh.geometry = new Geometry();\n\t\tsubIdx = destMesh.subMeshes.length;\n\n\t\t// Only apply materials directly to sub-meshes if necessary,\n\t\t// i.e. if there is more than one material available.\n\t\tuseSubMaterials = (this._geomVOs.length > 1);\n\n\t\tfor (i = 0; i < this._geomVOs.length; i++) {\n\t\t\tvar s:number /*uint*/;\n\t\t\tvar data:GeometryVO;\n\t\t\tvar sub:TriangleSubGeometry = new TriangleSubGeometry(new AttributesBuffer());\n\t\t\tsub.autoDeriveNormals = false;\n\t\t\tsub.autoDeriveTangents = false;\n\n\t\t\tdata = this._geomVOs[i];\n\t\t\tsub.setIndices(data.indices);\n\t\t\tsub.setPositions(data.vertices);\n\t\t\tsub.setNormals(data.normals);\n\t\t\tsub.setTangents(data.tangents);\n\t\t\tsub.setUVs(data.uvs);\n\n\t\t\tdestGeom.addSubGeometry(sub);\n\n\t\t\tif (this._keepMaterial && useSubMaterials)\n\t\t\t\tdestMesh.subMeshes[subIdx].material = data.material;\n\t\t}\n\n\t\tif (this._keepMaterial && !useSubMaterials && this._geomVOs.length)\n\t\t\tdestMesh.material = this._geomVOs[0].material;\n\n\t\tif (dispose) {\n\t\t\tvar m:Mesh;\n\t\t\tvar len:number = this._toDispose.length;\n\t\t\tfor (var i:number; i < len; i++) {\n\t\t\t\tm = this._toDispose[i];\n\t\t\t\tm.geometry.dispose();\n\t\t\t\tm.dispose();\n\t\t\t}\n\n\t\t\t//dispose of the original receiver geometry\n\t\t\toldGeom.dispose();\n\t\t}\n\n\t\tthis._toDispose = null;\n\t}\n\n\tprivate collect(mesh:Mesh, dispose:boolean)\n\t{\n\t\tif (mesh.geometry) {\n\t\t\tvar subIdx:number /*uint*/;\n\t\t\tvar subGeometries:Array<TriangleSubGeometry> = <Array<TriangleSubGeometry>> mesh.geometry.subGeometries;\n\t\t\tvar calc:number /*uint*/;\n\t\t\tfor (subIdx = 0; subIdx < subGeometries.length; subIdx++) {\n\t\t\t\tvar i:number /*uint*/;\n\t\t\t\tvar len:number /*uint*/;\n\t\t\t\tvar iIdx:number /*uint*/, vIdx:number /*uint*/, nIdx:number /*uint*/, tIdx:number /*uint*/, uIdx:number /*uint*/;\n\t\t\t\tvar indexOffset:number /*uint*/;\n\t\t\t\tvar subGeom:TriangleSubGeometry;\n\t\t\t\tvar vo:GeometryVO;\n\t\t\t\tvar vertices:Array<number>;\n\t\t\t\tvar normals:Array<number>;\n\t\t\t\tvar tangents:Array<number>;\n\t\t\t\tvar ind:Uint16Array, pd:Float32Array, nd:Float32Array, td:Float32Array, ud:Float32Array;\n\n\t\t\t\tsubGeom = subGeometries[subIdx];\n\t\t\t\tpd = subGeom.positions.get(subGeom.numVertices);\n\t\t\t\tnd = subGeom.normals.get(subGeom.numVertices);\n\t\t\t\ttd = subGeom.tangents.get(subGeom.numVertices);\n\t\t\t\tud = subGeom.uvs.get(subGeom.numVertices);\n\n\t\t\t\t// Get (or create) a VO for this material\n\t\t\t\tvo = this.getSubGeomData(mesh.subMeshes[subIdx].material || mesh.material);\n\n\t\t\t\t// Vertices and normals are copied to temporary vectors, to be transformed\n\t\t\t\t// before concatenated onto those of the data. This is unnecessary if no\n\t\t\t\t// transformation will be performed, i.e. for object space merging.\n\t\t\t\tvertices = (this._objectSpace)? vo.vertices : new Array<number>();\n\t\t\t\tnormals = (this._objectSpace)? vo.normals : new Array<number>();\n\t\t\t\ttangents = (this._objectSpace)? vo.tangents : new Array<number>();\n\n\t\t\t\t// Copy over vertex attributes\n\t\t\t\tvIdx = vertices.length;\n\t\t\t\tnIdx = normals.length;\n\t\t\t\ttIdx = tangents.length;\n\t\t\t\tuIdx = vo.uvs.length;\n\t\t\t\tlen = subGeom.numVertices;\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\tcalc = i*3;\n\n\t\t\t\t\t// Position\n\t\t\t\t\tvertices[vIdx++] = pd[calc];\n\t\t\t\t\tvertices[vIdx++] = pd[calc + 1];\n\t\t\t\t\tvertices[vIdx++] = pd[calc + 2];\n\n\t\t\t\t\t// Normal\n\t\t\t\t\tnormals[nIdx++] = nd[calc];\n\t\t\t\t\tnormals[nIdx++] = nd[calc + 1];\n\t\t\t\t\tnormals[nIdx++] = nd[calc + 2];\n\n\t\t\t\t\t// Tangent\n\t\t\t\t\ttangents[tIdx++] = td[calc];\n\t\t\t\t\ttangents[tIdx++] = td[calc + 1];\n\t\t\t\t\ttangents[tIdx++] = td[calc + 2];\n\n\t\t\t\t\t// UV\n\t\t\t\t\tvo.uvs[uIdx++] = ud[i*2];\n\t\t\t\t\tvo.uvs[uIdx++] = ud[i*2 + 1];\n\t\t\t\t}\n\n\t\t\t\t// Copy over triangle indices\n\t\t\t\tindexOffset = (!this._objectSpace)? vo.vertices.length/3 :0;\n\t\t\t\tiIdx = vo.indices.length;\n\t\t\t\tlen = subGeom.numElements;\n\t\t\t\tind = subGeom.indices.get(len);\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\tcalc = i*3;\n\t\t\t\t\tvo.indices[iIdx++] = ind[calc] + indexOffset;\n\t\t\t\t\tvo.indices[iIdx++] = ind[calc + 1] + indexOffset;\n\t\t\t\t\tvo.indices[iIdx++] = ind[calc + 2] + indexOffset;\n\t\t\t\t}\n\n\t\t\t\tif (!this._objectSpace) {\n\t\t\t\t\tmesh.sceneTransform.transformVectors(vertices, vertices);\n\t\t\t\t\tMatrix3DUtils.deltaTransformVectors(mesh.sceneTransform, normals, normals);\n\t\t\t\t\tMatrix3DUtils.deltaTransformVectors(mesh.sceneTransform, tangents, tangents);\n\n\t\t\t\t\t// Copy vertex data from temporary (transformed) vectors\n\t\t\t\t\tvIdx = vo.vertices.length;\n\t\t\t\t\tnIdx = vo.normals.length;\n\t\t\t\t\ttIdx = vo.tangents.length;\n\t\t\t\t\tlen = vertices.length;\n\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\tvo.vertices[vIdx++] = vertices[i];\n\t\t\t\t\t\tvo.normals[nIdx++] = normals[i];\n\t\t\t\t\t\tvo.tangents[tIdx++] = tangents[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dispose)\n\t\t\t\tthis._toDispose.push(mesh);\n\t\t}\n\t}\n\n\tprivate getSubGeomData(material:MaterialBase):GeometryVO\n\t{\n\t\tvar data:GeometryVO;\n\n\t\tif (this._keepMaterial) {\n\t\t\tvar i:number /*uint*/;\n\t\t\tvar len:number /*uint*/;\n\n\t\t\tlen = this._geomVOs.length;\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (this._geomVOs[i].material == material) {\n\t\t\t\t\tdata = this._geomVOs[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this._geomVOs.length) {\n\t\t\t// If materials are not to be kept, all data can be\n\t\t\t// put into a single VO, so return that one.\n\t\t\tdata = this._geomVOs[0];\n\t\t}\n\n\t\t// No data (for this material) found, create new.\n\t\tif (!data) {\n\t\t\tdata = new GeometryVO();\n\t\t\tdata.vertices = new Array<number>();\n\t\t\tdata.normals = new Array<number>();\n\t\t\tdata.tangents = new Array<number>();\n\t\t\tdata.uvs = new Array<number>();\n\t\t\tdata.indices = new Array<number /*uint*/>();\n\t\t\tdata.material = material;\n\n\t\t\tthis._geomVOs.push(data);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tprivate parseContainer(receiver:Mesh, object:DisplayObjectContainer)\n\t{\n\t\tvar child:DisplayObjectContainer;\n\t\tvar i:number /*uint*/;\n\n\t\tif (object instanceof Mesh && object != (<DisplayObjectContainer> receiver))\n\t\t\tthis.collect(<Mesh> object, this._disposeSources);\n\n\t\tfor (i = 0; i < object.numChildren; ++i) {\n\t\t\tchild = <DisplayObjectContainer> object.getChildAt(i);\n\t\t\tthis.parseContainer(receiver, child);\n\t\t}\n\t}\n}\n\nexport = Merge;\n\nclass GeometryVO\n{\n\tpublic uvs:Array<number>;\n\tpublic vertices:Array<number>;\n\tpublic normals:Array<number>;\n\tpublic tangents:Array<number>;\n\tpublic indices:Array<number /*uint*/>;\n\tpublic material:MaterialBase;\n}\n",
    "import Matrix\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\nimport Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\n\n/**\n * ...\n */\nclass ParticleGeometryTransform\n{\n\tprivate _defaultVertexTransform:Matrix3D;\n\tprivate _defaultInvVertexTransform:Matrix3D;\n\tprivate _defaultUVTransform:Matrix;\n\n\tpublic set vertexTransform(value:Matrix3D)\n\t{\n\t\tthis._defaultVertexTransform = value;\n\t\tthis._defaultInvVertexTransform = value.clone();\n\t\tthis._defaultInvVertexTransform.invert();\n\t\tthis._defaultInvVertexTransform.transpose();\n\t}\n\n\tpublic set UVTransform(value:Matrix)\n\t{\n\t\tthis._defaultUVTransform = value;\n\t}\n\n\tpublic get UVTransform():Matrix\n\t{\n\t\treturn this._defaultUVTransform;\n\t}\n\n\tpublic get vertexTransform():Matrix3D\n\t{\n\t\treturn this._defaultVertexTransform;\n\t}\n\n\tpublic get invVertexTransform():Matrix3D\n\t{\n\t\treturn this._defaultInvVertexTransform;\n\t}\n}\n\nexport = ParticleGeometryTransform;",
    "import AttributesBuffer\t\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport Matrix\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\nimport Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Point\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\nimport Vector3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\n\nimport Geometry\t\t\t\t\t\t\t= require(\"awayjs-display/lib/base/Geometry\");\nimport TriangleSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport Mesh\t\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\n\nimport ParticleData\t\t\t\t\t\t= require(\"awayjs-renderergl/lib/animators/data/ParticleData\");\nimport ParticleGeometry\t\t\t\t\t= require(\"awayjs-renderergl/lib/base/ParticleGeometry\");\nimport ParticleGeometryTransform\t\t= require(\"awayjs-renderergl/lib/tools/data/ParticleGeometryTransform\");\n\n/**\n * ...\n */\nclass ParticleGeometryHelper\n{\n\tpublic static MAX_VERTEX:number /*int*/ = 65535;\n\n\tpublic static generateGeometry(geometries:Array<Geometry>, transforms:Array<ParticleGeometryTransform> = null):ParticleGeometry\n\t{\n\t\tvar indicesVector:Array<Array<number>> /*uint*/ = new Array<Array<number>>() /*uint*/;\n\t\tvar positionsVector:Array<Array<number>> = new Array<Array<number>>();\n\t\tvar normalsVector:Array<Array<number>> = new Array<Array<number>>();\n\t\tvar tangentsVector:Array<Array<number>> = new Array<Array<number>>();\n\t\tvar uvsVector:Array<Array<number>> = new Array<Array<number>>();\n\t\tvar vertexCounters:Array<number> /*uint*/ = new Array<number>() /*uint*/;\n\t\tvar particles:Array<ParticleData> = new Array<ParticleData>();\n\t\tvar subGeometries:Array<TriangleSubGeometry> = new Array<TriangleSubGeometry>();\n\t\tvar numParticles:number /*uint*/ = geometries.length;\n\n\t\tvar sourceSubGeometries:Array<TriangleSubGeometry>;\n\t\tvar sourceSubGeometry:TriangleSubGeometry;\n\t\tvar numSubGeometries:number /*uint*/;\n\t\tvar indices:Array<number> /*uint*/;\n\t\tvar positions:Array<number>;\n\t\tvar normals:Array<number>;\n\t\tvar tangents:Array<number>;\n\t\tvar uvs:Array<number>;\n\t\tvar vertexCounter:number /*uint*/;\n\t\tvar subGeometry:TriangleSubGeometry;\n\t\tvar i:number /*int*/;\n\t\tvar j:number /*int*/;\n\t\tvar sub2SubMap:Array<number> /*int*/ = new Array<number>() /*int*/;\n\n\t\tvar tempVertex:Vector3D = new Vector3D;\n\t\tvar tempNormal:Vector3D = new Vector3D;\n\t\tvar tempTangents:Vector3D = new Vector3D;\n\t\tvar tempUV:Point = new Point;\n\n\t\tfor (i = 0; i < numParticles; i++) {\n\t\t\tsourceSubGeometries = <Array<TriangleSubGeometry>> geometries[i].subGeometries;\n\t\t\tnumSubGeometries = sourceSubGeometries.length;\n\t\t\tfor (var srcIndex:number /*int*/ = 0; srcIndex < numSubGeometries; srcIndex++) {\n\t\t\t\t//create a different particle subgeometry group for each source subgeometry in a particle.\n\t\t\t\tif (sub2SubMap.length <= srcIndex) {\n\t\t\t\t\tsub2SubMap.push(subGeometries.length);\n\t\t\t\t\tindicesVector.push(new Array<number>() /*uint*/);\n\t\t\t\t\tpositionsVector.push(new Array<number>());\n\t\t\t\t\tnormalsVector.push(new Array<number>());\n\t\t\t\t\ttangentsVector.push(new Array<number>());\n\t\t\t\t\tuvsVector.push(new Array<number>());\n\t\t\t\t\tsubGeometries.push(new TriangleSubGeometry(new AttributesBuffer()));\n\t\t\t\t\tvertexCounters.push(0);\n\t\t\t\t}\n\n\t\t\t\tsourceSubGeometry = sourceSubGeometries[srcIndex];\n\n\t\t\t\t//add a new particle subgeometry if this source subgeometry will take us over the maxvertex limit\n\t\t\t\tif (sourceSubGeometry.numVertices + vertexCounters[sub2SubMap[srcIndex]] > ParticleGeometryHelper.MAX_VERTEX) {\n\t\t\t\t\t//update submap and add new subgeom vectors\n\t\t\t\t\tsub2SubMap[srcIndex] = subGeometries.length;\n\t\t\t\t\tindicesVector.push(new Array<number>() /*uint*/);\n\t\t\t\t\tpositionsVector.push(new Array<number>());\n\t\t\t\t\tnormalsVector.push(new Array<number>());\n\t\t\t\t\ttangentsVector.push(new Array<number>());\n\t\t\t\t\tuvsVector.push(new Array<number>());\n\t\t\t\t\tsubGeometries.push(new TriangleSubGeometry(new AttributesBuffer()));\n\t\t\t\t\tvertexCounters.push(0);\n\t\t\t\t}\n\n\t\t\t\tj = sub2SubMap[srcIndex];\n\n\t\t\t\t//select the correct vector\n\t\t\t\tindices = indicesVector[j];\n\t\t\t\tpositions = positionsVector[j];\n\t\t\t\tnormals = normalsVector[j];\n\t\t\t\ttangents = tangentsVector[j];\n\t\t\t\tuvs = uvsVector[j];\n\t\t\t\tvertexCounter = vertexCounters[j];\n\t\t\t\tsubGeometry = subGeometries[j];\n\n\t\t\t\tvar particleData:ParticleData = new ParticleData();\n\t\t\t\tparticleData.numVertices = sourceSubGeometry.numVertices;\n\t\t\t\tparticleData.startVertexIndex = vertexCounter;\n\t\t\t\tparticleData.particleIndex = i;\n\t\t\t\tparticleData.subGeometry = subGeometry;\n\t\t\t\tparticles.push(particleData);\n\n\t\t\t\tvertexCounters[j] += sourceSubGeometry.numVertices;\n\n\t\t\t\tvar k:number /*int*/;\n\t\t\t\tvar tempLen:number /*int*/;\n\t\t\t\tvar compact:TriangleSubGeometry = sourceSubGeometry;\n\t\t\t\tvar product:number /*uint*/;\n\t\t\t\tvar sourcePositions:Float32Array;\n\t\t\t\tvar sourceNormals:Float32Array;\n\t\t\t\tvar sourceTangents:Float32Array;\n\t\t\t\tvar sourceUVs:Float32Array;\n\n\t\t\t\tif (compact) {\n\t\t\t\t\ttempLen = compact.numVertices;\n\t\t\t\t\tsourcePositions = compact.positions.get(tempLen);\n\t\t\t\t\tsourceNormals = compact.normals.get(tempLen);\n\t\t\t\t\tsourceTangents = compact.tangents.get(tempLen);\n\t\t\t\t\tsourceUVs = compact.uvs.get(tempLen);\n\n\t\t\t\t\tif (transforms) {\n\t\t\t\t\t\tvar particleGeometryTransform:ParticleGeometryTransform = transforms[i];\n\t\t\t\t\t\tvar vertexTransform:Matrix3D = particleGeometryTransform.vertexTransform;\n\t\t\t\t\t\tvar invVertexTransform:Matrix3D = particleGeometryTransform.invVertexTransform;\n\t\t\t\t\t\tvar UVTransform:Matrix = particleGeometryTransform.UVTransform;\n\n\t\t\t\t\t\tfor (k = 0; k < tempLen; k++) {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t * 0 - 2: vertex position X, Y, Z\n\t\t\t\t\t\t\t * 3 - 5: normal X, Y, Z\n\t\t\t\t\t\t\t * 6 - 8: tangent X, Y, Z\n\t\t\t\t\t\t\t * 9 - 10: U V\n\t\t\t\t\t\t\t * 11 - 12: Secondary U V*/\n\t\t\t\t\t\t\tproduct = k*3;\n\t\t\t\t\t\t\ttempVertex.x = sourcePositions[product];\n\t\t\t\t\t\t\ttempVertex.y = sourcePositions[product + 1];\n\t\t\t\t\t\t\ttempVertex.z = sourcePositions[product + 2];\n\t\t\t\t\t\t\ttempNormal.x = sourceNormals[product];\n\t\t\t\t\t\t\ttempNormal.y = sourceNormals[product + 1];\n\t\t\t\t\t\t\ttempNormal.z = sourceNormals[product + 2];\n\t\t\t\t\t\t\ttempTangents.x = sourceTangents[product];\n\t\t\t\t\t\t\ttempTangents.y = sourceTangents[product + 1];\n\t\t\t\t\t\t\ttempTangents.z = sourceTangents[product + 2];\n\t\t\t\t\t\t\ttempUV.x = sourceUVs[k*2];\n\t\t\t\t\t\t\ttempUV.y = sourceUVs[k*2 + 1];\n\t\t\t\t\t\t\tif (vertexTransform) {\n\t\t\t\t\t\t\t\ttempVertex = vertexTransform.transformVector(tempVertex);\n\t\t\t\t\t\t\t\ttempNormal = invVertexTransform.deltaTransformVector(tempNormal);\n\t\t\t\t\t\t\t\ttempTangents = invVertexTransform.deltaTransformVector(tempNormal);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (UVTransform)\n\t\t\t\t\t\t\t\ttempUV = UVTransform.transformPoint(tempUV);\n\t\t\t\t\t\t\t//this is faster than that only push one data\n\t\t\t\t\t\t\tpositions.push(tempVertex.x, tempVertex.y, tempVertex.z);\n\t\t\t\t\t\t\tnormals.push(tempNormal.x, tempNormal.y, tempNormal.z);\n\t\t\t\t\t\t\ttangents.push(tempTangents.x, tempTangents.y, tempTangents.z);\n\t\t\t\t\t\t\tuvs.push(tempUV.x, tempUV.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (k = 0; k < tempLen; k++) {\n\t\t\t\t\t\t\tproduct = k*3;\n\t\t\t\t\t\t\t//this is faster than that only push one data\n\t\t\t\t\t\t\tpositions.push(sourcePositions[product], sourcePositions[product + 1], sourcePositions[product + 2]);\n\t\t\t\t\t\t\tnormals.push(sourceNormals[product], sourceNormals[product + 1], sourceNormals[product + 2]);\n\t\t\t\t\t\t\ttangents.push(sourceTangents[product], sourceTangents[product + 1], sourceTangents[product + 2]);\n\t\t\t\t\t\t\tuvs.push(sourceUVs[k*2], sourceUVs[k*2 + 1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//Todo\n\t\t\t\t}\n\n\t\t\t\ttempLen = sourceSubGeometry.numElements;\n\t\t\t\tvar sourceIndices:Uint16Array = sourceSubGeometry.indices.get(tempLen);\n\t\t\t\tfor (k = 0; k < tempLen; k++) {\n\t\t\t\t\tproduct = k*3;\n\t\t\t\t\tindices.push(sourceIndices[product] + vertexCounter, sourceIndices[product + 1] + vertexCounter, sourceIndices[product + 2] + vertexCounter);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar particleGeometry:ParticleGeometry = new ParticleGeometry();\n\t\tparticleGeometry.particles = particles;\n\t\tparticleGeometry.numParticles = numParticles;\n\n\t\tnumParticles = subGeometries.length;\n\t\tfor (i = 0; i < numParticles; i++) {\n\t\t\tsubGeometry = subGeometries[i];\n\t\t\tsubGeometry.autoDeriveNormals = false;\n\t\t\tsubGeometry.autoDeriveTangents = false;\n\t\t\tsubGeometry.setIndices(indicesVector[i]);\n\t\t\tsubGeometry.setPositions(positionsVector[i]);\n\t\t\tsubGeometry.setNormals(normalsVector[i]);\n\t\t\tsubGeometry.setTangents(tangentsVector[i]);\n\t\t\tsubGeometry.setUVs(uvsVector[i]);\n\t\t\tparticleGeometry.addSubGeometry(subGeometry);\n\t\t}\n\n\t\treturn particleGeometry;\n\t}\n}\n\nexport = ParticleGeometryHelper;",
    "import Matrix3D\t\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\n\n/**\n *\n */\nclass PerspectiveMatrix3D extends Matrix3D\n{\n\tconstructor(v:Float32Array = null)\n\t{\n\t\tsuper(v);\n\t}\n\n\tpublic perspectiveFieldOfViewLH(fieldOfViewY:number, aspectRatio:number, zNear:number, zFar:number)\n\t{\n\t\tvar yScale:number = 1/Math.tan(fieldOfViewY/2);\n\t\tvar xScale:number = yScale/aspectRatio;\n\n\t\tthis.rawData[0] = xScale;\n\t\tthis.rawData[1] = 0.0;\n\t\tthis.rawData[2] = 0.0;\n\t\tthis.rawData[3] = 0.0;\n\n\t\tthis.rawData[4] = 0.0;\n\t\tthis.rawData[5] = yScale;\n\t\tthis.rawData[6] = 0.0;\n\t\tthis.rawData[7] = 0.0;\n\n\t\tthis.rawData[8] = 0.0;\n\t\tthis.rawData[9] = 0.0;\n\t\tthis.rawData[10] = zFar/(zFar - zNear);\n\t\tthis.rawData[11] = 1.0;\n\n\t\tthis.rawData[12] = 0.0;\n\t\tthis.rawData[13] = 0.0;\n\t\tthis.rawData[14] = (zNear*zFar)/(zNear - zFar);\n\t\tthis.rawData[15] = 0.0;\n\t}\n}\n\nexport = PerspectiveMatrix3D;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\n\nimport ContextGLDrawMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLDrawMode\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport CurveSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/CurveSubGeometry\");\nimport SubGeometryEvent\t\t\t\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\n\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport SubGeometryVOBase\t\t\t= require(\"awayjs-renderergl/lib/vos/SubGeometryVOBase\");\n\n/**\n *\n * @class away.pool.CurveSubGeometryVO\n */\nclass CurveSubGeometryVO extends SubGeometryVOBase\n{\n\tprivate _curveSubGeometry:CurveSubGeometry;\n\n\tconstructor(curveSubGeometry:CurveSubGeometry, stage:Stage)\n\t{\n\t\tsuper(curveSubGeometry, stage);\n\n\t\tthis._curveSubGeometry = curveSubGeometry;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._curveSubGeometry.positions));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._curveSubGeometry.curves));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._curveSubGeometry.uvs));\n\n\t\tthis._curveSubGeometry = null;\n\t}\n\n\tpublic _render(shader:ShaderBase)\n\t{\n\t\tif (shader.uvBufferIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.uvBufferIndex, this._curveSubGeometry.uvs);\n\n\t\tthis.activateVertexBufferVO(0, this._curveSubGeometry.positions);\n\t\tthis.activateVertexBufferVO(1, this._curveSubGeometry.curves);\n\n\t\tsuper._render(shader);\n\t}\n\n\tpublic _drawElements(firstIndex:number, numIndices:number)\n\t{\n\t\tthis.getIndexBufferVO().draw(ContextGLDrawMode.TRIANGLES, firstIndex, numIndices);\n\t}\n\n\tpublic _drawArrays(firstVertex:number, numVertices:number)\n\t{\n\t\tthis._stage.context.drawVertices(ContextGLDrawMode.TRIANGLES, firstVertex, numVertices);\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param renderableOwner\n\t * @param level\n\t * @param indexOffset\n\t * @returns {away.pool.CurveSubMeshRenderable}\n\t * @protected\n\t */\n\tpublic _pGetOverflowSubGeometry():SubGeometryVOBase\n\t{\n\t\treturn new CurveSubGeometryVO(this._curveSubGeometry, this._stage);\n\t}\n}\n\nexport = CurveSubGeometryVO;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\n\nimport ContextGLDrawMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLDrawMode\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport LineSubGeometry\t\t\t\t= require(\"awayjs-display/lib/base/LineSubGeometry\");\nimport SubGeometryEvent\t\t\t\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\n\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport SubGeometryVOBase\t\t\t= require(\"awayjs-renderergl/lib/vos/SubGeometryVOBase\");\n\n/**\n *\n * @class away.pool.LineSubGeometryVO\n */\nclass LineSubGeometryVO extends SubGeometryVOBase\n{\n\n\tprivate _lineSubGeometry:LineSubGeometry;\n\n\tconstructor(lineSubGeometry:LineSubGeometry, stage:Stage)\n\t{\n\t\tsuper(lineSubGeometry, stage);\n\n\t\tthis._lineSubGeometry = lineSubGeometry;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._lineSubGeometry.positions));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._lineSubGeometry.thickness));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._lineSubGeometry.colors));\n\n\t\tthis._lineSubGeometry = null;\n\t}\n\n\tpublic _render(shader:ShaderBase)\n\t{\n\t\tif (shader.colorBufferIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.colorBufferIndex, this._lineSubGeometry.colors);\n\n\t\tthis.activateVertexBufferVO(0, this._lineSubGeometry.positions, 3);\n\t\tthis.activateVertexBufferVO(1, this._lineSubGeometry.positions, 3, 12);\n\t\tthis.activateVertexBufferVO(2, this._lineSubGeometry.thickness);\n\n\t\tsuper._render(shader);\n\t}\n\n\tpublic _drawElements(firstIndex:number, numIndices:number)\n\t{\n\t\tthis.getIndexBufferVO().draw(ContextGLDrawMode.TRIANGLES, 0, numIndices);\n\t}\n\n\tpublic _drawArrays(firstVertex:number, numVertices:number)\n\t{\n\t\tthis._stage.context.drawVertices(ContextGLDrawMode.TRIANGLES, firstVertex, numVertices);\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param renderableOwner\n\t * @param level\n\t * @param indexOffset\n\t * @returns {away.pool.LineSubMeshRenderable}\n\t * @protected\n\t */\n\tpublic _pGetOverflowSubGeometry():SubGeometryVOBase\n\t{\n\t\treturn new LineSubGeometryVO(this._lineSubGeometry, this._stage);\n\t}\n}\n\nexport = LineSubGeometryVO;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport GL_Image2D\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_Image2D\");\nimport GL_Sampler2D\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_Sampler2D\");\n\nimport MappingMode\t\t\t\t\t= require(\"awayjs-display/lib/textures/MappingMode\");\nimport Single2DTexture\t\t\t\t= require(\"awayjs-display/lib/textures/Single2DTexture\");\n\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n *\n * @class away.pool.Single2DTextureVO\n */\nclass Single2DTextureVO extends TextureVOBase\n{\n\n\tprivate _single2DTexture:Single2DTexture;\n\tprivate _textureIndex:number;\n\tprivate _imageIndex:number;\n\tprivate _samplerIndex:number;\n\n\tconstructor(single2DTexture:Single2DTexture, shader:ShaderBase)\n\t{\n\t\tsuper(single2DTexture, shader);\n\n\t\tthis._single2DTexture = single2DTexture;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._single2DTexture = null;\n\t}\n\n\t/**\n\t *\n\t * @param shader\n\t * @param regCache\n\t * @param targetReg The register in which to store the sampled colour.\n\t * @param uvReg The uv coordinate vector with which to sample the texture map.\n\t * @returns {string}\n\t * @private\n\t */\n\tpublic _iGetFragmentCode(targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData, inputReg:ShaderRegisterElement):string\n\t{\n\t\tvar code:string = \"\";\n\t\tvar wrap:string = \"wrap\";\n\t\tvar format:string = \"\";//this.getFormatString(this._single2DTexture.image2D);\n\t\tvar filter:string = \"linear,miplinear\";\n\n\t\tvar temp:ShaderRegisterElement;\n\n\t\t//modify depending on mapping mode\n\t\tif (this._single2DTexture.mappingMode == MappingMode.RADIAL_GRADIENT) {\n\t\t\ttemp = regCache.getFreeFragmentVectorTemp();\n\t\t\tcode += \"mul \" + temp + \".xy, \" + inputReg + \", \" + inputReg + \"\\n\";\n\t\t\tcode += \"mul \" + temp + \".xy, \" + inputReg + \", \" + inputReg + \"\\n\";\n\t\t\tcode += \"add \" + temp + \".x, \" + temp + \".x, \" + temp + \".y\\n\";\n\t\t\tcode += \"sub \" + temp + \".y, \" + temp + \".y, \" + temp + \".y\\n\";\n\t\t\tcode += \"sqt \" + temp + \".x, \" + temp + \".x, \" + temp + \".x\\n\";\n\t\t\tinputReg = temp;\n\t\t}\n\n\t\t//handles texture atlasing\n\t\tif (this._shader.useImageRect) {\n\t\t\tvar samplerReg:ShaderRegisterElement = regCache.getFreeFragmentConstant();\n\t\t\tthis._samplerIndex = samplerReg.index*4;\n\t\t\ttemp = regCache.getFreeFragmentVectorTemp();\n\n\t\t\tcode += \"mul \" + temp + \", \" + inputReg + \", \" + samplerReg + \".xy\\n\";\n\t\t\tcode += \"add \" + temp + \", \" + temp + \", \" + samplerReg + \".zw\\n\";\n\t\t\tinputReg = temp;\n\t\t}\n\n\t\tthis._imageIndex = this._shader.getImageIndex(this._single2DTexture, 0);\n\n\t\tvar textureReg:ShaderRegisterElement = this.getTextureReg(this._imageIndex, regCache, sharedReg);\n\t\tthis._textureIndex = textureReg.index;\n\n\t\tcode += \"tex \" + targetReg + \", \" + inputReg + \", \" + textureReg + \" <2d,\" + filter + \",\" + format + wrap + \">\\n\";\n\n\t\treturn code;\n\t}\n\n\tpublic activate(render:RenderBase)\n\t{\n\t\tvar sampler:GL_Sampler2D = <GL_Sampler2D> render.samplers[this._imageIndex];\n\t\tsampler.activate(this._textureIndex);\n\n\t\tvar image:GL_Image2D = render.images[this._imageIndex];\n\t\timage.activate(this._textureIndex, sampler._sampler.mipmap);\n\n\t\tif (this._shader.useImageRect) {\n\t\t\tvar index:number = this._samplerIndex;\n\t\t\tvar data:Float32Array = this._shader.fragmentConstantData;\n\t\t\tif (!sampler._sampler.imageRect) {\n\t\t\t\tdata[index] = 1;\n\t\t\t\tdata[index + 1] = 1;\n\t\t\t\tdata[index + 2] = 0;\n\t\t\t\tdata[index + 3] = 0;\n\t\t\t} else {\n\t\t\t\tvar renderImage:Image2D = <Image2D> image._asset;\n\t\t\t\tdata[index] = sampler._sampler.imageRect.width;\n\t\t\t\tdata[index + 1] = sampler._sampler.imageRect.height;\n\t\t\t\tdata[index + 2] = sampler._sampler.imageRect.x;\n\t\t\t\tdata[index + 3] = sampler._sampler.imageRect.y;\n\n\t\t\t}\n\t\t}\n\t}\n\n\n\tpublic _setRenderState(renderable:RenderableBase)\n\t{\n\t\tvar sampler:GL_Sampler2D = <GL_Sampler2D> renderable.samplers[this._imageIndex];\n\n\t\tif (sampler)\n\t\t\tsampler.activate(this._textureIndex);\n\n\t\tvar image:GL_Image2D = renderable.images[this._imageIndex];\n\n\t\tif (image)\n\t\t\timage.activate(this._textureIndex, sampler._sampler.mipmap);\n\n\t\tif (this._shader.useImageRect && sampler) {\n\t\t\tvar index:number = this._samplerIndex;\n\t\t\tvar data:Float32Array = this._shader.fragmentConstantData;\n\t\t\tif (!sampler._sampler.imageRect) {\n\t\t\t\tdata[index] = 1;\n\t\t\t\tdata[index + 1] = 1;\n\t\t\t\tdata[index + 2] = 0;\n\t\t\t\tdata[index + 3] = 0;\n\t\t\t} else {\n\t\t\t\tvar renderableImage:Image2D = <Image2D> (image? image._asset : renderable.render.images[this._imageIndex]._asset);\n\t\t\t\tdata[index] = sampler._sampler.imageRect.width;\n\t\t\t\tdata[index + 1] = sampler._sampler.imageRect.height;\n\t\t\t\tdata[index + 2] = sampler._sampler.imageRect.x;\n\t\t\t\tdata[index + 3] = sampler._sampler.imageRect.y;\n\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport = Single2DTextureVO;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\n\nimport GL_SamplerCube\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_SamplerCube\");\n\nimport SingleCubeTexture\t\t\t= require(\"awayjs-display/lib/textures/SingleCubeTexture\");\n\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport TextureVOBase\t\t\t\t= require(\"awayjs-renderergl/lib/vos/TextureVOBase\");\n\n/**\n *\n * @class away.pool.TextureDataBase\n */\nclass SingleCubeTextureVO extends TextureVOBase\n{\n\tprivate _singleCubeTexture:SingleCubeTexture;\n\tprivate _textureIndex:number;\n\tprivate _imageIndex:number;\n\n\tconstructor(singleCubeTexture:SingleCubeTexture, shader:ShaderBase)\n\t{\n\t\tsuper(singleCubeTexture, shader);\n\n\t\tthis._singleCubeTexture = singleCubeTexture;\n\t}\n\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._singleCubeTexture = null;\n\t}\n\n\tpublic _iIncludeDependencies(includeInput:boolean = true)\n\t{\n\t\tif (includeInput)\n\t\t\tthis._shader.usesLocalPosFragment = true;\n\t}\n\n\t/**\n\t *\n\t * @param shader\n\t * @param regCache\n\t * @param targetReg The register in which to store the sampled colour.\n\t * @param uvReg The direction vector with which to sample the cube map.\n\t * @returns {string}\n\t * @private\n\t */\n\tpublic _iGetFragmentCode(targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData, inputReg:ShaderRegisterElement):string\n\t{\n\t\tvar format:string = \"\";//this.getFormatString(this._singleCubeTexture.imageCube);\n\t\tvar filter:string = \"linear,miplinear\";\n\n\t\tthis._imageIndex = this._shader.getImageIndex(this._singleCubeTexture, 0);\n\n\t\tvar textureReg:ShaderRegisterElement = this.getTextureReg(this._imageIndex, regCache, sharedReg);\n\t\tthis._textureIndex = textureReg.index;\n\n\t\treturn \"tex \" + targetReg + \", \" + inputReg + \", \" + textureReg + \" <cube,\" + format + filter + \">\\n\";\n\t}\n\n\n\tpublic activate(render:RenderBase)\n\t{\n\t\tvar sampler:GL_SamplerCube = <GL_SamplerCube> render.samplers[this._imageIndex];\n\n\t\tif (sampler)\n\t\t\tsampler.activate(this._textureIndex);\n\n\t\tif (render.images[this._imageIndex])\n\t\t\trender.images[this._imageIndex].activate(this._textureIndex, sampler._sampler.mipmap);\n\n\t}\n\n\tpublic _setRenderState(renderable:RenderableBase)\n\t{\n\t\tvar sampler:GL_SamplerCube = <GL_SamplerCube> renderable.samplers[this._imageIndex];\n\n\t\tif (sampler)\n\t\t\tsampler.activate(this._textureIndex);\n\n\t\tif (renderable.images[this._imageIndex] && sampler) //TODO: allow image to be re-written without accompanying sampler on the renderable\n\t\t\trenderable.images[this._imageIndex].activate(this._textureIndex, sampler._sampler.mipmap);\n\t}\n}\n\nexport = SingleCubeTextureVO;",
    "import Short3Attributes\t\t\t\t= require(\"awayjs-core/lib/attributes/Short3Attributes\");\nimport AttributesView\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesView\");\nimport AttributesBuffer\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\nimport AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport GL_AttributesBuffer\t\t\t= require(\"awayjs-stagegl/lib/attributes/GL_AttributesBuffer\");\n\nimport SubGeometryBase\t\t\t\t= require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport SubGeometryEvent\t\t\t\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\nimport SubGeometryUtils\t\t\t\t= require(\"awayjs-display/lib/utils/SubGeometryUtils\");\n\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n/**\n *\n * @class away.pool.SubGeometryVOBaseBase\n */\nclass SubGeometryVOBase extends AbstractionBase\n{\n\tpublic usages:number = 0;\n\tprivate _subGeometry:SubGeometryBase;\n\tpublic _stage:Stage;\n\tprivate _onInvalidateIndicesDelegate:(event:SubGeometryEvent) => void;\n\tprivate _onClearIndicesDelegate:(event:SubGeometryEvent) => void;\n\tprivate _onInvalidateVerticesDelegate:(event:SubGeometryEvent) => void;\n\tprivate _onClearVerticesDelegate:(event:SubGeometryEvent) => void;\n\tprivate _overflow:SubGeometryVOBase;\n\tprivate _indices:GL_AttributesBuffer;\n\tprivate _indicesUpdated:boolean;\n\tprivate _vertices:Object = new Object();\n\tprivate _verticesUpdated:Object = new Object();\n\n\tpublic _indexMappings:Array<number> = Array<number>();\n\t\n\tprivate _numIndices:number = 0;\n\n\tprivate _numVertices:number;\n\n\tpublic get subGeometry()\n\t{\n\t\treturn this._subGeometry;\n\t}\n\t/**\n\t *\n\t */\n\tpublic get numIndices():number\n\t{\n\t\treturn this._numIndices;\n\t}\n\n\tconstructor(subGeometry:SubGeometryBase, stage:Stage)\n\t{\n\t\tsuper(subGeometry, stage);\n\t\t\n\t\tthis._subGeometry = subGeometry;\n\t\tthis._stage = stage;\n\n\t\tthis._onInvalidateIndicesDelegate = (event:SubGeometryEvent) => this._onInvalidateIndices(event);\n\t\tthis._onClearIndicesDelegate = (event:SubGeometryEvent) => this._onClearIndices(event);\n\t\tthis._onInvalidateVerticesDelegate = (event:SubGeometryEvent) => this._onInvalidateVertices(event);\n\t\tthis._onClearVerticesDelegate = (event:SubGeometryEvent) => this._onClearVertices(event);\n\n\t\tthis._subGeometry.addEventListener(SubGeometryEvent.CLEAR_INDICES, this._onClearIndicesDelegate);\n\t\tthis._subGeometry.addEventListener(SubGeometryEvent.INVALIDATE_INDICES, this._onInvalidateIndicesDelegate);\n\n\t\tthis._subGeometry.addEventListener(SubGeometryEvent.CLEAR_VERTICES, this._onClearVerticesDelegate);\n\t\tthis._subGeometry.addEventListener(SubGeometryEvent.INVALIDATE_VERTICES, this._onInvalidateVerticesDelegate);\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic getIndexMappings():Array<number>\n\t{\n\t\tif (!this._indicesUpdated)\n\t\t\tthis._updateIndices();\n\n\t\treturn this._indexMappings;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic getIndexBufferVO():GL_AttributesBuffer\n\t{\n\t\tif (!this._indicesUpdated)\n\t\t\tthis._updateIndices();\n\n\t\treturn this._indices;\n\t}\n\n\n\t/**\n\t *\n\t */\n\tpublic getVertexBufferVO(attributesView:AttributesView):GL_AttributesBuffer\n\t{\n\t\t//first check if indices need updating which may affect vertices\n\t\tif (!this._indicesUpdated)\n\t\t\tthis._updateIndices();\n\n\t\tvar bufferId:number = attributesView.buffer.id;\n\n\t\tif (!this._verticesUpdated[bufferId])\n\t\t\tthis._updateVertices(attributesView);\n\n\t\treturn this._vertices[bufferId];\n\t}\n\t\n\t/**\n\t *\n\t */\n\tpublic activateVertexBufferVO(index:number, attributesView:AttributesView, dimensions:number = 0, offset:number = 0)\n\t{\n\t\tthis.getVertexBufferVO(attributesView).activate(index, attributesView.size, dimensions || attributesView.dimensions, attributesView.offset + offset);\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._subGeometry.removeEventListener(SubGeometryEvent.CLEAR_INDICES, this._onClearIndicesDelegate);\n\t\tthis._subGeometry.removeEventListener(SubGeometryEvent.INVALIDATE_INDICES, this._onInvalidateIndicesDelegate);\n\n\t\tthis._subGeometry.removeEventListener(SubGeometryEvent.CLEAR_VERTICES, this._onClearVerticesDelegate);\n\t\tthis._subGeometry.removeEventListener(SubGeometryEvent.INVALIDATE_VERTICES, this._onInvalidateVerticesDelegate);\n\n\t\tthis._onClearIndices(new SubGeometryEvent(SubGeometryEvent.CLEAR_INDICES, this._subGeometry.indices));\n\n\t\tthis._subGeometry = null;\n\n\t\tif (this._overflow) {\n\t\t\tthis._overflow.onClear(event);\n\t\t\tthis._overflow = null;\n\t\t}\n\t}\n\n\tpublic _iGetFragmentCode(shader:ShaderBase, targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, inputReg:ShaderRegisterElement = null):string\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\tpublic _iRender(shader:ShaderBase)\n\t{\n\t\tif (!this._verticesUpdated)\n\t\t\tthis._updateIndices();\n\n\t\tthis._render(shader);\n\n\t\tif (this._overflow)\n\t\t\tthis._overflow._iRender(shader);\n\t}\n\n\tpublic _render(shader:ShaderBase)\n\t{\n\t\tif (this._indices)\n\t\t\tthis._drawElements(0, this._numIndices);\n\t\telse\n\t\t\tthis._drawArrays(0, this._numVertices);\n\t}\n\n\tpublic _drawElements(firstIndex:number, numIndices:number)\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\tpublic _drawArrays(firstVertex:number, numVertices:number)\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @private\n\t */\n\tpublic _updateIndices(indexOffset:number = 0)\n\t{\n\t\tvar indices:Short3Attributes = this._subGeometry.indices;\n\t\tif (indices) {\n\t\t\tthis._indices = <GL_AttributesBuffer> this._pool.getAbstraction(SubGeometryUtils.getSubIndices(indices, this._subGeometry.numVertices, this._indexMappings, indexOffset));\n\t\t\tthis._numIndices = this._indices._attributesBuffer.count*indices.dimensions;\n\t\t} else {\n\t\t\tthis._indices = null;\n\t\t\tthis._numIndices = 0;\n\t\t\tthis._indexMappings  = Array<number>();\n\t\t}\n\n\t\tindexOffset += this._numIndices;\n\n\t\t//check if there is more to split\n\t\tif (indices && indexOffset < indices.count*this._subGeometry.indices.dimensions) {\n\t\t\tif (!this._overflow)\n\t\t\t\tthis._overflow = this._pGetOverflowSubGeometry();\n\n\t\t\tthis._overflow._updateIndices(indexOffset);\n\t\t} else if (this._overflow) {\n\t\t\tthis._overflow.onClear(new AssetEvent(AssetEvent.CLEAR, this._subGeometry));\n\t\t\tthis._overflow = null;\n\t\t}\n\n\t\tthis._indicesUpdated = true;\n\n\t\t//invalidate vertices if index mappings exist\n\t\tif (this._indexMappings.length)\n\t\t\tfor (var key in this._verticesUpdated)\n\t\t\t\tthis._verticesUpdated[key] = false;\n\t}\n\n\n\t/**\n\t * //TODO\n\t *\n\t * @param attributesView\n\t * @private\n\t */\n\tprivate _updateVertices(attributesView:AttributesView)\n\t{\n\t\tthis._numVertices = attributesView.count;\n\n\t\tvar bufferId:number = attributesView.buffer.id;\n\n\t\tthis._vertices[bufferId] = <GL_AttributesBuffer> this._pool.getAbstraction(SubGeometryUtils.getSubVertices(attributesView.buffer, this._indexMappings));\n\n\t\tthis._verticesUpdated[bufferId] = true;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param event\n\t * @private\n\t */\n\tpublic _onInvalidateIndices(event:SubGeometryEvent)\n\t{\n\t\tif (!event.attributesView)\n\t\t\treturn;\n\n\t\tthis._indicesUpdated = false;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param event\n\t * @private\n\t */\n\tpublic _onClearIndices(event:SubGeometryEvent)\n\t{\n\t\tif (!event.attributesView)\n\t\t\treturn;\n\n\t\tthis._indices.onClear(new AssetEvent(AssetEvent.CLEAR, event.attributesView));\n\t\tthis._indices = null;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param event\n\t * @private\n\t */\n\tpublic _onInvalidateVertices(event:SubGeometryEvent)\n\t{\n\t\tif (!event.attributesView)\n\t\t\treturn;\n\n\t\tvar bufferId:number = event.attributesView.buffer.id;\n\n\t\tthis._verticesUpdated[bufferId] = false;\n\t}\n\t\n\t/**\n\t * //TODO\n\t *\n\t * @param event\n\t * @private\n\t */\n\tpublic _onClearVertices(event:SubGeometryEvent)\n\t{\n\t\tif (!event.attributesView)\n\t\t\treturn;\n\n\t\tvar bufferId:number = event.attributesView.buffer.id;\n\n\t\tif (this._vertices[bufferId]) {\n\t\t\tthis._vertices[bufferId].onClear(new AssetEvent(AssetEvent.CLEAR, event.attributesView));\n\t\t\tdelete this._vertices[bufferId];\n\t\t}\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param renderableOwner\n\t * @param level\n\t * @param indexOffset\n\t * @returns {away.pool.TriangleSubMeshRenderable}\n\t * @protected\n\t */\n\tpublic _pGetOverflowSubGeometry():SubGeometryVOBase\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n}\n\nexport = SubGeometryVOBase;",
    "import AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport SamplerBase\t\t\t\t\t= require(\"awayjs-core/lib/image/SamplerBase\");\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\n\nimport ContextGLTextureFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFormat\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport TextureBase\t\t\t\t\t= require(\"awayjs-display/lib/textures/TextureBase\");\n\nimport RenderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/render/RenderBase\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/renderables/RenderableBase\");\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterData\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\n\n/**\n *\n * @class away.pool.TextureVOBaseBase\n */\nclass TextureVOBase extends AbstractionBase\n{\n\tprivate _texture:TextureBase;\n\tpublic _shader:ShaderBase;\n\tpublic _stage:Stage;\n\n\tconstructor(texture:TextureBase, shader:ShaderBase)\n\t{\n\t\tsuper(texture, shader);\n\n\t\tthis._texture = texture;\n\t\tthis._shader = shader;\n\t\tthis._stage = shader._stage;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._texture = null;\n\t\tthis._shader = null;\n\t\tthis._stage = null;\n\t}\n\n\tpublic _iGetFragmentCode(targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData, inputReg:ShaderRegisterElement = null):string\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n\n\tpublic _setRenderState(renderable:RenderableBase)\n\t{\n\t\t//overidden for state logic\n\t}\n\n\tpublic activate(render:RenderBase)\n\t{\n\t\t//overridden for activation logic\n\t}\n\n\tpublic getTextureReg(imageIndex:number, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData):ShaderRegisterElement\n\t{\n\t\tvar index:number = this._shader.imageIndices.indexOf(imageIndex); //todo: collapse the index based on duplicate image objects to save registrations\n\n\t\tif (index == -1) {\n\t\t\tvar textureReg:ShaderRegisterElement = regCache.getFreeTextureReg();\n\t\t\tsharedReg.textures.push(textureReg);\n\t\t\tthis._shader.imageIndices.push(imageIndex);\n\n\t\t\treturn textureReg;\n\t\t}\n\n\t\treturn sharedReg.textures[index];\n\t}\n\n\tpublic getFormatString(image:ImageBase):string\n\t{\n\t\tswitch (image.format) {\n\t\t\tcase ContextGLTextureFormat.COMPRESSED:\n\t\t\t\treturn \"dxt1,\";\n\t\t\t\tbreak;\n\t\t\tcase ContextGLTextureFormat.COMPRESSED_ALPHA:\n\t\t\t\treturn \"dxt5,\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn \"\";\n\t\t}\n\t}\n}\n\nexport = TextureVOBase;",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\n\nimport ContextGLDrawMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLDrawMode\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport TriangleSubGeometry\t\t\t= require(\"awayjs-display/lib/base/TriangleSubGeometry\");\n\nimport SubGeometryEvent\t\t\t\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\n\nimport ShaderBase\t\t\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterCache\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/shaders/ShaderRegisterElement\");\nimport SubGeometryVOBase\t\t\t= require(\"awayjs-renderergl/lib/vos/SubGeometryVOBase\");\n\n/**\n *\n * @class away.pool.TriangleSubGeometryVO\n */\nclass TriangleSubGeometryVO extends SubGeometryVOBase\n{\n\tprivate _triangleSubGeometry:TriangleSubGeometry;\n\n\tconstructor(triangleSubGeometry:TriangleSubGeometry, stage:Stage)\n\t{\n\t\tsuper(triangleSubGeometry, stage);\n\n\t\tthis._triangleSubGeometry = triangleSubGeometry;\n\t}\n\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._triangleSubGeometry.positions));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._triangleSubGeometry.normals));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._triangleSubGeometry.tangents));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._triangleSubGeometry.uvs));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._triangleSubGeometry.secondaryUVs));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._triangleSubGeometry.jointIndices));\n\t\tthis._onClearVertices(new SubGeometryEvent(SubGeometryEvent.CLEAR_VERTICES, this._triangleSubGeometry.jointWeights));\n\n\t\tthis._triangleSubGeometry = null;\n\t}\n\n\tpublic _render(shader:ShaderBase)\n\t{\n\t\t//TODO: find a better way to update a concatenated buffer when autoderiving\n\t\tif (shader.normalBufferIndex >= 0 && this._triangleSubGeometry.autoDeriveNormals)\n\t\t\tthis._triangleSubGeometry.normals;\n\n\t\tif (shader.tangentBufferIndex >= 0 && this._triangleSubGeometry.autoDeriveTangents)\n\t\t\tthis._triangleSubGeometry.tangents;\n\n\t\tif (shader.uvBufferIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.uvBufferIndex, this._triangleSubGeometry.uvs);\n\n\t\tif (shader.secondaryUVBufferIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.secondaryUVBufferIndex, this._triangleSubGeometry.secondaryUVs);\n\n\t\tif (shader.normalBufferIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.normalBufferIndex, this._triangleSubGeometry.normals);\n\n\t\tif (shader.tangentBufferIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.tangentBufferIndex, this._triangleSubGeometry.tangents);\n\n\t\tif (shader.jointIndexIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.jointIndexIndex, this._triangleSubGeometry.jointIndices);\n\n\t\tif (shader.jointWeightIndex >= 0)\n\t\t\tthis.activateVertexBufferVO(shader.jointIndexIndex, this._triangleSubGeometry.jointWeights);\n\n\t\tthis.activateVertexBufferVO(0, this._triangleSubGeometry.positions);\n\n\n\t\tsuper._render(shader);\n\t}\n\n\tpublic _drawElements(firstIndex:number, numIndices:number)\n\t{\n\t\tthis.getIndexBufferVO().draw(ContextGLDrawMode.TRIANGLES, firstIndex, numIndices);\n\t}\n\n\tpublic _drawArrays(firstVertex:number, numVertices:number)\n\t{\n\t\tthis._stage.context.drawVertices(ContextGLDrawMode.TRIANGLES, firstVertex, numVertices);\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param pool\n\t * @param renderableOwner\n\t * @param level\n\t * @param indexOffset\n\t * @returns {away.pool.TriangleSubMeshRenderable}\n\t * @protected\n\t */\n\tpublic _pGetOverflowSubGeometry():SubGeometryVOBase\n\t{\n\t\treturn new TriangleSubGeometryVO(this._triangleSubGeometry, this._stage);\n\t}\n}\n\nexport = TriangleSubGeometryVO;"
  ],
  "sourceRoot": ""
}