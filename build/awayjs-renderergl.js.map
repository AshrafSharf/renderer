{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "..\\index.ts",
    "lib\\DefaultRenderer.ts",
    "lib\\DepthRenderer.ts",
    "lib\\DistanceRenderer.ts",
    "lib\\Filter3DRenderer.ts",
    "lib\\RendererBase.ts",
    "lib\\lib\\animators\\AnimationSetBase.ts",
    "lib\\lib\\animators\\AnimatorBase.ts",
    "lib\\lib\\animators\\ParticleAnimationSet.ts",
    "lib\\lib\\animators\\ParticleAnimator.ts",
    "lib\\lib\\animators\\SkeletonAnimationSet.ts",
    "lib\\lib\\animators\\SkeletonAnimator.ts",
    "lib\\lib\\animators\\VertexAnimationSet.ts",
    "lib\\lib\\animators\\VertexAnimator.ts",
    "lib\\animators\\lib\\animators\\data\\AnimationElements.ts",
    "lib\\animators\\lib\\animators\\data\\AnimationRegisterData.ts",
    "lib\\animators\\lib\\animators\\data\\ColorSegmentPoint.ts",
    "lib\\animators\\lib\\animators\\data\\JointPose.ts",
    "lib\\animators\\lib\\animators\\data\\ParticleAnimationData.ts",
    "lib\\animators\\lib\\animators\\data\\ParticlePropertiesMode.ts",
    "lib\\animators\\lib\\animators\\data\\ParticleProperties.ts",
    "lib\\animators\\lib\\animators\\data\\SkeletonJoint.ts",
    "lib\\animators\\lib\\animators\\data\\SkeletonPose.ts",
    "lib\\animators\\lib\\animators\\data\\Skeleton.ts",
    "lib\\animators\\lib\\animators\\data\\VertexAnimationMode.ts",
    "lib\\animators\\lib\\animators\\nodes\\AnimationClipNodeBase.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleAccelerationNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleBezierCurveNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleBillboardNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleColorNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleFollowNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleInitialColorNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleNodeBase.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleOrbitNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleOscillatorNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticlePositionNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleRotateToHeadingNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleRotateToPositionNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleRotationalVelocityNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleScaleNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleSegmentedColorNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleSpriteSheetNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleTimeNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleUVNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\ParticleVelocityNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\SkeletonBinaryLERPNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\SkeletonClipNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\SkeletonDifferenceNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\SkeletonDirectionalNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\SkeletonNaryLERPNode.ts",
    "lib\\animators\\lib\\animators\\nodes\\VertexClipNode.ts",
    "lib\\animators\\lib\\animators\\states\\AnimationClipState.ts",
    "lib\\animators\\lib\\animators\\states\\AnimationStateBase.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleAccelerationState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleBezierCurveState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleBillboardState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleColorState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleFollowState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleInitialColorState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleOrbitState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleOscillatorState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticlePositionState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleRotateToHeadingState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleRotateToPositionState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleRotationalVelocityState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleScaleState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleSegmentedColorState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleSpriteSheetState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleStateBase.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleTimeState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleUVState.ts",
    "lib\\animators\\lib\\animators\\states\\ParticleVelocityState.ts",
    "lib\\animators\\lib\\animators\\states\\SkeletonBinaryLERPState.ts",
    "lib\\animators\\lib\\animators\\states\\SkeletonClipState.ts",
    "lib\\animators\\lib\\animators\\states\\SkeletonDifferenceState.ts",
    "lib\\animators\\lib\\animators\\states\\SkeletonDirectionalState.ts",
    "lib\\animators\\lib\\animators\\states\\SkeletonNaryLERPState.ts",
    "lib\\animators\\lib\\animators\\states\\VertexClipState.ts",
    "lib\\animators\\lib\\animators\\transitions\\CrossfadeTransitionNode.ts",
    "lib\\animators\\lib\\animators\\transitions\\CrossfadeTransitionState.ts",
    "lib\\animators\\lib\\animators\\transitions\\CrossfadeTransition.ts",
    "lib\\animators.ts",
    "lib\\lib\\elements\\GL_ElementsBase.ts",
    "lib\\lib\\elements\\GL_LineElements.ts",
    "lib\\lib\\elements\\GL_SkyboxElements.ts",
    "lib\\lib\\elements\\GL_TriangleElements.ts",
    "lib\\elements.ts",
    "lib\\lib\\errors\\AnimationSetError.ts",
    "lib\\errors.ts",
    "lib\\lib\\events\\AnimationStateEvent.ts",
    "lib\\lib\\events\\AnimatorEvent.ts",
    "lib\\lib\\events\\PassEvent.ts",
    "lib\\lib\\events\\RTTEvent.ts",
    "lib\\lib\\events\\ShadingMethodEvent.ts",
    "lib\\events.ts",
    "lib\\lib\\filters\\BlurFilter3D.ts",
    "lib\\lib\\filters\\CompositeFilter3D.ts",
    "lib\\lib\\filters\\FXAAFilter3D.ts",
    "lib\\lib\\filters\\Filter3DBase.ts",
    "lib\\filters\\lib\\filters\\tasks\\Filter3DCompositeTask.ts",
    "lib\\filters\\lib\\filters\\tasks\\Filter3DFXAATask.ts",
    "lib\\filters\\lib\\filters\\tasks\\Filter3DHBlurTask.ts",
    "lib\\filters\\lib\\filters\\tasks\\Filter3DTaskBase.ts",
    "lib\\filters\\lib\\filters\\tasks\\Filter3DVBlurTask.ts",
    "lib\\filters.ts",
    "lib\\lib\\managers\\RTTBufferManager.ts",
    "lib\\managers.ts",
    "lib\\lib\\renderables\\GL_BillboardRenderable.ts",
    "lib\\lib\\renderables\\GL_GraphicRenderable.ts",
    "lib\\lib\\renderables\\GL_LineSegmentRenderable.ts",
    "lib\\lib\\renderables\\GL_RenderableBase.ts",
    "lib\\lib\\renderables\\GL_SkyboxRenderable.ts",
    "lib\\renderables.ts",
    "lib\\lib\\shaders\\LightingShader.ts",
    "lib\\lib\\shaders\\RegisterPool.ts",
    "lib\\lib\\shaders\\ShaderBase.ts",
    "lib\\lib\\shaders\\ShaderRegisterCache.ts",
    "lib\\lib\\shaders\\ShaderRegisterData.ts",
    "lib\\lib\\shaders\\ShaderRegisterElement.ts",
    "lib\\shaders\\lib\\shaders\\compilers\\CompilerBase.ts",
    "lib\\shaders\\lib\\shaders\\compilers\\LightingCompiler.ts",
    "lib\\shaders.ts",
    "lib\\lib\\sort\\RenderableMergeSort.ts",
    "lib\\lib\\sort\\RenderableNullSort.ts",
    "lib\\sort.ts",
    "lib\\lib\\surfaces\\GL_BasicMaterialSurface.ts",
    "lib\\lib\\surfaces\\GL_DepthSurface.ts",
    "lib\\lib\\surfaces\\GL_DistanceSurface.ts",
    "lib\\lib\\surfaces\\GL_SkyboxSurface.ts",
    "lib\\lib\\surfaces\\GL_SurfaceBase.ts",
    "lib\\lib\\surfaces\\GL_SurfacePassBase.ts",
    "lib\\lib\\surfaces\\SurfacePool.ts",
    "lib\\surfaces\\lib\\surfaces\\passes\\BasicMaterialPass.ts",
    "lib\\surfaces\\lib\\surfaces\\passes\\PassBase.ts",
    "lib\\surfaces.ts",
    "lib\\lib\\textures\\GL_Single2DTexture.ts",
    "lib\\lib\\textures\\GL_SingleCubeTexture.ts",
    "lib\\lib\\textures\\GL_TextureBase.ts",
    "lib\\textures.ts",
    "lib\\tools\\lib\\tools\\commands\\Merge.ts",
    "lib\\tools\\lib\\tools\\data\\ParticleGraphicsTransform.ts",
    "lib\\tools.ts",
    "lib\\lib\\utils\\ParticleGraphicsHelper.ts",
    "lib\\lib\\utils\\PerspectiveMatrix3D.ts",
    "lib\\utils.ts"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import * as animators\t\t\t\tfrom \"./lib/animators\";\r\nimport * as elements\t\t\t\tfrom \"./lib/elements\";\r\nimport * as errors\t\t\t\t\tfrom \"./lib/errors\";\r\nimport * as events\t\t\t\t\tfrom \"./lib/events\";\r\nimport * as filters\t\t\t\t\tfrom \"./lib/filters\";\r\nimport * as managers\t\t\t\tfrom \"./lib/managers\";\r\nimport * as renderables\t\t\t\tfrom \"./lib/renderables\";\r\nimport * as shaders\t\t\t\t\tfrom \"./lib/shaders\";\r\nimport * as sort\t\t\t\t\tfrom \"./lib/sort\";\r\nimport * as surfaces\t\t\t\tfrom \"./lib/surfaces\";\r\nimport * as textures\t\t\t\tfrom \"./lib/textures\";\r\nimport * as tools\t\t\t\t\tfrom \"./lib/tools\";\r\nimport * as utils\t\t\t\t\tfrom \"./lib/utils\";\r\nimport {DefaultRenderer}\t\t\t\tfrom \"./lib/DefaultRenderer\";\r\nimport {DepthRenderer}\t\t\t\tfrom \"./lib/DepthRenderer\";\r\nimport {DistanceRenderer}\t\t\t\tfrom \"./lib/DistanceRenderer\";\r\nimport {Filter3DRenderer}\t\t\t\tfrom \"./lib/Filter3DRenderer\";\r\nimport {RendererBase}\t\t\t\t\tfrom \"./lib/RendererBase\";\r\n\r\nimport {BasicMaterial}\t\t\t\tfrom \"awayjs-display/lib/materials/BasicMaterial\";\r\nimport {Skybox}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Skybox\";\r\nimport {Billboard}\t\t\t\t\tfrom \"awayjs-display/lib/display/Billboard\";\r\nimport {LineSegment}\t\t\t\t\tfrom \"awayjs-display/lib/display/LineSegment\";\r\nimport {LineElements}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/LineElements\";\r\nimport {TriangleElements}\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\nimport {Graphic}\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphic\";\r\nimport {Single2DTexture}\t\t\t\tfrom \"awayjs-display/lib/textures/Single2DTexture\";\r\nimport {SingleCubeTexture}\t\t\tfrom \"awayjs-display/lib/textures/SingleCubeTexture\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nsurfaces.SurfacePool.registerAbstraction(surfaces.GL_BasicMaterialSurface, BasicMaterial);\r\nsurfaces.SurfacePool.registerAbstraction(surfaces.GL_SkyboxSurface, Skybox);\r\n\r\nStage.registerAbstraction(elements.GL_LineElements, LineElements);\r\nStage.registerAbstraction(elements.GL_TriangleElements, TriangleElements);\r\n\r\nshaders.ShaderBase.registerAbstraction(textures.GL_Single2DTexture, Single2DTexture);\r\nshaders.ShaderBase.registerAbstraction(textures.GL_SingleCubeTexture, SingleCubeTexture);\r\n\r\nRendererBase.registerAbstraction(renderables.GL_BillboardRenderable, Billboard);\r\nRendererBase.registerAbstraction(renderables.GL_LineSegmentRenderable, LineSegment);\r\nRendererBase.registerAbstraction(renderables.GL_GraphicRenderable, Graphic);\r\nRendererBase.registerAbstraction(renderables.GL_SkyboxRenderable, Skybox);\r\n\r\nexport {\r\n\tanimators,\r\n\telements,\r\n\terrors,\r\n\tevents,\r\n\tfilters,\r\n\tmanagers,\r\n\trenderables,\r\n\tshaders,\r\n\tsort,\r\n\tsurfaces,\r\n\ttextures,\r\n\ttools,\r\n\tutils,\r\n\tDefaultRenderer,\r\n\tDepthRenderer,\r\n\tDistanceRenderer,\r\n\tFilter3DRenderer,\r\n\tRendererBase\r\n}",
    "import {ImageBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/ImageBase\";\r\nimport {BitmapImage2D}\t\t\t\tfrom \"awayjs-core/lib/image/BitmapImage2D\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Rectangle}\t\t\t\t\tfrom \"awayjs-core/lib/geom/Rectangle\";\r\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {LightBase}\t\t\t\t\tfrom \"awayjs-display/lib/display/LightBase\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {DirectionalLight}\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\r\nimport {PointLight}\t\t\t\t\tfrom \"awayjs-display/lib/display/PointLight\";\r\nimport {IEntity}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/IEntity\";\r\nimport {LightProbe}\t\t\t\t\tfrom \"awayjs-display/lib/display/LightProbe\";\r\nimport {Skybox}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Skybox\";\r\nimport {Scene}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Scene\";\r\nimport {ShadowMapperBase}\t\t\t\tfrom \"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase\";\r\nimport {INode}\t\t\t\t\t\tfrom \"awayjs-display/lib/partition/INode\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLCompareMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLCompareMode\";\r\nimport {ContextGLClearMask}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLClearMask\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"./RendererBase\";\r\nimport {DepthRenderer}\t\t\t\tfrom \"./DepthRenderer\";\r\nimport {DistanceRenderer}\t\t\t\tfrom \"./DistanceRenderer\";\r\nimport {Filter3DRenderer}\t\t\t\tfrom \"./Filter3DRenderer\";\r\nimport {Filter3DBase}\t\t\t\t\tfrom \"./filters/Filter3DBase\";\r\nimport {GL_SkyboxElements}\t\t\tfrom \"./elements/GL_SkyboxElements\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"./renderables/GL_RenderableBase\";\r\nimport {RTTBufferManager}\t\t\t\tfrom \"./managers/RTTBufferManager\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"./surfaces/passes/IPass\";\r\nimport {SurfacePool}\t\t\t\t\tfrom \"./surfaces/SurfacePool\";\r\n\r\n/**\r\n * The DefaultRenderer class provides the default rendering method. It renders the scene graph objects using the\r\n * materials assigned to them.\r\n *\r\n * @class away.render.DefaultRenderer\r\n */\r\nexport class DefaultRenderer extends RendererBase\r\n{\r\n\tpublic _pRequireDepthRender:boolean;\r\n\r\n\tprivate _pDistanceRenderer:DepthRenderer;\r\n\tprivate _pDepthRenderer:DepthRenderer;\r\n\tpublic _pFilter3DRenderer:Filter3DRenderer;\r\n\r\n\tpublic _pDepthRender:BitmapImage2D;\r\n\r\n\tprivate _antiAlias:number = 0;\r\n\tprivate _directionalLights:Array<DirectionalLight> = new Array<DirectionalLight>();\r\n\tprivate _pointLights:Array<PointLight> = new Array<PointLight>();\r\n\tprivate _lightProbes:Array<LightProbe> = new Array<LightProbe>();\r\n\r\n\tpublic get antiAlias():number\r\n\t{\r\n\t\treturn this._antiAlias;\r\n\t}\r\n\r\n\tpublic set antiAlias(value:number)\r\n\t{\r\n\t\tif (this._antiAlias == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._antiAlias = value;\r\n\r\n\t\tthis._pBackBufferInvalid = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get depthPrepass():boolean\r\n\t{\r\n\t\treturn this._depthPrepass;\r\n\t}\r\n\r\n\tpublic set depthPrepass(value:boolean)\r\n\t{\r\n\t\tthis._depthPrepass = value;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {*}\r\n\t */\r\n\tpublic get filters3d():Array<Filter3DBase>\r\n\t{\r\n\t\treturn this._pFilter3DRenderer? this._pFilter3DRenderer.filters : null;\r\n\t}\r\n\tpublic set filters3d(value:Array<Filter3DBase>)\r\n\t{\r\n\t\tif (value && value.length == 0)\r\n\t\t\tvalue = null;\r\n\r\n\t\tif (this._pFilter3DRenderer && !value) {\r\n\t\t\tthis._pFilter3DRenderer.dispose();\r\n\t\t\tthis._pFilter3DRenderer = null;\r\n\t\t} else if (!this._pFilter3DRenderer && value) {\r\n\t\t\tthis._pFilter3DRenderer = new Filter3DRenderer(this._pStage);\r\n\t\t\tthis._pFilter3DRenderer.filters = value;\r\n\t\t}\r\n\r\n\t\tif (this._pFilter3DRenderer) {\r\n\t\t\tthis._pFilter3DRenderer.filters = value;\r\n\t\t\tthis._pRequireDepthRender = this._pFilter3DRenderer.requireDepthRender;\r\n\t\t} else {\r\n\t\t\tthis._pRequireDepthRender = false;\r\n\r\n\t\t\tif (this._pDepthRender) {\r\n\t\t\t\tthis._pDepthRender.dispose();\r\n\t\t\t\tthis._pDepthRender = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new DefaultRenderer object.\r\n\t *\r\n\t * @param antiAlias The amount of anti-aliasing to use.\r\n\t * @param renderMode The render mode to use.\r\n\t */\r\n\tconstructor(stage:Stage = null, forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\")\r\n\t{\r\n\t\tsuper(stage, null, forceSoftware, profile, mode);\r\n\r\n\t\tif (stage)\r\n\t\t\tthis.shareContext = true;\r\n\r\n\t\tthis._pRttBufferManager = RTTBufferManager.getInstance(this._pStage);\r\n\r\n\t\tthis._pDepthRenderer = new DepthRenderer(this._pStage);\r\n\t\tthis._pDistanceRenderer = new DistanceRenderer(this._pStage);\r\n\r\n\t\tif (this._width == 0)\r\n\t\t\tthis.width = window.innerWidth;\r\n\t\telse\r\n\t\t\tthis._pRttBufferManager.viewWidth = this._width;\r\n\r\n\t\tif (this._height == 0)\r\n\t\t\tthis.height = window.innerHeight;\r\n\t\telse\r\n\t\t\tthis._pRttBufferManager.viewHeight = this._height;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic enterNode(node:INode):boolean\r\n\t{\r\n\t\tvar enter:boolean = super.enterNode(node);\r\n\r\n\t\tif (enter && node.debugVisible)\r\n\t\t\tthis.applyEntity(node.bounds.boundsPrimitive);\r\n\r\n\t\treturn enter;\r\n\t}\r\n\r\n\tpublic render(camera:Camera, scene:Scene):void\r\n\t{\r\n\t\tsuper.render(camera, scene);\r\n\r\n\t\tif (!this._pStage.recoverFromDisposal()) {//if context has Disposed by the OS,don't render at this frame\r\n\t\t\tthis._pBackBufferInvalid = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._pBackBufferInvalid)// reset or update render settings\r\n\t\t\tthis.pUpdateBackBuffer();\r\n\r\n\t\tif (this.shareContext && this._pContext)\r\n\t\t\tthis._pContext.clear(0, 0, 0, 1, 1, 0, ContextGLClearMask.DEPTH);\r\n\r\n\t\tif (this._pFilter3DRenderer) {\r\n\t\t\tthis.textureRatioX = this._pRttBufferManager.textureRatioX;\r\n\t\t\tthis.textureRatioY = this._pRttBufferManager.textureRatioY;\r\n\t\t} else {\r\n\t\t\tthis.textureRatioX = 1;\r\n\t\t\tthis.textureRatioY = 1;\r\n\t\t}\r\n\r\n\t\tif (this._pRequireDepthRender)\r\n\t\t\tthis.pRenderSceneDepthToTexture(camera, scene);\r\n\r\n\t\tif (this._depthPrepass)\r\n\t\t\tthis.pRenderDepthPrepass(camera, scene);\r\n\r\n\t\t//reset lights\r\n\t\tthis._directionalLights.length = 0;\r\n\t\tthis._pointLights.length = 0;\r\n\t\tthis._lightProbes.length = 0;\r\n\r\n\t\tif (this._pFilter3DRenderer && this._pContext) { //TODO\r\n\t\t\tthis._iRender(camera, scene, this._pFilter3DRenderer.getMainInputTexture(this._pStage), this._pRttBufferManager.renderToTextureRect);\r\n\t\t\tthis._pFilter3DRenderer.render(this._pStage, camera, this._pDepthRender);\r\n\t\t} else {\r\n\r\n\t\t\tif (this.shareContext)\r\n\t\t\t\tthis._iRender(camera, scene, null, this._pScissorRect);\r\n\t\t\telse\r\n\t\t\t\tthis._iRender(camera, scene);\r\n\t\t}\r\n\r\n\t\tif (!this.shareContext && this._pContext)\r\n\t\t\tthis._pContext.present();\r\n\r\n\t\t// register that a view has been rendered\r\n\t\tthis._pStage.bufferClear = false;\r\n\t}\r\n\r\n\tpublic pExecuteRender(camera:Camera, target:ImageBase = null, scissorRect:Rectangle = null, surfaceSelector:number = 0):void\r\n\t{\r\n\t\tthis.updateLights(camera);\r\n\r\n\t\tsuper.pExecuteRender(camera, target, scissorRect, surfaceSelector);\r\n\t}\r\n\r\n\tprivate updateLights(camera:Camera):void\r\n\t{\r\n\t\tvar len:number, i:number;\r\n\t\tvar light:LightBase;\r\n\t\tvar shadowMapper:ShadowMapperBase;\r\n\r\n\t\tlen = this._directionalLights.length;\r\n\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\t\tlight = this._directionalLights[i];\r\n\r\n\t\t\tshadowMapper = light.shadowMapper;\r\n\r\n\t\t\tif (light.shadowsEnabled && (shadowMapper.autoUpdateShadows || shadowMapper._iShadowsInvalid ))\r\n\t\t\t\tshadowMapper.iRenderDepthMap(camera, light.scene, this._pDepthRenderer);\r\n\t\t}\r\n\r\n\t\tlen = this._pointLights.length;\r\n\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\tlight = <LightBase> this._pointLights[i];\r\n\r\n\t\t\tshadowMapper = light.shadowMapper;\r\n\r\n\t\t\tif (light.shadowsEnabled && (shadowMapper.autoUpdateShadows || shadowMapper._iShadowsInvalid))\r\n\t\t\t\tshadowMapper.iRenderDepthMap(camera, light.scene, this._pDistanceRenderer);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param entity\r\n\t */\r\n\tpublic applyDirectionalLight(entity:IEntity):void\r\n\t{\r\n\t\tthis._directionalLights.push(<DirectionalLight> entity);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param entity\r\n\t */\r\n\tpublic applyLightProbe(entity:IEntity):void\r\n\t{\r\n\t\tthis._lightProbes.push(<LightProbe> entity);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param entity\r\n\t */\r\n\tpublic applyPointLight(entity:IEntity):void\r\n\t{\r\n\t\tthis._pointLights.push(<PointLight> entity);\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tif (!this.shareContext)\r\n\t\t\tthis._pStage.dispose();\r\n\r\n\t\tthis._pRttBufferManager.dispose();\r\n\t\tthis._pRttBufferManager = null;\r\n\r\n\t\tthis._pDepthRenderer.dispose();\r\n\t\tthis._pDistanceRenderer.dispose();\r\n\t\tthis._pDepthRenderer = null;\r\n\t\tthis._pDistanceRenderer = null;\r\n\r\n\t\tthis._pDepthRender = null;\r\n\r\n\t\tsuper.dispose();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic pRenderDepthPrepass(camera:Camera, scene:Scene):void\r\n\t{\r\n\t\tthis._pDepthRenderer.disableColor = true;\r\n\r\n\t\tif (this._pFilter3DRenderer) {\r\n\t\t\tthis._pDepthRenderer.textureRatioX = this._pRttBufferManager.textureRatioX;\r\n\t\t\tthis._pDepthRenderer.textureRatioY = this._pRttBufferManager.textureRatioY;\r\n\t\t\tthis._pDepthRenderer._iRender(camera, scene, this._pFilter3DRenderer.getMainInputTexture(this._pStage), this._pRttBufferManager.renderToTextureRect);\r\n\t\t} else {\r\n\t\t\tthis._pDepthRenderer.textureRatioX = 1;\r\n\t\t\tthis._pDepthRenderer.textureRatioY = 1;\r\n\t\t\tthis._pDepthRenderer._iRender(camera, scene);\r\n\t\t}\r\n\r\n\t\tthis._pDepthRenderer.disableColor = false;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic pRenderSceneDepthToTexture(camera:Camera, scene:Scene):void\r\n\t{\r\n\t\tif (this._pDepthTextureInvalid || !this._pDepthRender)\r\n\t\t\tthis.initDepthTexture(<IContextGL> this._pStage.context);\r\n\r\n\t\tthis._pDepthRenderer.textureRatioX = this._pRttBufferManager.textureRatioX;\r\n\t\tthis._pDepthRenderer.textureRatioY = this._pRttBufferManager.textureRatioY;\r\n\t\tthis._pDepthRenderer._iRender(camera, scene, this._pDepthRender);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Updates the backbuffer dimensions.\r\n\t */\r\n\tpublic pUpdateBackBuffer():void\r\n\t{\r\n\t\t// No reason trying to configure back buffer if there is no context available.\r\n\t\t// Doing this anyway (and relying on _stage to cache width/height for\r\n\t\t// context does get available) means usesSoftwareRendering won't be reliable.\r\n\t\tif (this._pStage.context && !this.shareContext) {\r\n\t\t\tif (this._width && this._height) {\r\n\t\t\t\tthis._pStage.configureBackBuffer(this._width, this._height, this._antiAlias, true);\r\n\t\t\t\tthis._pBackBufferInvalid = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initDepthTexture(context:IContextGL):void\r\n\t{\r\n\t\tthis._pDepthTextureInvalid = false;\r\n\r\n\t\tif (this._pDepthRender)\r\n\t\t\tthis._pDepthRender.dispose();\r\n\r\n\t\tthis._pDepthRender = new BitmapImage2D(this._pRttBufferManager.textureWidth, this._pRttBufferManager.textureHeight);\r\n\t}\r\n}",
    "import {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {INode}\t\t\t\t\t\tfrom \"awayjs-display/lib/partition/INode\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"./RendererBase\";\r\nimport {GL_DepthSurface}\t\t\t\tfrom \"./surfaces/GL_DepthSurface\";\r\n\r\n/**\r\n * The DepthRenderer class renders 32-bit depth information encoded as RGBA\r\n *\r\n * @class away.render.DepthRenderer\r\n */\r\nexport class DepthRenderer extends RendererBase\r\n{\r\n\t/**\r\n\t * Creates a new DepthRenderer object.\r\n\t * @param renderBlended Indicates whether semi-transparent objects should be rendered.\r\n\t * @param distanceBased Indicates whether the written depth value is distance-based or projected depth-based\r\n\t */\r\n\tconstructor(stage:Stage = null)\r\n\t{\r\n\t\tsuper(stage, GL_DepthSurface);\r\n\r\n\t\tthis._iBackgroundR = 1;\r\n\t\tthis._iBackgroundG = 1;\r\n\t\tthis._iBackgroundB = 1;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic enterNode(node:INode):boolean\r\n\t{\r\n\t\tvar enter:boolean = node._iCollectionMark != RendererBase._iCollectionMark && node.isCastingShadow();\r\n\r\n\t\tif (!enter) {\r\n\t\t\tnode._iCollectionMark = RendererBase._iCollectionMark;\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn super.enterNode(node);\r\n\t}\r\n}",
    "import {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {INode}\t\t\t\t\t\tfrom \"awayjs-display/lib/partition/INode\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"./RendererBase\";\r\nimport {GL_DistanceSurface}\t\t\tfrom \"./surfaces/GL_DistanceSurface\";\r\n\r\n/**\r\n * The DistanceRenderer class renders 32-bit depth information encoded as RGBA\r\n *\r\n * @class away.render.DistanceRenderer\r\n */\r\nexport class DistanceRenderer extends RendererBase\r\n{\r\n\t/**\r\n\t * Creates a new DistanceRenderer object.\r\n\t * @param renderBlended Indicates whether semi-transparent objects should be rendered.\r\n\t * @param distanceBased Indicates whether the written depth value is distance-based or projected depth-based\r\n\t */\r\n\tconstructor(stage:Stage = null)\r\n\t{\r\n\t\tsuper(stage, GL_DistanceSurface);\r\n\r\n\t\tthis._iBackgroundR = 1;\r\n\t\tthis._iBackgroundG = 1;\r\n\t\tthis._iBackgroundB = 1;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic enterNode(node:INode):boolean\r\n\t{\r\n\t\tvar enter:boolean = node._iCollectionMark != RendererBase._iCollectionMark && node.isCastingShadow();\r\n\r\n\t\tif (!enter) {\r\n\t\t\tnode._iCollectionMark = RendererBase._iCollectionMark;\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn super.enterNode(node);\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {GL_ImageBase}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_ImageBase\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLDrawMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLDrawMode\";\r\nimport {ContextGLBlendFactor}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLBlendFactor\";\r\nimport {ContextGLVertexBufferFormat}\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {IIndexBuffer}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IIndexBuffer\";\r\nimport {IVertexBuffer}\t\t\t\tfrom \"awayjs-stagegl/lib/base/IVertexBuffer\";\r\n\r\nimport {RTTEvent}\t\t\t\t\t\tfrom \"./events/RTTEvent\";\r\nimport {RTTBufferManager}\t\t\t\tfrom \"./managers/RTTBufferManager\";\r\nimport {Filter3DBase}\t\t\t\t\tfrom \"./filters/Filter3DBase\";\r\nimport {Filter3DTaskBase}\t\t\t\tfrom \"./filters/tasks/Filter3DTaskBase\";\r\n\r\n/**\r\n * @class away.render.Filter3DRenderer\r\n */\r\nexport class Filter3DRenderer\r\n{\r\n\tprivate _filters:Array<Filter3DBase>;\r\n\tprivate _tasks:Array<Filter3DTaskBase>;\r\n\tprivate _filterTasksInvalid:boolean;\r\n\tprivate _mainInputTexture:Image2D;\r\n\tprivate _requireDepthRender:boolean;\r\n\tprivate _rttManager:RTTBufferManager;\r\n\tprivate _stage:Stage;\r\n\tprivate _filterSizesInvalid:boolean = true;\r\n\tprivate _onRTTResizeDelegate:(event:RTTEvent) => void;\r\n\r\n\tconstructor(stage:Stage)\r\n\t{\r\n\t\tthis._onRTTResizeDelegate = (event:RTTEvent) => this.onRTTResize(event);\r\n\r\n\t\tthis._stage = stage;\r\n\t\tthis._rttManager = RTTBufferManager.getInstance(stage);\r\n\t\tthis._rttManager.addEventListener(RTTEvent.RESIZE, this._onRTTResizeDelegate);\r\n\r\n\t}\r\n\r\n\tprivate onRTTResize(event:RTTEvent):void\r\n\t{\r\n\t\tthis._filterSizesInvalid = true;\r\n\t}\r\n\r\n\tpublic get requireDepthRender():boolean\r\n\t{\r\n\t\treturn this._requireDepthRender;\r\n\t}\r\n\r\n\tpublic getMainInputTexture(stage:Stage):Image2D\r\n\t{\r\n\t\tif (this._filterTasksInvalid)\r\n\t\t\tthis.updateFilterTasks(stage);\r\n\r\n\t\treturn this._mainInputTexture;\r\n\t}\r\n\r\n\tpublic get filters():Filter3DBase[]\r\n\t{\r\n\t\treturn this._filters;\r\n\t}\r\n\r\n\tpublic set filters(value:Filter3DBase[])\r\n\t{\r\n\t\tthis._filters = value;\r\n\r\n\t\tthis._filterTasksInvalid = true;\r\n\r\n\t\tthis._requireDepthRender = false;\r\n\r\n\t\tif (!this._filters)\r\n\t\t\treturn;\r\n\r\n\t\tfor (var i:number = 0; i < this._filters.length; ++i)\r\n\t\t\tif (this._filters[i].requireDepthRender)\r\n\t\t\t\tthis._requireDepthRender = true;\r\n\r\n\t\tthis._filterSizesInvalid = true;\r\n\t}\r\n\r\n\tprivate updateFilterTasks(stage:Stage):void\r\n\t{\r\n\t\tvar len:number;\r\n\r\n\t\tif (this._filterSizesInvalid)\r\n\t\t\tthis.updateFilterSizes();\r\n\r\n\t\tif (!this._filters) {\r\n\t\t\tthis._tasks = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._tasks = new Array<Filter3DTaskBase>();\r\n\r\n\t\tlen = this._filters.length - 1;\r\n\r\n\t\tvar filter:Filter3DBase;\r\n\r\n\t\tfor (var i:number = 0; i <= len; ++i) {\r\n\r\n\t\t\t// make sure all internal tasks are linked together\r\n\t\t\tfilter = this._filters[i];\r\n\r\n\t\t\tfilter.setRenderTargets(i == len? null : this._filters[i + 1].getMainInputTexture(stage), stage);\r\n\r\n\t\t\tthis._tasks = this._tasks.concat(filter.tasks);\r\n\r\n\t\t}\r\n\r\n\t\tthis._mainInputTexture = this._filters[0].getMainInputTexture(stage);\r\n\r\n\t}\r\n\r\n\tpublic render(stage:Stage, camera:Camera, depthTexture:Image2D):void\r\n\t{\r\n\t\tvar len:number;\r\n\t\tvar i:number;\r\n\t\tvar task:Filter3DTaskBase;\r\n\t\tvar context:IContextGL = <IContextGL> stage.context;\r\n\r\n\t\tvar indexBuffer:IIndexBuffer = this._rttManager.indexBuffer;\r\n\r\n\t\tvar vertexBuffer:IVertexBuffer = this._rttManager.renderToTextureVertexBuffer;\r\n\r\n\t\tif (!this._filters)\r\n\t\t\treturn;\r\n\r\n\t\tif (this._filterSizesInvalid)\r\n\t\t\tthis.updateFilterSizes();\r\n\r\n\t\tif (this._filterTasksInvalid)\r\n\t\t\tthis.updateFilterTasks(stage);\r\n\r\n\t\tlen = this._filters.length;\r\n\r\n\t\tfor (i = 0; i < len; ++i)\r\n\t\t\tthis._filters[i].update(stage, camera);\r\n\r\n\t\tlen = this._tasks.length;\r\n\r\n\t\tif (len > 1) {\r\n\t\t\tcontext.setProgram(this._tasks[0].getProgram(stage));\r\n\t\t\tcontext.setVertexBufferAt(this._tasks[0]._positionIndex, vertexBuffer, 0, ContextGLVertexBufferFormat.FLOAT_2);\r\n\t\t\tcontext.setVertexBufferAt(this._tasks[0]._uvIndex, vertexBuffer, 8, ContextGLVertexBufferFormat.FLOAT_2);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < len; ++i) {\r\n\r\n\t\t\ttask = this._tasks[i];\r\n\r\n\t\t\tstage.setRenderTarget(task.target);\r\n\r\n\t\t\tcontext.setProgram(task.getProgram(stage));\r\n\t\t\t(<GL_ImageBase> stage.getAbstraction(task.getMainInputTexture(stage))).activate(task._inputTextureIndex, false);\r\n\r\n\r\n\t\t\tif (!task.target) {\r\n\r\n\t\t\t\tstage.scissorRect = null;\r\n\t\t\t\tvertexBuffer = this._rttManager.renderToScreenVertexBuffer;\r\n\t\t\t\tcontext.setVertexBufferAt(task._positionIndex, vertexBuffer, 0, ContextGLVertexBufferFormat.FLOAT_2);\r\n\t\t\t\tcontext.setVertexBufferAt(task._uvIndex, vertexBuffer, 8, ContextGLVertexBufferFormat.FLOAT_2);\r\n\r\n\t\t\t}\r\n\t\t\tcontext.clear(0.0, 0.0, 0.0, 0.0);\r\n\r\n\t\t\ttask.activate(stage, camera, depthTexture);\r\n\r\n\t\t\tcontext.setBlendFactors(ContextGLBlendFactor.ONE, ContextGLBlendFactor.ZERO);\r\n\t\t\tcontext.drawIndices(ContextGLDrawMode.TRIANGLES, indexBuffer, 0, 6);\r\n\r\n\t\t\ttask.deactivate(stage);\r\n\t\t}\r\n\r\n\t\tcontext.setTextureAt(0, null);\r\n\t\tcontext.setVertexBufferAt(0, null);\r\n\t\tcontext.setVertexBufferAt(1, null);\r\n\t}\r\n\r\n\tprivate updateFilterSizes():void\r\n\t{\r\n\t\tfor (var i:number = 0; i < this._filters.length; ++i) {\r\n\t\t\tthis._filters[i].textureWidth = this._rttManager.textureWidth;\r\n\t\t\tthis._filters[i].textureHeight = this._rttManager.textureHeight;\r\n\t\t\tthis._filters[i].rttManager = this._rttManager;\r\n\t\t}\r\n\r\n\t\tthis._filterSizesInvalid = true;\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis._rttManager.removeEventListener(RTTEvent.RESIZE, this._onRTTResizeDelegate);\r\n\t\tthis._rttManager = null;\r\n\t\tthis._stage = null;\r\n\t}\r\n}",
    "import {ImageBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/ImageBase\";\r\nimport {BitmapImage2D}\t\t\t\tfrom \"awayjs-core/lib/image/BitmapImage2D\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Matrix3DUtils}\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3DUtils\";\r\nimport {Plane3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Plane3D\";\r\nimport {Point}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Point\";\r\nimport {Rectangle}\t\t\t\t\tfrom \"awayjs-core/lib/geom/Rectangle\";\r\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\nimport {EventDispatcher}\t\t\t\tfrom \"awayjs-core/lib/events/EventDispatcher\";\r\nimport {IAssetClass}\t\t\t\t\tfrom \"awayjs-core/lib/library/IAssetClass\";\r\nimport {IAbstractionPool}\t\t\t\tfrom \"awayjs-core/lib/library/IAbstractionPool\";\r\nimport {ByteArray}\t\t\t\t\tfrom \"awayjs-core/lib/utils/ByteArray\";\r\n\r\nimport {IRenderable}\t\t\t\t\tfrom \"awayjs-display/lib/base/IRenderable\";\r\nimport {IRenderer}\t\t\t\t\tfrom \"awayjs-display/lib/IRenderer\";\r\nimport {INode}\t\t\t\t\t\tfrom \"awayjs-display/lib/partition/INode\";\r\nimport {DisplayObject}\t\t\t\tfrom \"awayjs-display/lib/display/DisplayObject\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {IEntity}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/IEntity\";\r\nimport {Scene}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Scene\";\r\nimport {RendererEvent}\t\t\t\tfrom \"awayjs-display/lib/events/RendererEvent\";\r\n\r\nimport {AGALMiniAssembler}\t\t\tfrom \"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler\";\r\nimport {ContextGLBlendFactor}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLBlendFactor\";\r\nimport {ContextGLCompareMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLCompareMode\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {StageEvent}\t\t\t\t\tfrom \"awayjs-stagegl/lib/events/StageEvent\";\r\nimport {StageManager}\t\t\t\t\tfrom \"awayjs-stagegl/lib/managers/StageManager\";\r\nimport {ProgramData}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/ProgramData\";\r\nimport {GL_IAssetClass}\t\t\t\tfrom \"awayjs-stagegl/lib/library/GL_IAssetClass\";\r\n\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"./elements/GL_ElementsBase\";\r\nimport {ISurfaceClassGL}\t\t\t\tfrom \"./surfaces/ISurfaceClassGL\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"./surfaces/GL_SurfaceBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"./renderables/GL_RenderableBase\";\r\nimport {RTTBufferManager}\t\t\t\tfrom \"./managers/RTTBufferManager\";\r\nimport {SurfacePool}\t\t\t\t\tfrom \"./surfaces/SurfacePool\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"./surfaces/passes/IPass\";\r\nimport {IEntitySorter}\t\t\t\tfrom \"./sort/IEntitySorter\";\r\nimport {RenderableMergeSort}\t\t\tfrom \"./sort/RenderableMergeSort\";\r\n\r\n\r\n/**\r\n * RendererBase forms an abstract base class for classes that are used in the rendering pipeline to render the\r\n * contents of a partition\r\n *\r\n * @class away.render.RendererBase\r\n */\r\nexport class RendererBase extends EventDispatcher implements IRenderer, IAbstractionPool\r\n{\r\n\tpublic static _iCollectionMark = 0;\r\n\tpublic static _abstractionClassPool:Object = new Object();\r\n\r\n\tprivate _objectPools:Object = new Object();\r\n\tprivate _abstractionPool:Object = new Object();\r\n\r\n\tprivate _maskConfig:number;\r\n\tprivate _activeMasksDirty:boolean;\r\n\tprivate _activeMasksConfig:Array<Array<number>> = new Array<Array<number>>();\r\n\tprivate _registeredMasks : Array<GL_RenderableBase> = new Array<GL_RenderableBase>();\r\n\tprivate _numUsedStreams:number = 0;\r\n\tprivate _numUsedTextures:number = 0;\r\n\r\n\tpublic _pContext:IContextGL;\r\n\tpublic _pStage:Stage;\r\n\tprivate _surfaceClassGL:ISurfaceClassGL;\r\n\t\r\n\tprivate _cameraPosition:Vector3D;\r\n\tpublic _cameraTransform:Matrix3D;\r\n\tprivate _cameraForward:Vector3D = new Vector3D();\r\n\r\n\tpublic _pRttBufferManager:RTTBufferManager;\r\n\tprivate _viewPort:Rectangle = new Rectangle();\r\n\tprivate _viewportDirty:boolean;\r\n\tprivate _scissorDirty:boolean;\r\n\r\n\tpublic _pBackBufferInvalid:boolean = true;\r\n\tpublic _pDepthTextureInvalid:boolean = true;\r\n\tpublic _depthPrepass:boolean = false;\r\n\tprivate _backgroundR:number = 0;\r\n\tprivate _backgroundG:number = 0;\r\n\tprivate _backgroundB:number = 0;\r\n\tprivate _backgroundAlpha:number = 1;\r\n\r\n\t// only used by renderers that need to render geometry to textures\r\n\tpublic _width:number;\r\n\tpublic _height:number;\r\n\r\n\tpublic textureRatioX:number = 1;\r\n\tpublic textureRatioY:number = 1;\r\n\r\n\tprivate _snapshotBitmapImage2D:BitmapImage2D;\r\n\tprivate _snapshotRequired:boolean;\r\n\r\n\tpublic _pRttViewProjectionMatrix:Matrix3D = new Matrix3D();\r\n\r\n\tprivate _localPos:Point = new Point();\r\n\tprivate _globalPos:Point = new Point();\r\n\tpublic _pScissorRect:Rectangle = new Rectangle();\r\n\r\n\tprivate _scissorUpdated:RendererEvent;\r\n\tprivate _viewPortUpdated:RendererEvent;\r\n\r\n\tprivate _onContextUpdateDelegate:(event:StageEvent) => void;\r\n\tprivate _onViewportUpdatedDelegate:(event:StageEvent) => void;\r\n\r\n\tpublic _pNumElements:number = 0;\r\n\r\n\tpublic _pOpaqueRenderableHead:GL_RenderableBase;\r\n\tpublic _pBlendedRenderableHead:GL_RenderableBase;\r\n\tpublic _disableColor:boolean = false;\r\n\tpublic _renderBlended:boolean = true;\r\n\tprivate _cullPlanes:Array<Plane3D>;\r\n\tprivate _customCullPlanes:Array<Plane3D>;\r\n\tprivate _numCullPlanes:number = 0;\r\n\tprivate _sourceEntity:IEntity;\r\n\tprivate _zIndex:number;\r\n\tprivate _renderSceneTransform:Matrix3D;\r\n\r\n\t\r\n\t/**\r\n\t * Defers control of ContextGL clear() and present() calls to Stage, enabling multiple Stage frameworks\r\n\t * to share the same ContextGL object.\r\n\t */\r\n\tpublic shareContext:boolean;\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get cullPlanes():Array<Plane3D>\r\n\t{\r\n\t\treturn this._customCullPlanes;\r\n\t}\r\n\r\n\tpublic set cullPlanes(value:Array<Plane3D>)\r\n\t{\r\n\t\tthis._customCullPlanes = value;\r\n\t}\r\n\r\n\r\n\tpublic get renderBlended():boolean\r\n\t{\r\n\t\treturn this._renderBlended;\r\n\t}\r\n\r\n\tpublic set renderBlended(value:boolean)\r\n\t{\r\n\t\tthis._renderBlended = value;\r\n\t}\r\n\r\n\r\n\tpublic get disableColor():boolean\r\n\t{\r\n\t\treturn this._disableColor;\r\n\t}\r\n\r\n\tpublic set disableColor(value:boolean)\r\n\t{\r\n\t\tthis._disableColor = value;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get numElements():number\r\n\t{\r\n\t\treturn this._pNumElements;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic renderableSorter:IEntitySorter;\r\n\r\n\r\n\t/**\r\n\t * A viewPort rectangle equivalent of the Stage size and position.\r\n\t */\r\n\tpublic get viewPort():Rectangle\r\n\t{\r\n\t\treturn this._viewPort;\r\n\t}\r\n\r\n\t/**\r\n\t * A scissor rectangle equivalent of the view size and position.\r\n\t */\r\n\tpublic get scissorRect():Rectangle\r\n\t{\r\n\t\treturn this._pScissorRect;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get x():number\r\n\t{\r\n\t\treturn this._localPos.x;\r\n\t}\r\n\r\n\tpublic set x(value:number)\r\n\t{\r\n\t\tif (this.x == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._globalPos.x = this._localPos.x = value;\r\n\r\n\t\tthis.updateGlobalPos();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get y():number\r\n\t{\r\n\t\treturn this._localPos.y;\r\n\t}\r\n\r\n\tpublic set y(value:number)\r\n\t{\r\n\t\tif (this.y == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._globalPos.y = this._localPos.y = value;\r\n\r\n\t\tthis.updateGlobalPos();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get width():number\r\n\t{\r\n\t\treturn this._width;\r\n\t}\r\n\r\n\tpublic set width(value:number)\r\n\t{\r\n\t\tif (this._width == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._width = value;\r\n\t\tthis._pScissorRect.width = value;\r\n\r\n\t\tif (this._pRttBufferManager)\r\n\t\t\tthis._pRttBufferManager.viewWidth = value;\r\n\r\n\t\tthis._pBackBufferInvalid = true;\r\n\t\tthis._pDepthTextureInvalid = true;\r\n\r\n\t\tthis.notifyScissorUpdate();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get height():number\r\n\t{\r\n\t\treturn this._height;\r\n\t}\r\n\r\n\tpublic set height(value:number)\r\n\t{\r\n\t\tif (this._height == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._height = value;\r\n\t\tthis._pScissorRect.height = value;\r\n\r\n\t\tif (this._pRttBufferManager)\r\n\t\t\tthis._pRttBufferManager.viewHeight = value;\r\n\r\n\t\tthis._pBackBufferInvalid = true;\r\n\t\tthis._pDepthTextureInvalid = true;\r\n\r\n\t\tthis.notifyScissorUpdate();\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new RendererBase object.\r\n\t */\r\n\tconstructor(stage:Stage = null, surfaceClassGL:ISurfaceClassGL = null, forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\")\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._onViewportUpdatedDelegate = (event:StageEvent) => this.onViewportUpdated(event);\r\n\t\tthis._onContextUpdateDelegate = (event:StageEvent) => this.onContextUpdate(event);\r\n\r\n\t\t//default sorting algorithm\r\n\t\tthis.renderableSorter = new RenderableMergeSort();\r\n\r\n\t\t//set stage\r\n\t\tthis._pStage = stage || StageManager.getInstance().getFreeStage(forceSoftware, profile, mode);\r\n\r\n\t\tthis._pStage.addEventListener(StageEvent.CONTEXT_CREATED, this._onContextUpdateDelegate);\r\n\t\tthis._pStage.addEventListener(StageEvent.CONTEXT_RECREATED, this._onContextUpdateDelegate);\r\n\t\tthis._pStage.addEventListener(StageEvent.VIEWPORT_UPDATED, this._onViewportUpdatedDelegate);\r\n\r\n\t\tthis._surfaceClassGL = surfaceClassGL;\r\n\t\t\r\n\t\t/*\r\n\t\t if (_backgroundImageRenderer)\r\n\t\t _backgroundImageRenderer.stage = value;\r\n\t\t */\r\n\t\tif (this._pStage.context)\r\n\t\t\tthis._pContext = <IContextGL> this._pStage.context;\r\n\t}\r\n\r\n\r\n\tpublic getAbstraction(renderable:IRenderable):GL_RenderableBase\r\n\t{\r\n\t\treturn this._abstractionPool[renderable.id] || (this._abstractionPool[renderable.id] = new (<GL_IAssetClass> RendererBase._abstractionClassPool[renderable.assetType])(renderable, this));\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param image\r\n\t */\r\n\tpublic clearAbstraction(renderable:IRenderable):void\r\n\t{\r\n\t\tthis._abstractionPool[renderable.id] = null;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param elementsClass\r\n\t * @returns SurfacePool\r\n\t */\r\n\tpublic getSurfacePool(elements:GL_ElementsBase):SurfacePool\r\n\t{\r\n\t\treturn this._objectPools[elements.elementsType] || (this._objectPools[elements.elementsType] = new SurfacePool(elements.elementsClass, this._pStage, this._surfaceClassGL));\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param imageObjectClass\r\n\t */\r\n\tpublic static registerAbstraction(renderableClass:GL_IAssetClass, assetClass:IAssetClass):void\r\n\t{\r\n\t\tRendererBase._abstractionClassPool[assetClass.assetType] = renderableClass;\r\n\t}\r\n\r\n\tpublic activatePass(pass:IPass, camera:Camera):void\r\n\t{\r\n\t\t//clear unused vertex streams\r\n\t\tvar i:number\r\n\t\tfor (i = pass.shader.numUsedStreams; i < this._numUsedStreams; i++)\r\n\t\t\tthis._pContext.setVertexBufferAt(i, null);\r\n\r\n\t\t//clear unused texture streams\r\n\t\tfor (i = pass.shader.numUsedTextures; i < this._numUsedTextures; i++)\r\n\t\t\tthis._pContext.setTextureAt(i, null);\r\n\r\n\t\t//check program data is uploaded\r\n\t\tvar programData:ProgramData = pass.shader.programData;\r\n\r\n\t\tif (!programData.program) {\r\n\t\t\tprogramData.program = this._pContext.createProgram();\r\n\t\t\tvar vertexByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part vertex 1\\n\" + programData.vertexString + \"endpart\"))['vertex'].data;\r\n\t\t\tvar fragmentByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part fragment 1\\n\" + programData.fragmentString + \"endpart\"))['fragment'].data;\r\n\t\t\tprogramData.program.upload(vertexByteCode, fragmentByteCode);\r\n\t\t}\r\n\r\n\t\t//set program data\r\n\t\tthis._pContext.setProgram(programData.program);\r\n\r\n\t\t//activate shader object through pass\r\n\t\tpass._iActivate(camera);\r\n\t}\r\n\r\n\tpublic deactivatePass(pass:IPass):void\r\n\t{\r\n\t\t//deactivate shader object through pass\r\n\t\tpass._iDeactivate();\r\n\r\n\t\tthis._numUsedStreams = pass.shader.numUsedStreams;\r\n\t\tthis._numUsedTextures = pass.shader.numUsedTextures;\r\n\t}\r\n\r\n\t/**\r\n\t * The background color's red component, used when clearing.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic get _iBackgroundR():number\r\n\t{\r\n\t\treturn this._backgroundR;\r\n\t}\r\n\r\n\tpublic set _iBackgroundR(value:number)\r\n\t{\r\n\t\tif (this._backgroundR == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._backgroundR = value;\r\n\r\n\t\tthis._pBackBufferInvalid = true;\r\n\t}\r\n\r\n\t/**\r\n\t * The background color's green component, used when clearing.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic get _iBackgroundG():number\r\n\t{\r\n\t\treturn this._backgroundG;\r\n\t}\r\n\r\n\tpublic set _iBackgroundG(value:number)\r\n\t{\r\n\t\tif (this._backgroundG == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._backgroundG = value;\r\n\r\n\t\tthis._pBackBufferInvalid = true;\r\n\t}\r\n\r\n\t/**\r\n\t * The background color's blue component, used when clearing.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic get _iBackgroundB():number\r\n\t{\r\n\t\treturn this._backgroundB;\r\n\t}\r\n\r\n\tpublic set _iBackgroundB(value:number)\r\n\t{\r\n\t\tif (this._backgroundB == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._backgroundB = value;\r\n\r\n\t\tthis._pBackBufferInvalid = true;\r\n\t}\r\n\r\n\tpublic get context():IContextGL\r\n\t{\r\n\t\treturn this._pContext;\r\n\t}\r\n\r\n\t/**\r\n\t * The Stage that will provide the ContextGL used for rendering.\r\n\t */\r\n\tpublic get stage():Stage\r\n\t{\r\n\t\treturn this._pStage;\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes the resources used by the RendererBase.\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tfor (var id in this._abstractionPool)\r\n\t\t\tthis._abstractionPool[id].clear();\r\n\r\n\t\tthis._abstractionPool = null;\r\n\r\n\t\tthis._pStage.removeEventListener(StageEvent.CONTEXT_CREATED, this._onContextUpdateDelegate);\r\n\t\tthis._pStage.removeEventListener(StageEvent.CONTEXT_RECREATED, this._onContextUpdateDelegate);\r\n\t\tthis._pStage.removeEventListener(StageEvent.VIEWPORT_UPDATED, this._onViewportUpdatedDelegate);\r\n\r\n\t\tthis._pStage = null;\r\n\t\tthis._pContext = null;\r\n\t\t/*\r\n\t\t if (_backgroundImageRenderer) {\r\n\t\t _backgroundImageRenderer.dispose();\r\n\t\t _backgroundImageRenderer = null;\r\n\t\t }\r\n\t\t */\r\n\t}\r\n\r\n\tpublic render(camera:Camera, scene:Scene):void\r\n\t{\r\n\t\tthis._viewportDirty = false;\r\n\t\tthis._scissorDirty = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the potentially visible geometry to the back buffer or texture.\r\n\t * @param target An option target texture to render to.\r\n\t * @param surfaceSelector The index of a CubeTexture's face to render to.\r\n\t * @param additionalClearMask Additional clear mask information, in case extra clear channels are to be omitted.\r\n\t */\r\n\tpublic _iRender(camera:Camera, scene:Scene, target:ImageBase = null, scissorRect:Rectangle = null, surfaceSelector:number = 0):void\r\n\t{\r\n\t\t//TODO refactor setTarget so that rendertextures are created before this check\r\n\t\tif (!this._pStage || !this._pContext)\r\n\t\t\treturn;\r\n\r\n\t\t//reset head values\r\n\t\tthis._pBlendedRenderableHead = null;\r\n\t\tthis._pOpaqueRenderableHead = null;\r\n\t\tthis._pNumElements = 0;\r\n\r\n\t\tthis._cullPlanes = this._customCullPlanes? this._customCullPlanes : camera.frustumPlanes;\r\n\t\tthis._numCullPlanes = this._cullPlanes? this._cullPlanes.length : 0;\r\n\t\tthis._cameraPosition = camera.scenePosition;\r\n\t\tthis._cameraTransform = camera.sceneTransform;\r\n\t\tthis._cameraForward = Matrix3DUtils.getForward(camera.sceneTransform, this._cameraForward);\r\n\r\n\t\tRendererBase._iCollectionMark++;\r\n\r\n\t\tscene.traversePartitions(this);\r\n\r\n\t\t//sort the resulting renderables\r\n\t\tif (this.renderableSorter) {\r\n\t\t\tthis._pOpaqueRenderableHead = <GL_RenderableBase> this.renderableSorter.sortOpaqueRenderables(this._pOpaqueRenderableHead);\r\n\t\t\tthis._pBlendedRenderableHead = <GL_RenderableBase> this.renderableSorter.sortBlendedRenderables(this._pBlendedRenderableHead);\r\n\t\t}\r\n\r\n\t\tthis._pRttViewProjectionMatrix.copyFrom(camera.viewProjection);\r\n\t\tthis._pRttViewProjectionMatrix.appendScale(this.textureRatioX, this.textureRatioY, 1);\r\n\r\n\t\tthis.pExecuteRender(camera, target, scissorRect, surfaceSelector);\r\n\r\n\t\t// generate mip maps on target (if target exists) //TODO\r\n\t\t//if (target)\r\n\t\t//\t(<Texture>target).generateMipmaps();\r\n\r\n\t\t// clear buffers\r\n\t\tfor (var i:number = 0; i < 8; ++i) {\r\n\t\t\tthis._pContext.setVertexBufferAt(i, null);\r\n\t\t\tthis._pContext.setTextureAt(i, null);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _iRenderCascades(camera:Camera, scene:Scene, target:ImageBase, numCascades:number, scissorRects:Array<Rectangle>, cameras:Array<Camera>):void\r\n\t{\r\n\t\tthis._pStage.setRenderTarget(target, true, 0);\r\n\t\tthis._pContext.clear(1, 1, 1, 1, 1, 0);\r\n\r\n\t\tthis._pContext.setBlendFactors(ContextGLBlendFactor.ONE, ContextGLBlendFactor.ZERO);\r\n\t\tthis._pContext.setDepthTest(true, ContextGLCompareMode.LESS);\r\n\r\n\t\tvar head:GL_RenderableBase = this._pOpaqueRenderableHead;\r\n\r\n\t\tvar first:boolean = true;\r\n\r\n\t\t//TODO cascades must have separate collectors, rather than separate draw commands\r\n\t\tfor (var i:number = numCascades - 1; i >= 0; --i) {\r\n\t\t\tthis._pStage.scissorRect = scissorRects[i];\r\n\t\t\t//this.drawCascadeRenderables(head, cameras[i], first? null : cameras[i].frustumPlanes);\r\n\t\t\tfirst = false;\r\n\t\t}\r\n\r\n\t\t//line required for correct rendering when using away3d with starling. DO NOT REMOVE UNLESS STARLING INTEGRATION IS RETESTED!\r\n\t\tthis._pContext.setDepthTest(false, ContextGLCompareMode.LESS_EQUAL);\r\n\r\n\t\tthis._pStage.scissorRect = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the potentially visible geometry to the back buffer or texture. Only executed if everything is set up.\r\n\t *\r\n\t * @param target An option target texture to render to.\r\n\t * @param surfaceSelector The index of a CubeTexture's face to render to.\r\n\t * @param additionalClearMask Additional clear mask information, in case extra clear channels are to be omitted.\r\n\t */\r\n\tpublic pExecuteRender(camera:Camera, target:ImageBase = null, scissorRect:Rectangle = null, surfaceSelector:number = 0):void\r\n\t{\r\n\t\tthis._pStage.setRenderTarget(target, true, surfaceSelector);\r\n\r\n\t\tif ((target || !this.shareContext) && !this._depthPrepass)\r\n\t\t\tthis._pContext.clear(this._backgroundR, this._backgroundG, this._backgroundB, this._backgroundAlpha, 1, 0);\r\n\r\n\t\tthis._pStage.scissorRect = scissorRect;\r\n\r\n\t\t/*\r\n\t\t if (_backgroundImageRenderer)\r\n\t\t _backgroundImageRenderer.render();\r\n\t\t */\r\n\r\n\t\tthis._pContext.setBlendFactors(ContextGLBlendFactor.ONE, ContextGLBlendFactor.ZERO);\r\n\r\n\t\tthis.pDraw(camera);\r\n\r\n\t\t//line required for correct rendering when using away3d with starling. DO NOT REMOVE UNLESS STARLING INTEGRATION IS RETESTED!\r\n\t\t//this._pContext.setDepthTest(false, ContextGLCompareMode.LESS_EQUAL); //oopsie\r\n\r\n\t\tif (!this.shareContext) {\r\n\t\t\tif (this._snapshotRequired && this._snapshotBitmapImage2D) {\r\n\t\t\t\tthis._pContext.drawToBitmapImage2D(this._snapshotBitmapImage2D);\r\n\t\t\t\tthis._snapshotRequired = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._pStage.scissorRect = null;\r\n\t}\r\n\r\n\t/*\r\n\t * Will draw the renderer's output on next render to the provided bitmap data.\r\n\t * */\r\n\tpublic queueSnapshot(bmd:BitmapImage2D):void\r\n\t{\r\n\t\tthis._snapshotRequired = true;\r\n\t\tthis._snapshotBitmapImage2D = bmd;\r\n\t}\r\n\r\n\t/**\r\n\t * Performs the actual drawing of geometry to the target.\r\n\t */\r\n\tpublic pDraw(camera:Camera):void\r\n\t{\r\n\t\tthis._pContext.setDepthTest(true, ContextGLCompareMode.LESS);\r\n\r\n\t\tif (this._disableColor)\r\n\t\t\tthis._pContext.setColorMask(false, false, false, false);\r\n\r\n\t\tthis.drawRenderables(camera, this._pOpaqueRenderableHead);\r\n\r\n\t\tif (this._renderBlended)\r\n\t\t\tthis.drawRenderables(camera, this._pBlendedRenderableHead);\r\n\r\n\t\tif (this._disableColor)\r\n\t\t\tthis._pContext.setColorMask(true, true, true, true);\r\n\t}\r\n\r\n\t//private drawCascadeRenderables(renderableGL:GL_RenderableBase, camera:Camera, cullPlanes:Array<Plane3D>)\r\n\t//{\r\n\t//\tvar renderableGL2:GL_RenderableBase;\r\n\t//\tvar render:GL_SurfaceBase;\r\n\t//\tvar pass:IPass;\r\n\t//\r\n\t//\twhile (renderableGL) {\r\n\t//\t\trenderableGL2 = renderableGL;\r\n\t//\t\trender = renderableGL.render;\r\n\t//\t\tpass = render.passes[0] //assuming only one pass per material\r\n\t//\r\n\t//\t\tthis.activatePass(renderableGL, pass, camera);\r\n\t//\r\n\t//\t\tdo {\r\n\t//\t\t\t// if completely in front, it will fall in a different cascade\r\n\t//\t\t\t// do not use near and far planes\r\n\t//\t\t\tif (!cullPlanes || renderableGL2.sourceEntity.worldBounds.isInFrustum(cullPlanes, 4)) {\r\n\t//\t\t\t\trenderableGL2._iRender(pass, camera, this._pRttViewProjectionMatrix);\r\n\t//\t\t\t} else {\r\n\t//\t\t\t\trenderableGL2.cascaded = true;\r\n\t//\t\t\t}\r\n\t//\r\n\t//\t\t\trenderableGL2 = renderableGL2.next;\r\n\t//\r\n\t//\t\t} while (renderableGL2 && renderableGL2.render == render && !renderableGL2.cascaded);\r\n\t//\r\n\t//\t\tthis.deactivatePass(renderableGL, pass);\r\n\t//\r\n\t//\t\trenderableGL = renderableGL2;\r\n\t//\t}\r\n\t//}\r\n\r\n\t/**\r\n\t * Draw a list of renderables.\r\n\t *\r\n\t * @param renderables The renderables to draw.\r\n\t */\r\n\tpublic drawRenderables(camera:Camera, renderableGL:GL_RenderableBase):void\r\n\t{\r\n\t\tvar i:number;\r\n\t\tvar len:number;\r\n\t\tvar renderableGL2:GL_RenderableBase;\r\n\t\tvar surfaceGL:GL_SurfaceBase;\r\n\t\tvar passes:Array<IPass>;\r\n\t\tvar pass:IPass;\r\n\r\n\t\tthis._pContext.setStencilActions(\"frontAndBack\", \"always\", \"keep\", \"keep\", \"keep\");\r\n\r\n\t\tthis._registeredMasks.length = 0;\r\n\t\tvar gl = this._pContext[\"_gl\"];\r\n\t\tif(gl) {\r\n\t\t\tgl.disable(gl.STENCIL_TEST);\r\n\t\t}\r\n\r\n\t\tthis._maskConfig = 0;\r\n\r\n\t\twhile (renderableGL) {\r\n\t\t\tsurfaceGL = renderableGL.surfaceGL;\r\n\t\t\tpasses = surfaceGL.passes;\r\n\r\n\t\t\t// otherwise this would result in depth rendered anyway because fragment shader kil is ignored\r\n\t\t\tif (this._disableColor && surfaceGL._surface.alphaThreshold != 0) {\r\n\t\t\t\trenderableGL2 = renderableGL;\r\n\t\t\t\t// fast forward\r\n\t\t\t\tdo {\r\n\t\t\t\t\trenderableGL2 = renderableGL2.next;\r\n\r\n\t\t\t\t} while (renderableGL2 && renderableGL2.surfaceGL == surfaceGL);\r\n\t\t\t} else {\r\n\t\t\t\tif (this._activeMasksDirty || this._checkMasksConfig(renderableGL.masksConfig)) {\r\n\t\t\t\t\tthis._activeMasksConfig = renderableGL.masksConfig;\r\n\t\t\t\t\tif (!this._activeMasksConfig.length) {\r\n\t\t\t\t\t\t// disable stencil\r\n\t\t\t\t\t\tif(gl) {\r\n\t\t\t\t\t\t\tgl.disable(gl.STENCIL_TEST);\r\n\t\t\t\t\t\t\tgl.stencilFunc(gl.ALWAYS, 0, 0xff);\r\n\t\t\t\t\t\t\tgl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._renderMasks(camera, renderableGL.sourceEntity._iAssignedMasks());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._activeMasksDirty = false;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//iterate through each shader object\r\n\t\t\t\tlen = passes.length;\r\n\t\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t\trenderableGL2 = renderableGL;\r\n\t\t\t\t\tpass = passes[i];\r\n\r\n\t\t\t\t\tthis.activatePass(pass, camera);\r\n\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tif (renderableGL2.maskId !== -1) {\r\n\t\t\t\t\t\t\tif (i == 0)\r\n\t\t\t\t\t\t\t\tthis._registerMask(renderableGL2);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trenderableGL2._iRender(pass, camera, this._pRttViewProjectionMatrix);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trenderableGL2 = renderableGL2.next;\r\n\r\n\t\t\t\t\t} while (renderableGL2 && renderableGL2.surfaceGL == surfaceGL && !(this._activeMasksDirty = this._checkMasksConfig(renderableGL2.masksConfig)));\r\n\r\n\t\t\t\t\tthis.deactivatePass(pass);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\trenderableGL = renderableGL2;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Assign the context once retrieved\r\n\t */\r\n\tprivate onContextUpdate(event:StageEvent):void\r\n\t{\r\n\t\tthis._pContext = <IContextGL> this._pStage.context;\r\n\t}\r\n\r\n\tpublic get _iBackgroundAlpha():number\r\n\t{\r\n\t\treturn this._backgroundAlpha;\r\n\t}\r\n\r\n\tpublic set _iBackgroundAlpha(value:number)\r\n\t{\r\n\t\tif (this._backgroundAlpha == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._backgroundAlpha = value;\r\n\r\n\t\tthis._pBackBufferInvalid = true;\r\n\t}\r\n\r\n\t/*\r\n\t public get iBackground():Texture2DBase\r\n\t {\r\n\t return this._background;\r\n\t }\r\n\t */\r\n\r\n\t/*\r\n\t public set iBackground(value:Texture2DBase)\r\n\t {\r\n\t if (this._backgroundImageRenderer && !value) {\r\n\t this._backgroundImageRenderer.dispose();\r\n\t this._backgroundImageRenderer = null;\r\n\t }\r\n\r\n\t if (!this._backgroundImageRenderer && value)\r\n\t {\r\n\r\n\t this._backgroundImageRenderer = new BackgroundImageRenderer(this._pStage);\r\n\r\n\t }\r\n\r\n\r\n\t this._background = value;\r\n\r\n\t if (this._backgroundImageRenderer)\r\n\t this._backgroundImageRenderer.texture = value;\r\n\t }\r\n\t */\r\n\t/*\r\n\t public get backgroundImageRenderer():BackgroundImageRenderer\r\n\t {\r\n\t return _backgroundImageRenderer;\r\n\t }\r\n\t */\r\n\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tprivate notifyScissorUpdate():void\r\n\t{\r\n\t\tif (this._scissorDirty)\r\n\t\t\treturn;\r\n\r\n\t\tthis._scissorDirty = true;\r\n\r\n\t\tif (!this._scissorUpdated)\r\n\t\t\tthis._scissorUpdated = new RendererEvent(RendererEvent.SCISSOR_UPDATED);\r\n\r\n\t\tthis.dispatchEvent(this._scissorUpdated);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tprivate notifyViewportUpdate():void\r\n\t{\r\n\t\tif (this._viewportDirty)\r\n\t\t\treturn;\r\n\r\n\t\tthis._viewportDirty = true;\r\n\r\n\t\tif (!this._viewPortUpdated)\r\n\t\t\tthis._viewPortUpdated = new RendererEvent(RendererEvent.VIEWPORT_UPDATED);\r\n\r\n\t\tthis.dispatchEvent(this._viewPortUpdated);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onViewportUpdated(event:StageEvent):void\r\n\t{\r\n\t\tthis._viewPort = this._pStage.viewPort;\r\n\t\t//TODO stop firing viewport updated for every stagegl viewport change\r\n\r\n\t\tif (this.shareContext) {\r\n\t\t\tthis._pScissorRect.x = this._globalPos.x - this._pStage.x;\r\n\t\t\tthis._pScissorRect.y = this._globalPos.y - this._pStage.y;\r\n\t\t\tthis.notifyScissorUpdate();\r\n\t\t}\r\n\r\n\t\tthis.notifyViewportUpdate();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic updateGlobalPos():void\r\n\t{\r\n\t\tif (this.shareContext) {\r\n\t\t\tthis._pScissorRect.x = this._globalPos.x - this._viewPort.x;\r\n\t\t\tthis._pScissorRect.y = this._globalPos.y - this._viewPort.y;\r\n\t\t} else {\r\n\t\t\tthis._pScissorRect.x = 0;\r\n\t\t\tthis._pScissorRect.y = 0;\r\n\t\t\tthis._viewPort.x = this._globalPos.x;\r\n\t\t\tthis._viewPort.y = this._globalPos.y;\r\n\t\t}\r\n\r\n\t\tthis.notifyScissorUpdate();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param node\r\n\t * @returns {boolean}\r\n\t */\r\n\tpublic enterNode(node:INode):boolean\r\n\t{\r\n\t\tvar enter:boolean = node._iCollectionMark != RendererBase._iCollectionMark && node.isRenderable() && node.isInFrustum(this._cullPlanes, this._numCullPlanes);\r\n\r\n\t\tnode._iCollectionMark = RendererBase._iCollectionMark;\r\n\r\n\t\treturn enter;\r\n\t}\r\n\r\n\tpublic applyEntity(entity:IEntity):void\r\n\t{\r\n\t\tthis._sourceEntity = entity;\r\n\r\n\t\t// project onto camera's z-axis\r\n\t\tthis._zIndex = entity.zOffset + this._cameraPosition.subtract(entity.scenePosition).dotProduct(this._cameraForward);\r\n\r\n\t\t//save sceneTransform\r\n\t\tthis._renderSceneTransform = entity.getRenderSceneTransform(this._cameraTransform);\r\n\r\n\t\t//collect renderables\r\n\t\tentity._acceptTraverser(this);\r\n\t}\r\n\r\n\tpublic applyRenderable(renderable:IRenderable):void\r\n\t{\r\n\t\tvar renderableGL:GL_RenderableBase = this.getAbstraction(renderable);\r\n\t\tvar surfaceGL:GL_SurfaceBase = renderableGL.surfaceGL;\r\n\r\n\t\t//set local vars for faster referencing\r\n\t\trenderableGL.surfaceID = surfaceGL.surfaceID;\r\n\t\trenderableGL.renderOrderId = surfaceGL.renderOrderId;\r\n\r\n\t\trenderableGL.cascaded = false;\r\n\r\n\t\trenderableGL.sourceEntity = this._sourceEntity;\r\n\t\trenderableGL.zIndex = this._zIndex;\r\n\t\trenderableGL.maskId = this._sourceEntity._iAssignedMaskId();\r\n\t\trenderableGL.masksConfig = this._sourceEntity._iMasksConfig();\r\n\r\n\t\t//store reference to scene transform\r\n\t\trenderableGL.renderSceneTransform = this._renderSceneTransform;\r\n\r\n\t\tif (surfaceGL.requiresBlending) {\r\n\t\t\trenderableGL.next = this._pBlendedRenderableHead;\r\n\t\t\tthis._pBlendedRenderableHead = renderableGL;\r\n\t\t} else {\r\n\t\t\trenderableGL.next = this._pOpaqueRenderableHead;\r\n\t\t\tthis._pOpaqueRenderableHead = renderableGL;\r\n\t\t}\r\n\r\n\t\tthis._pNumElements += renderableGL.elementsGL.elements.numElements;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param entity\r\n\t */\r\n\tpublic applyDirectionalLight(entity:IEntity):void\r\n\t{\r\n\t\t//don't do anything here\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param entity\r\n\t */\r\n\tpublic applyLightProbe(entity:IEntity):void\r\n\t{\r\n\t\t//don't do anything here\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param entity\r\n\t */\r\n\tpublic applyPointLight(entity:IEntity):void\r\n\t{\r\n\t\t//don't do anything here\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param entity\r\n\t */\r\n\tpublic applySkybox(entity:IEntity):void\r\n\t{\r\n\t\t//don't do anything here\r\n\t}\r\n\r\n\tprivate _registerMask(obj:GL_RenderableBase):void\r\n\t{\r\n\t\t//console.log(\"registerMask\");\r\n\t\tthis._registeredMasks.push(obj);\r\n\t}\r\n\r\n\tpublic _renderMasks(camera:Camera, masks:DisplayObject[][]):void\r\n\t{\r\n\t\tvar gl = this._pContext[\"_gl\"];\r\n\t\t//var oldRenderTarget = this._stage.renderTarget;\r\n\r\n\t\t//this._stage.setRenderTarget(this._image);\r\n\t\t//this._stage.clear();\r\n\t\tthis._pContext.setColorMask(false, false, false, false);\r\n\t\t// TODO: Could we create masks within masks by providing a previous configID, and supply \"clear/keep\" on stencil fail\r\n\t\t//context.setStencilActions(\"frontAndBack\", \"always\", \"set\", \"set\", \"set\");\r\n\t\tgl.enable(gl.STENCIL_TEST);\r\n\t\tthis._maskConfig++;\r\n\t\tgl.stencilFunc(gl.ALWAYS, this._maskConfig, 0xff);\r\n\t\tgl.stencilOp(gl.REPLACE, gl.REPLACE, gl.REPLACE);\r\n\r\n\t\tvar numLayers:number = masks.length;\r\n\t\tvar numRenderables:number = this._registeredMasks.length;\r\n\t\tvar renderableGL:GL_RenderableBase;\r\n\t\tvar children:Array<DisplayObject>;\r\n\t\tvar numChildren:number;\r\n\t\tvar mask:DisplayObject;\r\n\r\n\t\tfor (var i:number = 0; i < numLayers; ++i) {\r\n\t\t\tif (i != 0) {\r\n\t\t\t\tgl.stencilFunc(gl.EQUAL, this._maskConfig, 0xff);\r\n\t\t\t\tgl.stencilOp(gl.KEEP, gl.INCR, gl.INCR);\r\n\t\t\t\tthis._maskConfig++;\r\n\t\t\t}\r\n\r\n\t\t\tchildren = masks[i];\r\n\t\t\tnumChildren = children.length;\r\n\r\n\t\t\tfor (var j:number = 0; j < numChildren; ++j) {\r\n\t\t\t\tmask = children[j];\r\n\t\t\t\tfor (var k:number = 0; k < numRenderables; ++k) {\r\n\t\t\t\t\trenderableGL = this._registeredMasks[k];\r\n\t\t\t\t\t//console.log(\"testing for \" + mask[\"hierarchicalMaskID\"] + \", \" + mask.name);\r\n\t\t\t\t\tif (renderableGL.maskId == mask.id) {\r\n\t\t\t\t\t\t//console.log(\"Rendering hierarchicalMaskID \" + mask[\"hierarchicalMaskID\"]);\r\n\t\t\t\t\t\tthis._drawMask(camera, renderableGL);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgl.stencilFunc(gl.EQUAL, this._maskConfig, 0xff);\r\n\t\tgl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\r\n\r\n\t\tthis._pContext.setColorMask(true, true, true, true);\r\n\t\tthis._pContext.setDepthTest(true, ContextGLCompareMode.LESS);\r\n\t\t//this._stage.setRenderTarget(oldRenderTarget);\r\n\t}\r\n\r\n\tprivate _drawMask(camera:Camera, renderableGL:GL_RenderableBase):void\r\n\t{\r\n\t\tvar surfaceGL = renderableGL.surfaceGL;\r\n\t\tvar passes = surfaceGL.passes;\r\n\t\tvar len = passes.length;\r\n\t\tvar pass = passes[len-1];\r\n\r\n\t\tthis.activatePass(pass, camera);\r\n\t\tthis._pContext.setDepthTest(false, ContextGLCompareMode.LESS); //TODO: setup so as not to override activate\r\n\t\t// only render last pass for now\r\n\t\trenderableGL._iRender(pass, camera, this._pRttViewProjectionMatrix);\r\n\t\tthis.deactivatePass(pass);\r\n\t}\r\n\r\n\tprivate _checkMasksConfig(masksConfig:Array<Array<number>>):boolean\r\n\t{\r\n\t\tif (this._activeMasksConfig.length != masksConfig.length)\r\n\t\t\treturn true;\r\n\r\n\t\tvar numLayers:number = masksConfig.length;\r\n\t\tvar numChildren:number;\r\n\t\tvar childConfig:Array<number>;\r\n\t\tvar activeNumChildren:number;\r\n\t\tvar activeChildConfig:Array<number>;\r\n\t\tfor (var i:number = 0; i < numLayers; i++) {\r\n\t\t\tchildConfig = masksConfig[i];\r\n\t\t\tnumChildren = childConfig.length;\r\n\t\t\tactiveChildConfig = this._activeMasksConfig[i];\r\n\t\t\tactiveNumChildren = activeChildConfig.length;\r\n\t\t\tif (activeNumChildren != numChildren)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tfor (var j:number = 0; j < numChildren; j++) {\r\n\t\t\t\tif (activeChildConfig[j] != childConfig[j])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}",
    "import {IAsset}\t\t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\r\nimport {AssetBase}\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetBase\";\r\nimport {AbstractMethodError}\t\t\tfrom \"awayjs-core/lib/errors/AbstractMethodError\";\r\n\r\nimport {AnimationNodeBase}\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {AnimationSetError}\t\t\tfrom \"../errors/AnimationSetError\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\n\r\n/**\r\n * Provides an abstract base class for data set classes that hold animation data for use in animator classes.\r\n *\r\n * @see away.animators.AnimatorBase\r\n */\r\nexport class AnimationSetBase extends AssetBase implements IAsset\r\n{\r\n\tpublic static assetType:string = \"[asset AnimationSet]\";\r\n\r\n\tprivate _usesCPU:boolean;\r\n\tprivate _animations:Array<AnimationNodeBase> = new Array<AnimationNodeBase>();\r\n\tprivate _animationNames:Array<string> = new Array<string>();\r\n\tprivate _animationDictionary:Object = new Object();\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves a temporary GPU register that's still free.\r\n\t *\r\n\t * @param exclude An array of non-free temporary registers.\r\n\t * @param excludeAnother An additional register that's not free.\r\n\t * @return A temporary register that can be used.\r\n\t */\r\n\tpublic _pFindTempReg(exclude:Array<string>, excludeAnother:string = null):string\r\n\t{\r\n\t\tvar i:number = 0;\r\n\t\tvar reg:string;\r\n\r\n\t\twhile (true) {\r\n\t\t\treg = \"vt\" + i;\r\n\t\t\tif (exclude.indexOf(reg) == -1 && excludeAnother != reg)\r\n\t\t\t\treturn reg;\r\n\t\t\t++i;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the properties of the animation data contained within the set combined with\r\n\t * the vertex registers already in use on shading materials allows the animation data to utilise\r\n\t * GPU calls.\r\n\t */\r\n\tpublic get usesCPU():boolean\r\n\t{\r\n\t\treturn this._usesCPU;\r\n\t}\r\n\r\n\t/**\r\n\t * Called by the material to reset the GPU indicator before testing whether register space in the shader\r\n\t * is available for running GPU-based animation code.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic resetGPUCompatibility():void\r\n\t{\r\n\t\tthis._usesCPU = false;\r\n\t}\r\n\r\n\tpublic cancelGPUCompatibility():void\r\n\t{\r\n\t\tthis._usesCPU = true;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, shadedTarget:ShaderRegisterElement):string\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALUVCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic doneAGALCode(shader:ShaderBase):void\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn AnimationSetBase.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a vector of animation state objects that make up the contents of the animation data set.\r\n\t */\r\n\tpublic get animations():Array<AnimationNodeBase>\r\n\t{\r\n\t\treturn this._animations;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a vector of animation state objects that make up the contents of the animation data set.\r\n\t */\r\n\tpublic get animationNames():Array<string>\r\n\t{\r\n\t\treturn this._animationNames;\r\n\t}\r\n\r\n\t/**\r\n\t * Check to determine whether a state is registered in the animation set under the given name.\r\n\t *\r\n\t * @param stateName The name of the animation state object to be checked.\r\n\t */\r\n\tpublic hasAnimation(name:string):boolean\r\n\t{\r\n\t\treturn this._animationDictionary[name] != null;\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves the animation state object registered in the animation data set under the given name.\r\n\t *\r\n\t * @param stateName The name of the animation state object to be retrieved.\r\n\t */\r\n\tpublic getAnimation(name:string):AnimationNodeBase\r\n\t{\r\n\t\treturn this._animationDictionary[name];\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an animation state object to the aniamtion data set under the given name.\r\n\t *\r\n\t * @param stateName The name under which the animation state object will be stored.\r\n\t * @param animationState The animation state object to be staored in the set.\r\n\t */\r\n\tpublic addAnimation(node:AnimationNodeBase):void\r\n\t{\r\n\t\tif (this._animationDictionary[node.name])\r\n\t\t\tthrow new AnimationSetError(\"root node name '\" + node.name + \"' already exists in the set\");\r\n\r\n\t\tthis._animationDictionary[node.name] = node;\r\n\r\n\t\tthis._animations.push(node);\r\n\r\n\t\tthis._animationNames.push(node.name);\r\n\t}\r\n\r\n\t/**\r\n\t * Cleans up any resources used by the current object.\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\nimport {AssetBase}\t\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetBase\";\r\nimport {AbstractMethodError}\t\t\t\tfrom \"awayjs-core/lib/errors/AbstractMethodError\";\r\nimport {RequestAnimationFrame}\t\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\r\nimport {getTimer}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/utils/getTimer\";\r\n\r\nimport {IAnimationSet}\t\t\t\t\tfrom \"awayjs-display/lib/animators/IAnimationSet\";\r\nimport {IAnimator}\t\t\t\t\t\tfrom \"awayjs-display/lib/animators/IAnimator\";\r\nimport {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\nimport {ElementsBase}\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsBase\";\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {Sprite}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {IAnimationState}\t\t\t\t\tfrom \"../animators/states/IAnimationState\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {AnimatorEvent}\t\t\t\t\tfrom \"../events/AnimatorEvent\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\n\r\n/**\r\n * Dispatched when playback of an animation inside the animator object starts.\r\n *\r\n * @eventType away3d.events.AnimatorEvent\r\n */\r\n//[Event(name=\"start\", type=\"away3d.events.AnimatorEvent\")]\r\n\r\n/**\r\n * Dispatched when playback of an animation inside the animator object stops.\r\n *\r\n * @eventType away3d.events.AnimatorEvent\r\n */\r\n//[Event(name=\"stop\", type=\"away3d.events.AnimatorEvent\")]\r\n\r\n/**\r\n * Dispatched when playback of an animation reaches the end of an animation.\r\n *\r\n * @eventType away3d.events.AnimatorEvent\r\n */\r\n//[Event(name=\"cycle_complete\", type=\"away3d.events.AnimatorEvent\")]\r\n\r\n/**\r\n * Provides an abstract base class for animator classes that control animation output from a data set subtype of <code>AnimationSetBase</code>.\r\n *\r\n * @see away.animators.AnimationSetBase\r\n */\r\nexport class AnimatorBase extends AssetBase implements IAnimator\r\n{\r\n\tpublic static assetType:string = \"[asset Animator]\";\r\n\r\n\tprivate _broadcaster:RequestAnimationFrame;\r\n\tprivate _isPlaying:boolean;\r\n\tprivate _autoUpdate:boolean = true;\r\n\tprivate _startEvent:AnimatorEvent;\r\n\tprivate _stopEvent:AnimatorEvent;\r\n\tprivate _cycleEvent:AnimatorEvent;\r\n\tprivate _time:number = 0;\r\n\tprivate _playbackSpeed:number = 1;\r\n\r\n\tpublic _pAnimationSet:IAnimationSet;\r\n\tpublic _pOwners:Array<Sprite> = new Array<Sprite>();\r\n\tpublic _pActiveNode:AnimationNodeBase;\r\n\tpublic _pActiveState:IAnimationState;\r\n\tpublic _pActiveAnimationName:string;\r\n\tpublic _pAbsoluteTime:number = 0;\r\n\r\n\tprivate _animationStates:Object = new Object();\r\n\r\n\t/**\r\n\t * Enables translation of the animated sprite from data returned per frame via the positionDelta property of the active animation node. Defaults to true.\r\n\t *\r\n\t * @see away.animators.IAnimationState#positionDelta\r\n\t */\r\n\tpublic updatePosition:boolean = true;\r\n\r\n\tpublic getAnimationState(node:AnimationNodeBase):IAnimationState\r\n\t{\r\n\t\tvar className:any = node.stateClass;\r\n\t\tvar uID:number = node.id;\r\n\r\n\t\tif (this._animationStates[uID] == null)\r\n\t\t\tthis._animationStates[uID] = new className(this, node);\r\n\r\n\t\treturn this._animationStates[uID];\r\n\t}\r\n\r\n\tpublic getAnimationStateByName(name:string):IAnimationState\r\n\t{\r\n\t\treturn this.getAnimationState(this._pAnimationSet.getAnimation(name));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the internal absolute time of the animator, calculated by the current time and the playback speed.\r\n\t *\r\n\t * @see #time\r\n\t * @see #playbackSpeed\r\n\t */\r\n\tpublic get absoluteTime():number\r\n\t{\r\n\t\treturn this._pAbsoluteTime;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the animation data set in use by the animator.\r\n\t */\r\n\tpublic get animationSet():IAnimationSet\r\n\t{\r\n\t\treturn this._pAnimationSet;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current active animation state.\r\n\t */\r\n\tpublic get activeState():IAnimationState\r\n\t{\r\n\t\treturn this._pActiveState;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current active animation node.\r\n\t */\r\n\tpublic get activeAnimation():AnimationNodeBase\r\n\t{\r\n\t\treturn this._pAnimationSet.getAnimation(this._pActiveAnimationName);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current active animation node.\r\n\t */\r\n\tpublic get activeAnimationName():string\r\n\t{\r\n\t\treturn this._pActiveAnimationName;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the animators internal update mechanisms are active. Used in cases\r\n\t * where manual updates are required either via the <code>time</code> property or <code>update()</code> method.\r\n\t * Defaults to true.\r\n\t *\r\n\t * @see #time\r\n\t * @see #update()\r\n\t */\r\n\tpublic get autoUpdate():boolean\r\n\t{\r\n\t\treturn this._autoUpdate;\r\n\t}\r\n\r\n\tpublic set autoUpdate(value:boolean)\r\n\t{\r\n\t\tif (this._autoUpdate == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._autoUpdate = value;\r\n\r\n\t\tif (this._autoUpdate)\r\n\t\t\tthis.start(); else\r\n\t\t\tthis.stop();\r\n\t}\r\n\r\n\t/**\r\n\t * Gets and sets the internal time clock of the animator.\r\n\t */\r\n\tpublic get time():number\r\n\t{\r\n\t\treturn this._time;\r\n\t}\r\n\r\n\tpublic set time(value:number)\r\n\t{\r\n\t\tif (this._time == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis.update(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the animation phase of the current active state's animation clip(s).\r\n\t *\r\n\t * @param value The phase value to use. 0 represents the beginning of an animation clip, 1 represents the end.\r\n\t */\r\n\tpublic phase(value:number):void\r\n\t{\r\n\t\tthis._pActiveState.phase(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>AnimatorBase</code> object.\r\n\t *\r\n\t * @param animationSet The animation data set to be used by the animator object.\r\n\t */\r\n\tconstructor(animationSet:IAnimationSet)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pAnimationSet = animationSet;\r\n\r\n\t\tthis._broadcaster = new RequestAnimationFrame(this.onEnterFrame, this);\r\n\t}\r\n\r\n\t/**\r\n\t * The amount by which passed time should be scaled. Used to slow down or speed up animations. Defaults to 1.\r\n\t */\r\n\tpublic get playbackSpeed():number\r\n\t{\r\n\t\treturn this._playbackSpeed;\r\n\t}\r\n\r\n\tpublic set playbackSpeed(value:number)\r\n\t{\r\n\t\tthis._playbackSpeed = value;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, stage:Stage, camera:Camera):void\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * Resumes the automatic playback clock controling the active state of the animator.\r\n\t */\r\n\tpublic start():void\r\n\t{\r\n\t\tif (this._isPlaying || !this._autoUpdate)\r\n\t\t\treturn;\r\n\r\n\t\tthis._time = this._pAbsoluteTime = getTimer();\r\n\r\n\t\tthis._isPlaying = true;\r\n\r\n\t\tthis._broadcaster.start();\r\n\r\n\t\tif (!this.hasEventListener(AnimatorEvent.START))\r\n\t\t\treturn;\r\n\r\n\t\tif (this._startEvent == null)\r\n\t\t\tthis._startEvent = new AnimatorEvent(AnimatorEvent.START, this);\r\n\r\n\t\tthis.dispatchEvent(this._startEvent);\r\n\t}\r\n\r\n\t/**\r\n\t * Pauses the automatic playback clock of the animator, in case manual updates are required via the\r\n\t * <code>time</code> property or <code>update()</code> method.\r\n\t *\r\n\t * @see #time\r\n\t * @see #update()\r\n\t */\r\n\tpublic stop():void\r\n\t{\r\n\t\tif (!this._isPlaying)\r\n\t\t\treturn;\r\n\r\n\t\tthis._isPlaying = false;\r\n\r\n\t\tthis._broadcaster.stop();\r\n\r\n\t\tif (!this.hasEventListener(AnimatorEvent.STOP))\r\n\t\t\treturn;\r\n\r\n\t\tif (this._stopEvent == null)\r\n\t\t\tthis._stopEvent = new AnimatorEvent(AnimatorEvent.STOP, this);\r\n\r\n\t\tthis.dispatchEvent(this._stopEvent);\r\n\t}\r\n\r\n\t/**\r\n\t * Provides a way to manually update the active state of the animator when automatic\r\n\t * updates are disabled.\r\n\t *\r\n\t * @see #stop()\r\n\t * @see #autoUpdate\r\n\t */\r\n\tpublic update(time:number):void\r\n\t{\r\n\t\tvar dt:number = (time - this._time)*this.playbackSpeed;\r\n\r\n\t\tthis._pUpdateDeltaTime(dt);\r\n\r\n\t\tthis._time = time;\r\n\t}\r\n\r\n\tpublic reset(name:string, offset:number = 0):void\r\n\t{\r\n\t\tthis.getAnimationState(this._pAnimationSet.getAnimation(name)).offset(offset + this._pAbsoluteTime);\r\n\t}\r\n\r\n\t/**\r\n\t * Used by the sprite object to which the animator is applied, registers the owner for internal use.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic addOwner(sprite:Sprite):void\r\n\t{\r\n\t\tthis._pOwners.push(sprite);\r\n\t}\r\n\r\n\t/**\r\n\t * Used by the sprite object from which the animator is removed, unregisters the owner for internal use.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic removeOwner(sprite:Sprite):void\r\n\t{\r\n\t\tthis._pOwners.splice(this._pOwners.indexOf(sprite), 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Internal abstract method called when the time delta property of the animator's contents requires updating.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic _pUpdateDeltaTime(dt:number):void\r\n\t{\r\n\t\tthis._pAbsoluteTime += dt;\r\n\r\n\t\tthis._pActiveState.update(this._pAbsoluteTime);\r\n\r\n\t\tif (this.updatePosition)\r\n\t\t\tthis.applyPositionDelta();\r\n\t}\r\n\r\n\t/**\r\n\t * Enter frame event handler for automatically updating the active state of the animator.\r\n\t */\r\n\tprivate onEnterFrame(event:Event = null):void\r\n\t{\r\n\t\tthis.update(getTimer());\r\n\t}\r\n\r\n\tprivate applyPositionDelta():void\r\n\t{\r\n\t\tvar delta:Vector3D = this._pActiveState.positionDelta;\r\n\t\tvar dist:number = delta.length;\r\n\t\tvar len:number;\r\n\t\tif (dist > 0) {\r\n\t\t\tlen = this._pOwners.length;\r\n\t\t\tfor (var i:number = 0; i < len; ++i)\r\n\t\t\t\tthis._pOwners[i].transform.translateLocal(delta, dist);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *  for internal use.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic dispatchCycleEvent():void\r\n\t{\r\n\t\tif (this.hasEventListener(AnimatorEvent.CYCLE_COMPLETE)) {\r\n\t\t\tif (this._cycleEvent == null)\r\n\t\t\t\tthis._cycleEvent = new AnimatorEvent(AnimatorEvent.CYCLE_COMPLETE, this);\r\n\r\n\t\t\tthis.dispatchEvent(this._cycleEvent);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic clone():AnimatorBase\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t}\r\n\r\n\r\n\tpublic invalidateElements():void\r\n\t{\r\n\t\tvar sprite:Sprite;\r\n\t\tvar len:number = this._pOwners.length;\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tsprite = this._pOwners[i];\r\n\t\t\tsprite.graphics.invalidateElements();\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic testGPUCompatibility(shader:ShaderBase):void\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn AnimatorBase.assetType;\r\n\t}\r\n\r\n\r\n\tpublic getRenderableElements(renderable:GL_RenderableBase, sourceElements:ElementsBase):ElementsBase\r\n\t{\r\n\t\t//nothing to do here\r\n\t\treturn sourceElements;\r\n\t}\r\n}",
    "import {ElementsBase}\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsBase\";\r\nimport {IAnimationSet}\t\t\t\t\tfrom \"awayjs-display/lib/animators/IAnimationSet\";\r\nimport {ParticleData}\t\t\t\t\t\tfrom \"awayjs-display/lib/animators/data/ParticleData\";\r\nimport {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\nimport {Graphic}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphic\";\r\nimport {Graphics}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphics\";\r\n\r\nimport {AnimationSetBase}\t\t\t\t\tfrom \"../animators/AnimationSetBase\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../animators/data/AnimationElements\";\r\nimport {ParticleAnimationData}\t\t\tfrom \"../animators/data/ParticleAnimationData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleTimeNode}\t\t\t\t\tfrom \"../animators/nodes/ParticleTimeNode\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\n\r\n/**\r\n * The animation data set used by particle-based animators, containing particle animation data.\r\n *\r\n * @see away.animators.ParticleAnimator\r\n */\r\nexport class ParticleAnimationSet extends AnimationSetBase implements IAnimationSet\r\n{\r\n\t/** @private */\r\n\tpublic _iAnimationRegisterData:AnimationRegisterData;\r\n\r\n\t//all other nodes dependent on it\r\n\tprivate _timeNode:ParticleTimeNode;\r\n\r\n\t/**\r\n\t * Property used by particle nodes that require compilers at the end of the shader\r\n\t */\r\n\tpublic static POST_PRIORITY:number = 9;\r\n\r\n\t/**\r\n\t * Property used by particle nodes that require color compilers\r\n\t */\r\n\tpublic static COLOR_PRIORITY:number = 18;\r\n\r\n\tprivate _animationElements:Object = new Object();\r\n\tprivate _particleNodes:Array<ParticleNodeBase> = new Array<ParticleNodeBase>();\r\n\tprivate _localDynamicNodes:Array<ParticleNodeBase> = new Array<ParticleNodeBase>();\r\n\tprivate _localStaticNodes:Array<ParticleNodeBase> = new Array<ParticleNodeBase>();\r\n\tprivate _totalLenOfOneVertex:number = 0;\r\n\r\n\t//set true if has an node which will change UV\r\n\tpublic hasUVNode:boolean;\r\n\t//set if the other nodes need to access the velocity\r\n\tpublic needVelocity:boolean;\r\n\t//set if has a billboard node.\r\n\tpublic hasBillboard:boolean;\r\n\t//set if has an node which will apply color multiple operation\r\n\tpublic hasColorMulNode:boolean;\r\n\t//set if has an node which will apply color add operation\r\n\tpublic hasColorAddNode:boolean;\r\n\r\n\t/**\r\n\t * Initialiser function for static particle properties. Needs to reference a with the following format\r\n\t *\r\n\t * <code>\r\n\t * initParticleFunc(prop:ParticleProperties)\r\n\t * {\r\n\t * \t\t//code for settings local properties\r\n\t * }\r\n\t * </code>\r\n\t *\r\n\t * Aside from setting any properties required in particle animation nodes using local static properties, the initParticleFunc function\r\n\t * is required to time node requirements as they may be needed. These properties on the ParticleProperties object can include\r\n\t * <code>startTime</code>, <code>duration</code> and <code>delay</code>. The use of these properties is determined by the setting\r\n\t * arguments passed in the constructor of the particle animation set. By default, only the <code>startTime</code> property is required.\r\n\t */\r\n\tpublic initParticleFunc:Function;\r\n\r\n\t/**\r\n\t * Initialiser function scope for static particle properties\r\n\t */\r\n\tpublic initParticleScope:Object;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic shareAnimationGraphics:boolean = true;\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleAnimationSet</code>\r\n\t *\r\n\t * @param    [optional] usesDuration    Defines whether the animation set uses the <code>duration</code> data in its static properties to determine how long a particle is visible for. Defaults to false.\r\n\t * @param    [optional] usesLooping     Defines whether the animation set uses a looping timeframe for each particle determined by the <code>startTime</code>, <code>duration</code> and <code>delay</code> data in its static properties function. Defaults to false. Requires <code>usesDuration</code> to be true.\r\n\t * @param    [optional] usesDelay       Defines whether the animation set uses the <code>delay</code> data in its static properties to determine how long a particle is hidden for. Defaults to false. Requires <code>usesLooping</code> to be true.\r\n\t */\r\n\tconstructor(usesDuration:boolean = false, usesLooping:boolean = false, usesDelay:boolean = false)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\t//automatically add a particle time node to the set\r\n\t\tthis.addAnimation(this._timeNode = new ParticleTimeNode(usesDuration, usesLooping, usesDelay));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a vector of the particle animation nodes contained within the set.\r\n\t */\r\n\tpublic get particleNodes():Array<ParticleNodeBase>\r\n\t{\r\n\t\treturn this._particleNodes;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic addAnimation(node:AnimationNodeBase):void\r\n\t{\r\n\t\tvar i:number;\r\n\t\tvar n:ParticleNodeBase = <ParticleNodeBase> node;\r\n\t\tn._iProcessAnimationSetting(this);\r\n\t\tif (n.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\tn._iDataOffset = this._totalLenOfOneVertex;\r\n\t\t\tthis._totalLenOfOneVertex += n.dataLength;\r\n\t\t\tthis._localStaticNodes.push(n);\r\n\t\t} else if (n.mode == ParticlePropertiesMode.LOCAL_DYNAMIC)\r\n\t\t\tthis._localDynamicNodes.push(n);\r\n\r\n\t\tfor (i = this._particleNodes.length - 1; i >= 0; i--) {\r\n\t\t\tif (this._particleNodes[i].priority <= n.priority)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._particleNodes.splice(i + 1, 0, n);\r\n\r\n\t\tsuper.addAnimation(node);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\t//grab animationRegisterData from the materialpassbase or create a new one if the first time\r\n\t\tthis._iAnimationRegisterData = shader.animationRegisterData;\r\n\r\n\t\tif (this._iAnimationRegisterData == null)\r\n\t\t\tthis._iAnimationRegisterData = shader.animationRegisterData = new AnimationRegisterData();\r\n\r\n\t\t//reset animationRegisterData\r\n\t\tthis._iAnimationRegisterData.reset(registerCache, sharedRegisters, this.needVelocity);\r\n\r\n\t\tvar code:string = \"\";\r\n\r\n\t\tvar len:number = sharedRegisters.animatableAttributes.length;\r\n\t\tfor (var i:number = 0; i < len; i++)\r\n\t\t\tcode += \"mov \" + sharedRegisters.animationTargetRegisters[i] + \",\" + sharedRegisters.animatableAttributes[i] + \"\\n\";\r\n\r\n\t\tcode += \"mov \" + this._iAnimationRegisterData.positionTarget + \".xyz,\" + this._iAnimationRegisterData.vertexZeroConst + \"\\n\";\r\n\r\n\t\tif (this.needVelocity)\r\n\t\t\tcode += \"mov \" + this._iAnimationRegisterData.velocityTarget + \".xyz,\" + this._iAnimationRegisterData.vertexZeroConst + \"\\n\";\r\n\r\n\t\tvar node:ParticleNodeBase;\r\n\t\tvar i:number;\r\n\r\n\t\tfor (i = 0; i < this._particleNodes.length; i++) {\r\n\t\t\tnode = this._particleNodes[i];\r\n\t\t\tif (node.priority < ParticleAnimationSet.POST_PRIORITY)\r\n\t\t\t\tcode += node.getAGALVertexCode(shader, this, registerCache, this._iAnimationRegisterData);\r\n\t\t}\r\n\r\n\t\tcode += \"add \" + this._iAnimationRegisterData.scaleAndRotateTarget + \".xyz,\" + this._iAnimationRegisterData.scaleAndRotateTarget + \".xyz,\" + this._iAnimationRegisterData.positionTarget + \".xyz\\n\";\r\n\r\n\t\tfor (i = 0; i < this._particleNodes.length; i++) {\r\n\t\t\tnode = this._particleNodes[i];\r\n\t\t\tif (node.priority >= ParticleAnimationSet.POST_PRIORITY && node.priority < ParticleAnimationSet.COLOR_PRIORITY)\r\n\t\t\t\tcode += node.getAGALVertexCode(shader, this, registerCache, this._iAnimationRegisterData);\r\n\t\t}\r\n\r\n\t\tif (this.hasColorMulNode) {\r\n\t\t\tthis._iAnimationRegisterData.colorMulTarget = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(this._iAnimationRegisterData.colorMulTarget, 1);\r\n\t\t\tthis._iAnimationRegisterData.colorMulVary = registerCache.getFreeVarying();\r\n\t\t\tcode += \"mov \" + this._iAnimationRegisterData.colorMulTarget + \",\" + this._iAnimationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t}\r\n\t\tif (this.hasColorAddNode) {\r\n\t\t\tthis._iAnimationRegisterData.colorAddTarget = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(this._iAnimationRegisterData.colorAddTarget, 1);\r\n\t\t\tthis._iAnimationRegisterData.colorAddVary = registerCache.getFreeVarying();\r\n\t\t\tcode += \"mov \" + this._iAnimationRegisterData.colorAddTarget + \",\" + this._iAnimationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < this._particleNodes.length; i++) {\r\n\t\t\tnode = this._particleNodes[i];\r\n\t\t\tif (node.priority >= ParticleAnimationSet.COLOR_PRIORITY)\r\n\t\t\t\tcode += node.getAGALVertexCode(shader, this, registerCache, this._iAnimationRegisterData);\r\n\t\t}\r\n\t\tif (shader.usesFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {\r\n\t\t\tif (this.hasColorMulNode)\r\n\t\t\t\tcode += \"mov \" + this._iAnimationRegisterData.colorMulVary + \",\" + this._iAnimationRegisterData.colorMulTarget + \"\\n\";\r\n\t\t\tif (this.hasColorAddNode)\r\n\t\t\t\tcode += \"mov \" + this._iAnimationRegisterData.colorAddVary + \",\" + this._iAnimationRegisterData.colorAddTarget + \"\\n\";\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALUVCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tif (this.hasUVNode) {\r\n\t\t\tthis._iAnimationRegisterData.setUVSourceAndTarget(sharedRegisters);\r\n\t\t\tcode += \"mov \" + this._iAnimationRegisterData.uvTarget + \".xy,\" + this._iAnimationRegisterData.uvAttribute.toString() + \"\\n\";\r\n\t\t\tvar node:ParticleNodeBase;\r\n\t\t\tfor (var i:number = 0; i < this._particleNodes.length; i++)\r\n\t\t\t\tnode = this._particleNodes[i];\r\n\t\t\t\tcode += node.getAGALUVCode(shader, this, registerCache, this._iAnimationRegisterData);\r\n\t\t\tcode += \"mov \" + this._iAnimationRegisterData.uvVar + \",\" + this._iAnimationRegisterData.uvTarget + \".xy\\n\";\r\n\t\t} else\r\n\t\t\tcode += \"mov \" + sharedRegisters.uvTarget + \",\" + sharedRegisters.uvSource + \"\\n\";\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, shadedTarget:ShaderRegisterElement):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tif (shader.usesFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {\r\n\t\t\tif (this.hasColorMulNode)\r\n\t\t\t\tcode += \"mul \" + shadedTarget + \",\" + shadedTarget + \",\" + this._iAnimationRegisterData.colorMulVary + \"\\n\";\r\n\t\t\tif (this.hasColorAddNode)\r\n\t\t\t\tcode += \"add \" + shadedTarget + \",\" + shadedTarget + \",\" + this._iAnimationRegisterData.colorAddVary + \"\\n\";\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic doneAGALCode(shader:ShaderBase):void\r\n\t{\r\n\t\t//set vertexZeroConst,vertexOneConst,vertexTwoConst\r\n\t\tshader.setVertexConst(this._iAnimationRegisterData.vertexZeroConst.index, 0, 1, 2, 0);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic get usesCPU():boolean\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic cancelGPUCompatibility():void\r\n\t{\r\n\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tfor (var key in this._animationElements)\r\n\t\t\t(<AnimationElements> this._animationElements[key]).dispose();\r\n\r\n\t\tsuper.dispose();\r\n\t}\r\n\r\n\tpublic getAnimationElements(graphic:Graphic):AnimationElements\r\n\t{\r\n\t\tvar animationElements:AnimationElements = (this.shareAnimationGraphics)? this._animationElements[graphic.elements.id] : this._animationElements[graphic.id];\r\n\r\n\t\tif (animationElements)\r\n\t\t\treturn animationElements;\r\n\r\n\t\tthis._iGenerateAnimationElements(graphic.parent);\r\n\r\n\t\treturn (this.shareAnimationGraphics)? this._animationElements[graphic.elements.id] : this._animationElements[graphic.id];\r\n\t}\r\n\r\n\r\n\t/** @private */\r\n\tpublic _iGenerateAnimationElements(graphics:Graphics):void\r\n\t{\r\n\t\tif (this.initParticleFunc == null)\r\n\t\t\tthrow(new Error(\"no initParticleFunc set\"));\r\n\r\n\t\tvar i:number, j:number, k:number;\r\n\t\tvar animationElements:AnimationElements;\r\n\t\tvar newAnimationElements:boolean = false;\r\n\t\tvar elements:ElementsBase;\r\n\t\tvar graphic:Graphic;\r\n\t\tvar localNode:ParticleNodeBase;\r\n\r\n\t\tfor (i = 0; i < graphics.count; i++) {\r\n\t\t\tgraphic = graphics.getGraphicAt(i);\r\n\t\t\telements = graphic.elements;\r\n\t\t\tif (this.shareAnimationGraphics) {\r\n\t\t\t\tanimationElements = this._animationElements[elements.id];\r\n\r\n\t\t\t\tif (animationElements)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tanimationElements = new AnimationElements();\r\n\r\n\t\t\tif (this.shareAnimationGraphics)\r\n\t\t\t\tthis._animationElements[elements.id] = animationElements;\r\n\t\t\telse\r\n\t\t\t\tthis._animationElements[graphic.id] = animationElements;\r\n\r\n\t\t\tnewAnimationElements = true;\r\n\r\n\t\t\t//create the vertexData vector that will be used for local node data\r\n\t\t\tanimationElements.createVertexData(elements.numVertices, this._totalLenOfOneVertex);\r\n\t\t}\r\n\r\n\t\tif (!newAnimationElements)\r\n\t\t\treturn;\r\n\r\n\t\tvar particles:Array<ParticleData> = graphics.particles;\r\n\t\tvar particlesLength:number = particles.length;\r\n\t\tvar numParticles:number = graphics.numParticles;\r\n\t\tvar particleProperties:ParticleProperties = new ParticleProperties();\r\n\t\tvar particle:ParticleData;\r\n\r\n\t\tvar oneDataLen:number;\r\n\t\tvar oneDataOffset:number;\r\n\t\tvar counterForVertex:number;\r\n\t\tvar counterForOneData:number;\r\n\t\tvar oneData:Array<number>;\r\n\t\tvar numVertices:number;\r\n\t\tvar vertexData:Array<number>;\r\n\t\tvar vertexLength:number;\r\n\t\tvar startingOffset:number;\r\n\t\tvar vertexOffset:number;\r\n\r\n\t\t//default values for particle param\r\n\t\tparticleProperties.total = numParticles;\r\n\t\tparticleProperties.startTime = 0;\r\n\t\tparticleProperties.duration = 1000;\r\n\t\tparticleProperties.delay = 0.1;\r\n\r\n\t\ti = 0;\r\n\t\tj = 0;\r\n\t\twhile (i < numParticles) {\r\n\t\t\tparticleProperties.index = i;\r\n\r\n\t\t\t//call the init on the particle parameters\r\n\t\t\tthis.initParticleFunc.call(this.initParticleScope, particleProperties);\r\n\r\n\t\t\t//create the next set of node properties for the particle\r\n\t\t\tfor (k = 0; k < this._localStaticNodes.length; k++)\r\n\t\t\t\tthis._localStaticNodes[k]._iGeneratePropertyOfOneParticle(particleProperties);\r\n\r\n\t\t\t//loop through all particle data for the curent particle\r\n\t\t\twhile (j < particlesLength && (particle = particles[j]).particleIndex == i) {\r\n\t\t\t\t//find the target animationElements\r\n\t\t\t\tfor (k = 0; k < graphics.count; k++) {\r\n\t\t\t\t\tgraphic = graphics.getGraphicAt(k);\r\n\t\t\t\t\tif (graphic.elements == particle.elements) {\r\n\t\t\t\t\t\tanimationElements = (this.shareAnimationGraphics)? this._animationElements[graphic.elements.id] : this._animationElements[graphic.id];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnumVertices = particle.numVertices;\r\n\t\t\t\tvertexData = animationElements.vertexData;\r\n\t\t\t\tvertexLength = numVertices*this._totalLenOfOneVertex;\r\n\t\t\t\tstartingOffset = animationElements.numProcessedVertices*this._totalLenOfOneVertex;\r\n\r\n\t\t\t\t//loop through each static local node in the animation set\r\n\t\t\t\tfor (k = 0; k < this._localStaticNodes.length; k++) {\r\n\t\t\t\t\tlocalNode = this._localStaticNodes[k];\r\n\t\t\t\t\toneData = localNode.oneData;\r\n\t\t\t\t\toneDataLen = localNode.dataLength;\r\n\t\t\t\t\toneDataOffset = startingOffset + localNode._iDataOffset;\r\n\r\n\t\t\t\t\t//loop through each vertex set in the vertex data\r\n\t\t\t\t\tfor (counterForVertex = 0; counterForVertex < vertexLength; counterForVertex += this._totalLenOfOneVertex) {\r\n\t\t\t\t\t\tvertexOffset = oneDataOffset + counterForVertex;\r\n\r\n\t\t\t\t\t\t//add the data for the local node to the vertex data\r\n\t\t\t\t\t\tfor (counterForOneData = 0; counterForOneData < oneDataLen; counterForOneData++)\r\n\t\t\t\t\t\t\tvertexData[vertexOffset + counterForOneData] = oneData[counterForOneData];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//store particle properties if they need to be retreived for dynamic local nodes\r\n\t\t\t\tif (this._localDynamicNodes.length)\r\n\t\t\t\t\tanimationElements.animationParticles.push(new ParticleAnimationData(i, particleProperties.startTime, particleProperties.duration, particleProperties.delay, particle));\r\n\r\n\t\t\t\tanimationElements.numProcessedVertices += numVertices;\r\n\r\n\t\t\t\t//next index\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\r\n\t\t\t//next particle\r\n\t\t\ti++;\r\n\t\t}\r\n\t}\r\n}",
    "import {ElementsBase}\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsBase\";\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {Graphic}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphic\";\r\n\r\nimport {ContextGLProgramType}\t\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../animators/data/AnimationRegisterData\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../animators/ParticleAnimationSet\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../animators/states/ParticleStateBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {GL_GraphicRenderable}\t\t\tfrom \"../renderables/GL_GraphicRenderable\";\r\n\r\n/**\r\n * Provides an interface for assigning paricle-based animation data sets to sprite-based entity objects\r\n * and controlling the various available states of animation through an interative playhead that can be\r\n * automatically updated or manually triggered.\r\n *\r\n * Requires that the containing geometry of the parent sprite is particle geometry\r\n *\r\n * @see away.base.ParticleGraphics\r\n */\r\nexport class ParticleAnimator extends AnimatorBase\r\n{\r\n\r\n\tprivate _particleAnimationSet:ParticleAnimationSet;\r\n\tprivate _animationParticleStates:Array<ParticleStateBase> = new Array<ParticleStateBase>();\r\n\tprivate _animatorParticleStates:Array<ParticleStateBase> = new Array<ParticleStateBase>();\r\n\tprivate _timeParticleStates:Array<ParticleStateBase> = new Array<ParticleStateBase>();\r\n\tprivate _totalLenOfOneVertex:number = 0;\r\n\tprivate _animatorSubGeometries:Object = new Object();\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleAnimator</code> object.\r\n\t *\r\n\t * @param particleAnimationSet The animation data set containing the particle animations used by the animator.\r\n\t */\r\n\tconstructor(particleAnimationSet:ParticleAnimationSet)\r\n\t{\r\n\t\tsuper(particleAnimationSet);\r\n\t\tthis._particleAnimationSet = particleAnimationSet;\r\n\r\n\t\tvar state:ParticleStateBase;\r\n\t\tvar node:ParticleNodeBase;\r\n\r\n\t\tfor (var i:number = 0; i < this._particleAnimationSet.particleNodes.length; i++) {\r\n\t\t\tnode = this._particleAnimationSet.particleNodes[i];\r\n\t\t\tstate = <ParticleStateBase> this.getAnimationState(node);\r\n\t\t\tif (node.mode == ParticlePropertiesMode.LOCAL_DYNAMIC) {\r\n\t\t\t\tthis._animatorParticleStates.push(state);\r\n\t\t\t\tnode._iDataOffset = this._totalLenOfOneVertex;\r\n\t\t\t\tthis._totalLenOfOneVertex += node.dataLength;\r\n\t\t\t} else {\r\n\t\t\t\tthis._animationParticleStates.push(state);\r\n\t\t\t}\r\n\t\t\tif (state.needUpdateTime)\r\n\t\t\t\tthis._timeParticleStates.push(state);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic clone():AnimatorBase\r\n\t{\r\n\t\treturn new ParticleAnimator(this._particleAnimationSet);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, stage:Stage, camera:Camera):void\r\n\t{\r\n\t\tvar animationRegisterData:AnimationRegisterData = this._particleAnimationSet._iAnimationRegisterData;\r\n\r\n\t\tvar graphic:Graphic = (<GL_GraphicRenderable> renderable).graphic;\r\n\r\n\t\tif (!graphic)\r\n\t\t\tthrow(new Error(\"Must be graphic\"));\r\n\r\n\t\t//process animation sub geometries\r\n\t\tvar animationElements:AnimationElements = this._particleAnimationSet.getAnimationElements(graphic);\r\n\t\tvar i:number;\r\n\t\t\r\n\t\tfor (i = 0; i < this._animationParticleStates.length; i++)\r\n\t\t\tthis._animationParticleStates[i].setRenderState(shader, renderable, animationElements, animationRegisterData, camera, stage);\r\n\r\n\t\t//process animator subgeometries\r\n\t\tvar animatorElements:AnimationElements = this.getAnimatorElements(graphic);\r\n\r\n\t\tfor (i = 0; i < this._animatorParticleStates.length; i++)\r\n\t\t\tthis._animatorParticleStates[i].setRenderState(shader, renderable, animatorElements, animationRegisterData, camera, stage);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic testGPUCompatibility(shader:ShaderBase):void\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic start():void\r\n\t{\r\n\t\tsuper.start();\r\n\r\n\t\tfor (var i:number = 0; i < this._timeParticleStates.length; i++)\r\n\t\t\tthis._timeParticleStates[i].offset(this._pAbsoluteTime);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateDeltaTime(dt:number):void\r\n\t{\r\n\t\tthis._pAbsoluteTime += dt;\r\n\r\n\t\tfor (var i:number = 0; i < this._timeParticleStates.length; i++)\r\n\t\t\tthis._timeParticleStates[i].update(this._pAbsoluteTime);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic resetTime(offset:number = 0):void\r\n\t{\r\n\t\tfor (var i:number = 0; i < this._timeParticleStates.length; i++)\r\n\t\t\tthis._timeParticleStates[i].offset(this._pAbsoluteTime + offset);\r\n\t\tthis.update(this.time);\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tfor (var key in this._animatorSubGeometries)\r\n\t\t\t(<AnimationElements> this._animatorSubGeometries[key]).dispose();\r\n\t}\r\n\r\n\tprivate getAnimatorElements(graphic:Graphic):AnimationElements\r\n\t{\r\n\t\tif (!this._animatorParticleStates.length)\r\n\t\t\treturn;\r\n\r\n\t\tvar elements:ElementsBase = graphic.elements;\r\n\t\tvar animatorElements:AnimationElements = this._animatorSubGeometries[elements.id] = new AnimationElements();\r\n\r\n\t\t//create the vertexData vector that will be used for local state data\r\n\t\tanimatorElements.createVertexData(elements.numVertices, this._totalLenOfOneVertex);\r\n\r\n\t\t//pass the particles data to the animator elements\r\n\t\tanimatorElements.animationParticles = this._particleAnimationSet.getAnimationElements(graphic).animationParticles;\r\n\t}\r\n}",
    "import {IAnimationSet}\t\t\t\t\tfrom \"awayjs-display/lib/animators/IAnimationSet\";\r\n\r\nimport {AnimationSetBase}\t\t\t\t\tfrom \"../animators/AnimationSetBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\n\r\n/**\r\n * The animation data set used by skeleton-based animators, containing skeleton animation data.\r\n *\r\n * @see away.animators.SkeletonAnimator\r\n */\r\nexport class SkeletonAnimationSet extends AnimationSetBase implements IAnimationSet\r\n{\r\n\tprivate _jointsPerVertex:number;\r\n\tprivate _matricesIndex:number;\r\n\r\n\t/**\r\n\t * Returns the amount of skeleton joints that can be linked to a single vertex via skinned weight values. For GPU-base animation, the\r\n\t * maximum allowed value is 4.\r\n\t */\r\n\tpublic get jointsPerVertex():number\r\n\t{\r\n\t\treturn this._jointsPerVertex;\r\n\t}\r\n\t\r\n\tpublic get matricesIndex():number\r\n\t{\r\n\t\treturn this._matricesIndex;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Creates a new <code>SkeletonAnimationSet</code> object.\r\n\t *\r\n\t * @param jointsPerVertex Sets the amount of skeleton joints that can be linked to a single vertex via skinned weight values. For GPU-base animation, the maximum allowed value is 4. Defaults to 4.\r\n\t */\r\n\tconstructor(jointsPerVertex:number = 4)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._jointsPerVertex = jointsPerVertex;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tthis._matricesIndex = registerCache.numUsedVertexConstants;\r\n\t\tvar indexOffset0:number = this._matricesIndex;\r\n\t\tvar indexOffset1:number = this._matricesIndex + 1;\r\n\t\tvar indexOffset2:number = this._matricesIndex + 2;\r\n\t\t\r\n\t\tvar indexStream:ShaderRegisterElement = registerCache.getFreeVertexAttribute();\r\n\t\tshader.jointIndexIndex = indexStream.index;\r\n\t\t\r\n\t\tvar weightStream:ShaderRegisterElement = registerCache.getFreeVertexAttribute();\r\n\t\tshader.jointWeightIndex = weightStream.index;\r\n\t\t\r\n\t\tvar indices:Array<string> = [ indexStream + \".x\", indexStream + \".y\", indexStream + \".z\", indexStream + \".w\" ];\r\n\t\tvar weights:Array<string> = [ weightStream + \".x\", weightStream + \".y\", weightStream + \".z\", weightStream + \".w\" ];\r\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar dot:string = \"dp4\";\r\n\t\tvar code:string = \"\";\r\n\r\n\t\tvar len:number = sharedRegisters.animatableAttributes.length;\r\n\t\tfor (var i:number = 0; i < len; ++i) {\r\n\r\n\t\t\tvar source:ShaderRegisterElement = sharedRegisters.animatableAttributes[i];\r\n\t\t\tvar target:ShaderRegisterElement = sharedRegisters.animationTargetRegisters[i];\r\n\r\n\t\t\tfor (var j:number = 0; j < this._jointsPerVertex; ++j) {\r\n\t\t\t\tregisterCache.getFreeVertexConstant();\r\n\t\t\t\tregisterCache.getFreeVertexConstant();\r\n\t\t\t\tregisterCache.getFreeVertexConstant();\r\n\t\t\t\tcode += dot + \" \" + temp1 + \".x, \" + source + \", vc[\" + indices[j] + \"+\" + indexOffset0 + \"]\\n\" +\r\n\t\t\t\t\tdot + \" \" + temp1 + \".y, \" + source + \", vc[\" + indices[j] + \"+\" + indexOffset1 + \"]\\n\" +\r\n\t\t\t\t\tdot + \" \" + temp1 + \".z, \" + source + \", vc[\" + indices[j] + \"+\" + indexOffset2 + \"]\\n\" +\r\n\t\t\t\t\t\"mov \" + temp1 + \".w, \" + source + \".w\\n\" +\r\n\t\t\t\t\t\"mul \" + temp1 + \", \" + temp1 + \", \" + weights[j] + \"\\n\"; // apply weight\r\n\r\n\t\t\t\t// add or mov to target. Need to write to a temp reg first, because an output can be a target\r\n\t\t\t\tif (j == 0)\r\n\t\t\t\t\tcode += \"mov \" + target + \", \" + temp1 + \"\\n\";\r\n\t\t\t\telse\r\n\t\t\t\t\tcode += \"add \" + target + \", \" + target + \", \" + temp1 + \"\\n\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// switch to dp3 once positions have been transformed, from now on, it should only be vectors instead of points\r\n\t\t\tdot = \"dp3\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, shadedTarget:ShaderRegisterElement):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALUVCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"mov \" + sharedRegisters.uvTarget + \",\" + sharedRegisters.uvSource + \"\\n\";\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic doneAGALCode(shader:ShaderBase):void\r\n\t{\r\n\r\n\t}\r\n}",
    "import {Quaternion}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Quaternion\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {TriangleElements}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {ElementsEvent}\t\t\t\t\tfrom \"awayjs-display/lib/events/ElementsEvent\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\nimport {SkeletonAnimationSet}\t\t\t\tfrom \"../animators/SkeletonAnimationSet\";\r\nimport {JointPose}\t\t\t\t\t\tfrom \"../animators/data/JointPose\";\r\nimport {Skeleton}\t\t\t\t\t\t\tfrom \"../animators/data/Skeleton\";\r\nimport {SkeletonJoint}\t\t\t\t\tfrom \"../animators/data/SkeletonJoint\";\r\nimport {SkeletonPose}\t\t\t\t\t\tfrom \"../animators/data/SkeletonPose\";\r\nimport {ISkeletonAnimationState}\t\t\tfrom \"../animators/states/ISkeletonAnimationState\";\r\nimport {IAnimationTransition}\t\t\t\tfrom \"../animators/transitions/IAnimationTransition\";\r\nimport {AnimationStateEvent}\t\t\t\tfrom \"../events/AnimationStateEvent\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {GL_GraphicRenderable}\t\t\t\tfrom \"../renderables/GL_GraphicRenderable\";\r\n\r\n/**\r\n * Provides an interface for assigning skeleton-based animation data sets to sprite-based entity objects\r\n * and controlling the various available states of animation through an interative playhead that can be\r\n * automatically updated or manually triggered.\r\n */\r\nexport class SkeletonAnimator extends AnimatorBase\r\n{\r\n\tprivate _globalMatrices:Float32Array;\r\n\tprivate _globalPose:SkeletonPose = new SkeletonPose();\r\n\tprivate _globalPropertiesDirty:boolean;\r\n\tprivate _numJoints:number;\r\n\tprivate _morphedElements:Object = new Object();\r\n\tprivate _morphedElementsDirty:Object = new Object();\r\n\tprivate _condensedMatrices:Float32Array;\r\n\r\n\tprivate _skeletonAnimationSet:SkeletonAnimationSet;\r\n\tprivate _skeleton:Skeleton;\r\n\tprivate _forceCPU:boolean;\r\n\tprivate _useCondensedIndices:boolean;\r\n\tprivate _jointsPerVertex:number;\r\n\tprivate _activeSkeletonState:ISkeletonAnimationState;\r\n\tprivate _onTransitionCompleteDelegate:(event:AnimationStateEvent) => void;\r\n\r\n\tprivate _onIndicesUpdateDelegate:(event:ElementsEvent) => void;\r\n\tprivate _onVerticesUpdateDelegate:(event:ElementsEvent) => void;\r\n\r\n\t/**\r\n\t * returns the calculated global matrices of the current skeleton pose.\r\n\t *\r\n\t * @see #globalPose\r\n\t */\r\n\tpublic get globalMatrices():Float32Array\r\n\t{\r\n\t\tif (this._globalPropertiesDirty)\r\n\t\t\tthis.updateGlobalProperties();\r\n\r\n\t\treturn this._globalMatrices;\r\n\t}\r\n\r\n\t/**\r\n\t * returns the current skeleton pose output from the animator.\r\n\t *\r\n\t * @see away.animators.data.SkeletonPose\r\n\t */\r\n\tpublic get globalPose():SkeletonPose\r\n\t{\r\n\t\tif (this._globalPropertiesDirty)\r\n\t\t\tthis.updateGlobalProperties();\r\n\r\n\t\treturn this._globalPose;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the skeleton object in use by the animator - this defines the number and heirarchy of joints used by the\r\n\t * skinned geoemtry to which skeleon animator is applied.\r\n\t */\r\n\tpublic get skeleton():Skeleton\r\n\t{\r\n\t\treturn this._skeleton;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the skeleton animator is disabled by default for GPU rendering, something that allows the animator to perform calculation on the GPU.\r\n\t * Defaults to false.\r\n\t */\r\n\tpublic get forceCPU():boolean\r\n\t{\r\n\t\treturn this._forceCPU;\r\n\t}\r\n\r\n\t/**\r\n\t * Offers the option of enabling GPU accelerated animation on skeletons larger than 32 joints\r\n\t * by condensing the number of joint index values required per sprite. Only applicable to\r\n\t * skeleton animations that utilise more than one sprite object. Defaults to false.\r\n\t */\r\n\tpublic get useCondensedIndices():boolean\r\n\t{\r\n\t\treturn this._useCondensedIndices;\r\n\t}\r\n\r\n\tpublic set useCondensedIndices(value:boolean)\r\n\t{\r\n\t\tthis._useCondensedIndices = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>SkeletonAnimator</code> object.\r\n\t *\r\n\t * @param skeletonAnimationSet The animation data set containing the skeleton animations used by the animator.\r\n\t * @param skeleton The skeleton object used for calculating the resulting global matrices for transforming skinned sprite data.\r\n\t * @param forceCPU Optional value that only allows the animator to perform calculation on the CPU. Defaults to false.\r\n\t */\r\n\tconstructor(animationSet:SkeletonAnimationSet, skeleton:Skeleton, forceCPU:boolean = false)\r\n\t{\r\n\t\tsuper(animationSet);\r\n\r\n\t\tthis._skeletonAnimationSet = animationSet;\r\n\t\tthis._skeleton = skeleton;\r\n\t\tthis._forceCPU = forceCPU;\r\n\t\tthis._jointsPerVertex = animationSet.jointsPerVertex;\r\n\r\n\t\tthis._numJoints = this._skeleton.numJoints;\r\n\t\tthis._globalMatrices = new Float32Array(this._numJoints*12);\r\n\r\n\t\tvar j:number = 0;\r\n\t\tfor (var i:number = 0; i < this._numJoints; ++i) {\r\n\t\t\tthis._globalMatrices[j++] = 1;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 1;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t\tthis._globalMatrices[j++] = 1;\r\n\t\t\tthis._globalMatrices[j++] = 0;\r\n\t\t}\r\n\r\n\t\tthis._onTransitionCompleteDelegate = (event:AnimationStateEvent) => this.onTransitionComplete(event);\r\n\t\tthis._onIndicesUpdateDelegate = (event:ElementsEvent) => this.onIndicesUpdate(event);\r\n\t\tthis._onVerticesUpdateDelegate = (event:ElementsEvent) => this.onVerticesUpdate(event);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic clone():AnimatorBase\r\n\t{\r\n\t\treturn new SkeletonAnimator(this._skeletonAnimationSet, this._skeleton, this._forceCPU);\r\n\t}\r\n\r\n\t/**\r\n\t * Plays an animation state registered with the given name in the animation data set.\r\n\t *\r\n\t * @param name The data set name of the animation state to be played.\r\n\t * @param transition An optional transition object that determines how the animator will transition from the currently active animation state.\r\n\t * @param offset An option offset time (in milliseconds) that resets the state's internal clock to the absolute time of the animator plus the offset value. Required for non-looping animation states.\r\n\t */\r\n\tpublic play(name:string, transition:IAnimationTransition = null, offset:number = NaN):void\r\n\t{\r\n\t\tif (this._pActiveAnimationName == name)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pActiveAnimationName = name;\r\n\r\n\t\tif (!this._pAnimationSet.hasAnimation(name))\r\n\t\t\tthrow new Error(\"Animation root node \" + name + \" not found!\");\r\n\r\n\t\tif (transition && this._pActiveNode) {\r\n\t\t\t//setup the transition\r\n\t\t\tthis._pActiveNode = transition.getAnimationNode(this, this._pActiveNode, this._pAnimationSet.getAnimation(name), this._pAbsoluteTime);\r\n\t\t\tthis._pActiveNode.addEventListener(AnimationStateEvent.TRANSITION_COMPLETE, this._onTransitionCompleteDelegate);\r\n\t\t} else\r\n\t\t\tthis._pActiveNode = this._pAnimationSet.getAnimation(name);\r\n\r\n\t\tthis._pActiveState = this.getAnimationState(this._pActiveNode);\r\n\r\n\t\tif (this.updatePosition) {\r\n\t\t\t//update straight away to reset position deltas\r\n\t\t\tthis._pActiveState.update(this._pAbsoluteTime);\r\n\t\t\tthis._pActiveState.positionDelta;\r\n\t\t}\r\n\r\n\t\tthis._activeSkeletonState = <ISkeletonAnimationState> this._pActiveState;\r\n\r\n\t\tthis.start();\r\n\r\n\t\t//apply a time offset if specified\r\n\t\tif (!isNaN(offset))\r\n\t\t\tthis.reset(name, offset);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, stage:Stage, camera:Camera):void\r\n\t{\r\n\t\t// do on request of globalProperties\r\n\t\tif (this._globalPropertiesDirty)\r\n\t\t\tthis.updateGlobalProperties();\r\n\r\n\t\tvar elements:TriangleElements = <TriangleElements> (<GL_GraphicRenderable> renderable).graphic.elements;\r\n\r\n\t\telements.useCondensedIndices = this._useCondensedIndices;\r\n\r\n\t\tif (this._useCondensedIndices) {\r\n\t\t\t// using a condensed data set\r\n\t\t\tthis.updateCondensedMatrices(elements.condensedIndexLookUp);\r\n\t\t\tshader.setVertexConstFromArray(this._skeletonAnimationSet.matricesIndex, this._condensedMatrices);\r\n\t\t} else {\r\n\t\t\tif (this._pAnimationSet.usesCPU) {\r\n\t\t\t\tif (this._morphedElementsDirty[elements.id])\r\n\t\t\t\t\tthis.morphElements(<GL_GraphicRenderable> renderable, elements);\r\n\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tshader.setVertexConstFromArray(this._skeletonAnimationSet.matricesIndex, this._globalMatrices);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic testGPUCompatibility(shader:ShaderBase):void\r\n\t{\r\n\t\tif (!this._useCondensedIndices && (this._forceCPU || this._jointsPerVertex > 4 || shader.numUsedVertexConstants + this._numJoints*3 > 128))\r\n\t\t\tthis._pAnimationSet.cancelGPUCompatibility();\r\n\t}\r\n\r\n\t/**\r\n\t * Applies the calculated time delta to the active animation state node or state transition object.\r\n\t */\r\n\tpublic _pUpdateDeltaTime(dt:number):void\r\n\t{\r\n\t\tsuper._pUpdateDeltaTime(dt);\r\n\r\n\t\t//invalidate pose matrices\r\n\t\tthis._globalPropertiesDirty = true;\r\n\r\n\t\t//trigger geometry invalidation if using CPU animation\r\n\t\tif (this._pAnimationSet.usesCPU)\r\n\t\t\tthis.invalidateElements();\r\n\t}\r\n\r\n\tprivate updateCondensedMatrices(condensedIndexLookUp:Array<number>):void\r\n\t{\r\n\t\tvar j:number = 0, k:number = 0;\r\n\t\tvar len:number = condensedIndexLookUp.length;\r\n\t\tvar srcIndex:number;\r\n\r\n\t\tthis._condensedMatrices = new Float32Array(len*12);\r\n\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tsrcIndex = condensedIndexLookUp[i]*12; //12 required for the three 4-component vectors that store the matrix\r\n\t\t\tk = 12;\r\n\t\t\t// copy into condensed\r\n\t\t\twhile (k--)\r\n\t\t\t\tthis._condensedMatrices[j++] = this._globalMatrices[srcIndex++];\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateGlobalProperties():void\r\n\t{\r\n\t\tthis._globalPropertiesDirty = false;\r\n\r\n\t\t//get global pose\r\n\t\tthis.localToGlobalPose(this._activeSkeletonState.getSkeletonPose(this._skeleton), this._globalPose, this._skeleton);\r\n\r\n\t\t// convert pose to matrix\r\n\t\tvar mtxOffset:number = 0;\r\n\t\tvar globalPoses:Array<JointPose> = this._globalPose.jointPoses;\r\n\t\tvar raw:Float32Array;\r\n\t\tvar ox:number, oy:number, oz:number, ow:number;\r\n\t\tvar xy2:number, xz2:number, xw2:number;\r\n\t\tvar yz2:number, yw2:number, zw2:number;\r\n\t\tvar n11:number, n12:number, n13:number;\r\n\t\tvar n21:number, n22:number, n23:number;\r\n\t\tvar n31:number, n32:number, n33:number;\r\n\t\tvar m11:number, m12:number, m13:number, m14:number;\r\n\t\tvar m21:number, m22:number, m23:number, m24:number;\r\n\t\tvar m31:number, m32:number, m33:number, m34:number;\r\n\t\tvar joints:Array<SkeletonJoint> = this._skeleton.joints;\r\n\t\tvar pose:JointPose;\r\n\t\tvar quat:Quaternion;\r\n\t\tvar vec:Vector3D;\r\n\t\tvar t:number;\r\n\r\n\t\tfor (var i:number = 0; i < this._numJoints; ++i) {\r\n\t\t\tpose = globalPoses[i];\r\n\t\t\tquat = pose.orientation;\r\n\t\t\tvec = pose.translation;\r\n\t\t\tox = quat.x;\r\n\t\t\toy = quat.y;\r\n\t\t\toz = quat.z;\r\n\t\t\tow = quat.w;\r\n\r\n\t\t\txy2 = (t = 2.0*ox)*oy;\r\n\t\t\txz2 = t*oz;\r\n\t\t\txw2 = t*ow;\r\n\t\t\tyz2 = (t = 2.0*oy)*oz;\r\n\t\t\tyw2 = t*ow;\r\n\t\t\tzw2 = 2.0*oz*ow;\r\n\r\n\t\t\tyz2 = 2.0*oy*oz;\r\n\t\t\tyw2 = 2.0*oy*ow;\r\n\t\t\tzw2 = 2.0*oz*ow;\r\n\t\t\tox *= ox;\r\n\t\t\toy *= oy;\r\n\t\t\toz *= oz;\r\n\t\t\tow *= ow;\r\n\r\n\t\t\tn11 = (t = ox - oy) - oz + ow;\r\n\t\t\tn12 = xy2 - zw2;\r\n\t\t\tn13 = xz2 + yw2;\r\n\t\t\tn21 = xy2 + zw2;\r\n\t\t\tn22 = -t - oz + ow;\r\n\t\t\tn23 = yz2 - xw2;\r\n\t\t\tn31 = xz2 - yw2;\r\n\t\t\tn32 = yz2 + xw2;\r\n\t\t\tn33 = -ox - oy + oz + ow;\r\n\r\n\t\t\t// prepend inverse bind pose\r\n\t\t\traw = joints[i].inverseBindPose;\r\n\t\t\tm11 = raw[0];\r\n\t\t\tm12 = raw[4];\r\n\t\t\tm13 = raw[8];\r\n\t\t\tm14 = raw[12];\r\n\t\t\tm21 = raw[1];\r\n\t\t\tm22 = raw[5];\r\n\t\t\tm23 = raw[9];\r\n\t\t\tm24 = raw[13];\r\n\t\t\tm31 = raw[2];\r\n\t\t\tm32 = raw[6];\r\n\t\t\tm33 = raw[10];\r\n\t\t\tm34 = raw[14];\r\n\r\n\t\t\tthis._globalMatrices[mtxOffset] = n11*m11 + n12*m21 + n13*m31;\r\n\t\t\tthis._globalMatrices[mtxOffset + 1] = n11*m12 + n12*m22 + n13*m32;\r\n\t\t\tthis._globalMatrices[mtxOffset + 2] = n11*m13 + n12*m23 + n13*m33;\r\n\t\t\tthis._globalMatrices[mtxOffset + 3] = n11*m14 + n12*m24 + n13*m34 + vec.x;\r\n\t\t\tthis._globalMatrices[mtxOffset + 4] = n21*m11 + n22*m21 + n23*m31;\r\n\t\t\tthis._globalMatrices[mtxOffset + 5] = n21*m12 + n22*m22 + n23*m32;\r\n\t\t\tthis._globalMatrices[mtxOffset + 6] = n21*m13 + n22*m23 + n23*m33;\r\n\t\t\tthis._globalMatrices[mtxOffset + 7] = n21*m14 + n22*m24 + n23*m34 + vec.y;\r\n\t\t\tthis._globalMatrices[mtxOffset + 8] = n31*m11 + n32*m21 + n33*m31;\r\n\t\t\tthis._globalMatrices[mtxOffset + 9] = n31*m12 + n32*m22 + n33*m32;\r\n\t\t\tthis._globalMatrices[mtxOffset + 10] = n31*m13 + n32*m23 + n33*m33;\r\n\t\t\tthis._globalMatrices[mtxOffset + 11] = n31*m14 + n32*m24 + n33*m34 + vec.z;\r\n\r\n\t\t\tmtxOffset = mtxOffset + 12;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getRenderableElements(renderable:GL_GraphicRenderable, sourceElements:TriangleElements):TriangleElements\r\n\t{\r\n\t\tthis._morphedElementsDirty[sourceElements.id] = true;\r\n\r\n\t\t//early out for GPU animations\r\n\t\tif (!this._pAnimationSet.usesCPU)\r\n\t\t\treturn sourceElements;\r\n\r\n\t\tvar targetElements:TriangleElements;\r\n\r\n\t\tif (!(targetElements = this._morphedElements[sourceElements.id])) {\r\n\t\t\t//not yet stored\r\n\t\t\tsourceElements.normals;\r\n\t\t\tsourceElements.tangents;\r\n\t\t\ttargetElements = this._morphedElements[sourceElements.id] = sourceElements.clone();\r\n\t\t\t//turn off auto calculations on the morphed geometry\r\n\t\t\ttargetElements.autoDeriveNormals = false;\r\n\t\t\ttargetElements.autoDeriveTangents = false;\r\n\t\t\t//add event listeners for any changes in UV values on the source geometry\r\n\t\t\tsourceElements.addEventListener(ElementsEvent.INVALIDATE_INDICES, this._onIndicesUpdateDelegate);\r\n\t\t\tsourceElements.addEventListener(ElementsEvent.INVALIDATE_VERTICES, this._onVerticesUpdateDelegate);\r\n\t\t}\r\n\r\n\t\treturn targetElements;\r\n\t}\r\n\r\n\t/**\r\n\t * If the animation can't be performed on GPU, transform vertices manually\r\n\t * @param subGeom The subgeometry containing the weights and joint index data per vertex.\r\n\t * @param pass The material pass for which we need to transform the vertices\r\n\t */\r\n\tpublic morphElements(renderable:GL_GraphicRenderable, sourceElements:TriangleElements):void\r\n\t{\r\n\t\tthis._morphedElementsDirty[sourceElements.id] = false;\r\n\r\n\t\tvar numVertices:number = sourceElements.numVertices;\r\n\t\tvar sourcePositions:ArrayBufferView = sourceElements.positions.get(numVertices);\r\n\t\tvar sourceNormals:Float32Array = sourceElements.normals.get(numVertices);\r\n\t\tvar sourceTangents:Float32Array = sourceElements.tangents.get(numVertices);\r\n\r\n\t\tvar posDim:number = sourceElements.positions.dimensions;\r\n\t\tvar posStride:number = sourceElements.positions.stride;\r\n\t\tvar normalStride:number = sourceElements.normals.stride;\r\n\t\tvar tangentStride:number = sourceElements.tangents.stride;\r\n\r\n\t\tvar jointIndices:Float32Array = <Float32Array> sourceElements.jointIndices.get(numVertices);\r\n\t\tvar jointWeights:Float32Array = <Float32Array> sourceElements.jointWeights.get(numVertices);\r\n\t\tvar jointStride:number = sourceElements.jointIndices.stride;\r\n\r\n\t\tvar targetElements:TriangleElements = this._morphedElements[sourceElements.id];\r\n\r\n\t\tvar targetPositions:ArrayBufferView = targetElements.positions.get(numVertices);\r\n\t\tvar targetNormals:Float32Array = targetElements.normals.get(numVertices);\r\n\t\tvar targetTangents:Float32Array = targetElements.tangents.get(numVertices);\r\n\t\ttargetElements.positions.attributesBuffer.invalidate();\r\n\t\ttargetElements.normals.attributesBuffer.invalidate();\r\n\t\ttargetElements.tangents.attributesBuffer.invalidate();\r\n\r\n\t\tvar index:number = 0;\r\n\t\tvar i0:number = 0;\r\n\t\tvar i1:number = 0;\r\n\t\tvar i2:number = 0;\r\n\t\tvar i3:number = 0;\r\n\t\tvar k:number;\r\n\t\tvar vx:number, vy:number, vz:number;\r\n\t\tvar nx:number, ny:number, nz:number;\r\n\t\tvar tx:number, ty:number, tz:number;\r\n\t\tvar weight:number;\r\n\t\tvar vertX:number, vertY:number, vertZ:number;\r\n\t\tvar normX:number, normY:number, normZ:number;\r\n\t\tvar tangX:number, tangY:number, tangZ:number;\r\n\t\tvar m11:number, m12:number, m13:number, m14:number;\r\n\t\tvar m21:number, m22:number, m23:number, m24:number;\r\n\t\tvar m31:number, m32:number, m33:number, m34:number;\r\n\r\n\t\twhile (index < numVertices) {\r\n\t\t\ti0 = index*posStride;\r\n\t\t\tvertX = sourcePositions[i0];\r\n\t\t\tvertY = sourcePositions[i0 + 1];\r\n\t\t\tvertZ = (posDim == 3)? sourcePositions[i0 + 2] : 0;\r\n\t\t\ti1 = index*normalStride;\r\n\t\t\tnormX = sourceNormals[i1];\r\n\t\t\tnormY = sourceNormals[i1 + 1];\r\n\t\t\tnormZ = sourceNormals[i1 + 2];\r\n\t\t\ti2 = index*tangentStride;\r\n\t\t\ttangX = sourceTangents[i2];\r\n\t\t\ttangY = sourceTangents[i2 + 1];\r\n\t\t\ttangZ = sourceTangents[i2 + 2];\r\n\t\t\tvx = 0;\r\n\t\t\tvy = 0;\r\n\t\t\tvz = 0;\r\n\t\t\tnx = 0;\r\n\t\t\tny = 0;\r\n\t\t\tnz = 0;\r\n\t\t\ttx = 0;\r\n\t\t\tty = 0;\r\n\t\t\ttz = 0;\r\n\t\t\tk = 0;\r\n\t\t\ti3 = index*jointStride;\r\n\t\t\twhile (k < this._jointsPerVertex) {\r\n\t\t\t\tweight = jointWeights[i3 + k];\r\n\t\t\t\tif (weight > 0) {\r\n\t\t\t\t\t// implicit /3*12 (/3 because indices are multiplied by 3 for gpu matrix access, *12 because it's the matrix size)\r\n\t\t\t\t\tvar mtxOffset:number = jointIndices[i3 + k] << 2;\r\n\t\t\t\t\tm11 = this._globalMatrices[mtxOffset];\r\n\t\t\t\t\tm12 = this._globalMatrices[mtxOffset + 1];\r\n\t\t\t\t\tm13 = this._globalMatrices[mtxOffset + 2];\r\n\t\t\t\t\tm14 = this._globalMatrices[mtxOffset + 3];\r\n\t\t\t\t\tm21 = this._globalMatrices[mtxOffset + 4];\r\n\t\t\t\t\tm22 = this._globalMatrices[mtxOffset + 5];\r\n\t\t\t\t\tm23 = this._globalMatrices[mtxOffset + 6];\r\n\t\t\t\t\tm24 = this._globalMatrices[mtxOffset + 7];\r\n\t\t\t\t\tm31 = this._globalMatrices[mtxOffset + 8];\r\n\t\t\t\t\tm32 = this._globalMatrices[mtxOffset + 9];\r\n\t\t\t\t\tm33 = this._globalMatrices[mtxOffset + 10];\r\n\t\t\t\t\tm34 = this._globalMatrices[mtxOffset + 11];\r\n\t\t\t\t\tvx += weight*(m11*vertX + m12*vertY + m13*vertZ + m14);\r\n\t\t\t\t\tvy += weight*(m21*vertX + m22*vertY + m23*vertZ + m24);\r\n\t\t\t\t\tvz += weight*(m31*vertX + m32*vertY + m33*vertZ + m34);\r\n\t\t\t\t\tnx += weight*(m11*normX + m12*normY + m13*normZ);\r\n\t\t\t\t\tny += weight*(m21*normX + m22*normY + m23*normZ);\r\n\t\t\t\t\tnz += weight*(m31*normX + m32*normY + m33*normZ);\r\n\t\t\t\t\ttx += weight*(m11*tangX + m12*tangY + m13*tangZ);\r\n\t\t\t\t\tty += weight*(m21*tangX + m22*tangY + m23*tangZ);\r\n\t\t\t\t\ttz += weight*(m31*tangX + m32*tangY + m33*tangZ);\r\n\t\t\t\t\tk++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//if zero weight encountered, skip to the next vertex\r\n\t\t\t\t\tk = this._jointsPerVertex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttargetPositions[i0] = vx;\r\n\t\t\ttargetPositions[i0 + 1] = vy;\r\n\t\t\tif (posDim == 3) targetPositions[i0 + 2] = vz;\r\n\t\t\ttargetNormals[i1] = nx;\r\n\t\t\ttargetNormals[i1 + 1] = ny;\r\n\t\t\ttargetNormals[i1 + 2] = nz;\r\n\t\t\ttargetTangents[i2] = tx;\r\n\t\t\ttargetTangents[i2 + 1] = ty;\r\n\t\t\ttargetTangents[i2 + 2] = tz;\r\n\r\n\t\t\tindex++;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a local hierarchical skeleton pose to a global pose\r\n\t * @param targetPose The SkeletonPose object that will contain the global pose.\r\n\t * @param skeleton The skeleton containing the joints, and as such, the hierarchical data to transform to global poses.\r\n\t */\r\n\tprivate localToGlobalPose(sourcePose:SkeletonPose, targetPose:SkeletonPose, skeleton:Skeleton):void\r\n\t{\r\n\t\tvar globalPoses:Array<JointPose> = targetPose.jointPoses;\r\n\t\tvar globalJointPose:JointPose;\r\n\t\tvar joints:Array<SkeletonJoint> = skeleton.joints;\r\n\t\tvar len:number = sourcePose.numJointPoses;\r\n\t\tvar jointPoses:Array<JointPose> = sourcePose.jointPoses;\r\n\t\tvar parentIndex:number;\r\n\t\tvar joint:SkeletonJoint;\r\n\t\tvar parentPose:JointPose;\r\n\t\tvar pose:JointPose;\r\n\t\tvar or:Quaternion;\r\n\t\tvar tr:Vector3D;\r\n\t\tvar t:Vector3D;\r\n\t\tvar q:Quaternion;\r\n\r\n\t\tvar x1:number, y1:number, z1:number, w1:number;\r\n\t\tvar x2:number, y2:number, z2:number, w2:number;\r\n\t\tvar x3:number, y3:number, z3:number;\r\n\r\n\t\t// :s\r\n\t\tif (globalPoses.length != len)\r\n\t\t\tglobalPoses.length = len;\r\n\r\n\t\tfor (var i:number = 0; i < len; ++i) {\r\n\t\t\tglobalJointPose = globalPoses[i];\r\n\r\n\t\t\tif (globalJointPose == null)\r\n\t\t\t\tglobalJointPose = globalPoses[i] = new JointPose();\r\n\r\n\t\t\tjoint = joints[i];\r\n\t\t\tparentIndex = joint.parentIndex;\r\n\t\t\tpose = jointPoses[i];\r\n\r\n\t\t\tq = globalJointPose.orientation;\r\n\t\t\tt = globalJointPose.translation;\r\n\r\n\t\t\tif (parentIndex < 0) {\r\n\t\t\t\ttr = pose.translation;\r\n\t\t\t\tor = pose.orientation;\r\n\t\t\t\tq.x = or.x;\r\n\t\t\t\tq.y = or.y;\r\n\t\t\t\tq.z = or.z;\r\n\t\t\t\tq.w = or.w;\r\n\t\t\t\tt.x = tr.x;\r\n\t\t\t\tt.y = tr.y;\r\n\t\t\t\tt.z = tr.z;\r\n\t\t\t} else {\r\n\t\t\t\t// append parent pose\r\n\t\t\t\tparentPose = globalPoses[parentIndex];\r\n\r\n\t\t\t\t// rotate point\r\n\t\t\t\tor = parentPose.orientation;\r\n\t\t\t\ttr = pose.translation;\r\n\t\t\t\tx2 = or.x;\r\n\t\t\t\ty2 = or.y;\r\n\t\t\t\tz2 = or.z;\r\n\t\t\t\tw2 = or.w;\r\n\t\t\t\tx3 = tr.x;\r\n\t\t\t\ty3 = tr.y;\r\n\t\t\t\tz3 = tr.z;\r\n\r\n\t\t\t\tw1 = -x2*x3 - y2*y3 - z2*z3;\r\n\t\t\t\tx1 = w2*x3 + y2*z3 - z2*y3;\r\n\t\t\t\ty1 = w2*y3 - x2*z3 + z2*x3;\r\n\t\t\t\tz1 = w2*z3 + x2*y3 - y2*x3;\r\n\r\n\t\t\t\t// append parent translation\r\n\t\t\t\ttr = parentPose.translation;\r\n\t\t\t\tt.x = -w1*x2 + x1*w2 - y1*z2 + z1*y2 + tr.x;\r\n\t\t\t\tt.y = -w1*y2 + x1*z2 + y1*w2 - z1*x2 + tr.y;\r\n\t\t\t\tt.z = -w1*z2 - x1*y2 + y1*x2 + z1*w2 + tr.z;\r\n\r\n\t\t\t\t// append parent orientation\r\n\t\t\t\tx1 = or.x;\r\n\t\t\t\ty1 = or.y;\r\n\t\t\t\tz1 = or.z;\r\n\t\t\t\tw1 = or.w;\r\n\t\t\t\tor = pose.orientation;\r\n\t\t\t\tx2 = or.x;\r\n\t\t\t\ty2 = or.y;\r\n\t\t\t\tz2 = or.z;\r\n\t\t\t\tw2 = or.w;\r\n\r\n\t\t\t\tq.w = w1*w2 - x1*x2 - y1*y2 - z1*z2;\r\n\t\t\t\tq.x = w1*x2 + x1*w2 + y1*z2 - z1*y2;\r\n\t\t\t\tq.y = w1*y2 - x1*z2 + y1*w2 + z1*x2;\r\n\t\t\t\tq.z = w1*z2 + x1*y2 - y1*x2 + z1*w2;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onTransitionComplete(event:AnimationStateEvent):void\r\n\t{\r\n\t\tif (event.type == AnimationStateEvent.TRANSITION_COMPLETE) {\r\n\t\t\tevent.animationNode.removeEventListener(AnimationStateEvent.TRANSITION_COMPLETE, this._onTransitionCompleteDelegate);\r\n\t\t\t//if this is the current active state transition, revert control to the active node\r\n\t\t\tif (this._pActiveState == event.animationState) {\r\n\t\t\t\tthis._pActiveNode = this._pAnimationSet.getAnimation(this._pActiveAnimationName);\r\n\t\t\t\tthis._pActiveState = this.getAnimationState(this._pActiveNode);\r\n\t\t\t\tthis._activeSkeletonState = <ISkeletonAnimationState> this._pActiveState;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onIndicesUpdate(event:ElementsEvent):void\r\n\t{\r\n\t\tvar elements:TriangleElements = <TriangleElements> event.target;\r\n\r\n\t\t(<TriangleElements> this._morphedElements[elements.id]).setIndices(elements.indices);\r\n\t}\r\n\r\n\tprivate onVerticesUpdate(event:ElementsEvent):void\r\n\t{\r\n\t\t//only update uvs\r\n\t\tif (event.attributesView != elements.uvs && event.attributesView != elements.getCustomAtributes(\"secondaryUVs\"))\r\n\t\t\treturn;\r\n\r\n\t\tvar elements:TriangleElements = <TriangleElements> event.target;\r\n\t\tvar morphGraphics:TriangleElements = <TriangleElements> this._morphedElements[elements.id];\r\n\t\tvar morphUVs:Float32Array = <Float32Array> morphGraphics.uvs.get(elements.numVertices);\r\n\r\n\t\tmorphGraphics.invalidateVertices(morphGraphics.uvs);\r\n\r\n\t\tvar uvStride:number = morphGraphics.uvs.stride;\r\n\t\tvar uvs:Float32Array = <Float32Array> event.attributesView.get(elements.numVertices);\r\n\r\n\t\tvar len:number = elements.numVertices*uvStride;\r\n\t\tfor (var i:number = 0; i < len; i+=uvStride) {\r\n\t\t\tmorphUVs[i] = uvs[i];\r\n\t\t\tmorphUVs[i + 1] = uvs[i + 1];\r\n\t\t}\r\n\t}\r\n}",
    "import {IAnimationSet}\t\t\t\t\tfrom \"awayjs-display/lib/animators/IAnimationSet\";\r\n\r\nimport {AnimationSetBase}\t\t\t\t\tfrom \"../animators/AnimationSetBase\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../animators/data/AnimationRegisterData\";\r\nimport {VertexAnimationMode}\t\t\t\tfrom \"../animators/data/VertexAnimationMode\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\n\r\n/**\r\n * The animation data set used by vertex-based animators, containing vertex animation state data.\r\n *\r\n * @see VertexAnimator\r\n */\r\nexport class VertexAnimationSet extends AnimationSetBase implements IAnimationSet\r\n{\r\n\tprivate _iAnimationRegisterData:AnimationRegisterData;\r\n\t\r\n\tprivate _numPoses:number;\r\n\tprivate _blendMode:string;\r\n\r\n\t/**\r\n\t * Returns the number of poses made available at once to the GPU animation code.\r\n\t */\r\n\tpublic get numPoses():number\r\n\t{\r\n\t\treturn this._numPoses;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the active blend mode of the vertex animator object.\r\n\t */\r\n\tpublic get blendMode():string\r\n\t{\r\n\t\treturn this._blendMode;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns whether or not normal data is used in last set GPU pass of the vertex shader.\r\n\t */\r\n//\t\tpublic get useNormals():boolean\r\n//\t\t{\r\n//\t\t\treturn this._uploadNormals;\r\n//\t\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>VertexAnimationSet</code> object.\r\n\t *\r\n\t * @param numPoses The number of poses made available at once to the GPU animation code.\r\n\t * @param blendMode Optional value for setting the animation mode of the vertex animator object.\r\n\t *\r\n\t * @see away3d.animators.data.VertexAnimationMode\r\n\t */\r\n\tconstructor(numPoses:number = 2, blendMode:string = \"absolute\")\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._numPoses = numPoses;\r\n\t\tthis._blendMode = blendMode;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\t//grab animationRegisterData from the materialpassbase or create a new one if the first time\r\n\t\tthis._iAnimationRegisterData = shader.animationRegisterData;\r\n\r\n\t\tif (this._iAnimationRegisterData == null)\r\n\t\t\tthis._iAnimationRegisterData = shader.animationRegisterData = new AnimationRegisterData();\r\n\t\t\r\n\t\tif (this._blendMode == VertexAnimationMode.ABSOLUTE)\r\n\t\t\treturn this.getAbsoluteAGALCode(shader, registerCache, sharedRegisters);\r\n\t\telse\r\n\t\t\treturn this.getAdditiveAGALCode(shader, registerCache, sharedRegisters);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, shadedTarget:ShaderRegisterElement):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALUVCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"mov \" + sharedRegisters.uvTarget + \",\" + sharedRegisters.uvSource + \"\\n\";\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic doneAGALCode(shader:ShaderBase):void\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Generates the vertex AGAL code for absolute blending.\r\n\t */\r\n\tprivate getAbsoluteAGALCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(temp1, 1);\r\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar regs:Array<string> = new Array<string>(\".x\", \".y\", \".z\", \".w\");\r\n\t\tvar len:number = sharedRegisters.animatableAttributes.length;\r\n\t\tvar constantReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tthis._iAnimationRegisterData.weightsIndex = constantReg.index;\r\n\t\tthis._iAnimationRegisterData.poseIndices = new Array<number>(this._numPoses);\r\n\t\tvar poseInput:ShaderRegisterElement;\r\n\t\tvar k:number = 0;\r\n\t\t\r\n\t\tif (len > 2)\r\n\t\t\tlen = 2;\r\n\t\t\r\n\t\tfor (var i:number = 0; i < len; ++i) {\r\n\t\t\tcode += \"mul \" + temp1 + \", \" + sharedRegisters.animatableAttributes[i] + \", \" + constantReg + regs[0] + \"\\n\";\r\n\t\t\r\n\t\t\tfor (var j:number = 1; j < this._numPoses; ++j) {\r\n\t\t\t\tposeInput = registerCache.getFreeVertexAttribute();\r\n\t\t\t\tthis._iAnimationRegisterData.poseIndices[k++] = poseInput.index;\r\n\t\t\t\tcode += \"mul \" + temp2 + \", \" + poseInput + \", \" + constantReg + regs[j] + \"\\n\";\r\n\t\t\r\n\t\t\t\tif (j < this._numPoses - 1) //TODO this is always the case, write better?\r\n\t\t\t\t\tcode += \"add \" + temp1 + \", \" + temp1 + \", \" + temp2 + \"\\n\";\r\n\t\t\t}\r\n\t\t\r\n\t\t\tcode += \"add \" + sharedRegisters.animationTargetRegisters[i] + \", \" + temp1 + \", \" + temp2 + \"\\n\";\r\n\t\t}\r\n\t\t\r\n\t\t// add code for bitangents if tangents are used\r\n\t\tif (shader.tangentDependencies > 0 || shader.outputsNormals) {\r\n\t\t\tcode += \"dp3 \" + temp1 + \".x, \" + sharedRegisters.animatableAttributes[2] + \", \" + sharedRegisters.animationTargetRegisters[1] + \"\\n\" +\r\n\t\t\t\t\"mul \" + temp1 + \", \" + sharedRegisters.animationTargetRegisters[1] + \", \" + temp1 + \".x\\n\" +\r\n\t\t\t\t\"sub \" + sharedRegisters.animationTargetRegisters[2] + \", \" + sharedRegisters.animationTargetRegisters[2] + \", \" + temp1 + \"\\n\";\r\n\t\t}\r\n\t\t//\r\n\t\t// // simply write attributes to targets, do not animate them\r\n\t\t// // projection will pick up on targets[0] to do the projection\r\n\t\t// var len:number = sharedRegisters.animatableAttributes.length;\r\n\t\t// for (var i:number = 0; i < len; ++i)\r\n\t\t// \tcode += \"mov \" + sharedRegisters.animationTargetRegisters[i] + \", \" + sharedRegisters.animatableAttributes[i] + \"\\n\";\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * Generates the vertex AGAL code for additive blending.\r\n\t */\r\n\tprivate getAdditiveAGALCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tvar len:number = sharedRegisters.animatableAttributes.length;\r\n\t\tvar regs:Array<string> = [\".x\", \".y\", \".z\", \".w\"];\r\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar constantReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tthis._iAnimationRegisterData.weightsIndex = constantReg.index;\r\n\t\tthis._iAnimationRegisterData.poseIndices = new Array<number>(this._numPoses);\r\n\t\tvar poseInput:ShaderRegisterElement;\r\n\t\tvar k:number = 0;\r\n\r\n\t\tif (len > 2)\r\n\t\t\tlen = 2;\r\n\r\n\t\tcode += \"mov  \" + sharedRegisters.animationTargetRegisters[0] + \", \" + sharedRegisters.animatableAttributes[0] + \"\\n\";\r\n\t\tif (shader.normalDependencies > 0)\r\n\t\t\tcode += \"mov \" + sharedRegisters.animationTargetRegisters[1] + \", \" + sharedRegisters.animatableAttributes[1] + \"\\n\";\r\n\r\n\t\tfor (var i:number = 0; i < len; ++i) {\r\n\t\t\tfor (var j:number = 0; j < this._numPoses; ++j) {\r\n\t\t\t\tposeInput = registerCache.getFreeVertexAttribute();\r\n\t\t\t\tthis._iAnimationRegisterData.poseIndices[k++] = poseInput.index;\r\n\t\t\t\tcode += \"mul \" + temp1 + \", \" + poseInput + \", \" + constantReg + regs[j] + \"\\n\" +\r\n\t\t\t\t\t\"add \" + sharedRegisters.animationTargetRegisters[i] + \", \" + sharedRegisters.animationTargetRegisters[i] + \", \" + temp1 + \"\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (shader.tangentDependencies > 0 || shader.outputsNormals) {\r\n\t\t\tcode += \"dp3 \" + temp1 + \".x, \" + sharedRegisters.animatableAttributes[2] + \", \" + sharedRegisters.animationTargetRegisters[1] + \"\\n\" +\r\n\t\t\t\t\"mul \" + temp1 + \", \" + sharedRegisters.animationTargetRegisters[1] + \", \" + temp1 + \".x\\n\" +\r\n\t\t\t\t\"sub \" + sharedRegisters.animationTargetRegisters[2] + \", \" + sharedRegisters.animatableAttributes[2] + \", \" + temp1 + \"\\n\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n}",
    "import {Graphics}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphics\";\r\nimport {ElementsBase}\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsBase\";\r\nimport {TriangleElements}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\nimport {Graphic}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphic\";\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\nimport {VertexAnimationSet}\t\t\t\tfrom \"../animators/VertexAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../animators/data/AnimationRegisterData\";\r\nimport {VertexAnimationMode}\t\t\t\tfrom \"../animators/data/VertexAnimationMode\";\r\nimport {IVertexAnimationState}\t\t\tfrom \"../animators/states/IVertexAnimationState\";\r\nimport {IAnimationTransition}\t\t\t\tfrom \"../animators/transitions/IAnimationTransition\";\r\nimport {GL_GraphicRenderable}\t\t\t\tfrom \"../renderables/GL_GraphicRenderable\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {GL_ElementsBase}\t\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\n\r\n/**\r\n * Provides an interface for assigning vertex-based animation data sets to sprite-based entity objects\r\n * and controlling the various available states of animation through an interative playhead that can be\r\n * automatically updated or manually triggered.\r\n */\r\nexport class VertexAnimator extends AnimatorBase\r\n{\r\n\tprivate _vertexAnimationSet:VertexAnimationSet;\r\n\tprivate _poses:Array<Graphics> = new Array<Graphics>();\r\n\tprivate _weights:Float32Array = new Float32Array([1, 0, 0, 0]);\r\n\tprivate _activeVertexState:IVertexAnimationState;\r\n\r\n\t/**\r\n\t * Creates a new <code>VertexAnimator</code> object.\r\n\t *\r\n\t * @param vertexAnimationSet The animation data set containing the vertex animations used by the animator.\r\n\t */\r\n\tconstructor(vertexAnimationSet:VertexAnimationSet)\r\n\t{\r\n\t\tsuper(vertexAnimationSet);\r\n\r\n\t\tthis._vertexAnimationSet = vertexAnimationSet;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic clone():AnimatorBase\r\n\t{\r\n\t\treturn new VertexAnimator(this._vertexAnimationSet);\r\n\t}\r\n\r\n\t/**\r\n\t * Plays a sequence with a given name. If the sequence is not found, it may not be loaded yet, and it will retry every frame.\r\n\t * @param sequenceName The name of the clip to be played.\r\n\t */\r\n\tpublic play(name:string, transition:IAnimationTransition = null, offset:number = NaN):void\r\n\t{\r\n\t\tif (this._pActiveAnimationName == name)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pActiveAnimationName = name;\r\n\r\n\t\t//TODO: implement transitions in vertex animator\r\n\r\n\t\tif (!this._pAnimationSet.hasAnimation(name))\r\n\t\t\tthrow new Error(\"Animation root node \" + name + \" not found!\");\r\n\r\n\t\tthis._pActiveNode = this._pAnimationSet.getAnimation(name);\r\n\r\n\t\tthis._pActiveState = this.getAnimationState(this._pActiveNode);\r\n\r\n\t\tif (this.updatePosition) {\r\n\t\t\t//update straight away to reset position deltas\r\n\t\t\tthis._pActiveState.update(this._pAbsoluteTime);\r\n\t\t\tthis._pActiveState.positionDelta;\r\n\t\t}\r\n\r\n\t\tthis._activeVertexState = <IVertexAnimationState> this._pActiveState;\r\n\r\n\t\tthis.start();\r\n\r\n\t\t//apply a time offset if specified\r\n\t\tif (!isNaN(offset))\r\n\t\t\tthis.reset(name, offset);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateDeltaTime(dt:number):void\r\n\t{\r\n\t\tsuper._pUpdateDeltaTime(dt);\r\n\r\n\t\tvar geometryFlag:boolean = false;\r\n\r\n\t\tif (this._poses[0] != this._activeVertexState.currentGraphics) {\r\n\t\t\tthis._poses[0] = this._activeVertexState.currentGraphics;\r\n\t\t\tgeometryFlag = true;\r\n\t\t}\r\n\r\n\t\tif (this._poses[1] != this._activeVertexState.nextGraphics)\r\n\t\t\tthis._poses[1] = this._activeVertexState.nextGraphics;\r\n\r\n\t\tthis._weights[0] = 1 - (this._weights[1] = this._activeVertexState.blendWeight);\r\n\r\n\t\tif (geometryFlag)\r\n\t\t\tthis.invalidateElements();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, stage:Stage, camera:Camera):void\r\n\t{\r\n\t\t// todo: add code for when running on cpu\r\n\t\t// this type of animation can only be SubSprite\r\n\t\tvar graphic:Graphic = <Graphic> (<GL_GraphicRenderable> renderable).graphic;\r\n\t\tvar elements:ElementsBase = graphic.elements;\r\n\r\n\t\t// if no poses defined, set temp data\r\n\t\tif (!this._poses.length) {\r\n\t\t\tthis.setNullPose(shader, elements, stage);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar animationRegisterData:AnimationRegisterData = shader.animationRegisterData;\r\n\t\tvar i:number;\r\n\t\tvar len:number = this._vertexAnimationSet.numPoses;\r\n\r\n\t\tshader.setVertexConstFromArray(animationRegisterData.weightsIndex, this._weights);\r\n\r\n\t\tif (this._vertexAnimationSet.blendMode == VertexAnimationMode.ABSOLUTE)\r\n\t\t\ti = 1;\r\n\t\telse\r\n\t\t\ti = 0;\r\n\r\n\t\tvar elementsGL:GL_ElementsBase;\r\n\t\tvar k:number = 0;\r\n\r\n\t\tfor (; i < len; ++i) {\r\n\t\t\telements = this._poses[i].getGraphicAt(graphic._iIndex).elements || graphic.elements;\r\n\r\n\t\t\telementsGL = <GL_ElementsBase> stage.getAbstraction(elements);\r\n\t\t\telementsGL._indexMappings = (<GL_ElementsBase> stage.getAbstraction(graphic.elements)).getIndexMappings();\r\n\r\n\t\t\tif (elements.isAsset(TriangleElements)) {\r\n\t\t\t\telementsGL.activateVertexBufferVO(animationRegisterData.poseIndices[k++], (<TriangleElements> elements).positions);\r\n\r\n\t\t\t\tif (shader.normalDependencies > 0)\r\n\t\t\t\t\telementsGL.activateVertexBufferVO(animationRegisterData.poseIndices[k++], (<TriangleElements> elements).normals);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setNullPose(shader:ShaderBase, elements:ElementsBase, stage:Stage):void\r\n\t{\r\n\t\tvar animationRegisterData:AnimationRegisterData = shader.animationRegisterData;\r\n\t\t\r\n\t\tshader.setVertexConstFromArray(animationRegisterData.weightsIndex, this._weights);\r\n\r\n\t\tvar elementsGL:GL_ElementsBase = (<GL_ElementsBase> stage.getAbstraction(elements));\r\n\t\tvar k:number = 0;\r\n\t\t\r\n\t\tif (this._vertexAnimationSet.blendMode == VertexAnimationMode.ABSOLUTE) {\r\n\t\t\tvar len:number = this._vertexAnimationSet.numPoses;\r\n\t\t\tfor (var i:number = 1; i < len; ++i) {\r\n\t\t\t\tif (elements.isAsset(TriangleElements)) {\r\n\t\t\t\t\telementsGL.activateVertexBufferVO(animationRegisterData.poseIndices[k++], (<TriangleElements> elements).positions);\r\n\r\n\t\t\t\t\tif (shader.normalDependencies > 0)\r\n\t\t\t\t\t\telementsGL.activateVertexBufferVO(animationRegisterData.poseIndices[k++], (<TriangleElements> elements).normals);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// todo: set temp data for additive?\r\n\t}\r\n\r\n\t/**\r\n\t * Verifies if the animation will be used on cpu. Needs to be true for all passes for a material to be able to use it on gpu.\r\n\t * Needs to be called if gpu code is potentially required.\r\n\t */\r\n\tpublic testGPUCompatibility(shader:ShaderBase):void\r\n\t{\r\n\t}\r\n\r\n\tpublic getRenderableElements(renderable:GL_GraphicRenderable, sourceElements:TriangleElements):TriangleElements\r\n\t{\r\n\t\tif (this._vertexAnimationSet.blendMode == VertexAnimationMode.ABSOLUTE && this._poses.length)\r\n\t\t\treturn <TriangleElements> this._poses[0].getGraphicAt(renderable.graphic._iIndex).elements || sourceElements;\r\n\r\n\t\t//nothing to do here\r\n\t\treturn sourceElements;\r\n\t}\r\n}",
    "import {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {IContextGL}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {IVertexBuffer}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IVertexBuffer\";\r\n\r\nimport {ParticleAnimationData}\t\t\tfrom \"../../animators/data/ParticleAnimationData\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class AnimationElements\r\n{\r\n\tpublic static SUBGEOM_ID_COUNT:number = 0;\r\n\r\n\tpublic _pVertexData:Array<number>;\r\n\r\n\tpublic _pVertexBuffer:Array<IVertexBuffer> = new Array<IVertexBuffer>(8);\r\n\tpublic _pBufferContext:Array<IContextGL> = new Array<IContextGL>(8);\r\n\tpublic _pBufferDirty:Array<boolean> = new Array<boolean>(8);\r\n\r\n\tprivate _numVertices:number;\r\n\r\n\tprivate _totalLenOfOneVertex:number;\r\n\r\n\tpublic numProcessedVertices:number = 0;\r\n\r\n\tpublic previousTime:number = Number.NEGATIVE_INFINITY;\r\n\r\n\tpublic animationParticles:Array<ParticleAnimationData> = new Array<ParticleAnimationData>();\r\n\r\n\t/**\r\n\t * An id for this animation subgeometry, used to identify animation subgeometries when using animation sets.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic _iUniqueId:number;//Arcane\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tfor (var i:number = 0; i < 8; i++)\r\n\t\t\tthis._pBufferDirty[i] = true;\r\n\r\n\t\tthis._iUniqueId = AnimationElements.SUBGEOM_ID_COUNT++;\r\n\t}\r\n\r\n\tpublic createVertexData(numVertices:number, totalLenOfOneVertex:number):void\r\n\t{\r\n\t\tthis._numVertices = numVertices;\r\n\t\tthis._totalLenOfOneVertex = totalLenOfOneVertex;\r\n\t\tthis._pVertexData = new Array<number>(numVertices*totalLenOfOneVertex);\r\n\t}\r\n\r\n\tpublic activateVertexBuffer(index:number, bufferOffset:number, stage:Stage, format:number):void\r\n\t{\r\n\t\tvar contextIndex:number = stage.stageIndex;\r\n\t\tvar context:IContextGL = <IContextGL> stage.context;\r\n\r\n\t\tvar buffer:IVertexBuffer = this._pVertexBuffer[contextIndex];\r\n\t\tif (!buffer || this._pBufferContext[contextIndex] != context) {\r\n\t\t\tbuffer = this._pVertexBuffer[contextIndex] = context.createVertexBuffer(this._numVertices, this._totalLenOfOneVertex*4);\r\n\t\t\tthis._pBufferContext[contextIndex] = context;\r\n\t\t\tthis._pBufferDirty[contextIndex] = true;\r\n\t\t}\r\n\t\tif (this._pBufferDirty[contextIndex]) {\r\n\t\t\tbuffer.uploadFromArray(this._pVertexData, 0, this._numVertices);\r\n\t\t\tthis._pBufferDirty[contextIndex] = false;\r\n\t\t}\r\n\t\tcontext.setVertexBufferAt(index, buffer, bufferOffset*4, format);\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\twhile (this._pVertexBuffer.length) {\r\n\t\t\tvar vertexBuffer:IVertexBuffer = this._pVertexBuffer.pop()\r\n\r\n\t\t\tif (vertexBuffer)\r\n\t\t\t\tvertexBuffer.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic invalidateBuffer():void\r\n\t{\r\n\t\tfor (var i:number = 0; i < 8; i++)\r\n\t\t\tthis._pBufferDirty[i] = true;\r\n\t}\r\n\r\n\tpublic get vertexData():Array<number>\r\n\t{\r\n\t\treturn this._pVertexData;\r\n\t}\r\n\r\n\tpublic get numVertices():number\r\n\t{\r\n\t\treturn this._numVertices;\r\n\t}\r\n\r\n\tpublic get totalLenOfOneVertex():number\r\n\t{\r\n\t\treturn this._totalLenOfOneVertex;\r\n\t}\r\n}",
    "import {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\nimport {AnimationNodeBase}\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n\r\n/**\r\n * ...\r\n */\r\nexport class AnimationRegisterData\r\n{\r\n\t//vertex animation data\r\n\tpublic weightsIndex:number;\r\n\tpublic poseIndices:Array<number>;\r\n\t\r\n\t//vertex\r\n\tpublic positionAttribute:ShaderRegisterElement;\r\n\tpublic uvAttribute:ShaderRegisterElement;\r\n\tpublic positionTarget:ShaderRegisterElement;\r\n\tpublic scaleAndRotateTarget:ShaderRegisterElement;\r\n\tpublic velocityTarget:ShaderRegisterElement;\r\n\tpublic vertexTime:ShaderRegisterElement;\r\n\tpublic vertexLife:ShaderRegisterElement;\r\n\tpublic vertexZeroConst:ShaderRegisterElement;\r\n\tpublic vertexOneConst:ShaderRegisterElement;\r\n\tpublic vertexTwoConst:ShaderRegisterElement;\r\n\tpublic uvTarget:ShaderRegisterElement;\r\n\tpublic colorAddTarget:ShaderRegisterElement;\r\n\tpublic colorMulTarget:ShaderRegisterElement;\r\n\t//vary\r\n\tpublic colorAddVary:ShaderRegisterElement;\r\n\tpublic colorMulVary:ShaderRegisterElement;\r\n\r\n\t//fragment\r\n\tpublic uvVar:ShaderRegisterElement;\r\n\r\n\t//these are targets only need to rotate ( normal and tangent )\r\n\tpublic rotationRegisters:Array<ShaderRegisterElement>;\r\n\r\n\tprivate indexDictionary:Object = new Object();\r\n\r\n\tconstructor()\r\n\t{\r\n\t}\r\n\r\n\tpublic reset(registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData, needVelocity:boolean):void\r\n\t{\r\n\t\tthis.rotationRegisters = new Array<ShaderRegisterElement>();\r\n\t\tthis.positionAttribute = sharedRegisters.animatableAttributes[0];\r\n\t\tthis.scaleAndRotateTarget = sharedRegisters.animationTargetRegisters[0];\r\n\r\n\t\tfor (var i:number = 1; i < sharedRegisters.animationTargetRegisters.length; i++)\r\n\t\t\tthis.rotationRegisters.push(sharedRegisters.animationTargetRegisters[i]);\r\n\t\t\r\n\t\t//allot const register\r\n\t\tthis.vertexZeroConst = registerCache.getFreeVertexConstant();\r\n\t\tthis.vertexZeroConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 0);\r\n\t\tthis.vertexOneConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 1);\r\n\t\tthis.vertexTwoConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 2);\r\n\r\n\t\t//allot temp register\r\n\t\tthis.positionTarget = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(this.positionTarget, 1);\r\n\t\tthis.positionTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);\r\n\r\n\t\tif (needVelocity) {\r\n\t\t\tthis.velocityTarget = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(this.velocityTarget, 1);\r\n\t\t\tthis.velocityTarget = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index);\r\n\t\t\tthis.vertexTime = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index, 3);\r\n\t\t\tthis.vertexLife = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index, 3);\r\n\t\t} else {\r\n\t\t\tvar tempTime:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(tempTime, 1);\r\n\t\t\tthis.vertexTime = new ShaderRegisterElement(tempTime.regName, tempTime.index, 0);\r\n\t\t\tthis.vertexLife = new ShaderRegisterElement(tempTime.regName, tempTime.index, 1);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic setUVSourceAndTarget(sharedRegisters:ShaderRegisterData):void\r\n\t{\r\n\t\tthis.uvVar = sharedRegisters.uvTarget;\r\n\t\tthis.uvAttribute = sharedRegisters.uvSource;\r\n\t\t//uv action is processed after normal actions,so use offsetTarget as uvTarget\r\n\t\tthis.uvTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);\r\n\t}\r\n\r\n\tpublic setRegisterIndex(node:AnimationNodeBase, parameterIndex:number, registerIndex:number):void\r\n\t{\r\n\t\t//8 should be enough for any node.\r\n\t\tvar t:Array<number> = this.indexDictionary[node.id];\r\n\r\n\t\tif (t == null)\r\n\t\t\tt = this.indexDictionary[node.id] = new Array<number>(8);\r\n\r\n\t\tt[parameterIndex] = registerIndex;\r\n\t}\r\n\r\n\tpublic getRegisterIndex(node:AnimationNodeBase, parameterIndex:number):number\r\n\t{\r\n\t\treturn (<Array<number>> this.indexDictionary[node.id])[parameterIndex];\r\n\t}\r\n}",
    "import {ColorTransform}\t\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\n\r\nexport class ColorSegmentPoint\r\n{\r\n\tprivate _color:ColorTransform;\r\n\tprivate _life:number;\r\n\r\n\tconstructor(life:number, color:ColorTransform)\r\n\t{\r\n\t\t//0<life<1\r\n\t\tif (life <= 0 || life >= 1)\r\n\t\t\tthrow(new Error(\"life exceeds range (0,1)\"));\r\n\t\tthis._life = life;\r\n\t\tthis._color = color;\r\n\t}\r\n\r\n\tpublic get color():ColorTransform\r\n\t{\r\n\t\treturn this._color;\r\n\t}\r\n\r\n\tpublic get life():number\r\n\t{\r\n\t\treturn this._life;\r\n\t}\r\n\r\n}",
    "import {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Quaternion}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Quaternion\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\n/**\r\n * Contains transformation data for a skeleton joint, used for skeleton animation.\r\n *\r\n * @see away.animation.Skeleton\r\n * @see away.animation.SkeletonJoint\r\n *\r\n * todo: support (uniform) scale\r\n */\r\nexport class JointPose\r\n{\r\n\t/**\r\n\t * The name of the joint to which the pose is associated\r\n\t */\r\n\tpublic name:string; // intention is that this should be used only at load time, not in the main loop\r\n\r\n\t/**\r\n\t * The rotation of the pose stored as a quaternion\r\n\t */\r\n\tpublic orientation:Quaternion = new Quaternion();\r\n\r\n\t/**\r\n\t * The translation of the pose\r\n\t */\r\n\tpublic translation:Vector3D = new Vector3D();\r\n\r\n\tconstructor()\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the transformation to a Matrix3D representation.\r\n\t *\r\n\t * @param target An optional target matrix to store the transformation. If not provided, it will create a new instance.\r\n\t * @return The transformation matrix of the pose.\r\n\t */\r\n\tpublic toMatrix3D(target:Matrix3D = null):Matrix3D\r\n\t{\r\n\t\tif (target == null)\r\n\t\t\ttarget = new Matrix3D();\r\n\r\n\t\tthis.orientation.toMatrix3D(target);\r\n\t\ttarget.appendTranslation(this.translation.x, this.translation.y, this.translation.z);\r\n\t\treturn target;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies the transformation data from a source pose object into the existing pose object.\r\n\t *\r\n\t * @param pose The source pose to copy from.\r\n\t */\r\n\tpublic copyFrom(pose:JointPose):void\r\n\t{\r\n\t\tvar or:Quaternion = pose.orientation;\r\n\t\tvar tr:Vector3D = pose.translation;\r\n\t\tthis.orientation.x = or.x;\r\n\t\tthis.orientation.y = or.y;\r\n\t\tthis.orientation.z = or.z;\r\n\t\tthis.orientation.w = or.w;\r\n\t\tthis.translation.x = tr.x;\r\n\t\tthis.translation.y = tr.y;\r\n\t\tthis.translation.z = tr.z;\r\n\t}\r\n}",
    "import {ParticleData}\t\t\t\t\t\tfrom \"awayjs-display/lib/animators/data/ParticleData\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleAnimationData\r\n{\r\n\tpublic index:number;\r\n\tpublic startTime:number;\r\n\tpublic totalTime:number;\r\n\tpublic duration:number;\r\n\tpublic delay:number;\r\n\tpublic startVertexIndex:number;\r\n\tpublic numVertices:number;\r\n\r\n\tconstructor(index:number, startTime:number, duration:number, delay:number, particle:ParticleData)\r\n\t{\r\n\t\tthis.index = index;\r\n\t\tthis.startTime = startTime;\r\n\t\tthis.totalTime = duration + delay;\r\n\t\tthis.duration = duration;\r\n\t\tthis.delay = delay;\r\n\t\tthis.startVertexIndex = particle.startVertexIndex;\r\n\t\tthis.numVertices = particle.numVertices;\r\n\t}\r\n}",
    "/**\r\n * Options for setting the properties mode of a particle animation node.\r\n */\r\nexport class ParticlePropertiesMode\r\n{\r\n\t/**\r\n\t * Mode that defines the particle node as acting on global properties (ie. the properties set in the node constructor or the corresponding animation state).\r\n\t */\r\n\tpublic static GLOBAL:number = 0;\r\n\r\n\t/**\r\n\t * Mode that defines the particle node as acting on local static properties (ie. the properties of particles set in the initialising on the animation set).\r\n\t */\r\n\tpublic static LOCAL_STATIC:number = 1;\r\n\r\n\t/**\r\n\t * Mode that defines the particle node as acting on local dynamic properties (ie. the properties of the particles set in the corresponding animation state).\r\n\t */\r\n\tpublic static LOCAL_DYNAMIC:number = 2;\r\n}",
    "/**\r\n * Dynamic class for holding the local properties of a particle, used for processing the static properties\r\n * of particles in the particle animation set before beginning upload to the GPU.\r\n */\r\nexport class ParticleProperties\r\n{\r\n\t/**\r\n\t * The index of the current particle being set.\r\n\t */\r\n\tpublic index:number;\r\n\r\n\t/**\r\n\t * The total number of particles being processed by the particle animation set.\r\n\t */\r\n\tpublic total:number;\r\n\r\n\t/**\r\n\t * The start time of the particle.\r\n\t */\r\n\tpublic startTime:number;\r\n\r\n\t/**\r\n\t * The duration of the particle, an optional value used when the particle aniamtion set settings for <code>useDuration</code> are enabled in the constructor.\r\n\t *\r\n\t * @see away.animators.ParticleAnimationSet\r\n\t */\r\n\tpublic duration:number;\r\n\r\n\t/**\r\n\t * The delay between cycles of the particle, an optional value used when the particle aniamtion set settings for <code>useLooping</code> and  <code>useDelay</code> are enabled in the constructor.\r\n\t *\r\n\t * @see away.animators.ParticleAnimationSet\r\n\t */\r\n\tpublic delay:number;\r\n}",
    "/**\r\n * A value obect representing a single joint in a skeleton object.\r\n *\r\n * @see away.animators.Skeleton\r\n */\r\nexport class SkeletonJoint\r\n{\r\n\t/**\r\n\t * The index of the parent joint in the skeleton's joints vector.\r\n\t *\r\n\t * @see away.animators.Skeleton#joints\r\n\t */\r\n\tpublic parentIndex:number = -1;\r\n\r\n\t/**\r\n\t * The name of the joint\r\n\t */\r\n\tpublic name:string; // intention is that this should be used only at load time, not in the main loop\r\n\r\n\t/**\r\n\t * The inverse bind pose matrix, as raw data, used to transform vertices to bind joint space in preparation for transformation using the joint matrix.\r\n\t */\r\n\tpublic inverseBindPose:Float32Array;\r\n\r\n\t/**\r\n\t * Creates a new <code>SkeletonJoint</code> object\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t}\r\n}",
    "import {IAsset}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\r\nimport {AssetBase}\t\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetBase\";\r\n\r\nimport {JointPose}\t\t\t\t\t\tfrom \"../../animators/data/JointPose\";\r\n\r\n\r\n/**\r\n * A collection of pose objects, determining the pose for an entire skeleton.\r\n * The <code>jointPoses</code> vector object corresponds to a skeleton's <code>joints</code> vector object, however, there is no\r\n * reference to a skeleton's instance, since several skeletons can be influenced by the same pose (eg: animation\r\n * clips are added to any animator with a valid skeleton)\r\n *\r\n * @see away.animators.Skeleton\r\n * @see away.animators.JointPose\r\n */\r\nexport class SkeletonPose extends AssetBase implements IAsset\r\n{\r\n\tpublic static assetType:string = \"[asset SkeletonPose]\";\r\n\r\n\t/**\r\n\t * A flat list of pose objects that comprise the skeleton pose. The pose indices correspond to the target skeleton's joint indices.\r\n\t *\r\n\t * @see away.animators.Skeleton#joints\r\n\t */\r\n\tpublic jointPoses:Array<JointPose>;\r\n\r\n\t/**\r\n\t * The total number of joint poses in the skeleton pose.\r\n\t */\r\n\tpublic get numJointPoses():number\r\n\t{\r\n\t\treturn this.jointPoses.length;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>SkeletonPose</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis.jointPoses = new Array<JointPose>();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn SkeletonPose.assetType;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the joint pose object with the given joint name, otherwise returns a null object.\r\n\t *\r\n\t * @param jointName The name of the joint object whose pose is to be found.\r\n\t * @return The pose object with the given joint name.\r\n\t */\r\n\tpublic jointPoseFromName(jointName:string):JointPose\r\n\t{\r\n\t\tvar jointPoseIndex:number = this.jointPoseIndexFromName(jointName);\r\n\t\tif (jointPoseIndex != -1)\r\n\t\t\treturn this.jointPoses[jointPoseIndex]; else\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the pose index, given the joint name. -1 is returned if the joint name is not found in the pose.\r\n\t *\r\n\t * @param The name of the joint object whose pose is to be found.\r\n\t * @return The index of the pose object in the jointPoses Array\r\n\t *\r\n\t * @see #jointPoses\r\n\t */\r\n\tpublic jointPoseIndexFromName(jointName:string):number\r\n\t{\r\n\t\t// this is implemented as a linear search, rather than a possibly\r\n\t\t// more optimal method (Dictionary lookup, for example) because:\r\n\t\t// a) it is assumed that it will be called once for each joint\r\n\t\t// b) it is assumed that it will be called only during load, and not during main loop\r\n\t\t// c) maintaining a dictionary (for safety) would dictate an interface to access JointPoses,\r\n\t\t//    rather than direct array access.  this would be sub-optimal.\r\n\t\tvar jointPoseIndex:number;\r\n\t\tvar jointPose:JointPose;\r\n\t\tfor (var i:number; i < this.jointPoses.length; i++) {\r\n\t\t\tjointPose = this.jointPoses[i];\r\n\t\t\tif (jointPose.name == jointName)\r\n\t\t\t\treturn jointPoseIndex;\r\n\t\t\tjointPoseIndex++;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a copy of the <code>SkeletonPose</code> object, with a dulpicate of its component joint poses.\r\n\t *\r\n\t * @return SkeletonPose\r\n\t */\r\n\tpublic clone():SkeletonPose\r\n\t{\r\n\t\tvar clone:SkeletonPose = new SkeletonPose();\r\n\t\tvar numJointPoses:number = this.jointPoses.length;\r\n\t\tfor (var i:number = 0; i < numJointPoses; i++) {\r\n\t\t\tvar cloneJointPose:JointPose = new JointPose();\r\n\t\t\tvar thisJointPose:JointPose = this.jointPoses[i];\r\n\t\t\tcloneJointPose.name = thisJointPose.name;\r\n\t\t\tcloneJointPose.copyFrom(thisJointPose);\r\n\t\t\tclone.jointPoses[i] = cloneJointPose;\r\n\t\t}\r\n\t\treturn clone;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis.jointPoses.length = 0;\r\n\t}\r\n}",
    "import {SkeletonJoint}\t\t\t\t\tfrom \"../../animators/data/SkeletonJoint\";\r\n\r\nimport {IAsset}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\r\nimport {AssetBase}\t\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetBase\";\r\n\r\n/**\r\n * A Skeleton object is a hierarchical grouping of joint objects that can be used for skeletal animation.\r\n *\r\n * @see away.animators.SkeletonJoint\r\n */\r\nexport class Skeleton extends AssetBase implements IAsset\r\n{\r\n\tpublic static assetType:string = \"[asset Skeleton]\";\r\n\r\n\t/**\r\n\t * A flat list of joint objects that comprise the skeleton. Every joint except for the root has a parentIndex\r\n\t * property that is an index into this list.\r\n\t * A child joint should always have a higher index than its parent.\r\n\t */\r\n\tpublic joints:Array<SkeletonJoint>;\r\n\r\n\t/**\r\n\t * The total number of joints in the skeleton.\r\n\t */\r\n\tpublic get numJoints():number\r\n\t{\r\n\t\treturn this.joints.length;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>Skeleton</code> object\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\t// in the long run, it might be a better idea to not store Joint objects, but keep all data in Vectors, that we can upload easily?\r\n\t\tthis.joints = new Array<SkeletonJoint>();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the joint object in the skeleton with the given name, otherwise returns a null object.\r\n\t *\r\n\t * @param jointName The name of the joint object to be found.\r\n\t * @return The joint object with the given name.\r\n\t *\r\n\t * @see #joints\r\n\t */\r\n\tpublic jointFromName(jointName:string):SkeletonJoint\r\n\t{\r\n\t\tvar jointIndex:number = this.jointIndexFromName(jointName);\r\n\t\tif (jointIndex != -1)\r\n\t\t\treturn this.joints[jointIndex]; else\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the joint index, given the joint name. -1 is returned if the joint name is not found.\r\n\t *\r\n\t * @param jointName The name of the joint object to be found.\r\n\t * @return The index of the joint object in the joints Array\r\n\t *\r\n\t * @see #joints\r\n\t */\r\n\tpublic jointIndexFromName(jointName:string):number\r\n\t{\r\n\t\t// this is implemented as a linear search, rather than a possibly\r\n\t\t// more optimal method (Dictionary lookup, for example) because:\r\n\t\t// a) it is assumed that it will be called once for each joint\r\n\t\t// b) it is assumed that it will be called only during load, and not during main loop\r\n\t\t// c) maintaining a dictionary (for safety) would dictate an interface to access SkeletonJoints,\r\n\t\t//    rather than direct array access.  this would be sub-optimal.\r\n\t\tvar jointIndex:number;\r\n\t\tvar joint:SkeletonJoint;\r\n\t\tfor (var i:number; i < this.joints.length; i++) {\r\n\t\t\tjoint = this.joints[i];\r\n\t\t\tif (joint.name == jointName)\r\n\t\t\t\treturn jointIndex;\r\n\t\t\tjointIndex++;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis.joints.length = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic get assetType():string\r\n\t{\r\n\t\treturn Skeleton.assetType;\r\n\t}\r\n}",
    "/**\r\n * Options for setting the animation mode of a vertex animator object.\r\n *\r\n * @see away.animators.VertexAnimator\r\n */\r\nexport class VertexAnimationMode\r\n{\r\n\t/**\r\n\t * Animation mode that adds all outputs from active vertex animation state to form the current vertex animation pose.\r\n\t */\r\n\tpublic static ADDITIVE:string = \"additive\";\r\n\r\n\t/**\r\n\t * Animation mode that picks the output from a single vertex animation state to form the current vertex animation pose.\r\n\t */\r\n\tpublic static ABSOLUTE:string = \"absolute\";\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\n/**\r\n * Provides an abstract base class for nodes with time-based animation data in an animation blend tree.\r\n */\r\nexport class AnimationClipNodeBase extends AnimationNodeBase\r\n{\r\n\tpublic _pLooping:boolean = true;\r\n\tpublic _pTotalDuration:number = 0;\r\n\tpublic _pLastFrame:number;\r\n\r\n\tpublic _pStitchDirty:boolean = true;\r\n\tpublic _pStitchFinalFrame:boolean = false;\r\n\tpublic _pNumFrames:number = 0;\r\n\r\n\tpublic _pDurations:Array<number> = new Array<number>();\r\n\t/*uint*/\r\n\tpublic _pTotalDelta:Vector3D = new Vector3D();\r\n\r\n\tpublic fixedFrameRate:boolean = true;\r\n\r\n\t/**\r\n\t * Determines whether the contents of the animation node have looping characteristics enabled.\r\n\t */\r\n\tpublic get looping():boolean\r\n\t{\r\n\t\treturn this._pLooping;\r\n\t}\r\n\r\n\tpublic set looping(value:boolean)\r\n\t{\r\n\t\tif (this._pLooping == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pLooping = value;\r\n\r\n\t\tthis._pStitchDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines if looping content blends the final frame of animation data with the first (true) or works on the\r\n\t * assumption that both first and last frames are identical (false). Defaults to false.\r\n\t */\r\n\tpublic get stitchFinalFrame():boolean\r\n\t{\r\n\t\treturn this._pStitchFinalFrame;\r\n\t}\r\n\r\n\tpublic set stitchFinalFrame(value:boolean)\r\n\t{\r\n\t\tif (this._pStitchFinalFrame == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pStitchFinalFrame = value;\r\n\r\n\t\tthis._pStitchDirty = true;\r\n\t}\r\n\r\n\tpublic get totalDuration():number\r\n\t{\r\n\t\tif (this._pStitchDirty)\r\n\t\t\tthis._pUpdateStitch();\r\n\r\n\t\treturn this._pTotalDuration;\r\n\t}\r\n\r\n\tpublic get totalDelta():Vector3D\r\n\t{\r\n\t\tif (this._pStitchDirty)\r\n\t\t\tthis._pUpdateStitch();\r\n\r\n\t\treturn this._pTotalDelta;\r\n\t}\r\n\r\n\tpublic get lastFrame():number\r\n\t{\r\n\t\tif (this._pStitchDirty)\r\n\t\t\tthis._pUpdateStitch();\r\n\r\n\t\treturn this._pLastFrame;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a vector of time values representing the duration (in milliseconds) of each animation frame in the clip.\r\n\t */\r\n\tpublic get durations():Array<number>\r\n\t{\r\n\t\treturn this._pDurations;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>AnimationClipNodeBase</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the node's final frame stitch state.\r\n\t *\r\n\t * @see #stitchFinalFrame\r\n\t */\r\n\tpublic _pUpdateStitch():void\r\n\t{\r\n\t\tthis._pStitchDirty = false;\r\n\r\n\t\tthis._pLastFrame = (this._pStitchFinalFrame)? this._pNumFrames : this._pNumFrames - 1;\r\n\r\n\t\tthis._pTotalDuration = 0;\r\n\t\tthis._pTotalDelta.x = 0;\r\n\t\tthis._pTotalDelta.y = 0;\r\n\t\tthis._pTotalDelta.z = 0;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleAccelerationState}\t\tfrom \"../../animators/states/ParticleAccelerationState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to apply a constant acceleration vector to the motion of a particle.\r\n */\r\nexport class ParticleAccelerationNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _acceleration:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for acceleration node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the direction of acceleration on the particle.\r\n\t */\r\n\tpublic static ACCELERATION_VECTOR3D:string = \"AccelerationVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleAccelerationNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] acceleration    Defines the default acceleration vector of the node, used when in global mode.\r\n\t */\r\n\tconstructor(mode:number, acceleration:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticleAcceleration\", mode, 3);\r\n\r\n\t\tthis._pStateClass = ParticleAccelerationState;\r\n\r\n\t\tthis._acceleration = acceleration || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar accelerationValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleAccelerationState.ACCELERATION_INDEX, accelerationValue.index);\r\n\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(temp, 1);\r\n\r\n\t\tvar code:string = \"mul \" + temp + \",\" + animationRegisterData.vertexTime + \",\" + accelerationValue + \"\\n\";\r\n\r\n\t\tif (animationSet.needVelocity) {\r\n\t\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tcode += \"mul \" + temp2 + \",\" + temp + \",\" + animationRegisterData.vertexTwoConst + \"\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.velocityTarget + \".xyz,\" + temp2 + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz\\n\";\r\n\t\t}\r\n\t\tregisterCache.removeVertexTempUsage(temp);\r\n\r\n\t\tcode += \"mul \" + temp + \",\" + temp + \",\" + animationRegisterData.vertexTime + \"\\n\";\r\n\t\tcode += \"add \" + animationRegisterData.positionTarget + \".xyz,\" + temp + \",\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleAccelerationState\r\n\t{\r\n\t\treturn <ParticleAccelerationState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar tempAcceleration:Vector3D = param[ParticleAccelerationNode.ACCELERATION_VECTOR3D];\r\n\t\tif (!tempAcceleration)\r\n\t\t\tthrow new Error(\"there is no \" + ParticleAccelerationNode.ACCELERATION_VECTOR3D + \" in param!\");\r\n\r\n\t\tthis._pOneData[0] = tempAcceleration.x/2;\r\n\t\tthis._pOneData[1] = tempAcceleration.y/2;\r\n\t\tthis._pOneData[2] = tempAcceleration.z/2;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleBezierCurveState}\t\t\tfrom \"../../animators/states/ParticleBezierCurveState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n/**\r\n * A particle animation node used to control the position of a particle over time along a bezier curve.\r\n */\r\nexport class ParticleBezierCurveNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iControlPoint:Vector3D;\r\n\t/** @private */\r\n\tpublic _iEndPoint:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for bezier curve node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the control point position (0, 1, 2) of the curve.\r\n\t */\r\n\tpublic static BEZIER_CONTROL_VECTOR3D:string = \"BezierControlVector3D\";\r\n\r\n\t/**\r\n\t * Reference for bezier curve node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the end point position (0, 1, 2) of the curve.\r\n\t */\r\n\tpublic static BEZIER_END_VECTOR3D:string = \"BezierEndVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleBezierCurveNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] controlPoint    Defines the default control point of the node, used when in global mode.\r\n\t * @param    [optional] endPoint        Defines the default end point of the node, used when in global mode.\r\n\t */\r\n\tconstructor(mode:number, controlPoint:Vector3D = null, endPoint:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticleBezierCurve\", mode, 6);\r\n\r\n\t\tthis._pStateClass = ParticleBezierCurveState;\r\n\r\n\t\tthis._iControlPoint = controlPoint || new Vector3D();\r\n\t\tthis._iEndPoint = endPoint || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar controlValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleBezierCurveState.BEZIER_CONTROL_INDEX, controlValue.index);\r\n\r\n\t\tvar endValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleBezierCurveState.BEZIER_END_INDEX, endValue.index);\r\n\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar rev_time:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\r\n\t\tvar time_2:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\r\n\t\tvar time_temp:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 2);\r\n\t\tregisterCache.addVertexTempUsages(temp, 1);\r\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar distance:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index);\r\n\t\tregisterCache.removeVertexTempUsage(temp);\r\n\r\n\t\tvar code:string = \"\";\r\n\t\tcode += \"sub \" + rev_time + \",\" + animationRegisterData.vertexOneConst + \",\" + animationRegisterData.vertexLife + \"\\n\";\r\n\t\tcode += \"mul \" + time_2 + \",\" + animationRegisterData.vertexLife + \",\" + animationRegisterData.vertexLife + \"\\n\";\r\n\r\n\t\tcode += \"mul \" + time_temp + \",\" + animationRegisterData.vertexLife + \",\" + rev_time + \"\\n\";\r\n\t\tcode += \"mul \" + time_temp + \",\" + time_temp + \",\" + animationRegisterData.vertexTwoConst + \"\\n\";\r\n\t\tcode += \"mul \" + distance + \".xyz,\" + time_temp + \",\" + controlValue + \"\\n\";\r\n\t\tcode += \"add \" + animationRegisterData.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\t\tcode += \"mul \" + distance + \".xyz,\" + time_2 + \",\" + endValue + \"\\n\";\r\n\t\tcode += \"add \" + animationRegisterData.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\r\n\t\tif (animationSet.needVelocity) {\r\n\t\t\tcode += \"mul \" + time_2 + \",\" + animationRegisterData.vertexLife + \",\" + animationRegisterData.vertexTwoConst + \"\\n\";\r\n\t\t\tcode += \"sub \" + time_temp + \",\" + animationRegisterData.vertexOneConst + \",\" + time_2 + \"\\n\";\r\n\t\t\tcode += \"mul \" + time_temp + \",\" + animationRegisterData.vertexTwoConst + \",\" + time_temp + \"\\n\";\r\n\t\t\tcode += \"mul \" + distance + \".xyz,\" + controlValue + \",\" + time_temp + \"\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.velocityTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz\\n\";\r\n\t\t\tcode += \"mul \" + distance + \".xyz,\" + endValue + \",\" + time_2 + \"\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.velocityTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz\\n\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleBezierCurveState\r\n\t{\r\n\t\treturn <ParticleBezierCurveState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar bezierControl:Vector3D = param[ParticleBezierCurveNode.BEZIER_CONTROL_VECTOR3D];\r\n\t\tif (!bezierControl)\r\n\t\t\tthrow new Error(\"there is no \" + ParticleBezierCurveNode.BEZIER_CONTROL_VECTOR3D + \" in param!\");\r\n\r\n\t\tvar bezierEnd:Vector3D = param[ParticleBezierCurveNode.BEZIER_END_VECTOR3D];\r\n\t\tif (!bezierEnd)\r\n\t\t\tthrow new Error(\"there is no \" + ParticleBezierCurveNode.BEZIER_END_VECTOR3D + \" in param!\");\r\n\r\n\t\tthis._pOneData[0] = bezierControl.x;\r\n\t\tthis._pOneData[1] = bezierControl.y;\r\n\t\tthis._pOneData[2] = bezierControl.z;\r\n\t\tthis._pOneData[3] = bezierEnd.x;\r\n\t\tthis._pOneData[4] = bezierEnd.y;\r\n\t\tthis._pOneData[5] = bezierEnd.z;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleBillboardState}\t\t\tfrom \"../../animators/states/ParticleBillboardState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node that controls the rotation of a particle to always face the camera.\r\n */\r\nexport class ParticleBillboardNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iBillboardAxis:Vector3D;\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleBillboardNode</code>\r\n\t */\r\n\tconstructor(billboardAxis:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticleBillboard\", ParticlePropertiesMode.GLOBAL, 0, 4);\r\n\r\n\t\tthis._pStateClass = ParticleBillboardState;\r\n\r\n\t\tthis._iBillboardAxis = billboardAxis;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar rotationMatrixRegister:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleBillboardState.MATRIX_INDEX, rotationMatrixRegister.index);\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\r\n\t\tvar code:string = \"m33 \" + temp + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \",\" + rotationMatrixRegister + \"\\n\" +\r\n\t\t\t\t\t\t  \"mov \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp + \"\\n\";\r\n\r\n\t\tvar shaderRegisterElement:ShaderRegisterElement;\r\n\t\tfor (var i:number = 0; i < animationRegisterData.rotationRegisters.length; i++) {\r\n\t\t\tshaderRegisterElement = animationRegisterData.rotationRegisters[i];\r\n\t\t\tcode += \"m33 \" + temp + \".xyz,\" + shaderRegisterElement + \",\" + rotationMatrixRegister + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + shaderRegisterElement + \".xyz,\" + shaderRegisterElement + \"\\n\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleBillboardState\r\n\t{\r\n\t\treturn <ParticleBillboardState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\t\tparticleAnimationSet.hasBillboard = true;\r\n\t}\r\n}",
    "import {ColorTransform}\t\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleColorState}\t\t\t\tfrom \"../../animators/states/ParticleColorState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to control the color variation of a particle over time.\r\n */\r\nexport class ParticleColorNode extends ParticleNodeBase\r\n{\r\n\t//default values used when creating states\r\n\t/** @private */\r\n\tpublic _iUsesMultiplier:boolean;\r\n\t/** @private */\r\n\tpublic _iUsesOffset:boolean;\r\n\t/** @private */\r\n\tpublic _iUsesCycle:boolean;\r\n\t/** @private */\r\n\tpublic _iUsesPhase:boolean;\r\n\t/** @private */\r\n\tpublic _iStartColor:ColorTransform;\r\n\t/** @private */\r\n\tpublic _iEndColor:ColorTransform;\r\n\t/** @private */\r\n\tpublic _iCycleDuration:number;\r\n\t/** @private */\r\n\tpublic _iCyclePhase:number;\r\n\r\n\t/**\r\n\t * Reference for color node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>ColorTransform</code> object representing the start color transform applied to the particle.\r\n\t */\r\n\tpublic static COLOR_START_COLORTRANSFORM:string = \"ColorStartColorTransform\";\r\n\r\n\t/**\r\n\t * Reference for color node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>ColorTransform</code> object representing the end color transform applied to the particle.\r\n\t */\r\n\tpublic static COLOR_END_COLORTRANSFORM:string = \"ColorEndColorTransform\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleColorNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] usesMultiplier  Defines whether the node uses multiplier data in the shader for its color transformations. Defaults to true.\r\n\t * @param    [optional] usesOffset      Defines whether the node uses offset data in the shader for its color transformations. Defaults to true.\r\n\t * @param    [optional] usesCycle       Defines whether the node uses the <code>cycleDuration</code> property in the shader to calculate the period of the animation independent of particle duration. Defaults to false.\r\n\t * @param    [optional] usesPhase       Defines whether the node uses the <code>cyclePhase</code> property in the shader to calculate a starting offset to the cycle rotation of the particle. Defaults to false.\r\n\t * @param    [optional] startColor      Defines the default start color transform of the node, when in global mode.\r\n\t * @param    [optional] endColor        Defines the default end color transform of the node, when in global mode.\r\n\t * @param    [optional] cycleDuration   Defines the duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\r\n\t * @param    [optional] cyclePhase      Defines the phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\r\n\t */\r\n\tconstructor(mode:number, usesMultiplier:boolean = true, usesOffset:boolean = true, usesCycle:boolean = false, usesPhase:boolean = false, startColor:ColorTransform = null, endColor:ColorTransform = null, cycleDuration:number = 1, cyclePhase:number = 0)\r\n\t{\r\n\t\tsuper(\"ParticleColor\", mode, (usesMultiplier && usesOffset)? 16 : 8, ParticleAnimationSet.COLOR_PRIORITY);\r\n\r\n\t\tthis._pStateClass = ParticleColorState;\r\n\r\n\t\tthis._iUsesMultiplier = usesMultiplier;\r\n\t\tthis._iUsesOffset = usesOffset;\r\n\t\tthis._iUsesCycle = usesCycle;\r\n\t\tthis._iUsesPhase = usesPhase;\r\n\r\n\t\tthis._iStartColor = startColor || new ColorTransform();\r\n\t\tthis._iEndColor = endColor || new ColorTransform();\r\n\t\tthis._iCycleDuration = cycleDuration;\r\n\t\tthis._iCyclePhase = cyclePhase;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tif (shader.usesFragmentAnimation) {\r\n\t\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\r\n\t\t\tif (this._iUsesCycle) {\r\n\t\t\t\tvar cycleConst:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleColorState.CYCLE_INDEX, cycleConst.index);\r\n\r\n\t\t\t\tregisterCache.addVertexTempUsages(temp, 1);\r\n\t\t\t\tvar sin:ShaderRegisterElement = registerCache.getFreeVertexSingleTemp();\r\n\t\t\t\tregisterCache.removeVertexTempUsage(temp);\r\n\r\n\t\t\t\tcode += \"mul \" + sin + \",\" + animationRegisterData.vertexTime + \",\" + cycleConst + \".x\\n\";\r\n\r\n\t\t\t\tif (this._iUsesPhase)\r\n\t\t\t\t\tcode += \"add \" + sin + \",\" + sin + \",\" + cycleConst + \".y\\n\";\r\n\r\n\t\t\t\tcode += \"sin \" + sin + \",\" + sin + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\tvar startMultiplierValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\t\t\tvar deltaMultiplierValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleColorState.START_MULTIPLIER_INDEX, startMultiplierValue.index);\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleColorState.DELTA_MULTIPLIER_INDEX, deltaMultiplierValue.index);\r\n\r\n\t\t\t\tcode += \"mul \" + temp + \",\" + deltaMultiplierValue + \",\" + (this._iUsesCycle? sin : animationRegisterData.vertexLife) + \"\\n\";\r\n\t\t\t\tcode += \"add \" + temp + \",\" + temp + \",\" + startMultiplierValue + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + animationRegisterData.colorMulTarget + \",\" + temp + \",\" + animationRegisterData.colorMulTarget + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this._iUsesOffset) {\r\n\t\t\t\tvar startOffsetValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.LOCAL_STATIC)? registerCache.getFreeVertexAttribute() : registerCache.getFreeVertexConstant();\r\n\t\t\t\tvar deltaOffsetValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.LOCAL_STATIC)? registerCache.getFreeVertexAttribute() : registerCache.getFreeVertexConstant();\r\n\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleColorState.START_OFFSET_INDEX, startOffsetValue.index);\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleColorState.DELTA_OFFSET_INDEX, deltaOffsetValue.index);\r\n\r\n\t\t\t\tcode += \"mul \" + temp + \",\" + deltaOffsetValue + \",\" + (this._iUsesCycle? sin : animationRegisterData.vertexLife) + \"\\n\";\r\n\t\t\t\tcode += \"add \" + temp + \",\" + temp + \",\" + startOffsetValue + \"\\n\";\r\n\t\t\t\tcode += \"add \" + animationRegisterData.colorAddTarget + \",\" + temp + \",\" + animationRegisterData.colorAddTarget + \"\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleColorState\r\n\t{\r\n\t\treturn <ParticleColorState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\t\tif (this._iUsesMultiplier)\r\n\t\t\tparticleAnimationSet.hasColorMulNode = true;\r\n\t\tif (this._iUsesOffset)\r\n\t\t\tparticleAnimationSet.hasColorAddNode = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar startColor:ColorTransform = param[ParticleColorNode.COLOR_START_COLORTRANSFORM];\r\n\t\tif (!startColor)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticleColorNode.COLOR_START_COLORTRANSFORM + \" in param!\"));\r\n\r\n\t\tvar endColor:ColorTransform = param[ParticleColorNode.COLOR_END_COLORTRANSFORM];\r\n\t\tif (!endColor)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticleColorNode.COLOR_END_COLORTRANSFORM + \" in param!\"));\r\n\r\n\t\tvar i:number = 0;\r\n\r\n\t\tif (!this._iUsesCycle) {\r\n\t\t\t//multiplier\r\n\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\tthis._pOneData[i++] = startColor.redMultiplier;\r\n\t\t\t\tthis._pOneData[i++] = startColor.greenMultiplier;\r\n\t\t\t\tthis._pOneData[i++] = startColor.blueMultiplier;\r\n\t\t\t\tthis._pOneData[i++] = startColor.alphaMultiplier;\r\n\t\t\t\tthis._pOneData[i++] = endColor.redMultiplier - startColor.redMultiplier;\r\n\t\t\t\tthis._pOneData[i++] = endColor.greenMultiplier - startColor.greenMultiplier;\r\n\t\t\t\tthis._pOneData[i++] = endColor.blueMultiplier - startColor.blueMultiplier;\r\n\t\t\t\tthis._pOneData[i++] = endColor.alphaMultiplier - startColor.alphaMultiplier;\r\n\t\t\t}\r\n\r\n\t\t\t//offset\r\n\t\t\tif (this._iUsesOffset) {\r\n\t\t\t\tthis._pOneData[i++] = startColor.redOffset/255;\r\n\t\t\t\tthis._pOneData[i++] = startColor.greenOffset/255;\r\n\t\t\t\tthis._pOneData[i++] = startColor.blueOffset/255;\r\n\t\t\t\tthis._pOneData[i++] = startColor.alphaOffset/255;\r\n\t\t\t\tthis._pOneData[i++] = (endColor.redOffset - startColor.redOffset)/255;\r\n\t\t\t\tthis._pOneData[i++] = (endColor.greenOffset - startColor.greenOffset)/255;\r\n\t\t\t\tthis._pOneData[i++] = (endColor.blueOffset - startColor.blueOffset)/255;\r\n\t\t\t\tthis._pOneData[i++] = (endColor.alphaOffset - startColor.alphaOffset)/255;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//multiplier\r\n\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\tthis._pOneData[i++] = (startColor.redMultiplier + endColor.redMultiplier)/2;\r\n\t\t\t\tthis._pOneData[i++] = (startColor.greenMultiplier + endColor.greenMultiplier)/2;\r\n\t\t\t\tthis._pOneData[i++] = (startColor.blueMultiplier + endColor.blueMultiplier)/2;\r\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaMultiplier + endColor.alphaMultiplier)/2;\r\n\t\t\t\tthis._pOneData[i++] = (startColor.redMultiplier - endColor.redMultiplier)/2;\r\n\t\t\t\tthis._pOneData[i++] = (startColor.greenMultiplier - endColor.greenMultiplier)/2;\r\n\t\t\t\tthis._pOneData[i++] = (startColor.blueMultiplier - endColor.blueMultiplier)/2;\r\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaMultiplier - endColor.alphaMultiplier)/2;\r\n\t\t\t}\r\n\r\n\t\t\t//offset\r\n\t\t\tif (this._iUsesOffset) {\r\n\t\t\t\tthis._pOneData[i++] = (startColor.redOffset + endColor.redOffset)/(255*2);\r\n\t\t\t\tthis._pOneData[i++] = (startColor.greenOffset + endColor.greenOffset)/(255*2);\r\n\t\t\t\tthis._pOneData[i++] = (startColor.blueOffset + endColor.blueOffset)/(255*2);\r\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaOffset + endColor.alphaOffset)/(255*2);\r\n\t\t\t\tthis._pOneData[i++] = (startColor.redOffset - endColor.redOffset)/(255*2);\r\n\t\t\t\tthis._pOneData[i++] = (startColor.greenOffset - endColor.greenOffset)/(255*2);\r\n\t\t\t\tthis._pOneData[i++] = (startColor.blueOffset - endColor.blueOffset)/(255*2);\r\n\t\t\t\tthis._pOneData[i++] = (startColor.alphaOffset - endColor.alphaOffset)/(255*2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}",
    "import {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleFollowState}\t\t\t\tfrom \"../../animators/states/ParticleFollowState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to create a follow behaviour on a particle system.\r\n */\r\nexport class ParticleFollowNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iUsesPosition:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iUsesRotation:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iSmooth:boolean;\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleFollowNode</code>\r\n\t *\r\n\t * @param    [optional] usesPosition     Defines wehether the individual particle reacts to the position of the target.\r\n\t * @param    [optional] usesRotation     Defines wehether the individual particle reacts to the rotation of the target.\r\n\t * @param    [optional] smooth     Defines wehether the state calculate the interpolated value.\r\n\t */\r\n\tconstructor(usesPosition:boolean = true, usesRotation:boolean = true, smooth:boolean = false)\r\n\t{\r\n\t\tsuper(\"ParticleFollow\", ParticlePropertiesMode.LOCAL_DYNAMIC, (usesPosition && usesRotation)? 6 : 3, ParticleAnimationSet.POST_PRIORITY);\r\n\r\n\t\tthis._pStateClass = ParticleFollowState;\r\n\r\n\t\tthis._iUsesPosition = usesPosition;\r\n\t\tthis._iUsesRotation = usesRotation;\r\n\t\tthis._iSmooth = smooth;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\t//TODO: use Quaternion to implement this function\r\n\t\tvar code:string = \"\";\r\n\t\tif (this._iUsesRotation) {\r\n\t\t\tvar rotationAttribute:ShaderRegisterElement = registerCache.getFreeVertexAttribute();\r\n\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleFollowState.FOLLOW_ROTATION_INDEX, rotationAttribute.index);\r\n\r\n\t\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(temp1, 1);\r\n\t\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(temp2, 1);\r\n\t\t\tvar temp3:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\r\n\t\t\tvar temp4:ShaderRegisterElement;\r\n\t\t\tif (animationSet.hasBillboard) {\r\n\t\t\t\tregisterCache.addVertexTempUsages(temp3, 1);\r\n\t\t\t\ttemp4 = registerCache.getFreeVertexVectorTemp();\r\n\t\t\t}\r\n\r\n\t\t\tregisterCache.removeVertexTempUsage(temp1);\r\n\t\t\tregisterCache.removeVertexTempUsage(temp2);\r\n\t\t\tif (animationSet.hasBillboard)\r\n\t\t\t\tregisterCache.removeVertexTempUsage(temp3);\r\n\r\n\t\t\tvar len:number = animationRegisterData.rotationRegisters.length;\r\n\t\t\tvar i:number;\r\n\r\n\t\t\t//x axis\r\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"sin \" + temp3 + \".y,\" + rotationAttribute + \".x\\n\";\r\n\t\t\tcode += \"cos \" + temp3 + \".z,\" + rotationAttribute + \".x\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \".x,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + temp3 + \".z\\n\";\r\n\t\t\tcode += \"neg \" + temp2 + \".z,\" + temp3 + \".y\\n\";\r\n\r\n\t\t\tif (animationSet.hasBillboard)\r\n\t\t\t\tcode += \"m33 \" + temp4 + \".xyz,\" + animationRegisterData.positionTarget + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\telse {\r\n\t\t\t\tcode += \"m33 \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\t\tcode += \"m33 \" + animationRegisterData.rotationRegisters[i] + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t\t//y axis\r\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"cos \" + temp1 + \".x,\" + rotationAttribute + \".y\\n\";\r\n\t\t\tcode += \"sin \" + temp1 + \".z,\" + rotationAttribute + \".y\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"neg \" + temp3 + \".x,\" + temp1 + \".z\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + temp1 + \".x\\n\";\r\n\r\n\t\t\tif (animationSet.hasBillboard)\r\n\t\t\t\tcode += \"m33 \" + temp4 + \".xyz,\" + temp4 + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\telse {\r\n\t\t\t\tcode += \"m33 \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\t\tcode += \"m33 \" + animationRegisterData.rotationRegisters[i] + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t\t//z axis\r\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"sin \" + temp2 + \".x,\" + rotationAttribute + \".z\\n\";\r\n\t\t\tcode += \"cos \" + temp2 + \".y,\" + rotationAttribute + \".z\\n\";\r\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + temp2 + \".y\\n\";\r\n\t\t\tcode += \"neg \" + temp1 + \".y,\" + temp2 + \".x\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\r\n\t\t\tif (animationSet.hasBillboard) {\r\n\t\t\t\tcode += \"m33 \" + temp4 + \".xyz,\" + temp4 + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\t\tcode += \"sub \" + temp4 + \".xyz,\" + temp4 + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\t\t\t\tcode += \"add \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp4 + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\t\t\t} else {\r\n\t\t\t\tcode += \"m33 \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\t\tcode += \"m33 \" + animationRegisterData.rotationRegisters[i] + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (this._iUsesPosition) {\r\n\t\t\tvar positionAttribute:ShaderRegisterElement = registerCache.getFreeVertexAttribute();\r\n\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleFollowState.FOLLOW_POSITION_INDEX, positionAttribute.index);\r\n\t\t\tcode += \"add \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + positionAttribute + \",\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleFollowState\r\n\t{\r\n\t\treturn <ParticleFollowState> animator.getAnimationState(this);\r\n\t}\r\n}",
    "import {ColorTransform}\t\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\n\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleInitialColorState}\t\tfrom \"../../animators/states/ParticleInitialColorState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n *\r\n */\r\nexport class ParticleInitialColorNode extends ParticleNodeBase\r\n{\r\n\t//default values used when creating states\r\n\t/** @private */\r\n\tpublic _iUsesMultiplier:boolean;\r\n\t/** @private */\r\n\tpublic _iUsesOffset:boolean;\r\n\t/** @private */\r\n\tpublic _iInitialColor:ColorTransform;\r\n\r\n\t/**\r\n\t * Reference for color node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>ColorTransform</code> object representing the color transform applied to the particle.\r\n\t */\r\n\tpublic static COLOR_INITIAL_COLORTRANSFORM:string = \"ColorInitialColorTransform\";\r\n\r\n\tconstructor(mode:number, usesMultiplier:boolean = true, usesOffset:boolean = false, initialColor:ColorTransform = null)\r\n\t{\r\n\t\tsuper(\"ParticleInitialColor\", mode, (usesMultiplier && usesOffset)? 8 : 4, ParticleAnimationSet.COLOR_PRIORITY);\r\n\r\n\t\tthis._pStateClass = ParticleInitialColorState;\r\n\r\n\t\tthis._iUsesMultiplier = usesMultiplier;\r\n\t\tthis._iUsesOffset = usesOffset;\r\n\t\tthis._iInitialColor = initialColor || new ColorTransform();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tif (shader.usesFragmentAnimation) {\r\n\r\n\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\tvar multiplierValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleInitialColorState.MULTIPLIER_INDEX, multiplierValue.index);\r\n\r\n\t\t\t\tcode += \"mul \" + animationRegisterData.colorMulTarget + \",\" + multiplierValue + \",\" + animationRegisterData.colorMulTarget + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this._iUsesOffset) {\r\n\t\t\t\tvar offsetValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.LOCAL_STATIC)? registerCache.getFreeVertexAttribute() : registerCache.getFreeVertexConstant();\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleInitialColorState.OFFSET_INDEX, offsetValue.index);\r\n\r\n\t\t\t\tcode += \"add \" + animationRegisterData.colorAddTarget + \",\" + offsetValue + \",\" + animationRegisterData.colorAddTarget + \"\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\t\tif (this._iUsesMultiplier)\r\n\t\t\tparticleAnimationSet.hasColorMulNode = true;\r\n\t\tif (this._iUsesOffset)\r\n\t\t\tparticleAnimationSet.hasColorAddNode = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar initialColor:ColorTransform = param[ParticleInitialColorNode.COLOR_INITIAL_COLORTRANSFORM];\r\n\t\tif (!initialColor)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticleInitialColorNode.COLOR_INITIAL_COLORTRANSFORM + \" in param!\"));\r\n\r\n\t\tvar i:number = 0;\r\n\r\n\t\t//multiplier\r\n\t\tif (this._iUsesMultiplier) {\r\n\t\t\tthis._pOneData[i++] = initialColor.redMultiplier;\r\n\t\t\tthis._pOneData[i++] = initialColor.greenMultiplier;\r\n\t\t\tthis._pOneData[i++] = initialColor.blueMultiplier;\r\n\t\t\tthis._pOneData[i++] = initialColor.alphaMultiplier;\r\n\t\t}\r\n\t\t//offset\r\n\t\tif (this._iUsesOffset) {\r\n\t\t\tthis._pOneData[i++] = initialColor.redOffset/255;\r\n\t\t\tthis._pOneData[i++] = initialColor.greenOffset/255;\r\n\t\t\tthis._pOneData[i++] = initialColor.blueOffset/255;\r\n\t\t\tthis._pOneData[i++] = initialColor.alphaOffset/255;\r\n\t\t}\r\n\r\n\t}\r\n\r\n}",
    "import {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\n\r\n/**\r\n * Provides an abstract base class for particle animation nodes.\r\n */\r\nexport class ParticleNodeBase extends AnimationNodeBase\r\n{\r\n\tprivate _priority:number;\r\n\r\n\tpublic _pMode:number;\r\n\tpublic _pDataLength:number = 3;\r\n\tpublic _pOneData:Array<number>;\r\n\r\n\tpublic _iDataOffset:number;\r\n\r\n\t//modes alias\r\n\tprivate static GLOBAL:string = 'Global';\r\n\tprivate static LOCAL_STATIC:string = 'LocalStatic';\r\n\tprivate static LOCAL_DYNAMIC:string = 'LocalDynamic';\r\n\r\n\t//modes list\r\n\tprivate static MODES:Object =\r\n\t{\r\n\t\t0:ParticleNodeBase.GLOBAL,\r\n\t\t1:ParticleNodeBase.LOCAL_STATIC,\r\n\t\t2:ParticleNodeBase.LOCAL_DYNAMIC\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the property mode of the particle animation node. Typically set in the node constructor\r\n\t *\r\n\t * @see away.animators.ParticlePropertiesMode\r\n\t */\r\n\tpublic get mode():number\r\n\t{\r\n\t\treturn this._pMode;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the priority of the particle animation node, used to order the agal generated in a particle animation set. Set automatically on instantiation.\r\n\t *\r\n\t * @see away.animators.ParticleAnimationSet\r\n\t * @see #getAGALVertexCode\r\n\t */\r\n\tpublic get priority():number\r\n\t{\r\n\t\treturn this._priority;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the length of the data used by the node when in <code>LOCAL_STATIC</code> mode. Used to generate the local static data of the particle animation set.\r\n\t *\r\n\t * @see away.animators.ParticleAnimationSet\r\n\t * @see #getAGALVertexCode\r\n\t */\r\n\tpublic get dataLength():number\r\n\t{\r\n\t\treturn this._pDataLength;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the generated data vector of the node after one particle pass during the generation of all local static data of the particle animation set.\r\n\t *\r\n\t * @see away.animators.ParticleAnimationSet\r\n\t * @see #generatePropertyOfOneParticle\r\n\t */\r\n\tpublic get oneData():Array<number>\r\n\t{\r\n\t\treturn this._pOneData;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleNodeBase</code> object.\r\n\t *\r\n\t * @param               name            Defines the generic name of the particle animation node.\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param               dataLength      Defines the length of the data used by the node when in <code>LOCAL_STATIC</code> mode.\r\n\t * @param    [optional] priority        the priority of the particle animation node, used to order the agal generated in a particle animation set. Defaults to 1.\r\n\t */\r\n\tconstructor(name:string, mode:number, dataLength:number, priority:number = 1)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tname = name + ParticleNodeBase.MODES[mode];\r\n\r\n\t\tthis.name = name;\r\n\t\tthis._pMode = mode;\r\n\t\tthis._priority = priority;\r\n\t\tthis._pDataLength = dataLength;\r\n\r\n\t\tthis._pOneData = new Array<number>(this._pDataLength);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the AGAL code of the particle animation node for use in the vertex shader.\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the AGAL code of the particle animation node for use in the fragment shader.\r\n\t */\r\n\tpublic getAGALFragmentCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the AGAL code of the particle animation node for use in the fragment shader when UV coordinates are required.\r\n\t */\r\n\tpublic getAGALUVCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Called internally by the particle animation set when assigning the set of static properties originally defined by the initParticleFunc of the set.\r\n\t *\r\n\t * @see away.animators.ParticleAnimationSet#initParticleFunc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Called internally by the particle animation set when determining the requirements of the particle animation node AGAL.\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleOrbitState}\t\t\t\tfrom \"../../animators/states/ParticleOrbitState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to control the position of a particle over time around a circular orbit.\r\n */\r\nexport class ParticleOrbitNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iUsesEulers:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iUsesCycle:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iUsesPhase:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iRadius:number;\r\n\t/** @private */\r\n\tpublic _iCycleDuration:number;\r\n\t/** @private */\r\n\tpublic _iCyclePhase:number;\r\n\t/** @private */\r\n\tpublic _iEulers:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for orbit node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the radius (x), cycle speed (y) and cycle phase (z) of the motion on the particle.\r\n\t */\r\n\tpublic static ORBIT_VECTOR3D:string = \"OrbitVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleOrbitNode</code> object.\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] usesEulers      Defines whether the node uses the <code>eulers</code> property in the shader to calculate a rotation on the orbit. Defaults to true.\r\n\t * @param    [optional] usesCycle       Defines whether the node uses the <code>cycleDuration</code> property in the shader to calculate the period of the orbit independent of particle duration. Defaults to false.\r\n\t * @param    [optional] usesPhase       Defines whether the node uses the <code>cyclePhase</code> property in the shader to calculate a starting offset to the cycle rotation of the particle. Defaults to false.\r\n\t * @param    [optional] radius          Defines the radius of the orbit when in global mode. Defaults to 100.\r\n\t * @param    [optional] cycleDuration   Defines the duration of the orbit in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\r\n\t * @param    [optional] cyclePhase      Defines the phase of the orbit in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\r\n\t * @param    [optional] eulers          Defines the euler rotation in degrees, applied to the orientation of the orbit when in global mode.\r\n\t */\r\n\tconstructor(mode:number, usesEulers:boolean = true, usesCycle:boolean = false, usesPhase:boolean = false, radius:number = 100, cycleDuration:number = 1, cyclePhase:number = 0, eulers:Vector3D = null)\r\n\t{\r\n\t\tvar len:number = 3;\r\n\t\tif (usesPhase)\r\n\t\t\tlen++;\r\n\t\tsuper(\"ParticleOrbit\", mode, len);\r\n\r\n\t\tthis._pStateClass = ParticleOrbitState;\r\n\r\n\t\tthis._iUsesEulers = usesEulers;\r\n\t\tthis._iUsesCycle = usesCycle;\r\n\t\tthis._iUsesPhase = usesPhase;\r\n\r\n\t\tthis._iRadius = radius;\r\n\t\tthis._iCycleDuration = cycleDuration;\r\n\t\tthis._iCyclePhase = cyclePhase;\r\n\t\tthis._iEulers = eulers || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar orbitRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleOrbitState.ORBIT_INDEX, orbitRegister.index);\r\n\r\n\t\tvar eulersMatrixRegister:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleOrbitState.EULERS_INDEX, eulersMatrixRegister.index);\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\r\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(temp1, 1);\r\n\t\tvar distance:ShaderRegisterElement = new ShaderRegisterElement(temp1.regName, temp1.index);\r\n\r\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index, 0);\r\n\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index, 1);\r\n\t\tvar degree:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index, 2);\r\n\t\tregisterCache.removeVertexTempUsage(temp1);\r\n\r\n\t\tvar code:string = \"\";\r\n\r\n\t\tif (this._iUsesCycle) {\r\n\t\t\tcode += \"mul \" + degree + \",\" + animationRegisterData.vertexTime + \",\" + orbitRegister + \".y\\n\";\r\n\r\n\t\t\tif (this._iUsesPhase)\r\n\t\t\t\tcode += \"add \" + degree + \",\" + degree + \",\" + orbitRegister + \".w\\n\";\r\n\t\t} else\r\n\t\t\tcode += \"mul \" + degree + \",\" + animationRegisterData.vertexLife + \",\" + orbitRegister + \".y\\n\";\r\n\r\n\t\tcode += \"cos \" + cos + \",\" + degree + \"\\n\";\r\n\t\tcode += \"sin \" + sin + \",\" + degree + \"\\n\";\r\n\t\tcode += \"mul \" + distance + \".x,\" + cos + \",\" + orbitRegister + \".x\\n\";\r\n\t\tcode += \"mul \" + distance + \".y,\" + sin + \",\" + orbitRegister + \".x\\n\";\r\n\t\tcode += \"mov \" + distance + \".wz\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\tif (this._iUsesEulers)\r\n\t\t\tcode += \"m44 \" + distance + \",\" + distance + \",\" + eulersMatrixRegister + \"\\n\";\r\n\t\tcode += \"add \" + animationRegisterData.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\r\n\t\tif (animationSet.needVelocity) {\r\n\t\t\tcode += \"neg \" + distance + \".x,\" + sin + \"\\n\";\r\n\t\t\tcode += \"mov \" + distance + \".y,\" + cos + \"\\n\";\r\n\t\t\tcode += \"mov \" + distance + \".zw,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tif (this._iUsesEulers)\r\n\t\t\t\tcode += \"m44 \" + distance + \",\" + distance + \",\" + eulersMatrixRegister + \"\\n\";\r\n\t\t\tcode += \"mul \" + distance + \",\" + distance + \",\" + orbitRegister + \".z\\n\";\r\n\t\t\tcode += \"div \" + distance + \",\" + distance + \",\" + orbitRegister + \".y\\n\";\r\n\t\t\tif (!this._iUsesCycle)\r\n\t\t\t\tcode += \"div \" + distance + \",\" + distance + \",\" + animationRegisterData.vertexLife + \"\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.velocityTarget + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz,\" + distance + \".xyz\\n\";\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleOrbitState\r\n\t{\r\n\t\treturn <ParticleOrbitState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\t//Vector3D.x is radius, Vector3D.y is cycle duration, Vector3D.z is phase\r\n\t\tvar orbit:Vector3D = param[ParticleOrbitNode.ORBIT_VECTOR3D];\r\n\t\tif (!orbit)\r\n\t\t\tthrow new Error(\"there is no \" + ParticleOrbitNode.ORBIT_VECTOR3D + \" in param!\");\r\n\r\n\t\tthis._pOneData[0] = orbit.x;\r\n\t\tif (this._iUsesCycle && orbit.y <= 0)\r\n\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\r\n\t\tthis._pOneData[1] = Math.PI*2/(!this._iUsesCycle? 1 : orbit.y);\r\n\t\tthis._pOneData[2] = orbit.x*Math.PI*2;\r\n\t\tif (this._iUsesPhase)\r\n\t\t\tthis._pOneData[3] = orbit.z*Math.PI/180;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleOscillatorState}\t\t\tfrom \"../../animators/states/ParticleOscillatorState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to control the position of a particle over time using simple harmonic motion.\r\n */\r\nexport class ParticleOscillatorNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iOscillator:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for ocsillator node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the axis (x,y,z) and cycle speed (w) of the motion on the particle.\r\n\t */\r\n\tpublic static OSCILLATOR_VECTOR3D:string = \"OscillatorVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleOscillatorNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] oscillator      Defines the default oscillator axis (x, y, z) and cycleDuration (w) of the node, used when in global mode.\r\n\t */\r\n\tconstructor(mode:number, oscillator:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticleOscillator\", mode, 4);\r\n\r\n\t\tthis._pStateClass = ParticleOscillatorState;\r\n\r\n\t\tthis._iOscillator = oscillator || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar oscillatorRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleOscillatorState.OSCILLATOR_INDEX, oscillatorRegister.index);\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar dgree:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\r\n\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\r\n\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 2);\r\n\t\tregisterCache.addVertexTempUsages(temp, 1);\r\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar distance:ShaderRegisterElement = new ShaderRegisterElement(temp2.regName, temp2.index);\r\n\t\tregisterCache.removeVertexTempUsage(temp);\r\n\r\n\t\tvar code:string = \"\";\r\n\t\tcode += \"mul \" + dgree + \",\" + animationRegisterData.vertexTime + \",\" + oscillatorRegister + \".w\\n\";\r\n\t\tcode += \"sin \" + sin + \",\" + dgree + \"\\n\";\r\n\t\tcode += \"mul \" + distance + \".xyz,\" + sin + \",\" + oscillatorRegister + \".xyz\\n\";\r\n\t\tcode += \"add \" + animationRegisterData.positionTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\r\n\t\tif (animationSet.needVelocity) {\r\n\t\t\tcode += \"cos \" + cos + \",\" + dgree + \"\\n\";\r\n\t\t\tcode += \"mul \" + distance + \".xyz,\" + cos + \",\" + oscillatorRegister + \".xyz\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.velocityTarget + \".xyz,\" + distance + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz\\n\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleOscillatorState\r\n\t{\r\n\t\treturn <ParticleOscillatorState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\t//(Vector3D.x,Vector3D.y,Vector3D.z) is oscillator axis, Vector3D.w is oscillator cycle duration\r\n\t\tvar drift:Vector3D = param[ParticleOscillatorNode.OSCILLATOR_VECTOR3D];\r\n\t\tif (!drift)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticleOscillatorNode.OSCILLATOR_VECTOR3D + \" in param!\"));\r\n\r\n\t\tthis._pOneData[0] = drift.x;\r\n\t\tthis._pOneData[1] = drift.y;\r\n\t\tthis._pOneData[2] = drift.z;\r\n\t\tif (drift.w <= 0)\r\n\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\r\n\t\tthis._pOneData[3] = Math.PI*2/drift.w;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticlePositionState}\t\t\tfrom \"../../animators/states/ParticlePositionState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to set the starting position of a particle.\r\n */\r\nexport class ParticlePositionNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iPosition:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for position node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing position of the particle.\r\n\t */\r\n\tpublic static POSITION_VECTOR3D:string = \"PositionVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticlePositionNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] position        Defines the default position of the particle when in global mode. Defaults to 0,0,0.\r\n\t */\r\n\tconstructor(mode:number, position:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticlePosition\", mode, 3);\r\n\r\n\t\tthis._pStateClass = ParticlePositionState;\r\n\r\n\t\tthis._iPosition = position || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar positionAttribute:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticlePositionState.POSITION_INDEX, positionAttribute.index);\r\n\r\n\t\treturn \"add \" + animationRegisterData.positionTarget + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticlePositionState\r\n\t{\r\n\t\treturn <ParticlePositionState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar offset:Vector3D = param[ParticlePositionNode.POSITION_VECTOR3D];\r\n\t\tif (!offset)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticlePositionNode.POSITION_VECTOR3D + \" in param!\"));\r\n\r\n\t\tthis._pOneData[0] = offset.x;\r\n\t\tthis._pOneData[1] = offset.y;\r\n\t\tthis._pOneData[2] = offset.z;\r\n\t}\r\n}",
    "import {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleRotateToHeadingState}\t\tfrom \"../../animators/states/ParticleRotateToHeadingState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to control the rotation of a particle to match its heading vector.\r\n */\r\nexport class ParticleRotateToHeadingNode extends ParticleNodeBase\r\n{\r\n\t/**\r\n\t * Creates a new <code>ParticleBillboardNode</code>\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper(\"ParticleRotateToHeading\", ParticlePropertiesMode.GLOBAL, 0, 3);\r\n\r\n\t\tthis._pStateClass = ParticleRotateToHeadingState;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tvar len:number = animationRegisterData.rotationRegisters.length;\r\n\t\tvar i:number;\r\n\t\tif (animationSet.hasBillboard) {\r\n\t\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(temp1, 1);\r\n\t\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(temp2, 1);\r\n\t\t\tvar temp3:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\r\n\t\t\tvar rotationMatrixRegister:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleRotateToHeadingState.MATRIX_INDEX, rotationMatrixRegister.index);\r\n\t\t\tregisterCache.getFreeVertexConstant();\r\n\t\t\tregisterCache.getFreeVertexConstant();\r\n\t\t\tregisterCache.getFreeVertexConstant();\r\n\r\n\t\t\tregisterCache.removeVertexTempUsage(temp1);\r\n\t\t\tregisterCache.removeVertexTempUsage(temp2);\r\n\r\n\t\t\t//process the velocity\r\n\t\t\tcode += \"m33 \" + temp1 + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz,\" + rotationMatrixRegister + \"\\n\";\r\n\r\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \".xy,\" + temp1 + \".xy\\n\";\r\n\t\t\tcode += \"nrm \" + temp3 + \".xyz,\" + temp3 + \".xyz\\n\";\r\n\r\n\t\t\t//temp3.x=cos,temp3.y=sin\r\n\t\t\t//only process z axis\r\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \".x,\" + temp3 + \".y\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + temp3 + \".x\\n\";\r\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + temp3 + \".x\\n\";\r\n\t\t\tcode += \"neg \" + temp1 + \".y,\" + temp3 + \".y\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\tcode += \"m33 \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\tcode += \"m33 \" + animationRegisterData.rotationRegisters[i] + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\r\n\t\t} else {\r\n\t\t\tvar nrmVel:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(nrmVel, 1);\r\n\r\n\t\t\tvar xAxis:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(xAxis, 1);\r\n\r\n\t\t\tvar R:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(R, 1);\r\n\t\t\tvar R_rev:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(R.regName, R.index, 3);\r\n\t\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(R_rev.regName, R_rev.index, 3);\r\n\t\t\tvar cos2:ShaderRegisterElement = new ShaderRegisterElement(nrmVel.regName, nrmVel.index, 3);\r\n\t\t\tvar tempSingle:ShaderRegisterElement = sin;\r\n\r\n\t\t\tregisterCache.removeVertexTempUsage(nrmVel);\r\n\t\t\tregisterCache.removeVertexTempUsage(xAxis);\r\n\t\t\tregisterCache.removeVertexTempUsage(R);\r\n\r\n\t\t\tcode += \"mov \" + xAxis + \".x,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + xAxis + \".yz,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\r\n\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz\\n\";\r\n\t\t\tcode += \"dp3 \" + cos2 + \",\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + xAxis + \".xyz,\" + nrmVel + \".xyz\\n\";\r\n\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\r\n\t\t\t//use R as temp to judge if nrm is (0,0,0).\r\n\t\t\t//if nrm is (0,0,0) ,change it to (0,0,1).\r\n\t\t\tcode += \"dp3 \" + R + \".x,\" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\r\n\t\t\tcode += \"sge \" + R + \".x,\" + animationRegisterData.vertexZeroConst + \",\" + R + \".x\\n\";\r\n\t\t\tcode += \"add \" + nrmVel + \".z,\" + R + \".x,\" + nrmVel + \".z\\n\";\r\n\r\n\t\t\tcode += \"add \" + tempSingle + \",\" + cos2 + \",\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterData.vertexTwoConst + \"\\n\";\r\n\t\t\tcode += \"sqt \" + cos + \",\" + tempSingle + \"\\n\";\r\n\r\n\t\t\tcode += \"sub \" + tempSingle + \",\" + animationRegisterData.vertexOneConst + \",\" + cos2 + \"\\n\";\r\n\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterData.vertexTwoConst + \"\\n\";\r\n\t\t\tcode += \"sqt \" + sin + \",\" + tempSingle + \"\\n\";\r\n\r\n\t\t\tcode += \"mul \" + R + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\r\n\t\t\t//use cos as R.w\r\n\r\n\t\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\t\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\r\n\t\t\t//use cos as R_rev.w\r\n\r\n\t\t\t//nrmVel and xAxis are used as temp register\r\n\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + R + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\r\n\t\t\t//use cos as R.w\r\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\t\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\tcode += \"dp3 \" + xAxis + \".w,\" + R + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\t\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\r\n\r\n\t\t\tcode += \"crs \" + R + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\t\t\t//code += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" +R_rev + \".w\\n\";\r\n\t\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\r\n\t\t\tcode += \"add \" + R + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\r\n\r\n\t\t\tcode += \"add \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t//just repeat the calculate above\r\n\t\t\t\t//because of the limited registers, no need to optimise\r\n\t\t\t\tcode += \"mov \" + xAxis + \".x,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\t\tcode += \"mov \" + xAxis + \".yz,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz\\n\";\r\n\t\t\t\tcode += \"dp3 \" + cos2 + \",\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + xAxis + \".xyz,\" + nrmVel + \".xyz\\n\";\r\n\t\t\t\tcode += \"nrm \" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\r\n\t\t\t\tcode += \"dp3 \" + R + \".x,\" + nrmVel + \".xyz,\" + nrmVel + \".xyz\\n\";\r\n\t\t\t\tcode += \"sge \" + R + \".x,\" + animationRegisterData.vertexZeroConst + \",\" + R + \".x\\n\";\r\n\t\t\t\tcode += \"add \" + nrmVel + \".z,\" + R + \".x,\" + nrmVel + \".z\\n\";\r\n\t\t\t\tcode += \"add \" + tempSingle + \",\" + cos2 + \",\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterData.vertexTwoConst + \"\\n\";\r\n\t\t\t\tcode += \"sqt \" + cos + \",\" + tempSingle + \"\\n\";\r\n\t\t\t\tcode += \"sub \" + tempSingle + \",\" + animationRegisterData.vertexOneConst + \",\" + cos2 + \"\\n\";\r\n\t\t\t\tcode += \"div \" + tempSingle + \",\" + tempSingle + \",\" + animationRegisterData.vertexTwoConst + \"\\n\";\r\n\t\t\t\tcode += \"sqt \" + sin + \",\" + tempSingle + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\t\t\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\t\t\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\t\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + R + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \".xyz\\n\";\r\n\t\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterData.rotationRegisters[i] + \".xyz\\n\";\r\n\t\t\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\t\tcode += \"dp3 \" + xAxis + \".w,\" + R + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \".xyz\\n\";\r\n\t\t\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\r\n\t\t\t\tcode += \"crs \" + R + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\t\t\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\r\n\t\t\t\tcode += \"add \" + R + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\r\n\t\t\t\tcode += \"add \" + animationRegisterData.rotationRegisters[i] + \".xyz,\" + R + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleRotateToHeadingState\r\n\t{\r\n\t\treturn <ParticleRotateToHeadingState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\t\tparticleAnimationSet.needVelocity = true;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleRotateToPositionState}\tfrom \"../../animators/states/ParticleRotateToPositionState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to control the rotation of a particle to face to a position\r\n */\r\nexport class ParticleRotateToPositionNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iPosition:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for the position the particle will rotate to face for a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the position that the particle must face.\r\n\t */\r\n\tpublic static POSITION_VECTOR3D:string = \"RotateToPositionVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleRotateToPositionNode</code>\r\n\t */\r\n\tconstructor(mode:number, position:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticleRotateToPosition\", mode, 3, 3);\r\n\r\n\t\tthis._pStateClass = ParticleRotateToPositionState;\r\n\r\n\t\tthis._iPosition = position || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar positionAttribute:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleRotateToPositionState.POSITION_INDEX, positionAttribute.index);\r\n\r\n\t\tvar code:string = \"\";\r\n\t\tvar len:number = animationRegisterData.rotationRegisters.length;\r\n\t\tvar i:number;\r\n\t\tif (animationSet.hasBillboard) {\r\n\t\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(temp1, 1);\r\n\t\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(temp2, 1);\r\n\t\t\tvar temp3:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\r\n\t\t\tvar rotationMatrixRegister:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleRotateToPositionState.MATRIX_INDEX, rotationMatrixRegister.index);\r\n\t\t\tregisterCache.getFreeVertexConstant();\r\n\t\t\tregisterCache.getFreeVertexConstant();\r\n\t\t\tregisterCache.getFreeVertexConstant();\r\n\r\n\t\t\tregisterCache.removeVertexTempUsage(temp1);\r\n\t\t\tregisterCache.removeVertexTempUsage(temp2);\r\n\r\n\t\t\t//process the position\r\n\t\t\tcode += \"sub \" + temp1 + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\t\t\tcode += \"m33 \" + temp1 + \".xyz,\" + temp1 + \".xyz,\" + rotationMatrixRegister + \"\\n\";\r\n\r\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \".xy,\" + temp1 + \".xy\\n\";\r\n\t\t\tcode += \"nrm \" + temp3 + \".xyz,\" + temp3 + \".xyz\\n\";\r\n\r\n\t\t\t//temp3.x=cos,temp3.y=sin\r\n\t\t\t//only process z axis\r\n\t\t\tcode += \"mov \" + temp2 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \".x,\" + temp3 + \".y\\n\";\r\n\t\t\tcode += \"mov \" + temp2 + \".y,\" + temp3 + \".x\\n\";\r\n\t\t\tcode += \"mov \" + temp1 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp1 + \".x,\" + temp3 + \".x\\n\";\r\n\t\t\tcode += \"neg \" + temp1 + \".y,\" + temp3 + \".y\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mov \" + temp3 + \".z,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\tcode += \"m33 \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp1 + \"\\n\";\r\n\t\t\tfor (i = 0; i < len; i++)\r\n\t\t\t\tcode += \"m33 \" + animationRegisterData.rotationRegisters[i] + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \",\" + temp1 + \"\\n\";\r\n\t\t} else {\r\n\t\t\tvar nrmDirection:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(nrmDirection, 1);\r\n\r\n\t\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(temp, 1);\r\n\t\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\r\n\t\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\r\n\t\t\tvar o_temp:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 2);\r\n\t\t\tvar tempSingle:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 3);\r\n\r\n\t\t\tvar R:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(R, 1);\r\n\r\n\t\t\tregisterCache.removeVertexTempUsage(nrmDirection);\r\n\t\t\tregisterCache.removeVertexTempUsage(temp);\r\n\t\t\tregisterCache.removeVertexTempUsage(R);\r\n\r\n\t\t\tcode += \"sub \" + nrmDirection + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\r\n\r\n\t\t\tcode += \"mov \" + sin + \",\" + nrmDirection + \".y\\n\";\r\n\t\t\tcode += \"mul \" + cos + \",\" + sin + \",\" + sin + \"\\n\";\r\n\t\t\tcode += \"sub \" + cos + \",\" + animationRegisterData.vertexOneConst + \",\" + cos + \"\\n\";\r\n\t\t\tcode += \"sqt \" + cos + \",\" + cos + \"\\n\";\r\n\r\n\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterData.scaleAndRotateTarget + \".y\\n\";\r\n\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterData.scaleAndRotateTarget + \".z\\n\";\r\n\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterData.scaleAndRotateTarget + \".y\\n\";\r\n\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterData.scaleAndRotateTarget + \".z\\n\";\r\n\r\n\t\t\tcode += \"sub \" + animationRegisterData.scaleAndRotateTarget + \".y,\" + R + \".x,\" + R + \".y\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.scaleAndRotateTarget + \".z,\" + R + \".z,\" + R + \".w\\n\";\r\n\r\n\t\t\tcode += \"abs \" + R + \".y,\" + nrmDirection + \".y\\n\";\r\n\t\t\tcode += \"sge \" + R + \".z,\" + R + \".y,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\tcode += \"mul \" + R + \".x,\" + R + \".y,\" + nrmDirection + \".y\\n\";\r\n\r\n\t\t\t//judgu if nrmDirection=(0,1,0);\r\n\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"dp3 \" + sin + \",\" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\r\n\t\t\tcode += \"sge \" + tempSingle + \",\" + animationRegisterData.vertexZeroConst + \",\" + sin + \"\\n\";\r\n\r\n\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\r\n\r\n\t\t\tcode += \"sub \" + sin + \",\" + animationRegisterData.vertexOneConst + \",\" + tempSingle + \"\\n\";\r\n\t\t\tcode += \"mul \" + sin + \",\" + sin + \",\" + nrmDirection + \".x\\n\";\r\n\r\n\t\t\tcode += \"mov \" + cos + \",\" + nrmDirection + \".z\\n\";\r\n\t\t\tcode += \"neg \" + cos + \",\" + cos + \"\\n\";\r\n\t\t\tcode += \"sub \" + o_temp + \",\" + animationRegisterData.vertexOneConst + \",\" + cos + \"\\n\";\r\n\t\t\tcode += \"mul \" + o_temp + \",\" + R + \".x,\" + tempSingle + \"\\n\";\r\n\t\t\tcode += \"add \" + cos + \",\" + cos + \",\" + o_temp + \"\\n\";\r\n\r\n\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterData.scaleAndRotateTarget + \".x\\n\";\r\n\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterData.scaleAndRotateTarget + \".z\\n\";\r\n\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterData.scaleAndRotateTarget + \".x\\n\";\r\n\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterData.scaleAndRotateTarget + \".z\\n\";\r\n\r\n\t\t\tcode += \"sub \" + animationRegisterData.scaleAndRotateTarget + \".x,\" + R + \".x,\" + R + \".y\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.scaleAndRotateTarget + \".z,\" + R + \".z,\" + R + \".w\\n\";\r\n\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t//just repeat the calculate above\r\n\t\t\t\t//because of the limited registers, no need to optimise\r\n\t\t\t\tcode += \"sub \" + nrmDirection + \".xyz,\" + positionAttribute + \".xyz,\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\t\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\r\n\t\t\t\tcode += \"mov \" + sin + \",\" + nrmDirection + \".y\\n\";\r\n\t\t\t\tcode += \"mul \" + cos + \",\" + sin + \",\" + sin + \"\\n\";\r\n\t\t\t\tcode += \"sub \" + cos + \",\" + animationRegisterData.vertexOneConst + \",\" + cos + \"\\n\";\r\n\t\t\t\tcode += \"sqt \" + cos + \",\" + cos + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterData.rotationRegisters[i] + \".y\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterData.rotationRegisters[i] + \".z\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterData.rotationRegisters[i] + \".y\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterData.rotationRegisters[i] + \".z\\n\";\r\n\t\t\t\tcode += \"sub \" + animationRegisterData.rotationRegisters[i] + \".y,\" + R + \".x,\" + R + \".y\\n\";\r\n\t\t\t\tcode += \"add \" + animationRegisterData.rotationRegisters[i] + \".z,\" + R + \".z,\" + R + \".w\\n\";\r\n\t\t\t\tcode += \"abs \" + R + \".y,\" + nrmDirection + \".y\\n\";\r\n\t\t\t\tcode += \"sge \" + R + \".z,\" + R + \".y,\" + animationRegisterData.vertexOneConst + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".x,\" + R + \".y,\" + nrmDirection + \".y\\n\";\r\n\t\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\t\tcode += \"dp3 \" + sin + \",\" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\r\n\t\t\t\tcode += \"sge \" + tempSingle + \",\" + animationRegisterData.vertexZeroConst + \",\" + sin + \"\\n\";\r\n\t\t\t\tcode += \"mov \" + nrmDirection + \".y,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\t\tcode += \"nrm \" + nrmDirection + \".xyz,\" + nrmDirection + \".xyz\\n\";\r\n\t\t\t\tcode += \"sub \" + sin + \",\" + animationRegisterData.vertexOneConst + \",\" + tempSingle + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + sin + \",\" + sin + \",\" + nrmDirection + \".x\\n\";\r\n\t\t\t\tcode += \"mov \" + cos + \",\" + nrmDirection + \".z\\n\";\r\n\t\t\t\tcode += \"neg \" + cos + \",\" + cos + \"\\n\";\r\n\t\t\t\tcode += \"sub \" + o_temp + \",\" + animationRegisterData.vertexOneConst + \",\" + cos + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + o_temp + \",\" + R + \".x,\" + tempSingle + \"\\n\";\r\n\t\t\t\tcode += \"add \" + cos + \",\" + cos + \",\" + o_temp + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".x,\" + cos + \",\" + animationRegisterData.rotationRegisters[i] + \".x\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".y,\" + sin + \",\" + animationRegisterData.rotationRegisters[i] + \".z\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".z,\" + sin + \",\" + animationRegisterData.rotationRegisters[i] + \".x\\n\";\r\n\t\t\t\tcode += \"mul \" + R + \".w,\" + cos + \",\" + animationRegisterData.rotationRegisters[i] + \".z\\n\";\r\n\t\t\t\tcode += \"sub \" + animationRegisterData.rotationRegisters[i] + \".x,\" + R + \".x,\" + R + \".y\\n\";\r\n\t\t\t\tcode += \"add \" + animationRegisterData.rotationRegisters[i] + \".z,\" + R + \".z,\" + R + \".w\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleRotateToPositionState\r\n\t{\r\n\t\treturn <ParticleRotateToPositionState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar offset:Vector3D = param[ParticleRotateToPositionNode.POSITION_VECTOR3D];\r\n\t\tif (!offset)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticleRotateToPositionNode.POSITION_VECTOR3D + \" in param!\"));\r\n\r\n\t\tthis._pOneData[0] = offset.x;\r\n\t\tthis._pOneData[1] = offset.y;\r\n\t\tthis._pOneData[2] = offset.z;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleRotationalVelocityState}\tfrom \"../../animators/states/ParticleRotationalVelocityState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to set the starting rotational velocity of a particle.\r\n */\r\nexport class ParticleRotationalVelocityNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iRotationalVelocity:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for rotational velocity node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the rotational velocity around an axis of the particle.\r\n\t */\r\n\tpublic static ROTATIONALVELOCITY_VECTOR3D:string = \"RotationalVelocityVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleRotationalVelocityNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t */\r\n\tconstructor(mode:number, rotationalVelocity:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticleRotationalVelocity\", mode, 4);\r\n\r\n\t\tthis._pStateClass = ParticleRotationalVelocityState;\r\n\r\n\t\tthis._iRotationalVelocity = rotationalVelocity || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar rotationRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleRotationalVelocityState.ROTATIONALVELOCITY_INDEX, rotationRegister.index);\r\n\r\n\t\tvar nrmVel:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(nrmVel, 1);\r\n\r\n\t\tvar xAxis:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(xAxis, 1);\r\n\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(temp, 1);\r\n\t\tvar Rtemp:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index);\r\n\t\tvar R_rev:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tR_rev = new ShaderRegisterElement(R_rev.regName, R_rev.index);\r\n\r\n\t\tvar cos:ShaderRegisterElement = new ShaderRegisterElement(Rtemp.regName, Rtemp.index, 3);\r\n\t\tvar sin:ShaderRegisterElement = new ShaderRegisterElement(R_rev.regName, R_rev.index, 3);\r\n\r\n\t\tregisterCache.removeVertexTempUsage(nrmVel);\r\n\t\tregisterCache.removeVertexTempUsage(xAxis);\r\n\t\tregisterCache.removeVertexTempUsage(temp);\r\n\r\n\t\tvar code:string = \"\";\r\n\t\tcode += \"mov \" + nrmVel + \".xyz,\" + rotationRegister + \".xyz\\n\";\r\n\t\tcode += \"mov \" + nrmVel + \".w,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\r\n\t\tcode += \"mul \" + cos + \",\" + animationRegisterData.vertexTime + \",\" + rotationRegister + \".w\\n\";\r\n\r\n\t\tcode += \"sin \" + sin + \",\" + cos + \"\\n\";\r\n\t\tcode += \"cos \" + cos + \",\" + cos + \"\\n\";\r\n\r\n\t\tcode += \"mul \" + Rtemp + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\r\n\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\r\n\t\t//nrmVel and xAxis are used as temp register\r\n\t\tcode += \"crs \" + nrmVel + \".xyz,\" + Rtemp + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\r\n\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\tcode += \"dp3 \" + xAxis + \".w,\" + Rtemp + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz\\n\";\r\n\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\r\n\r\n\t\tcode += \"crs \" + Rtemp + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\r\n\t\t//use cos as R_rev.w\r\n\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\r\n\t\tcode += \"add \" + Rtemp + \".xyz,\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\r\n\r\n\t\tcode += \"add \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\r\n\t\tvar len:number = animationRegisterData.rotationRegisters.length;\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tcode += \"mov \" + nrmVel + \".xyz,\" + rotationRegister + \".xyz\\n\";\r\n\t\t\tcode += \"mov \" + nrmVel + \".w,\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\tcode += \"mul \" + cos + \",\" + animationRegisterData.vertexTime + \",\" + rotationRegister + \".w\\n\";\r\n\t\t\tcode += \"sin \" + sin + \",\" + cos + \"\\n\";\r\n\t\t\tcode += \"cos \" + cos + \",\" + cos + \"\\n\";\r\n\t\t\tcode += \"mul \" + Rtemp + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\t\t\tcode += \"mul \" + R_rev + \".xyz,\" + sin + \",\" + nrmVel + \".xyz\\n\";\r\n\t\t\tcode += \"neg \" + R_rev + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\t\t\tcode += \"crs \" + nrmVel + \".xyz,\" + Rtemp + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \".xyz\\n\";\r\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + cos + \",\" + animationRegisterData.rotationRegisters[i] + \"\\n\";\r\n\t\t\tcode += \"add \" + nrmVel + \".xyz,\" + nrmVel + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\tcode += \"dp3 \" + xAxis + \".w,\" + Rtemp + \".xyz,\" + animationRegisterData.rotationRegisters[i] + \"\\n\";\r\n\t\t\tcode += \"neg \" + nrmVel + \".w,\" + xAxis + \".w\\n\";\r\n\t\t\tcode += \"crs \" + Rtemp + \".xyz,\" + nrmVel + \".xyz,\" + R_rev + \".xyz\\n\";\r\n\t\t\tcode += \"mul \" + xAxis + \".xyzw,\" + nrmVel + \".xyzw,\" + cos + \"\\n\";\r\n\t\t\tcode += \"add \" + Rtemp + \".xyz,\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t\tcode += \"mul \" + xAxis + \".xyz,\" + nrmVel + \".w,\" + R_rev + \".xyz\\n\";\r\n\t\t\tcode += \"add \" + animationRegisterData.rotationRegisters[i] + \",\" + Rtemp + \".xyz,\" + xAxis + \".xyz\\n\";\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleRotationalVelocityState\r\n\t{\r\n\t\treturn <ParticleRotationalVelocityState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\t//(Vector3d.x,Vector3d.y,Vector3d.z) is rotation axis,Vector3d.w is cycle duration\r\n\t\tvar rotate:Vector3D = param[ParticleRotationalVelocityNode.ROTATIONALVELOCITY_VECTOR3D];\r\n\t\tif (!rotate)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticleRotationalVelocityNode.ROTATIONALVELOCITY_VECTOR3D + \" in param!\"));\r\n\r\n\t\tif (rotate.length <= 0)\r\n\t\t\trotate.z = 1; //set the default direction\r\n\t\telse\r\n\t\t\trotate.normalize();\r\n\r\n\t\tthis._pOneData[0] = rotate.x;\r\n\t\tthis._pOneData[1] = rotate.y;\r\n\t\tthis._pOneData[2] = rotate.z;\r\n\t\tif (rotate.w <= 0)\r\n\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\r\n\t\t// it's used as angle/2 in agal\r\n\t\tthis._pOneData[3] = Math.PI/rotate.w;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleScaleState}\t\t\t\tfrom \"../../animators/states/ParticleScaleState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to control the scale variation of a particle over time.\r\n */\r\nexport class ParticleScaleNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iUsesCycle:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iUsesPhase:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iMinScale:number;\r\n\t/** @private */\r\n\tpublic _iMaxScale:number;\r\n\t/** @private */\r\n\tpublic _iCycleDuration:number;\r\n\t/** @private */\r\n\tpublic _iCyclePhase:number;\r\n\r\n\t/**\r\n\t * Reference for scale node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> representing the min scale (x), max scale(y), optional cycle speed (z) and phase offset (w) applied to the particle.\r\n\t */\r\n\tpublic static SCALE_VECTOR3D:string = \"ScaleVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleScaleNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] usesCycle       Defines whether the node uses the <code>cycleDuration</code> property in the shader to calculate the period of animation independent of particle duration. Defaults to false.\r\n\t * @param    [optional] usesPhase       Defines whether the node uses the <code>cyclePhase</code> property in the shader to calculate a starting offset to the animation cycle. Defaults to false.\r\n\t * @param    [optional] minScale        Defines the default min scale transform of the node, when in global mode. Defaults to 1.\r\n\t * @param    [optional] maxScale        Defines the default max color transform of the node, when in global mode. Defaults to 1.\r\n\t * @param    [optional] cycleDuration   Defines the default duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\r\n\t * @param    [optional] cyclePhase      Defines the default phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\r\n\t */\r\n\tconstructor(mode:number, usesCycle:boolean, usesPhase:boolean, minScale:number = 1, maxScale:number = 1, cycleDuration:number = 1, cyclePhase:number = 0)\r\n\t{\r\n\t\tsuper(\"ParticleScale\", mode, (usesCycle && usesPhase)? 4 : ((usesCycle || usesPhase)? 3 : 2), 3);\r\n\r\n\t\tthis._pStateClass = ParticleScaleState;\r\n\r\n\t\tthis._iUsesCycle = usesCycle;\r\n\t\tthis._iUsesPhase = usesPhase;\r\n\r\n\t\tthis._iMinScale = minScale;\r\n\t\tthis._iMaxScale = maxScale;\r\n\t\tthis._iCycleDuration = cycleDuration;\r\n\t\tthis._iCyclePhase = cyclePhase;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexSingleTemp();\r\n\r\n\t\tvar scaleRegister:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleScaleState.SCALE_INDEX, scaleRegister.index);\r\n\r\n\t\tif (this._iUsesCycle) {\r\n\t\t\tcode += \"mul \" + temp + \",\" + animationRegisterData.vertexTime + \",\" + scaleRegister + \".z\\n\";\r\n\r\n\t\t\tif (this._iUsesPhase)\r\n\t\t\t\tcode += \"add \" + temp + \",\" + temp + \",\" + scaleRegister + \".w\\n\";\r\n\r\n\t\t\tcode += \"sin \" + temp + \",\" + temp + \"\\n\";\r\n\t\t}\r\n\r\n\t\tcode += \"mul \" + temp + \",\" + scaleRegister + \".y,\" + ((this._iUsesCycle)? temp : animationRegisterData.vertexLife) + \"\\n\";\r\n\t\tcode += \"add \" + temp + \",\" + scaleRegister + \".x,\" + temp + \"\\n\";\r\n\t\tcode += \"mul \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp + \"\\n\";\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleScaleState\r\n\t{\r\n\t\treturn <ParticleScaleState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar scale:Vector3D = param[ParticleScaleNode.SCALE_VECTOR3D];\r\n\t\tif (!scale)\r\n\t\t\tthrow(new Error(\"there is no \" + ParticleScaleNode.SCALE_VECTOR3D + \" in param!\"));\r\n\r\n\t\tif (this._iUsesCycle) {\r\n\t\t\tthis._pOneData[0] = (scale.x + scale.y)/2;\r\n\t\t\tthis._pOneData[1] = Math.abs(scale.x - scale.y)/2;\r\n\t\t\tif (scale.z <= 0)\r\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\r\n\t\t\tthis._pOneData[2] = Math.PI*2/scale.z;\r\n\t\t\tif (this._iUsesPhase)\r\n\t\t\t\tthis._pOneData[3] = scale.w*Math.PI/180;\r\n\t\t} else {\r\n\t\t\tthis._pOneData[0] = scale.x;\r\n\t\t\tthis._pOneData[1] = scale.y - scale.x;\r\n\t\t}\r\n\t}\r\n}",
    "import {ColorTransform}\t\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\n\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ColorSegmentPoint}\t\t\t\tfrom \"../../animators/data/ColorSegmentPoint\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleSegmentedColorState}\t\tfrom \"../../animators/states/ParticleSegmentedColorState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n *\r\n */\r\nexport class ParticleSegmentedColorNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iUsesMultiplier:boolean;\r\n\t/** @private */\r\n\tpublic _iUsesOffset:boolean;\r\n\t/** @private */\r\n\tpublic _iStartColor:ColorTransform;\r\n\t/** @private */\r\n\tpublic _iEndColor:ColorTransform;\r\n\t/** @private */\r\n\tpublic _iNumSegmentPoint:number;\r\n\t/** @private */\r\n\tpublic _iSegmentPoints:Array<ColorSegmentPoint>;\r\n\r\n\tconstructor(usesMultiplier:boolean, usesOffset:boolean, numSegmentPoint:number, startColor:ColorTransform, endColor:ColorTransform, segmentPoints:Array<ColorSegmentPoint>)\r\n\t{\r\n\t\t//because of the stage3d register limitation, it only support the global mode\r\n\t\tsuper(\"ParticleSegmentedColor\", ParticlePropertiesMode.GLOBAL, 0, ParticleAnimationSet.COLOR_PRIORITY);\r\n\r\n\t\tthis._pStateClass = ParticleSegmentedColorState;\r\n\r\n\t\tif (numSegmentPoint > 4)\r\n\t\t\tthrow(new Error(\"the numSegmentPoint must be less or equal 4\"));\r\n\t\tthis._iUsesMultiplier = usesMultiplier;\r\n\t\tthis._iUsesOffset = usesOffset;\r\n\t\tthis._iNumSegmentPoint = numSegmentPoint;\r\n\t\tthis._iStartColor = startColor;\r\n\t\tthis._iEndColor = endColor;\r\n\t\tthis._iSegmentPoints = segmentPoints;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\t\tif (this._iUsesMultiplier)\r\n\t\t\tparticleAnimationSet.hasColorMulNode = true;\r\n\t\tif (this._iUsesOffset)\r\n\t\t\tparticleAnimationSet.hasColorAddNode = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tif (shader.usesFragmentAnimation) {\r\n\t\t\tvar accMultiplierColor:ShaderRegisterElement;\r\n\t\t\t//var accOffsetColor:ShaderRegisterElement;\r\n\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\taccMultiplierColor = registerCache.getFreeVertexVectorTemp();\r\n\t\t\t\tregisterCache.addVertexTempUsages(accMultiplierColor, 1);\r\n\t\t\t}\r\n\r\n\t\t\tvar tempColor:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tregisterCache.addVertexTempUsages(tempColor, 1);\r\n\r\n\t\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tvar accTime:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\r\n\t\t\tvar tempTime:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\r\n\r\n\t\t\tif (this._iUsesMultiplier)\r\n\t\t\t\tregisterCache.removeVertexTempUsage(accMultiplierColor);\r\n\r\n\t\t\tregisterCache.removeVertexTempUsage(tempColor);\r\n\r\n\t\t\t//for saving all the life values (at most 4)\r\n\t\t\tvar lifeTimeRegister:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleSegmentedColorState.TIME_DATA_INDEX, lifeTimeRegister.index);\r\n\r\n\t\t\tvar i:number;\r\n\r\n\t\t\tvar startMulValue:ShaderRegisterElement;\r\n\t\t\tvar deltaMulValues:Array<ShaderRegisterElement>;\r\n\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\tstartMulValue = registerCache.getFreeVertexConstant();\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleSegmentedColorState.START_MULTIPLIER_INDEX, startMulValue.index);\r\n\t\t\t\tdeltaMulValues = new Array<ShaderRegisterElement>();\r\n\t\t\t\tfor (i = 0; i < this._iNumSegmentPoint + 1; i++)\r\n\t\t\t\t\tdeltaMulValues.push(registerCache.getFreeVertexConstant());\r\n\t\t\t}\r\n\r\n\t\t\tvar startOffsetValue:ShaderRegisterElement;\r\n\t\t\tvar deltaOffsetValues:Array<ShaderRegisterElement>;\r\n\t\t\tif (this._iUsesOffset) {\r\n\t\t\t\tstartOffsetValue = registerCache.getFreeVertexConstant();\r\n\t\t\t\tanimationRegisterData.setRegisterIndex(this, ParticleSegmentedColorState.START_OFFSET_INDEX, startOffsetValue.index);\r\n\t\t\t\tdeltaOffsetValues = new Array<ShaderRegisterElement>();\r\n\t\t\t\tfor (i = 0; i < this._iNumSegmentPoint + 1; i++)\r\n\t\t\t\t\tdeltaOffsetValues.push(registerCache.getFreeVertexConstant());\r\n\t\t\t}\r\n\r\n\t\t\tif (this._iUsesMultiplier)\r\n\t\t\t\tcode += \"mov \" + accMultiplierColor + \",\" + startMulValue + \"\\n\";\r\n\t\t\tif (this._iUsesOffset)\r\n\t\t\t\tcode += \"add \" + animationRegisterData.colorAddTarget + \",\" + animationRegisterData.colorAddTarget + \",\" + startOffsetValue + \"\\n\";\r\n\r\n\t\t\tfor (i = 0; i < this._iNumSegmentPoint; i++) {\r\n\t\t\t\tswitch (i) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + animationRegisterData.vertexLife + \",\" + lifeTimeRegister + \".x\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + animationRegisterData.vertexLife + \",\" + lifeTimeRegister + \".x\\n\";\r\n\t\t\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + tempTime + \",\" + lifeTimeRegister + \".y\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".y\\n\";\r\n\t\t\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + tempTime + \",\" + lifeTimeRegister + \".z\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".z\\n\";\r\n\t\t\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\t\t\t\tcode += \"min \" + tempTime + \",\" + tempTime + \",\" + lifeTimeRegister + \".w\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaMulValues[i] + \"\\n\";\r\n\t\t\t\t\tcode += \"add \" + accMultiplierColor + \",\" + accMultiplierColor + \",\" + tempColor + \"\\n\";\r\n\t\t\t\t}\r\n\t\t\t\tif (this._iUsesOffset) {\r\n\t\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaOffsetValues[i] + \"\\n\";\r\n\t\t\t\t\tcode += \"add \" + animationRegisterData.colorAddTarget + \",\" + animationRegisterData.colorAddTarget + \",\" + tempColor + \"\\n\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//for the last segment:\r\n\t\t\tif (this._iNumSegmentPoint == 0)\r\n\t\t\t\ttempTime = animationRegisterData.vertexLife;\r\n\t\t\telse {\r\n\t\t\t\tswitch (this._iNumSegmentPoint) {\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + animationRegisterData.vertexLife + \",\" + lifeTimeRegister + \".x\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".y\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".z\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tcode += \"sub \" + accTime + \",\" + accTime + \",\" + lifeTimeRegister + \".w\\n\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcode += \"max \" + tempTime + \",\" + accTime + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\t\t}\r\n\t\t\tif (this._iUsesMultiplier) {\r\n\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaMulValues[this._iNumSegmentPoint] + \"\\n\";\r\n\t\t\t\tcode += \"add \" + accMultiplierColor + \",\" + accMultiplierColor + \",\" + tempColor + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + animationRegisterData.colorMulTarget + \",\" + animationRegisterData.colorMulTarget + \",\" + accMultiplierColor + \"\\n\";\r\n\t\t\t}\r\n\t\t\tif (this._iUsesOffset) {\r\n\t\t\t\tcode += \"mul \" + tempColor + \",\" + tempTime + \",\" + deltaOffsetValues[this._iNumSegmentPoint] + \"\\n\";\r\n\t\t\t\tcode += \"add \" + animationRegisterData.colorAddTarget + \",\" + animationRegisterData.colorAddTarget + \",\" + tempColor + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleSpriteSheetState}\t\t\tfrom \"../../animators/states/ParticleSpriteSheetState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used when a spritesheet texture is required to animate the particle.\r\n * NB: to enable use of this node, the <code>repeat</code> property on the material has to be set to true.\r\n */\r\nexport class ParticleSpriteSheetNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iUsesCycle:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iUsesPhase:boolean;\r\n\r\n\t/** @private */\r\n\tpublic _iTotalFrames:number;\r\n\t/** @private */\r\n\tpublic _iNumColumns:number;\r\n\t/** @private */\r\n\tpublic _iNumRows:number;\r\n\t/** @private */\r\n\tpublic _iCycleDuration:number;\r\n\t/** @private */\r\n\tpublic _iCyclePhase:number;\r\n\r\n\t/**\r\n\t * Reference for spritesheet node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> representing the cycleDuration (x), optional phaseTime (y).\r\n\t */\r\n\tpublic static UV_VECTOR3D:string = \"UVVector3D\";\r\n\r\n\t/**\r\n\t * Defines the number of columns in the spritesheet, when in global mode. Defaults to 1. Read only.\r\n\t */\r\n\tpublic get numColumns():number\r\n\t{\r\n\t\treturn this._iNumColumns;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the number of rows in the spritesheet, when in global mode. Defaults to 1. Read only.\r\n\t */\r\n\tpublic get numRows():number\r\n\t{\r\n\t\treturn this._iNumRows;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the total number of frames used by the spritesheet, when in global mode. Defaults to the number defined by numColumns and numRows. Read only.\r\n\t */\r\n\tpublic get totalFrames():number\r\n\t{\r\n\t\treturn this._iTotalFrames;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleSpriteSheetNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] numColumns      Defines the number of columns in the spritesheet, when in global mode. Defaults to 1.\r\n\t * @param    [optional] numRows         Defines the number of rows in the spritesheet, when in global mode. Defaults to 1.\r\n\t * @param    [optional] cycleDuration   Defines the default cycle duration in seconds, when in global mode. Defaults to 1.\r\n\t * @param    [optional] cyclePhase      Defines the default cycle phase, when in global mode. Defaults to 0.\r\n\t * @param    [optional] totalFrames     Defines the total number of frames used by the spritesheet, when in global mode. Defaults to the number defined by numColumns and numRows.\r\n\t * @param    [optional] looping         Defines whether the spritesheet animation is set to loop indefinitely. Defaults to true.\r\n\t */\r\n\tconstructor(mode:number, usesCycle:boolean, usesPhase:boolean, numColumns:number = 1, numRows:number = 1, cycleDuration:number = 1, cyclePhase:number = 0, totalFrames:number = Number.MAX_VALUE)\r\n\t{\r\n\t\tsuper(\"ParticleSpriteSheet\", mode, usesCycle? (usesPhase? 3 : 2) : 1, ParticleAnimationSet.POST_PRIORITY + 1);\r\n\r\n\t\tthis._pStateClass = ParticleSpriteSheetState;\r\n\r\n\t\tthis._iUsesCycle = usesCycle;\r\n\t\tthis._iUsesPhase = usesPhase;\r\n\r\n\t\tthis._iNumColumns = numColumns;\r\n\t\tthis._iNumRows = numRows;\r\n\t\tthis._iCyclePhase = cyclePhase;\r\n\t\tthis._iCycleDuration = cycleDuration;\r\n\t\tthis._iTotalFrames = Math.min(totalFrames, numColumns*numRows);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALUVCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\t//get 2 vc\r\n\t\tvar uvParamConst1:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tvar uvParamConst2:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleSpriteSheetState.UV_INDEX_0, uvParamConst1.index);\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleSpriteSheetState.UV_INDEX_1, uvParamConst2.index);\r\n\r\n\t\tvar uTotal:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst1.regName, uvParamConst1.index, 0);\r\n\t\tvar uStep:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst1.regName, uvParamConst1.index, 1);\r\n\t\tvar vStep:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst1.regName, uvParamConst1.index, 2);\r\n\r\n\t\tvar uSpeed:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst2.regName, uvParamConst2.index, 0);\r\n\t\tvar cycle:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst2.regName, uvParamConst2.index, 1);\r\n\t\tvar phaseTime:ShaderRegisterElement = new ShaderRegisterElement(uvParamConst2.regName, uvParamConst2.index, 2);\r\n\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar time:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 0);\r\n\t\tvar vOffset:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 1);\r\n\t\ttemp = new ShaderRegisterElement(temp.regName, temp.index, 2);\r\n\t\tvar temp2:ShaderRegisterElement = new ShaderRegisterElement(temp.regName, temp.index, 3);\r\n\r\n\t\tvar u:ShaderRegisterElement = new ShaderRegisterElement(animationRegisterData.uvTarget.regName, animationRegisterData.uvTarget.index, 0);\r\n\t\tvar v:ShaderRegisterElement = new ShaderRegisterElement(animationRegisterData.uvTarget.regName, animationRegisterData.uvTarget.index, 1);\r\n\r\n\t\tvar code:string = \"\";\r\n\t\t//scale uv\r\n\t\tcode += \"mul \" + u + \",\" + u + \",\" + uStep + \"\\n\";\r\n\t\tif (this._iNumRows > 1)\r\n\t\t\tcode += \"mul \" + v + \",\" + v + \",\" + vStep + \"\\n\";\r\n\r\n\t\tif (this._iUsesCycle) {\r\n\t\t\tif (this._iUsesPhase)\r\n\t\t\t\tcode += \"add \" + time + \",\" + animationRegisterData.vertexTime + \",\" + phaseTime + \"\\n\";\r\n\t\t\telse\r\n\t\t\t\tcode += \"mov \" + time + \",\" + animationRegisterData.vertexTime + \"\\n\";\r\n\t\t\tcode += \"div \" + time + \",\" + time + \",\" + cycle + \"\\n\";\r\n\t\t\tcode += \"frc \" + time + \",\" + time + \"\\n\";\r\n\t\t\tcode += \"mul \" + time + \",\" + time + \",\" + cycle + \"\\n\";\r\n\t\t\tcode += \"mul \" + temp + \",\" + time + \",\" + uSpeed + \"\\n\";\r\n\t\t} else\r\n\t\t\tcode += \"mul \" + temp.toString() + \",\" + animationRegisterData.vertexLife + \",\" + uTotal + \"\\n\";\r\n\r\n\t\tif (this._iNumRows > 1) {\r\n\t\t\tcode += \"frc \" + temp2 + \",\" + temp + \"\\n\";\r\n\t\t\tcode += \"sub \" + vOffset + \",\" + temp + \",\" + temp2 + \"\\n\";\r\n\t\t\tcode += \"mul \" + vOffset + \",\" + vOffset + \",\" + vStep + \"\\n\";\r\n\t\t\tcode += \"add \" + v + \",\" + v + \",\" + vOffset + \"\\n\";\r\n\t\t}\r\n\r\n\t\tcode += \"div \" + temp2 + \",\" + temp + \",\" + uStep + \"\\n\";\r\n\t\tcode += \"frc \" + temp + \",\" + temp2 + \"\\n\";\r\n\t\tcode += \"sub \" + temp2 + \",\" + temp2 + \",\" + temp + \"\\n\";\r\n\t\tcode += \"mul \" + temp + \",\" + temp2 + \",\" + uStep + \"\\n\";\r\n\r\n\t\tif (this._iNumRows > 1)\r\n\t\t\tcode += \"frc \" + temp + \",\" + temp + \"\\n\";\r\n\t\tcode += \"add \" + u + \",\" + u + \",\" + temp + \"\\n\";\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleSpriteSheetState\r\n\t{\r\n\t\treturn <ParticleSpriteSheetState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\t\tparticleAnimationSet.hasUVNode = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tif (this._iUsesCycle) {\r\n\t\t\tvar uvCycle:Vector3D = param[ParticleSpriteSheetNode.UV_VECTOR3D];\r\n\t\t\tif (!uvCycle)\r\n\t\t\t\tthrow(new Error(\"there is no \" + ParticleSpriteSheetNode.UV_VECTOR3D + \" in param!\"));\r\n\t\t\tif (uvCycle.x <= 0)\r\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\r\n\t\t\tvar uTotal:number = this._iTotalFrames/this._iNumColumns;\r\n\t\t\tthis._pOneData[0] = uTotal/uvCycle.x;\r\n\t\t\tthis._pOneData[1] = uvCycle.x;\r\n\t\t\tif (this._iUsesPhase)\r\n\t\t\t\tthis._pOneData[2] = uvCycle.y;\r\n\t\t}\r\n\t}\r\n}",
    "import {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleTimeState}\t\t\t\tfrom \"../../animators/states/ParticleTimeState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used as the base node for timekeeping inside a particle. Automatically added to a particle animation set on instatiation.\r\n */\r\nexport class ParticleTimeNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iUsesDuration:boolean;\r\n\t/** @private */\r\n\tpublic _iUsesDelay:boolean;\r\n\t/** @private */\r\n\tpublic _iUsesLooping:boolean;\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleTimeNode</code>\r\n\t *\r\n\t * @param    [optional] usesDuration    Defines whether the node uses the <code>duration</code> data in the static properties to determine how long a particle is visible for. Defaults to false.\r\n\t * @param    [optional] usesDelay       Defines whether the node uses the <code>delay</code> data in the static properties to determine how long a particle is hidden for. Defaults to false. Requires <code>usesDuration</code> to be true.\r\n\t * @param    [optional] usesLooping     Defines whether the node creates a looping timeframe for each particle determined by the <code>startTime</code>, <code>duration</code> and <code>delay</code> data in the static properties function. Defaults to false. Requires <code>usesLooping</code> to be true.\r\n\t */\r\n\tconstructor(usesDuration:boolean = false, usesLooping:boolean = false, usesDelay:boolean = false)\r\n\t{\r\n\t\tsuper(\"ParticleTime\", ParticlePropertiesMode.LOCAL_STATIC, 4, 0);\r\n\t\t\r\n\t\tthis._pStateClass = ParticleTimeState;\r\n\r\n\t\tthis._iUsesDuration = usesDuration;\r\n\t\tthis._iUsesLooping = usesLooping;\r\n\t\tthis._iUsesDelay = usesDelay;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar timeStreamRegister:ShaderRegisterElement = registerCache.getFreeVertexAttribute(); //timeStreamRegister.x is start，timeStreamRegister.y is during time\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleTimeState.TIME_STREAM_INDEX, timeStreamRegister.index);\r\n\t\tvar timeConst:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleTimeState.TIME_CONSTANT_INDEX, timeConst.index);\r\n\r\n\t\tvar code:string = \"\";\r\n\t\tcode += \"sub \" + animationRegisterData.vertexTime + \",\" + timeConst + \",\" + timeStreamRegister + \".x\\n\";\r\n\t\t//if time=0,set the position to zero.\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexSingleTemp();\r\n\t\tcode += \"sge \" + temp + \",\" + animationRegisterData.vertexTime + \",\" + animationRegisterData.vertexZeroConst + \"\\n\";\r\n\t\tcode += \"mul \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + temp + \"\\n\";\r\n\t\tif (this._iUsesDuration) {\r\n\t\t\tif (this._iUsesLooping) {\r\n\t\t\t\tvar div:ShaderRegisterElement = registerCache.getFreeVertexSingleTemp();\r\n\t\t\t\tif (this._iUsesDelay) {\r\n\t\t\t\t\tcode += \"div \" + div + \",\" + animationRegisterData.vertexTime + \",\" + timeStreamRegister + \".z\\n\";\r\n\t\t\t\t\tcode += \"frc \" + div + \",\" + div + \"\\n\";\r\n\t\t\t\t\tcode += \"mul \" + animationRegisterData.vertexTime + \",\" + div + \",\" + timeStreamRegister + \".z\\n\";\r\n\t\t\t\t\tcode += \"slt \" + div + \",\" + animationRegisterData.vertexTime + \",\" + timeStreamRegister + \".y\\n\";\r\n\t\t\t\t\tcode += \"mul \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + div + \"\\n\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcode += \"mul \" + div + \",\" + animationRegisterData.vertexTime + \",\" + timeStreamRegister + \".w\\n\";\r\n\t\t\t\t\tcode += \"frc \" + div + \",\" + div + \"\\n\";\r\n\t\t\t\t\tcode += \"mul \" + animationRegisterData.vertexTime + \",\" + div + \",\" + timeStreamRegister + \".y\\n\";\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar sge:ShaderRegisterElement = registerCache.getFreeVertexSingleTemp();\r\n\t\t\t\tcode += \"sge \" + sge + \",\" + timeStreamRegister + \".y,\" + animationRegisterData.vertexTime + \"\\n\";\r\n\t\t\t\tcode += \"mul \" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + animationRegisterData.scaleAndRotateTarget + \".xyz,\" + sge + \"\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tcode += \"mul \" + animationRegisterData.vertexLife + \",\" + animationRegisterData.vertexTime + \",\" + timeStreamRegister + \".w\\n\";\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleTimeState\r\n\t{\r\n\t\treturn <ParticleTimeState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tthis._pOneData[0] = param.startTime;\r\n\t\tthis._pOneData[1] = param.duration;\r\n\t\tthis._pOneData[2] = param.delay + param.duration;\r\n\t\tthis._pOneData[3] = 1/param.duration;\r\n\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleUVState}\t\t\t\t\tfrom \"../../animators/states/ParticleUVState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to control the UV offset and scale of a particle over time.\r\n */\r\nexport class ParticleUVNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iUvData:Vector3D;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static U_AXIS:string = \"x\";\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static V_AXIS:string = \"y\";\r\n\r\n\tprivate _cycle:number;\r\n\tprivate _scale:number;\r\n\tprivate _axis:string;\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleTimeNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] cycle           Defines whether the time track is in loop mode. Defaults to false.\r\n\t * @param    [optional] scale           Defines whether the time track is in loop mode. Defaults to false.\r\n\t * @param    [optional] axis            Defines whether the time track is in loop mode. Defaults to false.\r\n\t */\r\n\tconstructor(mode:number, cycle:number = 1, scale:number = 1, axis:string = \"x\")\r\n\t{\r\n\t\t//because of the stage3d register limitation, it only support the global mode\r\n\t\tsuper(\"ParticleUV\", ParticlePropertiesMode.GLOBAL, 4, ParticleAnimationSet.POST_PRIORITY + 1);\r\n\r\n\t\tthis._pStateClass = ParticleUVState;\r\n\r\n\t\tthis._cycle = cycle;\r\n\t\tthis._scale = scale;\r\n\t\tthis._axis = axis;\r\n\r\n\t\tthis.updateUVData();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get cycle():number\r\n\t{\r\n\t\treturn this._cycle;\r\n\t}\r\n\r\n\tpublic set cycle(value:number)\r\n\t{\r\n\t\tthis._cycle = value;\r\n\r\n\t\tthis.updateUVData();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get scale():number\r\n\t{\r\n\t\treturn this._scale;\r\n\t}\r\n\r\n\tpublic set scale(value:number)\r\n\t{\r\n\t\tthis._scale = value;\r\n\r\n\t\tthis.updateUVData();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get axis():string\r\n\t{\r\n\t\treturn this._axis;\r\n\t}\r\n\r\n\tpublic set axis(value:string)\r\n\t{\r\n\t\tthis._axis = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALUVCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\r\n\t\tvar uvConst:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleUVState.UV_INDEX, uvConst.index);\r\n\r\n\t\tvar axisIndex:number = this._axis == \"x\"? 0 : (this._axis == \"y\"? 1 : 2);\r\n\r\n\t\tvar target:ShaderRegisterElement = new ShaderRegisterElement(animationRegisterData.uvTarget.regName, animationRegisterData.uvTarget.index, axisIndex);\r\n\r\n\t\tvar sin:ShaderRegisterElement = registerCache.getFreeVertexSingleTemp();\r\n\r\n\t\tif (this._scale != 1)\r\n\t\t\tcode += \"mul \" + target + \",\" + target + \",\" + uvConst + \".y\\n\";\r\n\r\n\t\tcode += \"mul \" + sin + \",\" + animationRegisterData.vertexTime + \",\" + uvConst + \".x\\n\";\r\n\t\tcode += \"sin \" + sin + \",\" + sin + \"\\n\";\r\n\t\tcode += \"add \" + target + \",\" + target + \",\" + sin + \"\\n\";\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleUVState\r\n\t{\r\n\t\treturn <ParticleUVState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\tprivate updateUVData():void\r\n\t{\r\n\t\tthis._iUvData = new Vector3D(Math.PI*2/this._cycle, this._scale, 0, 0);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iProcessAnimationSetting(particleAnimationSet:ParticleAnimationSet):void\r\n\t{\r\n\t\tparticleAnimationSet.hasUVNode = true;\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {ParticleProperties}\t\t\t\tfrom \"../../animators/data/ParticleProperties\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleVelocityState}\t\t\tfrom \"../../animators/states/ParticleVelocityState\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * A particle animation node used to set the starting velocity of a particle.\r\n */\r\nexport class ParticleVelocityNode extends ParticleNodeBase\r\n{\r\n\t/** @private */\r\n\tpublic _iVelocity:Vector3D;\r\n\r\n\t/**\r\n\t * Reference for velocity node properties on a single particle (when in local property mode).\r\n\t * Expects a <code>Vector3D</code> object representing the direction of movement on the particle.\r\n\t */\r\n\tpublic static VELOCITY_VECTOR3D:string = \"VelocityVector3D\";\r\n\r\n\t/**\r\n\t * Creates a new <code>ParticleVelocityNode</code>\r\n\t *\r\n\t * @param               mode            Defines whether the mode of operation acts on local properties of a particle or global properties of the node.\r\n\t * @param    [optional] velocity        Defines the default velocity vector of the node, used when in global mode.\r\n\t */\r\n\tconstructor(mode:number, velocity:Vector3D = null)\r\n\t{\r\n\t\tsuper(\"ParticleVelocity\", mode, 3);\r\n\r\n\t\tthis._pStateClass = ParticleVelocityState;\r\n\r\n\t\tthis._iVelocity = velocity || new Vector3D();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAGALVertexCode(shader:ShaderBase, animationSet:ParticleAnimationSet, registerCache:ShaderRegisterCache, animationRegisterData:AnimationRegisterData):string\r\n\t{\r\n\t\tvar velocityValue:ShaderRegisterElement = (this._pMode == ParticlePropertiesMode.GLOBAL)? registerCache.getFreeVertexConstant() : registerCache.getFreeVertexAttribute();\r\n\t\tanimationRegisterData.setRegisterIndex(this, ParticleVelocityState.VELOCITY_INDEX, velocityValue.index);\r\n\r\n\t\tvar distance:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tvar code:string = \"\";\r\n\t\tcode += \"mul \" + distance + \",\" + animationRegisterData.vertexTime + \",\" + velocityValue + \"\\n\";\r\n\t\tcode += \"add \" + animationRegisterData.positionTarget + \".xyz,\" + distance + \",\" + animationRegisterData.positionTarget + \".xyz\\n\";\r\n\r\n\t\tif (animationSet.needVelocity)\r\n\t\t\tcode += \"add \" + animationRegisterData.velocityTarget + \".xyz,\" + velocityValue + \".xyz,\" + animationRegisterData.velocityTarget + \".xyz\\n\";\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):ParticleVelocityState\r\n\t{\r\n\t\treturn <ParticleVelocityState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGeneratePropertyOfOneParticle(param:ParticleProperties):void\r\n\t{\r\n\t\tvar _tempVelocity:Vector3D = param[ParticleVelocityNode.VELOCITY_VECTOR3D];\r\n\t\tif (!_tempVelocity)\r\n\t\t\tthrow new Error(\"there is no \" + ParticleVelocityNode.VELOCITY_VECTOR3D + \" in param!\");\r\n\r\n\t\tthis._pOneData[0] = _tempVelocity.x;\r\n\t\tthis._pOneData[1] = _tempVelocity.y;\r\n\t\tthis._pOneData[2] = _tempVelocity.z;\r\n\t}\r\n}",
    "import {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {SkeletonBinaryLERPState}\t\t\tfrom \"../../animators/states/SkeletonBinaryLERPState\";\r\n\r\n/**\r\n * A skeleton animation node that uses two animation node inputs to blend a lineraly interpolated output of a skeleton pose.\r\n */\r\nexport class SkeletonBinaryLERPNode extends AnimationNodeBase\r\n{\r\n\t/**\r\n\t * Defines input node A to use for the blended output.\r\n\t */\r\n\tpublic inputA:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Defines input node B to use for the blended output.\r\n\t */\r\n\tpublic inputB:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Creates a new <code>SkeletonBinaryLERPNode</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pStateClass = SkeletonBinaryLERPState;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonBinaryLERPState\r\n\t{\r\n\t\treturn <SkeletonBinaryLERPState> animator.getAnimationState(this);\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {SkeletonPose}\t\t\t\t\t\tfrom \"../../animators/data/SkeletonPose\";\r\nimport {AnimationClipNodeBase}\t\t\tfrom \"../../animators/nodes/AnimationClipNodeBase\";\r\nimport {SkeletonClipState}\t\t\t\tfrom \"../../animators/states/SkeletonClipState\";\r\n\r\n/**\r\n * A skeleton animation node containing time-based animation data as individual skeleton poses.\r\n */\r\nexport class SkeletonClipNode extends AnimationClipNodeBase\r\n{\r\n\tprivate _frames:Array<SkeletonPose> = new Array<SkeletonPose>();\r\n\r\n\t/**\r\n\t * Determines whether to use SLERP equations (true) or LERP equations (false) in the calculation\r\n\t * of the output skeleton pose. Defaults to false.\r\n\t */\r\n\tpublic highQuality:boolean = false;\r\n\r\n\t/**\r\n\t * Returns a vector of skeleton poses representing the pose of each animation frame in the clip.\r\n\t */\r\n\tpublic get frames():Array<SkeletonPose>\r\n\t{\r\n\t\treturn this._frames;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>SkeletonClipNode</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pStateClass = SkeletonClipState;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a skeleton pose frame to the internal timeline of the animation node.\r\n\t *\r\n\t * @param skeletonPose The skeleton pose object to add to the timeline of the node.\r\n\t * @param duration The specified duration of the frame in milliseconds.\r\n\t */\r\n\tpublic addFrame(skeletonPose:SkeletonPose, duration:number):void\r\n\t{\r\n\t\tthis._frames.push(skeletonPose);\r\n\t\tthis._pDurations.push(duration);\r\n\r\n\t\tthis._pNumFrames = this._pDurations.length;\r\n\r\n\t\tthis._pStitchDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonClipState\r\n\t{\r\n\t\treturn <SkeletonClipState> animator.getAnimationState(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateStitch():void\r\n\t{\r\n\t\tsuper._pUpdateStitch();\r\n\r\n\t\tvar i:number = this._pNumFrames - 1;\r\n\t\tvar p1:Vector3D, p2:Vector3D, delta:Vector3D;\r\n\t\twhile (i--) {\r\n\t\t\tthis._pTotalDuration += this._pDurations[i];\r\n\t\t\tp1 = this._frames[i].jointPoses[0].translation;\r\n\t\t\tp2 = this._frames[i + 1].jointPoses[0].translation;\r\n\t\t\tdelta = p2.subtract(p1);\r\n\t\t\tthis._pTotalDelta.x += delta.x;\r\n\t\t\tthis._pTotalDelta.y += delta.y;\r\n\t\t\tthis._pTotalDelta.z += delta.z;\r\n\t\t}\r\n\r\n\t\tif (this._pStitchFinalFrame || !this._pLooping) {\r\n\t\t\tthis._pTotalDuration += this._pDurations[this._pNumFrames - 1];\r\n\t\t\tp1 = this._frames[0].jointPoses[0].translation;\r\n\t\t\tp2 = this._frames[1].jointPoses[0].translation;\r\n\t\t\tdelta = p2.subtract(p1);\r\n\t\t\tthis._pTotalDelta.x += delta.x;\r\n\t\t\tthis._pTotalDelta.y += delta.y;\r\n\t\t\tthis._pTotalDelta.z += delta.z;\r\n\t\t}\r\n\t}\r\n}",
    "import {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {SkeletonDifferenceState}\t\t\tfrom \"../../animators/states/SkeletonDifferenceState\";\r\n\r\n/**\r\n * A skeleton animation node that uses a difference input pose with a base input pose to blend a linearly interpolated output of a skeleton pose.\r\n */\r\nexport class SkeletonDifferenceNode extends AnimationNodeBase\r\n{\r\n\t/**\r\n\t * Defines a base input node to use for the blended output.\r\n\t */\r\n\tpublic baseInput:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Defines a difference input node to use for the blended output.\r\n\t */\r\n\tpublic differenceInput:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Creates a new <code>SkeletonAdditiveNode</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pStateClass = SkeletonDifferenceState;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonDifferenceState\r\n\t{\r\n\t\treturn <SkeletonDifferenceState> animator.getAnimationState(this);\r\n\t}\r\n}\r\n\r\nexport default SkeletonDifferenceNode",
    "import {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {SkeletonDirectionalState}\t\t\tfrom \"../../animators/states/SkeletonDirectionalState\";\r\n\r\n/**\r\n * A skeleton animation node that uses four directional input poses with an input direction to blend a linearly interpolated output of a skeleton pose.\r\n */\r\nexport class SkeletonDirectionalNode extends AnimationNodeBase\r\n{\r\n\t/**\r\n\t * Defines the forward configured input node to use for the blended output.\r\n\t */\r\n\tpublic forward:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Defines the backwards configured input node to use for the blended output.\r\n\t */\r\n\tpublic backward:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Defines the left configured input node to use for the blended output.\r\n\t */\r\n\tpublic left:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Defines the right configured input node to use for the blended output.\r\n\t */\r\n\tpublic right:AnimationNodeBase;\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pStateClass = SkeletonDirectionalState;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonDirectionalState\r\n\t{\r\n\t\treturn <SkeletonDirectionalState> animator.getAnimationState(this);\r\n\t}\r\n\r\n}",
    "import {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {SkeletonNaryLERPState}\t\t\tfrom \"../../animators/states/SkeletonNaryLERPState\";\r\n\r\n/**\r\n * A skeleton animation node that uses an n-dimensional array of animation node inputs to blend a lineraly interpolated output of a skeleton pose.\r\n */\r\nexport class SkeletonNaryLERPNode extends AnimationNodeBase\r\n{\r\n\tpublic _iInputs:Array<AnimationNodeBase> = new Array<AnimationNodeBase>();\r\n\r\n\tprivate _numInputs:number;\r\n\r\n\tpublic get numInputs():number\r\n\t{\r\n\t\treturn this._numInputs;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>SkeletonNaryLERPNode</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pStateClass = SkeletonNaryLERPState;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an integer representing the input index of the given skeleton animation node.\r\n\t *\r\n\t * @param input The skeleton animation node for with the input index is requested.\r\n\t */\r\n\tpublic getInputIndex(input:AnimationNodeBase):number\r\n\t{\r\n\t\treturn this._iInputs.indexOf(input);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the skeleton animation node object that resides at the given input index.\r\n\t *\r\n\t * @param index The input index for which the skeleton animation node is requested.\r\n\t */\r\n\tpublic getInputAt(index:number):AnimationNodeBase\r\n\t{\r\n\t\treturn this._iInputs[index];\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a new skeleton animation node input to the animation node.\r\n\t */\r\n\tpublic addInput(input:AnimationNodeBase):void\r\n\t{\r\n\t\tthis._iInputs[this._numInputs++] = input;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic getAnimationState(animator:AnimatorBase):SkeletonNaryLERPState\r\n\t{\r\n\t\treturn <SkeletonNaryLERPState> animator.getAnimationState(this);\r\n\t}\r\n}\r\n\r\nexport default SkeletonNaryLERPNode",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Graphics}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphics\";\r\n\r\nimport {AnimationClipNodeBase}\t\t\tfrom \"../../animators/nodes/AnimationClipNodeBase\";\r\nimport {VertexClipState}\t\t\t\t\tfrom \"../../animators/states/VertexClipState\";\r\n\r\n/**\r\n * A vertex animation node containing time-based animation data as individual geometry obejcts.\r\n */\r\nexport class VertexClipNode extends AnimationClipNodeBase\r\n{\r\n\tprivate _frames:Array<Graphics> = new Array<Graphics>();\r\n\tprivate _translations:Array<Vector3D> = new Array<Vector3D>();\r\n\r\n\t/**\r\n\t * Returns a vector of geometry frames representing the vertex values of each animation frame in the clip.\r\n\t */\r\n\tpublic get frames():Array<Graphics>\r\n\t{\r\n\t\treturn this._frames;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new <code>VertexClipNode</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pStateClass = VertexClipState;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a geometry object to the internal timeline of the animation node.\r\n\t *\r\n\t * @param geometry The geometry object to add to the timeline of the node.\r\n\t * @param duration The specified duration of the frame in milliseconds.\r\n\t * @param translation The absolute translation of the frame, used in root delta calculations for sprite movement.\r\n\t */\r\n\tpublic addFrame(geometry:Graphics, duration:number, translation:Vector3D = null):void\r\n\t{\r\n\t\tthis._frames.push(geometry);\r\n\t\tthis._pDurations.push(duration);\r\n\t\tthis._translations.push(translation || new Vector3D());\r\n\r\n\t\tthis._pNumFrames = this._pDurations.length;\r\n\r\n\t\tthis._pStitchDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateStitch():void\r\n\t{\r\n\t\tsuper._pUpdateStitch();\r\n\r\n\t\tvar i:number = this._pNumFrames - 1;\r\n\t\tvar p1:Vector3D, p2:Vector3D, delta:Vector3D;\r\n\t\twhile (i--) {\r\n\t\t\tthis._pTotalDuration += this._pDurations[i];\r\n\t\t\tp1 = this._translations[i];\r\n\t\t\tp2 = this._translations[i + 1];\r\n\t\t\tdelta = p2.subtract(p1);\r\n\t\t\tthis._pTotalDelta.x += delta.x;\r\n\t\t\tthis._pTotalDelta.y += delta.y;\r\n\t\t\tthis._pTotalDelta.z += delta.z;\r\n\t\t}\r\n\r\n\t\tif (this._pNumFrames > 1 && (this._pStitchFinalFrame || !this._pLooping)) {\r\n\t\t\tthis._pTotalDuration += this._pDurations[this._pNumFrames - 1];\r\n\t\t\tp1 = this._translations[0];\r\n\t\t\tp2 = this._translations[1];\r\n\t\t\tdelta = p2.subtract(p1);\r\n\t\t\tthis._pTotalDelta.x += delta.x;\r\n\t\t\tthis._pTotalDelta.y += delta.y;\r\n\t\t\tthis._pTotalDelta.z += delta.z;\r\n\t\t}\r\n\t}\r\n}",
    "import {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {AnimationClipNodeBase}\t\t\tfrom \"../../animators/nodes/AnimationClipNodeBase\";\r\nimport {AnimationStateBase}\t\t\t\tfrom \"../../animators/states/AnimationStateBase\";\r\nimport {AnimationStateEvent}\t\t\t\tfrom \"../../events/AnimationStateEvent\";\r\n\r\n/**\r\n *\r\n */\r\nexport class AnimationClipState extends AnimationStateBase\r\n{\r\n\tprivate _animationClipNode:AnimationClipNodeBase;\r\n\tprivate _animationStatePlaybackComplete:AnimationStateEvent;\r\n\tpublic _pBlendWeight:number;\r\n\tpublic _pCurrentFrame:number;\r\n\tpublic _pNextFrame:number;\r\n\r\n\tpublic _pOldFrame:number;\r\n\tpublic _pTimeDir:number;\r\n\tpublic _pFramesDirty:boolean = true;\r\n\r\n\t/**\r\n\t * Returns a fractional value between 0 and 1 representing the blending ratio of the current playhead position\r\n\t * between the current frame (0) and next frame (1) of the animation.\r\n\t *\r\n\t * @see #currentFrame\r\n\t * @see #nextFrame\r\n\t */\r\n\tpublic get blendWeight():number\r\n\t{\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\treturn this._pBlendWeight;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current frame of animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic get currentFrame():number\r\n\t{\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\treturn this._pCurrentFrame;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the next frame of animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic get nextFrame():number\r\n\t{\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\treturn this._pNextFrame;\r\n\t}\r\n\r\n\tconstructor(animator:AnimatorBase, animationClipNode:AnimationClipNodeBase)\r\n\t{\r\n\t\tsuper(animator, animationClipNode);\r\n\r\n\t\tthis._animationClipNode = animationClipNode;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic update(time:number):void\r\n\t{\r\n\t\tif (!this._animationClipNode.looping) {\r\n\t\t\tif (time > this._pStartTime + this._animationClipNode.totalDuration)\r\n\t\t\t\ttime = this._pStartTime + this._animationClipNode.totalDuration; else if (time < this._pStartTime)\r\n\t\t\t\ttime = this._pStartTime;\r\n\t\t}\r\n\r\n\t\tif (this._pTime == time - this._pStartTime)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic phase(value:number):void\r\n\t{\r\n\t\tvar time:number = value*this._animationClipNode.totalDuration + this._pStartTime;\r\n\r\n\t\tif (this._pTime == time - this._pStartTime)\r\n\t\t\treturn;\r\n\r\n\t\tthis._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateTime(time:number):void\r\n\t{\r\n\t\tthis._pFramesDirty = true;\r\n\r\n\t\tthis._pTimeDir = (time - this._pStartTime > this._pTime)? 1 : -1;\r\n\r\n\t\tsuper._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the nodes internal playhead to determine the current and next animation frame, and the blendWeight between the two.\r\n\t *\r\n\t * @see #currentFrame\r\n\t * @see #nextFrame\r\n\t * @see #blendWeight\r\n\t */\r\n\tpublic _pUpdateFrames():void\r\n\t{\r\n\t\tthis._pFramesDirty = false;\r\n\r\n\t\tvar looping:boolean = this._animationClipNode.looping;\r\n\t\tvar totalDuration:number = this._animationClipNode.totalDuration;\r\n\t\tvar lastFrame:number = this._animationClipNode.lastFrame;\r\n\t\tvar time:number = this._pTime;\r\n\r\n\t\t//trace(\"time\", time, totalDuration)\r\n\t\tif (looping && (time >= totalDuration || time < 0)) {\r\n\t\t\ttime %= totalDuration;\r\n\t\t\tif (time < 0)\r\n\t\t\t\ttime += totalDuration;\r\n\t\t}\r\n\r\n\t\tif (!looping && time >= totalDuration) {\r\n\t\t\tthis.notifyPlaybackComplete();\r\n\t\t\tthis._pCurrentFrame = lastFrame;\r\n\t\t\tthis._pNextFrame = lastFrame;\r\n\t\t\tthis._pBlendWeight = 0;\r\n\t\t} else if (!looping && time <= 0) {\r\n\t\t\tthis._pCurrentFrame = 0;\r\n\t\t\tthis._pNextFrame = 0;\r\n\t\t\tthis._pBlendWeight = 0;\r\n\t\t} else if (this._animationClipNode.fixedFrameRate) {\r\n\t\t\tvar t:number = time/totalDuration*lastFrame;\r\n\t\t\tthis._pCurrentFrame = Math.floor(t);\r\n\t\t\tthis._pBlendWeight = t - this._pCurrentFrame;\r\n\t\t\tthis._pNextFrame = this._pCurrentFrame + 1;\r\n\t\t} else {\r\n\t\t\tthis._pCurrentFrame = 0;\r\n\t\t\tthis._pNextFrame = 0;\r\n\r\n\t\t\tvar dur:number = 0, frameTime:number;\r\n\t\t\tvar durations:Array<number> = this._animationClipNode.durations;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tframeTime = dur;\r\n\t\t\t\tdur += durations[this._pNextFrame];\r\n\t\t\t\tthis._pCurrentFrame = this._pNextFrame++;\r\n\t\t\t} while (time > dur);\r\n\r\n\t\t\tif (this._pCurrentFrame == lastFrame) {\r\n\t\t\t\tthis._pCurrentFrame = 0;\r\n\t\t\t\tthis._pNextFrame = 1;\r\n\t\t\t}\r\n\r\n\t\t\tthis._pBlendWeight = (time - frameTime)/durations[this._pCurrentFrame];\r\n\t\t}\r\n\t}\r\n\r\n\tprivate notifyPlaybackComplete():void\r\n\t{\r\n\t\tif (this._animationStatePlaybackComplete == null)\r\n\t\t\tthis._animationStatePlaybackComplete = new AnimationStateEvent(AnimationStateEvent.PLAYBACK_COMPLETE, this._pAnimator, this, this._animationClipNode);\r\n\r\n\t\tthis._animationClipNode.dispatchEvent(this._animationStatePlaybackComplete);\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {IAnimationState}\t\t\t\t\tfrom \"../../animators/states/IAnimationState\";\r\n\r\n/**\r\n *\r\n */\r\nexport class AnimationStateBase implements IAnimationState\r\n{\r\n\tpublic _pAnimationNode:AnimationNodeBase;\r\n\tpublic _pRootDelta:Vector3D = new Vector3D();\r\n\tpublic _pPositionDeltaDirty:boolean = true;\r\n\r\n\tpublic _pTime:number;\r\n\tpublic _pStartTime:number = 0;\r\n\tpublic _pAnimator:AnimatorBase;\r\n\r\n\t/**\r\n\t * Returns a 3d vector representing the translation delta of the animating entity for the current timestep of animation\r\n\t */\r\n\tpublic get positionDelta():Vector3D\r\n\t{\r\n\t\tif (this._pPositionDeltaDirty) {\r\n\r\n\t\t\tthis._pUpdatePositionDelta();\r\n\t\t}\r\n\r\n\t\treturn this._pRootDelta;\r\n\r\n\t}\r\n\r\n\tconstructor(animator:AnimatorBase, animationNode:AnimationNodeBase)\r\n\t{\r\n\t\tthis._pAnimator = animator;\r\n\t\tthis._pAnimationNode = animationNode;\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the start time of the node to a  new value.\r\n\t *\r\n\t * @param startTime The absolute start time (in milliseconds) of the node's starting time.\r\n\t */\r\n\tpublic offset(startTime:number):void\r\n\t{\r\n\t\tthis._pStartTime = startTime;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the configuration of the node to its current state.\r\n\t *\r\n\t * @param time The absolute time (in milliseconds) of the animator's play head position.\r\n\t *\r\n\t * @see AnimatorBase#update()\r\n\t */\r\n\tpublic update(time:number):void\r\n\t{\r\n\t\tif (this._pTime == time - this._pStartTime) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._pUpdateTime(time);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the animation phase of the node.\r\n\t *\r\n\t * @param value The phase value to use. 0 represents the beginning of an animation clip, 1 represents the end.\r\n\t */\r\n\tpublic phase(value:number):void\r\n\t{\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the node's internal playhead position.\r\n\t *\r\n\t * @param time The local time (in milliseconds) of the node's playhead position.\r\n\t */\r\n\tpublic _pUpdateTime(time:number):void\r\n\t{\r\n\t\tthis._pTime = time - this._pStartTime;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the node's root delta position\r\n\t */\r\n\tpublic _pUpdatePositionDelta():void\r\n\t{\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleAccelerationNode}\t\t\tfrom \"../../animators/nodes/ParticleAccelerationNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleAccelerationState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static ACCELERATION_INDEX:number = 0;\r\n\r\n\tprivate _particleAccelerationNode:ParticleAccelerationNode;\r\n\tprivate _acceleration:Vector3D;\r\n\tprivate _halfAcceleration:Vector3D;\r\n\t\r\n\t/**\r\n\t * Defines the acceleration vector of the state, used when in global mode.\r\n\t */\r\n\tpublic get acceleration():Vector3D\r\n\t{\r\n\t\treturn this._acceleration;\r\n\t}\r\n\t\r\n\tpublic set acceleration(value:Vector3D)\r\n\t{\r\n\t\tthis._acceleration.x = value.x;\r\n\t\tthis._acceleration.y = value.y;\r\n\t\tthis._acceleration.z = value.z;\r\n\r\n\t\tthis.updateAccelerationData();\r\n\t}\r\n\t\r\n\tconstructor(animator:ParticleAnimator, particleAccelerationNode:ParticleAccelerationNode)\r\n\t{\r\n\t\tsuper(animator, particleAccelerationNode);\r\n\r\n\t\tthis._particleAccelerationNode = particleAccelerationNode;\r\n\t\tthis._acceleration = this._particleAccelerationNode._acceleration;\r\n\r\n\t\tthis.updateAccelerationData();\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleAccelerationState.ACCELERATION_INDEX);\r\n\t\t\r\n\t\tif (this._particleAccelerationNode.mode == ParticlePropertiesMode.LOCAL_STATIC)\r\n\t\t\tanimationElements.activateVertexBuffer(index, this._particleAccelerationNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\telse\r\n\t\t\tshader.setVertexConst(index, this._halfAcceleration.x, this._halfAcceleration.y, this._halfAcceleration.z);\r\n\t}\r\n\t\r\n\tprivate updateAccelerationData():void\r\n\t{\r\n\t\tif (this._particleAccelerationNode.mode == ParticlePropertiesMode.GLOBAL)\r\n\t\t\tthis._halfAcceleration = new Vector3D(this._acceleration.x/2, this._acceleration.y/2, this._acceleration.z/2);\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleBezierCurveNode}\t\t\tfrom \"../../animators/nodes/ParticleBezierCurveNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleBezierCurveState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static BEZIER_CONTROL_INDEX:number = 0;\r\n\r\n\t/** @private */\r\n\tpublic static BEZIER_END_INDEX:number = 1;\r\n\r\n\tprivate _particleBezierCurveNode:ParticleBezierCurveNode;\r\n\tprivate _controlPoint:Vector3D;\r\n\tprivate _endPoint:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the default control point of the node, used when in global mode.\r\n\t */\r\n\tpublic get controlPoint():Vector3D\r\n\t{\r\n\t\treturn this._controlPoint;\r\n\t}\r\n\r\n\tpublic set controlPoint(value:Vector3D)\r\n\t{\r\n\t\tthis._controlPoint = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the default end point of the node, used when in global mode.\r\n\t */\r\n\tpublic get endPoint():Vector3D\r\n\t{\r\n\t\treturn this._endPoint;\r\n\t}\r\n\r\n\tpublic set endPoint(value:Vector3D)\r\n\t{\r\n\t\tthis._endPoint = value;\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleBezierCurveNode:ParticleBezierCurveNode)\r\n\t{\r\n\t\tsuper(animator, particleBezierCurveNode);\r\n\r\n\t\tthis._particleBezierCurveNode = particleBezierCurveNode;\r\n\t\tthis._controlPoint = this._particleBezierCurveNode._iControlPoint;\r\n\t\tthis._endPoint = this._particleBezierCurveNode._iEndPoint;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tvar controlIndex:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleBezierCurveState.BEZIER_CONTROL_INDEX);\r\n\t\tvar endIndex:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleBezierCurveState.BEZIER_END_INDEX);\r\n\r\n\t\tif (this._particleBezierCurveNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\tanimationElements.activateVertexBuffer(controlIndex, this._particleBezierCurveNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t\tanimationElements.activateVertexBuffer(endIndex, this._particleBezierCurveNode._iDataOffset + 3, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t} else {\r\n\t\t\tshader.setVertexConst(controlIndex, this._controlPoint.x, this._controlPoint.y, this._controlPoint.z);\r\n\t\t\tshader.setVertexConst(endIndex, this._endPoint.x, this._endPoint.y, this._endPoint.z);\r\n\t\t}\r\n\t}\r\n}",
    "import {MathConsts}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/MathConsts\";\r\nimport {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\nimport {Orientation3D}\t\t\t\t\tfrom \"awayjs-core/lib/geom/Orientation3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticleBillboardNode}\t\t\tfrom \"../../animators/nodes/ParticleBillboardNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleBillboardState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static MATRIX_INDEX:number = 0;\r\n\r\n\tprivate _matrix:Matrix3D = new Matrix3D;\r\n\r\n\tprivate _billboardAxis:Vector3D;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tconstructor(animator:ParticleAnimator, particleNode:ParticleBillboardNode)\r\n\t{\r\n\t\tsuper(animator, particleNode);\r\n\r\n\t\tthis._billboardAxis = particleNode._iBillboardAxis;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tvar comps:Array<Vector3D>;\r\n\t\tif (this._billboardAxis) {\r\n\t\t\tvar pos:Vector3D = renderable.sourceEntity.sceneTransform.position;\r\n\t\t\tvar look:Vector3D = camera.sceneTransform.position.subtract(pos);\r\n\t\t\tvar right:Vector3D = look.crossProduct(this._billboardAxis);\r\n\t\t\tright.normalize();\r\n\t\t\tlook = this.billboardAxis.crossProduct(right);\r\n\t\t\tlook.normalize();\r\n\r\n\t\t\t//create a quick inverse projection matrix\r\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\r\n\t\t\tcomps = this._matrix.decompose(Orientation3D.AXIS_ANGLE);\r\n\t\t\tthis._matrix.copyColumnFrom(0, right);\r\n\t\t\tthis._matrix.copyColumnFrom(1, this.billboardAxis);\r\n\t\t\tthis._matrix.copyColumnFrom(2, look);\r\n\t\t\tthis._matrix.copyColumnFrom(3, pos);\r\n\t\t\tthis._matrix.appendRotation(-comps[1].w*MathConsts.RADIANS_TO_DEGREES, comps[1]);\r\n\t\t} else {\r\n\t\t\t//create a quick inverse projection matrix\r\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\r\n\t\t\tthis._matrix.append(camera.inverseSceneTransform);\r\n\r\n\t\t\t//decompose using axis angle rotations\r\n\t\t\tcomps = this._matrix.decompose(Orientation3D.AXIS_ANGLE);\r\n\r\n\t\t\t//recreate the matrix with just the rotation data\r\n\t\t\tthis._matrix.identity();\r\n\t\t\tthis._matrix.appendRotation(-comps[1].w*MathConsts.RADIANS_TO_DEGREES, comps[1]);\r\n\t\t}\r\n\r\n\t\t//set a new matrix transform constant\r\n\t\tshader.setVertexConstFromMatrix(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleBillboardState.MATRIX_INDEX), this._matrix);\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the billboard axis.\r\n\t */\r\n\tpublic get billboardAxis():Vector3D\r\n\t{\r\n\t\treturn this.billboardAxis;\r\n\t}\r\n\r\n\tpublic set billboardAxis(value:Vector3D)\r\n\t{\r\n\t\tthis.billboardAxis = value? value.clone() : null;\r\n\t\tif (this.billboardAxis)\r\n\t\t\tthis.billboardAxis.normalize();\r\n\t}\r\n\r\n}",
    "import {ColorTransform}\t\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleColorNode}\t\t\t\tfrom \"../../animators/nodes/ParticleColorNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n * @author ...\r\n */\r\nexport class ParticleColorState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static START_MULTIPLIER_INDEX:number = 0;\r\n\r\n\t/** @private */\r\n\tpublic static DELTA_MULTIPLIER_INDEX:number = 1;\r\n\r\n\t/** @private */\r\n\tpublic static START_OFFSET_INDEX:number = 2;\r\n\r\n\t/** @private */\r\n\tpublic static DELTA_OFFSET_INDEX:number = 3;\r\n\r\n\t/** @private */\r\n\tpublic static CYCLE_INDEX:number = 4;\r\n\r\n\tprivate _particleColorNode:ParticleColorNode;\r\n\tprivate _usesMultiplier:boolean;\r\n\tprivate _usesOffset:boolean;\r\n\tprivate _usesCycle:boolean;\r\n\tprivate _usesPhase:boolean;\r\n\tprivate _startColor:ColorTransform;\r\n\tprivate _endColor:ColorTransform;\r\n\tprivate _cycleDuration:number;\r\n\tprivate _cyclePhase:number;\r\n\tprivate _cycleData:Vector3D;\r\n\tprivate _startMultiplierData:Vector3D;\r\n\tprivate _deltaMultiplierData:Vector3D;\r\n\tprivate _startOffsetData:Vector3D;\r\n\tprivate _deltaOffsetData:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the start color transform of the state, when in global mode.\r\n\t */\r\n\tpublic get startColor():ColorTransform\r\n\t{\r\n\t\treturn this._startColor;\r\n\t}\r\n\r\n\tpublic set startColor(value:ColorTransform)\r\n\t{\r\n\t\tthis._startColor = value;\r\n\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the end color transform of the state, when in global mode.\r\n\t */\r\n\tpublic get endColor():ColorTransform\r\n\t{\r\n\t\treturn this._endColor;\r\n\t}\r\n\r\n\tpublic set endColor(value:ColorTransform)\r\n\t{\r\n\t\tthis._endColor = value;\r\n\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\r\n\t */\r\n\tpublic get cycleDuration():number\r\n\t{\r\n\t\treturn this._cycleDuration;\r\n\t}\r\n\r\n\tpublic set cycleDuration(value:number)\r\n\t{\r\n\t\tthis._cycleDuration = value;\r\n\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\r\n\t */\r\n\tpublic get cyclePhase():number\r\n\t{\r\n\t\treturn this._cyclePhase;\r\n\t}\r\n\r\n\tpublic set cyclePhase(value:number)\r\n\t{\r\n\t\tthis._cyclePhase = value;\r\n\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleColorNode:ParticleColorNode)\r\n\t{\r\n\t\tsuper(animator, particleColorNode);\r\n\r\n\t\tthis._particleColorNode = particleColorNode;\r\n\t\tthis._usesMultiplier = this._particleColorNode._iUsesMultiplier;\r\n\t\tthis._usesOffset = this._particleColorNode._iUsesOffset;\r\n\t\tthis._usesCycle = this._particleColorNode._iUsesCycle;\r\n\t\tthis._usesPhase = this._particleColorNode._iUsesPhase;\r\n\t\tthis._startColor = this._particleColorNode._iStartColor;\r\n\t\tthis._endColor = this._particleColorNode._iEndColor;\r\n\t\tthis._cycleDuration = this._particleColorNode._iCycleDuration;\r\n\t\tthis._cyclePhase = this._particleColorNode._iCyclePhase;\r\n\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (shader.usesFragmentAnimation) {\r\n\t\t\tvar dataOffset:number = this._particleColorNode._iDataOffset;\r\n\t\t\tvar index:number;\r\n\t\t\tif (this._usesCycle)\r\n\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.CYCLE_INDEX), this._cycleData.x, this._cycleData.y, this._cycleData.z, this._cycleData.w);\r\n\r\n\t\t\tif (this._usesMultiplier) {\r\n\t\t\t\tif (this._particleColorNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_MULTIPLIER_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\t\t\tdataOffset += 4;\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_MULTIPLIER_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\t\t\tdataOffset += 4;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_MULTIPLIER_INDEX), this._startMultiplierData.x, this._startMultiplierData.y, this._startMultiplierData.z, this._startMultiplierData.w);\r\n\t\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_MULTIPLIER_INDEX), this._deltaMultiplierData.x, this._deltaMultiplierData.y, this._deltaMultiplierData.z, this._deltaMultiplierData.w);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._usesOffset) {\r\n\t\t\t\tif (this._particleColorNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_OFFSET_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\t\t\tdataOffset += 4;\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_OFFSET_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.START_OFFSET_INDEX), this._startOffsetData.x, this._startOffsetData.y, this._startOffsetData.z, this._startOffsetData.w);\r\n\t\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleColorState.DELTA_OFFSET_INDEX), this._deltaOffsetData.x, this._deltaOffsetData.y, this._deltaOffsetData.z, this._deltaOffsetData.w);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateColorData():void\r\n\t{\r\n\t\tif (this._usesCycle) {\r\n\t\t\tif (this._cycleDuration <= 0)\r\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\r\n\t\t\tthis._cycleData = new Vector3D(Math.PI*2/this._cycleDuration, this._cyclePhase*Math.PI/180, 0, 0);\r\n\t\t}\r\n\t\tif (this._particleColorNode.mode == ParticlePropertiesMode.GLOBAL) {\r\n\t\t\tif (this._usesCycle) {\r\n\t\t\t\tif (this._usesMultiplier) {\r\n\t\t\t\t\tthis._startMultiplierData = new Vector3D((this._startColor.redMultiplier + this._endColor.redMultiplier)/2, (this._startColor.greenMultiplier + this._endColor.greenMultiplier)/2, (this._startColor.blueMultiplier + this._endColor.blueMultiplier)/2, (this._startColor.alphaMultiplier + this._endColor.alphaMultiplier)/2);\r\n\t\t\t\t\tthis._deltaMultiplierData = new Vector3D((this._endColor.redMultiplier - this._startColor.redMultiplier)/2, (this._endColor.greenMultiplier - this._startColor.greenMultiplier)/2, (this._endColor.blueMultiplier - this._startColor.blueMultiplier)/2, (this._endColor.alphaMultiplier - this._startColor.alphaMultiplier)/2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._usesOffset) {\r\n\t\t\t\t\tthis._startOffsetData = new Vector3D((this._startColor.redOffset + this._endColor.redOffset)/(255*2), (this._startColor.greenOffset + this._endColor.greenOffset)/(255*2), (this._startColor.blueOffset + this._endColor.blueOffset)/(255*2), (this._startColor.alphaOffset + this._endColor.alphaOffset)/(255*2));\r\n\t\t\t\t\tthis._deltaOffsetData = new Vector3D((this._endColor.redOffset - this._startColor.redOffset)/(255*2), (this._endColor.greenOffset - this._startColor.greenOffset)/(255*2), (this._endColor.blueOffset - this._startColor.blueOffset)/(255*2), (this._endColor.alphaOffset - this._startColor.alphaOffset)/(255*2));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this._usesMultiplier) {\r\n\t\t\t\t\tthis._startMultiplierData = new Vector3D(this._startColor.redMultiplier, this._startColor.greenMultiplier, this._startColor.blueMultiplier, this._startColor.alphaMultiplier);\r\n\t\t\t\t\tthis._deltaMultiplierData = new Vector3D((this._endColor.redMultiplier - this._startColor.redMultiplier), (this._endColor.greenMultiplier - this._startColor.greenMultiplier), (this._endColor.blueMultiplier - this._startColor.blueMultiplier), (this._endColor.alphaMultiplier - this._startColor.alphaMultiplier));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._usesOffset) {\r\n\t\t\t\t\tthis._startOffsetData = new Vector3D(this._startColor.redOffset/255, this._startColor.greenOffset/255, this._startColor.blueOffset/255, this._startColor.alphaOffset/255);\r\n\t\t\t\t\tthis._deltaOffsetData = new Vector3D((this._endColor.redOffset - this._startColor.redOffset)/255, (this._endColor.greenOffset - this._startColor.greenOffset)/255, (this._endColor.blueOffset - this._startColor.blueOffset )/255, (this._endColor.alphaOffset - this._startColor.alphaOffset)/255);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}",
    "import {MathConsts}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/MathConsts\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {DisplayObject}\t\t\t\t\tfrom \"awayjs-display/lib/display/DisplayObject\";\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticleAnimationData}\t\t\tfrom \"../../animators/data/ParticleAnimationData\";\r\nimport {ParticleFollowNode}\t\t\t\tfrom \"../../animators/nodes/ParticleFollowNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleFollowState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static FOLLOW_POSITION_INDEX:number = 0;\r\n\r\n\t/** @private */\r\n\tpublic static FOLLOW_ROTATION_INDEX:number = 1;\r\n\r\n\tprivate _particleFollowNode:ParticleFollowNode;\r\n\tprivate _followTarget:DisplayObject;\r\n\r\n\tprivate _targetPos:Vector3D = new Vector3D();\r\n\tprivate _targetEuler:Vector3D = new Vector3D();\r\n\tprivate _prePos:Vector3D;\r\n\tprivate _preEuler:Vector3D;\r\n\tprivate _smooth:boolean;\r\n\r\n\t//temporary vector3D for calculation\r\n\tprivate _temp:Vector3D = new Vector3D();\r\n\r\n\tconstructor(animator:ParticleAnimator, particleFollowNode:ParticleFollowNode)\r\n\t{\r\n\t\tsuper(animator, particleFollowNode, true);\r\n\r\n\t\tthis._particleFollowNode = particleFollowNode;\r\n\t\tthis._smooth = particleFollowNode._iSmooth;\r\n\t}\r\n\r\n\tpublic get followTarget():DisplayObject\r\n\t{\r\n\t\treturn this._followTarget;\r\n\t}\r\n\r\n\tpublic set followTarget(value:DisplayObject)\r\n\t{\r\n\t\tthis._followTarget = value;\r\n\t}\r\n\r\n\tpublic get smooth():boolean\r\n\t{\r\n\t\treturn this._smooth;\r\n\t}\r\n\r\n\tpublic set smooth(value:boolean)\r\n\t{\r\n\t\tthis._smooth = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (this._followTarget) {\r\n\t\t\tif (this._particleFollowNode._iUsesPosition) {\r\n\t\t\t\tthis._targetPos.x = this._followTarget.transform.position.x/renderable.sourceEntity.scaleX;\r\n\t\t\t\tthis._targetPos.y = this._followTarget.transform.position.y/renderable.sourceEntity.scaleY;\r\n\t\t\t\tthis._targetPos.z = this._followTarget.transform.position.z/renderable.sourceEntity.scaleZ;\r\n\t\t\t}\r\n\t\t\tif (this._particleFollowNode._iUsesRotation) {\r\n\t\t\t\tthis._targetEuler.x = this._followTarget.rotationX;\r\n\t\t\t\tthis._targetEuler.y = this._followTarget.rotationY;\r\n\t\t\t\tthis._targetEuler.z = this._followTarget.rotationZ;\r\n\t\t\t\tthis._targetEuler.scaleBy(MathConsts.DEGREES_TO_RADIANS);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//initialization\r\n\t\tif (!this._prePos)\r\n\t\t\tthis._prePos = this._targetPos.clone();\r\n\t\tif (!this._preEuler)\r\n\t\t\tthis._preEuler = this._targetEuler.clone();\r\n\r\n\t\tvar currentTime:number = this._pTime/1000;\r\n\t\tvar previousTime:number = animationElements.previousTime;\r\n\t\tvar deltaTime:number = currentTime - previousTime;\r\n\r\n\t\tvar needProcess:boolean = previousTime != currentTime;\r\n\r\n\t\tif (this._particleFollowNode._iUsesPosition && this._particleFollowNode._iUsesRotation) {\r\n\t\t\tif (needProcess)\r\n\t\t\t\tthis.processPositionAndRotation(currentTime, deltaTime, animationElements);\r\n\r\n\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_POSITION_INDEX), this._particleFollowNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_ROTATION_INDEX), this._particleFollowNode._iDataOffset + 3, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t} else if (this._particleFollowNode._iUsesPosition) {\r\n\t\t\tif (needProcess)\r\n\t\t\t\tthis.processPosition(currentTime, deltaTime, animationElements);\r\n\r\n\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_POSITION_INDEX), this._particleFollowNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t} else if (this._particleFollowNode._iUsesRotation) {\r\n\t\t\tif (needProcess)\r\n\t\t\t\tthis.precessRotation(currentTime, deltaTime, animationElements);\r\n\r\n\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleFollowState.FOLLOW_ROTATION_INDEX), this._particleFollowNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t}\r\n\r\n\t\tthis._prePos.copyFrom(this._targetPos);\r\n\t\tthis._targetEuler.copyFrom(this._targetEuler);\r\n\t\tanimationElements.previousTime = currentTime;\r\n\t}\r\n\r\n\tprivate processPosition(currentTime:number, deltaTime:number, animationElements:AnimationElements):void\r\n\t{\r\n\t\tvar data:Array<ParticleAnimationData> = animationElements.animationParticles;\r\n\t\tvar vertexData:Array<number> = animationElements.vertexData;\r\n\r\n\t\tvar changed:boolean = false;\r\n\t\tvar len:number = data.length;\r\n\t\tvar interpolatedPos:Vector3D;\r\n\t\tvar posVelocity:Vector3D;\r\n\t\tif (this._smooth) {\r\n\t\t\tposVelocity = this._prePos.subtract(this._targetPos);\r\n\t\t\tposVelocity.scaleBy(1/deltaTime);\r\n\t\t} else\r\n\t\t\tinterpolatedPos = this._targetPos;\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tvar k:number = (currentTime - data[i].startTime)/data[i].totalTime;\r\n\t\t\tvar t:number = (k - Math.floor(k))*data[i].totalTime;\r\n\t\t\tif (t - deltaTime <= 0) {\r\n\t\t\t\tvar inc:number = data[i].startVertexIndex*animationElements.totalLenOfOneVertex + this._particleFollowNode._iDataOffset;\r\n\r\n\t\t\t\tif (this._smooth) {\r\n\t\t\t\t\tthis._temp.copyFrom(posVelocity);\r\n\t\t\t\t\tthis._temp.scaleBy(t);\r\n\t\t\t\t\tinterpolatedPos = this._targetPos.add(this._temp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (vertexData[inc] != interpolatedPos.x || vertexData[inc + 1] != interpolatedPos.y || vertexData[inc + 2] != interpolatedPos.z) {\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t\tfor (var j:number = 0; j < data[i].numVertices; j++) {\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.x;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.y;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.z;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed)\r\n\t\t\tanimationElements.invalidateBuffer();\r\n\r\n\t}\r\n\r\n\tprivate precessRotation(currentTime:number, deltaTime:number, animationElements:AnimationElements):void\r\n\t{\r\n\t\tvar data:Array<ParticleAnimationData> = animationElements.animationParticles;\r\n\t\tvar vertexData:Array<number> = animationElements.vertexData;\r\n\r\n\t\tvar changed:boolean = false;\r\n\t\tvar len:number = data.length;\r\n\r\n\t\tvar interpolatedRotation:Vector3D;\r\n\t\tvar rotationVelocity:Vector3D;\r\n\r\n\t\tif (this._smooth) {\r\n\t\t\trotationVelocity = this._preEuler.subtract(this._targetEuler);\r\n\t\t\trotationVelocity.scaleBy(1/deltaTime);\r\n\t\t} else\r\n\t\t\tinterpolatedRotation = this._targetEuler;\r\n\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tvar k:number = (currentTime - data[i].startTime)/data[i].totalTime;\r\n\t\t\tvar t:number = (k - Math.floor(k))*data[i].totalTime;\r\n\t\t\tif (t - deltaTime <= 0) {\r\n\t\t\t\tvar inc:number = data[i].startVertexIndex*animationElements.totalLenOfOneVertex + this._particleFollowNode._iDataOffset;\r\n\r\n\t\t\t\tif (this._smooth) {\r\n\t\t\t\t\tthis._temp.copyFrom(rotationVelocity);\r\n\t\t\t\t\tthis._temp.scaleBy(t);\r\n\t\t\t\t\tinterpolatedRotation = this._targetEuler.add(this._temp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (vertexData[inc] != interpolatedRotation.x || vertexData[inc + 1] != interpolatedRotation.y || vertexData[inc + 2] != interpolatedRotation.z) {\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t\tfor (var j:number = 0; j < data[i].numVertices; j++) {\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.x;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.y;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.z;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed)\r\n\t\t\tanimationElements.invalidateBuffer();\r\n\r\n\t}\r\n\r\n\tprivate processPositionAndRotation(currentTime:number, deltaTime:number, animationElements:AnimationElements):void\r\n\t{\r\n\t\tvar data:Array<ParticleAnimationData> = animationElements.animationParticles;\r\n\t\tvar vertexData:Array<number> = animationElements.vertexData;\r\n\r\n\t\tvar changed:boolean = false;\r\n\t\tvar len:number = data.length;\r\n\r\n\t\tvar interpolatedPos:Vector3D;\r\n\t\tvar interpolatedRotation:Vector3D;\r\n\r\n\t\tvar posVelocity:Vector3D;\r\n\t\tvar rotationVelocity:Vector3D;\r\n\t\tif (this._smooth) {\r\n\t\t\tposVelocity = this._prePos.subtract(this._targetPos);\r\n\t\t\tposVelocity.scaleBy(1/deltaTime);\r\n\t\t\trotationVelocity = this._preEuler.subtract(this._targetEuler);\r\n\t\t\trotationVelocity.scaleBy(1/deltaTime);\r\n\t\t} else {\r\n\t\t\tinterpolatedPos = this._targetPos;\r\n\t\t\tinterpolatedRotation = this._targetEuler;\r\n\t\t}\r\n\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tvar k:number = (currentTime - data[i].startTime)/data[i].totalTime;\r\n\t\t\tvar t:number = (k - Math.floor(k))*data[i].totalTime;\r\n\t\t\tif (t - deltaTime <= 0) {\r\n\t\t\t\tvar inc:number = data[i].startVertexIndex*animationElements.totalLenOfOneVertex + this._particleFollowNode._iDataOffset;\r\n\t\t\t\tif (this._smooth) {\r\n\t\t\t\t\tthis._temp.copyFrom(posVelocity);\r\n\t\t\t\t\tthis._temp.scaleBy(t);\r\n\t\t\t\t\tinterpolatedPos = this._targetPos.add(this._temp);\r\n\r\n\t\t\t\t\tthis._temp.copyFrom(rotationVelocity);\r\n\t\t\t\t\tthis._temp.scaleBy(t);\r\n\t\t\t\t\tinterpolatedRotation = this._targetEuler.add(this._temp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (vertexData[inc] != interpolatedPos.x || vertexData[inc + 1] != interpolatedPos.y || vertexData[inc + 2] != interpolatedPos.z || vertexData[inc + 3] != interpolatedRotation.x || vertexData[inc + 4] != interpolatedRotation.y || vertexData[inc + 5] != interpolatedRotation.z) {\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t\tfor (var j:number = 0; j < data[i].numVertices; j++) {\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.x;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.y;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedPos.z;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.x;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.y;\r\n\t\t\t\t\t\tvertexData[inc++] = interpolatedRotation.z;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed)\r\n\t\t\tanimationElements.invalidateBuffer();\r\n\t}\r\n\r\n}",
    "import {ColorTransform}\t\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleInitialColorNode}\t\t\tfrom \"../../animators/nodes/ParticleInitialColorNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n*\r\n*/\r\nexport class ParticleInitialColorState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static MULTIPLIER_INDEX:number = 0;\r\n\t/** @private */\r\n\tpublic static OFFSET_INDEX:number = 1;\r\n\r\n\tprivate _particleInitialColorNode:ParticleInitialColorNode;\r\n\tprivate _usesMultiplier:boolean;\r\n\tprivate _usesOffset:boolean;\r\n\tprivate _initialColor:ColorTransform;\r\n\tprivate _multiplierData:Vector3D;\r\n\tprivate _offsetData:Vector3D;\r\n\r\n\tconstructor(animator:ParticleAnimator, particleInitialColorNode:ParticleInitialColorNode)\r\n\t{\r\n\t\tsuper(animator, particleInitialColorNode);\r\n\r\n\t\tthis._particleInitialColorNode = particleInitialColorNode;\r\n\t\tthis._usesMultiplier = particleInitialColorNode._iUsesMultiplier;\r\n\t\tthis._usesOffset = particleInitialColorNode._iUsesOffset;\r\n\t\tthis._initialColor = particleInitialColorNode._iInitialColor;\r\n\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the initial color transform of the state, when in global mode.\r\n\t */\r\n\tpublic get initialColor():ColorTransform\r\n\t{\r\n\t\treturn this._initialColor;\r\n\t}\r\n\r\n\tpublic set initialColor(value:ColorTransform)\r\n\t{\r\n\t\tthis._initialColor = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (shader.usesFragmentAnimation) {\r\n\t\t\tvar index:number;\r\n\t\t\tif (this._particleInitialColorNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\t\tvar dataOffset:number = this._particleInitialColorNode._iDataOffset;\r\n\t\t\t\tif (this._usesMultiplier) {\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.MULTIPLIER_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\t\t\tdataOffset += 4;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._usesOffset)\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.OFFSET_INDEX), dataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\t} else {\r\n\t\t\t\tif (this._usesMultiplier)\r\n\t\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.MULTIPLIER_INDEX), this._multiplierData.x, this._multiplierData.y, this._multiplierData.z, this._multiplierData.w);\r\n\t\t\t\tif (this._usesOffset)\r\n\t\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleInitialColorState.OFFSET_INDEX), this._offsetData.x, this._offsetData.y, this._offsetData.z, this._offsetData.w);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateColorData():void\r\n\t{\r\n\t\tif (this._particleInitialColorNode.mode == ParticlePropertiesMode.GLOBAL) {\r\n\t\t\tif (this._usesMultiplier)\r\n\t\t\t\tthis._multiplierData = new Vector3D(this._initialColor.redMultiplier, this._initialColor.greenMultiplier, this._initialColor.blueMultiplier, this._initialColor.alphaMultiplier);\r\n\t\t\tif (this._usesOffset)\r\n\t\t\t\tthis._offsetData = new Vector3D(this._initialColor.redOffset/255, this._initialColor.greenOffset/255, this._initialColor.blueOffset/255, this._initialColor.alphaOffset/255);\r\n\t\t}\r\n\t}\r\n\r\n}",
    "import {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleOrbitNode}\t\t\t\tfrom \"../../animators/nodes/ParticleOrbitNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleOrbitState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static ORBIT_INDEX:number = 0;\r\n\r\n\t/** @private */\r\n\tpublic static EULERS_INDEX:number = 1;\r\n\r\n\tprivate _particleOrbitNode:ParticleOrbitNode;\r\n\tprivate _usesEulers:boolean;\r\n\tprivate _usesCycle:boolean;\r\n\tprivate _usesPhase:boolean;\r\n\tprivate _radius:number;\r\n\tprivate _cycleDuration:number;\r\n\tprivate _cyclePhase:number;\r\n\tprivate _eulers:Vector3D;\r\n\tprivate _orbitData:Vector3D;\r\n\tprivate _eulersMatrix:Matrix3D;\r\n\r\n\t/**\r\n\t * Defines the radius of the orbit when in global mode. Defaults to 100.\r\n\t */\r\n\tpublic get radius():number\r\n\t{\r\n\t\treturn this._radius;\r\n\t}\r\n\r\n\tpublic set radius(value:number)\r\n\t{\r\n\t\tthis._radius = value;\r\n\r\n\t\tthis.updateOrbitData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the duration of the orbit in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\r\n\t */\r\n\tpublic get cycleDuration():number\r\n\t{\r\n\t\treturn this._cycleDuration;\r\n\t}\r\n\r\n\tpublic set cycleDuration(value:number)\r\n\t{\r\n\t\tthis._cycleDuration = value;\r\n\r\n\t\tthis.updateOrbitData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the phase of the orbit in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\r\n\t */\r\n\tpublic get cyclePhase():number\r\n\t{\r\n\t\treturn this._cyclePhase;\r\n\t}\r\n\r\n\tpublic set cyclePhase(value:number)\r\n\t{\r\n\t\tthis._cyclePhase = value;\r\n\r\n\t\tthis.updateOrbitData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the euler rotation in degrees, applied to the orientation of the orbit when in global mode.\r\n\t */\r\n\tpublic get eulers():Vector3D\r\n\t{\r\n\t\treturn this._eulers;\r\n\t}\r\n\r\n\tpublic set eulers(value:Vector3D)\r\n\t{\r\n\t\tthis._eulers = value;\r\n\r\n\t\tthis.updateOrbitData();\r\n\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleOrbitNode:ParticleOrbitNode)\r\n\t{\r\n\t\tsuper(animator, particleOrbitNode);\r\n\r\n\t\tthis._particleOrbitNode = particleOrbitNode;\r\n\t\tthis._usesEulers = this._particleOrbitNode._iUsesEulers;\r\n\t\tthis._usesCycle = this._particleOrbitNode._iUsesCycle;\r\n\t\tthis._usesPhase = this._particleOrbitNode._iUsesPhase;\r\n\t\tthis._eulers = this._particleOrbitNode._iEulers;\r\n\t\tthis._radius = this._particleOrbitNode._iRadius;\r\n\t\tthis._cycleDuration = this._particleOrbitNode._iCycleDuration;\r\n\t\tthis._cyclePhase = this._particleOrbitNode._iCyclePhase;\r\n\t\tthis.updateOrbitData();\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleOrbitState.ORBIT_INDEX);\r\n\r\n\t\tif (this._particleOrbitNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\tif (this._usesPhase)\r\n\t\t\t\tanimationElements.activateVertexBuffer(index, this._particleOrbitNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\telse\r\n\t\t\t\tanimationElements.activateVertexBuffer(index, this._particleOrbitNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t} else\r\n\t\t\tshader.setVertexConst(index, this._orbitData.x, this._orbitData.y, this._orbitData.z, this._orbitData.w);\r\n\r\n\t\tif (this._usesEulers)\r\n\t\t\tshader.setVertexConstFromMatrix(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleOrbitState.EULERS_INDEX), this._eulersMatrix);\r\n\t}\r\n\r\n\tprivate updateOrbitData():void\r\n\t{\r\n\t\tif (this._usesEulers) {\r\n\t\t\tthis._eulersMatrix = new Matrix3D();\r\n\t\t\tthis._eulersMatrix.appendRotation(this._eulers.x, Vector3D.X_AXIS);\r\n\t\t\tthis._eulersMatrix.appendRotation(this._eulers.y, Vector3D.Y_AXIS);\r\n\t\t\tthis._eulersMatrix.appendRotation(this._eulers.z, Vector3D.Z_AXIS);\r\n\t\t}\r\n\t\tif (this._particleOrbitNode.mode == ParticlePropertiesMode.GLOBAL) {\r\n\t\t\tthis._orbitData = new Vector3D(this._radius, 0, this._radius*Math.PI*2, this._cyclePhase*Math.PI/180);\r\n\t\t\tif (this._usesCycle) {\r\n\t\t\t\tif (this._cycleDuration <= 0)\r\n\t\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\r\n\t\t\t\tthis._orbitData.y = Math.PI*2/this._cycleDuration;\r\n\t\t\t} else\r\n\t\t\t\tthis._orbitData.y = Math.PI*2;\r\n\t\t}\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleOscillatorNode}\t\t\tfrom \"../../animators/nodes/ParticleOscillatorNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleOscillatorState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static OSCILLATOR_INDEX:number = 0;\r\n\r\n\tprivate _particleOscillatorNode:ParticleOscillatorNode;\r\n\tprivate _oscillator:Vector3D;\r\n\tprivate _oscillatorData:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the default oscillator axis (x, y, z) and cycleDuration (w) of the state, used when in global mode.\r\n\t */\r\n\tpublic get oscillator():Vector3D\r\n\t{\r\n\t\treturn this._oscillator;\r\n\t}\r\n\r\n\tpublic set oscillator(value:Vector3D)\r\n\t{\r\n\t\tthis._oscillator = value;\r\n\r\n\t\tthis.updateOscillatorData();\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleOscillatorNode:ParticleOscillatorNode)\r\n\t{\r\n\t\tsuper(animator, particleOscillatorNode);\r\n\r\n\t\tthis._particleOscillatorNode = particleOscillatorNode;\r\n\t\tthis._oscillator = this._particleOscillatorNode._iOscillator;\r\n\r\n\t\tthis.updateOscillatorData();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleOscillatorState.OSCILLATOR_INDEX);\r\n\r\n\t\tif (this._particleOscillatorNode.mode == ParticlePropertiesMode.LOCAL_STATIC)\r\n\t\t\tanimationElements.activateVertexBuffer(index, this._particleOscillatorNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\telse\r\n\t\t\tshader.setVertexConst(index, this._oscillatorData.x, this._oscillatorData.y, this._oscillatorData.z, this._oscillatorData.w);\r\n\t}\r\n\r\n\tprivate updateOscillatorData():void\r\n\t{\r\n\t\tif (this._particleOscillatorNode.mode == ParticlePropertiesMode.GLOBAL) {\r\n\t\t\tif (this._oscillator.w <= 0)\r\n\t\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\r\n\r\n\t\t\tif (this._oscillatorData == null)\r\n\t\t\t\tthis._oscillatorData = new Vector3D();\r\n\r\n\t\t\tthis._oscillatorData.x = this._oscillator.x;\r\n\t\t\tthis._oscillatorData.y = this._oscillator.y;\r\n\t\t\tthis._oscillatorData.z = this._oscillator.z;\r\n\t\t\tthis._oscillatorData.w = Math.PI*2/this._oscillator.w;\r\n\t\t}\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticlePositionNode}\t\t\t\tfrom \"../../animators/nodes/ParticlePositionNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n * @author ...\r\n */\r\nexport class ParticlePositionState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static POSITION_INDEX:number = 0;\r\n\r\n\tprivate _particlePositionNode:ParticlePositionNode;\r\n\tprivate _position:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the position of the particle when in global mode. Defaults to 0,0,0.\r\n\t */\r\n\tpublic get position():Vector3D\r\n\t{\r\n\t\treturn this._position;\r\n\t}\r\n\r\n\tpublic set position(value:Vector3D)\r\n\t{\r\n\t\tthis._position = value;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic getPositions():Array<Vector3D>\r\n\t{\r\n\t\treturn this._pDynamicProperties;\r\n\t}\r\n\r\n\tpublic setPositions(value:Array<Vector3D>):void\r\n\t{\r\n\t\tthis._pDynamicProperties = value;\r\n\r\n\t\tthis._pDynamicPropertiesDirty = new Object();\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particlePositionNode:ParticlePositionNode)\r\n\t{\r\n\t\tsuper(animator, particlePositionNode);\r\n\r\n\t\tthis._particlePositionNode = particlePositionNode;\r\n\t\tthis._position = this._particlePositionNode._iPosition;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (this._particlePositionNode.mode == ParticlePropertiesMode.LOCAL_DYNAMIC && !this._pDynamicPropertiesDirty[animationElements._iUniqueId])\r\n\t\t\tthis._pUpdateDynamicProperties(animationElements);\r\n\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticlePositionState.POSITION_INDEX);\r\n\r\n\t\tif (this._particlePositionNode.mode == ParticlePropertiesMode.GLOBAL)\r\n\t\t\tshader.setVertexConst(index, this._position.x, this._position.y, this._position.z);\r\n\t\telse\r\n\t\t\tanimationElements.activateVertexBuffer(index, this._particlePositionNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t}\r\n}",
    "import {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleRotateToHeadingState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static MATRIX_INDEX:number = 0;\r\n\r\n\tprivate _matrix:Matrix3D = new Matrix3D();\r\n\r\n\tconstructor(animator:ParticleAnimator, particleNode:ParticleNodeBase)\r\n\t{\r\n\t\tsuper(animator, particleNode);\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif ((<ParticleAnimationSet> this._pParticleAnimator.animationSet).hasBillboard) {\r\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\r\n\t\t\tthis._matrix.append(camera.inverseSceneTransform);\r\n\t\t\tshader.setVertexConstFromMatrix(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleRotateToHeadingState.MATRIX_INDEX), this._matrix);\r\n\t\t}\r\n\t}\r\n\r\n}",
    "import {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {ParticleAnimationSet}\t\t\t\tfrom \"../../animators/ParticleAnimationSet\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleRotateToPositionNode}\t\tfrom \"../../animators/nodes/ParticleRotateToPositionNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleRotateToPositionState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static MATRIX_INDEX:number = 0;\r\n\t/** @private */\r\n\tpublic static POSITION_INDEX:number = 1;\r\n\r\n\tprivate _particleRotateToPositionNode:ParticleRotateToPositionNode;\r\n\tprivate _position:Vector3D;\r\n\tprivate _matrix:Matrix3D = new Matrix3D();\r\n\tprivate _offset:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the position of the point the particle will rotate to face when in global mode. Defaults to 0,0,0.\r\n\t */\r\n\tpublic get position():Vector3D\r\n\t{\r\n\t\treturn this._position;\r\n\t}\r\n\r\n\tpublic set position(value:Vector3D)\r\n\t{\r\n\t\tthis._position = value;\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleRotateToPositionNode:ParticleRotateToPositionNode)\r\n\t{\r\n\t\tsuper(animator, particleRotateToPositionNode);\r\n\r\n\t\tthis._particleRotateToPositionNode = particleRotateToPositionNode;\r\n\t\tthis._position = this._particleRotateToPositionNode._iPosition;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleRotateToPositionState.POSITION_INDEX);\r\n\r\n\t\tif ((<ParticleAnimationSet> this._pParticleAnimator.animationSet).hasBillboard) {\r\n\t\t\tthis._matrix.copyFrom(renderable.sourceEntity.sceneTransform);\r\n\t\t\tthis._matrix.append(camera.inverseSceneTransform);\r\n\t\t\tshader.setVertexConstFromMatrix(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleRotateToPositionState.MATRIX_INDEX), this._matrix);\r\n\t\t}\r\n\r\n\t\tif (this._particleRotateToPositionNode.mode == ParticlePropertiesMode.GLOBAL) {\r\n\t\t\tthis._offset = renderable.sourceEntity.inverseSceneTransform.transformVector(this._position);\r\n\t\t\tshader.setVertexConst(index, this._offset.x, this._offset.y, this._offset.z);\r\n\t\t} else\r\n\t\t\tanimationElements.activateVertexBuffer(index, this._particleRotateToPositionNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\r\n\t}\r\n\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleRotationalVelocityNode}\tfrom \"../../animators/nodes/ParticleRotationalVelocityNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleRotationalVelocityState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static ROTATIONALVELOCITY_INDEX:number = 0;\r\n\r\n\tprivate _particleRotationalVelocityNode:ParticleRotationalVelocityNode;\r\n\tprivate _rotationalVelocityData:Vector3D;\r\n\tprivate _rotationalVelocity:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the default rotationalVelocity of the state, used when in global mode.\r\n\t */\r\n\tpublic get rotationalVelocity():Vector3D\r\n\t{\r\n\t\treturn this._rotationalVelocity;\r\n\t}\r\n\r\n\tpublic set rotationalVelocity(value:Vector3D)\r\n\t{\r\n\t\tthis._rotationalVelocity = value;\r\n\r\n\t\tthis.updateRotationalVelocityData();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic getRotationalVelocities():Array<Vector3D>\r\n\t{\r\n\t\treturn this._pDynamicProperties;\r\n\t}\r\n\r\n\tpublic setRotationalVelocities(value:Array<Vector3D>):void\r\n\t{\r\n\t\tthis._pDynamicProperties = value;\r\n\r\n\t\tthis._pDynamicPropertiesDirty = new Object();\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleRotationNode:ParticleRotationalVelocityNode)\r\n\t{\r\n\t\tsuper(animator, particleRotationNode);\r\n\r\n\t\tthis._particleRotationalVelocityNode = particleRotationNode;\r\n\t\tthis._rotationalVelocity = this._particleRotationalVelocityNode._iRotationalVelocity;\r\n\r\n\t\tthis.updateRotationalVelocityData();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (this._particleRotationalVelocityNode.mode == ParticlePropertiesMode.LOCAL_DYNAMIC && !this._pDynamicPropertiesDirty[animationElements._iUniqueId])\r\n\t\t\tthis._pUpdateDynamicProperties(animationElements);\r\n\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleRotationalVelocityState.ROTATIONALVELOCITY_INDEX);\r\n\r\n\t\tif (this._particleRotationalVelocityNode.mode == ParticlePropertiesMode.GLOBAL)\r\n\t\t\tshader.setVertexConst(index, this._rotationalVelocityData.x, this._rotationalVelocityData.y, this._rotationalVelocityData.z, this._rotationalVelocityData.w);\r\n\t\telse\r\n\t\t\tanimationElements.activateVertexBuffer(index, this._particleRotationalVelocityNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t}\r\n\r\n\tprivate updateRotationalVelocityData():void\r\n\t{\r\n\t\tif (this._particleRotationalVelocityNode.mode == ParticlePropertiesMode.GLOBAL) {\r\n\t\t\tif (this._rotationalVelocity.w <= 0)\r\n\t\t\t\tthrow(new Error(\"the cycle duration must greater than zero\"));\r\n\t\t\tvar rotation:Vector3D = this._rotationalVelocity.clone();\r\n\r\n\t\t\tif (rotation.length <= 0)\r\n\t\t\t\trotation.z = 1; //set the default direction\r\n\t\t\telse\r\n\t\t\t\trotation.normalize();\r\n\t\t\t// w is used as angle/2 in agal\r\n\t\t\tthis._rotationalVelocityData = new Vector3D(rotation.x, rotation.y, rotation.z, Math.PI/rotation.w);\r\n\t\t}\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleScaleNode}\t\t\t\tfrom \"../../animators/nodes/ParticleScaleNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleScaleState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static SCALE_INDEX:number = 0;\r\n\r\n\tprivate _particleScaleNode:ParticleScaleNode;\r\n\tprivate _usesCycle:boolean;\r\n\tprivate _usesPhase:boolean;\r\n\tprivate _minScale:number;\r\n\tprivate _maxScale:number;\r\n\tprivate _cycleDuration:number;\r\n\tprivate _cyclePhase:number;\r\n\tprivate _scaleData:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the end scale of the state, when in global mode. Defaults to 1.\r\n\t */\r\n\tpublic get minScale():number\r\n\t{\r\n\t\treturn this._minScale;\r\n\t}\r\n\r\n\tpublic set minScale(value:number)\r\n\t{\r\n\t\tthis._minScale = value;\r\n\r\n\t\tthis.updateScaleData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the end scale of the state, when in global mode. Defaults to 1.\r\n\t */\r\n\tpublic get maxScale():number\r\n\t{\r\n\t\treturn this._maxScale;\r\n\t}\r\n\r\n\tpublic set maxScale(value:number)\r\n\t{\r\n\t\tthis._maxScale = value;\r\n\r\n\t\tthis.updateScaleData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the duration of the animation in seconds, used as a period independent of particle duration when in global mode. Defaults to 1.\r\n\t */\r\n\tpublic get cycleDuration():number\r\n\t{\r\n\t\treturn this._cycleDuration;\r\n\t}\r\n\r\n\tpublic set cycleDuration(value:number)\r\n\t{\r\n\t\tthis._cycleDuration = value;\r\n\r\n\t\tthis.updateScaleData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the phase of the cycle in degrees, used as the starting offset of the cycle when in global mode. Defaults to 0.\r\n\t */\r\n\tpublic get cyclePhase():number\r\n\t{\r\n\t\treturn this._cyclePhase;\r\n\t}\r\n\r\n\tpublic set cyclePhase(value:number)\r\n\t{\r\n\t\tthis._cyclePhase = value;\r\n\r\n\t\tthis.updateScaleData();\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleScaleNode:ParticleScaleNode)\r\n\t{\r\n\t\tsuper(animator, particleScaleNode);\r\n\r\n\t\tthis._particleScaleNode = particleScaleNode;\r\n\t\tthis._usesCycle = this._particleScaleNode._iUsesCycle;\r\n\t\tthis._usesPhase = this._particleScaleNode._iUsesPhase;\r\n\t\tthis._minScale = this._particleScaleNode._iMinScale;\r\n\t\tthis._maxScale = this._particleScaleNode._iMaxScale;\r\n\t\tthis._cycleDuration = this._particleScaleNode._iCycleDuration;\r\n\t\tthis._cyclePhase = this._particleScaleNode._iCyclePhase;\r\n\r\n\t\tthis.updateScaleData();\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleScaleState.SCALE_INDEX);\r\n\r\n\t\tif (this._particleScaleNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\tif (this._usesCycle) {\r\n\t\t\t\tif (this._usesPhase)\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(index, this._particleScaleNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\t\t\t\telse\r\n\t\t\t\t\tanimationElements.activateVertexBuffer(index, this._particleScaleNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t\t} else\r\n\t\t\t\tanimationElements.activateVertexBuffer(index, this._particleScaleNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_2);\r\n\t\t} else\r\n\t\t\tshader.setVertexConst(index, this._scaleData.x, this._scaleData.y, this._scaleData.z, this._scaleData.w);\r\n\t}\r\n\r\n\tprivate updateScaleData():void\r\n\t{\r\n\t\tif (this._particleScaleNode.mode == ParticlePropertiesMode.GLOBAL) {\r\n\t\t\tif (this._usesCycle) {\r\n\t\t\t\tif (this._cycleDuration <= 0)\r\n\t\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\r\n\t\t\t\tthis._scaleData = new Vector3D((this._minScale + this._maxScale)/2, Math.abs(this._minScale - this._maxScale)/2, Math.PI*2/this._cycleDuration, this._cyclePhase*Math.PI/180);\r\n\t\t\t} else\r\n\t\t\t\tthis._scaleData = new Vector3D(this._minScale, this._maxScale - this._minScale, 0, 0);\r\n\t\t}\r\n\t}\r\n}",
    "import {ColorTransform}\t\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ColorSegmentPoint}\t\t\t\tfrom \"../../animators/data/ColorSegmentPoint\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleSegmentedColorNode}\t\tfrom \"../../animators/nodes/ParticleSegmentedColorNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n *\r\n */\r\nexport class ParticleSegmentedColorState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static START_MULTIPLIER_INDEX:number = 0;\r\n\r\n\t/** @private */\r\n\tpublic static START_OFFSET_INDEX:number = 1;\r\n\r\n\t/** @private */\r\n\tpublic static TIME_DATA_INDEX:number = 2;\r\n\r\n\tprivate _usesMultiplier:boolean;\r\n\tprivate _usesOffset:boolean;\r\n\tprivate _startColor:ColorTransform;\r\n\tprivate _endColor:ColorTransform;\r\n\tprivate _segmentPoints:Array<ColorSegmentPoint>;\r\n\tprivate _numSegmentPoint:number;\r\n\r\n\tprivate _timeLifeData:Float32Array;\r\n\tprivate _multiplierData:Float32Array;\r\n\tprivate _offsetData:Float32Array;\r\n\r\n\t/**\r\n\t * Defines the start color transform of the state, when in global mode.\r\n\t */\r\n\tpublic get startColor():ColorTransform\r\n\t{\r\n\t\treturn this._startColor;\r\n\t}\r\n\r\n\tpublic set startColor(value:ColorTransform)\r\n\t{\r\n\t\tthis._startColor = value;\r\n\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the end color transform of the state, when in global mode.\r\n\t */\r\n\tpublic get endColor():ColorTransform\r\n\t{\r\n\t\treturn this._endColor;\r\n\t}\r\n\r\n\tpublic set endColor(value:ColorTransform)\r\n\t{\r\n\t\tthis._endColor = value;\r\n\t\t\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the number of segments.\r\n\t */\r\n\tpublic get numSegmentPoint():number\r\n\t{\r\n\t\treturn this._numSegmentPoint;\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the key points of color\r\n\t */\r\n\tpublic get segmentPoints():Array<ColorSegmentPoint>\r\n\t{\r\n\t\treturn this._segmentPoints;\r\n\t}\r\n\r\n\tpublic set segmentPoints(value:Array<ColorSegmentPoint>)\r\n\t{\r\n\t\tthis._segmentPoints = value;\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\tpublic get usesMultiplier():boolean\r\n\t{\r\n\t\treturn this._usesMultiplier;\r\n\t}\r\n\r\n\tpublic get usesOffset():boolean\r\n\t{\r\n\t\treturn this._usesOffset;\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleSegmentedColorNode:ParticleSegmentedColorNode)\r\n\t{\r\n\t\tsuper(animator, particleSegmentedColorNode);\r\n\r\n\t\tthis._usesMultiplier = particleSegmentedColorNode._iUsesMultiplier;\r\n\t\tthis._usesOffset = particleSegmentedColorNode._iUsesOffset;\r\n\t\tthis._startColor = particleSegmentedColorNode._iStartColor;\r\n\t\tthis._endColor = particleSegmentedColorNode._iEndColor;\r\n\t\tthis._segmentPoints = particleSegmentedColorNode._iSegmentPoints;\r\n\t\tthis._numSegmentPoint = particleSegmentedColorNode._iNumSegmentPoint;\r\n\t\tthis.updateColorData();\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (shader.usesFragmentAnimation) {\r\n\t\t\tif (this._numSegmentPoint > 0)\r\n\t\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.TIME_DATA_INDEX), this._timeLifeData[0], this._timeLifeData[1], this._timeLifeData[2], this._timeLifeData[3]);\r\n\t\t\tif (this._usesMultiplier)\r\n\t\t\t\tshader.setVertexConstFromArray(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_MULTIPLIER_INDEX), this._multiplierData);\r\n\t\t\tif (this._usesOffset)\r\n\t\t\t\tshader.setVertexConstFromArray(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_OFFSET_INDEX), this._offsetData);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateColorData():void\r\n\t{\r\n\t\tthis._timeLifeData = new Float32Array(4);\r\n\t\tthis._multiplierData = new Float32Array(4*(this._numSegmentPoint + 1));\r\n\t\tthis._offsetData = new Float32Array(4*(this._numSegmentPoint + 1));\r\n\r\n\t\t//cut off the time data\r\n\t\tvar i:number;\r\n\t\tvar j:number = 0;\r\n\t\tvar count:number = this._numSegmentPoint > 3? 3 : this._numSegmentPoint;\r\n\t\tfor (i = 0; i < count; i++) {\r\n\t\t\tif (i == 0)\r\n\t\t\t\tthis._timeLifeData[j++] = this._segmentPoints[i].life;\r\n\t\t\telse\r\n\t\t\t\tthis._timeLifeData[j++] = this._segmentPoints[i].life - this._segmentPoints[i - 1].life;\r\n\t\t}\r\n\t\ti = count;\r\n\t\tif (this._numSegmentPoint == 0)\r\n\t\t\tthis._timeLifeData[j++] = 1;\r\n\t\telse\r\n\t\t\tthis._timeLifeData[j++] = 1 - this._segmentPoints[i - 1].life;\r\n\r\n\t\tif (this._usesMultiplier) {\r\n\t\t\tj = 0;\r\n\t\t\tthis._multiplierData[j++] = this._startColor.redMultiplier;\r\n\t\t\tthis._multiplierData[j++] = this._startColor.greenMultiplier;\r\n\t\t\tthis._multiplierData[j++] = this._startColor.blueMultiplier;\r\n\t\t\tthis._multiplierData[j++] = this._startColor.alphaMultiplier;\r\n\t\t\tfor (i = 0; i < this._numSegmentPoint; i++) {\r\n\t\t\t\tif (i == 0) {\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.redMultiplier - this._startColor.redMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.greenMultiplier - this._startColor.greenMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.blueMultiplier - this._startColor.blueMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.alphaMultiplier - this._startColor.alphaMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t\tthis._multiplierData[j++] = (this._segmentPoints[i].color.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier)/this._timeLifeData[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ti = this._numSegmentPoint;\r\n\t\t\tif (this._numSegmentPoint == 0) {\r\n\t\t\t\tthis._multiplierData[j++] = this._endColor.redMultiplier - this._startColor.redMultiplier;\r\n\t\t\t\tthis._multiplierData[j++] = this._endColor.greenMultiplier - this._startColor.greenMultiplier;\r\n\t\t\t\tthis._multiplierData[j++] = this._endColor.blueMultiplier - this._startColor.blueMultiplier;\r\n\t\t\t\tthis._multiplierData[j++] = this._endColor.alphaMultiplier - this._startColor.alphaMultiplier;\r\n\t\t\t} else {\r\n\t\t\t\tthis._multiplierData[j++] = (this._endColor.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier)/this._timeLifeData[i];\r\n\t\t\t\tthis._multiplierData[j++] = (this._endColor.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier)/this._timeLifeData[i];\r\n\t\t\t\tthis._multiplierData[j++] = (this._endColor.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier)/this._timeLifeData[i];\r\n\t\t\t\tthis._multiplierData[j++] = (this._endColor.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier)/this._timeLifeData[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._usesOffset) {\r\n\t\t\tj = 0;\r\n\t\t\tthis._offsetData[j++] = this._startColor.redOffset/255;\r\n\t\t\tthis._offsetData[j++] = this._startColor.greenOffset/255;\r\n\t\t\tthis._offsetData[j++] = this._startColor.blueOffset/255;\r\n\t\t\tthis._offsetData[j++] = this._startColor.alphaOffset/255;\r\n\t\t\tfor (i = 0; i < this._numSegmentPoint; i++) {\r\n\t\t\t\tif (i == 0) {\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.redOffset - this._startColor.redOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.greenOffset - this._startColor.greenOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.blueOffset - this._startColor.blueOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.alphaOffset - this._startColor.alphaOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.redOffset - this._segmentPoints[i - 1].color.redOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.greenOffset - this._segmentPoints[i - 1].color.greenOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.blueOffset - this._segmentPoints[i - 1].color.blueOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t\tthis._offsetData[j++] = (this._segmentPoints[i].color.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ti = this._numSegmentPoint;\r\n\t\t\tif (this._numSegmentPoint == 0) {\r\n\t\t\t\tthis._offsetData[j++] = (this._endColor.redOffset - this._startColor.redOffset)/255;\r\n\t\t\t\tthis._offsetData[j++] = (this._endColor.greenOffset - this._startColor.greenOffset)/255;\r\n\t\t\t\tthis._offsetData[j++] = (this._endColor.blueOffset - this._startColor.blueOffset)/255;\r\n\t\t\t\tthis._offsetData[j++] = (this._endColor.alphaOffset - this._startColor.alphaOffset)/255;\r\n\t\t\t} else {\r\n\t\t\t\tthis._offsetData[i] = (this._endColor.redOffset - this._segmentPoints[i - 1].color.redOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\tthis._offsetData[j++] = (this._endColor.greenOffset - this._segmentPoints[i - 1].color.greenOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\tthis._offsetData[j++] = (this._endColor.blueOffset - this._segmentPoints[i - 1].color.blueOffset)/this._timeLifeData[i]/255;\r\n\t\t\t\tthis._offsetData[j++] = (this._endColor.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset)/this._timeLifeData[i]/255;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleSpriteSheetNode}\t\t\tfrom \"../../animators/nodes/ParticleSpriteSheetNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleSpriteSheetState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static UV_INDEX_0:number = 0;\r\n\r\n\t/** @private */\r\n\tpublic static UV_INDEX_1:number = 1;\r\n\r\n\tprivate _particleSpriteSheetNode:ParticleSpriteSheetNode;\r\n\tprivate _usesCycle:boolean;\r\n\tprivate _usesPhase:boolean;\r\n\tprivate _totalFrames:number;\r\n\tprivate _numColumns:number;\r\n\tprivate _numRows:number;\r\n\tprivate _cycleDuration:number;\r\n\tprivate _cyclePhase:number;\r\n\tprivate _spriteSheetData:Array<number>;\r\n\r\n\t/**\r\n\t * Defines the cycle phase, when in global mode. Defaults to zero.\r\n\t */\r\n\tpublic get cyclePhase():number\r\n\t{\r\n\t\treturn this._cyclePhase;\r\n\t}\r\n\r\n\tpublic set cyclePhase(value:number)\r\n\t{\r\n\t\tthis._cyclePhase = value;\r\n\r\n\t\tthis.updateSpriteSheetData();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the cycle duration in seconds, when in global mode. Defaults to 1.\r\n\t */\r\n\tpublic get cycleDuration():number\r\n\t{\r\n\t\treturn this._cycleDuration;\r\n\t}\r\n\r\n\tpublic set cycleDuration(value:number)\r\n\t{\r\n\t\tthis._cycleDuration = value;\r\n\r\n\t\tthis.updateSpriteSheetData();\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleSpriteSheetNode:ParticleSpriteSheetNode)\r\n\t{\r\n\t\tsuper(animator, particleSpriteSheetNode);\r\n\r\n\t\tthis._particleSpriteSheetNode = particleSpriteSheetNode;\r\n\r\n\t\tthis._usesCycle = this._particleSpriteSheetNode._iUsesCycle;\r\n\t\tthis._usesPhase = this._particleSpriteSheetNode._iUsesCycle;\r\n\t\tthis._totalFrames = this._particleSpriteSheetNode._iTotalFrames;\r\n\t\tthis._numColumns = this._particleSpriteSheetNode._iNumColumns;\r\n\t\tthis._numRows = this._particleSpriteSheetNode._iNumRows;\r\n\t\tthis._cycleDuration = this._particleSpriteSheetNode._iCycleDuration;\r\n\t\tthis._cyclePhase = this._particleSpriteSheetNode._iCyclePhase;\r\n\r\n\t\tthis.updateSpriteSheetData();\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (!shader.usesUVTransform) {\r\n\t\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleSpriteSheetState.UV_INDEX_0), this._spriteSheetData[0], this._spriteSheetData[1], this._spriteSheetData[2], this._spriteSheetData[3]);\r\n\t\t\tif (this._usesCycle) {\r\n\t\t\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleSpriteSheetState.UV_INDEX_1);\r\n\t\t\t\tif (this._particleSpriteSheetNode.mode == ParticlePropertiesMode.LOCAL_STATIC) {\r\n\t\t\t\t\tif (this._usesPhase)\r\n\t\t\t\t\t\tanimationElements.activateVertexBuffer(index, this._particleSpriteSheetNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tanimationElements.activateVertexBuffer(index, this._particleSpriteSheetNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_2);\r\n\t\t\t\t} else\r\n\t\t\t\t\tshader.setVertexConst(index, this._spriteSheetData[4], this._spriteSheetData[5]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateSpriteSheetData():void\r\n\t{\r\n\t\tthis._spriteSheetData = new Array<number>(8);\r\n\r\n\t\tvar uTotal:number = this._totalFrames/this._numColumns;\r\n\r\n\t\tthis._spriteSheetData[0] = uTotal;\r\n\t\tthis._spriteSheetData[1] = 1/this._numColumns;\r\n\t\tthis._spriteSheetData[2] = 1/this._numRows;\r\n\r\n\t\tif (this._usesCycle) {\r\n\t\t\tif (this._cycleDuration <= 0)\r\n\t\t\t\tthrow(new Error(\"the cycle duration must be greater than zero\"));\r\n\t\t\tthis._spriteSheetData[4] = uTotal/this._cycleDuration;\r\n\t\t\tthis._spriteSheetData[5] = this._cycleDuration;\r\n\t\t\tif (this._usesPhase)\r\n\t\t\t\tthis._spriteSheetData[6] = this._cyclePhase;\r\n\t\t}\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticleAnimationData}\t\t\tfrom \"../../animators/data/ParticleAnimationData\";\r\nimport {ParticleNodeBase}\t\t\t\t\tfrom \"../../animators/nodes/ParticleNodeBase\";\r\nimport {AnimationStateBase}\t\t\t\tfrom \"../../animators/states/AnimationStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleStateBase extends AnimationStateBase\r\n{\r\n\tprivate _particleNode:ParticleNodeBase;\r\n\tpublic _pParticleAnimator:ParticleAnimator;\r\n\t\r\n\tpublic _pDynamicProperties:Array<Vector3D> = new Array<Vector3D>();\r\n\tpublic _pDynamicPropertiesDirty:Object = new Object();\r\n\r\n\tpublic _pNeedUpdateTime:boolean;\r\n\r\n\tconstructor(animator:ParticleAnimator, particleNode:ParticleNodeBase, needUpdateTime:boolean = false)\r\n\t{\r\n\t\tsuper(animator, particleNode);\r\n\r\n\t\tthis._pParticleAnimator = animator;\r\n\t\tthis._particleNode = particleNode;\r\n\t\tthis._pNeedUpdateTime = needUpdateTime;\r\n\t}\r\n\r\n\tpublic get needUpdateTime():boolean\r\n\t{\r\n\t\treturn this._pNeedUpdateTime;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\r\n\t}\r\n\r\n\tpublic _pUpdateDynamicProperties(animationElements:AnimationElements):void\r\n\t{\r\n\t\tthis._pDynamicPropertiesDirty[animationElements._iUniqueId] = true;\r\n\r\n\t\tvar animationParticles:Array<ParticleAnimationData> = animationElements.animationParticles;\r\n\t\tvar vertexData:Array<number> = animationElements.vertexData;\r\n\t\tvar totalLenOfOneVertex:number = animationElements.totalLenOfOneVertex;\r\n\t\tvar dataLength:number = this._particleNode.dataLength;\r\n\t\tvar dataOffset:number = this._particleNode._iDataOffset;\r\n\t\tvar vertexLength:number;\r\n\t\t//\t\t\tvar particleOffset:number;\r\n\t\tvar startingOffset:number;\r\n\t\tvar vertexOffset:number;\r\n\t\tvar data:Vector3D;\r\n\t\tvar animationParticle:ParticleAnimationData;\r\n\r\n\t\t//\t\t\tvar numParticles:number = _positions.length/dataLength;\r\n\t\tvar numParticles:number = this._pDynamicProperties.length;\r\n\t\tvar i:number = 0;\r\n\t\tvar j:number = 0;\r\n\t\tvar k:number = 0;\r\n\r\n\t\t//loop through all particles\r\n\t\twhile (i < numParticles) {\r\n\t\t\t//loop through each particle data for the current particle\r\n\t\t\twhile (j < numParticles && (animationParticle = animationParticles[j]).index == i) {\r\n\t\t\t\tdata = this._pDynamicProperties[i];\r\n\t\t\t\tvertexLength = animationParticle.numVertices*totalLenOfOneVertex;\r\n\t\t\t\tstartingOffset = animationParticle.startVertexIndex*totalLenOfOneVertex + dataOffset;\r\n\t\t\t\t//loop through each vertex in the particle data\r\n\t\t\t\tfor (k = 0; k < vertexLength; k += totalLenOfOneVertex) {\r\n\t\t\t\t\tvertexOffset = startingOffset + k;\r\n\t\t\t\t\t//\t\t\t\t\t\tparticleOffset = i * dataLength;\r\n\t\t\t\t\t//loop through all vertex data for the current particle data\r\n\t\t\t\t\tfor (k = 0; k < vertexLength; k += totalLenOfOneVertex) {\r\n\t\t\t\t\t\tvertexOffset = startingOffset + k;\r\n\t\t\t\t\t\tvertexData[vertexOffset++] = data.x;\r\n\t\t\t\t\t\tvertexData[vertexOffset++] = data.y;\r\n\t\t\t\t\t\tvertexData[vertexOffset++] = data.z;\r\n\r\n\t\t\t\t\t\tif (dataLength == 4)\r\n\t\t\t\t\t\t\tvertexData[vertexOffset++] = data.w;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t//loop through each value in the particle vertex\r\n\t\t\t\t\t\t//\t\t\t\t\t\tswitch(dataLength) {\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\tvertexData[vertexOffset++] = _positions[particleOffset++];\r\n\t\t\t\t\t\t//\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tanimationElements.invalidateBuffer();\r\n\t}\r\n\r\n}",
    "import {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticleTimeNode}\t\t\t\t\tfrom \"../../animators/nodes/ParticleTimeNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleTimeState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static TIME_STREAM_INDEX:number = 0;\r\n\r\n\t/** @private */\r\n\tpublic static TIME_CONSTANT_INDEX:number = 1;\r\n\r\n\tprivate _particleTimeNode:ParticleTimeNode;\r\n\r\n\tconstructor(animator:ParticleAnimator, particleTimeNode:ParticleTimeNode)\r\n\t{\r\n\t\tsuper(animator, particleTimeNode, true);\r\n\r\n\t\tthis._particleTimeNode = particleTimeNode;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tanimationElements.activateVertexBuffer(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleTimeState.TIME_STREAM_INDEX), this._particleTimeNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_4);\r\n\r\n\t\tvar particleTime:number = this._pTime/1000;\r\n\t\tshader.setVertexConst(animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleTimeState.TIME_CONSTANT_INDEX), particleTime, particleTime, particleTime, particleTime);\r\n\t}\r\n\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticleUVNode}\t\t\t\t\tfrom \"../../animators/nodes/ParticleUVNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleUVState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static UV_INDEX:number = 0;\r\n\r\n\tprivate _particleUVNode:ParticleUVNode;\r\n\r\n\tconstructor(animator:ParticleAnimator, particleUVNode:ParticleUVNode)\r\n\t{\r\n\t\tsuper(animator, particleUVNode);\r\n\r\n\t\tthis._particleUVNode = particleUVNode;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (!shader.usesUVTransform) {\r\n\t\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleUVState.UV_INDEX);\r\n\t\t\tvar data:Vector3D = this._particleUVNode._iUvData;\r\n\t\t\tshader.setVertexConst(index, data.x, data.y);\r\n\t\t}\r\n\t}\r\n\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ContextGLVertexBufferFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\";\r\n\r\nimport {ParticleAnimator}\t\t\t\t\tfrom \"../../animators/ParticleAnimator\";\r\nimport {AnimationRegisterData}\t\t\tfrom \"../../animators/data/AnimationRegisterData\";\r\nimport {AnimationElements}\t\t\t\tfrom \"../../animators/data/AnimationElements\";\r\nimport {ParticlePropertiesMode}\t\t\tfrom \"../../animators/data/ParticlePropertiesMode\";\r\nimport {ParticleVelocityNode}\t\t\t\tfrom \"../../animators/nodes/ParticleVelocityNode\";\r\nimport {ParticleStateBase}\t\t\t\tfrom \"../../animators/states/ParticleStateBase\";\r\nimport {GL_RenderableBase}\t\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleVelocityState extends ParticleStateBase\r\n{\r\n\t/** @private */\r\n\tpublic static VELOCITY_INDEX:number = 0;\r\n\r\n\tprivate _particleVelocityNode:ParticleVelocityNode;\r\n\tprivate _velocity:Vector3D;\r\n\r\n\t/**\r\n\t * Defines the default velocity vector of the state, used when in global mode.\r\n\t */\r\n\tpublic get velocity():Vector3D\r\n\t{\r\n\t\treturn this._velocity;\r\n\t}\r\n\r\n\tpublic set velocity(value:Vector3D)\r\n\t{\r\n\t\tthis._velocity = value;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic getVelocities():Array<Vector3D>\r\n\t{\r\n\t\treturn this._pDynamicProperties;\r\n\t}\r\n\r\n\tpublic setVelocities(value:Array<Vector3D>):void\r\n\t{\r\n\t\tthis._pDynamicProperties = value;\r\n\r\n\t\tthis._pDynamicPropertiesDirty = new Object();\r\n\t}\r\n\r\n\tconstructor(animator:ParticleAnimator, particleVelocityNode:ParticleVelocityNode)\r\n\t{\r\n\t\tsuper(animator, particleVelocityNode);\r\n\r\n\t\tthis._particleVelocityNode = particleVelocityNode;\r\n\t\tthis._velocity = this._particleVelocityNode._iVelocity;\r\n\t}\r\n\r\n\tpublic setRenderState(shader:ShaderBase, renderable:GL_RenderableBase, animationElements:AnimationElements, animationRegisterData:AnimationRegisterData, camera:Camera, stage:Stage):void\r\n\t{\r\n\t\tif (this._particleVelocityNode.mode == ParticlePropertiesMode.LOCAL_DYNAMIC && !this._pDynamicPropertiesDirty[animationElements._iUniqueId])\r\n\t\t\tthis._pUpdateDynamicProperties(animationElements);\r\n\r\n\t\tvar index:number = animationRegisterData.getRegisterIndex(this._pAnimationNode, ParticleVelocityState.VELOCITY_INDEX);\r\n\r\n\t\tif (this._particleVelocityNode.mode == ParticlePropertiesMode.GLOBAL)\r\n\t\t\tshader.setVertexConst(index, this._velocity.x, this._velocity.y, this._velocity.z);\r\n\t\telse\r\n\t\t\tanimationElements.activateVertexBuffer(index, this._particleVelocityNode._iDataOffset, stage, ContextGLVertexBufferFormat.FLOAT_3);\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {JointPose}\t\t\t\t\t\tfrom \"../../animators/data/JointPose\";\r\nimport {Skeleton}\t\t\t\t\t\t\tfrom \"../../animators/data/Skeleton\";\r\nimport {SkeletonPose}\t\t\t\t\t\tfrom \"../../animators/data/SkeletonPose\";\r\nimport {SkeletonBinaryLERPNode}\t\t\tfrom \"../../animators/nodes/SkeletonBinaryLERPNode\";\r\nimport {AnimationStateBase}\t\t\t\tfrom \"../../animators/states/AnimationStateBase\";\r\nimport {ISkeletonAnimationState}\t\t\tfrom \"../../animators/states/ISkeletonAnimationState\";\r\n\r\n/**\r\n *\r\n */\r\nexport class SkeletonBinaryLERPState extends AnimationStateBase implements ISkeletonAnimationState\r\n{\r\n\tprivate _blendWeight:number = 0;\r\n\tprivate _skeletonAnimationNode:SkeletonBinaryLERPNode;\r\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\r\n\tprivate _skeletonPoseDirty:boolean = true;\r\n\tprivate _inputA:ISkeletonAnimationState;\r\n\tprivate _inputB:ISkeletonAnimationState;\r\n\r\n\t/**\r\n\t * Defines a fractional value between 0 and 1 representing the blending ratio between inputA (0) and inputB (1),\r\n\t * used to produce the skeleton pose output.\r\n\t *\r\n\t * @see inputA\r\n\t * @see inputB\r\n\t */\r\n\tpublic get blendWeight():number\r\n\t{\r\n\t\treturn this._blendWeight;\r\n\t}\r\n\r\n\tpublic set blendWeight(value:number)\r\n\t{\r\n\t\tthis._blendWeight = value;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\t\tthis._skeletonPoseDirty = true;\r\n\t}\r\n\r\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonBinaryLERPNode)\r\n\t{\r\n\t\tsuper(animator, skeletonAnimationNode);\r\n\r\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\r\n\r\n\t\tthis._inputA = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.inputA);\r\n\t\tthis._inputB = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.inputB);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic phase(value:number):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\r\n\t\tthis._inputA.phase(value);\r\n\t\tthis._inputB.phase(value);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateTime(time:number):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tthis._inputA.update(time);\r\n\t\tthis._inputB.update(time);\r\n\r\n\t\tsuper._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\r\n\t{\r\n\t\tif (this._skeletonPoseDirty)\r\n\t\t\tthis.updateSkeletonPose(skeleton);\r\n\r\n\t\treturn this._skeletonPose;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdatePositionDelta():void\r\n\t{\r\n\t\tthis._pPositionDeltaDirty = false;\r\n\r\n\t\tvar deltA:Vector3D = this._inputA.positionDelta;\r\n\t\tvar deltB:Vector3D = this._inputB.positionDelta;\r\n\r\n\t\tthis._pRootDelta.x = deltA.x + this._blendWeight*(deltB.x - deltA.x);\r\n\t\tthis._pRootDelta.y = deltA.y + this._blendWeight*(deltB.y - deltA.y);\r\n\t\tthis._pRootDelta.z = deltA.z + this._blendWeight*(deltB.z - deltA.z);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the output skeleton pose of the node based on the blendWeight value between input nodes.\r\n\t *\r\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\r\n\t */\r\n\tprivate updateSkeletonPose(skeleton:Skeleton):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = false;\r\n\r\n\t\tvar endPose:JointPose;\r\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\r\n\t\tvar poses1:Array<JointPose> = this._inputA.getSkeletonPose(skeleton).jointPoses;\r\n\t\tvar poses2:Array<JointPose> = this._inputB.getSkeletonPose(skeleton).jointPoses;\r\n\t\tvar pose1:JointPose, pose2:JointPose;\r\n\t\tvar p1:Vector3D, p2:Vector3D;\r\n\t\tvar tr:Vector3D;\r\n\t\tvar numJoints:number = skeleton.numJoints;\r\n\r\n\t\t// :s\r\n\t\tif (endPoses.length != numJoints)\r\n\t\t\tendPoses.length = numJoints;\r\n\r\n\t\tfor (var i:number = 0; i < numJoints; ++i) {\r\n\t\t\tendPose = endPoses[i];\r\n\r\n\t\t\tif (endPose == null)\r\n\t\t\t\tendPose = endPoses[i] = new JointPose();\r\n\r\n\t\t\tpose1 = poses1[i];\r\n\t\t\tpose2 = poses2[i];\r\n\t\t\tp1 = pose1.translation;\r\n\t\t\tp2 = pose2.translation;\r\n\r\n\t\t\tendPose.orientation.lerp(pose1.orientation, pose2.orientation, this._blendWeight);\r\n\r\n\t\t\ttr = endPose.translation;\r\n\t\t\ttr.x = p1.x + this._blendWeight*(p2.x - p1.x);\r\n\t\t\ttr.y = p1.y + this._blendWeight*(p2.y - p1.y);\r\n\t\t\ttr.z = p1.z + this._blendWeight*(p2.z - p1.z);\r\n\t\t}\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {SkeletonAnimator}\t\t\t\t\tfrom \"../../animators/SkeletonAnimator\";\r\nimport {JointPose}\t\t\t\t\t\tfrom \"../../animators/data/JointPose\";\r\nimport {Skeleton}\t\t\t\t\t\t\tfrom \"../../animators/data/Skeleton\";\r\nimport {SkeletonPose}\t\t\t\t\t\tfrom \"../../animators/data/SkeletonPose\";\r\nimport {SkeletonClipNode}\t\t\t\t\tfrom \"../../animators/nodes/SkeletonClipNode\";\r\nimport {AnimationClipState}\t\t\t\tfrom \"../../animators/states/AnimationClipState\";\r\nimport {ISkeletonAnimationState}\t\t\tfrom \"../../animators/states/ISkeletonAnimationState\";\r\n\r\n/**\r\n *\r\n */\r\nexport class SkeletonClipState extends AnimationClipState implements ISkeletonAnimationState\r\n{\r\n\tprivate _rootPos:Vector3D = new Vector3D();\r\n\tprivate _frames:Array<SkeletonPose>;\r\n\tprivate _skeletonClipNode:SkeletonClipNode;\r\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\r\n\tprivate _skeletonPoseDirty:boolean = true;\r\n\tprivate _currentPose:SkeletonPose;\r\n\tprivate _nextPose:SkeletonPose;\r\n\r\n\t/**\r\n\t * Returns the current skeleton pose frame of animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic get currentPose():SkeletonPose\r\n\t{\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\treturn this._currentPose;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the next skeleton pose frame of animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic get nextPose():SkeletonPose\r\n\t{\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\treturn this._nextPose;\r\n\t}\r\n\r\n\tconstructor(animator:AnimatorBase, skeletonClipNode:SkeletonClipNode)\r\n\t{\r\n\t\tsuper(animator, skeletonClipNode);\r\n\r\n\t\tthis._skeletonClipNode = skeletonClipNode;\r\n\t\tthis._frames = this._skeletonClipNode.frames;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\r\n\t{\r\n\t\tif (this._skeletonPoseDirty)\r\n\t\t\tthis.updateSkeletonPose(skeleton);\r\n\r\n\t\treturn this._skeletonPose;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateTime(time:number):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tsuper._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateFrames():void\r\n\t{\r\n\t\tsuper._pUpdateFrames();\r\n\r\n\t\tthis._currentPose = this._frames[this._pCurrentFrame];\r\n\r\n\t\tif (this._skeletonClipNode.looping && this._pNextFrame >= this._skeletonClipNode.lastFrame) {\r\n\t\t\tthis._nextPose = this._frames[0];\r\n\t\t\t(<SkeletonAnimator> this._pAnimator).dispatchCycleEvent();\r\n\t\t} else\r\n\t\t\tthis._nextPose = this._frames[this._pNextFrame];\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the output skeleton pose of the node based on the internal playhead position.\r\n\t *\r\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\r\n\t */\r\n\tprivate updateSkeletonPose(skeleton:Skeleton):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = false;\r\n\r\n\t\tif (!this._skeletonClipNode.totalDuration)\r\n\t\t\treturn;\r\n\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\tvar currentPose:Array<JointPose> = this._currentPose.jointPoses;\r\n\t\tvar nextPose:Array<JointPose> = this._nextPose.jointPoses;\r\n\t\tvar numJoints:number = skeleton.numJoints;\r\n\t\tvar p1:Vector3D, p2:Vector3D;\r\n\t\tvar pose1:JointPose, pose2:JointPose;\r\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\r\n\t\tvar endPose:JointPose;\r\n\t\tvar tr:Vector3D;\r\n\r\n\t\t// :s\r\n\t\tif (endPoses.length != numJoints)\r\n\t\t\tendPoses.length = numJoints;\r\n\r\n\t\tif ((numJoints != currentPose.length) || (numJoints != nextPose.length))\r\n\t\t\tthrow new Error(\"joint counts don't match!\");\r\n\r\n\t\tfor (var i:number = 0; i < numJoints; ++i) {\r\n\t\t\tendPose = endPoses[i];\r\n\r\n\t\t\tif (endPose == null)\r\n\t\t\t\tendPose = endPoses[i] = new JointPose();\r\n\r\n\t\t\tpose1 = currentPose[i];\r\n\t\t\tpose2 = nextPose[i];\r\n\t\t\tp1 = pose1.translation;\r\n\t\t\tp2 = pose2.translation;\r\n\r\n\t\t\tif (this._skeletonClipNode.highQuality)\r\n\t\t\t\tendPose.orientation.slerp(pose1.orientation, pose2.orientation, this._pBlendWeight); else\r\n\t\t\t\tendPose.orientation.lerp(pose1.orientation, pose2.orientation, this._pBlendWeight);\r\n\r\n\t\t\tif (i > 0) {\r\n\t\t\t\ttr = endPose.translation;\r\n\t\t\t\ttr.x = p1.x + this._pBlendWeight*(p2.x - p1.x);\r\n\t\t\t\ttr.y = p1.y + this._pBlendWeight*(p2.y - p1.y);\r\n\t\t\t\ttr.z = p1.z + this._pBlendWeight*(p2.z - p1.z);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdatePositionDelta():void\r\n\t{\r\n\t\tthis._pPositionDeltaDirty = false;\r\n\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\tvar p1:Vector3D, p2:Vector3D, p3:Vector3D;\r\n\t\tvar totalDelta:Vector3D = this._skeletonClipNode.totalDelta;\r\n\r\n\t\t// jumping back, need to reset position\r\n\t\tif ((this._pTimeDir > 0 && this._pNextFrame < this._pOldFrame) || (this._pTimeDir < 0 && this._pNextFrame > this._pOldFrame)) {\r\n\t\t\tthis._rootPos.x -= totalDelta.x*this._pTimeDir;\r\n\t\t\tthis._rootPos.y -= totalDelta.y*this._pTimeDir;\r\n\t\t\tthis._rootPos.z -= totalDelta.z*this._pTimeDir;\r\n\t\t}\r\n\r\n\t\tvar dx:number = this._rootPos.x;\r\n\t\tvar dy:number = this._rootPos.y;\r\n\t\tvar dz:number = this._rootPos.z;\r\n\r\n\t\tif (this._skeletonClipNode.stitchFinalFrame && this._pNextFrame == this._skeletonClipNode.lastFrame) {\r\n\t\t\tp1 = this._frames[0].jointPoses[0].translation;\r\n\t\t\tp2 = this._frames[1].jointPoses[0].translation;\r\n\t\t\tp3 = this._currentPose.jointPoses[0].translation;\r\n\r\n\t\t\tthis._rootPos.x = p3.x + p1.x + this._pBlendWeight*(p2.x - p1.x);\r\n\t\t\tthis._rootPos.y = p3.y + p1.y + this._pBlendWeight*(p2.y - p1.y);\r\n\t\t\tthis._rootPos.z = p3.z + p1.z + this._pBlendWeight*(p2.z - p1.z);\r\n\t\t} else {\r\n\t\t\tp1 = this._currentPose.jointPoses[0].translation;\r\n\t\t\tp2 = this._frames[this._pNextFrame].jointPoses[0].translation; //cover the instances where we wrap the pose but still want the final frame translation values\r\n\t\t\tthis._rootPos.x = p1.x + this._pBlendWeight*(p2.x - p1.x);\r\n\t\t\tthis._rootPos.y = p1.y + this._pBlendWeight*(p2.y - p1.y);\r\n\t\t\tthis._rootPos.z = p1.z + this._pBlendWeight*(p2.z - p1.z);\r\n\t\t}\r\n\r\n\t\tthis._pRootDelta.x = this._rootPos.x - dx;\r\n\t\tthis._pRootDelta.y = this._rootPos.y - dy;\r\n\t\tthis._pRootDelta.z = this._rootPos.z - dz;\r\n\r\n\t\tthis._pOldFrame = this._pNextFrame;\r\n\t}\r\n}",
    "import {Quaternion}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Quaternion\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {JointPose}\t\t\t\t\t\tfrom \"../../animators/data/JointPose\";\r\nimport {Skeleton}\t\t\t\t\t\t\tfrom \"../../animators/data/Skeleton\";\r\nimport {SkeletonPose}\t\t\t\t\t\tfrom \"../../animators/data/SkeletonPose\";\r\nimport {SkeletonDifferenceNode}\t\t\tfrom \"../../animators/nodes/SkeletonDifferenceNode\";\r\nimport {AnimationStateBase}\t\t\t\tfrom \"../../animators/states/AnimationStateBase\";\r\nimport {ISkeletonAnimationState}\t\t\tfrom \"../../animators/states/ISkeletonAnimationState\";\r\n\r\n/**\r\n *\r\n */\r\nexport class SkeletonDifferenceState extends AnimationStateBase implements ISkeletonAnimationState\r\n{\r\n\tprivate _blendWeight:number = 0;\r\n\tprivate static _tempQuat:Quaternion = new Quaternion();\r\n\tprivate _skeletonAnimationNode:SkeletonDifferenceNode;\r\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\r\n\tprivate _skeletonPoseDirty:boolean = true;\r\n\tprivate _baseInput:ISkeletonAnimationState;\r\n\tprivate _differenceInput:ISkeletonAnimationState;\r\n\r\n\t/**\r\n\t * Defines a fractional value between 0 and 1 representing the blending ratio between the base input (0) and difference input (1),\r\n\t * used to produce the skeleton pose output.\r\n\t *\r\n\t * @see #baseInput\r\n\t * @see #differenceInput\r\n\t */\r\n\tpublic get blendWeight():number\r\n\t{\r\n\t\treturn this._blendWeight;\r\n\t}\r\n\r\n\tpublic set blendWeight(value:number)\r\n\t{\r\n\t\tthis._blendWeight = value;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\t\tthis._skeletonPoseDirty = true;\r\n\t}\r\n\r\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonDifferenceNode)\r\n\t{\r\n\t\tsuper(animator, skeletonAnimationNode);\r\n\r\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\r\n\r\n\t\tthis._baseInput = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.baseInput);\r\n\t\tthis._differenceInput = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.differenceInput);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic phase(value:number):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\r\n\t\tthis._baseInput.phase(value);\r\n\t\tthis._baseInput.phase(value);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateTime(time:number):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tthis._baseInput.update(time);\r\n\t\tthis._differenceInput.update(time);\r\n\r\n\t\tsuper._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\r\n\t{\r\n\t\tif (this._skeletonPoseDirty)\r\n\t\t\tthis.updateSkeletonPose(skeleton);\r\n\r\n\t\treturn this._skeletonPose;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdatePositionDelta():void\r\n\t{\r\n\t\tthis._pPositionDeltaDirty = false;\r\n\r\n\t\tvar deltA:Vector3D = this._baseInput.positionDelta;\r\n\t\tvar deltB:Vector3D = this._differenceInput.positionDelta;\r\n\r\n\t\tthis.positionDelta.x = deltA.x + this._blendWeight*deltB.x;\r\n\t\tthis.positionDelta.y = deltA.y + this._blendWeight*deltB.y;\r\n\t\tthis.positionDelta.z = deltA.z + this._blendWeight*deltB.z;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the output skeleton pose of the node based on the blendWeight value between base input and difference input nodes.\r\n\t *\r\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\r\n\t */\r\n\tprivate updateSkeletonPose(skeleton:Skeleton):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = false;\r\n\r\n\t\tvar endPose:JointPose;\r\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\r\n\t\tvar basePoses:Array<JointPose> = this._baseInput.getSkeletonPose(skeleton).jointPoses;\r\n\t\tvar diffPoses:Array<JointPose> = this._differenceInput.getSkeletonPose(skeleton).jointPoses;\r\n\t\tvar base:JointPose, diff:JointPose;\r\n\t\tvar basePos:Vector3D, diffPos:Vector3D;\r\n\t\tvar tr:Vector3D;\r\n\t\tvar numJoints:number = skeleton.numJoints;\r\n\r\n\t\t// :s\r\n\t\tif (endPoses.length != numJoints)\r\n\t\t\tendPoses.length = numJoints;\r\n\r\n\t\tfor (var i:number = 0; i < numJoints; ++i) {\r\n\t\t\tendPose = endPoses[i];\r\n\r\n\t\t\tif (endPose == null)\r\n\t\t\t\tendPose = endPoses[i] = new JointPose();\r\n\r\n\t\t\tbase = basePoses[i];\r\n\t\t\tdiff = diffPoses[i];\r\n\t\t\tbasePos = base.translation;\r\n\t\t\tdiffPos = diff.translation;\r\n\r\n\t\t\tSkeletonDifferenceState._tempQuat.multiply(diff.orientation, base.orientation);\r\n\t\t\tendPose.orientation.lerp(base.orientation, SkeletonDifferenceState._tempQuat, this._blendWeight);\r\n\r\n\t\t\ttr = endPose.translation;\r\n\t\t\ttr.x = basePos.x + this._blendWeight*diffPos.x;\r\n\t\t\ttr.y = basePos.y + this._blendWeight*diffPos.y;\r\n\t\t\ttr.z = basePos.z + this._blendWeight*diffPos.z;\r\n\t\t}\r\n\t}\r\n}",
    "import {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {JointPose}\t\t\t\t\t\tfrom \"../../animators/data/JointPose\";\r\nimport {Skeleton}\t\t\t\t\t\t\tfrom \"../../animators/data/Skeleton\";\r\nimport {SkeletonPose}\t\t\t\t\t\tfrom \"../../animators/data/SkeletonPose\";\r\nimport {SkeletonDirectionalNode}\t\t\tfrom \"../../animators/nodes/SkeletonDirectionalNode\";\r\nimport {AnimationStateBase}\t\t\t\tfrom \"../../animators/states/AnimationStateBase\";\r\nimport {ISkeletonAnimationState}\t\t\tfrom \"../../animators/states/ISkeletonAnimationState\";\r\n\r\n/**\r\n *\r\n */\r\nexport class SkeletonDirectionalState extends AnimationStateBase implements ISkeletonAnimationState\r\n{\r\n\tprivate _skeletonAnimationNode:SkeletonDirectionalNode;\r\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\r\n\tprivate _skeletonPoseDirty:boolean = true;\r\n\tprivate _inputA:ISkeletonAnimationState;\r\n\tprivate _inputB:ISkeletonAnimationState;\r\n\tprivate _blendWeight:number = 0;\r\n\tprivate _direction:number = 0;\r\n\tprivate _blendDirty:boolean = true;\r\n\tprivate _forward:ISkeletonAnimationState;\r\n\tprivate _backward:ISkeletonAnimationState;\r\n\tprivate _left:ISkeletonAnimationState;\r\n\tprivate _right:ISkeletonAnimationState;\r\n\r\n\t/**\r\n\t * Defines the direction in degrees of the aniamtion between the forwards (0), right(90) backwards (180) and left(270) input nodes,\r\n\t * used to produce the skeleton pose output.\r\n\t */\r\n\tpublic set direction(value:number)\r\n\t{\r\n\t\tif (this._direction == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._direction = value;\r\n\r\n\t\tthis._blendDirty = true;\r\n\r\n\t\tthis._skeletonPoseDirty = true;\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\t}\r\n\r\n\tpublic get direction():number\r\n\t{\r\n\t\treturn this._direction;\r\n\t}\r\n\r\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonDirectionalNode)\r\n\t{\r\n\t\tsuper(animator, skeletonAnimationNode);\r\n\r\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\r\n\r\n\t\tthis._forward = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.forward);\r\n\t\tthis._backward = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.backward);\r\n\t\tthis._left = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.left);\r\n\t\tthis._right = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode.right);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic phase(value:number):void\r\n\t{\r\n\t\tif (this._blendDirty)\r\n\t\t\tthis.updateBlend();\r\n\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\r\n\t\tthis._inputA.phase(value);\r\n\t\tthis._inputB.phase(value);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUdateTime(time:number):void\r\n\t{\r\n\t\tif (this._blendDirty)\r\n\t\t\tthis.updateBlend();\r\n\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tthis._inputA.update(time);\r\n\t\tthis._inputB.update(time);\r\n\r\n\t\tsuper._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\r\n\t{\r\n\t\tif (this._skeletonPoseDirty)\r\n\t\t\tthis.updateSkeletonPose(skeleton);\r\n\r\n\t\treturn this._skeletonPose;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdatePositionDelta():void\r\n\t{\r\n\t\tthis._pPositionDeltaDirty = false;\r\n\r\n\t\tif (this._blendDirty)\r\n\t\t\tthis.updateBlend();\r\n\r\n\t\tvar deltA:Vector3D = this._inputA.positionDelta;\r\n\t\tvar deltB:Vector3D = this._inputB.positionDelta;\r\n\r\n\t\tthis.positionDelta.x = deltA.x + this._blendWeight*(deltB.x - deltA.x);\r\n\t\tthis.positionDelta.y = deltA.y + this._blendWeight*(deltB.y - deltA.y);\r\n\t\tthis.positionDelta.z = deltA.z + this._blendWeight*(deltB.z - deltA.z);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the output skeleton pose of the node based on the direction value between forward, backwards, left and right input nodes.\r\n\t *\r\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\r\n\t */\r\n\tprivate updateSkeletonPose(skeleton:Skeleton):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = false;\r\n\r\n\t\tif (this._blendDirty)\r\n\t\t\tthis.updateBlend();\r\n\r\n\t\tvar endPose:JointPose;\r\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\r\n\t\tvar poses1:Array<JointPose> = this._inputA.getSkeletonPose(skeleton).jointPoses;\r\n\t\tvar poses2:Array<JointPose> = this._inputB.getSkeletonPose(skeleton).jointPoses;\r\n\t\tvar pose1:JointPose, pose2:JointPose;\r\n\t\tvar p1:Vector3D, p2:Vector3D;\r\n\t\tvar tr:Vector3D;\r\n\t\tvar numJoints:number = skeleton.numJoints;\r\n\r\n\t\t// :s\r\n\t\tif (endPoses.length != numJoints)\r\n\t\t\tendPoses.length = numJoints;\r\n\r\n\t\tfor (var i:number = 0; i < numJoints; ++i) {\r\n\t\t\tendPose = endPoses[i];\r\n\r\n\t\t\tif (endPose == null)\r\n\t\t\t\tendPose = endPoses[i] = new JointPose();\r\n\r\n\t\t\tpose1 = poses1[i];\r\n\t\t\tpose2 = poses2[i];\r\n\t\t\tp1 = pose1.translation;\r\n\t\t\tp2 = pose2.translation;\r\n\r\n\t\t\tendPose.orientation.lerp(pose1.orientation, pose2.orientation, this._blendWeight);\r\n\r\n\t\t\ttr = endPose.translation;\r\n\t\t\ttr.x = p1.x + this._blendWeight*(p2.x - p1.x);\r\n\t\t\ttr.y = p1.y + this._blendWeight*(p2.y - p1.y);\r\n\t\t\ttr.z = p1.z + this._blendWeight*(p2.z - p1.z);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the blend value for the animation output based on the direction value between forward, backwards, left and right input nodes.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tprivate updateBlend():void\r\n\t{\r\n\t\tthis._blendDirty = false;\r\n\r\n\t\tif (this._direction < 0 || this._direction > 360) {\r\n\t\t\tthis._direction %= 360;\r\n\t\t\tif (this._direction < 0)\r\n\t\t\t\tthis._direction += 360;\r\n\t\t}\r\n\r\n\t\tif (this._direction < 90) {\r\n\t\t\tthis._inputA = this._forward;\r\n\t\t\tthis._inputB = this._right;\r\n\t\t\tthis._blendWeight = this._direction/90;\r\n\t\t} else if (this._direction < 180) {\r\n\t\t\tthis._inputA = this._right;\r\n\t\t\tthis._inputB = this._backward;\r\n\t\t\tthis._blendWeight = (this._direction - 90)/90;\r\n\t\t} else if (this._direction < 270) {\r\n\t\t\tthis._inputA = this._backward;\r\n\t\t\tthis._inputB = this._left;\r\n\t\t\tthis._blendWeight = (this._direction - 180)/90;\r\n\t\t} else {\r\n\t\t\tthis._inputA = this._left;\r\n\t\t\tthis._inputB = this._forward;\r\n\t\t\tthis._blendWeight = (this._direction - 270)/90;\r\n\t\t}\r\n\t}\r\n}",
    "import {Quaternion}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Quaternion\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {JointPose}\t\t\t\t\t\tfrom \"../../animators/data/JointPose\";\r\nimport {Skeleton}\t\t\t\t\t\t\tfrom \"../../animators/data/Skeleton\";\r\nimport {SkeletonPose}\t\t\t\t\t\tfrom \"../../animators/data/SkeletonPose\";\r\nimport {SkeletonNaryLERPNode}\t\t\t\tfrom \"../../animators/nodes/SkeletonNaryLERPNode\";\r\nimport {AnimationStateBase}\t\t\t\tfrom \"../../animators/states/AnimationStateBase\";\r\nimport {ISkeletonAnimationState}\t\t\tfrom \"../../animators/states/ISkeletonAnimationState\";\r\n\r\n/**\r\n *\r\n */\r\nexport class SkeletonNaryLERPState extends AnimationStateBase implements ISkeletonAnimationState\r\n{\r\n\tprivate _skeletonAnimationNode:SkeletonNaryLERPNode;\r\n\tprivate _skeletonPose:SkeletonPose = new SkeletonPose();\r\n\tprivate _skeletonPoseDirty:boolean = true;\r\n\tprivate _blendWeights:Array<number> = new Array<number>();\r\n\tprivate _inputs:Array<ISkeletonAnimationState> = new Array<ISkeletonAnimationState>();\r\n\r\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:SkeletonNaryLERPNode)\r\n\t{\r\n\t\tsuper(animator, skeletonAnimationNode);\r\n\r\n\t\tthis._skeletonAnimationNode = skeletonAnimationNode;\r\n\r\n\t\tvar i:number = this._skeletonAnimationNode.numInputs;\r\n\r\n\t\twhile (i--)\r\n\t\t\tthis._inputs[i] = <ISkeletonAnimationState> animator.getAnimationState(this._skeletonAnimationNode._iInputs[i]);\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic phase(value:number):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = true;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\r\n\t\tfor (var j:number = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\r\n\t\t\tif (this._blendWeights[j])\r\n\t\t\t\tthis._inputs[j].update(value);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUdateTime(time:number):void\r\n\t{\r\n\t\tfor (var j:number = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\r\n\t\t\tif (this._blendWeights[j])\r\n\t\t\t\tthis._inputs[j].update(time);\r\n\t\t}\r\n\r\n\t\tsuper._pUpdateTime(time);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current skeleton pose of the animation in the clip based on the internal playhead position.\r\n\t */\r\n\tpublic getSkeletonPose(skeleton:Skeleton):SkeletonPose\r\n\t{\r\n\t\tif (this._skeletonPoseDirty)\r\n\t\t\tthis.updateSkeletonPose(skeleton);\r\n\r\n\t\treturn this._skeletonPose;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the blend weight of the skeleton aniamtion node that resides at the given input index.\r\n\t *\r\n\t * @param index The input index for which the skeleton animation node blend weight is requested.\r\n\t */\r\n\tpublic getBlendWeightAt(index:number):number\r\n\t{\r\n\t\treturn this._blendWeights[index];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the blend weight of the skeleton aniamtion node that resides at the given input index.\r\n\t *\r\n\t * @param index The input index on which the skeleton animation node blend weight is to be set.\r\n\t * @param blendWeight The blend weight value to use for the given skeleton animation node index.\r\n\t */\r\n\tpublic setBlendWeightAt(index:number, blendWeight:number):void\r\n\t{\r\n\t\tthis._blendWeights[index] = blendWeight;\r\n\r\n\t\tthis._pPositionDeltaDirty = true;\r\n\t\tthis._skeletonPoseDirty = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdatePositionDelta():void\r\n\t{\r\n\t\tthis._pPositionDeltaDirty = false;\r\n\r\n\t\tvar delta:Vector3D;\r\n\t\tvar weight:number;\r\n\r\n\t\tthis.positionDelta.x = 0;\r\n\t\tthis.positionDelta.y = 0;\r\n\t\tthis.positionDelta.z = 0;\r\n\r\n\t\tfor (var j:number = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\r\n\t\t\tweight = this._blendWeights[j];\r\n\r\n\t\t\tif (weight) {\r\n\t\t\t\tdelta = this._inputs[j].positionDelta;\r\n\t\t\t\tthis.positionDelta.x += weight*delta.x;\r\n\t\t\t\tthis.positionDelta.y += weight*delta.y;\r\n\t\t\t\tthis.positionDelta.z += weight*delta.z;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the output skeleton pose of the node based on the blend weight values given to the input nodes.\r\n\t *\r\n\t * @param skeleton The skeleton used by the animator requesting the ouput pose.\r\n\t */\r\n\tprivate updateSkeletonPose(skeleton:Skeleton):void\r\n\t{\r\n\t\tthis._skeletonPoseDirty = false;\r\n\r\n\t\tvar weight:number;\r\n\t\tvar endPoses:Array<JointPose> = this._skeletonPose.jointPoses;\r\n\t\tvar poses:Array<JointPose>;\r\n\t\tvar endPose:JointPose, pose:JointPose;\r\n\t\tvar endTr:Vector3D, tr:Vector3D;\r\n\t\tvar endQuat:Quaternion, q:Quaternion;\r\n\t\tvar firstPose:Array<JointPose>;\r\n\t\tvar i:number;\r\n\t\tvar w0:number, x0:number, y0:number, z0:number;\r\n\t\tvar w1:number, x1:number, y1:number, z1:number;\r\n\t\tvar numJoints:number = skeleton.numJoints;\r\n\r\n\t\t// :s\r\n\t\tif (endPoses.length != numJoints)\r\n\t\t\tendPoses.length = numJoints;\r\n\r\n\t\tfor (var j:number = 0; j < this._skeletonAnimationNode.numInputs; ++j) {\r\n\t\t\tweight = this._blendWeights[j];\r\n\r\n\t\t\tif (!weight)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tposes = this._inputs[j].getSkeletonPose(skeleton).jointPoses;\r\n\r\n\t\t\tif (!firstPose) {\r\n\t\t\t\tfirstPose = poses;\r\n\t\t\t\tfor (i = 0; i < numJoints; ++i) {\r\n\t\t\t\t\tendPose = endPoses[i];\r\n\r\n\t\t\t\t\tif (endPose == null)\r\n\t\t\t\t\t\tendPose = endPoses[i] = new JointPose();\r\n\r\n\t\t\t\t\tpose = poses[i];\r\n\t\t\t\t\tq = pose.orientation;\r\n\t\t\t\t\ttr = pose.translation;\r\n\r\n\t\t\t\t\tendQuat = endPose.orientation;\r\n\r\n\t\t\t\t\tendQuat.x = weight*q.x;\r\n\t\t\t\t\tendQuat.y = weight*q.y;\r\n\t\t\t\t\tendQuat.z = weight*q.z;\r\n\t\t\t\t\tendQuat.w = weight*q.w;\r\n\r\n\t\t\t\t\tendTr = endPose.translation;\r\n\t\t\t\t\tendTr.x = weight*tr.x;\r\n\t\t\t\t\tendTr.y = weight*tr.y;\r\n\t\t\t\t\tendTr.z = weight*tr.z;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (i = 0; i < skeleton.numJoints; ++i) {\r\n\t\t\t\t\tendPose = endPoses[i];\r\n\t\t\t\t\tpose = poses[i];\r\n\r\n\t\t\t\t\tq = firstPose[i].orientation;\r\n\t\t\t\t\tx0 = q.x;\r\n\t\t\t\t\ty0 = q.y;\r\n\t\t\t\t\tz0 = q.z;\r\n\t\t\t\t\tw0 = q.w;\r\n\r\n\t\t\t\t\tq = pose.orientation;\r\n\t\t\t\t\ttr = pose.translation;\r\n\r\n\t\t\t\t\tx1 = q.x;\r\n\t\t\t\t\ty1 = q.y;\r\n\t\t\t\t\tz1 = q.z;\r\n\t\t\t\t\tw1 = q.w;\r\n\t\t\t\t\t// find shortest direction\r\n\t\t\t\t\tif (x0*x1 + y0*y1 + z0*z1 + w0*w1 < 0) {\r\n\t\t\t\t\t\tx1 = -x1;\r\n\t\t\t\t\t\ty1 = -y1;\r\n\t\t\t\t\t\tz1 = -z1;\r\n\t\t\t\t\t\tw1 = -w1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tendQuat = endPose.orientation;\r\n\t\t\t\t\tendQuat.x += weight*x1;\r\n\t\t\t\t\tendQuat.y += weight*y1;\r\n\t\t\t\t\tendQuat.z += weight*z1;\r\n\t\t\t\t\tendQuat.w += weight*w1;\r\n\r\n\t\t\t\t\tendTr = endPose.translation;\r\n\t\t\t\t\tendTr.x += weight*tr.x;\r\n\t\t\t\t\tendTr.y += weight*tr.y;\r\n\t\t\t\t\tendTr.z += weight*tr.z;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < skeleton.numJoints; ++i)\r\n\t\t\tendPoses[i].orientation.normalize();\r\n\t}\r\n}",
    "import {Graphics}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphics\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {VertexAnimator}\t\t\t\t\tfrom \"../../animators/VertexAnimator\";\r\nimport {VertexClipNode}\t\t\t\t\tfrom \"../../animators/nodes/VertexClipNode\";\r\nimport {AnimationClipState}\t\t\t\tfrom \"../../animators/states/AnimationClipState\";\r\nimport {IVertexAnimationState}\t\t\tfrom \"../../animators/states/IVertexAnimationState\";\r\n\r\n/**\r\n *\r\n */\r\nexport class VertexClipState extends AnimationClipState implements IVertexAnimationState\r\n{\r\n\tprivate _frames:Array<Graphics>;\r\n\tprivate _vertexClipNode:VertexClipNode;\r\n\tprivate _currentGraphics:Graphics;\r\n\tprivate _nextGraphics:Graphics;\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic get currentGraphics():Graphics\r\n\t{\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\treturn this._currentGraphics;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic get nextGraphics():Graphics\r\n\t{\r\n\t\tif (this._pFramesDirty)\r\n\t\t\tthis._pUpdateFrames();\r\n\r\n\t\treturn this._nextGraphics;\r\n\t}\r\n\r\n\tconstructor(animator:AnimatorBase, vertexClipNode:VertexClipNode)\r\n\t{\r\n\t\tsuper(animator, vertexClipNode);\r\n\r\n\t\tthis._vertexClipNode = vertexClipNode;\r\n\t\tthis._frames = this._vertexClipNode.frames;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateFrames():void\r\n\t{\r\n\t\tsuper._pUpdateFrames();\r\n\r\n\t\tthis._currentGraphics = this._frames[this._pCurrentFrame];\r\n\r\n\t\tif (this._vertexClipNode.looping && this._pNextFrame >= this._vertexClipNode.lastFrame) {\r\n\t\t\tthis._nextGraphics = this._frames[0];\r\n\t\t\t(<VertexAnimator> this._pAnimator).dispatchCycleEvent();\r\n\t\t} else\r\n\t\t\tthis._nextGraphics = this._frames[this._pNextFrame];\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdatePositionDelta():void\r\n\t{\r\n\t\t//TODO:implement positiondelta functionality for vertex animations\r\n\t}\r\n}",
    "import {SkeletonBinaryLERPNode}\t\t\tfrom \"../../animators/nodes/SkeletonBinaryLERPNode\";\r\nimport {CrossfadeTransitionState}\t\t\tfrom \"../../animators/transitions/CrossfadeTransitionState\";\r\n\r\n/**\r\n * A skeleton animation node that uses two animation node inputs to blend a lineraly interpolated output of a skeleton pose.\r\n */\r\nexport class CrossfadeTransitionNode extends SkeletonBinaryLERPNode\r\n{\r\n\tpublic blendSpeed:number;\r\n\r\n\tpublic startBlend:number;\r\n\r\n\t/**\r\n\t * Creates a new <code>CrossfadeTransitionNode</code> object.\r\n\t */\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._pStateClass = CrossfadeTransitionState;\r\n\t}\r\n}",
    "import {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {SkeletonBinaryLERPNode}\t\t\tfrom \"../../animators/nodes/SkeletonBinaryLERPNode\";\r\nimport {SkeletonBinaryLERPState}\t\t\tfrom \"../../animators/states/SkeletonBinaryLERPState\";\r\nimport {CrossfadeTransitionNode}\t\t\tfrom \"../../animators/transitions/CrossfadeTransitionNode\";\r\nimport {AnimationStateEvent}\t\t\t\tfrom \"../../animators/../events/AnimationStateEvent\";\r\n\r\n/**\r\n *\r\n */\r\nexport class CrossfadeTransitionState extends SkeletonBinaryLERPState\r\n{\r\n\tprivate _crossfadeTransitionNode:CrossfadeTransitionNode;\r\n\tprivate _animationStateTransitionComplete:AnimationStateEvent;\r\n\r\n\tconstructor(animator:AnimatorBase, skeletonAnimationNode:CrossfadeTransitionNode)\r\n\t{\r\n\t\tsuper(animator, <SkeletonBinaryLERPNode> skeletonAnimationNode);\r\n\r\n\t\tthis._crossfadeTransitionNode = skeletonAnimationNode;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateTime(time:number):void\r\n\t{\r\n\t\tthis.blendWeight = Math.abs(time - this._crossfadeTransitionNode.startBlend)/(1000*this._crossfadeTransitionNode.blendSpeed);\r\n\r\n\t\tif (this.blendWeight >= 1) {\r\n\t\t\tthis.blendWeight = 1;\r\n\r\n\t\t\tif (this._animationStateTransitionComplete == null)\r\n\t\t\t\tthis._animationStateTransitionComplete = new AnimationStateEvent(AnimationStateEvent.TRANSITION_COMPLETE, this._pAnimator, this, this._crossfadeTransitionNode);\r\n\r\n\t\t\tthis._crossfadeTransitionNode.dispatchEvent(this._animationStateTransitionComplete);\r\n\t\t}\r\n\r\n\t\tsuper._pUpdateTime(time);\r\n\t}\r\n}",
    "import {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../../animators/AnimatorBase\";\r\nimport {CrossfadeTransitionNode}\t\t\tfrom \"../../animators/transitions/CrossfadeTransitionNode\";\r\nimport {IAnimationTransition}\t\t\t\tfrom \"../../animators/transitions/IAnimationTransition\";\r\n\r\n/**\r\n *\r\n */\r\nexport class CrossfadeTransition implements IAnimationTransition\r\n{\r\n\tpublic blendSpeed:number = 0.5;\r\n\r\n\tconstructor(blendSpeed:number)\r\n\t{\r\n\t\tthis.blendSpeed = blendSpeed;\r\n\t}\r\n\r\n\tpublic getAnimationNode(animator:AnimatorBase, startNode:AnimationNodeBase, endNode:AnimationNodeBase, startBlend:number):AnimationNodeBase\r\n\t{\r\n\t\tvar crossFadeTransitionNode:CrossfadeTransitionNode = new CrossfadeTransitionNode();\r\n\t\tcrossFadeTransitionNode.inputA = startNode;\r\n\t\tcrossFadeTransitionNode.inputB = endNode;\r\n\t\tcrossFadeTransitionNode.blendSpeed = this.blendSpeed;\r\n\t\tcrossFadeTransitionNode.startBlend = startBlend;\r\n\r\n\t\treturn <AnimationNodeBase> crossFadeTransitionNode;\r\n\t}\r\n}",
    "export {AnimationElements}\t\t\t\tfrom \"./animators/data/AnimationElements\";\r\nexport {AnimationRegisterData}\t\t\tfrom \"./animators/data/AnimationRegisterData\";\r\nexport {ColorSegmentPoint}\t\t\t\tfrom \"./animators/data/ColorSegmentPoint\";\r\nexport {JointPose}\t\t\t\t\t\tfrom \"./animators/data/JointPose\";\r\nexport {ParticleAnimationData}\t\t\tfrom \"./animators/data/ParticleAnimationData\";\r\nexport {ParticleProperties}\t\t\t\tfrom \"./animators/data/ParticleProperties\";\r\nexport {ParticlePropertiesMode}\t\t\tfrom \"./animators/data/ParticlePropertiesMode\";\r\nexport {Skeleton}\t\t\t\t\t\tfrom \"./animators/data/Skeleton\";\r\nexport {SkeletonJoint}\t\t\t\t\tfrom \"./animators/data/SkeletonJoint\";\r\nexport {SkeletonPose}\t\t\t\t\tfrom \"./animators/data/SkeletonPose\";\r\nexport {VertexAnimationMode}\t\t\t\tfrom \"./animators/data/VertexAnimationMode\";\r\nexport {AnimationClipNodeBase}\t\t\tfrom \"./animators/nodes/AnimationClipNodeBase\";\r\nexport {ParticleAccelerationNode}\t\tfrom \"./animators/nodes/ParticleAccelerationNode\";\r\nexport {ParticleBezierCurveNode}\t\t\tfrom \"./animators/nodes/ParticleBezierCurveNode\";\r\nexport {ParticleBillboardNode}\t\t\tfrom \"./animators/nodes/ParticleBillboardNode\";\r\nexport {ParticleColorNode}\t\t\t\tfrom \"./animators/nodes/ParticleColorNode\";\r\nexport {ParticleFollowNode}\t\t\t\tfrom \"./animators/nodes/ParticleFollowNode\";\r\nexport {ParticleInitialColorNode}\t\tfrom \"./animators/nodes/ParticleInitialColorNode\";\r\nexport {ParticleNodeBase}\t\t\t\tfrom \"./animators/nodes/ParticleNodeBase\";\r\nexport {ParticleOrbitNode}\t\t\t\tfrom \"./animators/nodes/ParticleOrbitNode\";\r\nexport {ParticleOscillatorNode}\t\t\tfrom \"./animators/nodes/ParticleOscillatorNode\";\r\nexport {ParticlePositionNode}\t\t\tfrom \"./animators/nodes/ParticlePositionNode\";\r\nexport {ParticleRotateToHeadingNode}\t\tfrom \"./animators/nodes/ParticleRotateToHeadingNode\";\r\nexport {ParticleRotateToPositionNode}\tfrom \"./animators/nodes/ParticleRotateToPositionNode\";\r\nexport {ParticleRotationalVelocityNode}\tfrom \"./animators/nodes/ParticleRotationalVelocityNode\";\r\nexport {ParticleScaleNode}\t\t\t\tfrom \"./animators/nodes/ParticleScaleNode\";\r\nexport {ParticleSegmentedColorNode}\t\tfrom \"./animators/nodes/ParticleSegmentedColorNode\";\r\nexport {ParticleSpriteSheetNode}\t\t\tfrom \"./animators/nodes/ParticleSpriteSheetNode\";\r\nexport {ParticleTimeNode}\t\t\t\tfrom \"./animators/nodes/ParticleTimeNode\";\r\nexport {ParticleUVNode}\t\t\t\t\tfrom \"./animators/nodes/ParticleUVNode\";\r\nexport {ParticleVelocityNode}\t\t\tfrom \"./animators/nodes/ParticleVelocityNode\";\r\nexport {SkeletonBinaryLERPNode}\t\t\tfrom \"./animators/nodes/SkeletonBinaryLERPNode\";\r\nexport {SkeletonClipNode}\t\t\t\tfrom \"./animators/nodes/SkeletonClipNode\";\r\nexport {SkeletonDifferenceNode}\t\t\tfrom \"./animators/nodes/SkeletonDifferenceNode\";\r\nexport {SkeletonDirectionalNode}\t\t\tfrom \"./animators/nodes/SkeletonDirectionalNode\";\r\nexport {SkeletonNaryLERPNode}\t\t\tfrom \"./animators/nodes/SkeletonNaryLERPNode\";\r\nexport {VertexClipNode}\t\t\t\t\tfrom \"./animators/nodes/VertexClipNode\";\r\nexport {AnimationClipState}\t\t\t\tfrom \"./animators/states/AnimationClipState\";\r\nexport {AnimationStateBase}\t\t\t\tfrom \"./animators/states/AnimationStateBase\";\r\nexport {IAnimationState}\t\t\t\t\tfrom \"./animators/states/IAnimationState\";\r\nexport {ISkeletonAnimationState}\t\t\tfrom \"./animators/states/ISkeletonAnimationState\";\r\nexport {IVertexAnimationState}\t\t\tfrom \"./animators/states/IVertexAnimationState\";\r\nexport {ParticleAccelerationState}\t\tfrom \"./animators/states/ParticleAccelerationState\";\r\nexport {ParticleBezierCurveState}\t\tfrom \"./animators/states/ParticleBezierCurveState\";\r\nexport {ParticleBillboardState}\t\t\tfrom \"./animators/states/ParticleBillboardState\";\r\nexport {ParticleColorState}\t\t\t\tfrom \"./animators/states/ParticleColorState\";\r\nexport {ParticleFollowState}\t\t\t\tfrom \"./animators/states/ParticleFollowState\";\r\nexport {ParticleInitialColorState}\t\tfrom \"./animators/states/ParticleInitialColorState\";\r\nexport {ParticleStateBase}\t\t\t\tfrom \"./animators/states/ParticleStateBase\";\r\nexport {ParticleOrbitState}\t\t\t\tfrom \"./animators/states/ParticleOrbitState\";\r\nexport {ParticleOscillatorState}\t\t\tfrom \"./animators/states/ParticleOscillatorState\";\r\nexport {ParticlePositionState}\t\t\tfrom \"./animators/states/ParticlePositionState\";\r\nexport {ParticleRotateToHeadingState}\tfrom \"./animators/states/ParticleRotateToHeadingState\";\r\nexport {ParticleRotateToPositionState}\tfrom \"./animators/states/ParticleRotateToPositionState\";\r\nexport {ParticleRotationalVelocityState}\tfrom \"./animators/states/ParticleRotationalVelocityState\";\r\nexport {ParticleScaleState}\t\t\t\tfrom \"./animators/states/ParticleScaleState\";\r\nexport {ParticleSegmentedColorState}\t\tfrom \"./animators/states/ParticleSegmentedColorState\";\r\nexport {ParticleSpriteSheetState}\t\tfrom \"./animators/states/ParticleSpriteSheetState\";\r\nexport {ParticleTimeState}\t\t\t\tfrom \"./animators/states/ParticleTimeState\";\r\nexport {ParticleUVState}\t\t\t\t\tfrom \"./animators/states/ParticleUVState\";\r\nexport {ParticleVelocityState}\t\t\tfrom \"./animators/states/ParticleVelocityState\";\r\nexport {SkeletonBinaryLERPState}\t\t\tfrom \"./animators/states/SkeletonBinaryLERPState\";\r\nexport {SkeletonClipState}\t\t\t\tfrom \"./animators/states/SkeletonClipState\";\r\nexport {SkeletonDifferenceState}\t\t\tfrom \"./animators/states/SkeletonDifferenceState\";\r\nexport {SkeletonDirectionalState}\t\tfrom \"./animators/states/SkeletonDirectionalState\";\r\nexport {SkeletonNaryLERPState}\t\t\tfrom \"./animators/states/SkeletonNaryLERPState\";\r\nexport {VertexClipState}\t\t\t\t\tfrom \"./animators/states/VertexClipState\";\r\nexport {CrossfadeTransition}\t\t\t\tfrom \"./animators/transitions/CrossfadeTransition\";\r\nexport {CrossfadeTransitionNode}\t\t\tfrom \"./animators/transitions/CrossfadeTransitionNode\";\r\nexport {CrossfadeTransitionState}\t\tfrom \"./animators/transitions/CrossfadeTransitionState\";\r\nexport {IAnimationTransition}\t\t\tfrom \"./animators/transitions/IAnimationTransition\";\r\nexport {AnimationSetBase}\t\t\t\tfrom \"./animators/AnimationSetBase\";\r\nexport {AnimatorBase}\t\t\t\t\tfrom \"./animators/AnimatorBase\";\r\nexport {ParticleAnimationSet}\t\t\tfrom \"./animators/ParticleAnimationSet\";\r\nexport {ParticleAnimator}\t\t\t\tfrom \"./animators/ParticleAnimator\";\r\nexport {SkeletonAnimationSet}\t\t\tfrom \"./animators/SkeletonAnimationSet\";\r\nexport {SkeletonAnimator}\t\t\t\tfrom \"./animators/SkeletonAnimator\";\r\nexport {VertexAnimationSet}\t\t\t\tfrom \"./animators/VertexAnimationSet\";\r\nexport {VertexAnimator}\t\t\t\t\tfrom \"./animators/VertexAnimator\";",
    "import {Short3Attributes}\t\t\t\tfrom \"awayjs-core/lib/attributes/Short3Attributes\";\r\nimport {AttributesView}\t\t\t\tfrom \"awayjs-core/lib/attributes/AttributesView\";\r\nimport {AttributesBuffer}\t\t\t\tfrom \"awayjs-core/lib/attributes/AttributesBuffer\";\r\nimport {AbstractionBase}\t\t\t\tfrom \"awayjs-core/lib/library/AbstractionBase\";\r\nimport {IAbstractionPool}\t\t\t\tfrom \"awayjs-core/lib/library/IAbstractionPool\";\r\nimport {AbstractMethodError}\t\t\tfrom \"awayjs-core/lib/errors/AbstractMethodError\";\r\nimport {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {GL_AttributesBuffer}\t\t\tfrom \"awayjs-stagegl/lib/attributes/GL_AttributesBuffer\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {ElementsBase}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsBase\";\r\nimport {ElementsEvent}\t\t\t\tfrom \"awayjs-display/lib/events/ElementsEvent\";\r\nimport {ElementsUtils}\t\t\t\tfrom \"awayjs-display/lib/utils/ElementsUtils\";\r\n\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\n\r\n/**\r\n *\r\n * @class away.pool.GL_ElementsBaseBase\r\n */\r\nexport class GL_ElementsBase extends AbstractionBase\r\n{\r\n\tpublic usages:number = 0;\r\n\tprivate _elements:ElementsBase;\r\n\tpublic _stage:Stage;\r\n\tprivate _onInvalidateIndicesDelegate:(event:ElementsEvent) => void;\r\n\tprivate _onClearIndicesDelegate:(event:ElementsEvent) => void;\r\n\tprivate _onInvalidateVerticesDelegate:(event:ElementsEvent) => void;\r\n\tprivate _onClearVerticesDelegate:(event:ElementsEvent) => void;\r\n\tprivate _overflow:GL_ElementsBase;\r\n\tpublic _indices:GL_AttributesBuffer;\r\n\tprivate _indicesUpdated:boolean;\r\n\tprivate _vertices:Object = new Object();\r\n\tprivate _verticesUpdated:Object = new Object();\r\n\r\n\tpublic _indexMappings:Array<number> = Array<number>();\r\n\t\r\n\tprivate _numIndices:number = 0;\r\n\r\n\tprivate _numVertices:number;\r\n\t\r\n\tpublic get elementsType():string\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\t\r\n\tpublic get elementsClass():IElementsClassGL\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic get elements():ElementsBase\r\n\t{\r\n\t\treturn this._elements;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get numIndices():number\r\n\t{\r\n\t\treturn this._numIndices;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get numVertices():number\r\n\t{\r\n\t\treturn this._numVertices;\r\n\t}\r\n\t\r\n\tconstructor(elements:ElementsBase, stage:Stage)\r\n\t{\r\n\t\tsuper(elements, stage);\r\n\t\t\r\n\t\tthis._elements = elements;\r\n\t\tthis._stage = stage;\r\n\r\n\t\tthis._onInvalidateIndicesDelegate = (event:ElementsEvent) => this._onInvalidateIndices(event);\r\n\t\tthis._onClearIndicesDelegate = (event:ElementsEvent) => this._onClearIndices(event);\r\n\t\tthis._onInvalidateVerticesDelegate = (event:ElementsEvent) => this._onInvalidateVertices(event);\r\n\t\tthis._onClearVerticesDelegate = (event:ElementsEvent) => this._onClearVertices(event);\r\n\r\n\t\tthis._elements.addEventListener(ElementsEvent.CLEAR_INDICES, this._onClearIndicesDelegate);\r\n\t\tthis._elements.addEventListener(ElementsEvent.INVALIDATE_INDICES, this._onInvalidateIndicesDelegate);\r\n\r\n\t\tthis._elements.addEventListener(ElementsEvent.CLEAR_VERTICES, this._onClearVerticesDelegate);\r\n\t\tthis._elements.addEventListener(ElementsEvent.INVALIDATE_VERTICES, this._onInvalidateVerticesDelegate);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic getIndexMappings():Array<number>\r\n\t{\r\n\t\tif (!this._indicesUpdated)\r\n\t\t\tthis._updateIndices();\r\n\r\n\t\treturn this._indexMappings;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic getIndexBufferGL():GL_AttributesBuffer\r\n\t{\r\n\t\tif (!this._indicesUpdated)\r\n\t\t\tthis._updateIndices();\r\n\r\n\t\treturn this._indices;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic getVertexBufferGL(attributesView:AttributesView):GL_AttributesBuffer\r\n\t{\r\n\t\t//first check if indices need updating which may affect vertices\r\n\t\tif (!this._indicesUpdated)\r\n\t\t\tthis._updateIndices();\r\n\r\n\t\tvar bufferId:number = attributesView.attributesBuffer.id;\r\n\r\n\t\tif (!this._verticesUpdated[bufferId])\r\n\t\t\tthis._updateVertices(attributesView);\r\n\r\n\t\treturn this._vertices[bufferId];\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic activateVertexBufferVO(index:number, attributesView:AttributesView, dimensions:number = 0, offset:number = 0):void\r\n\t{\r\n\t\tthis.getVertexBufferGL(attributesView).activate(index, attributesView.size, dimensions || attributesView.dimensions, attributesView.offset + offset, attributesView.unsigned);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._elements.removeEventListener(ElementsEvent.CLEAR_INDICES, this._onClearIndicesDelegate);\r\n\t\tthis._elements.removeEventListener(ElementsEvent.INVALIDATE_INDICES, this._onInvalidateIndicesDelegate);\r\n\r\n\t\tthis._elements.removeEventListener(ElementsEvent.CLEAR_VERTICES, this._onClearVerticesDelegate);\r\n\t\tthis._elements.removeEventListener(ElementsEvent.INVALIDATE_VERTICES, this._onInvalidateVerticesDelegate);\r\n\r\n\t\tthis._elements = null;\r\n\r\n\t\tif (this._overflow) {\r\n\t\t\tthis._overflow.onClear(event);\r\n\t\t\tthis._overflow = null;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, shader:ShaderBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tif (!this._verticesUpdated)\r\n\t\t\tthis._updateIndices();\r\n\r\n\t\t//TODO replace overflow system with something sensible\r\n\t\t//this._render(renderable, camera, viewProjection);\r\n\t\t//\r\n\t\t// if (this._overflow)\r\n\t\t// \tthis._overflow._iRender(renderable, camera, viewProjection);\r\n\t}\r\n\r\n\tpublic draw(renderable:GL_RenderableBase, shader:ShaderBase, camera:Camera, viewProjection:Matrix3D, count:number, offset:number):void\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic _updateIndices(indexOffset:number = 0):void\r\n\t{\r\n\t\tvar indices:Short3Attributes = this._elements.indices;\r\n\t\tif (indices) {\r\n\t\t\tthis._indices = <GL_AttributesBuffer> this._stage.getAbstraction(ElementsUtils.getSubIndices(indices, this._elements.numVertices, this._indexMappings, indexOffset));\r\n\t\t\tthis._numIndices = this._indices._attributesBuffer.count*indices.dimensions;\r\n\t\t} else {\r\n\t\t\tthis._indices = null;\r\n\t\t\tthis._numIndices = 0;\r\n\t\t\tthis._indexMappings  = Array<number>();\r\n\t\t}\r\n\r\n\t\tindexOffset += this._numIndices;\r\n\r\n\t\t//check if there is more to split\r\n\t\tif (indices && indexOffset < indices.count*this._elements.indices.dimensions) {\r\n\t\t\tif (!this._overflow)\r\n\t\t\t\tthis._overflow = this._pGetOverflowElements();\r\n\r\n\t\t\tthis._overflow._updateIndices(indexOffset);\r\n\t\t} else if (this._overflow) {\r\n\t\t\tthis._overflow.onClear(new AssetEvent(AssetEvent.CLEAR, this._elements));\r\n\t\t\tthis._overflow = null;\r\n\t\t}\r\n\r\n\t\tthis._indicesUpdated = true;\r\n\r\n\t\t//invalidate vertices if index mappings exist\r\n\t\tif (this._indexMappings.length)\r\n\t\t\tfor (var key in this._verticesUpdated)\r\n\t\t\t\tthis._verticesUpdated[key] = false;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param attributesView\r\n\t * @private\r\n\t */\r\n\tprivate _updateVertices(attributesView:AttributesView):void\r\n\t{\r\n\t\tthis._numVertices = this._elements.numVertices;\r\n\r\n\t\tvar bufferId:number = attributesView.attributesBuffer.id;\r\n\r\n\t\tthis._vertices[bufferId] = <GL_AttributesBuffer> this._stage.getAbstraction(ElementsUtils.getSubVertices(attributesView.attributesBuffer, this._indexMappings));\r\n\r\n\t\tthis._verticesUpdated[bufferId] = true;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param event\r\n\t * @private\r\n\t */\r\n\tpublic _onInvalidateIndices(event:ElementsEvent):void\r\n\t{\r\n\t\tif (!event.attributesView)\r\n\t\t\treturn;\r\n\r\n\t\tthis._indicesUpdated = false;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param event\r\n\t * @private\r\n\t */\r\n\tpublic _onClearIndices(event:ElementsEvent):void\r\n\t{\r\n\t\tif (!event.attributesView)\r\n\t\t\treturn;\r\n\r\n\t\tthis._indices.onClear(new AssetEvent(AssetEvent.CLEAR, event.attributesView));\r\n\t\tthis._indices = null;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param event\r\n\t * @private\r\n\t */\r\n\tpublic _onInvalidateVertices(event:ElementsEvent):void\r\n\t{\r\n\t\tif (!event.attributesView)\r\n\t\t\treturn;\r\n\r\n\t\tvar bufferId:number = event.attributesView.attributesBuffer.id;\r\n\r\n\t\tthis._verticesUpdated[bufferId] = false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param event\r\n\t * @private\r\n\t */\r\n\tpublic _onClearVertices(event:ElementsEvent):void\r\n\t{\r\n\t\tif (!event.attributesView)\r\n\t\t\treturn;\r\n\r\n\t\tvar bufferId:number = event.attributesView.attributesBuffer.id;\r\n\r\n\t\tif (this._vertices[bufferId]) {\r\n\t\t\tthis._vertices[bufferId].onClear(new AssetEvent(AssetEvent.CLEAR, event.attributesView));\r\n\t\t\tdelete this._vertices[bufferId];\r\n\t\t\tdelete this._verticesUpdated[bufferId];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param renderable\r\n\t * @param level\r\n\t * @param indexOffset\r\n\t * @returns {away.pool.GL_GraphicRenderable}\r\n\t * @protected\r\n\t */\r\n\tpublic _pGetOverflowElements():GL_ElementsBase\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\nimport {ContextGLDrawMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLDrawMode\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {LineElements}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/LineElements\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\n\r\n/**\r\n *\r\n * @class away.pool.GL_LineElements\r\n */\r\nexport class GL_LineElements extends GL_ElementsBase\r\n{\r\n\tpublic static elementsType:string = \"[elements Line]\";\r\n\t\r\n\tpublic get elementsType():string\r\n\t{\r\n\t\treturn GL_LineElements.elementsType;\r\n\t}\r\n\t\r\n\tpublic get elementsClass():IElementsClassGL\r\n\t{\r\n\t\treturn GL_LineElements;\r\n\t}\r\n\t\r\n\tpublic static _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t\tshader.colorDependencies++;\r\n\t}\r\n\r\n\tpublic static _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\t//get the projection coordinates\r\n\t\tvar position0:ShaderRegisterElement = (shader.globalPosDependencies > 0)? sharedRegisters.globalPositionVertex : sharedRegisters.animatedPosition;\r\n\t\tvar position1:ShaderRegisterElement = registerCache.getFreeVertexAttribute();\r\n\t\tvar thickness:ShaderRegisterElement = registerCache.getFreeVertexAttribute();\r\n\r\n\t\t//reserving vertex constants for projection matrix\r\n\t\tvar viewMatrixReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tshader.viewMatrixIndex = viewMatrixReg.index*4;\r\n\r\n\t\tregisterCache.getFreeVertexConstant(); // not used\r\n\t\tvar constOne:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tvar constNegOne:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tvar misc:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\r\n\t\tvar sceneMatrixReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tshader.sceneMatrixIndex = sceneMatrixReg.index*4;\r\n\t\t\r\n\t\tvar q0:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(q0, 1);\r\n\t\tvar q1:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(q1, 1);\r\n\t\t\r\n\t\tvar l:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(l, 1);\r\n\t\tvar behind:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(behind, 1);\r\n\t\tvar qclipped:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(qclipped, 1);\r\n\t\tvar offset:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\tregisterCache.addVertexTempUsages(offset, 1);\r\n\r\n\t\treturn \"m44 \" + q0 + \", \" + position0 + \", \" + sceneMatrixReg + \"\t\t\t\\n\" + // transform Q0 to eye space\r\n\t\t\t\"m44 \" + q1 + \", \" + position1 + \", \" + sceneMatrixReg + \"\t\t\t\\n\" + // transform Q1 to eye space\r\n\t\t\t\"sub \" + l + \", \" + q1 + \", \" + q0 + \" \t\t\t\\n\" + // L = Q1 - Q0\r\n\r\n\t\t\t\t// test if behind camera near plane\r\n\t\t\t\t// if 0 - Q0.z < Camera.near then the point needs to be clipped\r\n\t\t\t\"slt \" + behind + \".x, \" + q0 + \".z, \" + misc + \".z\t\t\t\\n\" + // behind = ( 0 - Q0.z < -Camera.near ) ? 1 : 0\r\n\t\t\t\"sub \" + behind + \".y, \" + constOne + \".x, \" + behind + \".x\t\t\t\\n\" + // !behind = 1 - behind\r\n\r\n\t\t\t\t// p = point on the plane (0,0,-near)\r\n\t\t\t\t// n = plane normal (0,0,-1)\r\n\t\t\t\t// D = Q1 - Q0\r\n\t\t\t\t// t = ( dot( n, ( p - Q0 ) ) / ( dot( n, d )\r\n\r\n\t\t\t\t// solve for t where line crosses Camera.near\r\n\t\t\t\"add \" + offset + \".x, \" + q0 + \".z, \" + misc + \".z\t\t\t\\n\" + // Q0.z + ( -Camera.near )\r\n\t\t\t\"sub \" + offset + \".y, \" + q0 + \".z, \" + q1 + \".z\t\t\t\\n\" + // Q0.z - Q1.z\r\n\r\n\t\t\t\t// fix divide by zero for horizontal lines\r\n\t\t\t\"seq \" + offset + \".z, \" + offset + \".y \" + constNegOne + \".x\t\t\t\\n\" + // offset = (Q0.z - Q1.z)==0 ? 1 : 0\r\n\t\t\t\"add \" + offset + \".y, \" + offset + \".y, \" + offset + \".z\t\t\t\\n\" + // ( Q0.z - Q1.z ) + offset\r\n\r\n\t\t\t\"div \" + offset + \".z, \" + offset + \".x, \" + offset + \".y\t\t\t\\n\" + // t = ( Q0.z - near ) / ( Q0.z - Q1.z )\r\n\r\n\t\t\t\"mul \" + offset + \".xyz, \" + offset + \".zzz, \" + l + \".xyz\t\\n\" + // t(L)\r\n\t\t\t\"add \" + qclipped + \".xyz, \" + q0 + \".xyz, \" + offset + \".xyz\t\\n\" + // Qclipped = Q0 + t(L)\r\n\t\t\t\"mov \" + qclipped + \".w, \" + constOne + \".x\t\t\t\\n\" + // Qclipped.w = 1\r\n\r\n\t\t\t\t// If necessary, replace Q0 with new Qclipped\r\n\t\t\t\"mul \" + q0 + \", \" + q0 + \", \" + behind + \".yyyy\t\t\t\\n\" + // !behind * Q0\r\n\t\t\t\"mul \" + qclipped + \", \" + qclipped + \", \" + behind + \".xxxx\t\t\t\\n\" + // behind * Qclipped\r\n\t\t\t\"add \" + q0 + \", \" + q0 + \", \" + qclipped + \"\t\t\t\t\\n\" + // newQ0 = Q0 + Qclipped\r\n\r\n\t\t\t\t// calculate side vector for line\r\n\t\t\t\"nrm \" + l + \".xyz, \" + l + \".xyz\t\t\t\\n\" + // normalize( L )\r\n\t\t\t\"nrm \" + behind + \".xyz, \" + q0 + \".xyz\t\t\t\\n\" + // D = normalize( Q1 )\r\n\t\t\t\"mov \" + behind + \".w, \" + constOne + \".x\t\t\t\t\\n\" + // D.w = 1\r\n\t\t\t\"crs \" + qclipped + \".xyz, \" + l + \", \" + behind + \"\t\t\t\\n\" + // S = L x D\r\n\t\t\t\"nrm \" + qclipped + \".xyz, \" + qclipped + \".xyz\t\t\t\\n\" + // normalize( S )\r\n\r\n\t\t\t\t// face the side vector properly for the given point\r\n\t\t\t\"mul \" + qclipped + \".xyz, \" + qclipped + \".xyz, \" + thickness + \".xxx\t\\n\" + // S *= weight\r\n\t\t\t\"mov \" + qclipped + \".w, \" + constOne + \".x\t\t\t\\n\" + // S.w = 1\r\n\r\n\t\t\t\t// calculate the amount required to move at the point's distance to correspond to the line's pixel width\r\n\t\t\t\t// scale the side vector by that amount\r\n\t\t\t\"dp3 \" + offset + \".x, \" + q0 + \", \" + constNegOne + \"\t\t\t\\n\" + // distance = dot( view )\r\n\t\t\t\"mul \" + offset + \".x, \" + offset + \".x, \" + misc + \".x\t\t\t\\n\" + // distance *= vpsod\r\n\t\t\t\"mul \" + qclipped + \".xyz, \" + qclipped + \".xyz, \" + offset + \".xxx\t\\n\" + // S.xyz *= pixelScaleFactor\r\n\r\n\t\t\t\t// add scaled side vector to Q0 and transform to clip space\r\n\t\t\t\"add \" + q0 + \".xyz, \" + q0 + \".xyz, \" + qclipped + \".xyz\t\\n\" + // Q0 + S\r\n\r\n\t\t\t\"m44 op, \" + q0 + \", \" + viewMatrixReg + \"\t\t\t\\n\"  // transform Q0 to clip space\r\n\t}\r\n\r\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\t\r\n\tprivate _calcMatrix:Matrix3D = new Matrix3D();\r\n\tprivate _thickness:number = 1.25;\r\n\r\n\tprivate _lineElements:LineElements;\r\n\r\n\tconstructor(lineElements:LineElements, stage:Stage)\r\n\t{\r\n\t\tsuper(lineElements, stage);\r\n\r\n\t\tthis._lineElements = lineElements;\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._lineElements = null;\r\n\t}\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, shader:ShaderBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tsuper._setRenderState(renderable, shader, camera, viewProjection);\r\n\t\t\r\n\t\tif (shader.colorBufferIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.colorBufferIndex, this._lineElements.colors);\r\n\r\n\t\tthis.activateVertexBufferVO(0, this._lineElements.positions, 3);\r\n\t\tthis.activateVertexBufferVO(2, this._lineElements.positions, 3, 12);\r\n\t\tthis.activateVertexBufferVO(3, this._lineElements.thickness);\r\n\r\n\t\tshader.vertexConstantData[4+16] = 1;\r\n\t\tshader.vertexConstantData[5+16] = 1;\r\n\t\tshader.vertexConstantData[6+16] = 1;\r\n\t\tshader.vertexConstantData[7+16] = 1;\r\n\r\n\t\tshader.vertexConstantData[10+16] = -1;\r\n\r\n\t\tshader.vertexConstantData[12+16] = this._thickness/((this._stage.scissorRect)? Math.min(this._stage.scissorRect.width, this._stage.scissorRect.height) : Math.min(this._stage.width, this._stage.height));\r\n\t\tshader.vertexConstantData[13+16] = 1/255;\r\n\t\tshader.vertexConstantData[14+16] = camera.projection.near;\r\n\r\n\t\tvar context:IContextGL = this._stage.context;\r\n\t}\r\n\r\n\tpublic draw(renderable:GL_RenderableBase, shader:ShaderBase, camera:Camera, viewProjection:Matrix3D, count:number, offset:number):void\r\n\t{\r\n\t\tvar context:IContextGL = this._stage.context;\r\n\t\t\r\n\t\t// projection matrix\r\n\t\tcamera.projection.matrix.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\r\n\t\t\r\n\t\tthis._calcMatrix.copyFrom(renderable.sourceEntity.sceneTransform);\r\n\t\tthis._calcMatrix.append(camera.inverseSceneTransform);\r\n\t\tthis._calcMatrix.copyRawDataTo(shader.vertexConstantData, shader.sceneMatrixIndex, true);\r\n\r\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, shader.vertexConstantData);\r\n\t\t\r\n\t\tif (this._indices)\r\n\t\t\tthis.getIndexBufferGL().draw(ContextGLDrawMode.TRIANGLES, 0, this.numIndices);\r\n\t\telse\r\n\t\t\tthis._stage.context.drawVertices(ContextGLDrawMode.TRIANGLES, offset, count || this.numVertices);\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param renderable\r\n\t * @param level\r\n\t * @param indexOffset\r\n\t * @returns {away.pool.LineSubSpriteRenderable}\r\n\t * @protected\r\n\t */\r\n\tpublic _pGetOverflowElements():GL_ElementsBase\r\n\t{\r\n\t\treturn new GL_LineElements(this._lineElements, this._stage);\r\n\t}\r\n}",
    "import {Matrix3DUtils}\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3DUtils\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {ContextGLDrawMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLDrawMode\";\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\n\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {GL_TriangleElements}\t\t\tfrom \"../elements/GL_TriangleElements\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\n\r\n/**\r\n *\r\n * @class away.pool.GL_SkyboxElements\r\n */\r\nexport class GL_SkyboxElements extends GL_TriangleElements\r\n{\r\n\tprivate _skyboxProjection:Matrix3D = new Matrix3D();\r\n\t\r\n\tpublic static elementsType:string = \"[elements Skybox]\";\r\n\r\n\tpublic get elementsType():string\r\n\t{\r\n\t\treturn GL_SkyboxElements.elementsType;\r\n\t}\r\n\t\r\n\tpublic get elementsClass():IElementsClassGL\r\n\t{\r\n\t\treturn GL_SkyboxElements;\r\n\t}\r\n\t\r\n\tpublic static _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic static _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\r\n\t\t//get the projection coordinates\r\n\t\tvar position:ShaderRegisterElement = (shader.globalPosDependencies > 0)? sharedRegisters.globalPositionVertex : sharedRegisters.animatedPosition;\r\n\r\n\t\t//reserving vertex constants for projection matrix\r\n\t\tvar viewMatrixReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tshader.viewMatrixIndex = viewMatrixReg.index*4;\r\n\r\n\t\tvar scenePosition:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tshader.scenePositionIndex = scenePosition.index*4;\r\n\r\n\t\tvar skyboxScale:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\t\r\n\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\r\n\t\tcode += \"mul \" + temp + \", \" + position + \", \" + skyboxScale + \"\\n\" +\r\n\t\t\t\"add \" + temp + \", \" + temp + \", \" + scenePosition + \"\\n\";\r\n\r\n\t\tif (shader.projectionDependencies > 0) {\r\n\t\t\tsharedRegisters.projectionFragment = registerCache.getFreeVarying();\r\n\t\t\tcode += \"m44 \" + temp + \", \" + temp + \", \" + viewMatrixReg + \"\\n\" +\r\n\t\t\t\t\"mov \" + sharedRegisters.projectionFragment + \", \" + temp + \"\\n\" +\r\n\t\t\t\t\"mov op, \" + temp + \"\\n\";\r\n\t\t} else {\r\n\t\t\tcode += \"m44 op, \" + temp + \", \" + viewMatrixReg + \"\\n\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic draw(renderable:GL_RenderableBase, shader:ShaderBase, camera:Camera, viewProjection:Matrix3D, count:number, offset:number):void\r\n\t{\r\n\t\tvar index:number = shader.scenePositionIndex;\r\n\t\tvar pos:Vector3D = camera.scenePosition;\r\n\t\tshader.vertexConstantData[index++] = 2*pos.x;\r\n\t\tshader.vertexConstantData[index++] = 2*pos.y;\r\n\t\tshader.vertexConstantData[index++] = 2*pos.z;\r\n\t\tshader.vertexConstantData[index++] = 1;\r\n\t\tshader.vertexConstantData[index++] = shader.vertexConstantData[index++] = shader.vertexConstantData[index++] = camera.projection.far/Math.sqrt(3);\r\n\t\tshader.vertexConstantData[index] = 1;\r\n\r\n\t\tvar near:Vector3D = new Vector3D();\r\n\r\n\t\tthis._skyboxProjection.copyFrom(viewProjection);\r\n\t\tthis._skyboxProjection.copyRowTo(2, near);\r\n\r\n\t\tvar camPos:Vector3D = camera.scenePosition;\r\n\r\n\t\tvar cx:number = near.x;\r\n\t\tvar cy:number = near.y;\r\n\t\tvar cz:number = near.z;\r\n\t\tvar cw:number = -(near.x*camPos.x + near.y*camPos.y + near.z*camPos.z + Math.sqrt(cx*cx + cy*cy + cz*cz));\r\n\r\n\t\tvar signX:number = cx >= 0? 1 : -1;\r\n\t\tvar signY:number = cy >= 0? 1 : -1;\r\n\r\n\t\tvar p:Vector3D = new Vector3D(signX, signY, 1, 1);\r\n\r\n\t\tvar inverse:Matrix3D = this._skyboxProjection.clone();\r\n\t\tinverse.invert();\r\n\r\n\t\tvar q:Vector3D = inverse.transformVector(p);\r\n\r\n\t\tthis._skyboxProjection.copyRowTo(3, p);\r\n\r\n\t\tvar a:number = (q.x*p.x + q.y*p.y + q.z*p.z + q.w*p.w)/(cx*q.x + cy*q.y + cz*q.z + cw*q.w);\r\n\r\n\t\tthis._skyboxProjection.copyRowFrom(2, new Vector3D(cx*a, cy*a, cz*a, cw*a));\r\n\t\t\r\n\t\t//set constants\r\n\t\tif (shader.sceneMatrixIndex >= 0) {\r\n\t\t\trenderable.renderSceneTransform.copyRawDataTo(shader.vertexConstantData, shader.sceneMatrixIndex, true);\r\n\t\t\tthis._skyboxProjection.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\r\n\t\t} else {\r\n\t\t\tthis._skyboxProjection.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\r\n\t\t}\r\n\r\n\t\tvar context:IContextGL = this._stage.context;\r\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, shader.vertexConstantData);\r\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, shader.fragmentConstantData);\r\n\r\n\t\tif (this._indices)\r\n\t\t\tthis.getIndexBufferGL().draw(ContextGLDrawMode.TRIANGLES, 0, this.numIndices);\r\n\t\telse\r\n\t\t\tthis._stage.context.drawVertices(ContextGLDrawMode.TRIANGLES, offset, count || this.numVertices);\r\n\t}\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Matrix3DUtils}\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3DUtils\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\nimport {ContextGLDrawMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLDrawMode\";\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {TriangleElements}\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\n\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n *\r\n * @class away.pool.GL_TriangleElements\r\n */\r\nexport class GL_TriangleElements extends GL_ElementsBase\r\n{\r\n\tpublic static elementsType:string = \"[elements Triangle]\";\r\n\r\n\tpublic get elementsType():string\r\n\t{\r\n\t\treturn GL_TriangleElements.elementsType;\r\n\t}\r\n\t\r\n\tpublic get elementsClass():IElementsClassGL\r\n\t{\r\n\t\treturn GL_TriangleElements;\r\n\t}\r\n\t\r\n\tpublic static _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t}\r\n\r\n\tpublic static _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\t\r\n\t\t//get the projection coordinates\r\n\t\tvar position:ShaderRegisterElement = (shader.globalPosDependencies > 0)? sharedRegisters.globalPositionVertex : sharedRegisters.animatedPosition;\r\n\r\n\t\t//reserving vertex constants for projection matrix\r\n\t\tvar viewMatrixReg:ShaderRegisterElement = registerCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tregisterCache.getFreeVertexConstant();\r\n\t\tshader.viewMatrixIndex = viewMatrixReg.index*4;\r\n\r\n\t\tif (shader.projectionDependencies > 0) {\r\n\t\t\tsharedRegisters.projectionFragment = registerCache.getFreeVarying();\r\n\t\t\tvar temp:ShaderRegisterElement = registerCache.getFreeVertexVectorTemp();\r\n\t\t\tcode += \"m44 \" + temp + \", \" + position + \", \" + viewMatrixReg + \"\\n\" +\r\n\t\t\t\t\"mov \" + sharedRegisters.projectionFragment + \", \" + temp + \"\\n\" +\r\n\t\t\t\t\"mov op, \" + temp + \"\\n\";\r\n\t\t} else {\r\n\t\t\tcode += \"m44 op, \" + position + \", \" + viewMatrixReg + \"\\n\";\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic static _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tprivate _triangleElements:TriangleElements;\r\n\r\n\tconstructor(triangleElements:TriangleElements, stage:Stage)\r\n\t{\r\n\t\tsuper(triangleElements, stage);\r\n\r\n\t\tthis._triangleElements = triangleElements;\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._triangleElements = null;\r\n\t}\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, shader:ShaderBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tsuper._setRenderState(renderable, shader, camera, viewProjection);\r\n\r\n\t\t//set buffers\r\n\t\t//TODO: find a better way to update a concatenated buffer when autoderiving\r\n\t\tif (shader.normalIndex >= 0 && this._triangleElements.autoDeriveNormals)\r\n\t\t\tthis._triangleElements.normals;\r\n\r\n\t\tif (shader.tangentIndex >= 0 && this._triangleElements.autoDeriveTangents)\r\n\t\t\tthis._triangleElements.tangents;\r\n\r\n\t\tif (shader.curvesIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.curvesIndex, this._triangleElements.getCustomAtributes(\"curves\"));\r\n\r\n\t\tif (shader.uvIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.uvIndex, this._triangleElements.uvs || this._triangleElements.positions);\r\n\r\n\t\tif (shader.secondaryUVIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.secondaryUVIndex, this._triangleElements.getCustomAtributes(\"secondaryUVs\") || this._triangleElements.uvs || this._triangleElements.positions);\r\n\r\n\t\tif (shader.normalIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.normalIndex, this._triangleElements.normals);\r\n\r\n\t\tif (shader.tangentIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.tangentIndex, this._triangleElements.tangents);\r\n\r\n\t\tif (shader.jointIndexIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.jointIndexIndex, this._triangleElements.jointIndices);\r\n\r\n\t\tif (shader.jointWeightIndex >= 0)\r\n\t\t\tthis.activateVertexBufferVO(shader.jointIndexIndex, this._triangleElements.jointWeights);\r\n\r\n\t\tthis.activateVertexBufferVO(0, this._triangleElements.positions);\r\n\t}\r\n\r\n\tpublic draw(renderable:GL_RenderableBase, shader:ShaderBase, camera:Camera, viewProjection:Matrix3D, count:number, offset:number):void\r\n\t{\r\n\t\t//set constants\r\n\t\tif (shader.sceneMatrixIndex >= 0) {\r\n\t\t\trenderable.renderSceneTransform.copyRawDataTo(shader.vertexConstantData, shader.sceneMatrixIndex, true);\r\n\t\t\tviewProjection.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\r\n\t\t} else {\r\n\t\t\tvar matrix3D:Matrix3D = Matrix3DUtils.CALCULATION_MATRIX;\r\n\r\n\t\t\tmatrix3D.copyFrom(renderable.renderSceneTransform);\r\n\t\t\tmatrix3D.append(viewProjection);\r\n\r\n\t\t\tmatrix3D.copyRawDataTo(shader.vertexConstantData, shader.viewMatrixIndex, true);\r\n\t\t}\r\n\r\n\t\tvar context:IContextGL = this._stage.context;\r\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, shader.vertexConstantData);\r\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, shader.fragmentConstantData);\r\n\r\n\t\tif (this._indices)\r\n\t\t\tthis.getIndexBufferGL().draw(ContextGLDrawMode.TRIANGLES, 0, this.numIndices);\r\n\t\telse\r\n\t\t\tthis._stage.context.drawVertices(ContextGLDrawMode.TRIANGLES, offset, count || this.numVertices);\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param renderable\r\n\t * @param level\r\n\t * @param indexOffset\r\n\t * @returns {away.pool.GL_GraphicRenderable}\r\n\t * @protected\r\n\t */\r\n\tpublic _pGetOverflowElements():GL_ElementsBase\r\n\t{\r\n\t\treturn new GL_TriangleElements(this._triangleElements, this._stage);\r\n\t}\r\n}",
    "export {GL_ElementsBase}\t\t\t\t\tfrom \"./elements/GL_ElementsBase\";\r\nexport {GL_LineElements}\t\t\t\t\tfrom \"./elements/GL_LineElements\";\r\nexport {GL_SkyboxElements}\t\t\t\tfrom \"./elements/GL_SkyboxElements\";\r\nexport {GL_TriangleElements}\t\t\t\tfrom \"./elements/GL_TriangleElements\";\r\nexport {IElementsClassGL}\t\t\t\tfrom \"./elements/IElementsClassGL\";",
    "import {ErrorBase}\t\t\t\t\tfrom \"awayjs-core/lib/errors/ErrorBase\";\r\n\r\nexport class AnimationSetError extends ErrorBase\r\n{\r\n\tconstructor(message:string)\r\n\t{\r\n\t\tsuper(message);\r\n\t}\r\n}",
    "export {AnimationSetError}\t\t\t\tfrom \"./errors/AnimationSetError\";",
    "import {AnimationNodeBase}\t\t\t\tfrom \"awayjs-display/lib/animators/nodes/AnimationNodeBase\";\r\n\r\nimport {EventBase}\t\t\t\t\t\tfrom \"awayjs-core/lib/events/EventBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\nimport {IAnimationState}\t\t\t\t\tfrom \"../animators/states/IAnimationState\";\r\n\r\n/**\r\n * Dispatched to notify changes in an animation state's state.\r\n */\r\nexport class AnimationStateEvent extends EventBase\r\n{\r\n\t/**\r\n\t * Dispatched when a non-looping clip node inside an animation state reaches the end of its timeline.\r\n\t */\r\n\tpublic static PLAYBACK_COMPLETE:string = \"playbackComplete\";\r\n\r\n\tpublic static TRANSITION_COMPLETE:string = \"transitionComplete\";\r\n\r\n\tprivate _animator:AnimatorBase;\r\n\tprivate _animationState:IAnimationState;\r\n\tprivate _animationNode:AnimationNodeBase;\r\n\r\n\t/**\r\n\t * Create a new <code>AnimatonStateEvent</code>\r\n\t *\r\n\t * @param type The event type.\r\n\t * @param animator The animation state object that is the subject of this event.\r\n\t * @param animationNode The animation node inside the animation state from which the event originated.\r\n\t */\r\n\tconstructor(type:string, animator:AnimatorBase, animationState:IAnimationState, animationNode:AnimationNodeBase)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t\tthis._animator = animator;\r\n\t\tthis._animationState = animationState;\r\n\t\tthis._animationNode = animationNode;\r\n\t}\r\n\r\n\t/**\r\n\t * The animator object that is the subject of this event.\r\n\t */\r\n\tpublic get animator():AnimatorBase\r\n\t{\r\n\t\treturn this._animator;\r\n\t}\r\n\r\n\t/**\r\n\t * The animation state object that is the subject of this event.\r\n\t */\r\n\tpublic get animationState():IAnimationState\r\n\t{\r\n\t\treturn this._animationState;\r\n\t}\r\n\r\n\t/**\r\n\t * The animation node inside the animation state from which the event originated.\r\n\t */\r\n\tpublic get animationNode():AnimationNodeBase\r\n\t{\r\n\t\treturn this._animationNode;\r\n\t}\r\n\r\n\t/**\r\n\t * Clones the event.\r\n\t *\r\n\t * @return An exact duplicate of the current object.\r\n\t */\r\n\tpublic clone():AnimationStateEvent\r\n\t{\r\n\t\treturn new AnimationStateEvent(this.type, this._animator, this._animationState, this._animationNode);\r\n\t}\r\n}",
    "import {EventBase}\t\t\t\t\tfrom \"awayjs-core/lib/events/EventBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\n\r\n/**\r\n * Dispatched to notify changes in an animator's state.\r\n */\r\nexport class AnimatorEvent extends EventBase\r\n{\r\n\t/**\r\n\t * Defines the value of the type property of a start event object.\r\n\t */\r\n\tpublic static START:string = \"animatorStart\";\r\n\r\n\t/**\r\n\t * Defines the value of the type property of a stop event object.\r\n\t */\r\n\tpublic static STOP:string = \"animatorStop\";\r\n\r\n\t/**\r\n\t * Defines the value of the type property of a cycle complete event object.\r\n\t */\r\n\tpublic static CYCLE_COMPLETE:string = \"animatorCycleComplete\";\r\n\r\n\tprivate _animator:AnimatorBase;\r\n\r\n\t/**\r\n\t * Create a new <code>AnimatorEvent</code> object.\r\n\t *\r\n\t * @param type The event type.\r\n\t * @param animator The animator object that is the subject of this event.\r\n\t */\r\n\tconstructor(type:string, animator:AnimatorBase)\r\n\t{\r\n\t\tsuper(type);\r\n\t\tthis._animator = animator;\r\n\t}\r\n\r\n\tpublic get animator():AnimatorBase\r\n\t{\r\n\t\treturn this._animator;\r\n\t}\r\n\r\n\t/**\r\n\t * Clones the event.\r\n\t *\r\n\t * @return An exact duplicate of the current event object.\r\n\t */\r\n\tpublic clone():AnimatorEvent\r\n\t{\r\n\t\treturn new AnimatorEvent(this.type, this._animator);\r\n\t}\r\n}",
    "import {EventBase}\t\t\t\tfrom \"awayjs-core/lib/events/EventBase\";\r\n\r\nimport {IPass}\t\t\t\t\tfrom \"../surfaces/passes/IPass\";\r\n\r\nexport class PassEvent extends EventBase\r\n{\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static INVALIDATE:string = \"invalidatePass\";\r\n\r\n\tprivate _pass:IPass;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get pass():IPass\r\n\t{\r\n\t\treturn this._pass;\r\n\t}\r\n\r\n\tconstructor(type:string, pass:IPass)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t\tthis._pass = pass;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic clone():PassEvent\r\n\t{\r\n\t\treturn new PassEvent(this.type, this._pass);\r\n\t}\r\n}",
    "import {EventBase}\t\t\t\tfrom \"awayjs-core/lib/events/EventBase\";\r\n\r\nimport {RTTBufferManager}\t\t\tfrom \"../managers/RTTBufferManager\";\r\n\r\nexport class RTTEvent extends EventBase\r\n{\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic static RESIZE:string = \"rttManagerResize\";\r\n\r\n\tprivate _rttManager:RTTBufferManager;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get rttManager():RTTBufferManager\r\n\t{\r\n\t\treturn this._rttManager;\r\n\t}\r\n\r\n\tconstructor(type:string, rttManager:RTTBufferManager)\r\n\t{\r\n\t\tsuper(type);\r\n\r\n\t\tthis._rttManager = rttManager;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic clone():RTTEvent\r\n\t{\r\n\t\treturn new RTTEvent(this.type, this._rttManager);\r\n\t}\r\n}",
    "import {EventBase}\t\t\t\t\tfrom \"awayjs-core/lib/events/EventBase\";\r\n\r\nexport class ShadingMethodEvent extends EventBase\r\n{\r\n\tpublic static SHADER_INVALIDATED:string = \"ShaderInvalidated\";\r\n\r\n\tconstructor(type:string)\r\n\t{\r\n\t\tsuper(type);\r\n\t}\r\n}",
    "export {AnimationStateEvent}\t\t\t\tfrom \"./events/AnimationStateEvent\";\r\nexport {AnimatorEvent}\t\t\t\t\tfrom \"./events/AnimatorEvent\";\r\nexport {PassEvent}\t\t\t\t\t\tfrom \"./events/PassEvent\";\r\nexport {RTTEvent}\t\t\t\t\t\tfrom \"./events/RTTEvent\";\r\nexport {ShadingMethodEvent}\t\t\t\tfrom \"./events/ShadingMethodEvent\";",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Filter3DHBlurTask}\t\t\tfrom \"../filters/tasks/Filter3DHBlurTask\";\r\nimport {Filter3DVBlurTask}\t\t\tfrom \"../filters/tasks/Filter3DVBlurTask\";\r\nimport {Filter3DBase}\t\t\t\t\tfrom \"../filters/Filter3DBase\";\r\n\r\nexport class BlurFilter3D extends Filter3DBase\r\n{\r\n\tprivate _hBlurTask:Filter3DHBlurTask;\r\n\tprivate _vBlurTask:Filter3DVBlurTask;\r\n\t\r\n\t/**\r\n\t * Creates a new BlurFilter3D object\r\n\t * @param blurX The amount of horizontal blur to apply\r\n\t * @param blurY The amount of vertical blur to apply\r\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\r\n\t */\r\n\tconstructor(blurX:number = 3, blurY:number = 3, stepSize:number = -1)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._hBlurTask = new Filter3DHBlurTask(blurX, stepSize);\r\n\t\tthis._vBlurTask = new Filter3DVBlurTask(blurY, stepSize);\r\n\r\n\t\tthis.addTask(this._hBlurTask);\r\n\t\tthis.addTask(this._vBlurTask);\r\n\t}\r\n\t\r\n\tpublic get blurX():number\r\n\t{\r\n\t\treturn this._hBlurTask.amount;\r\n\t}\r\n\t\r\n\tpublic set blurX(value:number)\r\n\t{\r\n\t\tthis._hBlurTask.amount = value;\r\n\t}\r\n\t\r\n\tpublic get blurY():number\r\n\t{\r\n\t\treturn this._vBlurTask.amount;\r\n\t}\r\n\t\r\n\tpublic set blurY(value:number)\r\n\t{\r\n\t\tthis._vBlurTask.amount = value;\r\n\t}\r\n\t\r\n\t/**\r\n\t * The distance between two blur samples. Set to -1 to autodetect with acceptable quality (default value).\r\n\t * Higher values provide better performance at the cost of reduces quality.\r\n\t */\r\n\tpublic get stepSize():number\r\n\t{\r\n\t\treturn this._hBlurTask.stepSize;\r\n\t}\r\n\t\r\n\tpublic set stepSize(value:number)\r\n\t{\r\n\t\tthis._hBlurTask.stepSize = value;\r\n\t\tthis._vBlurTask.stepSize = value;\r\n\t}\r\n\t\r\n\tpublic setRenderTargets(mainTarget:Image2D, stage:Stage):void\r\n\t{\r\n\t\tthis._hBlurTask.target = this._vBlurTask.getMainInputTexture(stage);\r\n\t\tsuper.setRenderTargets(mainTarget, stage);\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Filter3DCompositeTask}\t\tfrom \"../filters/tasks/Filter3DCompositeTask\";\r\nimport {Filter3DBase}\t\t\t\t\tfrom \"../filters/Filter3DBase\";\r\n\r\nexport class CompositeFilter3D extends Filter3DBase\r\n{\r\n\tprivate _compositeTask:Filter3DCompositeTask;\r\n\t\r\n\t/**\r\n\t * Creates a new CompositeFilter3D object\r\n\t * @param blurX The amount of horizontal blur to apply\r\n\t * @param blurY The amount of vertical blur to apply\r\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\r\n\t */\r\n\tconstructor(blendMode:string, exposure:number = 1)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._compositeTask = new Filter3DCompositeTask(blendMode, exposure);\r\n\r\n\t\tthis.addTask(this._compositeTask);\r\n\t}\r\n\t\r\n\tpublic get exposure():number\r\n\t{\r\n\t\treturn this._compositeTask.exposure;\r\n\t}\r\n\t\r\n\tpublic set exposure(value:number)\r\n\t{\r\n\t\tthis._compositeTask.exposure = value;\r\n\t}\r\n\r\n\r\n\tpublic get overlayTexture():Image2D\r\n\t{\r\n\t\treturn this._compositeTask.overlayTexture;\r\n\t}\r\n\r\n\tpublic set overlayTexture(value:Image2D)\r\n\t{\r\n\t\tthis._compositeTask.overlayTexture = value;\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Filter3DFXAATask}\t\t\t\tfrom \"../filters/tasks/Filter3DFXAATask\";\r\nimport {Filter3DBase}\t\t\t\t\tfrom \"../filters/Filter3DBase\";\r\n\r\nexport class FXAAFilter3D extends Filter3DBase\r\n{\r\n\tprivate _fxaaTask:Filter3DFXAATask;\r\n\t\r\n\t/**\r\n\t * Creates a new FXAAFilter3D object\r\n\t * @param amount\r\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\r\n\t */\r\n\tconstructor(amount:number, stepSize:number = -1)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._fxaaTask = new Filter3DFXAATask(amount, stepSize);\r\n\r\n\t\tthis.addTask(this._fxaaTask);\r\n\t}\r\n\t\r\n\tpublic get amount():number\r\n\t{\r\n\t\treturn this._fxaaTask.amount;\r\n\t}\r\n\t\r\n\tpublic set amount(value:number)\r\n\t{\r\n\t\tthis._fxaaTask.amount = value;\r\n\t}\r\n\r\n\r\n\tpublic get stepSize():number\r\n\t{\r\n\t\treturn this._fxaaTask.stepSize;\r\n\t}\r\n\r\n\tpublic set stepSize(value:number)\r\n\t{\r\n\t\tthis._fxaaTask.stepSize = value;\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Filter3DTaskBase}\t\t\t\tfrom \"../filters/tasks/Filter3DTaskBase\";\r\nimport {RTTBufferManager}\t\t\t\tfrom \"../managers/RTTBufferManager\";\r\n\r\nexport class Filter3DBase\r\n{\r\n\tprivate _tasks:Array<Filter3DTaskBase>;\r\n\tprivate _requireDepthRender:boolean;\r\n\tprivate _rttManager:RTTBufferManager;\r\n\tprivate _textureWidth:number;\r\n\tprivate _textureHeight:number;\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis._tasks = new Array<Filter3DTaskBase>();\r\n\t}\r\n\r\n\tpublic get requireDepthRender():boolean\r\n\t{\r\n\t\treturn this._requireDepthRender;\r\n\t}\r\n\r\n\tpublic addTask(filter:Filter3DTaskBase):void\r\n\t{\r\n\t\tthis._tasks.push(filter);\r\n\r\n\t\tif (this._requireDepthRender == null)\r\n\t\t\tthis._requireDepthRender = filter.requireDepthRender;\r\n\t}\r\n\r\n\tpublic get tasks():Filter3DTaskBase[]\r\n\t{\r\n\t\treturn this._tasks;\r\n\t}\r\n\r\n\tpublic getMainInputTexture(stage:Stage):Image2D\r\n\t{\r\n\t\treturn this._tasks[0].getMainInputTexture(stage);\r\n\t}\r\n\r\n\tpublic get textureWidth():number\r\n\t{\r\n\t\treturn this._textureWidth;\r\n\t}\r\n\r\n\tpublic set textureWidth(value:number)\r\n\t{\r\n\t\tthis._textureWidth = value;\r\n\r\n\t\tfor (var i:number = 0; i < this._tasks.length; ++i)\r\n\t\t\tthis._tasks[i].textureWidth = value;\r\n\t}\r\n\r\n\r\n\tpublic get rttManager():RTTBufferManager\r\n\t{\r\n\t\treturn this._rttManager;\r\n\t}\r\n\r\n\tpublic set rttManager(value:RTTBufferManager)\r\n\t{\r\n\t\tthis._rttManager = value;\r\n\r\n\t\tfor (var i:number = 0; i < this._tasks.length; ++i)\r\n\t\t\tthis._tasks[i].rttManager = value;\r\n\t}\r\n\r\n\tpublic get textureHeight():number\r\n\t{\r\n\t\treturn this._textureHeight;\r\n\t}\r\n\r\n\tpublic set textureHeight(value:number)\r\n\t{\r\n\t\tthis._textureHeight = value;\r\n\r\n\t\tfor (var i:number = 0; i < this._tasks.length; ++i)\r\n\t\t\tthis._tasks[i].textureHeight = value;\r\n\t}\r\n\r\n\t// link up the filters correctly with the next filter\r\n\tpublic setRenderTargets(mainTarget:Image2D, stage:Stage):void\r\n\t{\r\n\t\tthis._tasks[this._tasks.length - 1].target = mainTarget;\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tfor (var i:number = 0; i < this._tasks.length; ++i)\r\n\t\t\tthis._tasks[i].dispose();\r\n\t}\r\n\r\n\tpublic update(stage:Stage, camera:Camera):void\r\n\t{\r\n\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {GL_ImageBase}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_ImageBase\";\r\n\r\nimport {Filter3DTaskBase}\t\t\t\tfrom \"../../filters/tasks/Filter3DTaskBase\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\nexport class Filter3DCompositeTask extends Filter3DTaskBase\r\n{\r\n\tprivate _data:Float32Array;\r\n\tprivate _overlayTexture:Image2D;\r\n\tprivate _overlayWidth:number;\r\n\tprivate _overlayHeight:number;\r\n\tprivate _blendMode:string;\r\n\t\r\n\tprivate _overlayTextureIndex:number;\r\n\tprivate _exposureIndex:number;\r\n\tprivate _scalingIndex:number;\r\n\t\r\n\tconstructor(blendMode:string, exposure:number = 1)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._data = new Float32Array([exposure, 0.5, 2.0, -1, 0.0, 0.0, 0.0, 0.0 ]);\r\n\t\tthis._blendMode = blendMode;\r\n\t}\r\n\t\r\n\tpublic get overlayTexture():Image2D\r\n\t{\r\n\t\treturn this._overlayTexture;\r\n\t}\r\n\t\r\n\tpublic set overlayTexture(value:Image2D)\r\n\t{\r\n\t\tthis._overlayTexture = value;\r\n\t\tthis._overlayWidth = this._overlayTexture.width;\r\n\t\tthis._overlayHeight = this._overlayTexture.height;\r\n\t}\r\n\t\r\n\tpublic get exposure():number\r\n\t{\r\n\t\treturn this._data[0];\r\n\t}\r\n\t\r\n\tpublic set exposure(value:number)\r\n\t{\r\n\t\tthis._data[0] = value;\r\n\t}\r\n\t\r\n\tpublic getFragmentCode():string\r\n\t{\r\n\t\tvar temp1:ShaderRegisterElement = this._registerCache.getFreeFragmentVectorTemp();\r\n\t\tthis._registerCache.addFragmentTempUsages(temp1, 1);\r\n\t\tvar temp2:ShaderRegisterElement = this._registerCache.getFreeFragmentVectorTemp();\r\n\t\tthis._registerCache.addFragmentTempUsages(temp2, 1);\r\n\t\tvar temp3:ShaderRegisterElement = this._registerCache.getFreeFragmentVectorTemp();\r\n\t\tthis._registerCache.addFragmentTempUsages(temp3, 1);\r\n\t\tvar temp4:ShaderRegisterElement = this._registerCache.getFreeFragmentVectorTemp();\r\n\t\tthis._registerCache.addFragmentTempUsages(temp4, 1);\r\n\t\t\r\n\t\t\r\n\t\tvar inputTexture:ShaderRegisterElement = this._registerCache.getFreeTextureReg();\r\n\t\tthis._inputTextureIndex = inputTexture.index;\r\n\t\t\r\n\t\tvar overlayTexture:ShaderRegisterElement = this._registerCache.getFreeTextureReg();\r\n\t\tthis._overlayTextureIndex = overlayTexture.index;\r\n\t\t\r\n\t\tvar exposure:ShaderRegisterElement = this._registerCache.getFreeFragmentConstant();\r\n\t\tthis._exposureIndex = exposure.index*4;\r\n\r\n\t\tvar scaling:ShaderRegisterElement = this._registerCache.getFreeFragmentConstant();\r\n\t\tthis._scalingIndex = scaling.index*4;\r\n\t\t\r\n\t\tvar code:string;\r\n\t\t\r\n\t\tcode = \"tex \" + temp1 + \", \" + this._uvVarying + \", \" + inputTexture + \" <2d,linear,clamp>\\n\" +\r\n\t\t\t\"mul \" + temp2 + \", \" + this._uvVarying + \", \" + scaling + \".zw\\n\" +\r\n\t\t\t\"add \" + temp2 + \", \" + temp2 + \", \" + scaling + \".xy\\n\" +\r\n\t\t\t\"tex \" + temp2 + \", \" + temp2 + \", \" + overlayTexture + \" <2d,linear,clamp>\\n\" +\r\n\t\t\t\"mul \" + temp2 + \", \" + temp2 + \", \" + exposure + \".xxx\\n\" +\r\n\t\t\t\"add \" + temp2 + \", \" + temp2 + \", \" + exposure + \".xxx\\n\";\r\n\t\tswitch (this._blendMode) {\r\n\t\t\tcase \"multiply\":\r\n\t\t\t\tcode += \"mul oc, \" + temp1 + \", \" + temp2 + \"\\n\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"add\":\r\n\t\t\t\tcode += \"add oc, \" + temp1 + \", \" + temp2 + \"\\n\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"subtract\":\r\n\t\t\t\tcode += \"sub oc, \" + temp1 + \", \" + temp2 + \"\\n\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"overlay\":\r\n\t\t\t\tcode += \"sge \" + temp3 + \", \" + temp1 + \", \" + exposure + \".yyy\\n\"; // t2 = (blend >= 0.5)? 1 : 0\r\n\t\t\t\tcode += \"sub \" + temp1 + \", \" + temp3 + \", \" + temp1 + \"\\n\"; // base = (1 : 0 - base)\r\n\t\t\t\tcode += \"sub \" + temp2 + \", \" + temp2 + \", \" + temp3 + \"\\n\"; // blend = (blend - 1 : 0)\r\n\t\t\t\tcode += \"mul \" + temp2 + \", \" + temp2 + \", \" + temp1 + \"\\n\"; // blend = blend * base\r\n\t\t\t\tcode += \"sub \" + temp4 + \", \" + temp3 + \", \" + exposure + \".yyy\\n\"; // t3 = (blend >= 0.5)? 0.5 : -0.5\r\n\t\t\t\tcode += \"div \" + temp2 + \", \" + temp2 + \", \" + temp4 + \"\\n\"; // blend = blend / ( 0.5 : -0.5)\r\n\t\t\t\tcode += \"add oc, \" + temp2 + \", \" + temp3 + \"\\n\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"normal\":\r\n\t\t\t\t// for debugging purposes\r\n\t\t\t\tcode += \"mov oc, \" + temp1 + \"\\n\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"Unknown blend mode\");\r\n\t\t}\r\n\t\treturn code;\r\n\t}\r\n\t\r\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D):void\r\n\t{\r\n\t\tthis._data[4] = -0.5*(this._scaledTextureWidth - this._overlayWidth)/this._overlayWidth;\r\n\t\tthis._data[5] = -0.5*(this._scaledTextureHeight - this._overlayHeight)/this._overlayHeight;\r\n\r\n\t\tthis._data[6] = this._scaledTextureWidth/this._overlayWidth;\r\n\t\tthis._data[7] = this._scaledTextureHeight/this._overlayHeight;\r\n\r\n\t\tvar context:IContextGL = stage.context;\r\n\t\tcontext.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, this._data);\r\n\t\t\r\n\t\t(<GL_ImageBase> stage.getAbstraction(this._overlayTexture)).activate(this._overlayTextureIndex, false);\r\n\t}\r\n\t\r\n\tpublic deactivate(stage:Stage):void\r\n\t{\r\n\t\tstage.context.setTextureAt(1, null);\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Filter3DTaskBase}\t\t\t\tfrom \"../../filters/tasks/Filter3DTaskBase\";\r\n\r\nexport class Filter3DFXAATask extends Filter3DTaskBase\r\n{\r\n\tprivate _data:Float32Array;\r\n\t//TODO - remove blur variables and create setters/getters for FXAA\r\n\tprivate static MAX_AUTO_SAMPLES:number = 15;\r\n\tprivate _amount:number;\r\n\tprivate _stepSize:number = 1;\r\n\tprivate _realStepSize:number;\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param amount\r\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\r\n\t */\r\n\tconstructor(amount:number = 1, stepSize:number = -1)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._data =  new Float32Array(20);\r\n\t\t//luma\r\n\t\tthis._data.set([0.299, 0.587, 0.114, 0],0);//0.212, 0.716, 0.072\r\n\t\t//helpers\r\n\t\tthis._data.set([0.25, 0.5, 0.75, 1], 4);\r\n\t\t//settings (screen x, screen y, ...)\r\n\t\tthis._data.set([1/1024, 1/1024, -1, 1], 8);\r\n\t\t//deltas\r\n\t\tthis._data.set([1/128, 1/8, 8, 0], 12);\r\n\t\t//deltas\r\n\t\tthis._data.set([1.0/3.0 - 0.5, 2.0/3.0 - 0.5, 0.0/3.0 - 0.5, 3.0/3.0 - 0.5], 16);\r\n\r\n\r\n\t\tthis.amount = amount;\r\n\t\tthis.stepSize = stepSize;\r\n\t}\r\n\r\n\tpublic get amount():number\r\n\t{\r\n\t\treturn this._amount;\r\n\t}\r\n\r\n\tpublic set amount(value:number)\r\n\t{\r\n\t\tif (this._amount == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._amount = value;\r\n\r\n\t\tthis.invalidateProgram();\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tpublic get stepSize():number\r\n\t{\r\n\t\treturn this._stepSize;\r\n\t}\r\n\r\n\tpublic set stepSize(value:number)\r\n\t{\r\n\t\tif (this._stepSize == value)\r\n\t\t\treturn;\r\n\t\tthis._stepSize = value;\r\n\t\tthis.calculateStepSize();\r\n\t\tthis.invalidateProgram();\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tpublic getFragmentCode():string\r\n\t{\r\n\t\tvar lum:string = \"fc0\";\t\t//\t0.299, 0.587, 0.114\r\n\t\tvar _0:string = \"fc0.w\";\r\n\r\n\t\tvar _025:string = \"fc1.x\";\r\n\t\tvar _05:string = \"fc1.y\";\r\n\t\tvar _075:string = \"fc1.z\";\r\n\t\tvar _1:string = \"fc1.w\";\r\n\r\n\t\tvar pix:string = \"fc2.xy\";\r\n\t\tvar dx:string = \"fc2.x\"; // 1/1024\r\n\t\tvar dy:string = \"fc2.y\"; // 1/1024\r\n\r\n\t\tvar mOne:string = \"fc2.z\"; // -1.0\r\n\t\tvar mul:string = \"fc2.w\"; // 1.0  -- one for now\r\n\r\n\t\tvar fxaaReduceMin :string = \"fc3.x\";\t//1/128\r\n\t\tvar fxaaReduceMul :string = \"fc3.y\";\t//1/8\r\n\t\tvar fxaaSpanMax :string = \"fc3.z\";\t\t//8\r\n\r\n\t\tvar delta1:string = \"fc4.x\";\t//1.0/3.0 - 0.5\r\n\t\tvar delta2:string = \"fc4.y\";\t//2.0/3.0 - 0.5\r\n\t\tvar delta3:string = \"fc4.z\";\t//0.0/3.0 - 0.5\r\n\t\tvar delta4:string = \"fc4.w\";\t//3.0/3.0 - 0.5\r\n\r\n\t\tvar uv_in:string = \"v0\";\r\n\r\n\t\tvar uv:string = \"ft0.xy\";\r\n\t\tvar uvx:string = \"ft0.x\";\r\n\t\tvar uvy:string = \"ft0.y\";\r\n\r\n\t\tvar TL:string = \"ft2.x\";\r\n\t\tvar TR:string = \"ft2.y\";\r\n\t\tvar BL:string = \"ft2.z\";\r\n\t\tvar BR:string = \"ft2.w\";\r\n\t\tvar M:string = \"ft3.x\";\r\n\r\n\t\tvar tempf1:string = \"ft3.y\";\r\n\t\tvar tempf2:string = \"ft3.z\";\r\n\t\tvar tempf3:string = \"ft3.w\";\r\n\r\n\t\tvar tex:string = \"ft1\";\r\n\r\n\t\tvar dir:string = \"ft4\";\r\n\t\tvar dirx:string = \"ft4.x\";\r\n\t\tvar diry:string = \"ft4.y\";\r\n\t\tvar dirxy:string = \"ft4.xy\";\r\n\r\n\t\tvar dirReduce:string = \"ft5.x\";\r\n\t\tvar inverseDirAdjustment:string = \"ft5.y\";\r\n\r\n\t\tvar result1:string = \"ft6\";\r\n\t\tvar result2:string = \"ft7\";\r\n\r\n\t\tvar lumaMin:string = \"ft5.x\";\r\n\t\tvar lumaMax:string = \"ft5.y\";\r\n\r\n\t\tvar sample:string = \"fs0\";\r\n\r\n\r\n\t\tvar temp:string = tex;\r\n\t\tvar tempxy:string = temp + \".xy\";\r\n\t\t\r\n\t\tvar code:Array<string> =  new Array<string>();\r\n\r\n\t\t//lumas\r\n\t\tcode.push(\"tex\", tex, uv_in, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"dp3\", M, tex, lum, \"\\n\");\r\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\r\n\t\tcode.push(\"sub\", uv, uv, pix, \"\\n\");\r\n\t\tcode.push(\"tex\", tex, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"dp3\", TL, tex, lum, \"\\n\");\r\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\r\n\t\tcode.push(\"add\", uv, uv, pix, \"\\n\");\r\n\t\tcode.push(\"tex\", tex, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"dp3\",  BR, tex, lum, \"\\n\");\r\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\r\n\t\tcode.push(\"sub\", uvy, uvy, dy, \"\\n\");\r\n\t\tcode.push(\"add\", uvx, uvx, dx, \"\\n\");\r\n\t\tcode.push(\"tex\", tex, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"dp3\", TR, tex, lum, \"\\n\");\r\n\t\tcode.push(\"mov\", uv, uv_in, \"\\n\");\r\n\t\tcode.push(\"add\", uvy, uvy, dy, \"\\n\");\r\n\t\tcode.push(\"sub\", uvx, uvx, dx, \"\\n\");\r\n\t\tcode.push(\"tex\", tex, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"dp3\", BL, tex, lum, \"\\n\");\r\n\r\n\t\t//dir\r\n\t\tcode.push(\"add\", tempf1, TL, TR, \"\\n\");\r\n\t\tcode.push(\"add\", tempf2, BL, BR, \"\\n\");\r\n\t\tcode.push(\"sub\", dirx, tempf1, tempf2, \"\\n\");\r\n\t\tcode.push(\"neg\", dirx, dirx, \"\\n\");\r\n\r\n\t\tcode.push(\"add\", tempf1, TL, BL, \"\\n\");\r\n\t\tcode.push(\"add\", tempf2, TR, BR, \"\\n\");\r\n\t\tcode.push(\"sub\", diry, tempf1, tempf2, \"\\n\");\r\n\r\n\t\tcode.push(\"add\", tempf1, tempf1, tempf2, \"\\n\");\r\n\t\tcode.push(\"mul\", tempf1, tempf1, fxaaReduceMul, \"\\n\");\r\n\t\tcode.push(\"mul\", tempf1, tempf1, _025, \"\\n\");\r\n\t\tcode.push(\"max\", dirReduce, tempf1, fxaaReduceMin, \"\\n\");\r\n\r\n\t\tcode.push(\"abs\", tempf1, dirx, \"\\n\");\r\n\t\tcode.push(\"abs\", tempf2, diry, \"\\n\");\r\n\t\tcode.push(\"min\", tempf1, tempf1, tempf2, \"\\n\");\r\n\t\tcode.push(\"add\", tempf1, tempf1, dirReduce, \"\\n\");\r\n\t\tcode.push(\"rcp\", inverseDirAdjustment, tempf1, \"\\n\");\r\n\r\n\t\tcode.push(\"mul\", tempf1, dirx, inverseDirAdjustment, \"\\n\");\r\n\t\tcode.push(\"mov\", tempf2, fxaaSpanMax, \"\\n\");\r\n\t\tcode.push(\"neg\", tempf2, tempf2, \"\\n\");\r\n\t\tcode.push(\"max\", tempf1, tempf1, tempf2, \"\\n\");\r\n\t\tcode.push(\"min\", tempf1, fxaaSpanMax, tempf1, \"\\n\");\r\n\t\tcode.push(\"mul\", dirx, tempf1, dx, \"\\n\");\r\n\r\n\t\tcode.push(\"mul\", tempf1, diry, inverseDirAdjustment, \"\\n\");\r\n\t\tcode.push(\"mov\", tempf2, fxaaSpanMax, \"\\n\");\r\n\t\tcode.push(\"neg\", tempf2, tempf2, \"\\n\");\r\n\t\tcode.push(\"max\", tempf1, tempf1, tempf2, \"\\n\");\r\n\t\tcode.push(\"min\", tempf1, fxaaSpanMax, tempf1, \"\\n\");\r\n\t\tcode.push(\"mul\", diry, tempf1, dy, \"\\n\");\r\n\r\n\r\n\t\tcode.push(\"mul\", tempxy, dirxy, delta1, \"\\n\");\r\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\r\n\t\tcode.push(\"tex\", result1, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"mul\", tempxy, dirxy, delta2, \"\\n\");\r\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\r\n\t\tcode.push(\"tex\", tex, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"add\", result1, result1, tex, \"\\n\");\r\n\t\tcode.push(\"mul\", result1, result1, _05, \"\\n\");\r\n\r\n\t\tcode.push(\"mul\", tempxy, dirxy, delta3, \"\\n\");\r\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\r\n\t\tcode.push(\"tex\", result2, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"mul\", tempxy, dirxy, delta4, \"\\n\");\r\n\t\tcode.push(\"add\", uv, uv_in, tempxy, \"\\n\");\r\n\t\tcode.push(\"tex\", tex, uv, sample, \"<2d wrap linear>\", \"\\n\");\r\n\t\tcode.push(\"add\", result2, result2, tex, \"\\n\");\r\n\t\tcode.push(\"mul\", result2, result2, _025, \"\\n\");\r\n\t\tcode.push(\"mul\", tex, result1, _05, \"\\n\");\r\n\t\tcode.push(\"add\", result2, result2, tex, \"\\n\");\r\n\r\n\t\tcode.push(\"min\", tempf1, BL, BR, \"\\n\");\r\n\t\tcode.push(\"min\", tempf2, TL, TR, \"\\n\");\r\n\t\tcode.push(\"min\", tempf1, tempf1, tempf2, \"\\n\");\r\n\t\tcode.push(\"min\", lumaMin, tempf1, M, \"\\n\");\r\n\r\n\t\tcode.push(\"max\", tempf1, BL, BR, \"\\n\");\r\n\t\tcode.push(\"max\", tempf2, TL, TR, \"\\n\");\r\n\t\tcode.push(\"max\", tempf1, tempf1, tempf2, \"\\n\");\r\n\t\tcode.push(\"max\", lumaMax, tempf1, M, \"\\n\");\r\n\r\n\t\tcode.push(\"dp3\", tempf1, lum, result2, \"\\n\");\r\n\r\n\t\tcode.push(\"slt\", tempf2, tempf1, lumaMin, \"\\n\");\r\n\t\tcode.push(\"sge\", tempf3, tempf1, lumaMax, \"\\n\");\r\n\t\tcode.push(\"mul\", tempf2, tempf2, tempf3, \"\\n\");\r\n\r\n\t\tcode.push(\"mul\", result1, result1, tempf2, \"\\n\");\r\n\t\tcode.push(\"sub\", tempf2, _1, tempf2, \"\\n\");\r\n\t\tcode.push(\"mul\", result2, result2, tempf2, \"\\n\");\r\n\r\n\t\tcode.push(\"add\", \"oc\", result1, result2, \"\\n\");\r\n\r\n\t\t//this._data[2] = 1/numSamples;\r\n\r\n\t\treturn code.join(\" \");\r\n\t}\r\n\r\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D):void\r\n\t{\r\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, this._data);\r\n\t}\r\n\r\n\tpublic updateTextures(stage:Stage):void\r\n\t{\r\n\t\tsuper.updateTextures(stage);\r\n\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tprivate updateBlurData():void\r\n\t{\r\n\t\t// todo: must be normalized using view size ratio instead of texture\r\n\t\tif (this._rttManager) {\r\n\t\t\tthis._data[8] = 1/this._textureWidth;\r\n\t\t\tthis._data[9] = 1/this._textureHeight;\r\n\t\t\t//this._data[8] = 1/this._rttManager.viewWidth;\r\n\t\t\t//this._data[9] = 1/this._rttManager.viewHeight;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate calculateStepSize():void\r\n\t{\r\n\t\tthis._realStepSize = 1;//this._stepSize > 0? this._stepSize : this._amount > Filter3DVBlurTask.MAX_AUTO_SAMPLES? this._amount/Filter3DVBlurTask.MAX_AUTO_SAMPLES : 1;\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Filter3DTaskBase}\t\t\t\tfrom \"../../filters/tasks/Filter3DTaskBase\";\r\n\r\nexport class Filter3DHBlurTask extends Filter3DTaskBase\r\n{\r\n\tprivate static MAX_AUTO_SAMPLES:number = 15;\r\n\tprivate _amount:number;\r\n\tprivate _data:Float32Array;\r\n\tprivate _stepSize:number = 1;\r\n\tprivate _realStepSize:number;\r\n\r\n\t/**\r\n\t * Creates a new Filter3DHDepthOfFFieldTask\r\n\t * @param amount The maximum amount of blur to apply in pixels at the most out-of-focus areas\r\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\r\n\t */\r\n\tconstructor(amount:number, stepSize:number = -1)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._amount = amount;\r\n\t\tthis._data = new Float32Array([0, 0, 0, 1]);\r\n\t\tthis.stepSize = stepSize;\r\n\t}\r\n\r\n\tpublic get amount():number\r\n\t{\r\n\t\treturn this._amount;\r\n\t}\r\n\r\n\tpublic set amount(value:number)\r\n\t{\r\n\t\tif (this._amount == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._amount = value;\r\n\r\n\t\tthis.invalidateProgram();\r\n\t\tthis.updateBlurData();\r\n\t\tthis.calculateStepSize();\r\n\t}\r\n\r\n\tpublic get stepSize():number\r\n\t{\r\n\t\treturn this._stepSize;\r\n\t}\r\n\r\n\tpublic set stepSize(value:number)\r\n\t{\r\n\t\tif (this._stepSize == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._stepSize = value;\r\n\t\tthis.calculateStepSize();\r\n\t\tthis.invalidateProgram();\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tpublic getFragmentCode():string\r\n\t{\r\n\t\tvar code:string;\r\n\t\tvar numSamples:number = 1;\r\n\r\n\t\tcode = \"mov ft0, v0\t\\n\" +\r\n\t\t\t\"sub ft0.x, v0.x, fc0.x\\n\";\r\n\r\n\t\tcode += \"tex ft1, ft0, fs0 <2d,linear,clamp>\\n\";\r\n\r\n\t\tfor (var x:number = this._realStepSize; x <= this._amount; x += this._realStepSize) {\r\n\t\t\tcode += \"add ft0.x, ft0.x, fc0.y\\n\" +\r\n\t\t\t\t\"tex ft2, ft0, fs0 <2d,linear,clamp>\\n\" +\r\n\t\t\t\t\"add ft1, ft1, ft2\\n\";\r\n\t\t\t++numSamples;\r\n\t\t}\r\n\r\n\t\tcode += \"mul oc, ft1, fc0.z\\n\";\r\n\r\n\t\tthis._data[2] = 1/numSamples;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D):void\r\n\t{\r\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, this._data);\r\n\t}\r\n\r\n\tpublic updateTextures(stage:Stage):void\r\n\t{\r\n\t\tsuper.updateTextures(stage);\r\n\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tprivate updateBlurData():void\r\n\t{\r\n\t\t// todo: must be normalized using view size ratio instead of texture\r\n\t\tvar invW:number = 1/this._textureWidth;\r\n\r\n\t\tthis._data[0] = this._amount*.5*invW;\r\n\t\tthis._data[1] = this._realStepSize*invW;\r\n\t}\r\n\r\n\tprivate calculateStepSize():void\r\n\t{\r\n\t\tthis._realStepSize = this._stepSize > 0? this._stepSize : this._amount > Filter3DHBlurTask.MAX_AUTO_SAMPLES? this._amount/Filter3DHBlurTask.MAX_AUTO_SAMPLES : 1;\r\n\t}\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {AbstractMethodError}\t\t\tfrom \"awayjs-core/lib/errors/AbstractMethodError\";\r\nimport {ByteArray}\t\t\t\t\tfrom \"awayjs-core/lib/utils/ByteArray\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {AGALMiniAssembler}\t\t\tfrom \"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler\";\r\nimport {IProgram}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IProgram\";\r\n\r\nimport {RTTBufferManager}\t\t\t\tfrom \"../../managers/RTTBufferManager\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\n\r\nexport class Filter3DTaskBase\r\n{\r\n\tpublic _registerCache:ShaderRegisterCache;\r\n\t\r\n\tpublic _positionIndex:number;\r\n\tpublic _uvIndex:number;;\r\n\tpublic _inputTextureIndex:number;\r\n\tpublic _uvVarying:ShaderRegisterElement;\r\n\t\r\n\tprivate _mainInputTexture:Image2D;\r\n\r\n\tpublic _scaledTextureWidth:number = -1;\r\n\tpublic _scaledTextureHeight:number = -1;\r\n\tpublic _rttManager:RTTBufferManager;\r\n\tpublic _textureWidth:number = -1;\r\n\tpublic _textureHeight:number = -1;\r\n\tprivate _textureDimensionsInvalid:boolean = true;\r\n\tprivate _program3DInvalid:boolean = true;\r\n\tprivate _program3D:IProgram;\r\n\tprivate _target:Image2D;\r\n\tprivate _requireDepthRender:boolean;\r\n\tprivate _textureScale:number = 0;\r\n\r\n\tconstructor(requireDepthRender:boolean = false)\r\n\t{\r\n\t\tthis._requireDepthRender = requireDepthRender;\r\n\r\n\t\tthis._registerCache = new ShaderRegisterCache(\"baseline\");\r\n\t}\r\n\r\n\t/**\r\n\t * The texture scale for the input of this texture. This will define the output of the previous entry in the chain\r\n\t */\r\n\tpublic get textureScale():number\r\n\t{\r\n\t\treturn this._textureScale;\r\n\t}\r\n\r\n\tpublic set textureScale(value:number)\r\n\t{\r\n\t\tif (this._textureScale == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._textureScale = value;\r\n\t\tthis._scaledTextureWidth = this._textureWidth >> this._textureScale;\r\n\t\tthis._scaledTextureHeight = this._textureHeight >> this._textureScale;\r\n\t\tthis._textureDimensionsInvalid = true;\r\n\t}\r\n\r\n\tpublic get target():Image2D\r\n\t{\r\n\t\treturn this._target;\r\n\t}\r\n\r\n\tpublic set target(value:Image2D)\r\n\t{\r\n\t\tthis._target = value;\r\n\t}\r\n\r\n\tpublic get rttManager():RTTBufferManager\r\n\t{\r\n\t\treturn this._rttManager;\r\n\t}\r\n\r\n\tpublic set rttManager(value:RTTBufferManager)\r\n\t{\r\n\t\tif (this._rttManager == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._rttManager = value;\r\n\t\tthis._textureDimensionsInvalid = true;\r\n\t}\r\n\r\n\tpublic get textureWidth():number\r\n\t{\r\n\t\treturn this._textureWidth;\r\n\t}\r\n\r\n\tpublic set textureWidth(value:number)\r\n\t{\r\n\t\tif (this._textureWidth == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._textureWidth = value;\r\n\t\tthis._scaledTextureWidth = this._textureWidth >> this._textureScale;\r\n\t\tthis._textureDimensionsInvalid = true;\r\n\t}\r\n\r\n\tpublic get textureHeight():number\r\n\t{\r\n\t\treturn this._textureHeight;\r\n\t}\r\n\r\n\tpublic set textureHeight(value:number)\r\n\t{\r\n\t\tif (this._textureHeight == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._textureHeight = value;\r\n\t\tthis._scaledTextureHeight = this._textureHeight >> this._textureScale;\r\n\t\tthis._textureDimensionsInvalid = true;\r\n\t}\r\n\r\n\tpublic getMainInputTexture(stage:Stage):Image2D\r\n\t{\r\n\t\tif (this._textureDimensionsInvalid)\r\n\t\t\tthis.updateTextures(stage);\r\n\r\n\t\treturn this._mainInputTexture;\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tif (this._mainInputTexture)\r\n\t\t\tthis._mainInputTexture.dispose();\r\n\r\n\t\tif (this._program3D)\r\n\t\t\tthis._program3D.dispose();\r\n\t}\r\n\r\n\tpublic invalidateProgram():void\r\n\t{\r\n\t\tthis._program3DInvalid = true;\r\n\t}\r\n\r\n\tpublic updateProgram(stage:Stage):void\r\n\t{\r\n\t\tif (this._program3D)\r\n\t\t\tthis._program3D.dispose();\r\n\r\n\t\tthis._program3D = stage.context.createProgram();\r\n\r\n\t\tthis._registerCache.reset();\r\n\t\t\r\n\t\tvar vertexByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part vertex 1\\n\" + this.getVertexCode() + \"endpart\"))['vertex'].data;\r\n\t\tvar fragmentByteCode:ByteArray = (new AGALMiniAssembler().assemble(\"part fragment 1\\n\" + this.getFragmentCode() + \"endpart\"))['fragment'].data;\r\n\r\n\t\tthis._program3D.upload(vertexByteCode, fragmentByteCode);\r\n\t\tthis._program3DInvalid = false;\r\n\t}\r\n\r\n\tpublic getVertexCode():string\r\n\t{\r\n\t\tvar position:ShaderRegisterElement = this._registerCache.getFreeVertexAttribute();\r\n\t\tthis._positionIndex = position.index;\r\n\t\t\r\n\t\tvar uv:ShaderRegisterElement = this._registerCache.getFreeVertexAttribute();\r\n\t\tthis._uvIndex = uv.index;\r\n\t\t\r\n\t\tthis._uvVarying = this._registerCache.getFreeVarying();\r\n\t\t\r\n\t\tvar code:string;\r\n\t\t\r\n\t\tcode = \"mov op, \" + position + \"\\n\" + \r\n\t\t\t\"mov \" + this._uvVarying + \", \" + uv + \"\\n\";\r\n\t\t\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic getFragmentCode():string\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic updateTextures(stage:Stage):void\r\n\t{\r\n\t\tif (this._mainInputTexture)\r\n\t\t\tthis._mainInputTexture.dispose();\r\n\r\n\t\tthis._mainInputTexture = new Image2D(this._scaledTextureWidth, this._scaledTextureHeight);\r\n\r\n\t\tthis._textureDimensionsInvalid = false;\r\n\t}\r\n\r\n\tpublic getProgram(stage:Stage):IProgram\r\n\t{\r\n\t\tif (this._program3DInvalid)\r\n\t\t\tthis.updateProgram(stage);\r\n\r\n\t\treturn this._program3D;\r\n\t}\r\n\r\n\tpublic activate(stage:Stage, camera:Camera, depthTexture:Image2D):void\r\n\t{\r\n\t}\r\n\r\n\tpublic deactivate(stage:Stage):void\r\n\t{\r\n\t}\r\n\r\n\tpublic get requireDepthRender():boolean\r\n\t{\r\n\t\treturn this._requireDepthRender;\r\n\t}\r\n\r\n}",
    "import {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {Filter3DTaskBase}\t\t\t\tfrom \"../../filters/tasks/Filter3DTaskBase\";\r\n\r\nexport class Filter3DVBlurTask extends Filter3DTaskBase\r\n{\r\n\tprivate static MAX_AUTO_SAMPLES:number = 15;\r\n\tprivate _amount:number;\r\n\tprivate _data:Float32Array;\r\n\tprivate _stepSize:number = 1;\r\n\tprivate _realStepSize:number;\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param amount\r\n\t * @param stepSize The distance between samples. Set to -1 to autodetect with acceptable quality.\r\n\t */\r\n\tconstructor(amount:number, stepSize:number = -1)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis._amount = amount;\r\n\t\tthis._data =  new Float32Array([0, 0, 0, 1]);\r\n\t\tthis.stepSize = stepSize;\r\n\t}\r\n\r\n\tpublic get amount():number\r\n\t{\r\n\t\treturn this._amount;\r\n\t}\r\n\r\n\tpublic set amount(value:number)\r\n\t{\r\n\t\tif (this._amount == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._amount = value;\r\n\r\n\t\tthis.invalidateProgram();\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tpublic get stepSize():number\r\n\t{\r\n\t\treturn this._stepSize;\r\n\t}\r\n\r\n\tpublic set stepSize(value:number)\r\n\t{\r\n\t\tif (this._stepSize == value)\r\n\t\t\treturn;\r\n\t\tthis._stepSize = value;\r\n\t\tthis.calculateStepSize();\r\n\t\tthis.invalidateProgram();\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tpublic getFragmentCode():string\r\n\t{\r\n\t\tvar code:string;\r\n\t\tvar numSamples:number = 1;\r\n\r\n\t\tcode = \"mov ft0, v0\t\\n\" +\r\n\t\t\t\"sub ft0.y, v0.y, fc0.x\\n\";\r\n\r\n\t\tcode += \"tex ft1, ft0, fs0 <2d,linear,clamp>\\n\";\r\n\r\n\t\tfor (var x:number = this._realStepSize; x <= this._amount; x += this._realStepSize) {\r\n\t\t\tcode += \"add ft0.y, ft0.y, fc0.y\\n\";\r\n\t\t\tcode += \"tex ft2, ft0, fs0 <2d,linear,clamp>\\n\" +\r\n\t\t\t\t\"add ft1, ft1, ft2\\n\";\r\n\t\t\t++numSamples;\r\n\t\t}\r\n\r\n\t\tcode += \"mul oc, ft1, fc0.z\\n\";\r\n\r\n\t\tthis._data[2] = 1/numSamples;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic activate(stage:Stage, camera3D:Camera, depthTexture:Image2D):void\r\n\t{\r\n\t\tstage.context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, this._data);\r\n\t}\r\n\r\n\tpublic updateTextures(stage:Stage):void\r\n\t{\r\n\t\tsuper.updateTextures(stage);\r\n\r\n\t\tthis.updateBlurData();\r\n\t}\r\n\r\n\tprivate updateBlurData():void\r\n\t{\r\n\t\t// todo: must be normalized using view size ratio instead of texture\r\n\t\tvar invH:number = 1/this._textureHeight;\r\n\r\n\t\tthis._data[0] = this._amount*.5*invH;\r\n\t\tthis._data[1] = this._realStepSize*invH;\r\n\t}\r\n\r\n\tprivate calculateStepSize():void\r\n\t{\r\n\t\tthis._realStepSize = this._stepSize > 0? this._stepSize : this._amount > Filter3DVBlurTask.MAX_AUTO_SAMPLES? this._amount/Filter3DVBlurTask.MAX_AUTO_SAMPLES : 1;\r\n\t}\r\n}",
    "export {Filter3DCompositeTask}\t\t\tfrom \"./filters/tasks/Filter3DCompositeTask\";\r\nexport {Filter3DFXAATask}\t\t\t\tfrom \"./filters/tasks/Filter3DFXAATask\";\r\nexport {Filter3DHBlurTask}\t\t\t\tfrom \"./filters/tasks/Filter3DHBlurTask\";\r\nexport {Filter3DTaskBase}\t\t\t\tfrom \"./filters/tasks/Filter3DTaskBase\";\r\nexport {Filter3DVBlurTask}\t\t\t\tfrom \"./filters/tasks/Filter3DVBlurTask\";\r\nexport {BlurFilter3D}\t\t\t\t\tfrom \"./filters/BlurFilter3D\";\r\nexport {CompositeFilter3D}\t\t\t\tfrom \"./filters/CompositeFilter3D\";\r\nexport {Filter3DBase}\t\t\t\t\tfrom \"./filters/Filter3DBase\";\r\nexport {FXAAFilter3D}\t\t\t\t\tfrom \"./filters/FXAAFilter3D\";",
    "import {Rectangle}\t\t\t\t\tfrom \"awayjs-core/lib/geom/Rectangle\";\r\nimport {EventDispatcher}\t\t\t\tfrom \"awayjs-core/lib/events/EventDispatcher\";\r\nimport {ImageUtils}\t\t\t\t\tfrom \"awayjs-core/lib/utils/ImageUtils\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {IIndexBuffer}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IIndexBuffer\";\r\nimport {IVertexBuffer}\t\t\t\tfrom \"awayjs-stagegl/lib/base/IVertexBuffer\";\r\nimport {RTTEvent}\t\t\t\t\t\tfrom \"../events/RTTEvent\";\r\n\r\nexport class RTTBufferManager extends EventDispatcher\r\n{\r\n\tprivate static _instances:Array<RTTBufferManagerVO>;\r\n\r\n\tprivate _renderToTextureVertexBuffer:IVertexBuffer;\r\n\tprivate _renderToScreenVertexBuffer:IVertexBuffer;\r\n\r\n\tprivate _indexBuffer:IIndexBuffer;\r\n\tprivate _stage:Stage;\r\n\tprivate _viewWidth:number = -1;\r\n\tprivate _viewHeight:number = -1;\r\n\tprivate _textureWidth:number = -1;\r\n\tprivate _textureHeight:number = -1;\r\n\tprivate _renderToTextureRect:Rectangle;\r\n\tprivate _buffersInvalid:boolean = true;\r\n\r\n\tprivate _textureRatioX:number;\r\n\tprivate _textureRatioY:number;\r\n\r\n\tconstructor(stage:Stage)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._renderToTextureRect = new Rectangle();\r\n\r\n\t\tthis._stage = stage;\r\n\r\n\t}\r\n\r\n\tpublic static getInstance(stage:Stage):RTTBufferManager\r\n\t{\r\n\t\tif (!stage)\r\n\t\t\tthrow new Error(\"stage key cannot be null!\");\r\n\r\n\t\tif (RTTBufferManager._instances == null)\r\n\t\t\tRTTBufferManager._instances = new Array<RTTBufferManagerVO>();\r\n\r\n\t\tvar rttBufferManager:RTTBufferManager = RTTBufferManager.getRTTBufferManagerFromStage(stage);\r\n\r\n\t\tif (rttBufferManager == null) {\r\n\t\t\trttBufferManager = new RTTBufferManager(stage);\r\n\r\n\t\t\tvar vo:RTTBufferManagerVO = new RTTBufferManagerVO();\r\n\r\n\t\t\tvo.stage3d = stage;\r\n\t\t\tvo.rttbfm = rttBufferManager;\r\n\r\n\t\t\tRTTBufferManager._instances.push(vo);\r\n\t\t}\r\n\r\n\t\treturn rttBufferManager;\r\n\r\n\t}\r\n\r\n\tprivate static getRTTBufferManagerFromStage(stage:Stage):RTTBufferManager\r\n\t{\r\n\r\n\t\tvar l:number = RTTBufferManager._instances.length;\r\n\t\tvar r:RTTBufferManagerVO;\r\n\r\n\t\tfor (var c:number = 0; c < l; c++) {\r\n\t\t\tr = RTTBufferManager._instances[c];\r\n\r\n\t\t\tif (r.stage3d === stage)\r\n\t\t\t\treturn r.rttbfm;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate static deleteRTTBufferManager(stage:Stage):void\r\n\t{\r\n\t\tvar l:number = RTTBufferManager._instances.length;\r\n\t\tvar r:RTTBufferManagerVO;\r\n\r\n\t\tfor (var c:number = 0; c < l; c++) {\r\n\t\t\tr = RTTBufferManager._instances[c];\r\n\r\n\t\t\tif (r.stage3d === stage) {\r\n\t\t\t\tRTTBufferManager._instances.splice(c, 1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic get textureRatioX():number\r\n\t{\r\n\t\tif (this._buffersInvalid)\r\n\t\t\tthis.updateRTTBuffers();\r\n\r\n\t\treturn this._textureRatioX;\r\n\t}\r\n\r\n\tpublic get textureRatioY():number\r\n\t{\r\n\t\tif (this._buffersInvalid)\r\n\t\t\tthis.updateRTTBuffers();\r\n\r\n\t\treturn this._textureRatioY;\r\n\t}\r\n\r\n\tpublic get viewWidth():number\r\n\t{\r\n\t\treturn this._viewWidth;\r\n\t}\r\n\r\n\tpublic set viewWidth(value:number)\r\n\t{\r\n\t\tif (value == this._viewWidth)\r\n\t\t\treturn;\r\n\r\n\t\tthis._viewWidth = value;\r\n\r\n\t\tthis._buffersInvalid = true;\r\n\r\n\t\tthis._textureWidth = ImageUtils.getBestPowerOf2(this._viewWidth);\r\n\r\n\t\tif (this._textureWidth > this._viewWidth) {\r\n\t\t\tthis._renderToTextureRect.x = Math.floor((this._textureWidth - this._viewWidth)*.5);\r\n\t\t\tthis._renderToTextureRect.width = this._viewWidth;\r\n\t\t} else {\r\n\t\t\tthis._renderToTextureRect.x = 0;\r\n\t\t\tthis._renderToTextureRect.width = this._textureWidth;\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent(new RTTEvent(RTTEvent.RESIZE, this));\r\n\t}\r\n\r\n\tpublic get viewHeight():number\r\n\t{\r\n\t\treturn this._viewHeight;\r\n\t}\r\n\r\n\tpublic set viewHeight(value:number)\r\n\t{\r\n\t\tif (value == this._viewHeight)\r\n\t\t\treturn;\r\n\r\n\t\tthis._viewHeight = value;\r\n\r\n\t\tthis._buffersInvalid = true;\r\n\r\n\t\tthis._textureHeight = ImageUtils.getBestPowerOf2(this._viewHeight);\r\n\r\n\t\tif (this._textureHeight > this._viewHeight) {\r\n\t\t\tthis._renderToTextureRect.y = Math.floor((this._textureHeight - this._viewHeight)*.5);\r\n\t\t\tthis._renderToTextureRect.height = this._viewHeight;\r\n\t\t} else {\r\n\t\t\tthis._renderToTextureRect.y = 0;\r\n\t\t\tthis._renderToTextureRect.height = this._textureHeight;\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent(new RTTEvent(RTTEvent.RESIZE, this));\r\n\t}\r\n\r\n\tpublic get renderToTextureVertexBuffer():IVertexBuffer\r\n\t{\r\n\t\tif (this._buffersInvalid)\r\n\t\t\tthis.updateRTTBuffers();\r\n\r\n\t\treturn this._renderToTextureVertexBuffer;\r\n\t}\r\n\r\n\tpublic get renderToScreenVertexBuffer():IVertexBuffer\r\n\t{\r\n\t\tif (this._buffersInvalid)\r\n\t\t\tthis.updateRTTBuffers();\r\n\r\n\t\treturn this._renderToScreenVertexBuffer;\r\n\r\n\t}\r\n\r\n\tpublic get indexBuffer():IIndexBuffer\r\n\t{\r\n\t\treturn this._indexBuffer;\r\n\t}\r\n\r\n\tpublic get renderToTextureRect():Rectangle\r\n\t{\r\n\t\tif (this._buffersInvalid)\r\n\t\t\tthis.updateRTTBuffers();\r\n\r\n\t\treturn this._renderToTextureRect;\r\n\t}\r\n\r\n\tpublic get textureWidth():number\r\n\t{\r\n\t\treturn this._textureWidth;\r\n\t}\r\n\r\n\tpublic get textureHeight():number\r\n\t{\r\n\t\treturn this._textureHeight;\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tRTTBufferManager.deleteRTTBufferManager(this._stage);\r\n\r\n\t\tif (this._indexBuffer) {\r\n\t\t\tthis._indexBuffer.dispose();\r\n\t\t\tthis._renderToScreenVertexBuffer.dispose();\r\n\t\t\tthis._renderToTextureVertexBuffer.dispose();\r\n\t\t\tthis._renderToScreenVertexBuffer = null;\r\n\t\t\tthis._renderToTextureVertexBuffer = null;\r\n\t\t\tthis._indexBuffer = null;\r\n\t\t}\r\n\t}\r\n\r\n\t// todo: place all this in a separate model, since it's used all over the place\r\n\t// maybe it even has a place in the core (together with screenRect etc)?\r\n\t// needs to be stored per view of course\r\n\tprivate updateRTTBuffers():void\r\n\t{\r\n\t\tvar context:IContextGL = this._stage.context;\r\n\t\tvar textureVerts:number[];\r\n\t\tvar screenVerts:number[];\r\n\r\n\t\tvar x:number;\r\n\t\tvar y:number;\r\n\r\n\t\tif (this._renderToTextureVertexBuffer == null)\r\n\t\t\tthis._renderToTextureVertexBuffer = context.createVertexBuffer(4, 20);\r\n\r\n\t\tif (this._renderToScreenVertexBuffer == null)\r\n\t\t\tthis._renderToScreenVertexBuffer = context.createVertexBuffer(4, 20);\r\n\r\n\t\tif (!this._indexBuffer) {\r\n\t\t\tthis._indexBuffer = context.createIndexBuffer(6);\r\n\r\n\t\t\tthis._indexBuffer.uploadFromArray([2, 1, 0, 3, 2, 0], 0, 6);\r\n\t\t}\r\n\r\n\t\tthis._textureRatioX = x = Math.min(this._viewWidth/this._textureWidth, 1);\r\n\t\tthis._textureRatioY = y = Math.min(this._viewHeight/this._textureHeight, 1);\r\n\r\n\t\tvar u1:number = (1 - x)*.5;\r\n\t\tvar u2:number = (x + 1)*.5;\r\n\t\tvar v1:number = (1 - y)*.5;\r\n\t\tvar v2:number = (y + 1)*.5;\r\n\r\n\t\t// last element contains indices for data per vertex that can be passed to the vertex shader if necessary (ie: frustum corners for deferred rendering)\r\n\t\ttextureVerts = [    -x, -y, u1, v1, 0, x, -y, u2, v1, 1, x, y, u2, v2, 2, -x, y, u1, v2, 3 ];\r\n\r\n\t\tscreenVerts = [     -1, -1, u1, v1, 0, 1, -1, u2, v1, 1, 1, 1, u2, v2, 2, -1, 1, u1, v2, 3 ];\r\n\r\n\t\tthis._renderToTextureVertexBuffer.uploadFromArray(textureVerts, 0, 4);\r\n\t\tthis._renderToScreenVertexBuffer.uploadFromArray(screenVerts, 0, 4);\r\n\r\n\t\tthis._buffersInvalid = false;\r\n\t}\r\n}\r\n\r\nclass RTTBufferManagerVO\r\n{\r\n\tpublic stage3d:Stage;\r\n\r\n\tpublic rttbfm:RTTBufferManager;\r\n}",
    "export {RTTBufferManager}\t\t\t\tfrom \"./managers/RTTBufferManager\";",
    "import {AttributesBuffer}\t\t\t\tfrom \"awayjs-core/lib/attributes/AttributesBuffer\";\r\nimport {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Rectangle}\t\t\t\t\tfrom \"awayjs-core/lib/geom/Rectangle\";\r\n\r\nimport {TriangleElements}\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\nimport {Billboard}\t\t\t\t\tfrom \"awayjs-display/lib/display/Billboard\";\r\nimport {DefaultMaterialManager}\t\tfrom \"awayjs-display/lib/managers/DefaultMaterialManager\";\r\nimport {TextureBase}\t\t\t\t\tfrom \"awayjs-display/lib/textures/TextureBase\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"../RendererBase\";\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\n\r\n/**\r\n * @class away.pool.RenderableListItem\r\n */\r\nexport class GL_BillboardRenderable extends GL_RenderableBase\r\n{\r\n\tprivate static _samplerElements:Object = new Object();\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate _billboard:Billboard;\r\n\r\n\tpublic _id:number;\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param billboard\r\n\t */\r\n\tconstructor(billboard:Billboard, renderer:RendererBase)\r\n\t{\r\n\t\tsuper(billboard, renderer);\r\n\r\n\t\tthis._billboard = billboard;\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._billboard = null;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @returns {away.base.TriangleElements}\r\n\t */\r\n\tpublic _pGetElements():GL_ElementsBase\r\n\t{\r\n\t\tvar texture:TextureBase = this._billboard.material.getTextureAt(0);\r\n\r\n\t\tvar id:number = -1;\r\n\r\n\t\tif (texture)\r\n\t\t\tid = ((this.renderable.style? this.renderable.style.getSamplerAt(texture) || texture.getSamplerAt(0) : texture.getSamplerAt(0)) || DefaultMaterialManager.getDefaultSampler()).id;\r\n\r\n\t\tthis._id = id;\r\n\r\n\t\tvar elements:TriangleElements = GL_BillboardRenderable._samplerElements[id];\r\n\r\n\t\tvar width:number = this._billboard.billboardWidth;\r\n\t\tvar height:number = this._billboard.billboardHeight;\r\n\t\tvar billboardRect:Rectangle = this._billboard.billboardRect;\r\n\r\n\t\tif (!elements) {\r\n\t\t\telements = GL_BillboardRenderable._samplerElements[id] = new TriangleElements(new AttributesBuffer(11, 4));\r\n\t\t\telements.autoDeriveNormals = false;\r\n\t\t\telements.autoDeriveTangents = false;\r\n\t\t\telements.setIndices(Array<number>(0, 1, 2, 0, 2, 3));\r\n\t\t\telements.setPositions(Array<number>(-billboardRect.x, -billboardRect.y, 0, width-billboardRect.x, -billboardRect.y, 0, width-billboardRect.x, height-billboardRect.y, 0, -billboardRect.x, height-billboardRect.y, 0));\r\n\t\t\telements.setNormals(Array<number>(1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0));\r\n\t\t\telements.setTangents(Array<number>(0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1));\r\n\t\t\telements.setUVs(Array<number>(0, 0, 1, 0, 1, 1, 0, 1));\r\n\t\t} else {\r\n\t\t\telements.setPositions(Array<number>(-billboardRect.x, -billboardRect.y, 0, width-billboardRect.x, -billboardRect.y, 0, width-billboardRect.x, height-billboardRect.y, 0, -billboardRect.x, height-billboardRect.y, 0));\r\n\t\t}\r\n\r\n\t\treturn <GL_ElementsBase> this._stage.getAbstraction(elements);\r\n\t}\r\n\r\n\tpublic _pGetSurface():GL_SurfaceBase\r\n\t{\r\n\t\treturn this._renderer.getSurfacePool(this.elementsGL).getAbstraction(this._billboard.material || DefaultMaterialManager.getDefaultMaterial(this.renderable));\r\n\t}\r\n\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\n\r\nimport {Graphic}\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphic\";\r\nimport {DefaultMaterialManager}\t\tfrom \"awayjs-display/lib/managers/DefaultMaterialManager\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"../RendererBase\";\r\nimport {AnimatorBase}\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\n\r\n/**\r\n * @class away.pool.GL_GraphicRenderable\r\n */\r\nexport class GL_GraphicRenderable extends GL_RenderableBase\r\n{\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic graphic:Graphic;\r\n\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param graphic\r\n\t * @param level\r\n\t * @param indexOffset\r\n\t */\r\n\tconstructor(graphic:Graphic, renderer:RendererBase)\r\n\t{\r\n\t\tsuper(graphic, renderer);\r\n\r\n\t\tthis.graphic = graphic;\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis.graphic = null;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @returns {ElementsBase}\r\n\t * @protected\r\n\t */\r\n\tpublic _pGetElements():GL_ElementsBase\r\n\t{\r\n\t\tthis._offset = this.graphic.offset;\r\n\t\tthis._count = this.graphic.count;\r\n\r\n\t\t\r\n\t\treturn <GL_ElementsBase> this._stage.getAbstraction((this.renderable.animator)? (<AnimatorBase> this.renderable.animator).getRenderableElements(this, this.graphic.elements) : this.graphic.elements);\r\n\t}\r\n\r\n\r\n\tpublic _pGetSurface():GL_SurfaceBase\r\n\t{\r\n\t\treturn this._renderer.getSurfacePool(this.elementsGL).getAbstraction(this.graphic.material || DefaultMaterialManager.getDefaultMaterial(this.renderable));\r\n\t}\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {LineElements}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/LineElements\";\r\nimport {LineSegment}\t\t\t\t\tfrom \"awayjs-display/lib/display/LineSegment\";\r\nimport {DefaultMaterialManager}\t\tfrom \"awayjs-display/lib/managers/DefaultMaterialManager\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"../RendererBase\";\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\n\r\n/**\r\n * @class away.pool.GL_LineSegmentRenderable\r\n */\r\nexport class GL_LineSegmentRenderable extends GL_RenderableBase\r\n{\r\n\tprivate static _lineGraphics:Object = new Object();\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate _lineSegment:LineSegment;\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param graphic\r\n\t * @param level\r\n\t * @param dataOffset\r\n\t */\r\n\tconstructor(lineSegment:LineSegment, renderer:RendererBase)\r\n\t{\r\n\t\tsuper(lineSegment, renderer);\r\n\r\n\t\tthis._lineSegment = lineSegment;\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._lineSegment = null;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @returns {base.LineElements}\r\n\t * @protected\r\n\t */\r\n\tpublic _pGetElements():GL_ElementsBase\r\n\t{\r\n\t\tvar elements:LineElements = GL_LineSegmentRenderable._lineGraphics[this._lineSegment.id] || (GL_LineSegmentRenderable._lineGraphics[this._lineSegment.id] = new LineElements());\r\n\r\n\t\tvar start:Vector3D = this._lineSegment.startPostion;\r\n\t\tvar end:Vector3D = this._lineSegment.endPosition;\r\n\r\n\t\tvar positions:Float32Array = new Float32Array(6);\r\n\t\tvar thickness:Float32Array = new Float32Array(1);\r\n\r\n\t\tpositions[0] = start.x;\r\n\t\tpositions[1] = start.y;\r\n\t\tpositions[2] = start.z;\r\n\t\tpositions[3] = end.x;\r\n\t\tpositions[4] = end.y;\r\n\t\tpositions[5] = end.z;\r\n\t\tthickness[0] = this._lineSegment.thickness;\r\n\r\n\t\telements.setPositions(positions);\r\n\t\telements.setThickness(thickness);\r\n\r\n\t\treturn <GL_ElementsBase> this._stage.getAbstraction(elements);\r\n\t}\r\n\r\n\tpublic _pGetSurface():GL_SurfaceBase\r\n\t{\r\n\t\treturn this._renderer.getSurfacePool(this.elementsGL).getAbstraction(this._lineSegment.material || DefaultMaterialManager.getDefaultMaterial(this.renderable));\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param renderable\r\n\t * @param level\r\n\t * @param indexOffset\r\n\t * @returns {away.pool.LineSubSpriteRenderable}\r\n\t * @private\r\n\t */\r\n\tpublic _pGetOverflowRenderable(indexOffset:number):GL_RenderableBase\r\n\t{\r\n\t\treturn new GL_LineSegmentRenderable(<LineSegment> this.renderable, this._renderer);\r\n\t}\r\n}",
    "import {AbstractMethodError}\t\t\tfrom \"awayjs-core/lib/errors/AbstractMethodError\";\r\nimport {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Matrix}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {ImageBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/ImageBase\";\r\nimport {SamplerBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/SamplerBase\";\r\nimport {AbstractionBase}\t\t\t\tfrom \"awayjs-core/lib/library/AbstractionBase\";\r\n\r\nimport {IRenderable}\t\t\t\t\tfrom \"awayjs-display/lib/base/IRenderable\";\r\nimport {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\nimport {ElementsBase}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsBase\";\r\nimport {IEntity}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/IEntity\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {RenderableEvent}\t\t\t\tfrom \"awayjs-display/lib/events/RenderableEvent\";\r\nimport {DefaultMaterialManager}\t\tfrom \"awayjs-display/lib/managers/DefaultMaterialManager\";\r\nimport {TextureBase}\t\t\t\t\tfrom \"awayjs-display/lib/textures/TextureBase\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {GL_ImageBase}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_ImageBase\";\r\nimport {GL_SamplerBase}\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_SamplerBase\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"../RendererBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"../surfaces/passes/IPass\";\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\n\r\n/**\r\n * @class RenderableListItem\r\n */\r\nexport class GL_RenderableBase extends AbstractionBase\r\n{\r\n\tprivate _onInvalidateSurfaceDelegate:(event:RenderableEvent) => void;\r\n\tprivate _onInvalidateElementsDelegate:(event:RenderableEvent) => void;\r\n\r\n\tpublic _count:number = 0;\r\n\tpublic _offset:number = 0;\r\n\tprivate _elementsGL:GL_ElementsBase;\r\n\tprivate _surfaceGL:GL_SurfaceBase;\r\n\tprivate _elementsDirty:boolean = true;\r\n\tprivate _surfaceDirty:boolean = true;\r\n\r\n\tpublic JOINT_INDEX_FORMAT:string;\r\n\tpublic JOINT_WEIGHT_FORMAT:string;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic _renderer:RendererBase;\r\n\r\n\tpublic _stage:Stage;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic next:GL_RenderableBase;\r\n\r\n\tpublic id:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic surfaceID:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic renderOrderId:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic zIndex:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic maskId:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic masksConfig:Array<Array<number>>;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic cascaded:boolean;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic renderSceneTransform:Matrix3D;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic sourceEntity:IEntity;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic renderable:IRenderable;\r\n\r\n\tpublic uvMatrix:Matrix;\r\n\t\r\n\tpublic images:Array<GL_ImageBase> = new Array<GL_ImageBase>();\r\n\r\n\tpublic samplers:Array<GL_SamplerBase> = new Array<GL_SamplerBase>();\r\n\r\n\tpublic get elementsGL():GL_ElementsBase\r\n\t{\r\n\t\tif (this._elementsDirty)\r\n\t\t\tthis._updateElements();\r\n\r\n\t\treturn this._elementsGL;\r\n\t}\r\n\r\n\tpublic get surfaceGL():GL_SurfaceBase\r\n\t{\r\n\t\tif (this._surfaceDirty)\r\n\t\t\tthis._updateSurface();\r\n\r\n\t\treturn this._surfaceGL;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @param renderable\r\n\t * @param sourceEntity\r\n\t * @param surface\r\n\t * @param renderer\r\n\t */\r\n\tconstructor(renderable:IRenderable, renderer:RendererBase)\r\n\t{\r\n\t\tsuper(renderable, renderer);\r\n\r\n\t\tthis._onInvalidateSurfaceDelegate = (event:RenderableEvent) => this._onInvalidateSurface(event);\r\n\t\tthis._onInvalidateElementsDelegate = (event:RenderableEvent) => this.onInvalidateElements(event);\r\n\r\n\t\t//store a reference to the pool for later disposal\r\n\t\tthis._renderer = renderer;\r\n\t\tthis._stage = renderer.stage;\r\n\r\n\t\tthis.renderable = renderable;\r\n\r\n\t\tthis.renderable.addEventListener(RenderableEvent.INVALIDATE_SURFACE, this._onInvalidateSurfaceDelegate);\r\n\t\tthis.renderable.addEventListener(RenderableEvent.INVALIDATE_ELEMENTS, this._onInvalidateElementsDelegate);\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis.next = null;\r\n\t\tthis.masksConfig = null;\r\n\t\tthis.renderSceneTransform = null;\r\n\r\n\t\tthis._renderer = null;\r\n\t\tthis._stage = null;\r\n\t\tthis.sourceEntity = null;\r\n\r\n\t\tthis.renderable.removeEventListener(RenderableEvent.INVALIDATE_SURFACE, this._onInvalidateSurfaceDelegate);\r\n\t\tthis.renderable.removeEventListener(RenderableEvent.INVALIDATE_ELEMENTS, this._onInvalidateElementsDelegate);\r\n\t\tthis.renderable = null;\r\n\r\n\t\tthis._surfaceGL.usages--;\r\n\r\n\t\tif (!this._surfaceGL.usages)\r\n\t\t\tthis._surfaceGL.onClear(new AssetEvent(AssetEvent.CLEAR, this._surfaceGL.surface));\r\n\r\n\t\tthis._surfaceGL = null;\r\n\t\tthis._elementsGL = null;\r\n\t}\r\n\r\n\tpublic onInvalidateElements(event:RenderableEvent):void\r\n\t{\r\n\t\tthis._elementsDirty = true;\r\n\t}\r\n\r\n\tprivate _onInvalidateSurface(event:RenderableEvent):void\r\n\t{\r\n\t\tthis._surfaceDirty = true;\r\n\t}\r\n\r\n\tpublic _pGetElements():GL_ElementsBase\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic _pGetSurface():GL_SurfaceBase\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\t/**\r\n\t * Renders an object to the current render target.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic _iRender(pass:IPass, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tthis._setRenderState(pass, camera, viewProjection);\r\n\r\n\t\tthis._elementsGL.draw(this, pass.shader, camera, viewProjection, this._count, this._offset)\r\n\t}\r\n\r\n\tpublic _setRenderState(pass:IPass, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tif (this._elementsDirty)\r\n\t\t\tthis._updateElements();\r\n\r\n\t\tpass._setRenderState(this, camera, viewProjection);\r\n\t\t\r\n\t\tif (pass.shader.activeElements != this._elementsGL) {\r\n\t\t\tpass.shader.activeElements = this._elementsGL;\r\n\t\t\tthis._elementsGL._setRenderState(this, pass.shader, camera, viewProjection);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @private\r\n\t */\r\n\tprivate _updateElements():void\r\n\t{\r\n\t\tthis._elementsGL = this._pGetElements();\r\n\r\n\t\tthis._elementsDirty = false;\r\n\t}\r\n\r\n\tprivate _updateSurface():void\r\n\t{\r\n\t\tvar surfaceGL:GL_SurfaceBase = this._pGetSurface();\r\n\r\n\t\tif (this._surfaceGL != surfaceGL) {\r\n\r\n\t\t\tif (this._surfaceGL) {\r\n\t\t\t\tthis._surfaceGL.usages--;\r\n\r\n\t\t\t\t//dispose current surfaceGL object\r\n\t\t\t\tif (!this._surfaceGL.usages)\r\n\t\t\t\t\tthis._surfaceGL.onClear(new AssetEvent(AssetEvent.CLEAR, this._surfaceGL.surface));\r\n\t\t\t}\r\n\r\n\t\t\tthis._surfaceGL = surfaceGL;\r\n\r\n\t\t\tthis._surfaceGL.usages++;\r\n\t\t}\r\n\r\n\t\t//create a cache of image & sampler objects for the renderable\r\n\t\tvar numImages:number = surfaceGL.numImages;\r\n\r\n\t\tthis.images.length = numImages;\r\n\t\tthis.samplers.length = numImages;\r\n\t\tthis.uvMatrix = this.renderable.style? this.renderable.style.uvMatrix : this._surfaceGL.surface.style? this._surfaceGL.surface.style.uvMatrix : null;\r\n\r\n\t\tvar numTextures:number = this._surfaceGL.surface.getNumTextures();\r\n\t\tvar texture:TextureBase;\r\n\t\tvar numImages:number;\r\n\t\tvar image:ImageBase;\r\n\t\tvar sampler:SamplerBase;\r\n\t\tvar index:number;\r\n\r\n\t\tfor (var i:number = 0; i < numTextures; i++) {\r\n\t\t\ttexture = this._surfaceGL.surface.getTextureAt(i);\r\n\t\t\tnumImages = texture.getNumImages();\r\n\t\t\tfor (var j:number = 0; j < numImages; j++) {\r\n\t\t\t\tindex = surfaceGL.getImageIndex(texture, j);\r\n\t\t\t\timage =  this.renderable.style? this.renderable.style.getImageAt(texture, j) : null;\r\n\t\t\t\tthis.images[index] = image? <GL_ImageBase> this._stage.getAbstraction(image) : null;\r\n\t\t\t\tsampler = this.renderable.style? this.renderable.style.getSamplerAt(texture, j) : null;\r\n\t\t\t\tthis.samplers[index] = sampler? <GL_SamplerBase> this._stage.getAbstraction(sampler) : null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._surfaceDirty = false;\r\n\t}\r\n}",
    "import {AttributesBuffer}\t\t\t\tfrom \"awayjs-core/lib/attributes/AttributesBuffer\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\nimport {ElementsBase}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsBase\";\r\nimport {TriangleElements}\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\nimport {Skybox}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Skybox\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {ContextGLProgramType}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProgramType\";\r\n\r\nimport {RendererBase}\t\t\t\t\tfrom \"../RendererBase\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"../surfaces/passes/IPass\";\r\nimport {GL_SkyboxElements}\t\t\tfrom \"../elements/GL_SkyboxElements\";\r\n\r\n/**\r\n * @class away.pool.GL_SkyboxRenderable\r\n */\r\nexport class GL_SkyboxRenderable extends GL_RenderableBase\r\n{\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate static _elementsGL:GL_SkyboxElements;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate _skybox:Skybox;\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param pool\r\n\t * @param skybox\r\n\t */\r\n\tconstructor(skybox:Skybox, renderer:RendererBase)\r\n\t{\r\n\t\tsuper(skybox, renderer);\r\n\r\n\t\tthis._skybox = skybox;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @returns {away.base.TriangleElements}\r\n\t * @private\r\n\t */\r\n\tpublic _pGetElements():GL_SkyboxElements\r\n\t{\r\n\t\tvar elementsGL:GL_SkyboxElements = GL_SkyboxRenderable._elementsGL;\r\n\r\n\t\tif (!elementsGL) {\r\n\t\t\tvar elements:TriangleElements = new TriangleElements(new AttributesBuffer(11, 4));\r\n\t\t\telements.autoDeriveNormals = false;\r\n\t\t\telements.autoDeriveTangents = false;\r\n\t\t\telements.setIndices(Array<number>(0, 1, 2, 2, 3, 0, 6, 5, 4, 4, 7, 6, 2, 6, 7, 7, 3, 2, 4, 5, 1, 1, 0, 4, 4, 0, 3, 3, 7, 4, 2, 1, 5, 5, 6, 2));\r\n\t\t\telements.setPositions(Array<number>(-1, 1, -1, 1, 1, -1, 1, 1, 1, -1, 1, 1, -1, -1, -1, 1, -1, -1, 1, -1, 1, -1, -1, 1));\r\n\r\n\t\t\telementsGL = GL_SkyboxRenderable._elementsGL = new GL_SkyboxElements(elements, this._stage);\r\n\t\t}\r\n\r\n\t\treturn elementsGL;\r\n\t}\r\n\r\n\tpublic _pGetSurface():GL_SurfaceBase\r\n\t{\r\n\t\treturn this._renderer.getSurfacePool(this.elementsGL).getAbstraction(this._skybox);\r\n\t}\r\n\r\n\tpublic static _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\r\n\t}\r\n}",
    "export {GL_BillboardRenderable}\t\t\tfrom \"./renderables/GL_BillboardRenderable\";\r\nexport {GL_GraphicRenderable}\t\t\tfrom \"./renderables/GL_GraphicRenderable\";\r\nexport {GL_LineSegmentRenderable}\t\tfrom \"./renderables/GL_LineSegmentRenderable\";\r\nexport {GL_RenderableBase}\t\t\t\tfrom \"./renderables/GL_RenderableBase\";\r\nexport {GL_SkyboxRenderable}\t\t\t\tfrom \"./renderables/GL_SkyboxRenderable\";",
    "import {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {DirectionalLight}\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\r\nimport {LightProbe}\t\t\t\t\tfrom \"awayjs-display/lib/display/LightProbe\";\r\nimport {PointLight}\t\t\t\t\tfrom \"awayjs-display/lib/display/PointLight\";\r\nimport {LightPickerBase}\t\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/LightPickerBase\";\r\nimport {LightSources}\t\t\t\t\tfrom \"awayjs-display/lib/materials/LightSources\";\r\n\r\nimport {ContextGLProfile}\t\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLProfile\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {IContextGL}\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/IContextGL\";\r\nimport {GL_ImageBase}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_ImageBase\";\r\n\r\nimport {ILightingPass}\t\t\t\tfrom \"../surfaces/passes/ILightingPass\";\r\n\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {CompilerBase}\t\t\t\t\tfrom \"../shaders/compilers/CompilerBase\";\r\nimport {LightingCompiler}\t\t\t\tfrom \"../shaders/compilers/LightingCompiler\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\n\r\n/**\r\n * ShaderBase keeps track of the number of dependencies for \"named registers\" used across a pass.\r\n * Named registers are that are not necessarily limited to a single method. They are created by the compiler and\r\n * passed on to methods. The compiler uses the results to reserve usages through RegisterPool, which can be removed\r\n * each time a method has been compiled into the shader.\r\n *\r\n * @see RegisterPool.addUsage\r\n */\r\nexport class LightingShader extends ShaderBase\r\n{\r\n\tpublic _lightingPass:ILightingPass;\r\n\r\n\tprivate _includeCasters:boolean = true;\r\n\r\n\t/**\r\n\t * The first index for the fragment constants containing the light data.\r\n\t */\r\n\tpublic lightFragmentConstantIndex:number;\r\n\r\n\t/**\r\n\t * The starting index if the vertex constant to which light data needs to be uploaded.\r\n\t */\r\n\tpublic lightVertexConstantIndex:number;\r\n\r\n\t/**\r\n\t * Indices for the light probe diffuse textures.\r\n\t */\r\n\tpublic lightProbeDiffuseIndices:Array<number> /*uint*/;\r\n\r\n\t/**\r\n\t * Indices for the light probe specular textures.\r\n\t */\r\n\tpublic lightProbeSpecularIndices:Array<number> /*uint*/;\r\n\r\n\t/**\r\n\t * The index of the fragment constant containing the weights for the light probes.\r\n\t */\r\n\tpublic probeWeightsIndex:number;\r\n\r\n\tpublic numDirectionalLights:number;\r\n\tpublic numPointLights:number;\r\n\tpublic numLightProbes:number;\r\n\r\n\tpublic usesLightFallOff:boolean;\r\n\r\n\tpublic usesShadows:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether the shader uses any lights.\r\n\t */\r\n\tpublic usesLights:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether the shader uses any light probes.\r\n\t */\r\n\tpublic usesProbes:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether the lights uses any specular components.\r\n\t */\r\n\tpublic usesLightsForSpecular:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether the probes uses any specular components.\r\n\t */\r\n\tpublic usesProbesForSpecular:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether the lights uses any diffuse components.\r\n\t */\r\n\tpublic usesLightsForDiffuse:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether the probes uses any diffuse components.\r\n\t */\r\n\tpublic usesProbesForDiffuse:boolean;\r\n\r\n\t/**\r\n\t * Creates a new MethodCompilerVO object.\r\n\t */\r\n\tconstructor(elementsClass:IElementsClassGL, lightingPass:ILightingPass, stage:Stage)\r\n\t{\r\n\t\tsuper(elementsClass, lightingPass, stage);\r\n\r\n\t\tthis._lightingPass = lightingPass;\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies():void\r\n\t{\r\n\t\tthis.numPointLights = this._lightingPass.numPointLights;\r\n\t\tthis.numDirectionalLights = this._lightingPass.numDirectionalLights;\r\n\t\tthis.numLightProbes = this._lightingPass.numLightProbes;\r\n\r\n\t\tvar numAllLights:number = this._lightingPass.numPointLights + this._lightingPass.numDirectionalLights;\r\n\t\tvar numLightProbes:number = this._lightingPass.numLightProbes;\r\n\t\tvar diffuseLightSources:number = this._lightingPass._iUsesDiffuse(this)? this._lightingPass.diffuseLightSources : 0x00;\r\n\t\tvar specularLightSources:number = this._lightingPass._iUsesSpecular(this)? this._lightingPass.specularLightSources : 0x00;\r\n\t\tvar combinedLightSources:number = diffuseLightSources | specularLightSources;\r\n\r\n\t\tthis.usesLightFallOff = this._lightingPass.enableLightFallOff && this.profile != ContextGLProfile.BASELINE_CONSTRAINED;\r\n\t\tthis.usesCommonData = this.usesLightFallOff;\r\n\t\tthis.numLights = numAllLights + numLightProbes;\r\n\t\tthis.usesLights = numAllLights > 0 && (combinedLightSources & LightSources.LIGHTS) != 0;\r\n\t\tthis.usesProbes = numLightProbes > 0 && (combinedLightSources & LightSources.PROBES) != 0;\r\n\t\tthis.usesLightsForSpecular = numAllLights > 0 && (specularLightSources & LightSources.LIGHTS) != 0;\r\n\t\tthis.usesProbesForSpecular = numLightProbes > 0 && (specularLightSources & LightSources.PROBES) != 0;\r\n\t\tthis.usesLightsForDiffuse = numAllLights > 0 && (diffuseLightSources & LightSources.LIGHTS) != 0;\r\n\t\tthis.usesProbesForDiffuse = numLightProbes > 0 && (diffuseLightSources & LightSources.PROBES) != 0;\r\n\t\tthis.usesShadows = this._lightingPass._iUsesShadows(this);\r\n\r\n\t\t//IMPORTANT this must occur after shader lighting initialisation above\r\n\t\tsuper._iIncludeDependencies();\r\n\t}\r\n\r\n\t/**\r\n\t * Factory method to create a concrete compiler object for this object\r\n\t *\r\n\t * @param materialPassVO\r\n\t * @returns {away.materials.LightingCompiler}\r\n\t */\r\n\tpublic createCompiler(elementsClass:IElementsClassGL, pass:ILightingPass):CompilerBase\r\n\t{\r\n\t\treturn new LightingCompiler(elementsClass, pass, this);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param renderable\r\n\t * @param stage\r\n\t * @param camera\r\n\t */\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tsuper._setRenderState(renderable, camera, viewProjection);\r\n\r\n\t\tif (this._lightingPass.lightPicker)\r\n\t\t\tthis._lightingPass.lightPicker.collectLights(renderable.sourceEntity);\r\n\r\n\t\tif (this.usesLights)\r\n\t\t\tthis.updateLights();\r\n\r\n\t\tif (this.usesProbes)\r\n\t\t\tthis.updateProbes();\r\n\t}\r\n\r\n\t/**\r\n\t * Updates constant data render state used by the lights. This method is optional for subclasses to implement.\r\n\t */\r\n\tprivate updateLights():void\r\n\t{\r\n\t\tvar dirLight:DirectionalLight;\r\n\t\tvar pointLight:PointLight;\r\n\t\tvar i:number = 0;\r\n\t\tvar k:number = 0;\r\n\t\tvar len:number;\r\n\t\tvar dirPos:Vector3D;\r\n\t\tvar total:number = 0;\r\n\t\tvar numLightTypes:number = this.usesShadows? 2 : 1;\r\n\t\tvar l:number;\r\n\t\tvar offset:number;\r\n\r\n\t\tthis.ambientR = this.ambientG = this.ambientB = 0;\r\n\r\n\t\tl = this.lightVertexConstantIndex;\r\n\t\tk = this.lightFragmentConstantIndex;\r\n\r\n\t\tvar cast:number = 0;\r\n\t\tvar dirLights:Array<DirectionalLight> = this._lightingPass.lightPicker.directionalLights;\r\n\t\toffset = this._lightingPass.directionalLightsOffset;\r\n\t\tlen = this._lightingPass.lightPicker.directionalLights.length;\r\n\r\n\t\tif (offset > len) {\r\n\t\t\tcast = 1;\r\n\t\t\toffset -= len;\r\n\t\t}\r\n\r\n\t\tfor (; cast < numLightTypes; ++cast) {\r\n\t\t\tif (cast)\r\n\t\t\t\tdirLights = this._lightingPass.lightPicker.castingDirectionalLights;\r\n\r\n\t\t\tlen = dirLights.length;\r\n\r\n\t\t\tif (len > this.numDirectionalLights)\r\n\t\t\t\tlen = this.numDirectionalLights;\r\n\r\n\t\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\t\tdirLight = dirLights[offset + i];\r\n\t\t\t\tdirPos = dirLight.sceneDirection;\r\n\r\n\t\t\t\tthis.ambientR += dirLight._iAmbientR;\r\n\t\t\t\tthis.ambientG += dirLight._iAmbientG;\r\n\t\t\t\tthis.ambientB += dirLight._iAmbientB;\r\n\r\n\t\t\t\tif (this.usesTangentSpace) {\r\n\t\t\t\t\tvar x:number = -dirPos.x;\r\n\t\t\t\t\tvar y:number = -dirPos.y;\r\n\t\t\t\t\tvar z:number = -dirPos.z;\r\n\r\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[0]*x + this._pInverseSceneMatrix[4]*y + this._pInverseSceneMatrix[8]*z;\r\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[1]*x + this._pInverseSceneMatrix[5]*y + this._pInverseSceneMatrix[9]*z;\r\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[2]*x + this._pInverseSceneMatrix[6]*y + this._pInverseSceneMatrix[10]*z;\r\n\t\t\t\t\tthis.vertexConstantData[l++] = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = -dirPos.x;\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = -dirPos.y;\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = -dirPos.z;\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iDiffuseR;\r\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iDiffuseG;\r\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iDiffuseB;\r\n\t\t\t\tthis.fragmentConstantData[k++] = 1;\r\n\r\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iSpecularR;\r\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iSpecularG;\r\n\t\t\t\tthis.fragmentConstantData[k++] = dirLight._iSpecularB;\r\n\t\t\t\tthis.fragmentConstantData[k++] = 1;\r\n\r\n\t\t\t\tif (++total == this.numDirectionalLights) {\r\n\t\t\t\t\t// break loop\r\n\t\t\t\t\ti = len;\r\n\t\t\t\t\tcast = numLightTypes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// more directional supported than currently picked, need to clamp all to 0\r\n\t\tif (this.numDirectionalLights > total) {\r\n\t\t\ti = k + (this.numDirectionalLights - total)*12;\r\n\r\n\t\t\twhile (k < i)\r\n\t\t\t\tthis.fragmentConstantData[k++] = 0;\r\n\t\t}\r\n\r\n\t\ttotal = 0;\r\n\r\n\t\tvar pointLights:Array<PointLight> = this._lightingPass.lightPicker.pointLights;\r\n\t\toffset = this._lightingPass.pointLightsOffset;\r\n\t\tlen = this._lightingPass.lightPicker.pointLights.length;\r\n\r\n\t\tif (offset > len) {\r\n\t\t\tcast = 1;\r\n\t\t\toffset -= len;\r\n\t\t} else {\r\n\t\t\tcast = 0;\r\n\t\t}\r\n\r\n\t\tfor (; cast < numLightTypes; ++cast) {\r\n\t\t\tif (cast)\r\n\t\t\t\tpointLights = this._lightingPass.lightPicker.castingPointLights;\r\n\r\n\t\t\tlen = pointLights.length;\r\n\r\n\t\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\t\tpointLight = pointLights[offset + i];\r\n\t\t\t\tdirPos = pointLight.scenePosition;\r\n\r\n\t\t\t\tthis.ambientR += pointLight._iAmbientR;\r\n\t\t\t\tthis.ambientG += pointLight._iAmbientG;\r\n\t\t\t\tthis.ambientB += pointLight._iAmbientB;\r\n\r\n\t\t\t\tif (this.usesTangentSpace) {\r\n\t\t\t\t\tx = dirPos.x;\r\n\t\t\t\t\ty = dirPos.y;\r\n\t\t\t\t\tz = dirPos.z;\r\n\r\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[0]*x + this._pInverseSceneMatrix[4]*y + this._pInverseSceneMatrix[8]*z + this._pInverseSceneMatrix[12];\r\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[1]*x + this._pInverseSceneMatrix[5]*y + this._pInverseSceneMatrix[9]*z + this._pInverseSceneMatrix[13];\r\n\t\t\t\t\tthis.vertexConstantData[l++] = this._pInverseSceneMatrix[2]*x + this._pInverseSceneMatrix[6]*y + this._pInverseSceneMatrix[10]*z + this._pInverseSceneMatrix[14];\r\n\t\t\t\t\tthis.vertexConstantData[l++] = 1;\r\n\t\t\t\t} else if (!this.usesGlobalPosFragment) {\r\n\t\t\t\t\tthis.vertexConstantData[l++] = dirPos.x;\r\n\t\t\t\t\tthis.vertexConstantData[l++] = dirPos.y;\r\n\t\t\t\t\tthis.vertexConstantData[l++] = dirPos.z;\r\n\t\t\t\t\tthis.vertexConstantData[l++] = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = dirPos.x;\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = dirPos.y;\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = dirPos.z;\r\n\t\t\t\t\tthis.fragmentConstantData[k++] = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iDiffuseR;\r\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iDiffuseG;\r\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iDiffuseB;\r\n\r\n\t\t\t\tvar radius:number = pointLight._pRadius;\r\n\t\t\t\tthis.fragmentConstantData[k++] = radius*radius;\r\n\r\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iSpecularR;\r\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iSpecularG;\r\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._iSpecularB;\r\n\t\t\t\tthis.fragmentConstantData[k++] = pointLight._pFallOffFactor;\r\n\r\n\t\t\t\tif (++total == this.numPointLights) {\r\n\t\t\t\t\t// break loop\r\n\t\t\t\t\ti = len;\r\n\t\t\t\t\tcast = numLightTypes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// more directional supported than currently picked, need to clamp all to 0\r\n\t\tif (this.numPointLights > total) {\r\n\t\t\ti = k + (total - this.numPointLights)*12;\r\n\r\n\t\t\tfor (; k < i; ++k)\r\n\t\t\t\tthis.fragmentConstantData[k] = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates constant data render state used by the light probes. This method is optional for subclasses to implement.\r\n\t */\r\n\tprivate updateProbes():void\r\n\t{\r\n\t\tvar probe:LightProbe;\r\n\t\tvar lightProbes:Array<LightProbe> = this._lightingPass.lightPicker.lightProbes;\r\n\t\tvar weights:Array<number> = this._lightingPass.lightPicker.lightProbeWeights;\r\n\t\tvar len:number = lightProbes.length - this._lightingPass.lightProbesOffset;\r\n\t\tvar addDiff:boolean = this.usesProbesForDiffuse;\r\n\t\tvar addSpec:boolean = this.usesProbesForSpecular;\r\n\r\n\t\tif (!(addDiff || addSpec))\r\n\t\t\treturn;\r\n\r\n\t\tif (len > this.numLightProbes)\r\n\t\t\tlen = this.numLightProbes;\r\n\r\n\t\tfor (var i:number = 0; i < len; ++i) {\r\n\t\t\tprobe = lightProbes[ this._lightingPass.lightProbesOffset + i];\r\n\r\n\t\t\tif (addDiff)\r\n\t\t\t\t(<GL_ImageBase> this._stage.getAbstraction(probe.diffuseMap)).activate(this.lightProbeDiffuseIndices[i], probe.diffuseSampler.mipmap);\r\n\r\n\t\t\tif (addSpec)\r\n\t\t\t\t(<GL_ImageBase> this._stage.getAbstraction(probe.specularMap)).activate(this.lightProbeSpecularIndices[i], probe.diffuseSampler.mipmap);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < len; ++i)\r\n\t\t\tthis.fragmentConstantData[this.probeWeightsIndex + i] = weights[this._lightingPass.lightProbesOffset + i];\r\n\t}\r\n}",
    "import {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * RegisterPool is used by the shader compilers process to keep track of which registers of a certain type are\r\n * currently used and should not be allowed to be written to. Either entire registers can be requested and locked,\r\n * or single components (x, y, z, w) of a single register.\r\n * It is used by ShaderRegisterCache to track usages of individual register types.\r\n *\r\n * @see away.materials.ShaderRegisterCache\r\n */\r\nexport class RegisterPool\r\n{\r\n\tprivate static _regPool:Object = new Object();\r\n\tprivate static _regCompsPool:Object = new Object();\r\n\r\n\tprivate _vectorRegisters:Array<ShaderRegisterElement>;\r\n\tprivate _registerComponents;\r\n\r\n\tprivate _regName:string;\r\n\tprivate _usedSingleCount:Array<Array<number>>;\r\n\tprivate _usedVectorCount:Array<number> /*uint*/;\r\n\tprivate _regCount:number;\r\n\r\n\tprivate _persistent:boolean;\r\n\r\n\t/**\r\n\t * Creates a new RegisterPool object.\r\n\t * @param regName The base name of the register type (\"ft\" for fragment temporaries, \"vc\" for vertex constants, etc)\r\n\t * @param regCount The amount of available registers of this type.\r\n\t * @param persistent Whether or not registers, once reserved, can be freed again. For example, temporaries are not persistent, but constants are.\r\n\t */\r\n\tconstructor(regName:string, regCount:number, persistent:boolean = true)\r\n\t{\r\n\t\tthis._regName = regName;\r\n\t\tthis._regCount = regCount;\r\n\t\tthis._persistent = persistent;\r\n\t\tthis.initRegisters(regName, regCount);\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an entire vector register that's still available.\r\n\t */\r\n\tpublic requestFreeVectorReg():ShaderRegisterElement\r\n\t{\r\n\t\tfor (var i:number = 0; i < this._regCount; ++i) {\r\n\t\t\tif (!this.isRegisterUsed(i)) {\r\n\t\t\t\tif (this._persistent)\r\n\t\t\t\t\tthis._usedVectorCount[i]++;\r\n\r\n\t\t\t\treturn this._vectorRegisters[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthrow new Error(\"Register overflow!\");\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve a single vector component that's still available.\r\n\t */\r\n\tpublic requestFreeRegComponent():ShaderRegisterElement\r\n\t{\r\n\t\tfor (var i:number = 0; i < this._regCount; ++i) {\r\n\t\t\tif (this._usedVectorCount[i] > 0)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tfor (var j:number = 0; j < 4; ++j) {\r\n\t\t\t\tif (this._usedSingleCount[j][i] == 0) {\r\n\t\t\t\t\tif (this._persistent)\r\n\t\t\t\t\t\tthis._usedSingleCount[j][i]++;\r\n\r\n\t\t\t\t\treturn this._registerComponents[j][i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthrow new Error(\"Register overflow!\");\r\n\t}\r\n\r\n\t/**\r\n\t * Marks a register as used, so it cannot be retrieved. The register won't be able to be used until removeUsage\r\n\t * has been called usageCount times again.\r\n\t * @param register The register to mark as used.\r\n\t * @param usageCount The amount of usages to add.\r\n\t */\r\n\tpublic addUsage(register:ShaderRegisterElement, usageCount:number):void\r\n\t{\r\n\t\tif (register._component > -1)\r\n\t\t\tthis._usedSingleCount[register._component][register.index] += usageCount;\r\n\t\telse\r\n\t\t\tthis._usedVectorCount[register.index] += usageCount;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a usage from a register. When usages reach 0, the register is freed again.\r\n\t * @param register The register for which to remove a usage.\r\n\t */\r\n\tpublic removeUsage(register:ShaderRegisterElement):void\r\n\t{\r\n\t\tif (register._component > -1) {\r\n\t\t\tif (--this._usedSingleCount[register._component][register.index] < 0)\r\n\t\t\t\tthrow new Error(\"More usages removed than exist!\");\r\n\t\t} else {\r\n\t\t\tif (--this._usedVectorCount[register.index] < 0)\r\n\t\t\t\tthrow new Error(\"More usages removed than exist!\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes any resources used by the current RegisterPool object.\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis._vectorRegisters = null;\r\n\t\tthis._registerComponents = null;\r\n\t\tthis._usedSingleCount = null;\r\n\t\tthis._usedVectorCount = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether or not any registers are in use.\r\n\t */\r\n\tpublic hasRegisteredRegs():boolean\r\n\t{\r\n\t\tfor (var i:number = 0; i < this._regCount; ++i)\r\n\t\t\tif (this.isRegisterUsed(i))\r\n\t\t\t\treturn true;\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes all registers.\r\n\t */\r\n\tprivate initRegisters(regName:string, regCount:number):void\r\n\t{\r\n\t\tvar hash:string = RegisterPool._initPool(regName, regCount);\r\n\r\n\t\tthis._vectorRegisters = RegisterPool._regPool[hash];\r\n\t\tthis._registerComponents = RegisterPool._regCompsPool[hash];\r\n\r\n\t\tthis._usedVectorCount = this._initArray(Array<number>(regCount), 0);\r\n\r\n\t\tthis._usedSingleCount = new Array<Array<number>>(4);\r\n\t\tthis._usedSingleCount[0] = this._initArray(new Array<number>(regCount), 0);\r\n\t\tthis._usedSingleCount[1] = this._initArray(new Array<number>(regCount), 0);\r\n\t\tthis._usedSingleCount[2] = this._initArray(new Array<number>(regCount), 0);\r\n\t\tthis._usedSingleCount[3] = this._initArray(new Array<number>(regCount), 0);\r\n\t}\r\n\r\n\tprivate static _initPool(regName:string, regCount:number):string\r\n\t{\r\n\t\tvar hash:string = regName + regCount;\r\n\r\n\t\tif (RegisterPool._regPool[hash] != undefined)\r\n\t\t\treturn hash;\r\n\r\n\t\tvar vectorRegisters:Array<ShaderRegisterElement> = new Array<ShaderRegisterElement>(regCount);\r\n\t\tRegisterPool._regPool[hash] = vectorRegisters;\r\n\r\n\t\tvar registerComponents = [\r\n\t\t\t[],\r\n\t\t\t[],\r\n\t\t\t[],\r\n\t\t\t[]\r\n\t\t];\r\n\t\tRegisterPool._regCompsPool[hash] = registerComponents;\r\n\r\n\t\tfor (var i:number = 0; i < regCount; ++i) {\r\n\r\n\t\t\tvectorRegisters[i] = new ShaderRegisterElement(regName, i);\r\n\r\n\t\t\tfor (var j:number = 0; j < 4; ++j)\r\n\t\t\t\tregisterComponents[j][i] = new ShaderRegisterElement(regName, i, j);\r\n\t\t}\r\n\r\n\t\treturn hash;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Check if the temp register is either used for single or vector use\r\n\t */\r\n\tprivate isRegisterUsed(index:number):boolean\r\n\t{\r\n\t\tif (this._usedVectorCount[index] > 0)\r\n\t\t\treturn true;\r\n\r\n\t\tfor (var i:number = 0; i < 4; ++i)\r\n\t\t\tif (this._usedSingleCount[i][index] > 0)\r\n\t\t\t\treturn true;\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tprivate _initArray(a:Array<any>, val:any):Array<any>\r\n\t{\r\n\t\tvar l:number = a.length;\r\n\r\n\t\tfor (var c:number = 0; c < l; c++)\r\n\t\t\ta[c] = val;\r\n\r\n\t\treturn a;\r\n\t}\r\n}\r\n",
    "import {BlendMode}\t\t\t\t\tfrom \"awayjs-core/lib/image/BlendMode\";\r\nimport {Matrix}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\nimport {ColorTransform}\t\t\t\tfrom \"awayjs-core/lib/geom/ColorTransform\";\r\nimport {ArgumentError}\t\t\t\tfrom \"awayjs-core/lib/errors/ArgumentError\";\r\nimport {IAssetClass}\t\t\t\t\tfrom \"awayjs-core/lib/library/IAssetClass\";\r\nimport {IAbstractionPool}\t\t\t\tfrom \"awayjs-core/lib/library/IAbstractionPool\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {TextureBase}\t\t\t\t\tfrom \"awayjs-display/lib/textures/TextureBase\";\r\n\r\nimport {ContextGLBlendFactor}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLBlendFactor\";\r\nimport {ContextGLCompareMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLCompareMode\";\r\nimport {ContextGLTriangleFace}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLTriangleFace\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {ProgramData}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/ProgramData\";\r\nimport {GL_IAssetClass}\t\t\t\tfrom \"awayjs-stagegl/lib/library/GL_IAssetClass\";\r\n\r\nimport {AnimationSetBase}\t\t\t\tfrom \"../animators/AnimationSetBase\";\r\nimport {AnimatorBase}\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\nimport {AnimationRegisterData}\t\tfrom \"../animators/data/AnimationRegisterData\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"../surfaces/passes/IPass\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_ElementsBase}\t\t\t\tfrom \"../elements/GL_ElementsBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {CompilerBase}\t\t\t\t\tfrom \"../shaders/compilers/CompilerBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../textures/GL_TextureBase\";\r\n\r\n/**\r\n * ShaderBase keeps track of the number of dependencies for \"named registers\" used across a pass.\r\n * Named registers are that are not necessarily limited to a single method. They are created by the compiler and\r\n * passed on to methods. The compiler uses the results to reserve usages through RegisterPool, which can be removed\r\n * each time a method has been compiled into the shader.\r\n *\r\n * @see RegisterPool.addUsage\r\n */\r\nexport class ShaderBase implements IAbstractionPool\r\n{\r\n\tpublic static _abstractionClassPool:Object = new Object();\r\n\r\n\tprivate _abstractionPool:Object = new Object();\r\n\r\n\tprivate _elementsClass:IElementsClassGL;\r\n\tprivate _pass:IPass;\r\n\tpublic _stage:Stage;\r\n\tprivate _programData:ProgramData;\r\n\r\n\tprivate _blendFactorSource:string = ContextGLBlendFactor.ONE;\r\n\tprivate _blendFactorDest:string = ContextGLBlendFactor.ZERO;\r\n\t\r\n\tprivate _invalidProgram:boolean = true;\r\n\tprivate _animationVertexCode:string = \"\";\r\n\tprivate _animationFragmentCode:string = \"\";\r\n\tprivate _numUsedVertexConstants:number;\r\n\tprivate _numUsedFragmentConstants:number;\r\n\tprivate _numUsedStreams:number;\r\n\tprivate _numUsedTextures:number;\r\n\tprivate _usesAnimation:boolean;\r\n\r\n\tpublic get programData():ProgramData\r\n\t{\r\n\t\tif (this._invalidProgram)\r\n\t\t\tthis._updateProgram();\r\n\r\n\t\treturn this._programData;\r\n\t}\r\n\r\n\tpublic usesBlending:boolean = false;\r\n\r\n\tpublic useImageRect:boolean = false;\r\n\r\n\tpublic usesCurves:boolean = false;\r\n\r\n\t/**\r\n\t * The depth compare mode used to render the renderables using this material.\r\n\t *\r\n\t * @see away.stagegl.ContextGLCompareMode\r\n\t */\r\n\tpublic depthCompareMode:string = ContextGLCompareMode.LESS;\r\n\r\n\r\n\t/**\r\n\t * Indicate whether the shader should write to the depth buffer or not. Ignored when blending is enabled.\r\n\t */\r\n\tpublic writeDepth:boolean = true;\r\n\r\n\tpublic profile:string;\r\n\r\n\tpublic get usesAnimation():boolean\r\n\t{\r\n\t\treturn this._usesAnimation;\r\n\t}\r\n\r\n\tpublic set usesAnimation(value:boolean)\r\n\t{\r\n\t\tif (this._usesAnimation == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._usesAnimation = value;\r\n\r\n\t\tthis.invalidateProgram();\r\n\t}\r\n\r\n\tprivate _defaultCulling:string = ContextGLTriangleFace.BACK;\r\n\r\n\tpublic _pInverseSceneMatrix:Float32Array = new Float32Array(16);\r\n\r\n\tpublic animationRegisterData:AnimationRegisterData;\r\n\r\n\t\r\n\tpublic get numUsedVertexConstants():number\r\n\t{\r\n\t\tif (this._invalidProgram)\r\n\t\t\tthis._updateProgram();\r\n\t\t\r\n\t\treturn this._numUsedVertexConstants;\r\n\t}\r\n\r\n\tpublic get numUsedFragmentConstants():number\r\n\t{\r\n\t\tif (this._invalidProgram)\r\n\t\t\tthis._updateProgram();\r\n\t\t\r\n\t\treturn this._numUsedFragmentConstants;\r\n\t}\r\n\t\r\n\t/**\r\n\t * The amount of used vertex streams in the vertex code. Used by the animation code generation to know from which index on streams are available.\r\n\t */\r\n\tpublic get numUsedStreams():number\r\n\t{\r\n\t\tif (this._invalidProgram)\r\n\t\t\tthis._updateProgram();\r\n\r\n\t\treturn this._numUsedStreams;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic get numUsedTextures():number\r\n\t{\r\n\t\tif (this._invalidProgram)\r\n\t\t\tthis._updateProgram();\r\n\r\n\t\treturn this._numUsedTextures;\r\n\t}\r\n\r\n\tpublic numLights:number;\r\n\r\n\tpublic useAlphaPremultiplied:boolean;\r\n\tpublic useBothSides:boolean;\r\n\tpublic usesUVTransform:boolean;\r\n\tpublic usesColorTransform:boolean;\r\n\tpublic alphaThreshold:number;\r\n\r\n\r\n\t//set ambient values to default\r\n\tpublic ambientR:number = 0xFF;\r\n\tpublic ambientG:number = 0xFF;\r\n\tpublic ambientB:number = 0xFF;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic usesCommonData:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether the pass requires any fragment animation code.\r\n\t */\r\n\tpublic usesFragmentAnimation:boolean;\r\n\r\n\t/**\r\n\t * The amount of dependencies on the projected position.\r\n\t */\r\n\tpublic projectionDependencies:number;\r\n\r\n\t/**\r\n\t * The amount of dependencies on the normal vector.\r\n\t */\r\n\tpublic normalDependencies:number;\r\n\r\n\t/**\r\n\t * The amount of dependencies on the vertex color.\r\n\t */\r\n\tpublic colorDependencies:number;\r\n\r\n\t/**\r\n\t * The amount of dependencies on the view direction.\r\n\t */\r\n\tpublic viewDirDependencies:number;\r\n\r\n\t/**\r\n\t * The amount of dependencies on the primary UV coordinates.\r\n\t */\r\n\tpublic uvDependencies:number;\r\n\r\n\t/**\r\n\t * The amount of dependencies on the secondary UV coordinates.\r\n\t */\r\n\tpublic secondaryUVDependencies:number;\r\n\r\n\t/**\r\n\t * The amount of dependencies on the global position. This can be 0 while hasGlobalPosDependencies is true when\r\n\t * the global position is used as a temporary value (fe to calculate the view direction)\r\n\t */\r\n\tpublic globalPosDependencies:number;\r\n\r\n\t/**\r\n\t * The amount of tangent vector dependencies (fragment shader).\r\n\t */\r\n\tpublic tangentDependencies:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic outputsColors:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether or not normals are output.\r\n\t */\r\n\tpublic outputsNormals:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether or not normal calculations are output in tangent space.\r\n\t */\r\n\tpublic outputsTangentNormals:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether or not normal calculations are expected in tangent space. This is only the case if no world-space\r\n\t * dependencies exist and normals are being output.\r\n\t */\r\n\tpublic usesTangentSpace:boolean;\r\n\r\n\t/**\r\n\t * Indicates whether there are any dependencies on the world-space position vector.\r\n\t */\r\n\tpublic usesGlobalPosFragment:boolean = false;\r\n\r\n\t/**\r\n\t * Indicates whether there are any dependencies on the local position vector.\r\n\t */\r\n\tpublic usesPositionFragment:boolean = false;\r\n\r\n\tpublic vertexConstantData:Float32Array;\r\n\tpublic fragmentConstantData:Float32Array;\r\n\r\n\t/**\r\n\t * The index for the common data register.\r\n\t */\r\n\tpublic commonsDataIndex:number;\r\n\r\n\t/**\r\n\t * The index for the curve vertex attribute stream.\r\n\t */\r\n\tpublic curvesIndex:number;\r\n\r\n\t/**\r\n\t * The index for the UV vertex attribute stream.\r\n\t */\r\n\tpublic uvIndex:number;\r\n\r\n\t/**\r\n\t * The index for the secondary UV vertex attribute stream.\r\n\t */\r\n\tpublic secondaryUVIndex:number;\r\n\r\n\t/**\r\n\t * The index for the vertex normal attribute stream.\r\n\t */\r\n\tpublic normalIndex:number;\r\n\r\n\t/**\r\n\t * The index for the color attribute stream.\r\n\t */\r\n\tpublic colorBufferIndex:number;\r\n\r\n\t/**\r\n\t * The index for the vertex tangent attribute stream.\r\n\t */\r\n\tpublic tangentIndex:number;\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic skyboxScaleIndex:number;\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic scenePositionIndex:number;\r\n\t\r\n\t/**\r\n\t * The index of the vertex constant containing the view matrix.\r\n\t */\r\n\tpublic viewMatrixIndex:number;\r\n\r\n\t/**\r\n\t * The index of the vertex constant containing the scene matrix.\r\n\t */\r\n\tpublic sceneMatrixIndex:number;\r\n\r\n\t/**\r\n\t * The index of the vertex constant containing the uniform scene matrix (the inverse transpose).\r\n\t */\r\n\tpublic sceneNormalMatrixIndex:number;\r\n\r\n\t/**\r\n\t * The index of the vertex constant containing the camera position.\r\n\t */\r\n\tpublic cameraPositionIndex:number;\r\n\r\n\t/**\r\n\t * The index for the UV transformation matrix vertex constant.\r\n\t */\r\n\tpublic uvMatrixIndex:number;\r\n\r\n\t/**\r\n\t * The index for the color transform fragment constant.\r\n\t */\r\n\tpublic colorTransformIndex:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic jointIndexIndex:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic jointWeightIndex:number;\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic imageIndices:Array<number> = new Array<number>();\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic activeElements:GL_ElementsBase;\r\n\r\n\t/**\r\n\t * Creates a new MethodCompilerVO object.\r\n\t */\r\n\tconstructor(elementsClass:IElementsClassGL, pass:IPass, stage:Stage)\r\n\t{\r\n\t\tthis._elementsClass = elementsClass;\r\n\t\tthis._pass = pass;\r\n\t\tthis._stage = stage;\r\n\r\n\t\tthis.profile = this._stage.profile;\r\n\t}\r\n\r\n\tpublic getAbstraction(texture:TextureBase):GL_TextureBase\r\n\t{\r\n\t\treturn (this._abstractionPool[texture.id] || (this._abstractionPool[texture.id] = new (<GL_IAssetClass> ShaderBase._abstractionClassPool[texture.assetType])(texture, this)));\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param image\r\n\t */\r\n\tpublic clearAbstraction(texture:TextureBase):void\r\n\t{\r\n\t\tthis._abstractionPool[texture.id] = null;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param imageObjectClass\r\n\t */\r\n\tpublic static registerAbstraction(gl_assetClass:GL_IAssetClass, assetClass:IAssetClass):void\r\n\t{\r\n\t\tShaderBase._abstractionClassPool[assetClass.assetType] = gl_assetClass;\r\n\t}\r\n\r\n\tpublic getImageIndex(texture:TextureBase, index:number = 0):number\r\n\t{\r\n\t\treturn this._pass.getImageIndex(texture, index);\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies():void\r\n\t{\r\n\t\tthis._pass._iIncludeDependencies(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Factory method to create a concrete compiler object for this object\r\n\t *\r\n\t * @param elementsClass\r\n\t * @param pass\r\n\t * @param stage\r\n\t * @returns {CompilerBase}\r\n\t */\r\n\tpublic createCompiler(elementsClass:IElementsClassGL, pass:IPass):CompilerBase\r\n\t{\r\n\t\treturn new CompilerBase(elementsClass, pass, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears dependency counts for all registers. Called when recompiling a pass.\r\n\t */\r\n\tpublic reset():void\r\n\t{\r\n\t\tthis.projectionDependencies = 0;\r\n\t\tthis.normalDependencies = 0;\r\n\t\tthis.colorDependencies = 0;\r\n\t\tthis.viewDirDependencies = 0;\r\n\t\tthis.uvDependencies = 0;\r\n\t\tthis.secondaryUVDependencies = 0;\r\n\t\tthis.globalPosDependencies = 0;\r\n\t\tthis.tangentDependencies = 0;\r\n\t\tthis.usesCommonData = false;\r\n\t\tthis.usesGlobalPosFragment = false;\r\n\t\tthis.usesPositionFragment = false;\r\n\t\tthis.usesFragmentAnimation = false;\r\n\t\tthis.usesTangentSpace = false;\r\n\t\tthis.outputsNormals = false;\r\n\t\tthis.outputsTangentNormals = false;\r\n\t}\r\n\r\n\tpublic pInitRegisterIndices():void\r\n\t{\r\n\t\tthis.commonsDataIndex = -1;\r\n\t\tthis.cameraPositionIndex = -1;\r\n\t\tthis.curvesIndex = -1;\r\n\t\tthis.uvIndex = -1;\r\n\t\tthis.uvMatrixIndex = -1;\r\n\t\tthis.colorTransformIndex = -1;\r\n\t\tthis.secondaryUVIndex = -1;\r\n\t\tthis.normalIndex = -1;\r\n\t\tthis.colorBufferIndex = -1;\r\n\t\tthis.tangentIndex = -1;\r\n\t\tthis.sceneMatrixIndex = -1;\r\n\t\tthis.sceneNormalMatrixIndex = -1;\r\n\t\tthis.jointIndexIndex = -1;\r\n\t\tthis.jointWeightIndex = -1;\r\n\t\tthis.imageIndices.length = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes the unchanging constant data for this shader object.\r\n\t */\r\n\tpublic initConstantData(registerCache:ShaderRegisterCache):void\r\n\t{\r\n\t\t//Updates the amount of used register indices.\r\n\t\tthis._numUsedVertexConstants = registerCache.numUsedVertexConstants;\r\n\t\tthis._numUsedFragmentConstants = registerCache.numUsedFragmentConstants;\r\n\t\tthis._numUsedStreams = registerCache.numUsedStreams;\r\n\t\tthis._numUsedTextures = registerCache.numUsedTextures;\r\n\r\n\t\tthis.vertexConstantData = new Float32Array(registerCache.numUsedVertexConstants*4);\r\n\t\tthis.fragmentConstantData = new Float32Array(registerCache.numUsedFragmentConstants*4);\r\n\r\n\t\t//Initializes commonly required constant values.\r\n\t\tif (this.commonsDataIndex >= 0) {\r\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex] = .5;\r\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex + 1] = 0;\r\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex + 2] = 1/255;\r\n\t\t\tthis.fragmentConstantData[this.commonsDataIndex + 3] = 1;\r\n\t\t}\r\n\r\n\t\t//Initializes the default UV transformation matrix.\r\n\t\tif (this.uvMatrixIndex >= 0) {\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex] = 1;\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 1] = 0;\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 2] = 0;\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 3] = 0;\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 4] = 0;\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 5] = 1;\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 6] = 0;\r\n\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 7] = 0;\r\n\t\t}\r\n\r\n\t\t//Initializes the default colorTransform.\r\n\t\tif (this.colorTransformIndex >= 0) {\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex] = 1;\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 1] = 1;\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 2] = 1;\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 3] = 1;\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 4] = 0;\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 5] = 0;\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 6] = 0;\r\n\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 7] = 0;\r\n\t\t}\r\n\t\tif (this.cameraPositionIndex >= 0)\r\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 3] = 1;\r\n\t\t\r\n\t\t// init constant data in pass\r\n\t\tthis._pass._iInitConstantData(this);\r\n\t\t\r\n\t\t//init constant data in animation\r\n\t\tif (this.usesAnimation)\r\n\t\t\tthis._pass.animationSet.doneAGALCode(this);\r\n\t}\r\n\r\n\t/**\r\n\t * The blend mode to use when drawing this renderable. The following blend modes are supported:\r\n\t * <ul>\r\n\t * <li>BlendMode.NORMAL: No blending, unless the material inherently needs it</li>\r\n\t * <li>BlendMode.LAYER: Force blending. This will draw the object the same as NORMAL, but without writing depth writes.</li>\r\n\t * <li>BlendMode.MULTIPLY</li>\r\n\t * <li>BlendMode.ADD</li>\r\n\t * <li>BlendMode.ALPHA</li>\r\n\t * </ul>\r\n\t */\r\n\tpublic setBlendMode(value:string):void\r\n\t{\r\n\t\tswitch (value) {\r\n\t\t\tcase BlendMode.NORMAL:\r\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.ONE;\r\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.ZERO;\r\n\t\t\t\tthis.usesBlending = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase BlendMode.LAYER:\r\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.SOURCE_ALPHA;\r\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.ONE_MINUS_SOURCE_ALPHA;\r\n\t\t\t\tthis.usesBlending = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase BlendMode.MULTIPLY:\r\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.ZERO;\r\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.SOURCE_COLOR;\r\n\t\t\t\tthis.usesBlending = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase BlendMode.ADD:\r\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.SOURCE_ALPHA;\r\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.ONE;\r\n\t\t\t\tthis.usesBlending = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase BlendMode.ALPHA:\r\n\t\t\t\tthis._blendFactorSource = ContextGLBlendFactor.ZERO;\r\n\t\t\t\tthis._blendFactorDest = ContextGLBlendFactor.SOURCE_ALPHA;\r\n\t\t\t\tthis.usesBlending = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new ArgumentError(\"Unsupported blend mode!\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iActivate(camera:Camera):void\r\n\t{\r\n\t\tthis._stage.context.setCulling(this.useBothSides? ContextGLTriangleFace.NONE : this._defaultCulling, camera.projection.coordinateSystem);\r\n\r\n\t\tif (!this.usesTangentSpace && this.cameraPositionIndex >= 0) {\r\n\t\t\tvar pos:Vector3D = camera.scenePosition;\r\n\r\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex] = pos.x;\r\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 1] = pos.y;\r\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 2] = pos.z;\r\n\t\t}\r\n\r\n\t\tthis._stage.context.setDepthTest(( this.writeDepth && !this.usesBlending ), this.depthCompareMode);\r\n\r\n\t\tif (this.usesBlending)\r\n\t\t\tthis._stage.context.setBlendFactors(this._blendFactorSource, this._blendFactorDest);\r\n\r\n\t\tthis.activeElements = null;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iDeactivate():void\r\n\t{\r\n\t\t//For the love of god don't remove this if you want your multi-material shadows to not flicker like shit\r\n\t\tthis._stage.context.setDepthTest(true, ContextGLCompareMode.LESS);\r\n\r\n\t\tthis.activeElements = null;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param renderable\r\n\t * @param stage\r\n\t * @param camera\r\n\t */\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tif (renderable.renderable.animator)\r\n\t\t\t(<AnimatorBase> renderable.renderable.animator).setRenderState(this, renderable, this._stage, camera);\r\n\r\n\t\tif (this.usesUVTransform) {\r\n\t\t\tvar uvMatrix:Matrix = renderable.uvMatrix;\r\n\r\n\t\t\tif (uvMatrix) {\r\n\t\t\t\t//transpose\r\n\t\t\t\tvar rawData:Float32Array = uvMatrix.rawData;\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex] = rawData[0];\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 1] = rawData[2];\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 3] = rawData[4];\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 4] = rawData[1];\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 5] = rawData[3];\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 7] = rawData[5];\r\n\t\t\t} else {\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex] = 1;\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 1] = 0;\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 3] = 0;\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 4] = 0;\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 5] = 1;\r\n\t\t\t\tthis.vertexConstantData[this.uvMatrixIndex + 7] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.usesColorTransform) {\r\n\r\n\t\t\tvar colorTransform:ColorTransform = renderable.sourceEntity._iAssignedColorTransform();\r\n\r\n\t\t\tif (colorTransform) {\r\n\t\t\t\t//TODO: AWDParser to write normalised color offsets\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex] = colorTransform.rawData[0];\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 1] = colorTransform.rawData[1];\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 2] = colorTransform.rawData[2];\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 3] = colorTransform.rawData[3];\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 4] = colorTransform.rawData[4]/255;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 5] = colorTransform.rawData[5]/255;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 6] = colorTransform.rawData[6]/255;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 7] = colorTransform.rawData[7]/255;\r\n\t\t\t} else {\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex] = 1;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 1] = 1;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 2] = 1;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 3] = 1;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 4] = 0;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 5] = 0;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 6] = 0;\r\n\t\t\t\tthis.fragmentConstantData[this.colorTransformIndex + 7] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.sceneNormalMatrixIndex >= 0)\r\n\t\t\trenderable.sourceEntity.inverseSceneTransform.copyRawDataTo(this.vertexConstantData, this.sceneNormalMatrixIndex, false);\r\n\r\n\t\tif (this.usesTangentSpace && this.cameraPositionIndex >= 0) {\r\n\r\n\t\t\trenderable.sourceEntity.inverseSceneTransform.copyRawDataTo(this._pInverseSceneMatrix);\r\n\t\t\tvar pos:Vector3D = camera.scenePosition;\r\n\t\t\tvar x:number = pos.x;\r\n\t\t\tvar y:number = pos.y;\r\n\t\t\tvar z:number = pos.z;\r\n\r\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex] = this._pInverseSceneMatrix[0]*x + this._pInverseSceneMatrix[4]*y + this._pInverseSceneMatrix[8]*z + this._pInverseSceneMatrix[12];\r\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 1] = this._pInverseSceneMatrix[1]*x + this._pInverseSceneMatrix[5]*y + this._pInverseSceneMatrix[9]*z + this._pInverseSceneMatrix[13];\r\n\t\t\tthis.vertexConstantData[this.cameraPositionIndex + 2] = this._pInverseSceneMatrix[2]*x + this._pInverseSceneMatrix[6]*y + this._pInverseSceneMatrix[10]*z + this._pInverseSceneMatrix[14];\r\n\t\t}\r\n\t}\r\n\r\n\tpublic invalidateProgram():void\r\n\t{\r\n\t\tthis._invalidProgram = true;\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis._programData.dispose();\r\n\t\tthis._programData = null;\r\n\t}\r\n\r\n\tprivate _updateProgram():void\r\n\t{\r\n\t\tthis._invalidProgram = false;\r\n\r\n\t\tvar compiler:CompilerBase = this.createCompiler(this._elementsClass, this._pass);\r\n\t\tcompiler.compile();\r\n\r\n\t\tthis._calcAnimationCode(compiler._pRegisterCache, compiler.shadedTarget, compiler._pSharedRegisters);\r\n\r\n\t\t//initialise the required shader constants\r\n\t\tthis.initConstantData(compiler._pRegisterCache);\r\n\t\t\r\n\t\tvar programData:ProgramData = this._stage.getProgramData(this._animationVertexCode + compiler.vertexCode, compiler.fragmentCode + this._animationFragmentCode + compiler.postAnimationFragmentCode);\r\n\r\n\t\t//check program data hasn't changed, keep count of program usages\r\n\t\tif (this._programData != programData) {\r\n\t\t\tif (this._programData)\r\n\t\t\t\tthis._programData.dispose();\r\n\r\n\t\t\tthis._programData = programData;\r\n\r\n\t\t\tprogramData.usages++;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _calcAnimationCode(registerCache:ShaderRegisterCache, shadedTarget:ShaderRegisterElement, sharedRegisters:ShaderRegisterData):void\r\n\t{\r\n\t\t//reset code\r\n\t\tthis._animationVertexCode = \"\";\r\n\t\tthis._animationFragmentCode = \"\";\r\n\r\n\t\t//check to see if GPU animation is used\r\n\t\tif (this.usesAnimation) {\r\n\r\n\t\t\tvar animationSet:AnimationSetBase = <AnimationSetBase> this._pass.animationSet;\r\n\r\n\t\t\tthis._animationVertexCode += animationSet.getAGALVertexCode(this, registerCache, sharedRegisters);\r\n\r\n\t\t\tif (this.uvDependencies > 0 && !this.usesUVTransform)\r\n\t\t\t\tthis._animationVertexCode += animationSet.getAGALUVCode(this, registerCache, sharedRegisters);\r\n\r\n\t\t\tif (this.usesFragmentAnimation)\r\n\t\t\t\tthis._animationFragmentCode += animationSet.getAGALFragmentCode(this, registerCache, shadedTarget);\r\n\t\t} else {\r\n\t\t\t// simply write attributes to targets, do not animate them\r\n\t\t\t// projection will pick up on targets[0] to do the projection\r\n\t\t\tvar len:number = sharedRegisters.animatableAttributes.length;\r\n\t\t\tfor (var i:number = 0; i < len; ++i)\r\n\t\t\t\tthis._animationVertexCode += \"mov \" + sharedRegisters.animationTargetRegisters[i] + \", \" + sharedRegisters.animatableAttributes[i] + \"\\n\";\r\n\r\n\t\t\tif (this.uvDependencies > 0 && !this.usesUVTransform)\r\n\t\t\t\tthis._animationVertexCode += \"mov \" + sharedRegisters.uvTarget + \",\" + sharedRegisters.uvSource + \"\\n\";\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic setVertexConst(index:number, x:number = 0, y:number = 0, z:number = 0, w:number = 0):void\r\n\t{\r\n\t\tindex *= 4;\r\n\t\tthis.vertexConstantData[index++] = x;\r\n\t\tthis.vertexConstantData[index++] = y;\r\n\t\tthis.vertexConstantData[index++] = z;\r\n\t\tthis.vertexConstantData[index] = w;\r\n\t}\r\n\r\n\tpublic setVertexConstFromArray(index:number, data:Float32Array):void\r\n\t{\r\n\t\tindex *= 4;\r\n\t\tfor (var i:number /*int*/ = 0; i < data.length; i++)\r\n\t\t\tthis.vertexConstantData[index++] = data[i];\r\n\t}\r\n\r\n\tpublic setVertexConstFromMatrix(index:number, matrix:Matrix3D):void\r\n\t{\r\n\t\tindex *= 4;\r\n\t\tvar rawData:Float32Array = matrix.rawData;\r\n\t\tthis.vertexConstantData[index++] = rawData[0];\r\n\t\tthis.vertexConstantData[index++] = rawData[4];\r\n\t\tthis.vertexConstantData[index++] = rawData[8];\r\n\t\tthis.vertexConstantData[index++] = rawData[12];\r\n\t\tthis.vertexConstantData[index++] = rawData[1];\r\n\t\tthis.vertexConstantData[index++] = rawData[5];\r\n\t\tthis.vertexConstantData[index++] = rawData[9];\r\n\t\tthis.vertexConstantData[index++] = rawData[13];\r\n\t\tthis.vertexConstantData[index++] = rawData[2];\r\n\t\tthis.vertexConstantData[index++] = rawData[6];\r\n\t\tthis.vertexConstantData[index++] = rawData[10];\r\n\t\tthis.vertexConstantData[index++] = rawData[14];\r\n\t\tthis.vertexConstantData[index++] = rawData[3];\r\n\t\tthis.vertexConstantData[index++] = rawData[7];\r\n\t\tthis.vertexConstantData[index++] = rawData[11];\r\n\t\tthis.vertexConstantData[index] = rawData[15];\r\n\r\n\t}\r\n\r\n\tpublic setFragmentConst(index:number, x:number = 0, y:number = 0, z:number = 0, w:number = 0):void\r\n\t{\r\n\t\tindex *= 4;\r\n\t\tthis.fragmentConstantData[index++] = x;\r\n\t\tthis.fragmentConstantData[index++] = y;\r\n\t\tthis.fragmentConstantData[index++] = z;\r\n\t\tthis.fragmentConstantData[index] = w;\r\n\t}\r\n}",
    "import {RegisterPool}\t\t\t\t\tfrom \"../shaders/RegisterPool\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * ShaderRegister Cache provides the usage management system for all registers during shading compilers.\r\n */\r\nexport class ShaderRegisterCache\r\n{\r\n\tprivate _fragmentTempCache:RegisterPool;\r\n\tprivate _vertexTempCache:RegisterPool;\r\n\tprivate _varyingCache:RegisterPool;\r\n\tprivate _fragmentConstantsCache:RegisterPool;\r\n\tprivate _vertexConstantsCache:RegisterPool;\r\n\tprivate _textureCache:RegisterPool;\r\n\tprivate _vertexAttributesCache:RegisterPool;\r\n\r\n\tprivate _fragmentOutputRegister:ShaderRegisterElement;\r\n\tprivate _vertexOutputRegister:ShaderRegisterElement;\r\n\tprivate _numUsedVertexConstants:number = 0;\r\n\tprivate _numUsedFragmentConstants:number = 0;\r\n\tprivate _numUsedStreams:number = 0;\r\n\tprivate _numUsedTextures:number = 0;\r\n\tprivate _numUsedVaryings:number = 0;\r\n\tprivate _profile:string;\r\n\r\n\t/**\r\n\t * Create a new ShaderRegisterCache object.\r\n\t *\r\n\t * @param profile The compatibility profile used by the renderer.\r\n\t */\r\n\tconstructor(profile:string)\r\n\t{\r\n\t\tthis._profile = profile;\r\n\t\t\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\t/**\r\n\t * Resets all registers.\r\n\t */\r\n\tpublic reset():void\r\n\t{\r\n\t\tthis._fragmentTempCache = new RegisterPool(\"ft\", 8, false);\r\n\t\tthis._vertexTempCache = new RegisterPool(\"vt\", 8, false);\r\n\t\tthis._varyingCache = new RegisterPool(\"v\", 8);\r\n\t\tthis._textureCache = new RegisterPool(\"fs\", 8);\r\n\t\tthis._vertexAttributesCache = new RegisterPool(\"va\", 8);\r\n\t\tthis._fragmentConstantsCache = new RegisterPool(\"fc\", 28);\r\n\t\tthis._vertexConstantsCache = new RegisterPool(\"vc\", 128);\r\n\t\tthis._fragmentOutputRegister = new ShaderRegisterElement(\"oc\", -1);\r\n\t\tthis._vertexOutputRegister = new ShaderRegisterElement(\"op\", -1);\r\n\t\tthis._numUsedVertexConstants = 0;\r\n\t\tthis._numUsedStreams = 0;\r\n\t\tthis._numUsedTextures = 0;\r\n\t\tthis._numUsedVaryings = 0;\r\n\t\tthis._numUsedFragmentConstants = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes all resources used.\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis._fragmentTempCache.dispose();\r\n\t\tthis._vertexTempCache.dispose();\r\n\t\tthis._varyingCache.dispose();\r\n\t\tthis._fragmentConstantsCache.dispose();\r\n\t\tthis._vertexAttributesCache.dispose();\r\n\r\n\t\tthis._fragmentTempCache = null;\r\n\t\tthis._vertexTempCache = null;\r\n\t\tthis._varyingCache = null;\r\n\t\tthis._fragmentConstantsCache = null;\r\n\t\tthis._vertexAttributesCache = null;\r\n\t\tthis._fragmentOutputRegister = null;\r\n\t\tthis._vertexOutputRegister = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Marks a fragment temporary register as used, so it cannot be retrieved. The register won't be able to be used until removeUsage\r\n\t * has been called usageCount times again.\r\n\t * @param register The register to mark as used.\r\n\t * @param usageCount The amount of usages to add.\r\n\t */\r\n\tpublic addFragmentTempUsages(register:ShaderRegisterElement, usageCount:number):void\r\n\t{\r\n\t\tthis._fragmentTempCache.addUsage(register, usageCount);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a usage from a fragment temporary register. When usages reach 0, the register is freed again.\r\n\t * @param register The register for which to remove a usage.\r\n\t */\r\n\tpublic removeFragmentTempUsage(register:ShaderRegisterElement):void\r\n\t{\r\n\t\tthis._fragmentTempCache.removeUsage(register);\r\n\t}\r\n\r\n\t/**\r\n\t * Marks a vertex temporary register as used, so it cannot be retrieved. The register won't be able to be used\r\n\t * until removeUsage has been called usageCount times again.\r\n\t * @param register The register to mark as used.\r\n\t * @param usageCount The amount of usages to add.\r\n\t */\r\n\tpublic addVertexTempUsages(register:ShaderRegisterElement, usageCount:number):void\r\n\t{\r\n\t\tthis._vertexTempCache.addUsage(register, usageCount);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a usage from a vertex temporary register. When usages reach 0, the register is freed again.\r\n\t * @param register The register for which to remove a usage.\r\n\t */\r\n\tpublic removeVertexTempUsage(register:ShaderRegisterElement):void\r\n\t{\r\n\t\tthis._vertexTempCache.removeUsage(register);\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an entire fragment temporary register that's still available. The register won't be able to be used until removeUsage\r\n\t * has been called usageCount times again.\r\n\t */\r\n\tpublic getFreeFragmentVectorTemp():ShaderRegisterElement\r\n\t{\r\n\t\treturn this._fragmentTempCache.requestFreeVectorReg();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve a single component from a fragment temporary register that's still available.\r\n\t */\r\n\tpublic getFreeFragmentSingleTemp():ShaderRegisterElement\r\n\t{\r\n\t\treturn this._fragmentTempCache.requestFreeRegComponent();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an available varying register\r\n\t */\r\n\tpublic getFreeVarying():ShaderRegisterElement\r\n\t{\r\n\t\t++this._numUsedVaryings;\r\n\t\treturn this._varyingCache.requestFreeVectorReg();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an available fragment constant register\r\n\t */\r\n\tpublic getFreeFragmentConstant():ShaderRegisterElement\r\n\t{\r\n\t\t++this._numUsedFragmentConstants;\r\n\t\treturn this._fragmentConstantsCache.requestFreeVectorReg();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an available vertex constant register\r\n\t */\r\n\tpublic getFreeVertexConstant():ShaderRegisterElement\r\n\t{\r\n\t\t++this._numUsedVertexConstants;\r\n\t\treturn this._vertexConstantsCache.requestFreeVectorReg();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an entire vertex temporary register that's still available.\r\n\t */\r\n\tpublic getFreeVertexVectorTemp():ShaderRegisterElement\r\n\t{\r\n\t\treturn this._vertexTempCache.requestFreeVectorReg();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve a single component from a vertex temporary register that's still available.\r\n\t */\r\n\tpublic getFreeVertexSingleTemp():ShaderRegisterElement\r\n\t{\r\n\t\treturn this._vertexTempCache.requestFreeRegComponent();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an available vertex attribute register\r\n\t */\r\n\tpublic getFreeVertexAttribute():ShaderRegisterElement\r\n\t{\r\n\t\t++this._numUsedStreams;\r\n\t\treturn this._vertexAttributesCache.requestFreeVectorReg();\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieve an available texture register\r\n\t */\r\n\tpublic getFreeTextureReg():ShaderRegisterElement\r\n\t{\r\n\t\t++this._numUsedTextures;\r\n\t\treturn this._textureCache.requestFreeVectorReg();\r\n\t}\r\n\r\n\t/**\r\n\t * The fragment output register.\r\n\t */\r\n\tpublic get fragmentOutputRegister():ShaderRegisterElement\r\n\t{\r\n\t\treturn this._fragmentOutputRegister;\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of used vertex constant registers.\r\n\t */\r\n\tpublic get numUsedVertexConstants():number\r\n\t{\r\n\t\treturn this._numUsedVertexConstants;\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of used fragment constant registers.\r\n\t */\r\n\tpublic get numUsedFragmentConstants():number\r\n\t{\r\n\t\treturn this._numUsedFragmentConstants;\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of used vertex streams.\r\n\t */\r\n\tpublic get numUsedStreams():number\r\n\t{\r\n\t\treturn this._numUsedStreams;\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of used texture slots.\r\n\t */\r\n\tpublic get numUsedTextures():number\r\n\t{\r\n\t\treturn this._numUsedTextures;\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of used varying registers.\r\n\t */\r\n\tpublic get numUsedVaryings():number\r\n\t{\r\n\t\treturn this._numUsedVaryings;\r\n\t}\r\n}",
    "import {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n * ShaderRegisterData contains the \"named\" registers, generated by the compiler and to be passed on to the methods.\r\n */\r\nexport class ShaderRegisterData\r\n{\r\n\tpublic uvVarying:ShaderRegisterElement;\r\n\tpublic secondaryUVVarying:ShaderRegisterElement;\r\n\tpublic shadowTarget:ShaderRegisterElement;\r\n\tpublic shadedTarget:ShaderRegisterElement;\r\n\tpublic globalPositionVertex:ShaderRegisterElement;\r\n\tpublic globalPositionVarying:ShaderRegisterElement;\r\n\r\n\tpublic animatedPosition:ShaderRegisterElement;\r\n\tpublic positionVarying:ShaderRegisterElement;\r\n\r\n\tpublic curvesInput:ShaderRegisterElement;\r\n\tpublic curvesVarying:ShaderRegisterElement;\r\n\r\n\tpublic normalInput:ShaderRegisterElement;\r\n\tpublic animatedNormal:ShaderRegisterElement;\r\n\tpublic normalVarying:ShaderRegisterElement;\r\n\tpublic normalFragment:ShaderRegisterElement;\r\n\r\n\tpublic tangentInput:ShaderRegisterElement;\r\n\tpublic animatedTangent:ShaderRegisterElement;\r\n\tpublic tangentVarying:ShaderRegisterElement;\r\n\tpublic bitangentVarying:ShaderRegisterElement;\r\n\r\n\tpublic colorInput:ShaderRegisterElement;\r\n\tpublic colorVarying:ShaderRegisterElement;\r\n\r\n\tpublic commons:ShaderRegisterElement;\r\n\tpublic projectionFragment:ShaderRegisterElement;\r\n\r\n\tpublic viewDirVarying:ShaderRegisterElement;\r\n\tpublic viewDirFragment:ShaderRegisterElement;\r\n\tpublic bitangent:ShaderRegisterElement;\r\n\r\n\tpublic textures:Array<ShaderRegisterElement> = new Array<ShaderRegisterElement>();\r\n\r\n\tpublic animatableAttributes:Array<ShaderRegisterElement> = new Array<ShaderRegisterElement>();\r\n\tpublic animationTargetRegisters:Array<ShaderRegisterElement> = new Array<ShaderRegisterElement>();\r\n\tpublic uvSource:ShaderRegisterElement;\r\n\tpublic uvTarget:ShaderRegisterElement;\r\n\r\n\tconstructor()\r\n\t{\r\n\r\n\t}\r\n}",
    "/**\r\n * A single register element (an entire register or a single register's component) used by the RegisterPool.\r\n */\r\nexport class ShaderRegisterElement\r\n{\r\n\tprivate _regName:string;\r\n\tprivate _index:number;\r\n\tprivate _toStr:string;\r\n\r\n\tprivate static COMPONENTS = [\"x\", \"y\", \"z\", \"w\"];\r\n\r\n\tpublic _component:number;\r\n\r\n\t/**\r\n\t * Creates a new ShaderRegisterElement object.\r\n\t *\r\n\t * @param regName The name of the register.\r\n\t * @param index The index of the register.\r\n\t * @param component The register's component, if not the entire register is represented.\r\n\t */\r\n\tconstructor(regName:string, index:number, component:number = -1)\r\n\t{\r\n\t\tthis._component = component;\r\n\t\tthis._regName = regName;\r\n\t\tthis._index = index;\r\n\r\n\t\tthis._toStr = this._regName;\r\n\r\n\t\tif (this._index >= 0)\r\n\t\t\tthis._toStr += this._index;\r\n\r\n\t\tif (component > -1)\r\n\t\t\tthis._toStr += \".\" + ShaderRegisterElement.COMPONENTS[component];\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the register or the components AGAL string representation.\r\n\t */\r\n\tpublic toString():string\r\n\t{\r\n\t\treturn this._toStr;\r\n\t}\r\n\r\n\t/**\r\n\t * The register's name.\r\n\t */\r\n\tpublic get regName():string\r\n\t{\r\n\t\treturn this._regName;\r\n\t}\r\n\r\n\t/**\r\n\t * The register's index.\r\n\t */\r\n\tpublic get index():number\r\n\t{\r\n\t\treturn this._index;\r\n\t}\r\n}",
    "import {ShaderBase}\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"../../surfaces/passes/IPass\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../../elements/IElementsClassGL\";\r\n\r\n/**\r\n * CompilerBase is an abstract base class for shader compilers that use modular shader methods to assemble a\r\n * material. Concrete subclasses are used by the default materials.\r\n *\r\n * @see away.materials.ShadingMethodBase\r\n */\r\nexport class CompilerBase\r\n{\r\n\tpublic _pShader:ShaderBase;\r\n\tpublic _pSharedRegisters:ShaderRegisterData;\r\n\tpublic _pRegisterCache:ShaderRegisterCache;\r\n\tpublic _pElementsClass:IElementsClassGL;\r\n\tpublic _pRenderPass:IPass;\r\n\r\n\tpublic _pVertexCode:string = ''; // Changed to emtpy string- AwayTS\r\n\tpublic _pFragmentCode:string = '';// Changed to emtpy string - AwayTS\r\n\tpublic _pPostAnimationFragmentCode:string = '';// Changed to emtpy string - AwayTS\r\n\r\n\t/**\r\n\t * Creates a new CompilerBase object.\r\n\t * @param profile The compatibility profile of the renderer.\r\n\t */\r\n\tconstructor(elementsClass:IElementsClassGL, pass:IPass, shader:ShaderBase)\r\n\t{\r\n\t\tthis._pElementsClass = elementsClass;\r\n\t\tthis._pRenderPass = pass;\r\n\t\tthis._pShader = shader;\r\n\r\n\t\tthis._pSharedRegisters = new ShaderRegisterData();\r\n\r\n\t\tthis._pRegisterCache = new ShaderRegisterCache(shader.profile);\r\n\t}\r\n\r\n\t/**\r\n\t * Compiles the code after all setup on the compiler has finished.\r\n\t */\r\n\tpublic compile():void\r\n\t{\r\n\t\tthis._pShader.reset();\r\n\r\n\t\tthis._pShader._iIncludeDependencies();\r\n\r\n\t\tthis.pInitRegisterIndices();\r\n\r\n\t\tthis.pCompileDependencies();\r\n\r\n\t\t//compile custom vertex & fragment codes\r\n\t\tthis._pVertexCode += this._pRenderPass._iGetVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\t\tthis._pPostAnimationFragmentCode += this._pRenderPass._iGetFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\r\n\t\tif (this._pShader.usesColorTransform)\r\n\t\t\tthis.compileColorTransformCode();\r\n\t\telse\r\n\t\t\tthis._pShader.colorTransformIndex = -1;\r\n\r\n\t\t//assign the final output color to the output register\r\n\t\tthis._pPostAnimationFragmentCode += \"mov \" + this._pRegisterCache.fragmentOutputRegister + \", \" + this._pSharedRegisters.shadedTarget + \"\\n\";\r\n\t\tthis._pRegisterCache.removeFragmentTempUsage(this._pSharedRegisters.shadedTarget);\r\n\t}\r\n\t/**\r\n\t * Calculate the transformed colours\r\n\t */\r\n\tprivate compileColorTransformCode():void\r\n\t{\r\n\t\t// rm, gm, bm, am - multiplier\r\n\t\t// ro, go, bo, ao - offset\r\n\t\tvar ct1:ShaderRegisterElement = this._pRegisterCache.getFreeFragmentConstant();\r\n\t\tvar ct2:ShaderRegisterElement = this._pRegisterCache.getFreeFragmentConstant();\r\n\t\tthis._pShader.colorTransformIndex = ct1.index*4;\r\n\t\tthis._pPostAnimationFragmentCode += \"mul \" + this._pSharedRegisters.shadedTarget + \", \" + this._pSharedRegisters.shadedTarget + \", \" + ct1 + \"\\n\";\r\n\t\tthis._pPostAnimationFragmentCode += \"add \" + this._pSharedRegisters.shadedTarget + \", \" + this._pSharedRegisters.shadedTarget + \", \" + ct2 + \"\\n\";\r\n\t}\r\n\t/**\r\n\t * Compile the code for the methods.\r\n\t */\r\n\tpublic pCompileDependencies():void\r\n\t{\r\n\t\tthis._pSharedRegisters.shadedTarget = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadedTarget, 1);\r\n\r\n\t\t//compile the world-space position if required\r\n\t\tif (this._pShader.globalPosDependencies > 0)\r\n\t\t\tthis.compileGlobalPositionCode();\r\n\r\n        //compile the local-space position if required\r\n        if (this._pShader.usesPositionFragment)\r\n            this.compilePositionCode();\r\n\r\n\t\tif (this._pShader.usesCurves)\r\n\t\t\tthis.compileCurvesCode();\r\n\r\n\t\t//Calculate the (possibly animated) UV coordinates.\r\n\t\tif (this._pShader.uvDependencies > 0)\r\n\t\t\tthis.compileUVCode();\r\n\r\n\t\tif (this._pShader.secondaryUVDependencies > 0)\r\n\t\t\tthis.compileSecondaryUVCode();\r\n\r\n\t\tif (this._pShader.normalDependencies > 0)\r\n\t\t\tthis.compileNormalCode();\r\n\r\n\t\tif (this._pShader.viewDirDependencies > 0)\r\n\t\t\tthis.compileViewDirCode();\r\n\r\n\t\t//collect code from material\r\n\t\tthis._pVertexCode += this._pElementsClass._iGetVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\t\tthis._pFragmentCode += this._pElementsClass._iGetFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\r\n\t\t//collect code from pass\r\n\t\tthis._pVertexCode += this._pRenderPass._iGetPreLightingVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\t\tthis._pFragmentCode += this._pRenderPass._iGetPreLightingFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\t}\r\n\r\n\tprivate compileGlobalPositionCode():void\r\n\t{\r\n\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.globalPositionVertex = this._pRegisterCache.getFreeVertexVectorTemp(), this._pShader.globalPosDependencies);\r\n\r\n\t\tvar sceneMatrixReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\r\n\t\tthis._pRegisterCache.getFreeVertexConstant();\r\n\t\tthis._pRegisterCache.getFreeVertexConstant();\r\n\t\tthis._pRegisterCache.getFreeVertexConstant();\r\n\r\n\t\tthis._pShader.sceneMatrixIndex = sceneMatrixReg.index*4;\r\n\r\n\t\tthis._pVertexCode += \"m44 \" + this._pSharedRegisters.globalPositionVertex + \", \" + this._pSharedRegisters.animatedPosition + \", \" + sceneMatrixReg + \"\\n\";\r\n\r\n\t\tif (this._pShader.usesGlobalPosFragment) {\r\n\t\t\tthis._pSharedRegisters.globalPositionVarying = this._pRegisterCache.getFreeVarying();\r\n\t\t\tthis._pVertexCode += \"mov \" + this._pSharedRegisters.globalPositionVarying + \", \" + this._pSharedRegisters.globalPositionVertex + \"\\n\";\r\n\t\t}\r\n\t}\r\n\r\n    private compilePositionCode()\r\n    {\r\n        this._pSharedRegisters.positionVarying = this._pRegisterCache.getFreeVarying();\r\n        this._pVertexCode += \"mov \" + this._pSharedRegisters.positionVarying + \", \" + this._pSharedRegisters.animatedPosition + \"\\n\";\r\n    }\r\n\r\n\r\n\tprivate compileCurvesCode():void\r\n\t{\r\n\t\tthis._pSharedRegisters.curvesInput = this._pRegisterCache.getFreeVertexAttribute();\r\n\t\tthis._pShader.curvesIndex = this._pSharedRegisters.curvesInput.index;\r\n\r\n\t\tthis._pSharedRegisters.curvesVarying = this._pRegisterCache.getFreeVarying();\r\n\t\tthis._pVertexCode += \"mov \" + this._pSharedRegisters.curvesVarying + \", \" + this._pSharedRegisters.curvesInput + \"\\n\";\r\n\r\n\t\tvar temp:ShaderRegisterElement = this._pRegisterCache.getFreeFragmentSingleTemp();\r\n\r\n\t\tthis._pFragmentCode += \"mul \" + temp + \", \" + this._pSharedRegisters.curvesVarying + \".y, \" + this._pSharedRegisters.curvesVarying + \".y\\n\" +\r\n\t\t\t\t\t\t\t\"sub \" + temp + \", \" + temp + \", \" + this._pSharedRegisters.curvesVarying + \".z\\n\" +\r\n\t\t\t\t\t\t\t\"mul \" + temp + \", \" + temp + \", \" + this._pSharedRegisters.curvesVarying + \".x\\n\" +\r\n\t\t\t\t\t\t\t\"kil \" + temp + \"\\n\";\r\n\t}\r\n\r\n\t/**\r\n\t * Calculate the (possibly animated) UV coordinates.\r\n\t */\r\n\tprivate compileUVCode():void\r\n\t{\r\n\t\tvar uvAttributeReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexAttribute();\r\n\t\tthis._pShader.uvIndex = uvAttributeReg.index;\r\n\r\n\t\tvar varying:ShaderRegisterElement = this._pSharedRegisters.uvVarying = this._pRegisterCache.getFreeVarying();\r\n\r\n\t\tif (this._pShader.usesUVTransform) {\r\n\t\t\t// a, b, 0, tx\r\n\t\t\t// c, d, 0, ty\r\n\t\t\tvar uvTransform1:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\r\n\t\t\tvar uvTransform2:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\r\n\t\t\tthis._pShader.uvMatrixIndex = uvTransform1.index*4;\r\n\r\n\t\t\tthis._pVertexCode += \"dp4 \" + varying + \".x, \" + uvAttributeReg + \", \" + uvTransform1 + \"\\n\" +\r\n\t\t\t\t\t\t\t\t \"dp4 \" + varying + \".y, \" + uvAttributeReg + \", \" + uvTransform2 + \"\\n\" +\r\n\t\t\t\t\t\t\t\t \"mov \" + varying + \".zw, \" + uvAttributeReg + \".zw \\n\";\r\n\t\t} else {\r\n\t\t\tthis._pShader.uvMatrixIndex = -1;\r\n\t\t\tthis._pSharedRegisters.uvTarget = varying;\r\n\t\t\tthis._pSharedRegisters.uvSource = uvAttributeReg;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Provide the secondary UV coordinates.\r\n\t */\r\n\tprivate compileSecondaryUVCode():void\r\n\t{\r\n\t\tvar uvAttributeReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexAttribute();\r\n\t\tthis._pShader.secondaryUVIndex = uvAttributeReg.index;\r\n\t\tthis._pSharedRegisters.secondaryUVVarying = this._pRegisterCache.getFreeVarying();\r\n\t\tthis._pVertexCode += \"mov \" + this._pSharedRegisters.secondaryUVVarying + \", \" + uvAttributeReg + \"\\n\";\r\n\t}\r\n\r\n\t/**\r\n\t * Calculate the view direction.\r\n\t */\r\n\tpublic compileViewDirCode():void\r\n\t{\r\n\t\tvar cameraPositionReg:ShaderRegisterElement = this._pRegisterCache.getFreeVertexConstant();\r\n\t\tthis._pSharedRegisters.viewDirVarying = this._pRegisterCache.getFreeVarying();\r\n\t\tthis._pSharedRegisters.viewDirFragment = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.viewDirFragment, this._pShader.viewDirDependencies);\r\n\r\n\t\tthis._pShader.cameraPositionIndex = cameraPositionReg.index*4;\r\n\r\n\t\tif (this._pShader.usesTangentSpace) {\r\n\t\t\tvar temp:ShaderRegisterElement = this._pRegisterCache.getFreeVertexVectorTemp();\r\n\t\t\tthis._pVertexCode += \"sub \" + temp + \", \" + cameraPositionReg + \", \" + this._pSharedRegisters.animatedPosition + \"\\n\" +\r\n\t\t\t\t\"m33 \" + this._pSharedRegisters.viewDirVarying + \".xyz, \" + temp + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\r\n\t\t\t\t\"mov \" + this._pSharedRegisters.viewDirVarying + \".w, \" + this._pSharedRegisters.animatedPosition + \".w\\n\";\r\n\t\t} else {\r\n\t\t\tthis._pVertexCode += \"sub \" + this._pSharedRegisters.viewDirVarying + \", \" + cameraPositionReg + \", \" + this._pSharedRegisters.globalPositionVertex + \"\\n\";\r\n\t\t\tthis._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.globalPositionVertex);\r\n\t\t}\r\n\r\n\t\t//TODO is this required in all cases? (re: distancemappass)\r\n\t\tthis._pFragmentCode += \"nrm \" + this._pSharedRegisters.viewDirFragment + \".xyz, \" + this._pSharedRegisters.viewDirVarying + \"\\n\" +\r\n\t\t\t\"mov \" + this._pSharedRegisters.viewDirFragment + \".w,   \" + this._pSharedRegisters.viewDirVarying + \".w\\n\";\r\n\t}\r\n\r\n\t/**\r\n\t * Calculate the normal.\r\n\t */\r\n\tpublic compileNormalCode():void\r\n\t{\r\n\t\tthis._pSharedRegisters.normalFragment = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.normalFragment, this._pShader.normalDependencies);\r\n\r\n\t\t//simple normal aquisition if no tangent space is being used\r\n\t\tif (this._pShader.outputsNormals && !this._pShader.outputsTangentNormals) {\r\n\t\t\tthis._pVertexCode += this._pRenderPass._iGetNormalVertexCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\t\t\tthis._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar normalMatrix:Array<ShaderRegisterElement>;\r\n\r\n\t\tif (!this._pShader.outputsNormals || !this._pShader.usesTangentSpace) {\r\n\t\t\tnormalMatrix = new Array<ShaderRegisterElement>(3);\r\n\t\t\tnormalMatrix[0] = this._pRegisterCache.getFreeVertexConstant();\r\n\t\t\tnormalMatrix[1] = this._pRegisterCache.getFreeVertexConstant();\r\n\t\t\tnormalMatrix[2] = this._pRegisterCache.getFreeVertexConstant();\r\n\r\n\t\t\tthis._pRegisterCache.getFreeVertexConstant();\r\n\r\n\t\t\tthis._pShader.sceneNormalMatrixIndex = normalMatrix[0].index*4;\r\n\r\n\t\t\tthis._pSharedRegisters.normalVarying = this._pRegisterCache.getFreeVarying();\r\n\t\t}\r\n\r\n\t\tif (this._pShader.outputsNormals) {\r\n\t\t\tif (this._pShader.usesTangentSpace) {\r\n\t\t\t\t// normalize normal + tangent vector and generate (approximated) bitangent used in m33 operation for view\r\n\t\t\t\tthis._pVertexCode += \"nrm \" + this._pSharedRegisters.animatedNormal + \".xyz, \" + this._pSharedRegisters.animatedNormal + \"\\n\" +\r\n\t\t\t\t\t\"nrm \" + this._pSharedRegisters.animatedTangent + \".xyz, \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\r\n\t\t\t\t\t\"crs \" + this._pSharedRegisters.bitangent + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\";\r\n\r\n\t\t\t\tthis._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters);\r\n\t\t\t} else {\r\n\t\t\t\t//Compiles the vertex shader code for tangent-space normal maps.\r\n\t\t\t\tthis._pSharedRegisters.tangentVarying = this._pRegisterCache.getFreeVarying();\r\n\t\t\t\tthis._pSharedRegisters.bitangentVarying = this._pRegisterCache.getFreeVarying();\r\n\t\t\t\tvar temp:ShaderRegisterElement = this._pRegisterCache.getFreeVertexVectorTemp();\r\n\r\n\t\t\t\tthis._pVertexCode += \"m33 \" + temp + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + normalMatrix[0] + \"\\n\" +\r\n\t\t\t\t\t\"nrm \" + this._pSharedRegisters.animatedNormal + \".xyz, \" + temp + \"\\n\" +\r\n\t\t\t\t\t\"m33 \" + temp + \".xyz, \" + this._pSharedRegisters.animatedTangent + \", \" + normalMatrix[0] + \"\\n\" +\r\n\t\t\t\t\t\"nrm \" + this._pSharedRegisters.animatedTangent + \".xyz, \" + temp + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".x, \" + this._pSharedRegisters.animatedTangent + \".x  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".z, \" + this._pSharedRegisters.animatedNormal + \".x  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".w, \" + this._pSharedRegisters.normalInput + \".w  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".x, \" + this._pSharedRegisters.animatedTangent + \".y  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".z, \" + this._pSharedRegisters.animatedNormal + \".y  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".w, \" + this._pSharedRegisters.normalInput + \".w  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".x, \" + this._pSharedRegisters.animatedTangent + \".z  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".z, \" + this._pSharedRegisters.animatedNormal + \".z  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".w, \" + this._pSharedRegisters.normalInput + \".w  \\n\" +\r\n\t\t\t\t\t\"crs \" + temp + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".y, \" + temp + \".x    \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.bitangentVarying + \".y, \" + temp + \".y  \\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".y, \" + temp + \".z    \\n\";\r\n\r\n\t\t\t\tthis._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedTangent);\r\n\r\n\t\t\t\t//Compiles the fragment shader code for tangent-space normal maps.\r\n\t\t\t\tvar t:ShaderRegisterElement;\r\n\t\t\t\tvar b:ShaderRegisterElement;\r\n\t\t\t\tvar n:ShaderRegisterElement;\r\n\r\n\t\t\t\tt = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\t\t\tthis._pRegisterCache.addFragmentTempUsages(t, 1);\r\n\t\t\t\tb = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\t\t\tthis._pRegisterCache.addFragmentTempUsages(b, 1);\r\n\t\t\t\tn = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\t\t\tthis._pRegisterCache.addFragmentTempUsages(n, 1);\r\n\r\n\t\t\t\tthis._pFragmentCode += \"nrm \" + t + \".xyz, \" + this._pSharedRegisters.tangentVarying + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + t + \".w, \" + this._pSharedRegisters.tangentVarying + \".w\t\\n\" +\r\n\t\t\t\t\t\"nrm \" + b + \".xyz, \" + this._pSharedRegisters.bitangentVarying + \"\\n\" +\r\n\t\t\t\t\t\"nrm \" + n + \".xyz, \" + this._pSharedRegisters.normalVarying + \"\\n\";\r\n\r\n\t\t\t\t//compile custom fragment code for normal calcs\r\n\t\t\t\tthis._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShader, this._pRegisterCache, this._pSharedRegisters) +\r\n\t\t\t\t\t\"m33 \" + this._pSharedRegisters.normalFragment + \".xyz, \" + this._pSharedRegisters.normalFragment + \", \" + t + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.normalFragment + \".w, \" + this._pSharedRegisters.normalVarying + \".w\\n\";\r\n\r\n\t\t\t\tthis._pRegisterCache.removeFragmentTempUsage(b);\r\n\t\t\t\tthis._pRegisterCache.removeFragmentTempUsage(t);\r\n\t\t\t\tthis._pRegisterCache.removeFragmentTempUsage(n);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// no output, world space is enough\r\n\t\t\tthis._pVertexCode += \"m33 \" + this._pSharedRegisters.normalVarying + \".xyz, \" + this._pSharedRegisters.animatedNormal + \", \" + normalMatrix[0] + \"\\n\" +\r\n\t\t\t\t\"mov \" + this._pSharedRegisters.normalVarying + \".w, \" + this._pSharedRegisters.animatedNormal + \".w\\n\";\r\n\r\n\t\t\tthis._pFragmentCode += \"nrm \" + this._pSharedRegisters.normalFragment + \".xyz, \" + this._pSharedRegisters.normalVarying + \"\\n\" +\r\n\t\t\t\t\"mov \" + this._pSharedRegisters.normalFragment + \".w, \" + this._pSharedRegisters.normalVarying + \".w\\n\";\r\n\r\n\t\t\tif (this._pShader.tangentDependencies > 0) {\r\n\t\t\t\tthis._pSharedRegisters.tangentVarying = this._pRegisterCache.getFreeVarying();\r\n\r\n\t\t\t\tthis._pVertexCode += \"m33 \" + this._pSharedRegisters.tangentVarying + \".xyz, \" + this._pSharedRegisters.animatedTangent + \", \" + normalMatrix[0] + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + this._pSharedRegisters.tangentVarying + \".w, \" + this._pSharedRegisters.animatedTangent + \".w\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._pShader.usesTangentSpace)\r\n\t\t\tthis._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedNormal);\r\n\t}\r\n\r\n\t/**\r\n\t * Reset all the indices to \"unused\".\r\n\t */\r\n\tpublic pInitRegisterIndices():void\r\n\t{\r\n\t\tthis._pShader.pInitRegisterIndices();\r\n\r\n\t\tthis._pSharedRegisters.animatedPosition = this._pRegisterCache.getFreeVertexVectorTemp();\r\n\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedPosition, 1);\r\n\r\n\t\tthis._pSharedRegisters.animatableAttributes.push(this._pRegisterCache.getFreeVertexAttribute());\r\n\t\tthis._pSharedRegisters.animationTargetRegisters.push(this._pSharedRegisters.animatedPosition);\r\n\t\tthis._pVertexCode = \"\";\r\n\t\tthis._pFragmentCode = \"\";\r\n\t\tthis._pPostAnimationFragmentCode = \"\";\r\n\r\n\r\n\t\t//create commonly shared constant registers\r\n\t\tif (this._pShader.usesCommonData || this._pShader.normalDependencies > 0) {\r\n\t\t\tthis._pSharedRegisters.commons = this._pRegisterCache.getFreeFragmentConstant();\r\n\t\t\tthis._pShader.commonsDataIndex = this._pSharedRegisters.commons.index*4;\r\n\t\t}\r\n\r\n\t\t//Creates the registers to contain the tangent data.\r\n\t\t//Needs to be created FIRST and in this order (for when using tangent space)\r\n\t\tif (this._pShader.tangentDependencies > 0 || this._pShader.outputsNormals) {\r\n\t\t\tthis._pSharedRegisters.tangentInput = this._pRegisterCache.getFreeVertexAttribute();\r\n\t\t\tthis._pShader.tangentIndex = this._pSharedRegisters.tangentInput.index;\r\n\r\n\t\t\tthis._pSharedRegisters.animatedTangent = this._pRegisterCache.getFreeVertexVectorTemp();\r\n\t\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedTangent, 1);\r\n\r\n\t\t\tif (this._pShader.usesTangentSpace) {\r\n\t\t\t\tthis._pSharedRegisters.bitangent = this._pRegisterCache.getFreeVertexVectorTemp();\r\n\t\t\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.bitangent, 1);\r\n\t\t\t}\r\n\r\n\t\t\tthis._pSharedRegisters.animatableAttributes.push(this._pSharedRegisters.tangentInput);\r\n\t\t\tthis._pSharedRegisters.animationTargetRegisters.push(this._pSharedRegisters.animatedTangent);\r\n\t\t}\r\n\r\n\t\tif (this._pShader.normalDependencies > 0) {\r\n\t\t\tthis._pSharedRegisters.normalInput = this._pRegisterCache.getFreeVertexAttribute();\r\n\t\t\tthis._pShader.normalIndex = this._pSharedRegisters.normalInput.index;\r\n\r\n\t\t\tthis._pSharedRegisters.animatedNormal = this._pRegisterCache.getFreeVertexVectorTemp();\r\n\t\t\tthis._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedNormal, 1);\r\n\r\n\t\t\tthis._pSharedRegisters.animatableAttributes.push(this._pSharedRegisters.normalInput);\r\n\t\t\tthis._pSharedRegisters.animationTargetRegisters.push(this._pSharedRegisters.animatedNormal);\r\n\t\t}\r\n\r\n\t\tif (this._pShader.colorDependencies > 0) {\r\n\t\t\tthis._pSharedRegisters.colorInput = this._pRegisterCache.getFreeVertexAttribute();\r\n\t\t\tthis._pShader.colorBufferIndex = this._pSharedRegisters.colorInput.index;\r\n\r\n\t\t\tthis._pSharedRegisters.colorVarying = this._pRegisterCache.getFreeVarying();\r\n\t\t\tthis._pVertexCode += \"mov \" + this._pSharedRegisters.colorVarying + \", \" + this._pSharedRegisters.colorInput + \"\\n\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes all resources used by the compiler.\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis._pRegisterCache.dispose();\r\n\t\tthis._pRegisterCache = null;\r\n\t\tthis._pSharedRegisters = null;\r\n\t}\r\n\r\n\t/**\r\n\t * The generated vertex code.\r\n\t */\r\n\tpublic get vertexCode():string\r\n\t{\r\n\t\treturn this._pVertexCode;\r\n\t}\r\n\r\n\t/**\r\n\t * The generated fragment code.\r\n\t */\r\n\tpublic get fragmentCode():string\r\n\t{\r\n\t\treturn this._pFragmentCode;\r\n\t}\r\n\r\n\t/**\r\n\t * The generated fragment code.\r\n\t */\r\n\tpublic get postAnimationFragmentCode():string\r\n\t{\r\n\t\treturn this._pPostAnimationFragmentCode;\r\n\t}\r\n\r\n\t/**\r\n\t * The register containing the final shaded colour.\r\n\t */\r\n\tpublic get shadedTarget():ShaderRegisterElement\r\n\t{\r\n\t\treturn this._pSharedRegisters.shadedTarget;\r\n\t}\r\n}",
    "import {LightingShader}\t\t\t\tfrom \"../../shaders/LightingShader\";\r\nimport {CompilerBase}\t\t\t\t\tfrom \"../../shaders/compilers/CompilerBase\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\nimport {ILightingPass}\t\t\t\tfrom \"../../surfaces/passes/ILightingPass\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../../elements/IElementsClassGL\";\r\n\r\n/**\r\n * CompilerBase is an abstract base class for shader compilers that use modular shader methods to assemble a\r\n * material. Concrete subclasses are used by the default materials.\r\n *\r\n * @see away.materials.ShadingMethodBase\r\n */\r\nexport class LightingCompiler extends CompilerBase\r\n{\r\n\tprivate _shaderLightingObject:LightingShader;\r\n\tprivate _lightingPass:ILightingPass;\r\n\tpublic _pointLightFragmentConstants:Array<ShaderRegisterElement>;\r\n\tpublic _pointLightVertexConstants:Array<ShaderRegisterElement>;\r\n\tpublic _dirLightFragmentConstants:Array<ShaderRegisterElement>;\r\n\tpublic _dirLightVertexConstants:Array<ShaderRegisterElement>;\r\n\r\n\tpublic _pNumProbeRegisters:number;\r\n\r\n\t/**\r\n\t * Creates a new CompilerBase object.\r\n\t * @param profile The compatibility profile of the renderer.\r\n\t */\r\n\tconstructor(elementsClass:IElementsClassGL, lightingPass:ILightingPass, shaderLightingObject:LightingShader)\r\n\t{\r\n\t\tsuper(elementsClass, lightingPass, shaderLightingObject);\r\n\r\n\t\tthis._shaderLightingObject = shaderLightingObject;\r\n\t\tthis._lightingPass = lightingPass;\r\n\t}\r\n\r\n\t/**\r\n\t * Compile the code for the methods.\r\n\t */\r\n\tpublic pCompileDependencies():void\r\n\t{\r\n\t\tsuper.pCompileDependencies();\r\n\r\n\t\t//compile the lighting code\r\n\t\tif (this._shaderLightingObject.usesShadows)\r\n\t\t\tthis.pCompileShadowCode();\r\n\r\n\t\tif (this._shaderLightingObject.usesLights) {\r\n\t\t\tthis.initLightRegisters();\r\n\t\t\tthis.compileLightCode();\r\n\t\t}\r\n\r\n\t\tif (this._shaderLightingObject.usesProbes)\r\n\t\t\tthis.compileLightProbeCode();\r\n\r\n\t\tthis._pVertexCode += this._lightingPass._iGetPostLightingVertexCode(this._shaderLightingObject, this._pRegisterCache, this._pSharedRegisters);\r\n\t\tthis._pFragmentCode += this._lightingPass._iGetPostLightingFragmentCode(this._shaderLightingObject, this._pRegisterCache, this._pSharedRegisters);\r\n\t}\r\n\r\n\t/**\r\n\t * Provides the code to provide shadow mapping.\r\n\t */\r\n\tpublic pCompileShadowCode():void\r\n\t{\r\n\t\tif (this._shaderLightingObject.normalDependencies > 0) {\r\n\t\t\tthis._pSharedRegisters.shadowTarget = this._pSharedRegisters.normalFragment;\r\n\t\t} else {\r\n\t\t\tthis._pSharedRegisters.shadowTarget = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\t\tthis._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadowTarget, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes constant registers to contain light data.\r\n\t */\r\n\tprivate initLightRegisters():void\r\n\t{\r\n\t\t// init these first so we're sure they're in sequence\r\n\t\tvar i:number, len:number;\r\n\r\n\t\tif (this._dirLightVertexConstants) {\r\n\t\t\tlen = this._dirLightVertexConstants.length;\r\n\t\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\t\tthis._dirLightVertexConstants[i] = this._pRegisterCache.getFreeVertexConstant();\r\n\r\n\t\t\t\tif (this._shaderLightingObject.lightVertexConstantIndex == -1)\r\n\t\t\t\t\tthis._shaderLightingObject.lightVertexConstantIndex = this._dirLightVertexConstants[i].index*4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._pointLightVertexConstants) {\r\n\t\t\tlen = this._pointLightVertexConstants.length;\r\n\t\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\t\tthis._pointLightVertexConstants[i] = this._pRegisterCache.getFreeVertexConstant();\r\n\r\n\t\t\t\tif (this._shaderLightingObject.lightVertexConstantIndex == -1)\r\n\t\t\t\t\tthis._shaderLightingObject.lightVertexConstantIndex = this._pointLightVertexConstants[i].index*4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlen = this._dirLightFragmentConstants.length;\r\n\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\tthis._dirLightFragmentConstants[i] = this._pRegisterCache.getFreeFragmentConstant();\r\n\r\n\t\t\tif (this._shaderLightingObject.lightFragmentConstantIndex == -1)\r\n\t\t\t\tthis._shaderLightingObject.lightFragmentConstantIndex = this._dirLightFragmentConstants[i].index*4;\r\n\t\t}\r\n\r\n\t\tlen = this._pointLightFragmentConstants.length;\r\n\t\tfor (i = 0; i < len; ++i) {\r\n\t\t\tthis._pointLightFragmentConstants[i] = this._pRegisterCache.getFreeFragmentConstant();\r\n\r\n\t\t\tif (this._shaderLightingObject.lightFragmentConstantIndex == -1)\r\n\t\t\t\tthis._shaderLightingObject.lightFragmentConstantIndex = this._pointLightFragmentConstants[i].index*4;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Compiles the shading code for directional and point lights.\r\n\t */\r\n\tprivate compileLightCode():void\r\n\t{\r\n\t\tvar diffuseColorReg:ShaderRegisterElement;\r\n\t\tvar specularColorReg:ShaderRegisterElement;\r\n\t\tvar lightPosReg:ShaderRegisterElement;\r\n\t\tvar lightDirReg:ShaderRegisterElement;\r\n\t\tvar vertexRegIndex:number = 0;\r\n\t\tvar fragmentRegIndex:number = 0;\r\n\t\tvar addSpec:boolean = this._shaderLightingObject.usesLightsForSpecular;\r\n\t\tvar addDiff:boolean = this._shaderLightingObject.usesLightsForDiffuse;\r\n\r\n\t\t//compile the shading code for directional lights.\r\n\t\tfor (var i:number = 0; i < this._shaderLightingObject.numDirectionalLights; ++i) {\r\n\t\t\tif (this._shaderLightingObject.usesTangentSpace) {\r\n\t\t\t\tlightDirReg = this._dirLightVertexConstants[vertexRegIndex++];\r\n\r\n\t\t\t\tvar lightVarying:ShaderRegisterElement = this._pRegisterCache.getFreeVarying();\r\n\r\n\t\t\t\tthis._pVertexCode += \"m33 \" + lightVarying + \".xyz, \" + lightDirReg + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + lightVarying + \".w, \" + lightDirReg + \".w\\n\";\r\n\r\n\t\t\t\tlightDirReg = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\t\t\tthis._pRegisterCache.addVertexTempUsages(lightDirReg, 1);\r\n\r\n\t\t\t\tthis._pFragmentCode += \"nrm \" + lightDirReg + \".xyz, \" + lightVarying + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + lightDirReg + \".w, \" + lightVarying + \".w\\n\";\r\n\r\n\t\t\t} else {\r\n\t\t\t\tlightDirReg = this._dirLightFragmentConstants[fragmentRegIndex++];\r\n\t\t\t}\r\n\r\n\t\t\tdiffuseColorReg = this._dirLightFragmentConstants[fragmentRegIndex++];\r\n\t\t\tspecularColorReg = this._dirLightFragmentConstants[fragmentRegIndex++];\r\n\r\n\t\t\tif (addDiff)\r\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject, lightDirReg, diffuseColorReg, this._pRegisterCache, this._pSharedRegisters);\r\n\r\n\t\t\tif (addSpec)\r\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject, lightDirReg, specularColorReg, this._pRegisterCache, this._pSharedRegisters);\r\n\r\n\t\t\tif (this._shaderLightingObject.usesTangentSpace)\r\n\t\t\t\tthis._pRegisterCache.removeVertexTempUsage(lightDirReg);\r\n\t\t}\r\n\r\n\t\tvertexRegIndex = 0;\r\n\t\tfragmentRegIndex = 0;\r\n\r\n\t\t//compile the shading code for point lights\r\n\t\tfor (var i:number = 0; i < this._shaderLightingObject.numPointLights; ++i) {\r\n\r\n\t\t\tif (this._shaderLightingObject.usesTangentSpace || !this._shaderLightingObject.usesGlobalPosFragment)\r\n\t\t\t\tlightPosReg = this._pointLightVertexConstants[vertexRegIndex++];\r\n\t\t\telse\r\n\t\t\t\tlightPosReg = this._pointLightFragmentConstants[fragmentRegIndex++];\r\n\r\n\t\t\tdiffuseColorReg = this._pointLightFragmentConstants[fragmentRegIndex++];\r\n\t\t\tspecularColorReg = this._pointLightFragmentConstants[fragmentRegIndex++];\r\n\r\n\t\t\tlightDirReg = this._pRegisterCache.getFreeFragmentVectorTemp();\r\n\t\t\tthis._pRegisterCache.addFragmentTempUsages(lightDirReg, 1);\r\n\r\n\t\t\tvar lightVarying:ShaderRegisterElement;\r\n\r\n\t\t\tif (this._shaderLightingObject.usesTangentSpace) {\r\n\t\t\t\tlightVarying = this._pRegisterCache.getFreeVarying();\r\n\t\t\t\tvar temp:ShaderRegisterElement = this._pRegisterCache.getFreeVertexVectorTemp();\r\n\t\t\t\tthis._pVertexCode += \"sub \" + temp + \", \" + lightPosReg + \", \" + this._pSharedRegisters.animatedPosition + \"\\n\" +\r\n\t\t\t\t\t\"m33 \" + lightVarying + \".xyz, \" + temp + \", \" + this._pSharedRegisters.animatedTangent + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + lightVarying + \".w, \" + this._pSharedRegisters.animatedPosition + \".w\\n\";\r\n\t\t\t} else if (!this._shaderLightingObject.usesGlobalPosFragment) {\r\n\t\t\t\tlightVarying = this._pRegisterCache.getFreeVarying();\r\n\t\t\t\tthis._pVertexCode += \"sub \" + lightVarying + \", \" + lightPosReg + \", \" + this._pSharedRegisters.globalPositionVertex + \"\\n\";\r\n\t\t\t} else {\r\n\t\t\t\tlightVarying = lightDirReg;\r\n\t\t\t\tthis._pFragmentCode += \"sub \" + lightDirReg + \", \" + lightPosReg + \", \" + this._pSharedRegisters.globalPositionVarying + \"\\n\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this._shaderLightingObject.usesLightFallOff) {\r\n\t\t\t\t// calculate attenuation\r\n\t\t\t\tthis._pFragmentCode += // attenuate\r\n\t\t\t\t\t\"dp3 \" + lightDirReg + \".w, \" + lightVarying + \", \" + lightVarying + \"\\n\" + // w = d - radius\r\n\t\t\t\t\t\"sub \" + lightDirReg + \".w, \" + lightDirReg + \".w, \" + diffuseColorReg + \".w\\n\" + // w = (d - radius)/(max-min)\r\n\t\t\t\t\t\"mul \" + lightDirReg + \".w, \" + lightDirReg + \".w, \" + specularColorReg + \".w\\n\" + // w = clamp(w, 0, 1)\r\n\t\t\t\t\t\"sat \" + lightDirReg + \".w, \" + lightDirReg + \".w\\n\" + // w = 1-w\r\n\t\t\t\t\t\"sub \" + lightDirReg + \".w, \" + this._pSharedRegisters.commons + \".w, \" + lightDirReg + \".w\\n\" + // normalize\r\n\t\t\t\t\t\"nrm \" + lightDirReg + \".xyz, \" + lightVarying + \"\\n\";\r\n\t\t\t} else {\r\n\t\t\t\tthis._pFragmentCode += \"nrm \" + lightDirReg + \".xyz, \" + lightVarying + \"\\n\" +\r\n\t\t\t\t\t\"mov \" + lightDirReg + \".w, \" + lightVarying + \".w\\n\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this._shaderLightingObject.lightFragmentConstantIndex == -1)\r\n\t\t\t\tthis._shaderLightingObject.lightFragmentConstantIndex = lightPosReg.index*4;\r\n\r\n\t\t\tif (addDiff)\r\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject, lightDirReg, diffuseColorReg, this._pRegisterCache, this._pSharedRegisters);\r\n\r\n\t\t\tif (addSpec)\r\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject, lightDirReg, specularColorReg, this._pRegisterCache, this._pSharedRegisters);\r\n\r\n\t\t\tthis._pRegisterCache.removeFragmentTempUsage(lightDirReg);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Compiles shading code for light probes.\r\n\t */\r\n\tprivate compileLightProbeCode():void\r\n\t{\r\n\t\tvar weightReg:string;\r\n\t\tvar weightComponents = [ \".x\", \".y\", \".z\", \".w\" ];\r\n\t\tvar weightRegisters:Array<ShaderRegisterElement> = new Array<ShaderRegisterElement>();\r\n\t\tvar i:number;\r\n\t\tvar texReg:ShaderRegisterElement;\r\n\t\tvar addSpec:boolean = this._shaderLightingObject.usesProbesForSpecular;\r\n\t\tvar addDiff:boolean = this._shaderLightingObject.usesProbesForDiffuse;\r\n\r\n\t\tif (addDiff)\r\n\t\t\tthis._shaderLightingObject.lightProbeDiffuseIndices = new Array<number>();\r\n\r\n\t\tif (addSpec)\r\n\t\t\tthis._shaderLightingObject.lightProbeSpecularIndices = new Array<number>();\r\n\r\n\t\tfor (i = 0; i < this._pNumProbeRegisters; ++i) {\r\n\t\t\tweightRegisters[i] = this._pRegisterCache.getFreeFragmentConstant();\r\n\r\n\t\t\tif (i == 0)\r\n\t\t\t\tthis._shaderLightingObject.probeWeightsIndex = weightRegisters[i].index*4;\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < this._shaderLightingObject.numLightProbes; ++i) {\r\n\t\t\tweightReg = weightRegisters[Math.floor(i/4)].toString() + weightComponents[i%4];\r\n\r\n\t\t\tif (addDiff) {\r\n\t\t\t\ttexReg = this._pRegisterCache.getFreeTextureReg();\r\n\t\t\t\tthis._shaderLightingObject.lightProbeDiffuseIndices[i] = texReg.index;\r\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerProbeDiffuseFragmentCode(this._shaderLightingObject, texReg, weightReg, this._pRegisterCache, this._pSharedRegisters);\r\n\t\t\t}\r\n\r\n\t\t\tif (addSpec) {\r\n\t\t\t\ttexReg = this._pRegisterCache.getFreeTextureReg();\r\n\t\t\t\tthis._shaderLightingObject.lightProbeSpecularIndices[i] = texReg.index;\r\n\t\t\t\tthis._pFragmentCode += this._lightingPass._iGetPerProbeSpecularFragmentCode(this._shaderLightingObject, texReg, weightReg, this._pRegisterCache, this._pSharedRegisters);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Reset all the indices to \"unused\".\r\n\t */\r\n\tpublic pInitRegisterIndices():void\r\n\t{\r\n\t\tsuper.pInitRegisterIndices();\r\n\r\n\t\tthis._shaderLightingObject.lightVertexConstantIndex = -1;\r\n\t\tthis._shaderLightingObject.lightFragmentConstantIndex = -1;\r\n\t\tthis._shaderLightingObject.probeWeightsIndex = -1;\r\n\r\n\t\tthis._pNumProbeRegisters = Math.ceil(this._shaderLightingObject.numLightProbes/4);\r\n\r\n\t\t//init light data\r\n\t\tif (this._shaderLightingObject.usesTangentSpace || !this._shaderLightingObject.usesGlobalPosFragment) {\r\n\t\t\tthis._pointLightVertexConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numPointLights);\r\n\t\t\tthis._pointLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numPointLights*2);\r\n\t\t} else {\r\n\t\t\tthis._pointLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numPointLights*3);\r\n\t\t}\r\n\r\n\t\tif (this._shaderLightingObject.usesTangentSpace) {\r\n\t\t\tthis._dirLightVertexConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numDirectionalLights);\r\n\t\t\tthis._dirLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numDirectionalLights*2);\r\n\t\t} else {\r\n\t\t\tthis._dirLightFragmentConstants = new Array<ShaderRegisterElement>(this._shaderLightingObject.numDirectionalLights*3);\r\n\t\t}\r\n\t}\r\n}",
    "export {CompilerBase}\t\t\t\t\tfrom \"./shaders/compilers/CompilerBase\";\r\nexport {LightingCompiler}\t\t\t\tfrom \"./shaders/compilers/LightingCompiler\";\r\nexport {LightingShader}\t\t\t\t\tfrom \"./shaders/LightingShader\";\r\nexport {RegisterPool}\t\t\t\t\tfrom \"./shaders/RegisterPool\";\r\nexport {ShaderBase}\t\t\t\t\t\tfrom \"./shaders/ShaderBase\";\r\nexport {ShaderRegisterCache}\t\t\t\tfrom \"./shaders/ShaderRegisterCache\";\r\nexport {ShaderRegisterData}\t\t\t\tfrom \"./shaders/ShaderRegisterData\";\r\nexport {ShaderRegisterElement}\t\t\tfrom \"./shaders/ShaderRegisterElement\";",
    "import {IEntitySorter}\t\t\t\tfrom \"../sort/IEntitySorter\";\r\n\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\n/**\r\n * @class away.sort.RenderableMergeSort\r\n */\r\nexport class RenderableMergeSort implements IEntitySorter\r\n{\r\n\tpublic sortBlendedRenderables(head:GL_RenderableBase):GL_RenderableBase\r\n\t{\r\n\t\tvar headB:GL_RenderableBase;\r\n\t\tvar fast:GL_RenderableBase;\r\n\t\tvar slow:GL_RenderableBase;\r\n\r\n\t\tif (!head || !head.next) {\r\n\t\t\treturn head;\r\n\t\t}\r\n\r\n\t\t// split in two sublists\r\n\t\tslow = head;\r\n\t\tfast = head.next;\r\n\r\n\t\twhile (fast) {\r\n\t\t\tfast = fast.next;\r\n\t\t\tif (fast) {\r\n\t\t\t\tslow = slow.next;\r\n\t\t\t\tfast = fast.next;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\theadB = slow.next;\r\n\t\tslow.next = null;\r\n\r\n\t\t// recurse\r\n\t\thead = this.sortBlendedRenderables(head);\r\n\t\theadB = this.sortBlendedRenderables(headB);\r\n\r\n\t\t// merge sublists while respecting order\r\n\t\tvar result:GL_RenderableBase;\r\n\t\tvar curr:GL_RenderableBase;\r\n\t\tvar l:GL_RenderableBase;\r\n\r\n\t\tif (!head)\r\n\t\t\treturn headB;\r\n\t\tif (!headB)\r\n\t\t\treturn head;\r\n\r\n\t\twhile (head && headB) {\r\n\t\t\tif (head.zIndex < headB.zIndex) {\r\n\t\t\t\tl = head;\r\n\t\t\t\thead = head.next;\r\n\t\t\t} else {\r\n\t\t\t\tl = headB;\r\n\t\t\t\theadB = headB.next;\r\n\t\t\t}\r\n\r\n\t\t\tif (!result)\r\n\t\t\t\tresult = l; else\r\n\t\t\t\tcurr.next = l;\r\n\r\n\t\t\tcurr = l;\r\n\t\t}\r\n\r\n\t\tif (head)\r\n\t\t\tcurr.next = head; else if (headB)\r\n\t\t\tcurr.next = headB;\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic sortOpaqueRenderables(head:GL_RenderableBase):GL_RenderableBase\r\n\t{\r\n\t\tvar headB:GL_RenderableBase;\r\n\t\tvar fast:GL_RenderableBase, slow:GL_RenderableBase;\r\n\r\n\t\tif (!head || !head.next) {\r\n\t\t\treturn head;\r\n\t\t}\r\n\r\n\t\t// split in two sublists\r\n\t\tslow = head;\r\n\t\tfast = head.next;\r\n\r\n\t\twhile (fast) {\r\n\t\t\tfast = fast.next;\r\n\t\t\tif (fast) {\r\n\t\t\t\tslow = slow.next;\r\n\t\t\t\tfast = fast.next;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\theadB = slow.next;\r\n\t\tslow.next = null;\r\n\r\n\t\t// recurse\r\n\t\thead = this.sortOpaqueRenderables(head);\r\n\t\theadB = this.sortOpaqueRenderables(headB);\r\n\r\n\t\t// merge sublists while respecting order\r\n\t\tvar result:GL_RenderableBase;\r\n\t\tvar curr:GL_RenderableBase;\r\n\t\tvar l:GL_RenderableBase;\r\n\t\tvar cmp:number = 0;\r\n\r\n\t\tif (!head)\r\n\t\t\treturn headB;\r\n\t\tif (!headB)\r\n\t\t\treturn head;\r\n\r\n\t\twhile (head && headB && head != null && headB != null) {\r\n\r\n\t\t\t// first sort per render order id (reduces program3D switches),\r\n\t\t\t// then on render object id (reduces setting props),\r\n\t\t\t// then on zIndex (reduces overdraw)\r\n\t\t\tvar aid:number = head.renderOrderId;\r\n\t\t\tvar bid:number = headB.renderOrderId;\r\n\r\n\t\t\tif (aid == bid) {\r\n\t\t\t\tvar ma:number = head.surfaceID;\r\n\t\t\t\tvar mb:number = headB.surfaceID;\r\n\r\n\t\t\t\tif (ma == mb) {\r\n\t\t\t\t\tif (head.zIndex < headB.zIndex)\r\n\t\t\t\t\t\tcmp = 1; else\r\n\t\t\t\t\t\tcmp = -1;\r\n\t\t\t\t} else if (ma > mb) {\r\n\t\t\t\t\tcmp = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcmp = -1;\r\n\t\t\t\t}\r\n\t\t\t} else if (aid > bid) {\r\n\t\t\t\tcmp = 1;\r\n\t\t\t} else {\r\n\t\t\t\tcmp = -1;\r\n\t\t\t}\r\n\r\n\t\t\tif (cmp < 0) {\r\n\t\t\t\tl = head;\r\n\t\t\t\thead = head.next;\r\n\t\t\t} else {\r\n\t\t\t\tl = headB;\r\n\t\t\t\theadB = headB.next;\r\n\t\t\t}\r\n\r\n\t\t\tif (!result) {\r\n\t\t\t\tresult = l;\r\n\t\t\t\tcurr = l;\r\n\t\t\t} else {\r\n\t\t\t\tcurr.next = l;\r\n\t\t\t\tcurr = l;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (head)\r\n\t\t\tcurr.next = head; else if (headB)\r\n\t\t\tcurr.next = headB;\r\n\r\n\t\treturn result;\r\n\t}\r\n}",
    "import {IEntitySorter}\t\t\t\tfrom \"../sort/IEntitySorter\";\r\n\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\n\r\n/**\r\n * @class away.sort.NullSort\r\n */\r\nexport class RenderableNullSort implements IEntitySorter\r\n{\r\n\tpublic sortBlendedRenderables(head:GL_RenderableBase):GL_RenderableBase\r\n\t{\r\n\t\treturn head;\r\n\t}\r\n\r\n\tpublic sortOpaqueRenderables(head:GL_RenderableBase):GL_RenderableBase\r\n\t{\r\n\t\treturn head;\r\n\t}\r\n}",
    "export {IEntitySorter}\t\t\t\t\tfrom \"./sort/IEntitySorter\";\r\nexport {RenderableMergeSort}\t\t\t\tfrom \"./sort/RenderableMergeSort\";\r\nexport {RenderableNullSort}\t\t\t\tfrom \"./sort/RenderableNullSort\";",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {BlendMode}\t\t\t\t\tfrom \"awayjs-core/lib/image/BlendMode\";\r\n\r\nimport {BasicMaterial}\t\t\t\tfrom \"awayjs-display/lib/materials/BasicMaterial\";\r\n\r\nimport {BasicMaterialPass}\t\t\tfrom \"../surfaces/passes/BasicMaterialPass\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\nimport {SurfacePool}\t\t\t\t\tfrom \"../surfaces/SurfacePool\";\r\n\r\n/**\r\n * RenderMaterialObject forms an abstract base class for the default shaded materials provided by Stage,\r\n * using material methods to define their appearance.\r\n */\r\nexport class GL_BasicMaterialSurface extends GL_SurfaceBase\r\n{\r\n\tprivate _material:BasicMaterial;\r\n\tprivate _pass:BasicMaterialPass;\r\n\r\n\r\n\tconstructor(material:BasicMaterial, elementsClass:IElementsClassGL, renderPool:SurfacePool)\r\n\t{\r\n\t\tsuper(material, elementsClass, renderPool);\r\n\r\n\t\tthis._material = material;\r\n\r\n\t\tthis._pAddPass(this._pass = new BasicMaterialPass(this, material, elementsClass, this._stage));\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._material = null;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateRender():void\r\n\t{\r\n\t\tsuper._pUpdateRender();\r\n\r\n\t\tthis._pRequiresBlending = (this._material.blendMode != BlendMode.NORMAL || this._material.alphaBlending || (this._material.colorTransform && this._material.colorTransform.alphaMultiplier < 1));\r\n\t\tthis._pass.preserveAlpha = this._material.preserveAlpha;//this._pRequiresBlending;\r\n\t\tthis._pass.shader.setBlendMode((this._surface.blendMode == BlendMode.NORMAL && this._pRequiresBlending)? BlendMode.LAYER : this._material.blendMode);\r\n\t\t//this._pass.forceSeparateMVP = false;\r\n\t}\r\n}",
    "import {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_SurfacePassBase}\t\t\tfrom \"../surfaces/GL_SurfacePassBase\";\r\nimport {SurfacePool}\t\t\t\t\tfrom \"../surfaces/SurfacePool\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../textures/GL_TextureBase\";\r\n\r\n/**\r\n * GL_DepthSurface forms an abstract base class for the default shaded materials provided by Stage,\r\n * using material methods to define their appearance.\r\n */\r\nexport class GL_DepthSurface extends GL_SurfacePassBase\r\n{\r\n\tprivate _fragmentConstantsIndex:number;\r\n\tprivate _textureVO:GL_TextureBase;\r\n\r\n\t/**\r\n\t *\r\n\t * @param pool\r\n\t * @param surface\r\n\t * @param elementsClass\r\n\t * @param stage\r\n\t */\r\n\tconstructor(surface:ISurface, elementsClass:IElementsClassGL, renderPool:SurfacePool)\r\n\t{\r\n\t\tsuper(surface, elementsClass, renderPool);\r\n\r\n\t\tthis._shader = new ShaderBase(elementsClass, this, this._stage);\r\n\r\n\t\tthis._pAddPass(this);\r\n\t}\r\n\r\n\tpublic invalidate():void\r\n\t{\r\n\t\tsuper.invalidate();\r\n\r\n\t\tthis._textureVO = this._surface.getTextureAt(0)? <GL_TextureBase> this._shader.getAbstraction(this._surface.getTextureAt(0)) : null;\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t\tsuper._iIncludeDependencies(shader);\r\n\r\n\t\tshader.projectionDependencies++;\r\n\r\n\t\tif (shader.alphaThreshold > 0)\r\n\t\t\tshader.uvDependencies++;\r\n\t}\r\n\r\n\r\n\tpublic _iInitConstantData(shader:ShaderBase):void\r\n\t{\r\n\t\tsuper._iInitConstantData(shader);\r\n\r\n\t\tvar index:number = this._fragmentConstantsIndex;\r\n\t\tvar data:Float32Array = shader.fragmentConstantData;\r\n\t\tdata[index] = 1.0;\r\n\t\tdata[index + 1] = 255.0;\r\n\t\tdata[index + 2] = 65025.0;\r\n\t\tdata[index + 3] = 16581375.0;\r\n\t\tdata[index + 4] = 1.0/255.0;\r\n\t\tdata[index + 5] = 1.0/255.0;\r\n\t\tdata[index + 6] = 1.0/255.0;\r\n\t\tdata[index + 7] = 0.0;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tvar targetReg:ShaderRegisterElement = sharedRegisters.shadedTarget;\r\n\t\tvar dataReg1:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\r\n\t\tvar dataReg2:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\r\n\r\n\t\tthis._fragmentConstantsIndex = dataReg1.index*4;\r\n\r\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\r\n\t\tregisterCache.addFragmentTempUsages(temp1, 1);\r\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\r\n\t\tregisterCache.addFragmentTempUsages(temp2, 1);\r\n\r\n\t\tcode += \"div \" + temp1 + \", \" + sharedRegisters.projectionFragment + \", \" + sharedRegisters.projectionFragment + \".w\\n\" + //\"sub ft2.z, fc0.x, ft2.z\\n\" +    //invert\r\n\t\t\t\"mul \" + temp1 + \", \" + dataReg1 + \", \" + temp1 + \".z\\n\" +\r\n\t\t\t\"frc \" + temp1 + \", \" + temp1 + \"\\n\" +\r\n\t\t\t\"mul \" + temp2 + \", \" + temp1 + \".yzww, \" + dataReg2 + \"\\n\";\r\n\r\n\t\t//codeF += \"mov ft1.w, fc1.w\t\\n\" +\r\n\t\t//    \"mov ft0.w, fc0.x\t\\n\";\r\n\r\n\t\tif (this._textureVO && shader.alphaThreshold > 0) {\r\n\r\n\t\t\tvar albedo:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\r\n\t\t\tcode += this._textureVO._iGetFragmentCode(albedo, registerCache, sharedRegisters, sharedRegisters.uvVarying);\r\n\r\n\t\t\tvar cutOffReg:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\r\n\r\n\t\t\tcode += \"sub \" + albedo + \".w, \" + albedo + \".w, \" + cutOffReg + \".x\\n\" +\r\n\t\t\t\t\"kil \" + albedo + \".w\\n\";\r\n\t\t}\r\n\r\n\t\tcode += \"sub \" + targetReg + \", \" + temp1 + \", \" + temp2 + \"\\n\";\r\n\r\n\t\tregisterCache.removeFragmentTempUsage(temp1);\r\n\t\tregisterCache.removeFragmentTempUsage(temp2);\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iActivate(camera:Camera):void\r\n\t{\r\n\t\tsuper._iActivate(camera);\r\n\r\n\t\tif (this._textureVO && this._shader.alphaThreshold > 0) {\r\n\t\t\tthis._textureVO.activate(this);\r\n\r\n\t\t\tthis._shader.fragmentConstantData[this._fragmentConstantsIndex + 8] = this._shader.alphaThreshold;\r\n\t\t}\r\n\t}\r\n}",
    "﻿import {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {SurfacePool}\t\t\t\t\tfrom \"../surfaces/SurfacePool\";\r\nimport {GL_SurfacePassBase}\t\t\tfrom \"../surfaces/GL_SurfacePassBase\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../textures/GL_TextureBase\";\r\n\r\n/**\r\n * DistanceRender is a pass that writes distance values to a depth map as a 32-bit value exploded over the 4 texture channels.\r\n * This is used to render omnidirectional shadow maps.\r\n */\r\nexport class GL_DistanceSurface extends GL_SurfacePassBase\r\n{\r\n\tprivate _textureVO:GL_TextureBase;\r\n\tprivate _fragmentConstantsIndex:number;\r\n\r\n\t/**\r\n\t * Creates a new DistanceRender object.\r\n\t *\r\n\t * @param material The material to which this pass belongs.\r\n\t */\r\n\tconstructor(surface:ISurface, elementsClass:IElementsClassGL, renderPool:SurfacePool)\r\n\t{\r\n\t\tsuper(surface, elementsClass, renderPool);\r\n\r\n\t\tthis._shader = new ShaderBase(elementsClass, this, this._stage);\r\n\r\n\t\tthis._pAddPass(this);\r\n\t}\r\n\r\n\tpublic invalidate():void\r\n\t{\r\n\t\tsuper.invalidate();\r\n\r\n\t\tthis._textureVO = this._surface.getTextureAt(0)? <GL_TextureBase> this._shader.getAbstraction(this._surface.getTextureAt(0)) : null;\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes the unchanging constant data for this material.\r\n\t */\r\n\tpublic _iInitConstantData(shader:ShaderBase):void\r\n\t{\r\n\t\tsuper._iInitConstantData(shader);\r\n\r\n\t\tvar index:number = this._fragmentConstantsIndex;\r\n\t\tvar data:Float32Array = shader.fragmentConstantData;\r\n\t\tdata[index + 4] = 1.0/255.0;\r\n\t\tdata[index + 5] = 1.0/255.0;\r\n\t\tdata[index + 6] = 1.0/255.0;\r\n\t\tdata[index + 7] = 0.0;\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t\tsuper._iIncludeDependencies(shader);\r\n\r\n\t\tshader.projectionDependencies++;\r\n\t\tshader.viewDirDependencies++;\r\n\r\n\t\tif (shader.alphaThreshold > 0)\r\n\t\t\tshader.uvDependencies++;\r\n\r\n\t\tif (shader.viewDirDependencies > 0)\r\n\t\t\tshader.globalPosDependencies++;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string;\r\n\t\tvar targetReg:ShaderRegisterElement = sharedRegisters.shadedTarget;\r\n\t\tvar dataReg1:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\r\n\t\tvar dataReg2:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\r\n\r\n\t\tthis._fragmentConstantsIndex = dataReg1.index*4;\r\n\r\n\t\tvar temp1:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\r\n\t\tregisterCache.addFragmentTempUsages(temp1, 1);\r\n\t\tvar temp2:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\r\n\t\tregisterCache.addFragmentTempUsages(temp2, 1);\r\n\r\n\t\t// squared distance to view\r\n\t\tcode = \"dp3 \" + temp1 + \".z, \" + sharedRegisters.viewDirVarying + \".xyz, \" + sharedRegisters.viewDirVarying + \".xyz\\n\" +\r\n\t\t\t\"mul \" + temp1 + \", \" + dataReg1 + \", \" + temp1 + \".z\\n\" +\r\n\t\t\t\"frc \" + temp1 + \", \" + temp1 + \"\\n\" +\r\n\t\t\t\"mul \" + temp2 + \", \" + temp1 + \".yzww, \" + dataReg2 + \"\\n\";\r\n\r\n\t\tif (this._textureVO && shader.alphaThreshold > 0) {\r\n\r\n\t\t\tvar albedo:ShaderRegisterElement = registerCache.getFreeFragmentVectorTemp();\r\n\t\t\tcode += this._textureVO._iGetFragmentCode(albedo, registerCache, sharedRegisters, sharedRegisters.uvVarying);\r\n\r\n\t\t\tvar cutOffReg:ShaderRegisterElement = registerCache.getFreeFragmentConstant();\r\n\r\n\t\t\tcode += \"sub \" + albedo + \".w, \" + albedo + \".w, \" + cutOffReg + \".x\\n\" +\r\n\t\t\t\t\"kil \" + albedo + \".w\\n\";\r\n\t\t}\r\n\r\n\t\tcode += \"sub \" + targetReg + \", \" + temp1 + \", \" + temp2 + \"\\n\";\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iActivate(camera:Camera):void\r\n\t{\r\n\t\tsuper._iActivate(camera);\r\n\r\n\t\tvar f:number = camera.projection.far;\r\n\r\n\t\tf = 1/(2*f*f);\r\n\t\t// sqrt(f*f+f*f) is largest possible distance for any frustum, so we need to divide by it. Rarely a tight fit, but with 32 bits precision, it's enough.\r\n\t\tvar index:number = this._fragmentConstantsIndex;\r\n\t\tvar data:Float32Array = this._shader.fragmentConstantData;\r\n\t\tdata[index] = 1.0*f;\r\n\t\tdata[index + 1] = 255.0*f;\r\n\t\tdata[index + 2] = 65025.0*f;\r\n\t\tdata[index + 3] = 16581375.0*f;\r\n\r\n\t\tif (this._textureVO && this._shader.alphaThreshold > 0) {\r\n\t\t\tthis._textureVO.activate(this);\r\n\r\n\t\t\tdata[index + 8] = this._shader.alphaThreshold;\r\n\t\t}\r\n\t}\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {BlendMode}\t\t\t\t\tfrom \"awayjs-core/lib/image/BlendMode\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {Skybox}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Skybox\";\r\n\r\nimport {ContextGLCompareMode}\t\t\tfrom \"awayjs-stagegl/lib/base/ContextGLCompareMode\";\r\n\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_SurfacePassBase}\t\t\tfrom \"../surfaces/GL_SurfacePassBase\";\r\nimport {SurfacePool}\t\t\t\t\tfrom \"../surfaces/SurfacePool\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../textures/GL_TextureBase\";\r\n\r\n/**\r\n * GL_SkyboxSurface forms an abstract base class for the default shaded materials provided by Stage,\r\n * using material methods to define their appearance.\r\n */\r\nexport class GL_SkyboxSurface extends GL_SurfacePassBase\r\n{\r\n\tpublic _skybox:Skybox;\r\n\tpublic _texture:GL_TextureBase;\r\n\r\n\tconstructor(skybox:Skybox, elementsClass:IElementsClassGL, renderPool:SurfacePool)\r\n\t{\r\n\t\tsuper(skybox, elementsClass, renderPool);\r\n\r\n\t\tthis._skybox = skybox;\r\n\r\n\t\tthis._shader = new ShaderBase(elementsClass, this, this._stage);\r\n\r\n\t\tthis._texture = <GL_TextureBase> this._shader.getAbstraction(this._skybox.texture);\r\n\r\n\t\tthis._pAddPass(this);\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._texture.onClear(new AssetEvent(AssetEvent.CLEAR, this._skybox.texture));\r\n\t\tthis._texture = null;\r\n\r\n\t\tthis._skybox = null;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _pUpdateRender():void\r\n\t{\r\n\t\tsuper._pUpdateRender();\r\n\r\n\t\tthis._pRequiresBlending = (this._surface.blendMode != BlendMode.NORMAL);\r\n\r\n\t\tthis.shader.setBlendMode((this._surface.blendMode == BlendMode.NORMAL && this._pRequiresBlending)? BlendMode.LAYER : this._surface.blendMode);\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t\tsuper._iIncludeDependencies(shader);\r\n\r\n\t\tshader.usesPositionFragment = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn this._texture._iGetFragmentCode(sharedRegisters.shadedTarget, registerCache, sharedRegisters, sharedRegisters.positionVarying);\r\n\t}\r\n\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tsuper._setRenderState(renderable, camera, viewProjection);\r\n\r\n\t\tthis._texture._setRenderState(renderable);\r\n\t}\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iActivate(camera:Camera):void\r\n\t{\r\n\t\tsuper._iActivate(camera);\r\n\r\n\t\tthis._stage.context.setDepthTest(false, ContextGLCompareMode.LESS);\r\n\r\n\t\tthis._texture.activate(this);\r\n\t}\r\n}",
    "import {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {ImageBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/ImageBase\";\r\nimport {SamplerBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/SamplerBase\";\r\nimport {Sampler2D}\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\r\n\r\nimport {AbstractionBase}\t\t\t\tfrom \"awayjs-core/lib/library/AbstractionBase\";\r\n\r\nimport {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {SurfaceEvent}\t\t\t\t\tfrom \"awayjs-display/lib/events/SurfaceEvent\";\r\nimport {IRenderable}\t\t\t\t\tfrom \"awayjs-display/lib/base/IRenderable\";\r\nimport {MaterialBase}\t\t\t\t\tfrom \"awayjs-display/lib/materials/MaterialBase\";\r\nimport {DefaultMaterialManager}\t\tfrom \"awayjs-display/lib/managers/DefaultMaterialManager\";\r\nimport {TextureBase}\t\t\t\t\tfrom \"awayjs-display/lib/textures/TextureBase\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\nimport {GL_ImageBase}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_ImageBase\";\r\nimport {GL_SamplerBase}\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_SamplerBase\";\r\n\r\nimport {AnimatorBase}\t\t\t\t\tfrom \"../animators/AnimatorBase\";\r\nimport {PassEvent}\t\t\t\t\tfrom \"../events/PassEvent\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {SurfacePool}\t\t\t\t\tfrom \"../surfaces/SurfacePool\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"../surfaces/passes/IPass\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../textures/GL_TextureBase\";\r\n\r\n/**\r\n *\r\n * @class away.pool.Passes\r\n */\r\nexport class GL_SurfaceBase extends AbstractionBase\r\n{\r\n\tprivate _onInvalidateAnimationDelegate:(event:SurfaceEvent) => void;\r\n\tprivate _onInvalidatePassesDelegate:(event:SurfaceEvent) => void;\r\n\r\n\tpublic usages:number = 0;\r\n\tpublic _forceSeparateMVP:boolean = false;\r\n\r\n\tpublic _surface:ISurface;\r\n\tpublic _elementsClass:IElementsClassGL;\r\n\tpublic _stage:Stage;\r\n\r\n\tprivate _renderOrderId:number;\r\n\tprivate _usesAnimation:boolean = true;\r\n\tprivate _invalidAnimation:boolean = true;\r\n\tprivate _invalidRender:boolean = true;\r\n\tprivate _invalidImages:boolean = true;\r\n\tprivate _passes:Array<IPass> = new Array<IPass>();\r\n\tprivate _imageIndices:Object = new Object();\r\n\tprivate _numImages:number;\r\n\r\n\r\n\r\n\r\n\tpublic _pRequiresBlending:boolean = false;\r\n\r\n\tprivate _onPassInvalidateDelegate:(event:PassEvent) => void;\r\n\r\n\tpublic surfaceID:number;\r\n\r\n\tpublic images:Array<GL_ImageBase> = new Array<GL_ImageBase>();\r\n\tpublic samplers:Array<GL_SamplerBase> = new Array<GL_SamplerBase>();\r\n\r\n\t/**\r\n\t * Indicates whether or not the renderable requires alpha blending during rendering.\r\n\t */\r\n\tpublic get requiresBlending():boolean\r\n\t{\r\n\t\treturn this._pRequiresBlending;\r\n\t}\r\n\r\n\tpublic get renderOrderId():number\r\n\t{\r\n\t\tif (this._invalidAnimation)\r\n\t\t\tthis._updateAnimation();\r\n\r\n\t\treturn this._renderOrderId;\r\n\t}\r\n\r\n\tpublic get passes():Array<IPass>\r\n\t{\r\n\t\tif (this._invalidAnimation)\r\n\t\t\tthis._updateAnimation();\r\n\r\n\t\treturn this._passes;\r\n\t}\r\n\r\n\tpublic get surface():ISurface\r\n\t{\r\n\t\treturn this._surface;\r\n\t}\r\n\r\n\tpublic get numImages():number\r\n\t{\r\n\t\tif (this._invalidImages)\r\n\t\t\tthis._updateImages();\r\n\r\n\t\treturn this._numImages;\r\n\t}\r\n\r\n\tconstructor(surface:ISurface, elementsClass:IElementsClassGL, renderPool:SurfacePool)\r\n\t{\r\n\t\tsuper(surface, renderPool);\r\n\r\n\t\tthis._onInvalidateAnimationDelegate = (event:SurfaceEvent) => this.onInvalidateAnimation(event);\r\n\t\tthis._onInvalidatePassesDelegate = (event:SurfaceEvent) => this.onInvalidatePasses(event);\r\n\r\n\t\tthis.surfaceID = surface.id;\r\n\t\tthis._surface = surface;\r\n\t\tthis._elementsClass = elementsClass;\r\n\t\tthis._stage = renderPool.stage;\r\n\r\n\t\tthis._surface.addEventListener(SurfaceEvent.INVALIDATE_ANIMATION, this._onInvalidateAnimationDelegate);\r\n\t\tthis._surface.addEventListener(SurfaceEvent.INVALIDATE_PASSES, this._onInvalidatePassesDelegate);\r\n\r\n\t\tthis._onPassInvalidateDelegate = (event:PassEvent) => this.onPassInvalidate(event);\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t\tthis._elementsClass._iIncludeDependencies(shader);\r\n\r\n\t\tshader.alphaThreshold = this._surface.alphaThreshold;\r\n\t\tshader.useImageRect = this._surface.imageRect;\r\n\t\tshader.usesCurves = this._surface.curves;\r\n\r\n\t\tif (this._surface instanceof MaterialBase) {\r\n\t\t\tvar material:MaterialBase = <MaterialBase> this._surface;\r\n\t\t\tshader.useAlphaPremultiplied = material.alphaPremultiplied;\r\n\t\t\tshader.useBothSides = material.bothSides;\r\n\t\t\tshader.usesUVTransform = material.animateUVs;\r\n\t\t\tshader.usesColorTransform = material.useColorTransform;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getImageIndex(texture:TextureBase, index:number = 0):number\r\n\t{\r\n\t\tif (this._invalidImages)\r\n\t\t\tthis._updateImages();\r\n\r\n\t\treturn this._imageIndices[texture.id][index];\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._surface = null;\r\n\t\tthis._elementsClass = null;\r\n\t\tthis._stage = null;\r\n\r\n\t\tvar len:number = this._passes.length;\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tthis._passes[i].removeEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\r\n\t\t\tthis._passes[i].dispose();\r\n\t\t}\r\n\r\n\t\tthis._passes = null;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onInvalidate(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onInvalidate(event);\r\n\r\n\t\tthis._invalidRender = true;\r\n\t\tthis._invalidAnimation = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onInvalidatePasses(event:SurfaceEvent):void\r\n\t{\r\n\t\tvar len:number = this._passes.length;\r\n\t\tfor (var i:number = 0; i < len; i++)\r\n\t\t\tthis._passes[i].invalidate();\r\n\r\n\t\tthis._invalidAnimation = true;\r\n\t\tthis._invalidImages = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onInvalidateAnimation(event:SurfaceEvent):void\r\n\t{\r\n\t\tthis._invalidAnimation = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param surface\r\n\t */\r\n\tprivate _updateAnimation():void\r\n\t{\r\n\t\tif (this._invalidRender)\r\n\t\t\tthis._pUpdateRender();\r\n\r\n\t\tthis._invalidAnimation = false;\r\n\r\n\t\tvar usesAnimation:boolean = this._getEnabledGPUAnimation();\r\n\r\n\t\tvar renderOrderId = 0;\r\n\t\tvar mult:number = 1;\r\n\t\tvar shader:ShaderBase;\r\n\t\tvar len:number = this._passes.length;\r\n\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\tshader = this._passes[i].shader;\r\n\t\t\tshader.usesAnimation = usesAnimation;\r\n\r\n\t\t\trenderOrderId += shader.programData.id*mult;\r\n\t\t\tmult *= 1000;\r\n\t\t}\r\n\t\t\r\n\t\tif (this._usesAnimation != usesAnimation) {\r\n\t\t\tthis._usesAnimation = usesAnimation;\r\n\r\n\t\t\tvar renderables:Array<IRenderable> = this._surface.iOwners;\r\n\t\t\tvar numOwners:number = renderables.length;\r\n\t\t\tfor (var j:number = 0; j < numOwners; j++)\r\n\t\t\t\trenderables[j].invalidateElements();\r\n\t\t}\r\n\r\n\t\tthis._renderOrderId = renderOrderId;\r\n\t}\r\n\r\n\tprivate _updateImages():void\r\n\t{\r\n\t\tthis._invalidImages = false;\r\n\r\n\t\tvar numTextures:number = this._surface.getNumTextures();\r\n\t\tvar texture:TextureBase;\r\n\t\tvar numImages:number;\r\n\t\tvar images:Array<number>;\r\n\t\tvar image:ImageBase;\r\n\t\tvar sampler:SamplerBase;\r\n\t\tvar index:number = 0;\r\n\r\n\t\tfor (var i:number = 0; i < numTextures; i++) {\r\n\t\t\ttexture = this._surface.getTextureAt(i);\r\n\t\t\tnumImages = texture.getNumImages();\r\n\t\t\timages = this._imageIndices[texture.id] = new Array<number>();\r\n\t\t\tfor (var j:number = 0; j < numImages; j++) {\r\n\t\t\t\timage = texture.getImageAt(j) || (this._surface.style? this._surface.style.getImageAt(texture, j) : null) || DefaultMaterialManager.getDefaultImage2D();\r\n\t\t\t\tthis.images[index] = <GL_ImageBase> this._stage.getAbstraction(image);\r\n\r\n\t\t\t\tsampler = texture.getSamplerAt(j) || (this._surface.style? this._surface.style.getSamplerAt(texture, j) : null) || DefaultMaterialManager.getDefaultSampler();\r\n\t\t\t\tthis.samplers[index] = <GL_SamplerBase> this._stage.getAbstraction(sampler);\r\n\r\n\t\t\t\timages[j] = index++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._numImages = index;\r\n\t}\r\n\r\n\t/**\r\n\t * Performs any processing that needs to occur before any of its passes are used.\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic _pUpdateRender():void\r\n\t{\r\n\t\tthis._invalidRender = false;\r\n\r\n\t\t//overrride to update shader object properties\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a pass from the surface.\r\n\t * @param pass The pass to be removed.\r\n\t */\r\n\tpublic _pRemovePass(pass:IPass):void\r\n\t{\r\n\t\tpass.removeEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\r\n\t\tthis._passes.splice(this._passes.indexOf(pass), 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all passes from the surface\r\n\t */\r\n\tpublic _pClearPasses():void\r\n\t{\r\n\t\tvar len:number = this._passes.length;\r\n\t\tfor (var i:number = 0; i < len; ++i)\r\n\t\t\tthis._passes[i].removeEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\r\n\r\n\t\tthis._passes.length = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a pass to the surface\r\n\t * @param pass\r\n\t */\r\n\tpublic _pAddPass(pass:IPass):void\r\n\t{\r\n\t\tthis._passes.push(pass);\r\n\t\tpass.addEventListener(PassEvent.INVALIDATE, this._onPassInvalidateDelegate);\r\n\t}\r\n\r\n\t/**\r\n\t * Listener for when a pass's shader code changes. It recalculates the render order id.\r\n\t */\r\n\tprivate onPassInvalidate(event:PassEvent):void\r\n\t{\r\n\t\tthis._invalidAnimation = true;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * test if animation will be able to run on gpu BEFORE compiling materials\r\n\t * test if the shader objects supports animating the animation set in the vertex shader\r\n\t * if any object using this material fails to support accelerated animations for any of the shader objects,\r\n\t * we should do everything on cpu (otherwise we have the cost of both gpu + cpu animations)\r\n\t */\r\n\tprivate _getEnabledGPUAnimation():boolean\r\n\t{\r\n\t\tif (this._surface.animationSet) {\r\n\t\t\tthis._surface.animationSet.resetGPUCompatibility();\r\n\r\n\t\t\tvar renderables:Array<IRenderable> = this._surface.iOwners;\r\n\t\t\tvar numOwners:number = renderables.length;\r\n\r\n\t\t\tvar len:number = this._passes.length;\r\n\t\t\tvar shader:ShaderBase;\r\n\t\t\tfor (var i:number = 0; i < len; i++) {\r\n\t\t\t\tshader = this._passes[i].shader;\r\n\t\t\t\tshader.usesAnimation = false;\r\n\t\t\t\tfor (var j:number = 0; j < numOwners; j++)\r\n\t\t\t\t\tif (renderables[j].animator)\r\n\t\t\t\t\t\t(<AnimatorBase> renderables[j].animator).testGPUCompatibility(shader);\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn !this._surface.animationSet.usesCPU;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {ImageBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/ImageBase\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\n\r\nimport {AnimationSetBase}\t\t\t\tfrom \"../animators/AnimationSetBase\";\r\nimport {PassEvent}\t\t\t\t\tfrom \"../events/PassEvent\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"../surfaces/passes/IPass\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\n\r\n/**\r\n * GL_SurfacePassBase provides an abstract base class for material shader passes. A material pass constitutes at least\r\n * a render call per required renderable.\r\n */\r\nexport class GL_SurfacePassBase extends GL_SurfaceBase implements IPass\r\n{\r\n\tpublic _shader:ShaderBase;\r\n\r\n\tpublic get shader():ShaderBase\r\n\t{\r\n\t\treturn this._shader;\r\n\t}\r\n\r\n\tpublic get animationSet():AnimationSetBase\r\n\t{\r\n\t\treturn <AnimationSetBase> this._surface.animationSet;\r\n\t}\r\n\r\n\t/**\r\n\t * Marks the shader program as invalid, so it will be recompiled before the next render.\r\n\t */\r\n\tpublic invalidate():void\r\n\t{\r\n\t\tthis._shader.invalidateProgram();\r\n\r\n\t\tthis.dispatchEvent(new PassEvent(PassEvent.INVALIDATE, this));\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tif (this._shader) {\r\n\t\t\tthis._shader.dispose();\r\n\t\t\tthis._shader = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the current pass. Before calling pass, activatePass needs to be called with the same index.\r\n\t * @param pass The pass used to render the renderable.\r\n\t * @param renderable The IRenderable object to draw.\r\n\t * @param stage The Stage object used for rendering.\r\n\t * @param entityCollector The EntityCollector object that contains the visible scene data.\r\n\t * @param viewProjection The view-projection matrix used to project to the screen. This is not the same as\r\n\t * camera.viewProjection as it includes the scaling factors when rendering to textures.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tthis._shader._setRenderState(renderable, camera, viewProjection);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render state for the pass that is independent of the rendered object. This needs to be called before\r\n\t * calling pass. Before activating a pass, the previously used pass needs to be deactivated.\r\n\t * @param stage The Stage object which is currently used for rendering.\r\n\t * @param camera The camera from which the scene is viewed.\r\n\t * @private\r\n\t */\r\n\tpublic _iActivate(camera:Camera):void\r\n\t{\r\n\t\tthis._shader._iActivate(camera);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the render state for the pass. This needs to be called before activating another pass.\r\n\t * @param stage The Stage used for rendering\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic _iDeactivate():void\r\n\t{\r\n\t\tthis._shader._iDeactivate();\r\n\t}\r\n\r\n\tpublic _iInitConstantData(shader:ShaderBase):void\r\n\t{\r\n\r\n\t}\r\n\r\n\tpublic _iGetPreLightingVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetPreLightingFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetNormalVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetNormalFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n}",
    "import {IAssetClass}\t\t\t\t\tfrom \"awayjs-core/lib/library/IAssetClass\";\r\nimport {IAbstractionPool}\t\t\t\tfrom \"awayjs-core/lib/library/IAbstractionPool\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\n\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../elements/IElementsClassGL\";\r\nimport {ISurfaceClassGL}\t\t\t\tfrom \"../surfaces/ISurfaceClassGL\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\n\r\n/**\r\n * @class away.pool.SurfacePool\r\n */\r\nexport class SurfacePool implements IAbstractionPool\r\n{\r\n\tprivate static _abstractionClassPool:Object = new Object();\r\n\r\n\tprivate _abstractionPool:Object = new Object();\r\n\tprivate _elementsClass:IElementsClassGL;\r\n\tprivate _stage:Stage;\r\n\tprivate _surfaceClassGL:ISurfaceClassGL;\r\n\r\n\tget stage():Stage\r\n\t{\r\n\t\treturn this._stage;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param surfaceClassGL\r\n\t */\r\n\tconstructor(elementsClass:IElementsClassGL, stage:Stage, surfaceClassGL:ISurfaceClassGL = null)\r\n\t{\r\n\t\tthis._elementsClass = elementsClass;\r\n\t\tthis._stage = stage;\r\n\t\tthis._surfaceClassGL = surfaceClassGL;\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param elementsOwner\r\n\t * @returns IElements\r\n\t */\r\n\tpublic getAbstraction(surface:ISurface):GL_SurfaceBase\r\n\t{\r\n\t\treturn (this._abstractionPool[surface.id] || (this._abstractionPool[surface.id] = new (<ISurfaceClassGL> this._surfaceClassGL || SurfacePool._abstractionClassPool[surface.assetType])(surface, this._elementsClass, this)));\r\n\t}\r\n\r\n\t/**\r\n\t * //TODO\r\n\t *\r\n\t * @param elementsOwner\r\n\t */\r\n\tpublic clearAbstraction(surface:ISurface):void\r\n\t{\r\n\t\tdelete this._abstractionPool[surface.id];\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param imageObjectClass\r\n\t */\r\n\tpublic static registerAbstraction(surfaceClassGL:ISurfaceClassGL, assetClass:IAssetClass):void\r\n\t{\r\n\t\tSurfacePool._abstractionClassPool[assetClass.assetType] = surfaceClassGL;\r\n\t}\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {GL_RenderableBase}\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../../surfaces/GL_SurfaceBase\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../../shaders/ShaderRegisterElement\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../../elements/IElementsClassGL\";\r\nimport {PassBase}\t\t\t\t\t\tfrom \"../../surfaces/passes/PassBase\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../../textures/GL_TextureBase\";\r\n\r\n/**\r\n * BasicMaterialPass forms an abstract base class for the default shaded materials provided by Stage,\r\n * using material methods to define their appearance.\r\n */\r\nexport class BasicMaterialPass extends PassBase\r\n{\r\n\tprivate _textureVO:GL_TextureBase;\r\n\tprivate _diffuseR:number = 1;\r\n\tprivate _diffuseG:number = 1;\r\n\tprivate _diffuseB:number = 1;\r\n\tprivate _diffuseA:number = 1;\r\n\r\n\tprivate _fragmentConstantsIndex:number;\r\n\r\n\tconstructor(render:GL_SurfaceBase, surface:ISurface, elementsClass:IElementsClassGL, stage:Stage)\r\n\t{\r\n\t\tsuper(render, surface, elementsClass, stage);\r\n\r\n\t\tthis._shader = new ShaderBase(elementsClass, this, this._stage);\r\n\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t\tsuper._iIncludeDependencies(shader);\r\n\r\n\t\tif (this._textureVO != null)\r\n\t\t\tshader.uvDependencies++;\r\n    }\r\n\r\n\tpublic invalidate():void\r\n\t{\r\n\t\tsuper.invalidate();\r\n\r\n\t\tthis._textureVO = this._surface.getTextureAt(0)? <GL_TextureBase> this._shader.getAbstraction(this._surface.getTextureAt(0)) : null;\r\n\t}\r\n\r\n\tpublic dispose():void\r\n\t{\r\n\t\tif (this._textureVO) {\r\n\t\t\tthis._textureVO.onClear(new AssetEvent(AssetEvent.CLEAR, this._surface.getTextureAt(0)));\r\n\t\t\tthis._textureVO = null;\r\n\t\t}\r\n\r\n\t\tsuper.dispose();\r\n\t}\r\n\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iGetFragmentCode(shader:ShaderBase, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\r\n        var alphaReg:ShaderRegisterElement;\r\n\r\n        if (this.preserveAlpha) {\r\n            alphaReg = regCache.getFreeFragmentSingleTemp();\r\n            regCache.addFragmentTempUsages(alphaReg, 1);\r\n            code += \"mov \" + alphaReg + \", \" + sharedReg.shadedTarget + \".w\\n\";\r\n        }\r\n\r\n\t\tvar targetReg:ShaderRegisterElement = sharedReg.shadedTarget;\r\n\r\n\t\tif (this._textureVO != null) {\r\n\r\n\t\t\tcode += this._textureVO._iGetFragmentCode(targetReg, regCache, sharedReg, sharedReg.uvVarying);\r\n\r\n\t\t\tif (shader.alphaThreshold > 0) {\r\n\t\t\t\tvar cutOffReg:ShaderRegisterElement = regCache.getFreeFragmentConstant();\r\n\t\t\t\tthis._fragmentConstantsIndex = cutOffReg.index*4;\r\n\r\n\t\t\t\tcode += \"sub \" + targetReg + \".w, \" + targetReg + \".w, \" + cutOffReg + \".x\\n\" + \"kil \" + targetReg + \".w\\n\" + \"add \" + targetReg + \".w, \" + targetReg + \".w, \" + cutOffReg + \".x\\n\";\r\n\t\t\t}\r\n\t\t} else if (shader.colorBufferIndex != -1) {\r\n\r\n\t\t\tcode += \"mov \" + targetReg + \", \" + sharedReg.colorVarying + \"\\n\";\r\n\t\t} else {\r\n\t\t\tvar diffuseInputReg:ShaderRegisterElement = regCache.getFreeFragmentConstant();\r\n\r\n\t\t\tthis._fragmentConstantsIndex = diffuseInputReg.index*4;\r\n\r\n\t\t\tcode += \"mov \" + targetReg + \", \" + diffuseInputReg + \"\\n\";\r\n\t\t}\r\n\r\n        if (this.preserveAlpha) {\r\n            code += \"mul \" + sharedReg.shadedTarget + \".w, \" + sharedReg.shadedTarget + \".w, \" + alphaReg + \"\\n\";\r\n            regCache.removeFragmentTempUsage(alphaReg);\r\n        }\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tsuper._setRenderState(renderable, camera, viewProjection);\r\n\r\n\t\tif (this._textureVO != null)\r\n\t\t\tthis._textureVO._setRenderState(renderable);\r\n\t}\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic _iActivate(camera:Camera):void\r\n\t{\r\n\t\tsuper._iActivate(camera);\r\n\r\n\t\tif (this._textureVO != null) {\r\n\t\t\tthis._textureVO.activate(this._render);\r\n\r\n\t\t\tif (this._shader.alphaThreshold > 0)\r\n\t\t\t\tthis._shader.fragmentConstantData[this._fragmentConstantsIndex] = this._shader.alphaThreshold;\r\n\t\t} else if (this._shader.colorBufferIndex == -1) {\r\n\t\t\tvar index:number = this._fragmentConstantsIndex;\r\n\t\t\tvar data:Float32Array = this._shader.fragmentConstantData;\r\n\t\t\tdata[index] = this._diffuseR;\r\n\t\t\tdata[index + 1] = this._diffuseG;\r\n\t\t\tdata[index + 2] = this._diffuseB;\r\n\t\t\tdata[index + 3] = this._diffuseA;\r\n\t\t}\r\n\t}\r\n}",
    "import {Matrix3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {EventDispatcher}\t\t\t\tfrom \"awayjs-core/lib/events/EventDispatcher\";\r\n\r\nimport {Camera}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Camera\";\r\nimport {ISurface}\t\t\t\t\t\tfrom \"awayjs-display/lib/base/ISurface\";\r\nimport {TextureBase}\t\t\t\t\tfrom \"awayjs-display/lib/textures/TextureBase\";\r\n\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {AnimationSetBase}\t\t\t\tfrom \"../../animators/AnimationSetBase\";\r\nimport {PassEvent}\t\t\t\t\tfrom \"../../events/PassEvent\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../../shaders/ShaderRegisterData\";\r\nimport {IPass}\t\t\t\t\t\tfrom \"../../surfaces/passes/IPass\";\r\nimport {IElementsClassGL}\t\t\t\tfrom \"../../elements/IElementsClassGL\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../../renderables/GL_RenderableBase\";\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../../surfaces/GL_SurfaceBase\";\r\n\r\n/**\r\n * PassBase provides an abstract base class for material shader passes. A material pass constitutes at least\r\n * a render call per required renderable.\r\n */\r\nexport class PassBase extends EventDispatcher implements IPass\r\n{\r\n\tpublic _render:GL_SurfaceBase;\r\n\tpublic _surface:ISurface;\r\n\tpublic _elementsClass:IElementsClassGL;\r\n\tpublic _stage:Stage;\r\n\t\r\n\tpublic _shader:ShaderBase;\r\n\r\n\tprivate _preserveAlpha:boolean = true;\r\n\tprivate _forceSeparateMVP:boolean = false;\r\n\r\n\tpublic get shader():ShaderBase\r\n\t{\r\n\t\treturn this._shader;\r\n\t}\r\n\r\n\tpublic get animationSet():AnimationSetBase\r\n\t{\r\n\t\treturn <AnimationSetBase> this._surface.animationSet;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the output alpha value should remain unchanged compared to the material's original alpha.\r\n\t */\r\n\tpublic get preserveAlpha():boolean\r\n\t{\r\n\t\treturn this._preserveAlpha;\r\n\t}\r\n\r\n\tpublic set preserveAlpha(value:boolean)\r\n\t{\r\n\t\tif (this._preserveAlpha == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._preserveAlpha = value;\r\n\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the screen projection should be calculated by forcing a separate scene matrix and\r\n\t * view-projection matrix. This is used to prevent rounding errors when using multiple passes with different\r\n\t * projection code.\r\n\t */\r\n\tpublic get forceSeparateMVP():boolean\r\n\t{\r\n\t\treturn this._forceSeparateMVP;\r\n\t}\r\n\r\n\tpublic set forceSeparateMVP(value:boolean)\r\n\t{\r\n\t\tif (this._forceSeparateMVP == value)\r\n\t\t\treturn;\r\n\r\n\t\tthis._forceSeparateMVP = value;\r\n\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new PassBase object.\r\n\t */\r\n\tconstructor(render:GL_SurfaceBase, surface:ISurface, elementsClass:IElementsClassGL, stage:Stage)\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tthis._render = render;\r\n\t\tthis._surface = surface;\r\n\t\tthis._elementsClass = elementsClass;\r\n\t\tthis._stage = stage;\r\n\t}\r\n\r\n\tpublic getImageIndex(texture:TextureBase, index:number = 0):number\r\n\t{\r\n\t\treturn this._render.getImageIndex(texture, index);\r\n\t}\r\n\r\n\t/**\r\n\t * Marks the shader program as invalid, so it will be recompiled before the next render.\r\n\t */\r\n\tpublic invalidate():void\r\n\t{\r\n\t\tthis._shader.invalidateProgram();\r\n\r\n\t\tthis.dispatchEvent(new PassEvent(PassEvent.INVALIDATE, this));\r\n\t}\r\n\r\n\t/**\r\n\t * Cleans up any resources used by the current object.\r\n\t * @param deep Indicates whether other resources should be cleaned up, that could potentially be shared across different instances.\r\n\t */\r\n\tpublic dispose():void\r\n\t{\r\n\t\tthis._render = null;\r\n\t\tthis._surface = null;\r\n\t\tthis._elementsClass = null;\r\n\t\tthis._stage = null;\r\n\r\n\t\tif (this._shader) {\r\n\t\t\tthis._shader.dispose();\r\n\t\t\tthis._shader = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the current pass. Before calling pass, activatePass needs to be called with the same index.\r\n\t * @param pass The pass used to render the renderable.\r\n\t * @param renderable The IRenderable object to draw.\r\n\t * @param stage The Stage object used for rendering.\r\n\t * @param entityCollector The EntityCollector object that contains the visible scene data.\r\n\t * @param viewProjection The view-projection matrix used to project to the screen. This is not the same as\r\n\t * camera.viewProjection as it includes the scaling factors when rendering to textures.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic _setRenderState(renderable:GL_RenderableBase, camera:Camera, viewProjection:Matrix3D):void\r\n\t{\r\n\t\tthis._shader._setRenderState(renderable, camera, viewProjection);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render state for the pass that is independent of the rendered object. This needs to be called before\r\n\t * calling pass. Before activating a pass, the previously used pass needs to be deactivated.\r\n\t * @param stage The Stage object which is currently used for rendering.\r\n\t * @param camera The camera from which the scene is viewed.\r\n\t * @private\r\n\t */\r\n\tpublic _iActivate(camera:Camera):void\r\n\t{\r\n\t\tthis._shader._iActivate(camera);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the render state for the pass. This needs to be called before activating another pass.\r\n\t * @param stage The Stage used for rendering\r\n\t *\r\n\t * @private\r\n\t */\r\n\tpublic _iDeactivate():void\r\n\t{\r\n\t\tthis._shader._iDeactivate();\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies(shader:ShaderBase):void\r\n\t{\r\n\t\tthis._render._iIncludeDependencies(shader);\r\n\t\t\r\n\t\tif (this._forceSeparateMVP)\r\n\t\t\tshader.globalPosDependencies++;\r\n\t}\r\n\r\n\r\n\tpublic _iInitConstantData(shader:ShaderBase):void\r\n\t{\r\n\r\n\t}\r\n\r\n\tpublic _iGetPreLightingVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetPreLightingFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetNormalVertexCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tpublic _iGetNormalFragmentCode(shader:ShaderBase, registerCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\r\n\t{\r\n\t\treturn \"\";\r\n\t}\r\n}",
    "export {BasicMaterialPass}\t\t\t\tfrom \"./surfaces/passes/BasicMaterialPass\";\r\nexport {ILightingPass}\t\t\t\t\tfrom \"./surfaces/passes/ILightingPass\";\r\nexport {IPass}\t\t\t\t\t\t\tfrom \"./surfaces/passes/IPass\";\r\nexport {PassBase}\t\t\t\t\t\tfrom \"./surfaces/passes/PassBase\";\r\nexport {GL_BasicMaterialSurface}\t\t\tfrom \"./surfaces/GL_BasicMaterialSurface\";\r\nexport {GL_DepthSurface}\t\t\t\t\tfrom \"./surfaces/GL_DepthSurface\";\r\nexport {GL_DistanceSurface}\t\t\t\tfrom \"./surfaces/GL_DistanceSurface\";\r\nexport {GL_SkyboxSurface}\t\t\t\tfrom \"./surfaces/GL_SkyboxSurface\";\r\nexport {GL_SurfaceBase}\t\t\t\t\tfrom \"./surfaces/GL_SurfaceBase\";\r\nexport {GL_SurfacePassBase}\t\t\t\tfrom \"./surfaces/GL_SurfacePassBase\";\r\nexport {ISurfaceClassGL}\t\t\t\t\tfrom \"./surfaces/ISurfaceClassGL\";\r\nexport {SurfacePool}\t\t\t\t\t\tfrom \"./surfaces/SurfacePool\";",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {Image2D}\t\t\t\t\t\tfrom \"awayjs-core/lib/image/Image2D\";\r\n\r\nimport {GL_Image2D}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_Image2D\";\r\nimport {GL_Sampler2D}\t\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_Sampler2D\";\r\n\r\nimport {MappingMode}\t\t\t\t\tfrom \"awayjs-display/lib/textures/MappingMode\";\r\nimport {Single2DTexture}\t\t\t\tfrom \"awayjs-display/lib/textures/Single2DTexture\";\r\n\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../textures/GL_TextureBase\";\r\n\r\n/**\r\n *\r\n * @class away.pool.GL_Single2DTexture\r\n */\r\nexport class GL_Single2DTexture extends GL_TextureBase\r\n{\r\n\r\n\tprivate _single2DTexture:Single2DTexture;\r\n\tprivate _textureIndex:number;\r\n\tprivate _imageIndex:number;\r\n\tprivate _samplerIndex:number;\r\n\r\n\tconstructor(single2DTexture:Single2DTexture, shader:ShaderBase)\r\n\t{\r\n\t\tsuper(single2DTexture, shader);\r\n\r\n\t\tthis._single2DTexture = single2DTexture;\r\n\t}\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._single2DTexture = null;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param shader\r\n\t * @param regCache\r\n\t * @param targetReg The register in which to store the sampled colour.\r\n\t * @param uvReg The uv coordinate vector with which to sample the texture map.\r\n\t * @returns {string}\r\n\t * @private\r\n\t */\r\n\tpublic _iGetFragmentCode(targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData, inputReg:ShaderRegisterElement):string\r\n\t{\r\n\t\tvar code:string = \"\";\r\n\t\tvar wrap:string = \"wrap\";\r\n\t\tvar format:string = \"\";//this.getFormatString(this._single2DTexture.image2D);\r\n\t\tvar filter:string = \"linear,miplinear\";\r\n\r\n\t\tvar temp:ShaderRegisterElement;\r\n\r\n\t\t//modify depending on mapping mode\r\n\t\tif (this._single2DTexture.mappingMode == MappingMode.RADIAL_GRADIENT) {\r\n\t\t\ttemp = regCache.getFreeFragmentVectorTemp();\r\n\t\t\tcode += \"mul \" + temp + \".xy, \" + inputReg + \", \" + inputReg + \"\\n\";\r\n\t\t\tcode += \"mul \" + temp + \".xy, \" + inputReg + \", \" + inputReg + \"\\n\";\r\n\t\t\tcode += \"add \" + temp + \".x, \" + temp + \".x, \" + temp + \".y\\n\";\r\n\t\t\tcode += \"sub \" + temp + \".y, \" + temp + \".y, \" + temp + \".y\\n\";\r\n\t\t\tcode += \"sqt \" + temp + \".x, \" + temp + \".x, \" + temp + \".x\\n\";\r\n\t\t\tinputReg = temp;\r\n\t\t}\r\n\r\n\t\t//handles texture atlasing\r\n\t\tif (this._shader.useImageRect) {\r\n\t\t\tvar samplerReg:ShaderRegisterElement = regCache.getFreeFragmentConstant();\r\n\t\t\tthis._samplerIndex = samplerReg.index*4;\r\n\t\t\ttemp = regCache.getFreeFragmentVectorTemp();\r\n\r\n\t\t\tcode += \"mul \" + temp + \", \" + inputReg + \", \" + samplerReg + \".xy\\n\";\r\n\t\t\tcode += \"add \" + temp + \", \" + temp + \", \" + samplerReg + \".zw\\n\";\r\n\t\t\tinputReg = temp;\r\n\t\t}\r\n\r\n\t\tthis._imageIndex = this._shader.getImageIndex(this._single2DTexture, 0);\r\n\r\n\t\tvar textureReg:ShaderRegisterElement = this.getTextureReg(this._imageIndex, regCache, sharedReg);\r\n\t\tthis._textureIndex = textureReg.index;\r\n\r\n\t\tcode += \"tex \" + targetReg + \", \" + inputReg + \", \" + textureReg + \" <2d,\" + filter + \",\" + format + wrap + \">\\n\";\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tpublic activate(render:GL_SurfaceBase):void\r\n\t{\r\n\t\tvar sampler:GL_Sampler2D = <GL_Sampler2D> render.samplers[this._imageIndex];\r\n\t\tsampler.activate(this._textureIndex);\r\n\r\n\t\tvar image:GL_Image2D = render.images[this._imageIndex];\r\n\t\timage.activate(this._textureIndex, sampler._sampler.mipmap);\r\n\r\n\t\tif (this._shader.useImageRect) {\r\n\t\t\tvar index:number = this._samplerIndex;\r\n\t\t\tvar data:Float32Array = this._shader.fragmentConstantData;\r\n\t\t\tif (!sampler._sampler.imageRect) {\r\n\t\t\t\tdata[index] = 1;\r\n\t\t\t\tdata[index + 1] = 1;\r\n\t\t\t\tdata[index + 2] = 0;\r\n\t\t\t\tdata[index + 3] = 0;\r\n\t\t\t} else {\r\n\t\t\t\tdata[index] = sampler._sampler.imageRect.width;\r\n\t\t\t\tdata[index + 1] = sampler._sampler.imageRect.height;\r\n\t\t\t\tdata[index + 2] = sampler._sampler.imageRect.x;\r\n\t\t\t\tdata[index + 3] = sampler._sampler.imageRect.y;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase):void\r\n\t{\r\n\t\tvar sampler:GL_Sampler2D = <GL_Sampler2D> renderable.samplers[this._imageIndex];\r\n\r\n\t\tif (sampler)\r\n\t\t\tsampler.activate(this._textureIndex);\r\n\r\n\t\tvar image:GL_Image2D = renderable.images[this._imageIndex];\r\n\r\n\t\tif (image)\r\n\t\t\timage.activate(this._textureIndex, sampler._sampler.mipmap);\r\n\r\n\t\tif (this._shader.useImageRect && sampler) {\r\n\t\t\tvar index:number = this._samplerIndex;\r\n\t\t\tvar data:Float32Array = this._shader.fragmentConstantData;\r\n\t\t\tif (!sampler._sampler.imageRect) {\r\n\t\t\t\tdata[index] = 1;\r\n\t\t\t\tdata[index + 1] = 1;\r\n\t\t\t\tdata[index + 2] = 0;\r\n\t\t\t\tdata[index + 3] = 0;\r\n\t\t\t} else {\r\n\t\t\t\tdata[index] = sampler._sampler.imageRect.width;\r\n\t\t\t\tdata[index + 1] = sampler._sampler.imageRect.height;\r\n\t\t\t\tdata[index + 2] = sampler._sampler.imageRect.x;\r\n\t\t\t\tdata[index + 3] = sampler._sampler.imageRect.y;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}",
    "import {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\n\r\nimport {GL_SamplerCube}\t\t\t\tfrom \"awayjs-stagegl/lib/image/GL_SamplerCube\";\r\n\r\nimport {SingleCubeTexture}\t\t\tfrom \"awayjs-display/lib/textures/SingleCubeTexture\";\r\n\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\nimport {GL_TextureBase}\t\t\t\tfrom \"../textures/GL_TextureBase\";\r\n\r\n/**\r\n *\r\n * @class away.pool.TextureDataBase\r\n */\r\nexport class GL_SingleCubeTexture extends GL_TextureBase\r\n{\r\n\tprivate _singleCubeTexture:SingleCubeTexture;\r\n\tprivate _textureIndex:number;\r\n\tprivate _imageIndex:number;\r\n\r\n\tconstructor(singleCubeTexture:SingleCubeTexture, shader:ShaderBase)\r\n\t{\r\n\t\tsuper(singleCubeTexture, shader);\r\n\r\n\t\tthis._singleCubeTexture = singleCubeTexture;\r\n\t}\r\n\r\n\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._singleCubeTexture = null;\r\n\t}\r\n\r\n\tpublic _iIncludeDependencies(includeInput:boolean = true):void\r\n\t{\r\n\t\tif (includeInput)\r\n\t\t\tthis._shader.usesPositionFragment = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param shader\r\n\t * @param regCache\r\n\t * @param targetReg The register in which to store the sampled colour.\r\n\t * @param uvReg The direction vector with which to sample the cube map.\r\n\t * @returns {string}\r\n\t * @private\r\n\t */\r\n\tpublic _iGetFragmentCode(targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData, inputReg:ShaderRegisterElement):string\r\n\t{\r\n\t\tvar format:string = \"\";//this.getFormatString(this._singleCubeTexture.imageCube);\r\n\t\tvar filter:string = \"linear,miplinear\";\r\n\r\n\t\tthis._imageIndex = this._shader.getImageIndex(this._singleCubeTexture, 0);\r\n\r\n\t\tvar textureReg:ShaderRegisterElement = this.getTextureReg(this._imageIndex, regCache, sharedReg);\r\n\t\tthis._textureIndex = textureReg.index;\r\n\r\n\t\treturn \"tex \" + targetReg + \", \" + inputReg + \", \" + textureReg + \" <cube,\" + format + filter + \">\\n\";\r\n\t}\r\n\r\n\r\n\tpublic activate(render:GL_SurfaceBase):void\r\n\t{\r\n\t\tvar sampler:GL_SamplerCube = <GL_SamplerCube> render.samplers[this._imageIndex];\r\n\r\n\t\tif (sampler)\r\n\t\t\tsampler.activate(this._textureIndex);\r\n\r\n\t\tif (render.images[this._imageIndex])\r\n\t\t\trender.images[this._imageIndex].activate(this._textureIndex, sampler._sampler.mipmap);\r\n\r\n\t}\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase):void\r\n\t{\r\n\t\tvar sampler:GL_SamplerCube = <GL_SamplerCube> renderable.samplers[this._imageIndex];\r\n\r\n\t\tif (sampler)\r\n\t\t\tsampler.activate(this._textureIndex);\r\n\r\n\t\tif (renderable.images[this._imageIndex] && sampler) //TODO: allow image to be re-written without accompanying sampler on the renderable\r\n\t\t\trenderable.images[this._imageIndex].activate(this._textureIndex, sampler._sampler.mipmap);\r\n\t}\r\n}",
    "import {AbstractMethodError}\t\t\tfrom \"awayjs-core/lib/errors/AbstractMethodError\";\r\nimport {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\r\nimport {ImageBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/ImageBase\";\r\nimport {SamplerBase}\t\t\t\t\tfrom \"awayjs-core/lib/image/SamplerBase\";\r\nimport {AbstractionBase}\t\t\t\tfrom \"awayjs-core/lib/library/AbstractionBase\";\r\n\r\nimport {ContextGLTextureFormat}\t\tfrom \"awayjs-stagegl/lib/base/ContextGLTextureFormat\";\r\nimport {Stage}\t\t\t\t\t\tfrom \"awayjs-stagegl/lib/base/Stage\";\r\n\r\nimport {TextureBase}\t\t\t\t\tfrom \"awayjs-display/lib/textures/TextureBase\";\r\n\r\nimport {GL_SurfaceBase}\t\t\t\tfrom \"../surfaces/GL_SurfaceBase\";\r\nimport {GL_RenderableBase}\t\t\tfrom \"../renderables/GL_RenderableBase\";\r\nimport {ShaderBase}\t\t\t\t\tfrom \"../shaders/ShaderBase\";\r\nimport {ShaderRegisterCache}\t\t\tfrom \"../shaders/ShaderRegisterCache\";\r\nimport {ShaderRegisterData}\t\t\tfrom \"../shaders/ShaderRegisterData\";\r\nimport {ShaderRegisterElement}\t\tfrom \"../shaders/ShaderRegisterElement\";\r\n\r\n/**\r\n *\r\n * @class away.pool.GL_TextureBaseBase\r\n */\r\nexport class GL_TextureBase extends AbstractionBase\r\n{\r\n\tprivate _texture:TextureBase;\r\n\tpublic _shader:ShaderBase;\r\n\tpublic _stage:Stage;\r\n\r\n\tconstructor(texture:TextureBase, shader:ShaderBase)\r\n\t{\r\n\t\tsuper(texture, shader);\r\n\r\n\t\tthis._texture = texture;\r\n\t\tthis._shader = shader;\r\n\t\tthis._stage = shader._stage;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onClear(event:AssetEvent):void\r\n\t{\r\n\t\tsuper.onClear(event);\r\n\r\n\t\tthis._texture = null;\r\n\t\tthis._shader = null;\r\n\t\tthis._stage = null;\r\n\t}\r\n\r\n\tpublic _iGetFragmentCode(targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData, inputReg:ShaderRegisterElement = null):string\r\n\t{\r\n\t\tthrow new AbstractMethodError();\r\n\t}\r\n\r\n\tpublic _setRenderState(renderable:GL_RenderableBase):void\r\n\t{\r\n\t\t//overidden for state logic\r\n\t}\r\n\r\n\tpublic activate(render:GL_SurfaceBase):void\r\n\t{\r\n\t\t//overridden for activation logic\r\n\t}\r\n\r\n\tpublic getTextureReg(imageIndex:number, regCache:ShaderRegisterCache, sharedReg:ShaderRegisterData):ShaderRegisterElement\r\n\t{\r\n\t\tvar index:number = this._shader.imageIndices.indexOf(imageIndex); //todo: collapse the index based on duplicate image objects to save registrations\r\n\r\n\t\tif (index == -1) {\r\n\t\t\tvar textureReg:ShaderRegisterElement = regCache.getFreeTextureReg();\r\n\t\t\tsharedReg.textures.push(textureReg);\r\n\t\t\tthis._shader.imageIndices.push(imageIndex);\r\n\r\n\t\t\treturn textureReg;\r\n\t\t}\r\n\r\n\t\treturn sharedReg.textures[index];\r\n\t}\r\n\r\n\tpublic getFormatString(image:ImageBase):string\r\n\t{\r\n\t\tswitch (image.format) {\r\n\t\t\tcase ContextGLTextureFormat.COMPRESSED:\r\n\t\t\t\treturn \"dxt1,\";\r\n\t\t\tcase ContextGLTextureFormat.COMPRESSED_ALPHA:\r\n\t\t\t\treturn \"dxt5,\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"\";\r\n\t\t}\r\n\t}\r\n}",
    "export {GL_Single2DTexture}\t\t\t\tfrom \"./textures/GL_Single2DTexture\";\r\nexport {GL_SingleCubeTexture}\t\t\tfrom \"./textures/GL_SingleCubeTexture\";\r\nexport {GL_TextureBase}\t\t\t\t\tfrom \"./textures/GL_TextureBase\";",
    "import {AttributesBuffer}\t\t\t\t\tfrom \"awayjs-core/lib/attributes/AttributesBuffer\";\r\nimport {Matrix3DUtils}\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3DUtils\";\r\n\r\nimport {DisplayObjectContainer}\t\t\tfrom \"awayjs-display/lib/display/DisplayObjectContainer\";\r\nimport {Graphics}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphics\";\r\nimport {TriangleElements}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\nimport {Sprite}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\r\nimport {MaterialBase}\t\t\t\t\t\tfrom \"awayjs-display/lib/materials/MaterialBase\";\r\nimport {AttributesView} from \"awayjs-core/lib/attributes/AttributesView\";\r\n\r\n/**\r\n *  Class Merge merges two or more static sprites into one.<code>Merge</code>\r\n */\r\nexport class Merge\r\n{\r\n\r\n\t//private const LIMIT:uint = 196605;\r\n\tprivate _objectSpace:boolean;\r\n\tprivate _keepMaterial:boolean;\r\n\tprivate _disposeSources:boolean;\r\n\tprivate _graphicVOs:Array<GraphicVO>;\r\n\tprivate _toDispose:Array<Sprite>;\r\n\r\n\t/**\r\n\t * @param    keepMaterial    [optional]    Determines if the merged object uses the recevier sprite material information or keeps its source material(s). Defaults to false.\r\n\t * If false and receiver object has multiple materials, the last material found in receiver subsprites is applied to the merged subsprite(es).\r\n\t * @param    disposeSources  [optional]    Determines if the sprite and geometry source(s) used for the merging are disposed. Defaults to false.\r\n\t * If true, only receiver geometry and resulting sprite are kept in  memory.\r\n\t * @param    objectSpace     [optional]    Determines if source sprite(es) is/are merged using objectSpace or worldspace. Defaults to false.\r\n\t */\r\n\tconstructor(keepMaterial:boolean = false, disposeSources:boolean = false, objectSpace:boolean = false)\r\n\t{\r\n\t\tthis._keepMaterial = keepMaterial;\r\n\t\tthis._disposeSources = disposeSources;\r\n\t\tthis._objectSpace = objectSpace;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines if the sprite and geometry source(s) used for the merging are disposed. Defaults to false.\r\n\t */\r\n\tpublic set disposeSources(b:boolean)\r\n\t{\r\n\t\tthis._disposeSources = b;\r\n\t}\r\n\r\n\tpublic get disposeSources():boolean\r\n\t{\r\n\t\treturn this._disposeSources;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines if the material source(s) used for the merging are disposed. Defaults to false.\r\n\t */\r\n\tpublic set keepMaterial(b:boolean)\r\n\t{\r\n\t\tthis._keepMaterial = b;\r\n\t}\r\n\r\n\tpublic get keepMaterial():boolean\r\n\t{\r\n\t\treturn this._keepMaterial;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines if source sprite(es) is/are merged using objectSpace or worldspace. Defaults to false.\r\n\t */\r\n\tpublic set objectSpace(b:boolean)\r\n\t{\r\n\t\tthis._objectSpace = b;\r\n\t}\r\n\r\n\tpublic get objectSpace():boolean\r\n\t{\r\n\t\treturn this._objectSpace;\r\n\t}\r\n\r\n\t/**\r\n\t * Merges all the children of a container into a single Sprite. If no Sprite object is found, method returns the receiver without modification.\r\n\t *\r\n\t * @param    receiver           The Sprite to receive the merged contents of the container.\r\n\t * @param    objectContainer    The DisplayObjectContainer holding the sprites to be mergd.\r\n\t *\r\n\t * @return The merged Sprite instance.\r\n\t */\r\n\tpublic applyToContainer(receiver:Sprite, objectContainer:DisplayObjectContainer):void\r\n\t{\r\n\t\tthis.reset();\r\n\r\n\t\t//collect container sprites\r\n\t\tthis.parseContainer(receiver, objectContainer);\r\n\r\n\t\t//collect receiver\r\n\t\tthis.collect(receiver, false);\r\n\r\n\t\t//merge to receiver\r\n\t\tthis.merge(receiver, this._disposeSources);\r\n\t}\r\n\r\n\t/**\r\n\t * Merges all the sprites found in the Array&lt;Sprite&gt; into a single Sprite.\r\n\t *\r\n\t * @param    receiver    The Sprite to receive the merged contents of the sprites.\r\n\t * @param    sprites      A series of Sprites to be merged with the reciever sprite.\r\n\t */\r\n\tpublic applyToSprites(receiver:Sprite, sprites:Array<Sprite>):void\r\n\t{\r\n\t\tthis.reset();\r\n\r\n\t\tif (!sprites.length)\r\n\t\t\treturn;\r\n\r\n\t\t//collect sprites in vector\r\n\t\tfor (var i:number = 0; i < sprites.length; i++)\r\n\t\t\tif (sprites[i] != receiver)\r\n\t\t\t\tthis.collect(sprites[i], this._disposeSources);\r\n\r\n\t\t//collect receiver\r\n\t\tthis.collect(receiver, false);\r\n\r\n\t\t//merge to receiver\r\n\t\tthis.merge(receiver, this._disposeSources);\r\n\t}\r\n\r\n\t/**\r\n\t *  Merges 2 sprites into one. It is recommand to use apply when 2 sprites are to be merged. If more need to be merged, use either applyToSprites or applyToContainer methods.\r\n\t *\r\n\t * @param    receiver    The Sprite to receive the merged contents of both sprites.\r\n\t * @param    sprite        The Sprite to be merged with the receiver sprite\r\n\t */\r\n\tpublic apply(receiver:Sprite, sprite:Sprite):void\r\n\t{\r\n\t\tthis.reset();\r\n\r\n\t\t//collect sprite\r\n\t\tthis.collect(sprite, this._disposeSources);\r\n\r\n\t\t//collect receiver\r\n\t\tthis.collect(receiver, false);\r\n\r\n\t\t//merge to receiver\r\n\t\tthis.merge(receiver, this._disposeSources);\r\n\t}\r\n\r\n\tprivate reset():void\r\n\t{\r\n\t\tthis._toDispose  = new Array<Sprite>();\r\n\t\tthis._graphicVOs = new Array<GraphicVO>();\r\n\t}\r\n\r\n\tprivate merge(destSprite:Sprite, dispose:boolean):void\r\n\t{\r\n\t\tvar i:number;\r\n\t\t//var oldGraphics:Graphics;\r\n\t\tvar destGraphics:Graphics;\r\n\t\tvar useSubMaterials:boolean;\r\n\r\n\t\t//oldGraphics = destSprite.graphics.clone();\r\n\t\tdestGraphics = destSprite.graphics;\r\n\r\n\t\t// Only apply materials directly to sub-sprites if necessary,\r\n\t\t// i.e. if there is more than one material available.\r\n\t\tuseSubMaterials = (this._graphicVOs.length > 1);\r\n\r\n\t\tfor (i = 0; i < this._graphicVOs.length; i++) {\r\n\t\t\tvar elements:TriangleElements = new TriangleElements(new AttributesBuffer());\r\n\t\t\telements.autoDeriveNormals = false;\r\n\t\t\telements.autoDeriveTangents = false;\r\n\r\n\t\t\tvar data:GraphicVO = this._graphicVOs[i];\r\n\t\t\telements.setIndices(data.indices);\r\n\t\t\telements.setPositions(data.vertices);\r\n\t\t\telements.setNormals(data.normals);\r\n\t\t\telements.setTangents(data.tangents);\r\n\t\t\telements.setUVs(data.uvs);\r\n\r\n\t\t\tif (this._keepMaterial && useSubMaterials)\r\n\t\t\t\tdestGraphics.addGraphic(elements, data.material);\r\n\t\t\telse\r\n\t\t\t\tdestGraphics.addGraphic(elements);\r\n\t\t}\r\n\r\n\t\tif (this._keepMaterial && !useSubMaterials && this._graphicVOs.length)\r\n\t\t\tdestSprite.material = this._graphicVOs[0].material;\r\n\r\n\t\tif (dispose) {\r\n\t\t\tvar len:number = this._toDispose.length;\r\n\t\t\tfor (var i:number; i < len; i++)\r\n\t\t\t\tthis._toDispose[i].dispose();\r\n\t\t}\r\n\r\n\t\tthis._toDispose = null;\r\n\t}\r\n\r\n\tprivate collect(sprite:Sprite, dispose:boolean):void\r\n\t{\r\n\t\tvar subIdx:number;\r\n\t\tvar calc:number;\r\n\t\tfor (subIdx = 0; subIdx < sprite.graphics.count; subIdx++) {\r\n\t\t\tvar i:number;\r\n\t\t\tvar len:number;\r\n\t\t\tvar iIdx:number, vIdx:number, nIdx:number, tIdx:number, uIdx:number;\r\n\t\t\tvar indexOffset:number;\r\n\t\t\tvar elements:TriangleElements;\r\n\t\t\tvar vo:GraphicVO;\r\n\t\t\tvar vertices:Array<number>;\r\n\t\t\tvar normals:Array<number>;\r\n\t\t\tvar tangents:Array<number>;\r\n\t\t\tvar ind:Uint16Array;\r\n\r\n\t\t\telements = <TriangleElements> sprite.graphics.getGraphicAt(subIdx).elements;\r\n\r\n\t\t\t// Get (or create) a VO for this material\r\n\t\t\tvo = this.getGraphicData(sprite.graphics.getGraphicAt(subIdx).material);\r\n\r\n\t\t\t// Vertices and normals are copied to temporary vectors, to be transformed\r\n\t\t\t// before concatenated onto those of the data. This is unnecessary if no\r\n\t\t\t// transformation will be performed, i.e. for object space merging.\r\n\t\t\tvertices = (this._objectSpace)? vo.vertices : new Array<number>();\r\n\t\t\tnormals = (this._objectSpace)? vo.normals : new Array<number>();\r\n\t\t\ttangents = (this._objectSpace)? vo.tangents : new Array<number>();\r\n\r\n\t\t\t// Copy over vertex attributes\r\n\t\t\tvIdx = vertices.length;\r\n\t\t\tnIdx = normals.length;\r\n\t\t\ttIdx = tangents.length;\r\n\t\t\tuIdx = vo.uvs.length;\r\n\t\t\t\r\n\t\t\tthis.copyAttributes(elements.positions, vertices, elements.numVertices, vIdx);\r\n\t\t\tthis.copyAttributes(elements.normals, normals, elements.numVertices, nIdx);\r\n\t\t\tthis.copyAttributes(elements.tangents, tangents, elements.numVertices, tIdx);\r\n\t\t\tthis.copyAttributes(elements.uvs, vo.uvs, elements.numVertices, uIdx);\r\n\r\n\t\t\t// Copy over triangle indices\r\n\t\t\tindexOffset = (!this._objectSpace)? vo.vertices.length/3 :0;\r\n\t\t\tiIdx = vo.indices.length;\r\n\t\t\tlen = elements.numElements;\r\n\t\t\tind = elements.indices.get(len);\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\tcalc = i*3;\r\n\t\t\t\tvo.indices[iIdx++] = ind[calc] + indexOffset;\r\n\t\t\t\tvo.indices[iIdx++] = ind[calc + 1] + indexOffset;\r\n\t\t\t\tvo.indices[iIdx++] = ind[calc + 2] + indexOffset;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._objectSpace) {\r\n\t\t\t\tsprite.sceneTransform.transformVectors(vertices, vertices);\r\n\t\t\t\tMatrix3DUtils.deltaTransformVectors(sprite.sceneTransform, normals, normals);\r\n\t\t\t\tMatrix3DUtils.deltaTransformVectors(sprite.sceneTransform, tangents, tangents);\r\n\r\n\t\t\t\t// Copy vertex data from temporary (transformed) vectors\r\n\t\t\t\tvIdx = vo.vertices.length;\r\n\t\t\t\tnIdx = vo.normals.length;\r\n\t\t\t\ttIdx = vo.tangents.length;\r\n\t\t\t\tlen = vertices.length;\r\n\t\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t\tvo.vertices[vIdx++] = vertices[i];\r\n\t\t\t\t\tvo.normals[nIdx++] = normals[i];\r\n\t\t\t\t\tvo.tangents[tIdx++] = tangents[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dispose)\r\n\t\t\tthis._toDispose.push(sprite);\r\n\t}\r\n\t\r\n\tprivate copyAttributes(attributes:AttributesView, array:Array<number>, count:number, startIndex:number)\r\n\t{\r\n\t\tvar vertices:ArrayBufferView = attributes.get(count);\r\n\t\tvar dim:number = attributes.dimensions;\r\n\t\tvar stride:number = attributes.stride;\r\n\t\tvar len:number = count*stride;\r\n\t\t\r\n\t\tfor (var i:number = 0; i < len; i += stride)\r\n\t\t\tfor (var j:number = 0; j < dim; j++)\r\n\t\t\t\tarray[startIndex++] = vertices[i + j];\r\n\t}\r\n\r\n\tprivate getGraphicData(material:MaterialBase):GraphicVO\r\n\t{\r\n\t\tvar data:GraphicVO;\r\n\r\n\t\tif (this._keepMaterial) {\r\n\t\t\tvar i:number;\r\n\t\t\tvar len:number;\r\n\r\n\t\t\tlen = this._graphicVOs.length;\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\tif (this._graphicVOs[i].material == material) {\r\n\t\t\t\t\tdata = this._graphicVOs[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (this._graphicVOs.length) {\r\n\t\t\t// If materials are not to be kept, all data can be\r\n\t\t\t// put into a single VO, so return that one.\r\n\t\t\tdata = this._graphicVOs[0];\r\n\t\t}\r\n\r\n\t\t// No data (for this material) found, create new.\r\n\t\tif (!data) {\r\n\t\t\tdata = new GraphicVO();\r\n\t\t\tdata.vertices = new Array<number>();\r\n\t\t\tdata.normals = new Array<number>();\r\n\t\t\tdata.tangents = new Array<number>();\r\n\t\t\tdata.uvs = new Array<number>();\r\n\t\t\tdata.indices = new Array<number>();\r\n\t\t\tdata.material = material;\r\n\r\n\t\t\tthis._graphicVOs.push(data);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tprivate parseContainer(receiver:Sprite, object:DisplayObjectContainer):void\r\n\t{\r\n\t\tvar child:DisplayObjectContainer;\r\n\t\tvar i:number;\r\n\r\n\t\tif (object instanceof Sprite && object != (<DisplayObjectContainer> receiver))\r\n\t\t\tthis.collect(<Sprite> object, this._disposeSources);\r\n\r\n\t\tfor (i = 0; i < object.numChildren; ++i) {\r\n\t\t\tchild = <DisplayObjectContainer> object.getChildAt(i);\r\n\t\t\tthis.parseContainer(receiver, child);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class GraphicVO\r\n{\r\n\tpublic uvs:Array<number>;\r\n\tpublic vertices:Array<number>;\r\n\tpublic normals:Array<number>;\r\n\tpublic tangents:Array<number>;\r\n\tpublic indices:Array<number>;\r\n\tpublic material:MaterialBase;\r\n}\r\n",
    "import {Matrix}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix\";\r\nimport {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleGraphicsTransform\r\n{\r\n\tprivate _defaultVertexTransform:Matrix3D;\r\n\tprivate _defaultInvVertexTransform:Matrix3D;\r\n\tprivate _defaultUVTransform:Matrix;\r\n\r\n\tpublic set vertexTransform(value:Matrix3D)\r\n\t{\r\n\t\tthis._defaultVertexTransform = value;\r\n\t\tthis._defaultInvVertexTransform = value.clone();\r\n\t\tthis._defaultInvVertexTransform.invert();\r\n\t\tthis._defaultInvVertexTransform.transpose();\r\n\t}\r\n\r\n\tpublic set UVTransform(value:Matrix)\r\n\t{\r\n\t\tthis._defaultUVTransform = value;\r\n\t}\r\n\r\n\tpublic get UVTransform():Matrix\r\n\t{\r\n\t\treturn this._defaultUVTransform;\r\n\t}\r\n\r\n\tpublic get vertexTransform():Matrix3D\r\n\t{\r\n\t\treturn this._defaultVertexTransform;\r\n\t}\r\n\r\n\tpublic get invVertexTransform():Matrix3D\r\n\t{\r\n\t\treturn this._defaultInvVertexTransform;\r\n\t}\r\n}",
    "export {Merge}\t\t\t\t\t\t\tfrom \"./tools/commands/Merge\";\r\nexport {ParticleGraphicsTransform}\t\tfrom \"./tools/data/ParticleGraphicsTransform\";",
    "import {AttributesBuffer}\t\t\t\t\tfrom \"awayjs-core/lib/attributes/AttributesBuffer\";\r\nimport {Matrix}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix\";\r\nimport {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\nimport {Point}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Point\";\r\nimport {Vector3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\n\r\nimport {ParticleData}\t\t\t\t\t\tfrom \"awayjs-display/lib/animators/data/ParticleData\";\r\nimport {Graphics}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/graphics/Graphics\";\r\nimport {TriangleElements}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/TriangleElements\";\r\nimport {Sprite}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\r\n\r\nimport {ParticleGraphicsTransform}\t\tfrom \"../tools/data/ParticleGraphicsTransform\";\r\n\r\n/**\r\n * ...\r\n */\r\nexport class ParticleGraphicsHelper\r\n{\r\n\tpublic static MAX_VERTEX:number = 65535;\r\n\r\n\tpublic static generateGraphics(output:Graphics, graphicsArray:Array<Graphics>, transforms:Array<ParticleGraphicsTransform> = null):void\r\n\t{\r\n\t\tvar indicesVector:Array<Array<number>> = new Array<Array<number>>();\r\n\t\tvar positionsVector:Array<Array<number>> = new Array<Array<number>>();\r\n\t\tvar normalsVector:Array<Array<number>> = new Array<Array<number>>();\r\n\t\tvar tangentsVector:Array<Array<number>> = new Array<Array<number>>();\r\n\t\tvar uvsVector:Array<Array<number>> = new Array<Array<number>>();\r\n\t\tvar vertexCounters:Array<number> = new Array<number>();\r\n\t\tvar particles:Array<ParticleData> = new Array<ParticleData>();\r\n\t\tvar elementsArray:Array<TriangleElements> = new Array<TriangleElements>();\r\n\t\tvar numParticles:number = graphicsArray.length;\r\n\r\n\t\tvar sourceGraphics:Graphics;\r\n\t\tvar sourceElements:TriangleElements;\r\n\t\tvar numGraphics:number;\r\n\t\tvar indices:Array<number>;\r\n\t\tvar positions:Array<number>;\r\n\t\tvar normals:Array<number>;\r\n\t\tvar tangents:Array<number>;\r\n\t\tvar uvs:Array<number>;\r\n\t\tvar vertexCounter:number;\r\n\t\tvar elements:TriangleElements;\r\n\t\tvar i:number;\r\n\t\tvar j:number;\r\n\t\tvar sub2SubMap:Array<number> = new Array<number>();\r\n\r\n\t\tvar tempVertex:Vector3D = new Vector3D;\r\n\t\tvar tempNormal:Vector3D = new Vector3D;\r\n\t\tvar tempTangents:Vector3D = new Vector3D;\r\n\t\tvar tempUV:Point = new Point;\r\n\r\n\t\tfor (i = 0; i < numParticles; i++) {\r\n\t\t\tsourceGraphics = graphicsArray[i];\r\n\t\t\tnumGraphics = sourceGraphics.count;\r\n\t\t\tfor (var srcIndex:number = 0; srcIndex < numGraphics; srcIndex++) {\r\n\t\t\t\t//create a different particle subgeometry group for each source subgeometry in a particle.\r\n\t\t\t\tif (sub2SubMap.length <= srcIndex) {\r\n\t\t\t\t\tsub2SubMap.push(elementsArray.length);\r\n\t\t\t\t\tindicesVector.push(new Array<number>());\r\n\t\t\t\t\tpositionsVector.push(new Array<number>());\r\n\t\t\t\t\tnormalsVector.push(new Array<number>());\r\n\t\t\t\t\ttangentsVector.push(new Array<number>());\r\n\t\t\t\t\tuvsVector.push(new Array<number>());\r\n\t\t\t\t\telementsArray.push(new TriangleElements(new AttributesBuffer()));\r\n\t\t\t\t\tvertexCounters.push(0);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsourceElements = <TriangleElements> sourceGraphics.getGraphicAt(srcIndex).elements;\r\n\r\n\t\t\t\t//add a new particle subgeometry if this source subgeometry will take us over the maxvertex limit\r\n\t\t\t\tif (sourceElements.numVertices + vertexCounters[sub2SubMap[srcIndex]] > ParticleGraphicsHelper.MAX_VERTEX) {\r\n\t\t\t\t\t//update submap and add new subgeom vectors\r\n\t\t\t\t\tsub2SubMap[srcIndex] = elementsArray.length;\r\n\t\t\t\t\tindicesVector.push(new Array<number>());\r\n\t\t\t\t\tpositionsVector.push(new Array<number>());\r\n\t\t\t\t\tnormalsVector.push(new Array<number>());\r\n\t\t\t\t\ttangentsVector.push(new Array<number>());\r\n\t\t\t\t\tuvsVector.push(new Array<number>());\r\n\t\t\t\t\telementsArray.push(new TriangleElements(new AttributesBuffer()));\r\n\t\t\t\t\tvertexCounters.push(0);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tj = sub2SubMap[srcIndex];\r\n\r\n\t\t\t\t//select the correct vector\r\n\t\t\t\tindices = indicesVector[j];\r\n\t\t\t\tpositions = positionsVector[j];\r\n\t\t\t\tnormals = normalsVector[j];\r\n\t\t\t\ttangents = tangentsVector[j];\r\n\t\t\t\tuvs = uvsVector[j];\r\n\t\t\t\tvertexCounter = vertexCounters[j];\r\n\t\t\t\telements = elementsArray[j];\r\n\r\n\t\t\t\tvar particleData:ParticleData = new ParticleData();\r\n\t\t\t\tparticleData.numVertices = sourceElements.numVertices;\r\n\t\t\t\tparticleData.startVertexIndex = vertexCounter;\r\n\t\t\t\tparticleData.particleIndex = i;\r\n\t\t\t\tparticleData.elements = elements;\r\n\t\t\t\tparticles.push(particleData);\r\n\r\n\t\t\t\tvertexCounters[j] += sourceElements.numVertices;\r\n\r\n\t\t\t\tvar k:number;\r\n\t\t\t\tvar index:number;\r\n\t\t\t\tvar posIndex:number;\r\n\t\t\t\tvar normalIndex:number;\r\n\t\t\t\tvar tangentIndex:number;\r\n\t\t\t\tvar uvIndex:number;\r\n\r\n\t\t\t\tvar tempLen:number;\r\n\t\t\t\tvar compact:TriangleElements = sourceElements;\r\n\t\t\t\tvar sourcePositions:ArrayBufferView;\r\n\t\t\t\tvar posStride:number;\r\n\t\t\t\tvar sourceNormals:Float32Array;\r\n\t\t\t\tvar normalStride:number;\r\n\t\t\t\tvar sourceTangents:Float32Array;\r\n\t\t\t\tvar tangentStride:number;\r\n\t\t\t\tvar sourceUVs:ArrayBufferView;\r\n\t\t\t\tvar uvStride:number;\r\n\r\n\t\t\t\tif (compact) {\r\n\t\t\t\t\ttempLen = compact.numVertices;\r\n\t\t\t\t\tsourcePositions = compact.positions.get(tempLen);\r\n\t\t\t\t\tposStride = compact.positions.stride;\r\n\t\t\t\t\tsourceNormals = compact.normals.get(tempLen);\r\n\t\t\t\t\tnormalStride = compact.normals.stride;\r\n\t\t\t\t\tsourceTangents = compact.tangents.get(tempLen);\r\n\t\t\t\t\ttangentStride = compact.tangents.stride;\r\n\t\t\t\t\tsourceUVs = compact.uvs.get(tempLen);\r\n\t\t\t\t\tuvStride = compact.uvs.stride;\r\n\r\n\t\t\t\t\tif (transforms) {\r\n\t\t\t\t\t\tvar particleGraphicsTransform:ParticleGraphicsTransform = transforms[i];\r\n\t\t\t\t\t\tvar vertexTransform:Matrix3D = particleGraphicsTransform.vertexTransform;\r\n\t\t\t\t\t\tvar invVertexTransform:Matrix3D = particleGraphicsTransform.invVertexTransform;\r\n\t\t\t\t\t\tvar UVTransform:Matrix = particleGraphicsTransform.UVTransform;\r\n\r\n\t\t\t\t\t\tfor (k = 0; k < tempLen; k++) {\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t * 0 - 2: vertex position X, Y, Z\r\n\t\t\t\t\t\t\t * 3 - 5: normal X, Y, Z\r\n\t\t\t\t\t\t\t * 6 - 8: tangent X, Y, Z\r\n\t\t\t\t\t\t\t * 9 - 10: U V\r\n\t\t\t\t\t\t\t * 11 - 12: Secondary U V*/\r\n\t\t\t\t\t\t\tposIndex = k*posStride;\r\n\t\t\t\t\t\t\ttempVertex.x = sourcePositions[posIndex];\r\n\t\t\t\t\t\t\ttempVertex.y = sourcePositions[posIndex + 1];\r\n\t\t\t\t\t\t\ttempVertex.z = sourcePositions[posIndex + 2];\r\n\t\t\t\t\t\t\tnormalIndex = k*normalStride;\r\n\t\t\t\t\t\t\ttempNormal.x = sourceNormals[normalIndex];\r\n\t\t\t\t\t\t\ttempNormal.y = sourceNormals[normalIndex + 1];\r\n\t\t\t\t\t\t\ttempNormal.z = sourceNormals[normalIndex + 2];\r\n\t\t\t\t\t\t\ttangentIndex = k*tangentStride;\r\n\t\t\t\t\t\t\ttempTangents.x = sourceTangents[tangentIndex];\r\n\t\t\t\t\t\t\ttempTangents.y = sourceTangents[tangentIndex + 1];\r\n\t\t\t\t\t\t\ttempTangents.z = sourceTangents[tangentIndex + 2];\r\n\t\t\t\t\t\t\tuvIndex = k*uvStride;\r\n\t\t\t\t\t\t\ttempUV.x = sourceUVs[uvIndex];\r\n\t\t\t\t\t\t\ttempUV.y = sourceUVs[uvIndex + 1];\r\n\t\t\t\t\t\t\tif (vertexTransform) {\r\n\t\t\t\t\t\t\t\ttempVertex = vertexTransform.transformVector(tempVertex);\r\n\t\t\t\t\t\t\t\ttempNormal = invVertexTransform.deltaTransformVector(tempNormal);\r\n\t\t\t\t\t\t\t\ttempTangents = invVertexTransform.deltaTransformVector(tempNormal);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (UVTransform)\r\n\t\t\t\t\t\t\t\ttempUV = UVTransform.transformPoint(tempUV);\r\n\t\t\t\t\t\t\t//this is faster than that only push one data\r\n\t\t\t\t\t\t\tpositions.push(tempVertex.x, tempVertex.y, tempVertex.z);\r\n\t\t\t\t\t\t\tnormals.push(tempNormal.x, tempNormal.y, tempNormal.z);\r\n\t\t\t\t\t\t\ttangents.push(tempTangents.x, tempTangents.y, tempTangents.z);\r\n\t\t\t\t\t\t\tuvs.push(tempUV.x, tempUV.y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (k = 0; k < tempLen; k++) {\r\n\t\t\t\t\t\t\tposIndex = k*posStride;\r\n\t\t\t\t\t\t\tnormalIndex = k*normalStride;\r\n\t\t\t\t\t\t\ttangentIndex = k*tangentStride;\r\n\t\t\t\t\t\t\tuvIndex = k*uvStride;\r\n\t\t\t\t\t\t\t//this is faster than that only push one data\r\n\t\t\t\t\t\t\tpositions.push(sourcePositions[posIndex], sourcePositions[posIndex + 1], sourcePositions[posIndex + 2]);\r\n\t\t\t\t\t\t\tnormals.push(sourceNormals[normalIndex], sourceNormals[normalIndex + 1], sourceNormals[normalIndex + 2]);\r\n\t\t\t\t\t\t\ttangents.push(sourceTangents[tangentIndex], sourceTangents[tangentIndex + 1], sourceTangents[tangentIndex + 2]);\r\n\t\t\t\t\t\t\tuvs.push(sourceUVs[uvIndex], sourceUVs[uvIndex + 1]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//Todo\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttempLen = sourceElements.numElements;\r\n\t\t\t\tvar sourceIndices:Uint16Array = sourceElements.indices.get(tempLen);\r\n\t\t\t\tfor (k = 0; k < tempLen; k++) {\r\n\t\t\t\t\tindex = k*3;\r\n\t\t\t\t\tindices.push(sourceIndices[index] + vertexCounter, sourceIndices[index + 1] + vertexCounter, sourceIndices[index + 2] + vertexCounter);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toutput.particles = particles;\r\n\t\toutput.numParticles = numParticles;\r\n\r\n\t\tnumParticles = elementsArray.length;\r\n\t\tfor (i = 0; i < numParticles; i++) {\r\n\t\t\telements = elementsArray[i];\r\n\t\t\telements.autoDeriveNormals = false;\r\n\t\t\telements.autoDeriveTangents = false;\r\n\t\t\telements.setIndices(indicesVector[i]);\r\n\t\t\telements.setPositions(positionsVector[i]);\r\n\t\t\telements.setNormals(normalsVector[i]);\r\n\t\t\telements.setTangents(tangentsVector[i]);\r\n\t\t\telements.setUVs(uvsVector[i]);\r\n\t\t\toutput.addGraphic(elements);\r\n\t\t}\r\n\t}\r\n}",
    "import {Matrix3D}\t\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Matrix3D\";\r\n\r\n/**\r\n *\r\n */\r\nexport class PerspectiveMatrix3D extends Matrix3D\r\n{\r\n\tconstructor(v:Float32Array = null)\r\n\t{\r\n\t\tsuper(v);\r\n\t}\r\n\r\n\tpublic perspectiveFieldOfViewLH(fieldOfViewY:number, aspectRatio:number, zNear:number, zFar:number):void\r\n\t{\r\n\t\tvar yScale:number = 1/Math.tan(fieldOfViewY/2);\r\n\t\tvar xScale:number = yScale/aspectRatio;\r\n\r\n\t\tthis.rawData[0] = xScale;\r\n\t\tthis.rawData[1] = 0.0;\r\n\t\tthis.rawData[2] = 0.0;\r\n\t\tthis.rawData[3] = 0.0;\r\n\r\n\t\tthis.rawData[4] = 0.0;\r\n\t\tthis.rawData[5] = yScale;\r\n\t\tthis.rawData[6] = 0.0;\r\n\t\tthis.rawData[7] = 0.0;\r\n\r\n\t\tthis.rawData[8] = 0.0;\r\n\t\tthis.rawData[9] = 0.0;\r\n\t\tthis.rawData[10] = zFar/(zFar - zNear);\r\n\t\tthis.rawData[11] = 1.0;\r\n\r\n\t\tthis.rawData[12] = 0.0;\r\n\t\tthis.rawData[13] = 0.0;\r\n\t\tthis.rawData[14] = (zNear*zFar)/(zNear - zFar);\r\n\t\tthis.rawData[15] = 0.0;\r\n\t}\r\n}",
    "export {ParticleGraphicsHelper}\t\t\tfrom \"./utils/ParticleGraphicsHelper\";\r\nexport {PerspectiveMatrix3D}\t\t\t\tfrom \"./utils/PerspectiveMatrix3D\";"
  ]
}