var AbstractMethodError = require("awayjs-core/lib/errors/AbstractMethodError");
var SubGeometryBase = require("awayjs-display/lib/base/SubGeometryBase");
var TriangleSubGeometry = require("awayjs-display/lib/base/TriangleSubGeometry");
var RenderableOwnerEvent = require("awayjs-display/lib/events/RenderableOwnerEvent");
var SubGeometryEvent = require("awayjs-display/lib/events/SubGeometryEvent");
var IndexDataPool = require("awayjs-stagegl/lib/pool/IndexDataPool");
var VertexDataPool = require("awayjs-stagegl/lib/pool/VertexDataPool");
/**
 * @class RenderableListItem
 */
var RenderableBase = (function () {
    /**
     *
     * @param sourceEntity
     * @param renderableOwner
     * @param subGeometry
     * @param animationSubGeometry
     */
    function RenderableBase(pool, sourceEntity, renderableOwner, renderObjectOwner, stage, level, indexOffset) {
        var _this = this;
        if (level === void 0) { level = 0; }
        if (indexOffset === void 0) { indexOffset = 0; }
        this._geometryDirty = true;
        this._indexDataDirty = true;
        this._vertexData = new Object();
        this._pVertexDataDirty = new Object();
        this._vertexOffset = new Object();
        this._onIndicesUpdatedDelegate = function (event) { return _this._onIndicesUpdated(event); };
        this._onVerticesUpdatedDelegate = function (event) { return _this._onVerticesUpdated(event); };
        this._onRenderObjectOwnerUpdatedDelegate = function (event) { return _this._onRenderObjectOwnerUpdated(event); };
        //store a reference to the pool for later disposal
        this._pool = pool;
        this._stage = stage;
        //reference to level of overflow
        this._level = level;
        //reference to the offset on indices (if this is an overflow renderable)
        this._indexOffset = indexOffset;
        this.sourceEntity = sourceEntity;
        this.renderableOwner = renderableOwner;
        this.renderableOwner.addEventListener(RenderableOwnerEvent.RENDER_OBJECT_OWNER_UPDATED, this._onRenderObjectOwnerUpdatedDelegate);
        this.renderObjectOwner = renderObjectOwner;
    }
    Object.defineProperty(RenderableBase.prototype, "overflow", {
        /**
         *
         */
        get: function () {
            if (this._indexDataDirty)
                this._updateIndexData();
            return this._overflow;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderableBase.prototype, "numTriangles", {
        /**
         *
         */
        get: function () {
            return this._numTriangles;
        },
        enumerable: true,
        configurable: true
    });
    /**
     *
     */
    RenderableBase.prototype.getIndexData = function () {
        if (this._indexDataDirty)
            this._updateIndexData();
        return this._indexData;
    };
    /**
     *
     */
    RenderableBase.prototype.getVertexData = function (dataType) {
        if (this._indexDataDirty)
            this._updateIndexData();
        if (this._pVertexDataDirty[dataType])
            this._updateVertexData(dataType);
        return this._vertexData[this._concatenateArrays ? TriangleSubGeometry.VERTEX_DATA : dataType];
    };
    /**
     *
     */
    RenderableBase.prototype.getVertexOffset = function (dataType) {
        if (this._indexDataDirty)
            this._updateIndexData();
        if (this._pVertexDataDirty[dataType])
            this._updateVertexData(dataType);
        return this._vertexOffset[dataType];
    };
    RenderableBase.prototype.dispose = function () {
        this._pool.disposeItem(this.renderableOwner);
        this._indexData.dispose();
        this._indexData = null;
        for (var dataType in this._vertexData) {
            this._vertexData[dataType].dispose();
            this._vertexData[dataType] = null;
        }
        if (this._overflow) {
            this._overflow.dispose();
            this._overflow = null;
        }
    };
    RenderableBase.prototype.invalidateGeometry = function () {
        this._geometryDirty = true;
        //invalidate indices
        if (this._level == 0)
            this._indexDataDirty = true;
        if (this._overflow)
            this._overflow.invalidateGeometry();
    };
    /**
     *
     */
    RenderableBase.prototype.invalidateIndexData = function () {
        this._indexDataDirty = true;
    };
    /**
     * //TODO
     *
     * @param dataType
     */
    RenderableBase.prototype.invalidateVertexData = function (dataType) {
        this._pVertexDataDirty[dataType] = true;
    };
    RenderableBase.prototype._pGetSubGeometry = function () {
        throw new AbstractMethodError();
    };
    RenderableBase._iGetVertexCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    RenderableBase._iGetFragmentCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    /**
     * //TODO
     *
     * @param subGeometry
     * @param offset
     * @internal
     */
    RenderableBase.prototype._iFillIndexData = function (indexOffset) {
        if (this._geometryDirty)
            this._updateGeometry();
        this._indexData = IndexDataPool.getItem(this._subGeometry, this._level, indexOffset);
        this._numTriangles = this._indexData.data.length / 3;
        indexOffset = this._indexData.offset;
        //check if there is more to split
        if (indexOffset < this._subGeometry.indices.length) {
            if (!this._overflow)
                this._overflow = this._pGetOverflowRenderable(indexOffset);
            this._overflow._iFillIndexData(indexOffset);
        }
        else if (this._overflow) {
            this._overflow.dispose();
            this._overflow = null;
        }
    };
    RenderableBase.prototype._pGetOverflowRenderable = function (indexOffset) {
        throw new AbstractMethodError();
    };
    /**
     * Sets the render state for the pass that is independent of the rendered object. This needs to be called before
     * calling renderPass. Before activating a pass, the previously used pass needs to be deactivated.
     * @param stage The Stage object which is currently used for rendering.
     * @param camera The camera from which the scene is viewed.
     * @private
     */
    RenderableBase.prototype._iActivate = function (pass, camera) {
        pass._iActivate(camera);
    };
    /**
     * Renders an object to the current render target.
     *
     * @private
     */
    RenderableBase.prototype._iRender = function (pass, camera, viewProjection) {
        pass._iRender(this, camera, viewProjection);
    };
    /**
     * Clears the render state for the pass. This needs to be called before activating another pass.
     * @param stage The Stage used for rendering
     *
     * @private
     */
    RenderableBase.prototype._iDeactivate = function (pass) {
        pass._iDeactivate();
    };
    /**
     * //TODO
     *
     * @private
     */
    RenderableBase.prototype._updateGeometry = function () {
        if (this._subGeometry) {
            if (this._level == 0)
                this._subGeometry.removeEventListener(SubGeometryEvent.INDICES_UPDATED, this._onIndicesUpdatedDelegate);
            this._subGeometry.removeEventListener(SubGeometryEvent.VERTICES_UPDATED, this._onVerticesUpdatedDelegate);
        }
        this._subGeometry = this._pGetSubGeometry();
        this._concatenateArrays = this._subGeometry.concatenateArrays;
        if (this._subGeometry) {
            if (this._level == 0)
                this._subGeometry.addEventListener(SubGeometryEvent.INDICES_UPDATED, this._onIndicesUpdatedDelegate);
            this._subGeometry.addEventListener(SubGeometryEvent.VERTICES_UPDATED, this._onVerticesUpdatedDelegate);
        }
        //dispose
        //			if (this._indexData) {
        //				this._indexData.dispose(); //TODO where is a good place to dispose?
        //				this._indexData = null;
        //			}
        //			for (var dataType in this._vertexData) {
        //				(<VertexData> this._vertexData[dataType]).dispose(); //TODO where is a good place to dispose?
        //				this._vertexData[dataType] = null;
        //			}
        this._geometryDirty = false;
        //specific vertex data types have to be invalidated in the specific renderable
    };
    /**
     * //TODO
     *
     * @private
     */
    RenderableBase.prototype._updateIndexData = function () {
        this._iFillIndexData(this._indexOffset);
        this._indexDataDirty = false;
    };
    /**
     * //TODO
     *
     * @param dataType
     * @private
     */
    RenderableBase.prototype._updateVertexData = function (dataType) {
        this._vertexOffset[dataType] = this._subGeometry.getOffset(dataType);
        if (this._subGeometry.concatenateArrays)
            dataType = SubGeometryBase.VERTEX_DATA;
        this._vertexData[dataType] = VertexDataPool.getItem(this._subGeometry, this.getIndexData(), dataType);
        this._pVertexDataDirty[dataType] = false;
    };
    /**
     * //TODO
     *
     * @param event
     * @private
     */
    RenderableBase.prototype._onIndicesUpdated = function (event) {
        this.invalidateIndexData();
    };
    /**
     * //TODO
     *
     * @param event
     * @private
     */
    RenderableBase.prototype._onVerticesUpdated = function (event) {
        this._concatenateArrays = event.target.concatenateArrays;
        this.invalidateVertexData(event.dataType);
    };
    RenderableBase.prototype._onRenderObjectOwnerUpdated = function (event) {
        //TODO flag unused renderObjects for deletion
        this.renderObjectOwner = event.renderObjectOwner;
    };
    return RenderableBase;
})();
module.exports = RenderableBase;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wb29sL1JlbmRlcmFibGVCYXNlLnRzIl0sIm5hbWVzIjpbIlJlbmRlcmFibGVCYXNlIiwiUmVuZGVyYWJsZUJhc2UuY29uc3RydWN0b3IiLCJSZW5kZXJhYmxlQmFzZS5vdmVyZmxvdyIsIlJlbmRlcmFibGVCYXNlLm51bVRyaWFuZ2xlcyIsIlJlbmRlcmFibGVCYXNlLmdldEluZGV4RGF0YSIsIlJlbmRlcmFibGVCYXNlLmdldFZlcnRleERhdGEiLCJSZW5kZXJhYmxlQmFzZS5nZXRWZXJ0ZXhPZmZzZXQiLCJSZW5kZXJhYmxlQmFzZS5kaXNwb3NlIiwiUmVuZGVyYWJsZUJhc2UuaW52YWxpZGF0ZUdlb21ldHJ5IiwiUmVuZGVyYWJsZUJhc2UuaW52YWxpZGF0ZUluZGV4RGF0YSIsIlJlbmRlcmFibGVCYXNlLmludmFsaWRhdGVWZXJ0ZXhEYXRhIiwiUmVuZGVyYWJsZUJhc2UuX3BHZXRTdWJHZW9tZXRyeSIsIlJlbmRlcmFibGVCYXNlLl9pR2V0VmVydGV4Q29kZSIsIlJlbmRlcmFibGVCYXNlLl9pR2V0RnJhZ21lbnRDb2RlIiwiUmVuZGVyYWJsZUJhc2UuX2lGaWxsSW5kZXhEYXRhIiwiUmVuZGVyYWJsZUJhc2UuX3BHZXRPdmVyZmxvd1JlbmRlcmFibGUiLCJSZW5kZXJhYmxlQmFzZS5faUFjdGl2YXRlIiwiUmVuZGVyYWJsZUJhc2UuX2lSZW5kZXIiLCJSZW5kZXJhYmxlQmFzZS5faURlYWN0aXZhdGUiLCJSZW5kZXJhYmxlQmFzZS5fdXBkYXRlR2VvbWV0cnkiLCJSZW5kZXJhYmxlQmFzZS5fdXBkYXRlSW5kZXhEYXRhIiwiUmVuZGVyYWJsZUJhc2UuX3VwZGF0ZVZlcnRleERhdGEiLCJSZW5kZXJhYmxlQmFzZS5fb25JbmRpY2VzVXBkYXRlZCIsIlJlbmRlcmFibGVCYXNlLl9vblZlcnRpY2VzVXBkYXRlZCIsIlJlbmRlcmFibGVCYXNlLl9vblJlbmRlck9iamVjdE93bmVyVXBkYXRlZCJdLCJtYXBwaW5n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O09BS0dBO0lBQ0tBLDBDQUFpQkEsR0FBekJBLFVBQTBCQSxLQUFzQkE7UUFFL0NzQixJQUFJQSxDQUFDQSxtQkFBbUJBLEVBQUVBLENBQUNBO0lBQzVCQSxDQUFDQTtJQUVEdEI7Ozs7O09BS0dBO0lBQ0tBLDJDQUFrQkEsR0FBMUJBLFVBQTJCQSxLQUFzQkE7UUFFaER1QixJQUFJQSxDQUFDQSxrQkFBa0JBLEdBQXNCQSxLQUFLQSxDQUFDQSxNQUFPQSxDQUFDQSxpQkFBaUJBLENBQUNBO1FBRTdFQSxJQUFJQSxDQUFDQSxvQkFBb0JBLENBQUNBLEtBQUtBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO0lBQzNDQSxDQUFDQTtJQUVPdkIsb0RBQTJCQSxHQUFuQ0EsVUFBb0NBLEtBQTBCQTtRQUU3RHdCLEFBQ0FBLDZDQUQ2Q0E7UUFDN0NBLElBQUlBLENBQUNBLGlCQUFpQkEsR0FBR0EsS0FBS0EsQ0FBQ0EsaUJBQWlCQSxDQUFDQTtJQUNsREEsQ0FBQ0E7SUFDRnhCLHFCQUFDQTtBQUFEQSxDQW5aQSxBQW1aQ0EsSUFBQTtBQUVELEFBQXdCLGlCQUFmLGNBQWMsQ0FBQyIsImZpbGUiOiJwb29sL1JlbmRlcmFibGVCYXNlLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNYXRyaXgzRFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL01hdHJpeDNEXCIpO1xyXG5pbXBvcnQgQWJzdHJhY3RNZXRob2RFcnJvclx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9lcnJvcnMvQWJzdHJhY3RNZXRob2RFcnJvclwiKTtcclxuXHJcbmltcG9ydCBJUmVuZGVyYWJsZU93bmVyXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9JUmVuZGVyYWJsZU93bmVyXCIpO1xyXG5pbXBvcnQgSVJlbmRlck9iamVjdE93bmVyXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvSVJlbmRlck9iamVjdE93bmVyXCIpO1xyXG5pbXBvcnQgU3ViR2VvbWV0cnlCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9TdWJHZW9tZXRyeUJhc2VcIik7XHJcbmltcG9ydCBUcmlhbmdsZVN1Ykdlb21ldHJ5XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvVHJpYW5nbGVTdWJHZW9tZXRyeVwiKTtcclxuaW1wb3J0IElSZW5kZXJhYmxlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9wb29sL0lSZW5kZXJhYmxlXCIpO1xyXG5pbXBvcnQgSUVudGl0eVx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9lbnRpdGllcy9JRW50aXR5XCIpO1xyXG5pbXBvcnQgQ2FtZXJhXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2VudGl0aWVzL0NhbWVyYVwiKTtcclxuaW1wb3J0IFJlbmRlcmFibGVPd25lckV2ZW50XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2V2ZW50cy9SZW5kZXJhYmxlT3duZXJFdmVudFwiKTtcclxuaW1wb3J0IFN1Ykdlb21ldHJ5RXZlbnRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9ldmVudHMvU3ViR2VvbWV0cnlFdmVudFwiKTtcclxuaW1wb3J0IElSZW5kZXJlclx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvcmVuZGVyL0lSZW5kZXJlclwiKTtcclxuaW1wb3J0IE1hdGVyaWFsQmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvbWF0ZXJpYWxzL01hdGVyaWFsQmFzZVwiKTtcclxuXHJcbmltcG9ydCBJbmRleERhdGFcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3Bvb2wvSW5kZXhEYXRhXCIpO1xyXG5pbXBvcnQgSW5kZXhEYXRhUG9vbFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3Bvb2wvSW5kZXhEYXRhUG9vbFwiKTtcclxuaW1wb3J0IFZlcnRleERhdGFcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3Bvb2wvVmVydGV4RGF0YVwiKTtcclxuaW1wb3J0IFZlcnRleERhdGFQb29sXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvcG9vbC9WZXJ0ZXhEYXRhUG9vbFwiKTtcclxuaW1wb3J0IFN0YWdlXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvU3RhZ2VcIik7XHJcblxyXG5pbXBvcnQgU2hhZGVyT2JqZWN0QmFzZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2NvbXBpbGF0aW9uL1NoYWRlck9iamVjdEJhc2VcIik7XHJcbmltcG9ydCBTaGFkZXJSZWdpc3RlckNhY2hlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyQ2FjaGVcIik7XHJcbmltcG9ydCBTaGFkZXJSZWdpc3RlckRhdGFcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJEYXRhXCIpO1xyXG5pbXBvcnQgUmVuZGVyYWJsZVBvb2xCYXNlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3Bvb2wvUmVuZGVyYWJsZVBvb2xCYXNlXCIpO1xyXG5pbXBvcnQgUmVuZGVyT2JqZWN0QmFzZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2NvbXBpbGF0aW9uL1JlbmRlck9iamVjdEJhc2VcIik7XHJcbmltcG9ydCBSZW5kZXJQYXNzQmFzZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3Bhc3Nlcy9SZW5kZXJQYXNzQmFzZVwiKTtcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgUmVuZGVyYWJsZUxpc3RJdGVtXHJcbiAqL1xyXG5jbGFzcyBSZW5kZXJhYmxlQmFzZSBpbXBsZW1lbnRzIElSZW5kZXJhYmxlXHJcbntcclxuXHJcblx0cHJpdmF0ZSBfb25JbmRpY2VzVXBkYXRlZERlbGVnYXRlOihldmVudDpTdWJHZW9tZXRyeUV2ZW50KSA9PiB2b2lkO1xyXG5cdHByaXZhdGUgX29uVmVydGljZXNVcGRhdGVkRGVsZWdhdGU6KGV2ZW50OlN1Ykdlb21ldHJ5RXZlbnQpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBfb25SZW5kZXJPYmplY3RPd25lclVwZGF0ZWREZWxlZ2F0ZTooZXZlbnQ6UmVuZGVyYWJsZU93bmVyRXZlbnQpID0+IHZvaWQ7XHJcblxyXG5cdHByaXZhdGUgX3N1Ykdlb21ldHJ5OlN1Ykdlb21ldHJ5QmFzZTtcclxuXHRwcml2YXRlIF9nZW9tZXRyeURpcnR5OmJvb2xlYW4gPSB0cnVlO1xyXG5cdHByaXZhdGUgX2luZGV4RGF0YTpJbmRleERhdGE7XHJcblx0cHJpdmF0ZSBfaW5kZXhEYXRhRGlydHk6Ym9vbGVhbiA9IHRydWU7XHJcblx0cHJpdmF0ZSBfdmVydGV4RGF0YTpPYmplY3QgPSBuZXcgT2JqZWN0KCk7XHJcblx0cHVibGljIF9wVmVydGV4RGF0YURpcnR5Ok9iamVjdCA9IG5ldyBPYmplY3QoKTtcclxuXHRwcml2YXRlIF92ZXJ0ZXhPZmZzZXQ6T2JqZWN0ID0gbmV3IE9iamVjdCgpO1xyXG5cclxuXHRwdWJsaWMgX2xldmVsOm51bWJlcjtcclxuXHRwcml2YXRlIF9pbmRleE9mZnNldDpudW1iZXI7XHJcblx0cHJpdmF0ZSBfb3ZlcmZsb3c6UmVuZGVyYWJsZUJhc2U7XHJcblx0cHJpdmF0ZSBfbnVtVHJpYW5nbGVzOm51bWJlcjtcclxuXHRwcml2YXRlIF9jb25jYXRlbmF0ZUFycmF5czpib29sZWFuO1xyXG5cclxuXHRwdWJsaWMgSk9JTlRfSU5ERVhfRk9STUFUOnN0cmluZztcclxuXHRwdWJsaWMgSk9JTlRfV0VJR0hUX0ZPUk1BVDpzdHJpbmc7XHJcblxyXG5cdC8qKlxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIF9wb29sOlJlbmRlcmFibGVQb29sQmFzZTtcclxuXHJcblx0cHVibGljIF9zdGFnZTpTdGFnZTtcclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IG92ZXJmbG93KCk6UmVuZGVyYWJsZUJhc2VcclxuXHR7XHJcblx0XHRpZiAodGhpcy5faW5kZXhEYXRhRGlydHkpXHJcblx0XHRcdHRoaXMuX3VwZGF0ZUluZGV4RGF0YSgpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLl9vdmVyZmxvdztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIGdldCBudW1UcmlhbmdsZXMoKTpudW1iZXJcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fbnVtVHJpYW5nbGVzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgbmV4dDpSZW5kZXJhYmxlQmFzZTtcclxuXHJcblx0cHVibGljIGlkOm51bWJlcjtcclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgcmVuZGVyT2JqZWN0SWQ6bnVtYmVyO1xyXG5cclxuXHQvKipcclxuXHQgKlxyXG5cdCAqL1xyXG5cdHB1YmxpYyByZW5kZXJPcmRlcklkOm51bWJlcjtcclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgekluZGV4Om51bWJlcjtcclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgY2FzY2FkZWQ6Ym9vbGVhbjtcclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgcmVuZGVyU2NlbmVUcmFuc2Zvcm06TWF0cml4M0Q7XHJcblxyXG5cdC8qKlxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIHNvdXJjZUVudGl0eTpJRW50aXR5O1xyXG5cclxuXHQvKipcclxuXHQgKlxyXG5cdCAqL1xyXG5cdHB1YmxpYyByZW5kZXJhYmxlT3duZXI6SVJlbmRlcmFibGVPd25lcjtcclxuXHJcblxyXG5cdC8qKlxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIHJlbmRlck9iamVjdE93bmVyOklSZW5kZXJPYmplY3RPd25lcjtcclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgcmVuZGVyT2JqZWN0OlJlbmRlck9iamVjdEJhc2U7XHJcblxyXG5cdC8qKlxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIGdldEluZGV4RGF0YSgpOkluZGV4RGF0YVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl9pbmRleERhdGFEaXJ0eSlcclxuXHRcdFx0dGhpcy5fdXBkYXRlSW5kZXhEYXRhKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX2luZGV4RGF0YTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqXHJcblx0ICovXHJcblx0cHVibGljIGdldFZlcnRleERhdGEoZGF0YVR5cGU6c3RyaW5nKTpWZXJ0ZXhEYXRhXHJcblx0e1xyXG5cdFx0aWYgKHRoaXMuX2luZGV4RGF0YURpcnR5KVxyXG5cdFx0XHR0aGlzLl91cGRhdGVJbmRleERhdGEoKTtcclxuXHJcblx0XHRpZiAodGhpcy5fcFZlcnRleERhdGFEaXJ0eVtkYXRhVHlwZV0pXHJcblx0XHRcdHRoaXMuX3VwZGF0ZVZlcnRleERhdGEoZGF0YVR5cGUpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLl92ZXJ0ZXhEYXRhW3RoaXMuX2NvbmNhdGVuYXRlQXJyYXlzPyBUcmlhbmdsZVN1Ykdlb21ldHJ5LlZFUlRFWF9EQVRBIDogZGF0YVR5cGVdXHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXRWZXJ0ZXhPZmZzZXQoZGF0YVR5cGU6c3RyaW5nKTpudW1iZXJcclxuXHR7XHJcblx0XHRpZiAodGhpcy5faW5kZXhEYXRhRGlydHkpXHJcblx0XHRcdHRoaXMuX3VwZGF0ZUluZGV4RGF0YSgpO1xyXG5cclxuXHRcdGlmICh0aGlzLl9wVmVydGV4RGF0YURpcnR5W2RhdGFUeXBlXSlcclxuXHRcdFx0dGhpcy5fdXBkYXRlVmVydGV4RGF0YShkYXRhVHlwZSk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3ZlcnRleE9mZnNldFtkYXRhVHlwZV07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBzb3VyY2VFbnRpdHlcclxuXHQgKiBAcGFyYW0gcmVuZGVyYWJsZU93bmVyXHJcblx0ICogQHBhcmFtIHN1Ykdlb21ldHJ5XHJcblx0ICogQHBhcmFtIGFuaW1hdGlvblN1Ykdlb21ldHJ5XHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IocG9vbDpSZW5kZXJhYmxlUG9vbEJhc2UsIHNvdXJjZUVudGl0eTpJRW50aXR5LCByZW5kZXJhYmxlT3duZXI6SVJlbmRlcmFibGVPd25lciwgcmVuZGVyT2JqZWN0T3duZXI6SVJlbmRlck9iamVjdE93bmVyLCBzdGFnZTpTdGFnZSwgbGV2ZWw6bnVtYmVyID0gMCwgaW5kZXhPZmZzZXQ6bnVtYmVyID0gMClcclxuXHR7XHJcblx0XHR0aGlzLl9vbkluZGljZXNVcGRhdGVkRGVsZWdhdGUgPSAoZXZlbnQ6U3ViR2VvbWV0cnlFdmVudCkgPT4gdGhpcy5fb25JbmRpY2VzVXBkYXRlZChldmVudCk7XHJcblx0XHR0aGlzLl9vblZlcnRpY2VzVXBkYXRlZERlbGVnYXRlID0gKGV2ZW50OlN1Ykdlb21ldHJ5RXZlbnQpID0+IHRoaXMuX29uVmVydGljZXNVcGRhdGVkKGV2ZW50KTtcclxuXHRcdHRoaXMuX29uUmVuZGVyT2JqZWN0T3duZXJVcGRhdGVkRGVsZWdhdGUgPSAoZXZlbnQ6UmVuZGVyYWJsZU93bmVyRXZlbnQpID0+IHRoaXMuX29uUmVuZGVyT2JqZWN0T3duZXJVcGRhdGVkKGV2ZW50KTtcclxuXHJcblx0XHQvL3N0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBwb29sIGZvciBsYXRlciBkaXNwb3NhbFxyXG5cdFx0dGhpcy5fcG9vbCA9IHBvb2w7XHJcblx0XHR0aGlzLl9zdGFnZSA9IHN0YWdlO1xyXG5cclxuXHRcdC8vcmVmZXJlbmNlIHRvIGxldmVsIG9mIG92ZXJmbG93XHJcblx0XHR0aGlzLl9sZXZlbCA9IGxldmVsO1xyXG5cclxuXHRcdC8vcmVmZXJlbmNlIHRvIHRoZSBvZmZzZXQgb24gaW5kaWNlcyAoaWYgdGhpcyBpcyBhbiBvdmVyZmxvdyByZW5kZXJhYmxlKVxyXG5cdFx0dGhpcy5faW5kZXhPZmZzZXQgPSBpbmRleE9mZnNldDtcclxuXHJcblx0XHR0aGlzLnNvdXJjZUVudGl0eSA9IHNvdXJjZUVudGl0eTtcclxuXHJcblx0XHR0aGlzLnJlbmRlcmFibGVPd25lciA9IHJlbmRlcmFibGVPd25lcjtcclxuXHJcblx0XHR0aGlzLnJlbmRlcmFibGVPd25lci5hZGRFdmVudExpc3RlbmVyKFJlbmRlcmFibGVPd25lckV2ZW50LlJFTkRFUl9PQkpFQ1RfT1dORVJfVVBEQVRFRCwgdGhpcy5fb25SZW5kZXJPYmplY3RPd25lclVwZGF0ZWREZWxlZ2F0ZSlcclxuXHJcblx0XHR0aGlzLnJlbmRlck9iamVjdE93bmVyID0gcmVuZGVyT2JqZWN0T3duZXI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZGlzcG9zZSgpXHJcblx0e1xyXG5cdFx0dGhpcy5fcG9vbC5kaXNwb3NlSXRlbSh0aGlzLnJlbmRlcmFibGVPd25lcik7XHJcblxyXG5cdFx0dGhpcy5faW5kZXhEYXRhLmRpc3Bvc2UoKTtcclxuXHRcdHRoaXMuX2luZGV4RGF0YSA9IG51bGw7XHJcblxyXG5cdFx0Zm9yICh2YXIgZGF0YVR5cGUgaW4gdGhpcy5fdmVydGV4RGF0YSkge1xyXG5cdFx0XHQoPFZlcnRleERhdGE+IHRoaXMuX3ZlcnRleERhdGFbZGF0YVR5cGVdKS5kaXNwb3NlKCk7XHJcblx0XHRcdHRoaXMuX3ZlcnRleERhdGFbZGF0YVR5cGVdID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5fb3ZlcmZsb3cpIHtcclxuXHRcdFx0dGhpcy5fb3ZlcmZsb3cuZGlzcG9zZSgpO1xyXG5cdFx0XHR0aGlzLl9vdmVyZmxvdyA9IG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgaW52YWxpZGF0ZUdlb21ldHJ5KClcclxuXHR7XHJcblx0XHR0aGlzLl9nZW9tZXRyeURpcnR5ID0gdHJ1ZTtcclxuXHJcblx0XHQvL2ludmFsaWRhdGUgaW5kaWNlc1xyXG5cdFx0aWYgKHRoaXMuX2xldmVsID09IDApXHJcblx0XHRcdHRoaXMuX2luZGV4RGF0YURpcnR5ID0gdHJ1ZTtcclxuXHJcblx0XHRpZiAodGhpcy5fb3ZlcmZsb3cpXHJcblx0XHRcdHRoaXMuX292ZXJmbG93LmludmFsaWRhdGVHZW9tZXRyeSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgaW52YWxpZGF0ZUluZGV4RGF0YSgpXHJcblx0e1xyXG5cdFx0dGhpcy5faW5kZXhEYXRhRGlydHkgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogLy9UT0RPXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gZGF0YVR5cGVcclxuXHQgKi9cclxuXHRwdWJsaWMgaW52YWxpZGF0ZVZlcnRleERhdGEoZGF0YVR5cGU6c3RyaW5nKVxyXG5cdHtcclxuXHRcdHRoaXMuX3BWZXJ0ZXhEYXRhRGlydHlbZGF0YVR5cGVdID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBfcEdldFN1Ykdlb21ldHJ5KCk6U3ViR2VvbWV0cnlCYXNlXHJcblx0e1xyXG5cdFx0dGhyb3cgbmV3IEFic3RyYWN0TWV0aG9kRXJyb3IoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgX2lHZXRWZXJ0ZXhDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCByZWdpc3RlckNhY2hlOlNoYWRlclJlZ2lzdGVyQ2FjaGUsIHNoYXJlZFJlZ2lzdGVyczpTaGFkZXJSZWdpc3RlckRhdGEpOnN0cmluZ1xyXG5cdHtcclxuXHRcdHJldHVybiBcIlwiO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBfaUdldEZyYWdtZW50Q29kZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgcmVnaXN0ZXJDYWNoZTpTaGFkZXJSZWdpc3RlckNhY2hlLCBzaGFyZWRSZWdpc3RlcnM6U2hhZGVyUmVnaXN0ZXJEYXRhKTpzdHJpbmdcclxuXHR7XHJcblx0XHRyZXR1cm4gXCJcIjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIC8vVE9ET1xyXG5cdCAqXHJcblx0ICogQHBhcmFtIHN1Ykdlb21ldHJ5XHJcblx0ICogQHBhcmFtIG9mZnNldFxyXG5cdCAqIEBpbnRlcm5hbFxyXG5cdCAqL1xyXG5cdHB1YmxpYyBfaUZpbGxJbmRleERhdGEoaW5kZXhPZmZzZXQ6bnVtYmVyKVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl9nZW9tZXRyeURpcnR5KVxyXG5cdFx0XHR0aGlzLl91cGRhdGVHZW9tZXRyeSgpO1xyXG5cclxuXHRcdHRoaXMuX2luZGV4RGF0YSA9IEluZGV4RGF0YVBvb2wuZ2V0SXRlbSh0aGlzLl9zdWJHZW9tZXRyeSwgdGhpcy5fbGV2ZWwsIGluZGV4T2Zmc2V0KTtcclxuXHJcblx0XHR0aGlzLl9udW1UcmlhbmdsZXMgPSB0aGlzLl9pbmRleERhdGEuZGF0YS5sZW5ndGgvMztcclxuXHJcblx0XHRpbmRleE9mZnNldCA9IHRoaXMuX2luZGV4RGF0YS5vZmZzZXQ7XHJcblxyXG5cdFx0Ly9jaGVjayBpZiB0aGVyZSBpcyBtb3JlIHRvIHNwbGl0XHJcblx0XHRpZiAoaW5kZXhPZmZzZXQgPCB0aGlzLl9zdWJHZW9tZXRyeS5pbmRpY2VzLmxlbmd0aCkge1xyXG5cdFx0XHRpZiAoIXRoaXMuX292ZXJmbG93KVxyXG5cdFx0XHRcdHRoaXMuX292ZXJmbG93ID0gdGhpcy5fcEdldE92ZXJmbG93UmVuZGVyYWJsZShpbmRleE9mZnNldCk7XHJcblxyXG5cdFx0XHR0aGlzLl9vdmVyZmxvdy5faUZpbGxJbmRleERhdGEoaW5kZXhPZmZzZXQpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLl9vdmVyZmxvdykge1xyXG5cdFx0XHR0aGlzLl9vdmVyZmxvdy5kaXNwb3NlKCk7XHJcblx0XHRcdHRoaXMuX292ZXJmbG93ID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBfcEdldE92ZXJmbG93UmVuZGVyYWJsZShpbmRleE9mZnNldDpudW1iZXIpOlJlbmRlcmFibGVCYXNlXHJcblx0e1xyXG5cdFx0dGhyb3cgbmV3IEFic3RyYWN0TWV0aG9kRXJyb3IoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdGhlIHJlbmRlciBzdGF0ZSBmb3IgdGhlIHBhc3MgdGhhdCBpcyBpbmRlcGVuZGVudCBvZiB0aGUgcmVuZGVyZWQgb2JqZWN0LiBUaGlzIG5lZWRzIHRvIGJlIGNhbGxlZCBiZWZvcmVcclxuXHQgKiBjYWxsaW5nIHJlbmRlclBhc3MuIEJlZm9yZSBhY3RpdmF0aW5nIGEgcGFzcywgdGhlIHByZXZpb3VzbHkgdXNlZCBwYXNzIG5lZWRzIHRvIGJlIGRlYWN0aXZhdGVkLlxyXG5cdCAqIEBwYXJhbSBzdGFnZSBUaGUgU3RhZ2Ugb2JqZWN0IHdoaWNoIGlzIGN1cnJlbnRseSB1c2VkIGZvciByZW5kZXJpbmcuXHJcblx0ICogQHBhcmFtIGNhbWVyYSBUaGUgY2FtZXJhIGZyb20gd2hpY2ggdGhlIHNjZW5lIGlzIHZpZXdlZC5cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBfaUFjdGl2YXRlKHBhc3M6UmVuZGVyUGFzc0Jhc2UsIGNhbWVyYTpDYW1lcmEpXHJcblx0e1xyXG5cdFx0cGFzcy5faUFjdGl2YXRlKGNhbWVyYSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIGFuIG9iamVjdCB0byB0aGUgY3VycmVudCByZW5kZXIgdGFyZ2V0LlxyXG5cdCAqXHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRwdWJsaWMgX2lSZW5kZXIocGFzczpSZW5kZXJQYXNzQmFzZSwgY2FtZXJhOkNhbWVyYSwgdmlld1Byb2plY3Rpb246TWF0cml4M0QpXHJcblx0e1xyXG5cdFx0cGFzcy5faVJlbmRlcih0aGlzLCBjYW1lcmEsIHZpZXdQcm9qZWN0aW9uKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsZWFycyB0aGUgcmVuZGVyIHN0YXRlIGZvciB0aGUgcGFzcy4gVGhpcyBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlIGFjdGl2YXRpbmcgYW5vdGhlciBwYXNzLlxyXG5cdCAqIEBwYXJhbSBzdGFnZSBUaGUgU3RhZ2UgdXNlZCBmb3IgcmVuZGVyaW5nXHJcblx0ICpcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBfaURlYWN0aXZhdGUocGFzczpSZW5kZXJQYXNzQmFzZSlcclxuXHR7XHJcblx0XHRwYXNzLl9pRGVhY3RpdmF0ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogLy9UT0RPXHJcblx0ICpcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgX3VwZGF0ZUdlb21ldHJ5KClcclxuXHR7XHJcblx0XHRpZiAodGhpcy5fc3ViR2VvbWV0cnkpIHtcclxuXHRcdFx0aWYgKHRoaXMuX2xldmVsID09IDApXHJcblx0XHRcdFx0dGhpcy5fc3ViR2VvbWV0cnkucmVtb3ZlRXZlbnRMaXN0ZW5lcihTdWJHZW9tZXRyeUV2ZW50LklORElDRVNfVVBEQVRFRCwgdGhpcy5fb25JbmRpY2VzVXBkYXRlZERlbGVnYXRlKTtcclxuXHRcdFx0dGhpcy5fc3ViR2VvbWV0cnkucmVtb3ZlRXZlbnRMaXN0ZW5lcihTdWJHZW9tZXRyeUV2ZW50LlZFUlRJQ0VTX1VQREFURUQsIHRoaXMuX29uVmVydGljZXNVcGRhdGVkRGVsZWdhdGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1Ykdlb21ldHJ5ID0gdGhpcy5fcEdldFN1Ykdlb21ldHJ5KCk7XHJcblxyXG5cdFx0dGhpcy5fY29uY2F0ZW5hdGVBcnJheXMgPSB0aGlzLl9zdWJHZW9tZXRyeS5jb25jYXRlbmF0ZUFycmF5cztcclxuXHJcblx0XHRpZiAodGhpcy5fc3ViR2VvbWV0cnkpIHtcclxuXHRcdFx0aWYgKHRoaXMuX2xldmVsID09IDApXHJcblx0XHRcdFx0dGhpcy5fc3ViR2VvbWV0cnkuYWRkRXZlbnRMaXN0ZW5lcihTdWJHZW9tZXRyeUV2ZW50LklORElDRVNfVVBEQVRFRCwgdGhpcy5fb25JbmRpY2VzVXBkYXRlZERlbGVnYXRlKTtcclxuXHRcdFx0dGhpcy5fc3ViR2VvbWV0cnkuYWRkRXZlbnRMaXN0ZW5lcihTdWJHZW9tZXRyeUV2ZW50LlZFUlRJQ0VTX1VQREFURUQsIHRoaXMuX29uVmVydGljZXNVcGRhdGVkRGVsZWdhdGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vZGlzcG9zZVxyXG4vL1x0XHRcdGlmICh0aGlzLl9pbmRleERhdGEpIHtcclxuLy9cdFx0XHRcdHRoaXMuX2luZGV4RGF0YS5kaXNwb3NlKCk7IC8vVE9ETyB3aGVyZSBpcyBhIGdvb2QgcGxhY2UgdG8gZGlzcG9zZT9cclxuLy9cdFx0XHRcdHRoaXMuX2luZGV4RGF0YSA9IG51bGw7XHJcbi8vXHRcdFx0fVxyXG5cclxuLy9cdFx0XHRmb3IgKHZhciBkYXRhVHlwZSBpbiB0aGlzLl92ZXJ0ZXhEYXRhKSB7XHJcbi8vXHRcdFx0XHQoPFZlcnRleERhdGE+IHRoaXMuX3ZlcnRleERhdGFbZGF0YVR5cGVdKS5kaXNwb3NlKCk7IC8vVE9ETyB3aGVyZSBpcyBhIGdvb2QgcGxhY2UgdG8gZGlzcG9zZT9cclxuLy9cdFx0XHRcdHRoaXMuX3ZlcnRleERhdGFbZGF0YVR5cGVdID0gbnVsbDtcclxuLy9cdFx0XHR9XHJcblxyXG5cdFx0dGhpcy5fZ2VvbWV0cnlEaXJ0eSA9IGZhbHNlO1xyXG5cclxuXHRcdC8vc3BlY2lmaWMgdmVydGV4IGRhdGEgdHlwZXMgaGF2ZSB0byBiZSBpbnZhbGlkYXRlZCBpbiB0aGUgc3BlY2lmaWMgcmVuZGVyYWJsZVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogLy9UT0RPXHJcblx0ICpcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgX3VwZGF0ZUluZGV4RGF0YSgpXHJcblx0e1xyXG5cdFx0dGhpcy5faUZpbGxJbmRleERhdGEodGhpcy5faW5kZXhPZmZzZXQpO1xyXG5cclxuXHRcdHRoaXMuX2luZGV4RGF0YURpcnR5ID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiAvL1RPRE9cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBkYXRhVHlwZVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBfdXBkYXRlVmVydGV4RGF0YShkYXRhVHlwZTpzdHJpbmcpXHJcblx0e1xyXG5cdFx0dGhpcy5fdmVydGV4T2Zmc2V0W2RhdGFUeXBlXSA9IHRoaXMuX3N1Ykdlb21ldHJ5LmdldE9mZnNldChkYXRhVHlwZSk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3N1Ykdlb21ldHJ5LmNvbmNhdGVuYXRlQXJyYXlzKVxyXG5cdFx0XHRkYXRhVHlwZSA9IFN1Ykdlb21ldHJ5QmFzZS5WRVJURVhfREFUQTtcclxuXHJcblx0XHR0aGlzLl92ZXJ0ZXhEYXRhW2RhdGFUeXBlXSA9IFZlcnRleERhdGFQb29sLmdldEl0ZW0odGhpcy5fc3ViR2VvbWV0cnksIHRoaXMuZ2V0SW5kZXhEYXRhKCksIGRhdGFUeXBlKTtcclxuXHJcblx0XHR0aGlzLl9wVmVydGV4RGF0YURpcnR5W2RhdGFUeXBlXSA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogLy9UT0RPXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gZXZlbnRcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgX29uSW5kaWNlc1VwZGF0ZWQoZXZlbnQ6U3ViR2VvbWV0cnlFdmVudClcclxuXHR7XHJcblx0XHR0aGlzLmludmFsaWRhdGVJbmRleERhdGEoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIC8vVE9ET1xyXG5cdCAqXHJcblx0ICogQHBhcmFtIGV2ZW50XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRwcml2YXRlIF9vblZlcnRpY2VzVXBkYXRlZChldmVudDpTdWJHZW9tZXRyeUV2ZW50KVxyXG5cdHtcclxuXHRcdHRoaXMuX2NvbmNhdGVuYXRlQXJyYXlzID0gKDxTdWJHZW9tZXRyeUJhc2U+IGV2ZW50LnRhcmdldCkuY29uY2F0ZW5hdGVBcnJheXM7XHJcblxyXG5cdFx0dGhpcy5pbnZhbGlkYXRlVmVydGV4RGF0YShldmVudC5kYXRhVHlwZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIF9vblJlbmRlck9iamVjdE93bmVyVXBkYXRlZChldmVudDpSZW5kZXJhYmxlT3duZXJFdmVudClcclxuXHR7XHJcblx0XHQvL1RPRE8gZmxhZyB1bnVzZWQgcmVuZGVyT2JqZWN0cyBmb3IgZGVsZXRpb25cclxuXHRcdHRoaXMucmVuZGVyT2JqZWN0T3duZXIgPSBldmVudC5yZW5kZXJPYmplY3RPd25lcjtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFJlbmRlcmFibGVCYXNlOyJdfQ==