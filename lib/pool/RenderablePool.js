var RenderObjectPool = require("awayjs-renderergl/lib/compilation/RenderObjectPool");
var RenderBasicMaterialObject = require("awayjs-renderergl/lib/compilation/RenderBasicMaterialObject");
var SkyboxRenderObject = require("awayjs-renderergl/lib/compilation/SkyboxRenderObject");
var DepthRenderObject = require("awayjs-renderergl/lib/compilation/DepthRenderObject");
var DistanceRenderObject = require("awayjs-renderergl/lib/compilation/DistanceRenderObject");
/**
 * @class away.pool.RenderablePool
 */
var RenderablePool = (function () {
    /**
     * //TODO
     *
     * @param renderableClass
     */
    function RenderablePool(renderableClass, stage) {
        this._renderablePool = new Object();
        this._renderableClass = renderableClass;
        this._stage = stage;
        this._materialRenderObjectPool = new RenderObjectPool(RenderBasicMaterialObject, this._renderableClass, this._stage);
        this._skyboxRenderObjectPool = new RenderObjectPool(SkyboxRenderObject, this._renderableClass, this._stage);
        this._depthRenderObjectPool = new RenderObjectPool(DepthRenderObject, this._renderableClass, this._stage);
        this._distanceRenderObjectPool = new RenderObjectPool(DistanceRenderObject, this._renderableClass, this._stage);
    }
    /**
     * //TODO
     *
     * @param renderableOwner
     * @returns IRenderable
     */
    RenderablePool.prototype.getItem = function (renderableOwner) {
        return (this._renderablePool[renderableOwner.id] || (this._renderablePool[renderableOwner.id] = renderableOwner._iAddRenderable(new this._renderableClass(this, renderableOwner, this._stage))));
    };
    /**
     *
     * @param material
     * @param renderable
     */
    RenderablePool.prototype.getMaterialRenderObject = function (renderObjectOwner) {
        return this._materialRenderObjectPool.getItem(renderObjectOwner);
    };
    /**
     *
     * @param material
     * @param renderable
     */
    RenderablePool.prototype.getSkyboxRenderObject = function (renderObjectOwner) {
        return this._skyboxRenderObjectPool.getItem(renderObjectOwner);
    };
    /**
     *
     * @param material
     * @param renderable
     */
    RenderablePool.prototype.getDepthRenderObject = function (renderObjectOwner) {
        return this._depthRenderObjectPool.getItem(renderObjectOwner);
    };
    /**
     *
     * @param material
     * @param renderable
     */
    RenderablePool.prototype.getDistanceRenderObject = function (renderObjectOwner) {
        return this._distanceRenderObjectPool.getItem(renderObjectOwner);
    };
    /**
     * //TODO
     *
     * @param renderableOwner
     */
    RenderablePool.prototype.disposeItem = function (renderableOwner) {
        renderableOwner._iRemoveRenderable(this._renderablePool[renderableOwner.id]);
        this._renderablePool[renderableOwner.id] = null;
    };
    RenderablePool.prototype.dispose = function () {
        for (var id in this._renderablePool)
            this._renderablePool[id].dispose();
        RenderablePool.disposePool(this._renderableClass, this._stage);
    };
    /**
     * //TODO
     *
     * @param renderableClass
     * @returns RenderablePool
     */
    RenderablePool.getPool = function (renderableClass, stage) {
        var pools = (RenderablePool._pools[stage.stageIndex] || (RenderablePool._pools[stage.stageIndex] = new Object()));
        return (pools[renderableClass.id] || (pools[renderableClass.id] = new RenderablePool(renderableClass, stage)));
    };
    /**
     * //TODO
     *
     * @param renderableClass
     */
    RenderablePool.disposePool = function (renderableClass, stage) {
        var pools = RenderablePool._pools[stage.stageIndex];
        if (pools == undefined)
            return;
        if (pools[renderableClass.id])
            pools[renderableClass.id] = undefined;
    };
    RenderablePool._pools = new Object();
    return RenderablePool;
})();
module.exports = RenderablePool;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wb29sL3JlbmRlcmFibGVwb29sLnRzIl0sIm5hbWVzIjpbIlJlbmRlcmFibGVQb29sIiwiUmVuZGVyYWJsZVBvb2wuY29uc3RydWN0b3IiLCJSZW5kZXJhYmxlUG9vbC5nZXRJdGVtIiwiUmVuZGVyYWJsZVBvb2wuZ2V0TWF0ZXJpYWxSZW5kZXJPYmplY3QiLCJSZW5kZXJhYmxlUG9vbC5nZXRTa3lib3hSZW5kZXJPYmplY3QiLCJSZW5kZXJhYmxlUG9vbC5nZXREZXB0aFJlbmRlck9iamVjdCIsIlJlbmRlcmFibGVQb29sLmdldERpc3RhbmNlUmVuZGVyT2JqZWN0IiwiUmVuZGVyYWJsZVBvb2wuZGlzcG9zZUl0ZW0iLCJSZW5kZXJhYmxlUG9vbC5kaXNwb3NlIiwiUmVuZGVyYWJsZVBvb2wuZ2V0UG9vbCIsIlJlbmRlcmFibGVQb29sLmRpc3Bvc2VQb29sIl0sIm1hcHBpbmdzIjoiQUFXQSxJQUFPLGdCQUFnQixXQUFjLG9EQUFvRCxDQUFDLENBQUM7QUFDM0YsSUFBTyx5QkFBeUIsV0FBVyw2REFBNkQsQ0FBQyxDQUFDO0FBQzFHLElBQU8sa0JBQWtCLFdBQWEsc0RBQXNELENBQUMsQ0FBQztBQUM5RixJQUFPLGlCQUFpQixXQUFhLHFEQUFxRCxDQUFDLENBQUM7QUFDNUYsSUFBTyxvQkFBb0IsV0FBYSx3REFBd0QsQ0FBQyxDQUFDO0FBR2xHLEFBR0E7O0dBREc7SUFDRyxjQUFjO0lBYW5CQTs7OztPQUlHQTtJQUNIQSxTQWxCS0EsY0FBY0EsQ0FrQlBBLGVBQWdDQSxFQUFFQSxLQUFXQTtRQWJqREMsb0JBQWVBLEdBQVVBLElBQUlBLE1BQU1BLEVBQUVBLENBQUNBO1FBZTdDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLEdBQUdBLGVBQWVBLENBQUNBO1FBQ3hDQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxLQUFLQSxDQUFDQTtRQUVwQkEsSUFBSUEsQ0FBQ0EseUJBQXlCQSxHQUFHQSxJQUFJQSxnQkFBZ0JBLENB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LEFBQXdCLGlCQUFmLGNBQWMsQ0FBQyIsImZpbGUiOiJwb29sL1JlbmRlcmFibGVQb29sLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBJUmVuZGVyT2JqZWN0T3duZXJcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9JUmVuZGVyT2JqZWN0T3duZXJcIik7XG5pbXBvcnQgSVJlbmRlcmFibGVPd25lclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvSVJlbmRlcmFibGVPd25lclwiKTtcbmltcG9ydCBNYXRlcmlhbEJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL21hdGVyaWFscy9NYXRlcmlhbEJhc2VcIik7XG5pbXBvcnQgSVJlbmRlcmFibGVQb29sXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvcG9vbC9JUmVuZGVyYWJsZVBvb2xcIik7XG5pbXBvcnQgSVJlbmRlck9iamVjdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL3Bvb2wvSVJlbmRlck9iamVjdFwiKTtcblxuaW1wb3J0IFN0YWdlXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvU3RhZ2VcIik7XG5cbmltcG9ydCBSZW5kZXJlckJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2Jhc2UvUmVuZGVyZXJCYXNlXCIpO1xuaW1wb3J0IFJlbmRlcmFibGVCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcG9vbC9SZW5kZXJhYmxlQmFzZVwiKTtcbmltcG9ydCBJUmVuZGVyYWJsZUNsYXNzXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcG9vbC9JUmVuZGVyYWJsZUNsYXNzXCIpO1xuaW1wb3J0IFJlbmRlck9iamVjdFBvb2xcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9SZW5kZXJPYmplY3RQb29sXCIpO1xuaW1wb3J0IFJlbmRlckJhc2ljTWF0ZXJpYWxPYmplY3RcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9SZW5kZXJCYXNpY01hdGVyaWFsT2JqZWN0XCIpO1xuaW1wb3J0IFNreWJveFJlbmRlck9iamVjdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9Ta3lib3hSZW5kZXJPYmplY3RcIik7XG5pbXBvcnQgRGVwdGhSZW5kZXJPYmplY3RcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vRGVwdGhSZW5kZXJPYmplY3RcIik7XG5pbXBvcnQgRGlzdGFuY2VSZW5kZXJPYmplY3RcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vRGlzdGFuY2VSZW5kZXJPYmplY3RcIik7XG5pbXBvcnQgUmVuZGVyT2JqZWN0QmFzZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2NvbXBpbGF0aW9uL1JlbmRlck9iamVjdEJhc2VcIik7XG5cbi8qKlxuICogQGNsYXNzIGF3YXkucG9vbC5SZW5kZXJhYmxlUG9vbFxuICovXG5jbGFzcyBSZW5kZXJhYmxlUG9vbCBpbXBsZW1lbnRzIElSZW5kZXJhYmxlUG9vbFxue1xuXHRwcml2YXRlIHN0YXRpYyBfcG9vbHM6T2JqZWN0ID0gbmV3IE9iamVjdCgpO1xuXG5cdHByaXZhdGUgX3N0YWdlOlN0YWdlO1xuXHRwcml2YXRlIF9yZW5kZXJhYmxlUG9vbDpPYmplY3QgPSBuZXcgT2JqZWN0KCk7XG5cdHByaXZhdGUgX3JlbmRlcmFibGVDbGFzczpJUmVuZGVyYWJsZUNsYXNzO1xuXG5cdHByaXZhdGUgX21hdGVyaWFsUmVuZGVyT2JqZWN0UG9vbDpSZW5kZXJPYmplY3RQb29sO1xuXHRwcml2YXRlIF9za3lib3hSZW5kZXJPYmplY3RQb29sOlJlbmRlck9iamVjdFBvb2w7XG5cdHByaXZhdGUgX2RlcHRoUmVuZGVyT2JqZWN0UG9vbDpSZW5kZXJPYmplY3RQb29sO1xuXHRwcml2YXRlIF9kaXN0YW5jZVJlbmRlck9iamVjdFBvb2w6UmVuZGVyT2JqZWN0UG9vbDtcblxuXHQvKipcblx0ICogLy9UT0RPXG5cdCAqXG5cdCAqIEBwYXJhbSByZW5kZXJhYmxlQ2xhc3Ncblx0ICovXG5cdGNvbnN0cnVjdG9yKHJlbmRlcmFibGVDbGFzczpJUmVuZGVyYWJsZUNsYXNzLCBzdGFnZTpTdGFnZSlcblx0e1xuXHRcdHRoaXMuX3JlbmRlcmFibGVDbGFzcyA9IHJlbmRlcmFibGVDbGFzcztcblx0XHR0aGlzLl9zdGFnZSA9IHN0YWdlO1xuXG5cdFx0dGhpcy5fbWF0ZXJpYWxSZW5kZXJPYmplY3RQb29sID0gbmV3IFJlbmRlck9iamVjdFBvb2woUmVuZGVyQmFzaWNNYXRlcmlhbE9iamVjdCwgdGhpcy5fcmVuZGVyYWJsZUNsYXNzLCB0aGlzLl9zdGFnZSk7XG5cdFx0dGhpcy5fc2t5Ym94UmVuZGVyT2JqZWN0UG9vbCA9IG5ldyBSZW5kZXJPYmplY3RQb29sKFNreWJveFJlbmRlck9iamVjdCwgdGhpcy5fcmVuZGVyYWJsZUNsYXNzLCB0aGlzLl9zdGFnZSk7XG5cdFx0dGhpcy5fZGVwdGhSZW5kZXJPYmplY3RQb29sID0gbmV3IFJlbmRlck9iamVjdFBvb2woRGVwdGhSZW5kZXJPYmplY3QsIHRoaXMuX3JlbmRlcmFibGVDbGFzcywgdGhpcy5fc3RhZ2UpO1xuXHRcdHRoaXMuX2Rpc3RhbmNlUmVuZGVyT2JqZWN0UG9vbCA9IG5ldyBSZW5kZXJPYmplY3RQb29sKERpc3RhbmNlUmVuZGVyT2JqZWN0LCB0aGlzLl9yZW5kZXJhYmxlQ2xhc3MsIHRoaXMuX3N0YWdlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiAvL1RPRE9cblx0ICpcblx0ICogQHBhcmFtIHJlbmRlcmFibGVPd25lclxuXHQgKiBAcmV0dXJucyBJUmVuZGVyYWJsZVxuXHQgKi9cblx0cHVibGljIGdldEl0ZW0ocmVuZGVyYWJsZU93bmVyOklSZW5kZXJhYmxlT3duZXIpOlJlbmRlcmFibGVCYXNlXG5cdHtcblx0XHRyZXR1cm4gKHRoaXMuX3JlbmRlcmFibGVQb29sW3JlbmRlcmFibGVPd25lci5pZF0gfHwgKHRoaXMuX3JlbmRlcmFibGVQb29sW3JlbmRlcmFibGVPd25lci5pZF0gPSByZW5kZXJhYmxlT3duZXIuX2lBZGRSZW5kZXJhYmxlKG5ldyB0aGlzLl9yZW5kZXJhYmxlQ2xhc3ModGhpcywgcmVuZGVyYWJsZU93bmVyLCB0aGlzLl9zdGFnZSkpKSlcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0gbWF0ZXJpYWxcblx0ICogQHBhcmFtIHJlbmRlcmFibGVcblx0ICovXG5cdHB1YmxpYyBnZXRNYXRlcmlhbFJlbmRlck9iamVjdChyZW5kZXJPYmplY3RPd25lcjpJUmVuZGVyT2JqZWN0T3duZXIpOlJlbmRlck9iamVjdEJhc2Vcblx0e1xuXHRcdHJldHVybiB0aGlzLl9tYXRlcmlhbFJlbmRlck9iamVjdFBvb2wuZ2V0SXRlbShyZW5kZXJPYmplY3RPd25lcik7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIG1hdGVyaWFsXG5cdCAqIEBwYXJhbSByZW5kZXJhYmxlXG5cdCAqL1xuXHRwdWJsaWMgZ2V0U2t5Ym94UmVuZGVyT2JqZWN0KHJlbmRlck9iamVjdE93bmVyOklSZW5kZXJPYmplY3RPd25lcik6UmVuZGVyT2JqZWN0QmFzZVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3NreWJveFJlbmRlck9iamVjdFBvb2wuZ2V0SXRlbShyZW5kZXJPYmplY3RPd25lcik7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIG1hdGVyaWFsXG5cdCAqIEBwYXJhbSByZW5kZXJhYmxlXG5cdCAqL1xuXHRwdWJsaWMgZ2V0RGVwdGhSZW5kZXJPYmplY3QocmVuZGVyT2JqZWN0T3duZXI6SVJlbmRlck9iamVjdE93bmVyKTpSZW5kZXJPYmplY3RCYXNlXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZGVwdGhSZW5kZXJPYmplY3RQb29sLmdldEl0ZW0ocmVuZGVyT2JqZWN0T3duZXIpO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSBtYXRlcmlhbFxuXHQgKiBAcGFyYW0gcmVuZGVyYWJsZVxuXHQgKi9cblx0cHVibGljIGdldERpc3RhbmNlUmVuZGVyT2JqZWN0KHJlbmRlck9iamVjdE93bmVyOklSZW5kZXJPYmplY3RPd25lcik6UmVuZGVyT2JqZWN0QmFzZVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2Rpc3RhbmNlUmVuZGVyT2JqZWN0UG9vbC5nZXRJdGVtKHJlbmRlck9iamVjdE93bmVyKTtcblx0fVxuXG5cdC8qKlxuXHQgKiAvL1RPRE9cblx0ICpcblx0ICogQHBhcmFtIHJlbmRlcmFibGVPd25lclxuXHQgKi9cblx0cHVibGljIGRpc3Bvc2VJdGVtKHJlbmRlcmFibGVPd25lcjpJUmVuZGVyYWJsZU93bmVyKVxuXHR7XG5cdFx0cmVuZGVyYWJsZU93bmVyLl9pUmVtb3ZlUmVuZGVyYWJsZSh0aGlzLl9yZW5kZXJhYmxlUG9vbFtyZW5kZXJhYmxlT3duZXIuaWRdKTtcblxuXHRcdHRoaXMuX3JlbmRlcmFibGVQb29sW3JlbmRlcmFibGVPd25lci5pZF0gPSBudWxsO1xuXHR9XG5cblx0cHVibGljIGRpc3Bvc2UoKVxuXHR7XG5cdFx0Zm9yICh2YXIgaWQgaW4gdGhpcy5fcmVuZGVyYWJsZVBvb2wpXG5cdFx0XHR0aGlzLl9yZW5kZXJhYmxlUG9vbFtpZF0uZGlzcG9zZSgpO1xuXG5cdFx0UmVuZGVyYWJsZVBvb2wuZGlzcG9zZVBvb2wodGhpcy5fcmVuZGVyYWJsZUNsYXNzLCB0aGlzLl9zdGFnZSk7XG5cdH1cblxuXHQvKipcblx0ICogLy9UT0RPXG5cdCAqXG5cdCAqIEBwYXJhbSByZW5kZXJhYmxlQ2xhc3Ncblx0ICogQHJldHVybnMgUmVuZGVyYWJsZVBvb2xcblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgZ2V0UG9vbChyZW5kZXJhYmxlQ2xhc3M6SVJlbmRlcmFibGVDbGFzcywgc3RhZ2U6U3RhZ2UpOlJlbmRlcmFibGVQb29sXG5cdHtcblx0XHR2YXIgcG9vbHM6T2JqZWN0ID0gKFJlbmRlcmFibGVQb29sLl9wb29sc1tzdGFnZS5zdGFnZUluZGV4XSB8fCAoUmVuZGVyYWJsZVBvb2wuX3Bvb2xzW3N0YWdlLnN0YWdlSW5kZXhdID0gbmV3IE9iamVjdCgpKSk7XG5cblx0XHRyZXR1cm4gKHBvb2xzW3JlbmRlcmFibGVDbGFzcy5pZF0gfHwgKHBvb2xzW3JlbmRlcmFibGVDbGFzcy5pZF0gPSBuZXcgUmVuZGVyYWJsZVBvb2wocmVuZGVyYWJsZUNsYXNzLCBzdGFnZSkpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiAvL1RPRE9cblx0ICpcblx0ICogQHBhcmFtIHJlbmRlcmFibGVDbGFzc1xuXHQgKi9cblx0cHVibGljIHN0YXRpYyBkaXNwb3NlUG9vbChyZW5kZXJhYmxlQ2xhc3M6SVJlbmRlcmFibGVDbGFzcywgc3RhZ2U6U3RhZ2UpXG5cdHtcblx0XHR2YXIgcG9vbHM6T2JqZWN0ID0gUmVuZGVyYWJsZVBvb2wuX3Bvb2xzW3N0YWdlLnN0YWdlSW5kZXhdO1xuXG5cdFx0aWYgKHBvb2xzID09IHVuZGVmaW5lZClcblx0XHRcdHJldHVybjtcblxuXHRcdGlmIChwb29sc1tyZW5kZXJhYmxlQ2xhc3MuaWRdKVxuXHRcdFx0cG9vbHNbcmVuZGVyYWJsZUNsYXNzLmlkXSA9IHVuZGVmaW5lZDtcblx0fVxufVxuXG5leHBvcnQgPSBSZW5kZXJhYmxlUG9vbDsiXX0=