var ShaderRegisterCache = require("awayjs-renderergl/lib/compilation/ShaderRegisterCache");
var ShaderRegisterData = require("awayjs-renderergl/lib/compilation/ShaderRegisterData");
/**
 * ShaderCompilerBase is an abstract base class for shader compilers that use modular shader methods to assemble a
 * material. Concrete subclasses are used by the default materials.
 *
 * @see away.materials.ShadingMethodBase
 */
var ShaderCompilerBase = (function () {
    /**
     * Creates a new ShaderCompilerBase object.
     * @param profile The compatibility profile of the renderer.
     */
    function ShaderCompilerBase(renderableClass, renderPass, shaderObject) {
        this._pVertexCode = ''; // Changed to emtpy string- AwayTS
        this._pFragmentCode = ''; // Changed to emtpy string - AwayTS
        this._pPostAnimationFragmentCode = ''; // Changed to emtpy string - AwayTS
        this._pRenderableClass = renderableClass;
        this._pRenderPass = renderPass;
        this._pShaderObject = shaderObject;
        this._pSharedRegisters = new ShaderRegisterData();
        this._pRegisterCache = new ShaderRegisterCache(shaderObject.profile);
        this._pRegisterCache.vertexAttributesOffset = renderableClass.vertexAttributesOffset;
        this._pRegisterCache.reset();
    }
    /**
     * Compiles the code after all setup on the compiler has finished.
     */
    ShaderCompilerBase.prototype.compile = function () {
        this._pShaderObject.reset();
        this.pIncludeDependencies();
        this.pInitRegisterIndices();
        this.pCompileDependencies();
        //compile custom vertex & fragment codes
        this._pVertexCode += this._pRenderPass._iGetVertexCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
        this._pPostAnimationFragmentCode += this._pRenderPass._iGetFragmentCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
        //assign the final output color to the output register
        this._pPostAnimationFragmentCode += "mov " + this._pRegisterCache.fragmentOutputRegister + ", " + this._pSharedRegisters.shadedTarget + "\n";
        this._pRegisterCache.removeFragmentTempUsage(this._pSharedRegisters.shadedTarget);
        //initialise the required shader constants
        this._pShaderObject.initConstantData(this._pRegisterCache, this._pAnimatableAttributes, this._pAnimationTargetRegisters, this._uvSource, this._uvTarget);
        this._pRenderPass._iInitConstantData(this._pShaderObject);
    };
    ShaderCompilerBase.prototype.pIncludeDependencies = function () {
        this._pShaderObject._iIncludeDependencies();
        this._pShaderObject.outputsNormals = this._pRenderPass._pOutputsNormals(this._pShaderObject);
        this._pShaderObject.outputsTangentNormals = this._pShaderObject.outputsNormals && this._pRenderPass._pOutputsTangentNormals(this._pShaderObject);
        this._pShaderObject.usesTangentSpace = this._pShaderObject.outputsTangentNormals && this._pRenderPass._pUsesTangentSpace(this._pShaderObject);
        if (!this._pShaderObject.usesTangentSpace && this._pShaderObject.viewDirDependencies > 0)
            this._pShaderObject.globalPosDependencies++;
    };
    /**
     * Compile the code for the methods.
     */
    ShaderCompilerBase.prototype.pCompileDependencies = function () {
        this._pSharedRegisters.shadedTarget = this._pRegisterCache.getFreeFragmentVectorTemp();
        this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadedTarget, 1);
        //compile the world-space position if required
        if (this._pShaderObject.globalPosDependencies > 0)
            this.compileGlobalPositionCode();
        //compile the local-space position if required
        if (this._pShaderObject.localPosDependencies > 0)
            this.compileLocalPositionCode();
        //Calculate the (possibly animated) UV coordinates.
        if (this._pShaderObject.uvDependencies > 0)
            this.compileUVCode();
        if (this._pShaderObject.secondaryUVDependencies > 0)
            this.compileSecondaryUVCode();
        if (this._pShaderObject.normalDependencies > 0)
            this.compileNormalCode();
        if (this._pShaderObject.viewDirDependencies > 0)
            this.compileViewDirCode();
        //collect code from material
        this._pVertexCode += this._pRenderableClass._iGetVertexCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
        this._pFragmentCode += this._pRenderableClass._iGetFragmentCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
        //collect code from pass
        this._pVertexCode += this._pRenderPass._iGetPreLightingVertexCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
        this._pFragmentCode += this._pRenderPass._iGetPreLightingFragmentCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
    };
    ShaderCompilerBase.prototype.compileGlobalPositionCode = function () {
        this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.globalPositionVertex = this._pRegisterCache.getFreeVertexVectorTemp(), this._pShaderObject.globalPosDependencies);
        var sceneMatrixReg = this._pRegisterCache.getFreeVertexConstant();
        this._pRegisterCache.getFreeVertexConstant();
        this._pRegisterCache.getFreeVertexConstant();
        this._pRegisterCache.getFreeVertexConstant();
        this._pShaderObject.sceneMatrixIndex = sceneMatrixReg.index * 4;
        this._pVertexCode += "m44 " + this._pSharedRegisters.globalPositionVertex + ", " + this._pSharedRegisters.localPosition + ", " + sceneMatrixReg + "\n";
        if (this._pShaderObject.usesGlobalPosFragment) {
            this._pSharedRegisters.globalPositionVarying = this._pRegisterCache.getFreeVarying();
            this._pVertexCode += "mov " + this._pSharedRegisters.globalPositionVarying + ", " + this._pSharedRegisters.globalPositionVertex + "\n";
        }
    };
    ShaderCompilerBase.prototype.compileLocalPositionCode = function () {
        this._pSharedRegisters.localPositionVarying = this._pRegisterCache.getFreeVarying();
        this._pVertexCode += "mov " + this._pSharedRegisters.localPositionVarying + ", " + this._pSharedRegisters.localPosition + "\n";
    };
    /**
     * Calculate the (possibly animated) UV coordinates.
     */
    ShaderCompilerBase.prototype.compileUVCode = function () {
        var uvAttributeReg = this._pRegisterCache.getFreeVertexAttribute();
        this._pShaderObject.uvBufferIndex = uvAttributeReg.index;
        var varying = this._pRegisterCache.getFreeVarying();
        this._pSharedRegisters.uvVarying = varying;
        if (this._pShaderObject.usesUVTransform) {
            // a, b, 0, tx
            // c, d, 0, ty
            var uvTransform1 = this._pRegisterCache.getFreeVertexConstant();
            var uvTransform2 = this._pRegisterCache.getFreeVertexConstant();
            this._pShaderObject.uvTransformIndex = uvTransform1.index * 4;
            this._pVertexCode += "dp4 " + varying + ".x, " + uvAttributeReg + ", " + uvTransform1 + "\n" + "dp4 " + varying + ".y, " + uvAttributeReg + ", " + uvTransform2 + "\n" + "mov " + varying + ".zw, " + uvAttributeReg + ".zw \n";
        }
        else {
            this._pShaderObject.uvTransformIndex = -1;
            this._uvTarget = varying.toString();
            this._uvSource = uvAttributeReg.toString();
        }
    };
    /**
     * Provide the secondary UV coordinates.
     */
    ShaderCompilerBase.prototype.compileSecondaryUVCode = function () {
        var uvAttributeReg = this._pRegisterCache.getFreeVertexAttribute();
        this._pShaderObject.secondaryUVBufferIndex = uvAttributeReg.index;
        this._pSharedRegisters.secondaryUVVarying = this._pRegisterCache.getFreeVarying();
        this._pVertexCode += "mov " + this._pSharedRegisters.secondaryUVVarying + ", " + uvAttributeReg + "\n";
    };
    /**
     * Calculate the view direction.
     */
    ShaderCompilerBase.prototype.compileViewDirCode = function () {
        var cameraPositionReg = this._pRegisterCache.getFreeVertexConstant();
        this._pSharedRegisters.viewDirVarying = this._pRegisterCache.getFreeVarying();
        this._pSharedRegisters.viewDirFragment = this._pRegisterCache.getFreeFragmentVectorTemp();
        this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.viewDirFragment, this._pShaderObject.viewDirDependencies);
        this._pShaderObject.cameraPositionIndex = cameraPositionReg.index * 4;
        if (this._pShaderObject.usesTangentSpace) {
            var temp = this._pRegisterCache.getFreeVertexVectorTemp();
            this._pVertexCode += "sub " + temp + ", " + cameraPositionReg + ", " + this._pSharedRegisters.localPosition + "\n" + "m33 " + this._pSharedRegisters.viewDirVarying + ".xyz, " + temp + ", " + this._pSharedRegisters.animatedTangent + "\n" + "mov " + this._pSharedRegisters.viewDirVarying + ".w, " + this._pSharedRegisters.localPosition + ".w\n";
        }
        else {
            this._pVertexCode += "sub " + this._pSharedRegisters.viewDirVarying + ", " + cameraPositionReg + ", " + this._pSharedRegisters.globalPositionVertex + "\n";
            this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.globalPositionVertex);
        }
        //TODO is this required in all cases? (re: distancemappass)
        this._pFragmentCode += "nrm " + this._pSharedRegisters.viewDirFragment + ".xyz, " + this._pSharedRegisters.viewDirVarying + "\n" + "mov " + this._pSharedRegisters.viewDirFragment + ".w,   " + this._pSharedRegisters.viewDirVarying + ".w\n";
    };
    /**
     * Calculate the normal.
     */
    ShaderCompilerBase.prototype.compileNormalCode = function () {
        this._pSharedRegisters.normalFragment = this._pRegisterCache.getFreeFragmentVectorTemp();
        this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.normalFragment, this._pShaderObject.normalDependencies);
        //simple normal aquisition if no tangent space is being used
        if (this._pShaderObject.outputsNormals && !this._pShaderObject.outputsTangentNormals) {
            this._pVertexCode += this._pRenderPass._iGetNormalVertexCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
            this._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
            return;
        }
        var normalMatrix;
        if (!this._pShaderObject.outputsNormals || !this._pShaderObject.usesTangentSpace) {
            normalMatrix = new Array(3);
            normalMatrix[0] = this._pRegisterCache.getFreeVertexConstant();
            normalMatrix[1] = this._pRegisterCache.getFreeVertexConstant();
            normalMatrix[2] = this._pRegisterCache.getFreeVertexConstant();
            this._pRegisterCache.getFreeVertexConstant();
            this._pShaderObject.sceneNormalMatrixIndex = normalMatrix[0].index * 4;
            this._pSharedRegisters.normalVarying = this._pRegisterCache.getFreeVarying();
        }
        if (this._pShaderObject.outputsNormals) {
            if (this._pShaderObject.usesTangentSpace) {
                // normalize normal + tangent vector and generate (approximated) bitangent used in m33 operation for view
                this._pVertexCode += "nrm " + this._pSharedRegisters.animatedNormal + ".xyz, " + this._pSharedRegisters.animatedNormal + "\n" + "nrm " + this._pSharedRegisters.animatedTangent + ".xyz, " + this._pSharedRegisters.animatedTangent + "\n" + "crs " + this._pSharedRegisters.bitangent + ".xyz, " + this._pSharedRegisters.animatedNormal + ", " + this._pSharedRegisters.animatedTangent + "\n";
                this._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);
            }
            else {
                //Compiles the vertex shader code for tangent-space normal maps.
                this._pSharedRegisters.tangentVarying = this._pRegisterCache.getFreeVarying();
                this._pSharedRegisters.bitangentVarying = this._pRegisterCache.getFreeVarying();
                var temp = this._pRegisterCache.getFreeVertexVectorTemp();
                this._pVertexCode += "m33 " + temp + ".xyz, " + this._pSharedRegisters.animatedNormal + ", " + normalMatrix[0] + "\n" + "nrm " + this._pSharedRegisters.animatedNormal + ".xyz, " + temp + "\n" + "m33 " + temp + ".xyz, " + this._pSharedRegisters.animatedTangent + ", " + normalMatrix[0] + "\n" + "nrm " + this._pSharedRegisters.animatedTangent + ".xyz, " + temp + "\n" + "mov " + this._pSharedRegisters.tangentVarying + ".x, " + this._pSharedRegisters.animatedTangent + ".x  \n" + "mov " + this._pSharedRegisters.tangentVarying + ".z, " + this._pSharedRegisters.animatedNormal + ".x  \n" + "mov " + this._pSharedRegisters.tangentVarying + ".w, " + this._pSharedRegisters.normalInput + ".w  \n" + "mov " + this._pSharedRegisters.bitangentVarying + ".x, " + this._pSharedRegisters.animatedTangent + ".y  \n" + "mov " + this._pSharedRegisters.bitangentVarying + ".z, " + this._pSharedRegisters.animatedNormal + ".y  \n" + "mov " + this._pSharedRegisters.bitangentVarying + ".w, " + this._pSharedRegisters.normalInput + ".w  \n" + "mov " + this._pSharedRegisters.normalVarying + ".x, " + this._pSharedRegisters.animatedTangent + ".z  \n" + "mov " + this._pSharedRegisters.normalVarying + ".z, " + this._pSharedRegisters.animatedNormal + ".z  \n" + "mov " + this._pSharedRegisters.normalVarying + ".w, " + this._pSharedRegisters.normalInput + ".w  \n" + "crs " + temp + ".xyz, " + this._pSharedRegisters.animatedNormal + ", " + this._pSharedRegisters.animatedTangent + "\n" + "mov " + this._pSharedRegisters.tangentVarying + ".y, " + temp + ".x    \n" + "mov " + this._pSharedRegisters.bitangentVarying + ".y, " + temp + ".y  \n" + "mov " + this._pSharedRegisters.normalVarying + ".y, " + temp + ".z    \n";
                this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedTangent);
                //Compiles the fragment shader code for tangent-space normal maps.
                var t;
                var b;
                var n;
                t = this._pRegisterCache.getFreeFragmentVectorTemp();
                this._pRegisterCache.addFragmentTempUsages(t, 1);
                b = this._pRegisterCache.getFreeFragmentVectorTemp();
                this._pRegisterCache.addFragmentTempUsages(b, 1);
                n = this._pRegisterCache.getFreeFragmentVectorTemp();
                this._pRegisterCache.addFragmentTempUsages(n, 1);
                this._pFragmentCode += "nrm " + t + ".xyz, " + this._pSharedRegisters.tangentVarying + "\n" + "mov " + t + ".w, " + this._pSharedRegisters.tangentVarying + ".w	\n" + "nrm " + b + ".xyz, " + this._pSharedRegisters.bitangentVarying + "\n" + "nrm " + n + ".xyz, " + this._pSharedRegisters.normalVarying + "\n";
                //compile custom fragment code for normal calcs
                this._pFragmentCode += this._pRenderPass._iGetNormalFragmentCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters) + "m33 " + this._pSharedRegisters.normalFragment + ".xyz, " + this._pSharedRegisters.normalFragment + ", " + t + "\n" + "mov " + this._pSharedRegisters.normalFragment + ".w, " + this._pSharedRegisters.normalVarying + ".w\n";
                this._pRegisterCache.removeFragmentTempUsage(b);
                this._pRegisterCache.removeFragmentTempUsage(t);
                this._pRegisterCache.removeFragmentTempUsage(n);
            }
        }
        else {
            // no output, world space is enough
            this._pVertexCode += "m33 " + this._pSharedRegisters.normalVarying + ".xyz, " + this._pSharedRegisters.animatedNormal + ", " + normalMatrix[0] + "\n" + "mov " + this._pSharedRegisters.normalVarying + ".w, " + this._pSharedRegisters.animatedNormal + ".w\n";
            this._pFragmentCode += "nrm " + this._pSharedRegisters.normalFragment + ".xyz, " + this._pSharedRegisters.normalVarying + "\n" + "mov " + this._pSharedRegisters.normalFragment + ".w, " + this._pSharedRegisters.normalVarying + ".w\n";
            if (this._pShaderObject.tangentDependencies > 0) {
                this._pSharedRegisters.tangentVarying = this._pRegisterCache.getFreeVarying();
                this._pVertexCode += "m33 " + this._pSharedRegisters.tangentVarying + ".xyz, " + this._pSharedRegisters.animatedTangent + ", " + normalMatrix[0] + "\n" + "mov " + this._pSharedRegisters.tangentVarying + ".w, " + this._pSharedRegisters.animatedTangent + ".w\n";
            }
        }
        if (!this._pShaderObject.usesTangentSpace)
            this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedNormal);
    };
    /**
     * Reset all the indices to "unused".
     */
    ShaderCompilerBase.prototype.pInitRegisterIndices = function () {
        this._pShaderObject.pInitRegisterIndices();
        this._pAnimatableAttributes = new Array("va0");
        this._pAnimationTargetRegisters = new Array("vt0");
        this._pVertexCode = "";
        this._pFragmentCode = "";
        this._pPostAnimationFragmentCode = "";
        this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.localPosition = this._pRegisterCache.getFreeVertexVectorTemp(), 1);
        //create commonly shared constant registers
        this._pSharedRegisters.commons = this._pRegisterCache.getFreeFragmentConstant();
        this._pShaderObject.commonsDataIndex = this._pSharedRegisters.commons.index * 4;
        //Creates the registers to contain the tangent data.
        // need to be created FIRST and in this order (for when using tangent space)
        if (this._pShaderObject.tangentDependencies > 0 || this._pShaderObject.outputsNormals) {
            this._pSharedRegisters.tangentInput = this._pRegisterCache.getFreeVertexAttribute();
            this._pShaderObject.tangentBufferIndex = this._pSharedRegisters.tangentInput.index;
            this._pSharedRegisters.animatedTangent = this._pRegisterCache.getFreeVertexVectorTemp();
            this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedTangent, 1);
            if (this._pShaderObject.usesTangentSpace) {
                this._pSharedRegisters.bitangent = this._pRegisterCache.getFreeVertexVectorTemp();
                this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.bitangent, 1);
            }
            this._pAnimatableAttributes.push(this._pSharedRegisters.tangentInput.toString());
            this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedTangent.toString());
        }
        if (this._pShaderObject.normalDependencies > 0) {
            this._pSharedRegisters.normalInput = this._pRegisterCache.getFreeVertexAttribute();
            this._pShaderObject.normalBufferIndex = this._pSharedRegisters.normalInput.index;
            this._pSharedRegisters.animatedNormal = this._pRegisterCache.getFreeVertexVectorTemp();
            this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedNormal, 1);
            this._pAnimatableAttributes.push(this._pSharedRegisters.normalInput.toString());
            this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedNormal.toString());
        }
        if (this._pShaderObject.colorDependencies > 0) {
            this._pSharedRegisters.colorInput = this._pRegisterCache.getFreeVertexAttribute();
            this._pShaderObject.colorBufferIndex = this._pSharedRegisters.colorInput.index;
            this._pSharedRegisters.colorVarying = this._pRegisterCache.getFreeVarying();
            this._pVertexCode += "mov " + this._pSharedRegisters.colorVarying + ", " + this._pSharedRegisters.colorInput + "\n";
        }
    };
    /**
     * Disposes all resources used by the compiler.
     */
    ShaderCompilerBase.prototype.dispose = function () {
        this._pRegisterCache.dispose();
        this._pRegisterCache = null;
        this._pSharedRegisters = null;
    };
    Object.defineProperty(ShaderCompilerBase.prototype, "vertexCode", {
        /**
         * The generated vertex code.
         */
        get: function () {
            return this._pVertexCode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ShaderCompilerBase.prototype, "fragmentCode", {
        /**
         * The generated fragment code.
         */
        get: function () {
            return this._pFragmentCode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ShaderCompilerBase.prototype, "postAnimationFragmentCode", {
        /**
         * The generated fragment code.
         */
        get: function () {
            return this._pPostAnimationFragmentCode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ShaderCompilerBase.prototype, "shadedTarget", {
        /**
         * The register name containing the final shaded colour.
         */
        get: function () {
            return this._pSharedRegisters.shadedTarget.toString();
        },
        enumerable: true,
        configurable: true
    });
    return ShaderCompilerBase;
})();
module.exports = ShaderCompilerBase;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJDb21waWxlckJhc2UudHMiXSwibmFtZXMiOlsiU2hhZGVyQ29tcGlsZXJCYXNlIiwiU2hhZGVyQ29tcGlsZXJCYXNlLmNvbnN0cnVjdG9yIiwiU2hhZGVyQ29tcGlsZXJCYXNlLmNvbXBpbGUiLCJTaGFkZXJDb21waWxlckJhc2UucEluY2x1ZGVEZXBlbmRlbmNpZXMiLCJTaGFkZXJDb21waWxlckJhc2UucENvbXBpbGVEZXBlbmRlbmNpZXMiLCJTaGFkZXJDb21waWxlckJhc2UuY29tcGlsZUdsb2JhbFBvc2l0aW9uQ29kZSIsIlNoYWRlckNvbXBpbGVyQmFzZS5jb21waWxlTG9jYWxQb3NpdGlvbkNvZGUiLCJTaGFkZXJDb21waWxlckJhc2UuY29tcGlsZVVWQ29kZSIsIlNoYWRlckNvbXBpbGVyQmFzZS5jb21waWxlU2Vjb25kYXJ5VVZDb2RlIiwiU2hhZGVyQ29tcGlsZXJCYXNlLmNvbXBpbGVWaWV3RGlyQ29kZSIsIlNoYWRlckNvbXBpbGVyQmFzZS5jb21waWxlTm9ybWFsQ29kZSIsIlNoYWRlckNvbXBpbGVyQmFzZS5wSW5pdFJlZ2lzdGVySW5kaWNlcyIsIlNoYWRlckNvbXBpbGVyQmFzZS5kaXNwb3NlIiwiU2hhZGVyQ29tcGlsZXJCYXNlLnZlcnRleENvZGUiLCJTaGFkZXJDb21waWxlckJhc2UuZnJhZ21lbnRDb2RlIiwiU2hhZGVyQ29tcGlsZXJCYXNlLnBvc3RBbmltYXRpb25GcmFnbWVudENvZGUiLCJTaGFkZXJDb21waWxlckJhc2Uuc2hhZGVkVGFyZ2V0Il0sIm1hcHBpbmdzIjoiQUFHQSxJQUFPLG1CQUFtQixXQUFhLHVEQUF1RCxDQUFDLENBQUM7QUFDaEcsSUFBTyxrQkFBa0IsV0FBYSxzREFBc0QsQ0FBQyxDQUFDO0FBSzlGLEFBTUE7Ozs7O0dBREc7SUFDRyxrQkFBa0I7SUF3QnZCQTs7O09BR0dBO0lBQ0hBLFNBNUJLQSxrQkFBa0JBLENBNEJYQSxlQUFn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Q0EsWUFBWUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxHQUFHQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUNwSEEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxjQUFjQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxJQUFJQSxHQUN2RUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxHQUFHQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUNqR0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxlQUFlQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxJQUFJQSxHQUN4RUEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxjQUFjQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGVBQWVBLEdBQUdBLFFBQVFBLEdBQzNHQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGNBQWNBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsY0FBY0EsR0FBR0EsUUFBUUEsR0FDMUdBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsY0FBY0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxXQUFXQSxHQUFHQSxRQUFRQSxHQUN2R0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxnQkFBZ0JBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsZUFBZUEsR0FBR0EsUUFBUUEsR0FDN0dBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsZ0JBQWdCQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGNBQWNBLEdBQUdBLFFBQVFBLEdBQzVHQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGdCQUFnQkEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxXQUFXQSxHQUFHQSxRQUFRQSxHQUN6R0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxhQUFhQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGVBQWVBLEdBQUdBLFFBQVFBLEdBQzFHQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGFBQWFBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsY0FBY0EsR0FBR0EsUUFBUUEsR0FDekdBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsYUFBYUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxXQUFXQSxHQUFHQSxRQUFRQSxHQUN0R0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLEdBQ3ZIQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGNBQWNBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLFVBQVVBLEdBQzNFQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGdCQUFnQkEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FDM0VBLE1BQU1BLEdBQUdBLElBQUlB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QkEsQ0FBQ0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxHQUFHQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUNwSkEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxhQUFhQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGNBQWNBLEdBQUdBLE1BQU1BLENBQUNBO1lBRXpHQSxJQUFJQSxDQUFDQSxjQUFjQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGNBQWNBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsR0FDN0hBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsY0FBY0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxhQUFhQSxHQUFHQSxNQUFNQSxDQUFDQTtZQUV6R0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsbUJBQW1CQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDakRBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsY0FBY0EsRUFBRUEsQ0FBQ0E7Z0JBRTlFQSxJQUFJQSxDQUFDQSxZQUFZQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLGNBQWNBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsZUFBZUEsR0FBR0EsSUFBSUEsR0FBR0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsR0FDdEpBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsY0FBY0Es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QSxDQUFDQTs7O09BQUFkO0lBS0RBLHNCQUFXQSx5REFBeUJBO1FBSHBDQTs7V0FFR0E7YUFDSEE7WUFFQ2UsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsMkJBQTJCQSxDQUFDQTtRQUN6Q0EsQ0FBQ0E7OztPQUFBZjtJQUtEQSxzQkFBV0EsNENBQVlBO1FBSHZCQTs7V0FFR0E7YUFDSEE7WUFFQ2dCLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0E7UUFDdkRBLENBQUNBOzs7T0FBQWhCO0lBQ0ZBLHlCQUFDQTtBQUFEQSxDQWhhQSxBQWdhQ0EsSUFBQTtBQUVELEFBQTRCLGlCQUFuQixrQkFBa0IsQ0FBQyIsImZpbGUiOiJjb21waWxhdGlvbi9TaGFkZXJDb21waWxlckJhc2UuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFuaW1hdGlvblNldEJhc2VcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvQW5pbWF0aW9uU2V0QmFzZVwiKTtcclxuaW1wb3J0IFJlbmRlcmFibGVCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcG9vbC9SZW5kZXJhYmxlQmFzZVwiKTtcclxuaW1wb3J0IFNoYWRlck9iamVjdEJhc2VcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJPYmplY3RCYXNlXCIpO1xyXG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJDYWNoZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckNhY2hlXCIpO1xyXG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJEYXRhXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyRGF0YVwiKTtcclxuaW1wb3J0IFNoYWRlclJlZ2lzdGVyRWxlbWVudFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJFbGVtZW50XCIpO1xyXG5pbXBvcnQgSVJlbmRlclBhc3NCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcGFzc2VzL0lSZW5kZXJQYXNzQmFzZVwiKTtcclxuaW1wb3J0IElSZW5kZXJhYmxlQ2xhc3NcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wb29sL0lSZW5kZXJhYmxlQ2xhc3NcIik7XHJcblxyXG4vKipcclxuICogU2hhZGVyQ29tcGlsZXJCYXNlIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHNoYWRlciBjb21waWxlcnMgdGhhdCB1c2UgbW9kdWxhciBzaGFkZXIgbWV0aG9kcyB0byBhc3NlbWJsZSBhXHJcbiAqIG1hdGVyaWFsLiBDb25jcmV0ZSBzdWJjbGFzc2VzIGFyZSB1c2VkIGJ5IHRoZSBkZWZhdWx0IG1hdGVyaWFscy5cclxuICpcclxuICogQHNlZSBhd2F5Lm1hdGVyaWFscy5TaGFkaW5nTWV0aG9kQmFzZVxyXG4gKi9cclxuY2xhc3MgU2hhZGVyQ29tcGlsZXJCYXNlXHJcbntcclxuXHRwdWJsaWMgX3BTaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZTtcclxuXHRwdWJsaWMgX3BTaGFyZWRSZWdpc3RlcnM6U2hhZGVyUmVnaXN0ZXJEYXRhO1xyXG5cdHB1YmxpYyBfcFJlZ2lzdGVyQ2FjaGU6U2hhZGVyUmVnaXN0ZXJDYWNoZTtcclxuXHRwdWJsaWMgX3BSZW5kZXJhYmxlQ2xhc3M6SVJlbmRlcmFibGVDbGFzcztcclxuXHRwdWJsaWMgX3BSZW5kZXJQYXNzOklSZW5kZXJQYXNzQmFzZTtcclxuXHJcblx0cHVibGljIF9wVmVydGV4Q29kZTpzdHJpbmcgPSAnJzsgLy8gQ2hhbmdlZCB0byBlbXRweSBzdHJpbmctIEF3YXlUU1xyXG5cdHB1YmxpYyBfcEZyYWdtZW50Q29kZTpzdHJpbmcgPSAnJzsvLyBDaGFuZ2VkIHRvIGVtdHB5IHN0cmluZyAtIEF3YXlUU1xyXG5cdHB1YmxpYyBfcFBvc3RBbmltYXRpb25GcmFnbWVudENvZGU6c3RyaW5nID0gJyc7Ly8gQ2hhbmdlZCB0byBlbXRweSBzdHJpbmcgLSBBd2F5VFNcclxuXHJcblx0Ly9UaGUgYXR0cmlidXRlcyB0aGF0IG5lZWQgdG8gYmUgYW5pbWF0ZWQgYnkgYW5pbWF0b3JzLlxyXG5cdHB1YmxpYyBfcEFuaW1hdGFibGVBdHRyaWJ1dGVzOkFycmF5PHN0cmluZz47XHJcblxyXG5cdC8vVGhlIHRhcmdldCByZWdpc3RlcnMgZm9yIGFuaW1hdGVkIHByb3BlcnRpZXMsIHdyaXR0ZW4gdG8gYnkgdGhlIGFuaW1hdG9ycy5cclxuXHRwdWJsaWMgX3BBbmltYXRpb25UYXJnZXRSZWdpc3RlcnM6QXJyYXk8c3RyaW5nPjtcclxuXHJcblx0Ly9UaGUgdGFyZ2V0IHJlZ2lzdGVyIHRvIHBsYWNlIHRoZSBhbmltYXRlZCBVViBjb29yZGluYXRlLlxyXG5cdHByaXZhdGUgX3V2VGFyZ2V0OnN0cmluZztcclxuXHJcblx0Ly9UaGUgc291Y2UgcmVnaXN0ZXIgcHJvdmlkaW5nIHRoZSBVViBjb29yZGluYXRlIHRvIGFuaW1hdGUuXHJcblx0cHJpdmF0ZSBfdXZTb3VyY2U6c3RyaW5nO1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIGEgbmV3IFNoYWRlckNvbXBpbGVyQmFzZSBvYmplY3QuXHJcblx0ICogQHBhcmFtIHByb2ZpbGUgVGhlIGNvbXBhdGliaWxpdHkgcHJvZmlsZSBvZiB0aGUgcmVuZGVyZXIuXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IocmVuZGVyYWJsZUNsYXNzOklSZW5kZXJhYmxlQ2xhc3MsIHJlbmRlclBhc3M6SVJlbmRlclBhc3NCYXNlLCBzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSlcclxuXHR7XHJcblx0XHR0aGlzLl9wUmVuZGVyYWJsZUNsYXNzID0gcmVuZGVyYWJsZUNsYXNzO1xyXG5cdFx0dGhpcy5fcFJlbmRlclBhc3MgPSByZW5kZXJQYXNzO1xyXG5cdFx0dGhpcy5fcFNoYWRlck9iamVjdCA9IHNoYWRlck9iamVjdDtcclxuXHJcblx0XHR0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzID0gbmV3IFNoYWRlclJlZ2lzdGVyRGF0YSgpO1xyXG5cclxuXHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlID0gbmV3IFNoYWRlclJlZ2lzdGVyQ2FjaGUoc2hhZGVyT2JqZWN0LnByb2ZpbGUpO1xyXG5cdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUudmVydGV4QXR0cmlidXRlc09mZnNldCA9IHJlbmRlcmFibGVDbGFzcy52ZXJ0ZXhBdHRyaWJ1dGVzT2Zmc2V0O1xyXG5cdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUucmVzZXQoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbXBpbGVzIHRoZSBjb2RlIGFmdGVyIGFsbCBzZXR1cCBvbiB0aGUgY29tcGlsZXIgaGFzIGZpbmlzaGVkLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBjb21waWxlKClcclxuXHR7XHJcblx0XHR0aGlzLl9wU2hhZGVyT2JqZWN0LnJlc2V0KCk7XHJcblxyXG5cdFx0dGhpcy5wSW5jbHVkZURlcGVuZGVuY2llcygpO1xyXG5cclxuXHRcdHRoaXMucEluaXRSZWdpc3RlckluZGljZXMoKTtcclxuXHJcblx0XHR0aGlzLnBDb21waWxlRGVwZW5kZW5jaWVzKCk7XHJcblxyXG5cdFx0Ly9jb21waWxlIGN1c3RvbSB2ZXJ0ZXggJiBmcmFnbWVudCBjb2Rlc1xyXG5cdFx0dGhpcy5fcFZlcnRleENvZGUgKz0gdGhpcy5fcFJlbmRlclBhc3MuX2lHZXRWZXJ0ZXhDb2RlKHRoaXMuX3BTaGFkZXJPYmplY3QsIHRoaXMuX3BSZWdpc3RlckNhY2hlLCB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzKTtcclxuXHRcdHRoaXMuX3BQb3N0QW5pbWF0aW9uRnJhZ21lbnRDb2RlICs9IHRoaXMuX3BSZW5kZXJQYXNzLl9pR2V0RnJhZ21lbnRDb2RlKHRoaXMuX3BTaGFkZXJPYmplY3QsIHRoaXMuX3BSZWdpc3RlckNhY2hlLCB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzKTtcclxuXHJcblx0XHQvL2Fzc2lnbiB0aGUgZmluYWwgb3V0cHV0IGNvbG9yIHRvIHRoZSBvdXRwdXQgcmVnaXN0ZXJcclxuXHRcdHRoaXMuX3BQb3N0QW5pbWF0aW9uRnJhZ21lbnRDb2RlICs9IFwibW92IFwiICsgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZnJhZ21lbnRPdXRwdXRSZWdpc3RlciArIFwiLCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuc2hhZGVkVGFyZ2V0ICsgXCJcXG5cIjtcclxuXHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLnJlbW92ZUZyYWdtZW50VGVtcFVzYWdlKHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuc2hhZGVkVGFyZ2V0KTtcclxuXHJcblx0XHQvL2luaXRpYWxpc2UgdGhlIHJlcXVpcmVkIHNoYWRlciBjb25zdGFudHNcclxuXHRcdHRoaXMuX3BTaGFkZXJPYmplY3QuaW5pdENvbnN0YW50RGF0YSh0aGlzLl9wUmVnaXN0ZXJDYWNoZSwgdGhpcy5fcEFuaW1hdGFibGVBdHRyaWJ1dGVzLCB0aGlzLl9wQW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzLCB0aGlzLl91dlNvdXJjZSwgdGhpcy5fdXZUYXJnZXQpO1xyXG5cdFx0dGhpcy5fcFJlbmRlclBhc3MuX2lJbml0Q29uc3RhbnREYXRhKHRoaXMuX3BTaGFkZXJPYmplY3QpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHBJbmNsdWRlRGVwZW5kZW5jaWVzKClcclxuXHR7XHJcblx0XHR0aGlzLl9wU2hhZGVyT2JqZWN0Ll9pSW5jbHVkZURlcGVuZGVuY2llcygpO1xyXG5cclxuXHRcdHRoaXMuX3BTaGFkZXJPYmplY3Qub3V0cHV0c05vcm1hbHMgPSB0aGlzLl9wUmVuZGVyUGFzcy5fcE91dHB1dHNOb3JtYWxzKHRoaXMuX3BTaGFkZXJPYmplY3QpO1xyXG5cdFx0dGhpcy5fcFNoYWRlck9iamVjdC5vdXRwdXRzVGFuZ2VudE5vcm1hbHMgPSB0aGlzLl9wU2hhZGVyT2JqZWN0Lm91dHB1dHNOb3JtYWxzICYmIHRoaXMuX3BSZW5kZXJQYXNzLl9wT3V0cHV0c1RhbmdlbnROb3JtYWxzKHRoaXMuX3BTaGFkZXJPYmplY3QpO1xyXG5cdFx0dGhpcy5fcFNoYWRlck9iamVjdC51c2VzVGFuZ2VudFNwYWNlID0gdGhpcy5fcFNoYWRlck9iamVjdC5vdXRwdXRzVGFuZ2VudE5vcm1hbHMgJiYgdGhpcy5fcFJlbmRlclBhc3MuX3BVc2VzVGFuZ2VudFNwYWNlKHRoaXMuX3BTaGFkZXJPYmplY3QpO1xyXG5cclxuXHRcdGlmICghdGhpcy5fcFNoYWRlck9iamVjdC51c2VzVGFuZ2VudFNwYWNlICYmIHRoaXMuX3BTaGFkZXJPYmplY3Qudmlld0RpckRlcGVuZGVuY2llcyA+IDApXHJcblx0XHRcdHRoaXMuX3BTaGFkZXJPYmplY3QuZ2xvYmFsUG9zRGVwZW5kZW5jaWVzKys7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb21waWxlIHRoZSBjb2RlIGZvciB0aGUgbWV0aG9kcy5cclxuXHQgKi9cclxuXHRwdWJsaWMgcENvbXBpbGVEZXBlbmRlbmNpZXMoKVxyXG5cdHtcclxuXHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuc2hhZGVkVGFyZ2V0ID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xyXG5cdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUuYWRkRnJhZ21lbnRUZW1wVXNhZ2VzKHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuc2hhZGVkVGFyZ2V0LCAxKTtcclxuXHJcblx0XHQvL2NvbXBpbGUgdGhlIHdvcmxkLXNwYWNlIHBvc2l0aW9uIGlmIHJlcXVpcmVkXHJcblx0XHRpZiAodGhpcy5fcFNoYWRlck9iamVjdC5nbG9iYWxQb3NEZXBlbmRlbmNpZXMgPiAwKVxyXG5cdFx0XHR0aGlzLmNvbXBpbGVHbG9iYWxQb3NpdGlvbkNvZGUoKTtcclxuXHJcbiAgICAgICAgLy9jb21waWxlIHRoZSBsb2NhbC1zcGFjZSBwb3NpdGlvbiBpZiByZXF1aXJlZFxyXG4gICAgICAgIGlmICh0aGlzLl9wU2hhZGVyT2JqZWN0LmxvY2FsUG9zRGVwZW5kZW5jaWVzID4gMClcclxuICAgICAgICAgICAgdGhpcy5jb21waWxlTG9jYWxQb3NpdGlvbkNvZGUoKTtcclxuXHJcblx0XHQvL0NhbGN1bGF0ZSB0aGUgKHBvc3NpYmx5IGFuaW1hdGVkKSBVViBjb29yZGluYXRlcy5cclxuXHRcdGlmICh0aGlzLl9wU2hhZGVyT2JqZWN0LnV2RGVwZW5kZW5jaWVzID4gMClcclxuXHRcdFx0dGhpcy5jb21waWxlVVZDb2RlKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3BTaGFkZXJPYmplY3Quc2Vjb25kYXJ5VVZEZXBlbmRlbmNpZXMgPiAwKVxyXG5cdFx0XHR0aGlzLmNvbXBpbGVTZWNvbmRhcnlVVkNvZGUoKTtcclxuXHJcblx0XHRpZiAodGhpcy5fcFNoYWRlck9iamVjdC5ub3JtYWxEZXBlbmRlbmNpZXMgPiAwKVxyXG5cdFx0XHR0aGlzLmNvbXBpbGVOb3JtYWxDb2RlKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3BTaGFkZXJPYmplY3Qudmlld0RpckRlcGVuZGVuY2llcyA+IDApXHJcblx0XHRcdHRoaXMuY29tcGlsZVZpZXdEaXJDb2RlKCk7XHJcblxyXG5cdFx0Ly9jb2xsZWN0IGNvZGUgZnJvbSBtYXRlcmlhbFxyXG5cdFx0dGhpcy5fcFZlcnRleENvZGUgKz0gdGhpcy5fcFJlbmRlcmFibGVDbGFzcy5faUdldFZlcnRleENvZGUodGhpcy5fcFNoYWRlck9iamVjdCwgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUsIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMpO1xyXG5cdFx0dGhpcy5fcEZyYWdtZW50Q29kZSArPSB0aGlzLl9wUmVuZGVyYWJsZUNsYXNzLl9pR2V0RnJhZ21lbnRDb2RlKHRoaXMuX3BTaGFkZXJPYmplY3QsIHRoaXMuX3BSZWdpc3RlckNhY2hlLCB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzKTtcclxuXHJcblx0XHQvL2NvbGxlY3QgY29kZSBmcm9tIHBhc3NcclxuXHRcdHRoaXMuX3BWZXJ0ZXhDb2RlICs9IHRoaXMuX3BSZW5kZXJQYXNzLl9pR2V0UHJlTGlnaHRpbmdWZXJ0ZXhDb2RlKHRoaXMuX3BTaGFkZXJPYmplY3QsIHRoaXMuX3BSZWdpc3RlckNhY2hlLCB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzKTtcclxuXHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gdGhpcy5fcFJlbmRlclBhc3MuX2lHZXRQcmVMaWdodGluZ0ZyYWdtZW50Q29kZSh0aGlzLl9wU2hhZGVyT2JqZWN0LCB0aGlzLl9wUmVnaXN0ZXJDYWNoZSwgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNvbXBpbGVHbG9iYWxQb3NpdGlvbkNvZGUoKVxyXG5cdHtcclxuXHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5nbG9iYWxQb3NpdGlvblZlcnRleCA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCksIHRoaXMuX3BTaGFkZXJPYmplY3QuZ2xvYmFsUG9zRGVwZW5kZW5jaWVzKTtcclxuXHJcblx0XHR2YXIgc2NlbmVNYXRyaXhSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZlcnRleENvbnN0YW50KCk7XHJcblx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4Q29uc3RhbnQoKTtcclxuXHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWZXJ0ZXhDb25zdGFudCgpO1xyXG5cdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZlcnRleENvbnN0YW50KCk7XHJcblxyXG5cdFx0dGhpcy5fcFNoYWRlck9iamVjdC5zY2VuZU1hdHJpeEluZGV4ID0gc2NlbmVNYXRyaXhSZWcuaW5kZXgqNDtcclxuXHJcblx0XHR0aGlzLl9wVmVydGV4Q29kZSArPSBcIm00NCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuZ2xvYmFsUG9zaXRpb25WZXJ0ZXggKyBcIiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmxvY2FsUG9zaXRpb24gKyBcIiwgXCIgKyBzY2VuZU1hdHJpeFJlZyArIFwiXFxuXCI7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3BTaGFkZXJPYmplY3QudXNlc0dsb2JhbFBvc0ZyYWdtZW50KSB7XHJcblx0XHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuZ2xvYmFsUG9zaXRpb25WYXJ5aW5nID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZhcnlpbmcoKTtcclxuXHRcdFx0dGhpcy5fcFZlcnRleENvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmdsb2JhbFBvc2l0aW9uVmFyeWluZyArIFwiLCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuZ2xvYmFsUG9zaXRpb25WZXJ0ZXggKyBcIlxcblwiO1xyXG5cdFx0fVxyXG5cdH1cclxuICAgIHByaXZhdGUgY29tcGlsZUxvY2FsUG9zaXRpb25Db2RlKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmxvY2FsUG9zaXRpb25WYXJ5aW5nID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZhcnlpbmcoKTtcclxuICAgICAgICB0aGlzLl9wVmVydGV4Q29kZSArPSBcIm1vdiBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMubG9jYWxQb3NpdGlvblZhcnlpbmcgKyBcIiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmxvY2FsUG9zaXRpb24gKyBcIlxcblwiO1xyXG4gICAgfVxyXG5cdC8qKlxyXG5cdCAqIENhbGN1bGF0ZSB0aGUgKHBvc3NpYmx5IGFuaW1hdGVkKSBVViBjb29yZGluYXRlcy5cclxuXHQgKi9cclxuXHRwcml2YXRlIGNvbXBpbGVVVkNvZGUoKVxyXG5cdHtcclxuXHRcdHZhciB1dkF0dHJpYnV0ZVJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4QXR0cmlidXRlKCk7XHJcblx0XHR0aGlzLl9wU2hhZGVyT2JqZWN0LnV2QnVmZmVySW5kZXggPSB1dkF0dHJpYnV0ZVJlZy5pbmRleDtcclxuXHJcblx0XHR2YXIgdmFyeWluZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmFyeWluZygpO1xyXG5cclxuXHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMudXZWYXJ5aW5nID0gdmFyeWluZztcclxuXHJcblx0XHRpZiAodGhpcy5fcFNoYWRlck9iamVjdC51c2VzVVZUcmFuc2Zvcm0pIHtcclxuXHRcdFx0Ly8gYSwgYiwgMCwgdHhcclxuXHRcdFx0Ly8gYywgZCwgMCwgdHlcclxuXHRcdFx0dmFyIHV2VHJhbnNmb3JtMTpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4Q29uc3RhbnQoKTtcclxuXHRcdFx0dmFyIHV2VHJhbnNmb3JtMjpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4Q29uc3RhbnQoKTtcclxuXHRcdFx0dGhpcy5fcFNoYWRlck9iamVjdC51dlRyYW5zZm9ybUluZGV4ID0gdXZUcmFuc2Zvcm0xLmluZGV4KjQ7XHJcblxyXG5cdFx0XHR0aGlzLl9wVmVydGV4Q29kZSArPSBcImRwNCBcIiArIHZhcnlpbmcgKyBcIi54LCBcIiArIHV2QXR0cmlidXRlUmVnICsgXCIsIFwiICsgdXZUcmFuc2Zvcm0xICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XHRcdFx0XHQgXCJkcDQgXCIgKyB2YXJ5aW5nICsgXCIueSwgXCIgKyB1dkF0dHJpYnV0ZVJlZyArIFwiLCBcIiArIHV2VHJhbnNmb3JtMiArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFx0XHRcdFx0IFwibW92IFwiICsgdmFyeWluZyArIFwiLnp3LCBcIiArIHV2QXR0cmlidXRlUmVnICsgXCIuencgXFxuXCI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9wU2hhZGVyT2JqZWN0LnV2VHJhbnNmb3JtSW5kZXggPSAtMTtcclxuXHRcdFx0dGhpcy5fdXZUYXJnZXQgPSB2YXJ5aW5nLnRvU3RyaW5nKCk7XHJcblx0XHRcdHRoaXMuX3V2U291cmNlID0gdXZBdHRyaWJ1dGVSZWcudG9TdHJpbmcoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFByb3ZpZGUgdGhlIHNlY29uZGFyeSBVViBjb29yZGluYXRlcy5cclxuXHQgKi9cclxuXHRwcml2YXRlIGNvbXBpbGVTZWNvbmRhcnlVVkNvZGUoKVxyXG5cdHtcclxuXHRcdHZhciB1dkF0dHJpYnV0ZVJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4QXR0cmlidXRlKCk7XHJcblx0XHR0aGlzLl9wU2hhZGVyT2JqZWN0LnNlY29uZGFyeVVWQnVmZmVySW5kZXggPSB1dkF0dHJpYnV0ZVJlZy5pbmRleDtcclxuXHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuc2Vjb25kYXJ5VVZWYXJ5aW5nID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZhcnlpbmcoKTtcclxuXHRcdHRoaXMuX3BWZXJ0ZXhDb2RlICs9IFwibW92IFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5zZWNvbmRhcnlVVlZhcnlpbmcgKyBcIiwgXCIgKyB1dkF0dHJpYnV0ZVJlZyArIFwiXFxuXCI7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxjdWxhdGUgdGhlIHZpZXcgZGlyZWN0aW9uLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBjb21waWxlVmlld0RpckNvZGUoKVxyXG5cdHtcclxuXHRcdHZhciBjYW1lcmFQb3NpdGlvblJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4Q29uc3RhbnQoKTtcclxuXHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMudmlld0RpclZhcnlpbmcgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmFyeWluZygpO1xyXG5cdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy52aWV3RGlyRnJhZ21lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XHJcblx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXModGhpcy5fcFNoYXJlZFJlZ2lzdGVycy52aWV3RGlyRnJhZ21lbnQsIHRoaXMuX3BTaGFkZXJPYmplY3Qudmlld0RpckRlcGVuZGVuY2llcyk7XHJcblxyXG5cdFx0dGhpcy5fcFNoYWRlck9iamVjdC5jYW1lcmFQb3NpdGlvbkluZGV4ID0gY2FtZXJhUG9zaXRpb25SZWcuaW5kZXgqNDtcclxuXHJcblx0XHRpZiAodGhpcy5fcFNoYWRlck9iamVjdC51c2VzVGFuZ2VudFNwYWNlKSB7XHJcblx0XHRcdHZhciB0ZW1wOlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XHJcblx0XHRcdHRoaXMuX3BWZXJ0ZXhDb2RlICs9IFwic3ViIFwiICsgdGVtcCArIFwiLCBcIiArIGNhbWVyYVBvc2l0aW9uUmVnICsgXCIsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5sb2NhbFBvc2l0aW9uICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XCJtMzMgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLnZpZXdEaXJWYXJ5aW5nICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFwibW92IFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy52aWV3RGlyVmFyeWluZyArIFwiLncsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5sb2NhbFBvc2l0aW9uICsgXCIud1xcblwiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fcFZlcnRleENvZGUgKz0gXCJzdWIgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLnZpZXdEaXJWYXJ5aW5nICsgXCIsIFwiICsgY2FtZXJhUG9zaXRpb25SZWcgKyBcIiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmdsb2JhbFBvc2l0aW9uVmVydGV4ICsgXCJcXG5cIjtcclxuXHRcdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUucmVtb3ZlVmVydGV4VGVtcFVzYWdlKHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuZ2xvYmFsUG9zaXRpb25WZXJ0ZXgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vVE9ETyBpcyB0aGlzIHJlcXVpcmVkIGluIGFsbCBjYXNlcz8gKHJlOiBkaXN0YW5jZW1hcHBhc3MpXHJcblx0XHR0aGlzLl9wRnJhZ21lbnRDb2RlICs9IFwibnJtIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy52aWV3RGlyRnJhZ21lbnQgKyBcIi54eXosIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy52aWV3RGlyVmFyeWluZyArIFwiXFxuXCIgK1xyXG5cdFx0XHRcIm1vdiBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMudmlld0RpckZyYWdtZW50ICsgXCIudywgICBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMudmlld0RpclZhcnlpbmcgKyBcIi53XFxuXCI7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxjdWxhdGUgdGhlIG5vcm1hbC5cclxuXHQgKi9cclxuXHRwdWJsaWMgY29tcGlsZU5vcm1hbENvZGUoKVxyXG5cdHtcclxuXHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMubm9ybWFsRnJhZ21lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XHJcblx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXModGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5ub3JtYWxGcmFnbWVudCwgdGhpcy5fcFNoYWRlck9iamVjdC5ub3JtYWxEZXBlbmRlbmNpZXMpO1xyXG5cclxuXHRcdC8vc2ltcGxlIG5vcm1hbCBhcXVpc2l0aW9uIGlmIG5vIHRhbmdlbnQgc3BhY2UgaXMgYmVpbmcgdXNlZFxyXG5cdFx0aWYgKHRoaXMuX3BTaGFkZXJPYmplY3Qub3V0cHV0c05vcm1hbHMgJiYgIXRoaXMuX3BTaGFkZXJPYmplY3Qub3V0cHV0c1RhbmdlbnROb3JtYWxzKSB7XHJcblx0XHRcdHRoaXMuX3BWZXJ0ZXhDb2RlICs9IHRoaXMuX3BSZW5kZXJQYXNzLl9pR2V0Tm9ybWFsVmVydGV4Q29kZSh0aGlzLl9wU2hhZGVyT2JqZWN0LCB0aGlzLl9wUmVnaXN0ZXJDYWNoZSwgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycyk7XHJcblx0XHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gdGhpcy5fcFJlbmRlclBhc3MuX2lHZXROb3JtYWxGcmFnbWVudENvZGUodGhpcy5fcFNoYWRlck9iamVjdCwgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUsIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMpO1xyXG5cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBub3JtYWxNYXRyaXg6QXJyYXk8U2hhZGVyUmVnaXN0ZXJFbGVtZW50PjtcclxuXHJcblx0XHRpZiAoIXRoaXMuX3BTaGFkZXJPYmplY3Qub3V0cHV0c05vcm1hbHMgfHwgIXRoaXMuX3BTaGFkZXJPYmplY3QudXNlc1RhbmdlbnRTcGFjZSkge1xyXG5cdFx0XHRub3JtYWxNYXRyaXggPSBuZXcgQXJyYXk8U2hhZGVyUmVnaXN0ZXJFbGVtZW50PigzKTtcclxuXHRcdFx0bm9ybWFsTWF0cml4WzBdID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZlcnRleENvbnN0YW50KCk7XHJcblx0XHRcdG5vcm1hbE1hdHJpeFsxXSA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWZXJ0ZXhDb25zdGFudCgpO1xyXG5cdFx0XHRub3JtYWxNYXRyaXhbMl0gPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4Q29uc3RhbnQoKTtcclxuXHJcblx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWZXJ0ZXhDb25zdGFudCgpO1xyXG5cclxuXHRcdFx0dGhpcy5fcFNoYWRlck9iamVjdC5zY2VuZU5vcm1hbE1hdHJpeEluZGV4ID0gbm9ybWFsTWF0cml4WzBdLmluZGV4KjQ7XHJcblxyXG5cdFx0XHR0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbFZhcnlpbmcgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmFyeWluZygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLl9wU2hhZGVyT2JqZWN0Lm91dHB1dHNOb3JtYWxzKSB7XHJcblx0XHRcdGlmICh0aGlzLl9wU2hhZGVyT2JqZWN0LnVzZXNUYW5nZW50U3BhY2UpIHtcclxuXHRcdFx0XHQvLyBub3JtYWxpemUgbm9ybWFsICsgdGFuZ2VudCB2ZWN0b3IgYW5kIGdlbmVyYXRlIChhcHByb3hpbWF0ZWQpIGJpdGFuZ2VudCB1c2VkIGluIG0zMyBvcGVyYXRpb24gZm9yIHZpZXdcclxuXHRcdFx0XHR0aGlzLl9wVmVydGV4Q29kZSArPSBcIm5ybSBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYW5pbWF0ZWROb3JtYWwgKyBcIi54eXosIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZE5vcm1hbCArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJucm0gXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJjcnMgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmJpdGFuZ2VudCArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkTm9ybWFsICsgXCIsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZFRhbmdlbnQgKyBcIlxcblwiO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9wRnJhZ21lbnRDb2RlICs9IHRoaXMuX3BSZW5kZXJQYXNzLl9pR2V0Tm9ybWFsRnJhZ21lbnRDb2RlKHRoaXMuX3BTaGFkZXJPYmplY3QsIHRoaXMuX3BSZWdpc3RlckNhY2hlLCB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvL0NvbXBpbGVzIHRoZSB2ZXJ0ZXggc2hhZGVyIGNvZGUgZm9yIHRhbmdlbnQtc3BhY2Ugbm9ybWFsIG1hcHMuXHJcblx0XHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy50YW5nZW50VmFyeWluZyA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWYXJ5aW5nKCk7XHJcblx0XHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5iaXRhbmdlbnRWYXJ5aW5nID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZhcnlpbmcoKTtcclxuXHRcdFx0XHR2YXIgdGVtcDpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4VmVjdG9yVGVtcCgpO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9wVmVydGV4Q29kZSArPSBcIm0zMyBcIiArIHRlbXAgKyBcIi54eXosIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZE5vcm1hbCArIFwiLCBcIiArIG5vcm1hbE1hdHJpeFswXSArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJucm0gXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkTm9ybWFsICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIlxcblwiICtcclxuXHRcdFx0XHRcdFwibTMzIFwiICsgdGVtcCArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiLCBcIiArIG5vcm1hbE1hdHJpeFswXSArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJucm0gXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiLnh5eiwgXCIgKyB0ZW1wICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XHRcIm1vdiBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMudGFuZ2VudFZhcnlpbmcgKyBcIi54LCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYW5pbWF0ZWRUYW5nZW50ICsgXCIueCAgXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLnRhbmdlbnRWYXJ5aW5nICsgXCIueiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkTm9ybWFsICsgXCIueCAgXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLnRhbmdlbnRWYXJ5aW5nICsgXCIudywgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbElucHV0ICsgXCIudyAgXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmJpdGFuZ2VudFZhcnlpbmcgKyBcIi54LCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYW5pbWF0ZWRUYW5nZW50ICsgXCIueSAgXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmJpdGFuZ2VudFZhcnlpbmcgKyBcIi56LCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYW5pbWF0ZWROb3JtYWwgKyBcIi55ICBcXG5cIiArXHJcblx0XHRcdFx0XHRcIm1vdiBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYml0YW5nZW50VmFyeWluZyArIFwiLncsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5ub3JtYWxJbnB1dCArIFwiLncgIFxcblwiICtcclxuXHRcdFx0XHRcdFwibW92IFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5ub3JtYWxWYXJ5aW5nICsgXCIueCwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiLnogIFxcblwiICtcclxuXHRcdFx0XHRcdFwibW92IFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5ub3JtYWxWYXJ5aW5nICsgXCIueiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkTm9ybWFsICsgXCIueiAgXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbFZhcnlpbmcgKyBcIi53LCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMubm9ybWFsSW5wdXQgKyBcIi53ICBcXG5cIiArXHJcblx0XHRcdFx0XHRcImNycyBcIiArIHRlbXAgKyBcIi54eXosIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZE5vcm1hbCArIFwiLCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYW5pbWF0ZWRUYW5nZW50ICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XHRcIm1vdiBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMudGFuZ2VudFZhcnlpbmcgKyBcIi55LCBcIiArIHRlbXAgKyBcIi54ICAgIFxcblwiICtcclxuXHRcdFx0XHRcdFwibW92IFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5iaXRhbmdlbnRWYXJ5aW5nICsgXCIueSwgXCIgKyB0ZW1wICsgXCIueSAgXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbFZhcnlpbmcgKyBcIi55LCBcIiArIHRlbXAgKyBcIi56ICAgIFxcblwiO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5yZW1vdmVWZXJ0ZXhUZW1wVXNhZ2UodGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZFRhbmdlbnQpO1xyXG5cclxuXHRcdFx0XHQvL0NvbXBpbGVzIHRoZSBmcmFnbWVudCBzaGFkZXIgY29kZSBmb3IgdGFuZ2VudC1zcGFjZSBub3JtYWwgbWFwcy5cclxuXHRcdFx0XHR2YXIgdDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0XHRcdFx0dmFyIGI6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cdFx0XHRcdHZhciBuOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHJcblx0XHRcdFx0dCA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVGcmFnbWVudFZlY3RvclRlbXAoKTtcclxuXHRcdFx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXModCwgMSk7XHJcblx0XHRcdFx0YiA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVGcmFnbWVudFZlY3RvclRlbXAoKTtcclxuXHRcdFx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXMoYiwgMSk7XHJcblx0XHRcdFx0biA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVGcmFnbWVudFZlY3RvclRlbXAoKTtcclxuXHRcdFx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXMobiwgMSk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gXCJucm0gXCIgKyB0ICsgXCIueHl6LCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMudGFuZ2VudFZhcnlpbmcgKyBcIlxcblwiICtcclxuXHRcdFx0XHRcdFwibW92IFwiICsgdCArIFwiLncsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy50YW5nZW50VmFyeWluZyArIFwiLndcdFxcblwiICtcclxuXHRcdFx0XHRcdFwibnJtIFwiICsgYiArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmJpdGFuZ2VudFZhcnlpbmcgKyBcIlxcblwiICtcclxuXHRcdFx0XHRcdFwibnJtIFwiICsgbiArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbFZhcnlpbmcgKyBcIlxcblwiO1xyXG5cclxuXHRcdFx0XHQvL2NvbXBpbGUgY3VzdG9tIGZyYWdtZW50IGNvZGUgZm9yIG5vcm1hbCBjYWxjc1xyXG5cdFx0XHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gdGhpcy5fcFJlbmRlclBhc3MuX2lHZXROb3JtYWxGcmFnbWVudENvZGUodGhpcy5fcFNoYWRlck9iamVjdCwgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUsIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMpICtcclxuXHRcdFx0XHRcdFwibTMzIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5ub3JtYWxGcmFnbWVudCArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbEZyYWdtZW50ICsgXCIsIFwiICsgdCArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbEZyYWdtZW50ICsgXCIudywgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbFZhcnlpbmcgKyBcIi53XFxuXCI7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLnJlbW92ZUZyYWdtZW50VGVtcFVzYWdlKGIpO1xyXG5cdFx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLnJlbW92ZUZyYWdtZW50VGVtcFVzYWdlKHQpO1xyXG5cdFx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLnJlbW92ZUZyYWdtZW50VGVtcFVzYWdlKG4pO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBubyBvdXRwdXQsIHdvcmxkIHNwYWNlIGlzIGVub3VnaFxyXG5cdFx0XHR0aGlzLl9wVmVydGV4Q29kZSArPSBcIm0zMyBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMubm9ybWFsVmFyeWluZyArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkTm9ybWFsICsgXCIsIFwiICsgbm9ybWFsTWF0cml4WzBdICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbFZhcnlpbmcgKyBcIi53LCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYW5pbWF0ZWROb3JtYWwgKyBcIi53XFxuXCI7XHJcblxyXG5cdFx0XHR0aGlzLl9wRnJhZ21lbnRDb2RlICs9IFwibnJtIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5ub3JtYWxGcmFnbWVudCArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbFZhcnlpbmcgKyBcIlxcblwiICtcclxuXHRcdFx0XHRcIm1vdiBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMubm9ybWFsRnJhZ21lbnQgKyBcIi53LCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMubm9ybWFsVmFyeWluZyArIFwiLndcXG5cIjtcclxuXHJcblx0XHRcdGlmICh0aGlzLl9wU2hhZGVyT2JqZWN0LnRhbmdlbnREZXBlbmRlbmNpZXMgPiAwKSB7XHJcblx0XHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy50YW5nZW50VmFyeWluZyA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWYXJ5aW5nKCk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3BWZXJ0ZXhDb2RlICs9IFwibTMzIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy50YW5nZW50VmFyeWluZyArIFwiLnh5eiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiLCBcIiArIG5vcm1hbE1hdHJpeFswXSArIFwiXFxuXCIgK1xyXG5cdFx0XHRcdFx0XCJtb3YgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLnRhbmdlbnRWYXJ5aW5nICsgXCIudywgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCArIFwiLndcXG5cIjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5fcFNoYWRlck9iamVjdC51c2VzVGFuZ2VudFNwYWNlKVxyXG5cdFx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5yZW1vdmVWZXJ0ZXhUZW1wVXNhZ2UodGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZE5vcm1hbCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXNldCBhbGwgdGhlIGluZGljZXMgdG8gXCJ1bnVzZWRcIi5cclxuXHQgKi9cclxuXHRwdWJsaWMgcEluaXRSZWdpc3RlckluZGljZXMoKVxyXG5cdHtcclxuXHRcdHRoaXMuX3BTaGFkZXJPYmplY3QucEluaXRSZWdpc3RlckluZGljZXMoKTtcclxuXHJcblx0XHR0aGlzLl9wQW5pbWF0YWJsZUF0dHJpYnV0ZXMgPSBuZXcgQXJyYXk8c3RyaW5nPihcInZhMFwiKTtcclxuXHRcdHRoaXMuX3BBbmltYXRpb25UYXJnZXRSZWdpc3RlcnMgPSBuZXcgQXJyYXk8c3RyaW5nPihcInZ0MFwiKTtcclxuXHRcdHRoaXMuX3BWZXJ0ZXhDb2RlID0gXCJcIjtcclxuXHRcdHRoaXMuX3BGcmFnbWVudENvZGUgPSBcIlwiO1xyXG5cdFx0dGhpcy5fcFBvc3RBbmltYXRpb25GcmFnbWVudENvZGUgPSBcIlwiO1xyXG5cclxuXHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5sb2NhbFBvc2l0aW9uID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZlcnRleFZlY3RvclRlbXAoKSwgMSk7XHJcblxyXG5cdFx0Ly9jcmVhdGUgY29tbW9ubHkgc2hhcmVkIGNvbnN0YW50IHJlZ2lzdGVyc1xyXG5cdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5jb21tb25zID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50Q29uc3RhbnQoKTtcclxuXHRcdHRoaXMuX3BTaGFkZXJPYmplY3QuY29tbW9uc0RhdGFJbmRleCA9IHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuY29tbW9ucy5pbmRleCo0O1xyXG5cclxuXHRcdC8vQ3JlYXRlcyB0aGUgcmVnaXN0ZXJzIHRvIGNvbnRhaW4gdGhlIHRhbmdlbnQgZGF0YS5cclxuXHRcdC8vIG5lZWQgdG8gYmUgY3JlYXRlZCBGSVJTVCBhbmQgaW4gdGhpcyBvcmRlciAoZm9yIHdoZW4gdXNpbmcgdGFuZ2VudCBzcGFjZSlcclxuXHRcdGlmICh0aGlzLl9wU2hhZGVyT2JqZWN0LnRhbmdlbnREZXBlbmRlbmNpZXMgPiAwIHx8IHRoaXMuX3BTaGFkZXJPYmplY3Qub3V0cHV0c05vcm1hbHMpIHtcclxuXHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy50YW5nZW50SW5wdXQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4QXR0cmlidXRlKCk7XHJcblx0XHRcdHRoaXMuX3BTaGFkZXJPYmplY3QudGFuZ2VudEJ1ZmZlckluZGV4ID0gdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy50YW5nZW50SW5wdXQuaW5kZXg7XHJcblxyXG5cdFx0XHR0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudCA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XHJcblx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZFRhbmdlbnQsIDEpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuX3BTaGFkZXJPYmplY3QudXNlc1RhbmdlbnRTcGFjZSkge1xyXG5cdFx0XHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYml0YW5nZW50ID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZlcnRleFZlY3RvclRlbXAoKTtcclxuXHRcdFx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYml0YW5nZW50LCAxKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fcEFuaW1hdGFibGVBdHRyaWJ1dGVzLnB1c2godGhpcy5fcFNoYXJlZFJlZ2lzdGVycy50YW5nZW50SW5wdXQudG9TdHJpbmcoKSk7XHJcblx0XHRcdHRoaXMuX3BBbmltYXRpb25UYXJnZXRSZWdpc3RlcnMucHVzaCh0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmFuaW1hdGVkVGFuZ2VudC50b1N0cmluZygpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5fcFNoYWRlck9iamVjdC5ub3JtYWxEZXBlbmRlbmNpZXMgPiAwKSB7XHJcblx0XHRcdHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMubm9ybWFsSW5wdXQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4QXR0cmlidXRlKCk7XHJcblx0XHRcdHRoaXMuX3BTaGFkZXJPYmplY3Qubm9ybWFsQnVmZmVySW5kZXggPSB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbElucHV0LmluZGV4O1xyXG5cclxuXHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZE5vcm1hbCA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XHJcblx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZE5vcm1hbCwgMSk7XHJcblxyXG5cdFx0XHR0aGlzLl9wQW5pbWF0YWJsZUF0dHJpYnV0ZXMucHVzaCh0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbElucHV0LnRvU3RyaW5nKCkpO1xyXG5cdFx0XHR0aGlzLl9wQW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzLnB1c2godGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZE5vcm1hbC50b1N0cmluZygpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5fcFNoYWRlck9iamVjdC5jb2xvckRlcGVuZGVuY2llcyA+IDApIHtcclxuXHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5jb2xvcklucHV0ID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZlcnRleEF0dHJpYnV0ZSgpO1xyXG5cdFx0XHR0aGlzLl9wU2hhZGVyT2JqZWN0LmNvbG9yQnVmZmVySW5kZXggPSB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmNvbG9ySW5wdXQuaW5kZXg7XHJcblxyXG5cdFx0XHR0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmNvbG9yVmFyeWluZyA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWYXJ5aW5nKCk7XHJcblx0XHRcdHRoaXMuX3BWZXJ0ZXhDb2RlICs9IFwibW92IFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5jb2xvclZhcnlpbmcgKyBcIiwgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmNvbG9ySW5wdXQgKyBcIlxcblwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGlzcG9zZXMgYWxsIHJlc291cmNlcyB1c2VkIGJ5IHRoZSBjb21waWxlci5cclxuXHQgKi9cclxuXHRwdWJsaWMgZGlzcG9zZSgpXHJcblx0e1xyXG5cdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZGlzcG9zZSgpO1xyXG5cdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUgPSBudWxsO1xyXG5cdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycyA9IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgZ2VuZXJhdGVkIHZlcnRleCBjb2RlLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgdmVydGV4Q29kZSgpOnN0cmluZ1xyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9wVmVydGV4Q29kZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBnZW5lcmF0ZWQgZnJhZ21lbnQgY29kZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IGZyYWdtZW50Q29kZSgpOnN0cmluZ1xyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9wRnJhZ21lbnRDb2RlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGdlbmVyYXRlZCBmcmFnbWVudCBjb2RlLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgcG9zdEFuaW1hdGlvbkZyYWdtZW50Q29kZSgpOnN0cmluZ1xyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9wUG9zdEFuaW1hdGlvbkZyYWdtZW50Q29kZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSByZWdpc3RlciBuYW1lIGNvbnRhaW5pbmcgdGhlIGZpbmFsIHNoYWRlZCBjb2xvdXIuXHJcblx0ICovXHJcblx0cHVibGljIGdldCBzaGFkZWRUYXJnZXQoKTpzdHJpbmdcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5zaGFkZWRUYXJnZXQudG9TdHJpbmcoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFNoYWRlckNvbXBpbGVyQmFzZTsiXX0=