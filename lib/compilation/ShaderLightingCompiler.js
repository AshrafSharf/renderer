var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ShaderCompilerBase = require("awayjs-renderergl/lib/compilation/ShaderCompilerBase");
/**
 * ShaderCompilerBase is an abstract base class for shader compilers that use modular shader methods to assemble a
 * material. Concrete subclasses are used by the default materials.
 *
 * @see away.materials.ShadingMethodBase
 */
var ShaderLightingCompiler = (function (_super) {
    __extends(ShaderLightingCompiler, _super);
    /**
     * Creates a new ShaderCompilerBase object.
     * @param profile The compatibility profile of the renderer.
     */
    function ShaderLightingCompiler(renderableClass, renderLightingPass, shaderLightingObject) {
        _super.call(this, renderableClass, renderLightingPass, shaderLightingObject);
        this._shaderLightingObject = shaderLightingObject;
        this._renderLightingPass = renderLightingPass;
    }
    /**
     * Compile the code for the methods.
     */
    ShaderLightingCompiler.prototype.pCompileDependencies = function () {
        _super.prototype.pCompileDependencies.call(this);
        //compile the lighting code
        if (this._shaderLightingObject.usesShadows)
            this.pCompileShadowCode();
        if (this._shaderLightingObject.usesLights) {
            this.initLightRegisters();
            this.compileLightCode();
        }
        if (this._shaderLightingObject.usesProbes)
            this.compileLightProbeCode();
        this._pVertexCode += this._renderLightingPass._iGetPostLightingVertexCode(this._shaderLightingObject, this._pRegisterCache, this._pSharedRegisters);
        this._pFragmentCode += this._renderLightingPass._iGetPostLightingFragmentCode(this._shaderLightingObject, this._pRegisterCache, this._pSharedRegisters);
    };
    /**
     * Provides the code to provide shadow mapping.
     */
    ShaderLightingCompiler.prototype.pCompileShadowCode = function () {
        if (this._shaderLightingObject.normalDependencies > 0) {
            this._pSharedRegisters.shadowTarget = this._pSharedRegisters.normalFragment;
        }
        else {
            this._pSharedRegisters.shadowTarget = this._pRegisterCache.getFreeFragmentVectorTemp();
            this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadowTarget, 1);
        }
    };
    /**
     * Initializes constant registers to contain light data.
     */
    ShaderLightingCompiler.prototype.initLightRegisters = function () {
        // init these first so we're sure they're in sequence
        var i, len;
        if (this._dirLightVertexConstants) {
            len = this._dirLightVertexConstants.length;
            for (i = 0; i < len; ++i) {
                this._dirLightVertexConstants[i] = this._pRegisterCache.getFreeVertexConstant();
                if (this._shaderLightingObject.lightVertexConstantIndex == -1)
                    this._shaderLightingObject.lightVertexConstantIndex = this._dirLightVertexConstants[i].index * 4;
            }
        }
        if (this._pointLightVertexConstants) {
            len = this._pointLightVertexConstants.length;
            for (i = 0; i < len; ++i) {
                this._pointLightVertexConstants[i] = this._pRegisterCache.getFreeVertexConstant();
                if (this._shaderLightingObject.lightVertexConstantIndex == -1)
                    this._shaderLightingObject.lightVertexConstantIndex = this._pointLightVertexConstants[i].index * 4;
            }
        }
        len = this._dirLightFragmentConstants.length;
        for (i = 0; i < len; ++i) {
            this._dirLightFragmentConstants[i] = this._pRegisterCache.getFreeFragmentConstant();
            if (this._shaderLightingObject.lightFragmentConstantIndex == -1)
                this._shaderLightingObject.lightFragmentConstantIndex = this._dirLightFragmentConstants[i].index * 4;
        }
        len = this._pointLightFragmentConstants.length;
        for (i = 0; i < len; ++i) {
            this._pointLightFragmentConstants[i] = this._pRegisterCache.getFreeFragmentConstant();
            if (this._shaderLightingObject.lightFragmentConstantIndex == -1)
                this._shaderLightingObject.lightFragmentConstantIndex = this._pointLightFragmentConstants[i].index * 4;
        }
    };
    /**
     * Compiles the shading code for directional and point lights.
     */
    ShaderLightingCompiler.prototype.compileLightCode = function () {
        var diffuseColorReg;
        var specularColorReg;
        var lightPosReg;
        var lightDirReg;
        var vertexRegIndex = 0;
        var fragmentRegIndex = 0;
        var addSpec = this._shaderLightingObject.usesLightsForSpecular;
        var addDiff = this._shaderLightingObject.usesLightsForDiffuse;
        for (var i = 0; i < this._shaderLightingObject.numDirectionalLights; ++i) {
            if (this._shaderLightingObject.usesTangentSpace) {
                lightDirReg = this._dirLightVertexConstants[vertexRegIndex++];
                var lightVarying = this._pRegisterCache.getFreeVarying();
                this._pVertexCode += "m33 " + lightVarying + ".xyz, " + lightDirReg + ", " + this._pSharedRegisters.animatedTangent + "\n" + "mov " + lightVarying + ".w, " + lightDirReg + ".w\n";
                lightDirReg = this._pRegisterCache.getFreeFragmentVectorTemp();
                this._pRegisterCache.addVertexTempUsages(lightDirReg, 1);
                this._pFragmentCode += "nrm " + lightDirReg + ".xyz, " + lightVarying + "\n" + "mov " + lightDirReg + ".w, " + lightVarying + ".w\n";
            }
            else {
                lightDirReg = this._dirLightFragmentConstants[fragmentRegIndex++];
            }
            diffuseColorReg = this._dirLightFragmentConstants[fragmentRegIndex++];
            specularColorReg = this._dirLightFragmentConstants[fragmentRegIndex++];
            if (addDiff)
                this._pFragmentCode += this._renderLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject, lightDirReg, diffuseColorReg, this._pRegisterCache, this._pSharedRegisters);
            if (addSpec)
                this._pFragmentCode += this._renderLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject, lightDirReg, specularColorReg, this._pRegisterCache, this._pSharedRegisters);
            if (this._shaderLightingObject.usesTangentSpace)
                this._pRegisterCache.removeVertexTempUsage(lightDirReg);
        }
        vertexRegIndex = 0;
        fragmentRegIndex = 0;
        for (var i = 0; i < this._shaderLightingObject.numPointLights; ++i) {
            if (this._shaderLightingObject.usesTangentSpace || !this._shaderLightingObject.usesGlobalPosFragment)
                lightPosReg = this._pointLightVertexConstants[vertexRegIndex++];
            else
                lightPosReg = this._pointLightFragmentConstants[fragmentRegIndex++];
            diffuseColorReg = this._pointLightFragmentConstants[fragmentRegIndex++];
            specularColorReg = this._pointLightFragmentConstants[fragmentRegIndex++];
            lightDirReg = this._pRegisterCache.getFreeFragmentVectorTemp();
            this._pRegisterCache.addFragmentTempUsages(lightDirReg, 1);
            var lightVarying;
            if (this._shaderLightingObject.usesTangentSpace) {
                lightVarying = this._pRegisterCache.getFreeVarying();
                var temp = this._pRegisterCache.getFreeVertexVectorTemp();
                this._pVertexCode += "sub " + temp + ", " + lightPosReg + ", " + this._pSharedRegisters.localPosition + "\n" + "m33 " + lightVarying + ".xyz, " + temp + ", " + this._pSharedRegisters.animatedTangent + "\n" + "mov " + lightVarying + ".w, " + this._pSharedRegisters.localPosition + ".w\n";
            }
            else if (!this._shaderLightingObject.usesGlobalPosFragment) {
                lightVarying = this._pRegisterCache.getFreeVarying();
                this._pVertexCode += "sub " + lightVarying + ", " + lightPosReg + ", " + this._pSharedRegisters.globalPositionVertex + "\n";
            }
            else {
                lightVarying = lightDirReg;
                this._pFragmentCode += "sub " + lightDirReg + ", " + lightPosReg + ", " + this._pSharedRegisters.globalPositionVarying + "\n";
            }
            if (this._shaderLightingObject.usesLightFallOff) {
                // calculate attenuation
                this._pFragmentCode += "dp3 " + lightDirReg + ".w, " + lightVarying + ", " + lightVarying + "\n" + "sub " + lightDirReg + ".w, " + lightDirReg + ".w, " + diffuseColorReg + ".w\n" + "mul " + lightDirReg + ".w, " + lightDirReg + ".w, " + specularColorReg + ".w\n" + "sat " + lightDirReg + ".w, " + lightDirReg + ".w\n" + "sub " + lightDirReg + ".w, " + this._pSharedRegisters.commons + ".w, " + lightDirReg + ".w\n" + "nrm " + lightDirReg + ".xyz, " + lightVarying + "\n";
            }
            else {
                this._pFragmentCode += "nrm " + lightDirReg + ".xyz, " + lightVarying + "\n" + "mov " + lightDirReg + ".w, " + lightVarying + ".w\n";
            }
            if (this._shaderLightingObject.lightFragmentConstantIndex == -1)
                this._shaderLightingObject.lightFragmentConstantIndex = lightPosReg.index * 4;
            if (addDiff)
                this._pFragmentCode += this._renderLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject, lightDirReg, diffuseColorReg, this._pRegisterCache, this._pSharedRegisters);
            if (addSpec)
                this._pFragmentCode += this._renderLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject, lightDirReg, specularColorReg, this._pRegisterCache, this._pSharedRegisters);
            this._pRegisterCache.removeFragmentTempUsage(lightDirReg);
        }
    };
    /**
     * Compiles shading code for light probes.
     */
    ShaderLightingCompiler.prototype.compileLightProbeCode = function () {
        var weightReg;
        var weightComponents = [".x", ".y", ".z", ".w"];
        var weightRegisters = new Array();
        var i;
        var texReg;
        var addSpec = this._shaderLightingObject.usesProbesForSpecular;
        var addDiff = this._shaderLightingObject.usesProbesForDiffuse;
        if (addDiff)
            this._shaderLightingObject.lightProbeDiffuseIndices = new Array();
        if (addSpec)
            this._shaderLightingObject.lightProbeSpecularIndices = new Array();
        for (i = 0; i < this._pNumProbeRegisters; ++i) {
            weightRegisters[i] = this._pRegisterCache.getFreeFragmentConstant();
            if (i == 0)
                this._shaderLightingObject.probeWeightsIndex = weightRegisters[i].index * 4;
        }
        for (i = 0; i < this._shaderLightingObject.numLightProbes; ++i) {
            weightReg = weightRegisters[Math.floor(i / 4)].toString() + weightComponents[i % 4];
            if (addDiff) {
                texReg = this._pRegisterCache.getFreeTextureReg();
                this._shaderLightingObject.lightProbeDiffuseIndices[i] = texReg.index;
                this._pFragmentCode += this._renderLightingPass._iGetPerProbeDiffuseFragmentCode(this._shaderLightingObject, texReg, weightReg, this._pRegisterCache, this._pSharedRegisters);
            }
            if (addSpec) {
                texReg = this._pRegisterCache.getFreeTextureReg();
                this._shaderLightingObject.lightProbeSpecularIndices[i] = texReg.index;
                this._pFragmentCode += this._renderLightingPass._iGetPerProbeSpecularFragmentCode(this._shaderLightingObject, texReg, weightReg, this._pRegisterCache, this._pSharedRegisters);
            }
        }
    };
    /**
     * Reset all the indices to "unused".
     */
    ShaderLightingCompiler.prototype.pInitRegisterIndices = function () {
        _super.prototype.pInitRegisterIndices.call(this);
        this._shaderLightingObject.lightVertexConstantIndex = -1;
        this._shaderLightingObject.lightFragmentConstantIndex = -1;
        this._shaderLightingObject.probeWeightsIndex = -1;
        this._pNumProbeRegisters = Math.ceil(this._shaderLightingObject.numLightProbes / 4);
        //init light data
        if (this._shaderLightingObject.usesTangentSpace || !this._shaderLightingObject.usesGlobalPosFragment) {
            this._pointLightVertexConstants = new Array(this._shaderLightingObject.numPointLights);
            this._pointLightFragmentConstants = new Array(this._shaderLightingObject.numPointLights * 2);
        }
        else {
            this._pointLightFragmentConstants = new Array(this._shaderLightingObject.numPointLights * 3);
        }
        if (this._shaderLightingObject.usesTangentSpace) {
            this._dirLightVertexConstants = new Array(this._shaderLightingObject.numDirectionalLights);
            this._dirLightFragmentConstants = new Array(this._shaderLightingObject.numDirectionalLights * 2);
        }
        else {
            this._dirLightFragmentConstants = new Array(this._shaderLightingObject.numDirectionalLights * 3);
        }
    };
    return ShaderLightingCompiler;
})(ShaderCompilerBase);
module.exports = ShaderLightingCompiler;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJMaWdodGluZ0NvbXBpbGVyLnRzIl0sIm5hbWVzIjpbIlNoYWRlckxpZ2h0aW5nQ29tcGlsZXIiLCJTaGFkZXJMaWdodGluZ0NvbXBpbGVyLmNvbnN0cnVjdG9yIiwiU2hhZGVyTGlnaHRpbmdDb21waWxlci5wQ29tcGlsZURlcGVuZGVuY2llcyIsIlNoYWRlckxpZ2h0aW5nQ29tcGlsZXIucENvbXBpbGVTaGFkb3dDb2RlIiwiU2hhZGVyTGlnaHRpbmdDb21waWxlci5pbml0TGlnaHRSZWdpc3RlcnMiLCJTaGFkZXJMaWdodGluZ0NvbXBpbGVyLmNvbXBpbGVMaWdodENvZGUiLCJTaGFkZXJMaWdodGluZ0NvbXBpbGVyLmNvbXBpbGVMaWdodFByb2JlQ29kZSIsIlNoYWRlckxpZ2h0aW5nQ29tcGlsZXIucEluaXRSZWdpc3RlckluZGljZXMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBLElBQU8sa0JBQWtCLFdBQWEsc0RBQXNELENBQUMsQ0FBQztBQUs5RixBQU1BOzs7OztHQURHO0lBQ0csc0JBQXNCO0lBQVNBLFVBQS9CQSxzQkFBc0JBLFVBQTJCQTtJQVd0REE7OztPQUdHQTtJQUNIQSxTQWZLQSxzQkFBc0JBLENBZWZBLGVBQWdDQSxFQUFFQSxrQkFBc0NBLEVBQUVBLG9CQUF5Q0E7UUFFOUhDLGtCQUFNQSxlQUFlQSxFQUFFQSxrQkFBa0JBLEVBQUVBLG9CQUFvQkEsQ0FBQ0EsQ0FBQ0E7UUFFakVBLElBQUlBLENBQUNBLHFCQUFxQkEsR0FBR0Esb0JBQW9CQSxDQUFDQTtRQUNsREEsSUFBSUEsQ0FBQ0EsbUJBQW1CQSxHQUFHQSxrQkFBa0JBLENBQUNBO0lBQy9DQSxDQUFDQTtJQUVERDs7T0FFR0E7SUFDSUEscURBQW9CQSxHQUEzQkE7UUFFQ0UsZ0JBQUtBLENBQUNBLG9CQUFvQkEsV0FBRUEsQ0FBQ0E7UUFFN0JBLEFBQ0FBLDJCQUQyQkE7UUFDM0JBLEVBQUVBLENBQUNB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QUFDQSxDQUFDQTtZQUNyQ0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsMEJBQTBCQSxDQUFDQSxNQUFNQSxDQUFDQTtZQUM3Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7Z0JBQzFCQSxJQUFJQSxDQUFDQSwwQkFBMEJBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLHFCQUFxQkEsRUFBRUEsQ0FBQ0E7Z0JBRWxGQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxxQkFBcUJBLENBQUNBLHdCQUF3QkEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7b0JBQzdEQSxJQUFJQSxDQUFDQSxxQkFBcUJBLENBQUNBLHdCQUF3QkEsR0FBR0EsSUFBSUEsQ0FBQ0EsMEJBQTBCQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxHQUFDQSxDQUFDQSxDQUFDQTtZQUNuR0EsQ0FBQ0E7UUFDRkEsQ0FBQ0E7UUFFREEsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsMEJBQTBCQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUM3Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDMUJBLElBQUlBLENBQUNBLDBCQUEwQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsdUJBQXVCQSxFQUFFQSxDQUFDQTtZQUVwRkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EscUJBQXFCQSxDQUFDQSwwQkFBMEJBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO2dCQUMvREEsSUFBSUEsQ0FBQ0EscUJBQXFCQSxDQUFDQSwwQkFBMEJBLEdBQUdBLElBQUlBLENBQUNBLDBCQUEwQkEsQ0FBQ0EsQ0FBQ0EsQ0FB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QTtZQUNsSEEsSUFBSUEsQ0FBQ0EsMEJBQTBCQSxHQUFHQSxJQUFJQSxLQUFLQSxDQUF3QkEsSUFBSUEsQ0FBQ0EscUJBQXFCQSxDQUFDQSxvQkFBb0JBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQ3ZIQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNQQSxJQUFJQSxDQUFDQSwwQkFBMEJBLEdBQUdBLElBQUlBLEtBQUtBLENBQXdCQSxJQUFJQSxDQUFDQSxxQkFBcUJBLENBQUNBLG9CQUFvQkEsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDdkhBLENBQUNBO0lBQ0ZBLENBQUNBO0lBQ0ZQLDZCQUFDQTtBQUFEQSxDQTFSQSxBQTBSQ0EsRUExUm9DLGtCQUFrQixFQTBSdEQ7QUFFRCxBQUFnQyxpQkFBdkIsc0JBQXNCLENBQUMiLCJmaWxlIjoiY29tcGlsYXRpb24vU2hhZGVyTGlnaHRpbmdDb21waWxlci5qcyIsInNvdXJjZVJvb3QiOiIuLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29udGV4dEdMUHJvZmlsZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvQ29udGV4dEdMUHJvZmlsZVwiKTtcclxuXHJcbmltcG9ydCBTaGFkZXJMaWdodGluZ09iamVjdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJMaWdodGluZ09iamVjdFwiKTtcclxuaW1wb3J0IFNoYWRlckNvbXBpbGVyQmFzZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJDb21waWxlckJhc2VcIik7XHJcbmltcG9ydCBTaGFkZXJSZWdpc3RlckVsZW1lbnRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyRWxlbWVudFwiKTtcclxuaW1wb3J0IElSZW5kZXJMaWdodGluZ1Bhc3NcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3Bhc3Nlcy9JUmVuZGVyTGlnaHRpbmdQYXNzXCIpO1xyXG5pbXBvcnQgSVJlbmRlcmFibGVDbGFzc1x0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3Bvb2wvSVJlbmRlcmFibGVDbGFzc1wiKTtcclxuXHJcbi8qKlxyXG4gKiBTaGFkZXJDb21waWxlckJhc2UgaXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyBmb3Igc2hhZGVyIGNvbXBpbGVycyB0aGF0IHVzZSBtb2R1bGFyIHNoYWRlciBtZXRob2RzIHRvIGFzc2VtYmxlIGFcclxuICogbWF0ZXJpYWwuIENvbmNyZXRlIHN1YmNsYXNzZXMgYXJlIHVzZWQgYnkgdGhlIGRlZmF1bHQgbWF0ZXJpYWxzLlxyXG4gKlxyXG4gKiBAc2VlIGF3YXkubWF0ZXJpYWxzLlNoYWRpbmdNZXRob2RCYXNlXHJcbiAqL1xyXG5jbGFzcyBTaGFkZXJMaWdodGluZ0NvbXBpbGVyIGV4dGVuZHMgU2hhZGVyQ29tcGlsZXJCYXNlXHJcbntcclxuXHRwcml2YXRlIF9zaGFkZXJMaWdodGluZ09iamVjdDpTaGFkZXJMaWdodGluZ09iamVjdDtcclxuXHRwcml2YXRlIF9yZW5kZXJMaWdodGluZ1Bhc3M6SVJlbmRlckxpZ2h0aW5nUGFzcztcclxuXHRwdWJsaWMgX3BvaW50TGlnaHRGcmFnbWVudENvbnN0YW50czpBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+O1xyXG5cdHB1YmxpYyBfcG9pbnRMaWdodFZlcnRleENvbnN0YW50czpBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+O1xyXG5cdHB1YmxpYyBfZGlyTGlnaHRGcmFnbWVudENvbnN0YW50czpBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+O1xyXG5cdHB1YmxpYyBfZGlyTGlnaHRWZXJ0ZXhDb25zdGFudHM6QXJyYXk8U2hhZGVyUmVnaXN0ZXJFbGVtZW50PjtcclxuXHJcblx0cHVibGljIF9wTnVtUHJvYmVSZWdpc3RlcnM6bnVtYmVyO1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIGEgbmV3IFNoYWRlckNvbXBpbGVyQmFzZSBvYmplY3QuXHJcblx0ICogQHBhcmFtIHByb2ZpbGUgVGhlIGNvbXBhdGliaWxpdHkgcHJvZmlsZSBvZiB0aGUgcmVuZGVyZXIuXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IocmVuZGVyYWJsZUNsYXNzOklSZW5kZXJhYmxlQ2xhc3MsIHJlbmRlckxpZ2h0aW5nUGFzczpJUmVuZGVyTGlnaHRpbmdQYXNzLCBzaGFkZXJMaWdodGluZ09iamVjdDpTaGFkZXJMaWdodGluZ09iamVjdClcclxuXHR7XHJcblx0XHRzdXBlcihyZW5kZXJhYmxlQ2xhc3MsIHJlbmRlckxpZ2h0aW5nUGFzcywgc2hhZGVyTGlnaHRpbmdPYmplY3QpO1xyXG5cclxuXHRcdHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0ID0gc2hhZGVyTGlnaHRpbmdPYmplY3Q7XHJcblx0XHR0aGlzLl9yZW5kZXJMaWdodGluZ1Bhc3MgPSByZW5kZXJMaWdodGluZ1Bhc3M7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb21waWxlIHRoZSBjb2RlIGZvciB0aGUgbWV0aG9kcy5cclxuXHQgKi9cclxuXHRwdWJsaWMgcENvbXBpbGVEZXBlbmRlbmNpZXMoKVxyXG5cdHtcclxuXHRcdHN1cGVyLnBDb21waWxlRGVwZW5kZW5jaWVzKCk7XHJcblxyXG5cdFx0Ly9jb21waWxlIHRoZSBsaWdodGluZyBjb2RlXHJcblx0XHRpZiAodGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QudXNlc1NoYWRvd3MpXHJcblx0XHRcdHRoaXMucENvbXBpbGVTaGFkb3dDb2RlKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LnVzZXNMaWdodHMpIHtcclxuXHRcdFx0dGhpcy5pbml0TGlnaHRSZWdpc3RlcnMoKTtcclxuXHRcdFx0dGhpcy5jb21waWxlTGlnaHRDb2RlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LnVzZXNQcm9iZXMpXHJcblx0XHRcdHRoaXMuY29tcGlsZUxpZ2h0UHJvYmVDb2RlKCk7XHJcblxyXG5cdFx0dGhpcy5fcFZlcnRleENvZGUgKz0gdGhpcy5fcmVuZGVyTGlnaHRpbmdQYXNzLl9pR2V0UG9zdExpZ2h0aW5nVmVydGV4Q29kZSh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdCwgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUsIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMpO1xyXG5cdFx0dGhpcy5fcEZyYWdtZW50Q29kZSArPSB0aGlzLl9yZW5kZXJMaWdodGluZ1Bhc3MuX2lHZXRQb3N0TGlnaHRpbmdGcmFnbWVudENvZGUodGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QsIHRoaXMuX3BSZWdpc3RlckNhY2hlLCB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFByb3ZpZGVzIHRoZSBjb2RlIHRvIHByb3ZpZGUgc2hhZG93IG1hcHBpbmcuXHJcblx0ICovXHJcblx0cHVibGljIHBDb21waWxlU2hhZG93Q29kZSgpXHJcblx0e1xyXG5cdFx0aWYgKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0Lm5vcm1hbERlcGVuZGVuY2llcyA+IDApIHtcclxuXHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5zaGFkb3dUYXJnZXQgPSB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLm5vcm1hbEZyYWdtZW50O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5zaGFkb3dUYXJnZXQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XHJcblx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmFkZEZyYWdtZW50VGVtcFVzYWdlcyh0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLnNoYWRvd1RhcmdldCwgMSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBJbml0aWFsaXplcyBjb25zdGFudCByZWdpc3RlcnMgdG8gY29udGFpbiBsaWdodCBkYXRhLlxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaW5pdExpZ2h0UmVnaXN0ZXJzKClcclxuXHR7XHJcblx0XHQvLyBpbml0IHRoZXNlIGZpcnN0IHNvIHdlJ3JlIHN1cmUgdGhleSdyZSBpbiBzZXF1ZW5jZVxyXG5cdFx0dmFyIGk6bnVtYmVyLCBsZW46bnVtYmVyO1xyXG5cclxuXHRcdGlmICh0aGlzLl9kaXJMaWdodFZlcnRleENvbnN0YW50cykge1xyXG5cdFx0XHRsZW4gPSB0aGlzLl9kaXJMaWdodFZlcnRleENvbnN0YW50cy5sZW5ndGg7XHJcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xyXG5cdFx0XHRcdHRoaXMuX2RpckxpZ2h0VmVydGV4Q29uc3RhbnRzW2ldID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZlcnRleENvbnN0YW50KCk7XHJcblxyXG5cdFx0XHRcdGlmICh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5saWdodFZlcnRleENvbnN0YW50SW5kZXggPT0gLTEpXHJcblx0XHRcdFx0XHR0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5saWdodFZlcnRleENvbnN0YW50SW5kZXggPSB0aGlzLl9kaXJMaWdodFZlcnRleENvbnN0YW50c1tpXS5pbmRleCo0O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuX3BvaW50TGlnaHRWZXJ0ZXhDb25zdGFudHMpIHtcclxuXHRcdFx0bGVuID0gdGhpcy5fcG9pbnRMaWdodFZlcnRleENvbnN0YW50cy5sZW5ndGg7XHJcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xyXG5cdFx0XHRcdHRoaXMuX3BvaW50TGlnaHRWZXJ0ZXhDb25zdGFudHNbaV0gPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4Q29uc3RhbnQoKTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0VmVydGV4Q29uc3RhbnRJbmRleCA9PSAtMSlcclxuXHRcdFx0XHRcdHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0VmVydGV4Q29uc3RhbnRJbmRleCA9IHRoaXMuX3BvaW50TGlnaHRWZXJ0ZXhDb25zdGFudHNbaV0uaW5kZXgqNDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGxlbiA9IHRoaXMuX2RpckxpZ2h0RnJhZ21lbnRDb25zdGFudHMubGVuZ3RoO1xyXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XHJcblx0XHRcdHRoaXMuX2RpckxpZ2h0RnJhZ21lbnRDb25zdGFudHNbaV0gPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRDb25zdGFudCgpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0RnJhZ21lbnRDb25zdGFudEluZGV4ID09IC0xKVxyXG5cdFx0XHRcdHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0RnJhZ21lbnRDb25zdGFudEluZGV4ID0gdGhpcy5fZGlyTGlnaHRGcmFnbWVudENvbnN0YW50c1tpXS5pbmRleCo0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGxlbiA9IHRoaXMuX3BvaW50TGlnaHRGcmFnbWVudENvbnN0YW50cy5sZW5ndGg7XHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcclxuXHRcdFx0dGhpcy5fcG9pbnRMaWdodEZyYWdtZW50Q29uc3RhbnRzW2ldID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50Q29uc3RhbnQoKTtcclxuXHJcblx0XHRcdGlmICh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5saWdodEZyYWdtZW50Q29uc3RhbnRJbmRleCA9PSAtMSlcclxuXHRcdFx0XHR0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5saWdodEZyYWdtZW50Q29uc3RhbnRJbmRleCA9IHRoaXMuX3BvaW50TGlnaHRGcmFnbWVudENvbnN0YW50c1tpXS5pbmRleCo0O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ29tcGlsZXMgdGhlIHNoYWRpbmcgY29kZSBmb3IgZGlyZWN0aW9uYWwgYW5kIHBvaW50IGxpZ2h0cy5cclxuXHQgKi9cclxuXHRwcml2YXRlIGNvbXBpbGVMaWdodENvZGUoKVxyXG5cdHtcclxuXHRcdHZhciBkaWZmdXNlQ29sb3JSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cdFx0dmFyIHNwZWN1bGFyQ29sb3JSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cdFx0dmFyIGxpZ2h0UG9zUmVnOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHRcdHZhciBsaWdodERpclJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0XHR2YXIgdmVydGV4UmVnSW5kZXg6bnVtYmVyID0gMDtcclxuXHRcdHZhciBmcmFnbWVudFJlZ0luZGV4Om51bWJlciA9IDA7XHJcblx0XHR2YXIgYWRkU3BlYzpib29sZWFuID0gdGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QudXNlc0xpZ2h0c0ZvclNwZWN1bGFyO1xyXG5cdFx0dmFyIGFkZERpZmY6Ym9vbGVhbiA9IHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LnVzZXNMaWdodHNGb3JEaWZmdXNlO1xyXG5cclxuXHRcdC8vY29tcGlsZSB0aGUgc2hhZGluZyBjb2RlIGZvciBkaXJlY3Rpb25hbCBsaWdodHMuXHJcblx0XHRmb3IgKHZhciBpOm51bWJlciA9IDA7IGkgPCB0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5udW1EaXJlY3Rpb25hbExpZ2h0czsgKytpKSB7XHJcblx0XHRcdGlmICh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC51c2VzVGFuZ2VudFNwYWNlKSB7XHJcblx0XHRcdFx0bGlnaHREaXJSZWcgPSB0aGlzLl9kaXJMaWdodFZlcnRleENvbnN0YW50c1t2ZXJ0ZXhSZWdJbmRleCsrXTtcclxuXHJcblx0XHRcdFx0dmFyIGxpZ2h0VmFyeWluZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmFyeWluZygpO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9wVmVydGV4Q29kZSArPSBcIm0zMyBcIiArIGxpZ2h0VmFyeWluZyArIFwiLnh5eiwgXCIgKyBsaWdodERpclJlZyArIFwiLCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuYW5pbWF0ZWRUYW5nZW50ICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XHRcIm1vdiBcIiArIGxpZ2h0VmFyeWluZyArIFwiLncsIFwiICsgbGlnaHREaXJSZWcgKyBcIi53XFxuXCI7XHJcblxyXG5cdFx0XHRcdGxpZ2h0RGlyUmVnID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xyXG5cdFx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmFkZFZlcnRleFRlbXBVc2FnZXMobGlnaHREaXJSZWcsIDEpO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9wRnJhZ21lbnRDb2RlICs9IFwibnJtIFwiICsgbGlnaHREaXJSZWcgKyBcIi54eXosIFwiICsgbGlnaHRWYXJ5aW5nICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XHRcIm1vdiBcIiArIGxpZ2h0RGlyUmVnICsgXCIudywgXCIgKyBsaWdodFZhcnlpbmcgKyBcIi53XFxuXCI7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGxpZ2h0RGlyUmVnID0gdGhpcy5fZGlyTGlnaHRGcmFnbWVudENvbnN0YW50c1tmcmFnbWVudFJlZ0luZGV4KytdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkaWZmdXNlQ29sb3JSZWcgPSB0aGlzLl9kaXJMaWdodEZyYWdtZW50Q29uc3RhbnRzW2ZyYWdtZW50UmVnSW5kZXgrK107XHJcblx0XHRcdHNwZWN1bGFyQ29sb3JSZWcgPSB0aGlzLl9kaXJMaWdodEZyYWdtZW50Q29uc3RhbnRzW2ZyYWdtZW50UmVnSW5kZXgrK107XHJcblxyXG5cdFx0XHRpZiAoYWRkRGlmZilcclxuXHRcdFx0XHR0aGlzLl9wRnJhZ21lbnRDb2RlICs9IHRoaXMuX3JlbmRlckxpZ2h0aW5nUGFzcy5faUdldFBlckxpZ2h0RGlmZnVzZUZyYWdtZW50Q29kZSh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdCwgbGlnaHREaXJSZWcsIGRpZmZ1c2VDb2xvclJlZywgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUsIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMpO1xyXG5cclxuXHRcdFx0aWYgKGFkZFNwZWMpXHJcblx0XHRcdFx0dGhpcy5fcEZyYWdtZW50Q29kZSArPSB0aGlzLl9yZW5kZXJMaWdodGluZ1Bhc3MuX2lHZXRQZXJMaWdodFNwZWN1bGFyRnJhZ21lbnRDb2RlKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LCBsaWdodERpclJlZywgc3BlY3VsYXJDb2xvclJlZywgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUsIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LnVzZXNUYW5nZW50U3BhY2UpXHJcblx0XHRcdFx0dGhpcy5fcFJlZ2lzdGVyQ2FjaGUucmVtb3ZlVmVydGV4VGVtcFVzYWdlKGxpZ2h0RGlyUmVnKTtcclxuXHRcdH1cclxuXHJcblx0XHR2ZXJ0ZXhSZWdJbmRleCA9IDA7XHJcblx0XHRmcmFnbWVudFJlZ0luZGV4ID0gMDtcclxuXHJcblx0XHQvL2NvbXBpbGUgdGhlIHNoYWRpbmcgY29kZSBmb3IgcG9pbnQgbGlnaHRzXHJcblx0XHRmb3IgKHZhciBpOm51bWJlciA9IDA7IGkgPCB0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5udW1Qb2ludExpZ2h0czsgKytpKSB7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QudXNlc1RhbmdlbnRTcGFjZSB8fCAhdGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QudXNlc0dsb2JhbFBvc0ZyYWdtZW50KVxyXG5cdFx0XHRcdGxpZ2h0UG9zUmVnID0gdGhpcy5fcG9pbnRMaWdodFZlcnRleENvbnN0YW50c1t2ZXJ0ZXhSZWdJbmRleCsrXTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdGxpZ2h0UG9zUmVnID0gdGhpcy5fcG9pbnRMaWdodEZyYWdtZW50Q29uc3RhbnRzW2ZyYWdtZW50UmVnSW5kZXgrK107XHJcblxyXG5cdFx0XHRkaWZmdXNlQ29sb3JSZWcgPSB0aGlzLl9wb2ludExpZ2h0RnJhZ21lbnRDb25zdGFudHNbZnJhZ21lbnRSZWdJbmRleCsrXTtcclxuXHRcdFx0c3BlY3VsYXJDb2xvclJlZyA9IHRoaXMuX3BvaW50TGlnaHRGcmFnbWVudENvbnN0YW50c1tmcmFnbWVudFJlZ0luZGV4KytdO1xyXG5cclxuXHRcdFx0bGlnaHREaXJSZWcgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XHJcblx0XHRcdHRoaXMuX3BSZWdpc3RlckNhY2hlLmFkZEZyYWdtZW50VGVtcFVzYWdlcyhsaWdodERpclJlZywgMSk7XHJcblxyXG5cdFx0XHR2YXIgbGlnaHRWYXJ5aW5nOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHJcblx0XHRcdGlmICh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC51c2VzVGFuZ2VudFNwYWNlKSB7XHJcblx0XHRcdFx0bGlnaHRWYXJ5aW5nID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZVZhcnlpbmcoKTtcclxuXHRcdFx0XHR2YXIgdGVtcDpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVmVydGV4VmVjdG9yVGVtcCgpO1xyXG5cdFx0XHRcdHRoaXMuX3BWZXJ0ZXhDb2RlICs9IFwic3ViIFwiICsgdGVtcCArIFwiLCBcIiArIGxpZ2h0UG9zUmVnICsgXCIsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5sb2NhbFBvc2l0aW9uICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XHRcIm0zMyBcIiArIGxpZ2h0VmFyeWluZyArIFwiLnh5eiwgXCIgKyB0ZW1wICsgXCIsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5hbmltYXRlZFRhbmdlbnQgKyBcIlxcblwiICtcclxuXHRcdFx0XHRcdFwibW92IFwiICsgbGlnaHRWYXJ5aW5nICsgXCIudywgXCIgKyB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzLmxvY2FsUG9zaXRpb24gKyBcIi53XFxuXCI7XHJcblx0XHRcdH0gZWxzZSBpZiAoIXRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LnVzZXNHbG9iYWxQb3NGcmFnbWVudCkge1xyXG5cdFx0XHRcdGxpZ2h0VmFyeWluZyA9IHRoaXMuX3BSZWdpc3RlckNhY2hlLmdldEZyZWVWYXJ5aW5nKCk7XHJcblx0XHRcdFx0dGhpcy5fcFZlcnRleENvZGUgKz0gXCJzdWIgXCIgKyBsaWdodFZhcnlpbmcgKyBcIiwgXCIgKyBsaWdodFBvc1JlZyArIFwiLCBcIiArIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMuZ2xvYmFsUG9zaXRpb25WZXJ0ZXggKyBcIlxcblwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGxpZ2h0VmFyeWluZyA9IGxpZ2h0RGlyUmVnO1xyXG5cdFx0XHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gXCJzdWIgXCIgKyBsaWdodERpclJlZyArIFwiLCBcIiArIGxpZ2h0UG9zUmVnICsgXCIsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5nbG9iYWxQb3NpdGlvblZhcnlpbmcgKyBcIlxcblwiO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAodGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QudXNlc0xpZ2h0RmFsbE9mZikge1xyXG5cdFx0XHRcdC8vIGNhbGN1bGF0ZSBhdHRlbnVhdGlvblxyXG5cdFx0XHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gLy8gYXR0ZW51YXRlXHJcblx0XHRcdFx0XHRcImRwMyBcIiArIGxpZ2h0RGlyUmVnICsgXCIudywgXCIgKyBsaWdodFZhcnlpbmcgKyBcIiwgXCIgKyBsaWdodFZhcnlpbmcgKyBcIlxcblwiICsgLy8gdyA9IGQgLSByYWRpdXNcclxuXHRcdFx0XHRcdFwic3ViIFwiICsgbGlnaHREaXJSZWcgKyBcIi53LCBcIiArIGxpZ2h0RGlyUmVnICsgXCIudywgXCIgKyBkaWZmdXNlQ29sb3JSZWcgKyBcIi53XFxuXCIgKyAvLyB3ID0gKGQgLSByYWRpdXMpLyhtYXgtbWluKVxyXG5cdFx0XHRcdFx0XCJtdWwgXCIgKyBsaWdodERpclJlZyArIFwiLncsIFwiICsgbGlnaHREaXJSZWcgKyBcIi53LCBcIiArIHNwZWN1bGFyQ29sb3JSZWcgKyBcIi53XFxuXCIgKyAvLyB3ID0gY2xhbXAodywgMCwgMSlcclxuXHRcdFx0XHRcdFwic2F0IFwiICsgbGlnaHREaXJSZWcgKyBcIi53LCBcIiArIGxpZ2h0RGlyUmVnICsgXCIud1xcblwiICsgLy8gdyA9IDEtd1xyXG5cdFx0XHRcdFx0XCJzdWIgXCIgKyBsaWdodERpclJlZyArIFwiLncsIFwiICsgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycy5jb21tb25zICsgXCIudywgXCIgKyBsaWdodERpclJlZyArIFwiLndcXG5cIiArIC8vIG5vcm1hbGl6ZVxyXG5cdFx0XHRcdFx0XCJucm0gXCIgKyBsaWdodERpclJlZyArIFwiLnh5eiwgXCIgKyBsaWdodFZhcnlpbmcgKyBcIlxcblwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gXCJucm0gXCIgKyBsaWdodERpclJlZyArIFwiLnh5eiwgXCIgKyBsaWdodFZhcnlpbmcgKyBcIlxcblwiICtcclxuXHRcdFx0XHRcdFwibW92IFwiICsgbGlnaHREaXJSZWcgKyBcIi53LCBcIiArIGxpZ2h0VmFyeWluZyArIFwiLndcXG5cIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0RnJhZ21lbnRDb25zdGFudEluZGV4ID09IC0xKVxyXG5cdFx0XHRcdHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0RnJhZ21lbnRDb25zdGFudEluZGV4ID0gbGlnaHRQb3NSZWcuaW5kZXgqNDtcclxuXHJcblx0XHRcdGlmIChhZGREaWZmKVxyXG5cdFx0XHRcdHRoaXMuX3BGcmFnbWVudENvZGUgKz0gdGhpcy5fcmVuZGVyTGlnaHRpbmdQYXNzLl9pR2V0UGVyTGlnaHREaWZmdXNlRnJhZ21lbnRDb2RlKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LCBsaWdodERpclJlZywgZGlmZnVzZUNvbG9yUmVnLCB0aGlzLl9wUmVnaXN0ZXJDYWNoZSwgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycyk7XHJcblxyXG5cdFx0XHRpZiAoYWRkU3BlYylcclxuXHRcdFx0XHR0aGlzLl9wRnJhZ21lbnRDb2RlICs9IHRoaXMuX3JlbmRlckxpZ2h0aW5nUGFzcy5faUdldFBlckxpZ2h0U3BlY3VsYXJGcmFnbWVudENvZGUodGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QsIGxpZ2h0RGlyUmVnLCBzcGVjdWxhckNvbG9yUmVnLCB0aGlzLl9wUmVnaXN0ZXJDYWNoZSwgdGhpcy5fcFNoYXJlZFJlZ2lzdGVycyk7XHJcblxyXG5cdFx0XHR0aGlzLl9wUmVnaXN0ZXJDYWNoZS5yZW1vdmVGcmFnbWVudFRlbXBVc2FnZShsaWdodERpclJlZyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb21waWxlcyBzaGFkaW5nIGNvZGUgZm9yIGxpZ2h0IHByb2Jlcy5cclxuXHQgKi9cclxuXHRwcml2YXRlIGNvbXBpbGVMaWdodFByb2JlQ29kZSgpXHJcblx0e1xyXG5cdFx0dmFyIHdlaWdodFJlZzpzdHJpbmc7XHJcblx0XHR2YXIgd2VpZ2h0Q29tcG9uZW50cyA9IFsgXCIueFwiLCBcIi55XCIsIFwiLnpcIiwgXCIud1wiIF07XHJcblx0XHR2YXIgd2VpZ2h0UmVnaXN0ZXJzOkFycmF5PFNoYWRlclJlZ2lzdGVyRWxlbWVudD4gPSBuZXcgQXJyYXk8U2hhZGVyUmVnaXN0ZXJFbGVtZW50PigpO1xyXG5cdFx0dmFyIGk6bnVtYmVyO1xyXG5cdFx0dmFyIHRleFJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0XHR2YXIgYWRkU3BlYzpib29sZWFuID0gdGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QudXNlc1Byb2Jlc0ZvclNwZWN1bGFyO1xyXG5cdFx0dmFyIGFkZERpZmY6Ym9vbGVhbiA9IHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LnVzZXNQcm9iZXNGb3JEaWZmdXNlO1xyXG5cclxuXHRcdGlmIChhZGREaWZmKVxyXG5cdFx0XHR0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5saWdodFByb2JlRGlmZnVzZUluZGljZXMgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG5cclxuXHRcdGlmIChhZGRTcGVjKVxyXG5cdFx0XHR0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5saWdodFByb2JlU3BlY3VsYXJJbmRpY2VzID0gbmV3IEFycmF5PG51bWJlcj4oKTtcclxuXHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgdGhpcy5fcE51bVByb2JlUmVnaXN0ZXJzOyArK2kpIHtcclxuXHRcdFx0d2VpZ2h0UmVnaXN0ZXJzW2ldID0gdGhpcy5fcFJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50Q29uc3RhbnQoKTtcclxuXHJcblx0XHRcdGlmIChpID09IDApXHJcblx0XHRcdFx0dGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QucHJvYmVXZWlnaHRzSW5kZXggPSB3ZWlnaHRSZWdpc3RlcnNbaV0uaW5kZXgqNDtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgdGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QubnVtTGlnaHRQcm9iZXM7ICsraSkge1xyXG5cdFx0XHR3ZWlnaHRSZWcgPSB3ZWlnaHRSZWdpc3RlcnNbTWF0aC5mbG9vcihpLzQpXS50b1N0cmluZygpICsgd2VpZ2h0Q29tcG9uZW50c1tpJTRdO1xyXG5cclxuXHRcdFx0aWYgKGFkZERpZmYpIHtcclxuXHRcdFx0XHR0ZXhSZWcgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVGV4dHVyZVJlZygpO1xyXG5cdFx0XHRcdHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0UHJvYmVEaWZmdXNlSW5kaWNlc1tpXSA9IHRleFJlZy5pbmRleDtcclxuXHRcdFx0XHR0aGlzLl9wRnJhZ21lbnRDb2RlICs9IHRoaXMuX3JlbmRlckxpZ2h0aW5nUGFzcy5faUdldFBlclByb2JlRGlmZnVzZUZyYWdtZW50Q29kZSh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdCwgdGV4UmVnLCB3ZWlnaHRSZWcsIHRoaXMuX3BSZWdpc3RlckNhY2hlLCB0aGlzLl9wU2hhcmVkUmVnaXN0ZXJzKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGFkZFNwZWMpIHtcclxuXHRcdFx0XHR0ZXhSZWcgPSB0aGlzLl9wUmVnaXN0ZXJDYWNoZS5nZXRGcmVlVGV4dHVyZVJlZygpO1xyXG5cdFx0XHRcdHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LmxpZ2h0UHJvYmVTcGVjdWxhckluZGljZXNbaV0gPSB0ZXhSZWcuaW5kZXg7XHJcblx0XHRcdFx0dGhpcy5fcEZyYWdtZW50Q29kZSArPSB0aGlzLl9yZW5kZXJMaWdodGluZ1Bhc3MuX2lHZXRQZXJQcm9iZVNwZWN1bGFyRnJhZ21lbnRDb2RlKHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0LCB0ZXhSZWcsIHdlaWdodFJlZywgdGhpcy5fcFJlZ2lzdGVyQ2FjaGUsIHRoaXMuX3BTaGFyZWRSZWdpc3RlcnMpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXNldCBhbGwgdGhlIGluZGljZXMgdG8gXCJ1bnVzZWRcIi5cclxuXHQgKi9cclxuXHRwdWJsaWMgcEluaXRSZWdpc3RlckluZGljZXMoKVxyXG5cdHtcclxuXHRcdHN1cGVyLnBJbml0UmVnaXN0ZXJJbmRpY2VzKCk7XHJcblxyXG5cdFx0dGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QubGlnaHRWZXJ0ZXhDb25zdGFudEluZGV4ID0gLTE7XHJcblx0XHR0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5saWdodEZyYWdtZW50Q29uc3RhbnRJbmRleCA9IC0xO1xyXG5cdFx0dGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QucHJvYmVXZWlnaHRzSW5kZXggPSAtMTtcclxuXHJcblx0XHR0aGlzLl9wTnVtUHJvYmVSZWdpc3RlcnMgPSBNYXRoLmNlaWwodGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QubnVtTGlnaHRQcm9iZXMvNCk7XHJcblxyXG5cdFx0Ly9pbml0IGxpZ2h0IGRhdGFcclxuXHRcdGlmICh0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC51c2VzVGFuZ2VudFNwYWNlIHx8ICF0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC51c2VzR2xvYmFsUG9zRnJhZ21lbnQpIHtcclxuXHRcdFx0dGhpcy5fcG9pbnRMaWdodFZlcnRleENvbnN0YW50cyA9IG5ldyBBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+KHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0Lm51bVBvaW50TGlnaHRzKTtcclxuXHRcdFx0dGhpcy5fcG9pbnRMaWdodEZyYWdtZW50Q29uc3RhbnRzID0gbmV3IEFycmF5PFNoYWRlclJlZ2lzdGVyRWxlbWVudD4odGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QubnVtUG9pbnRMaWdodHMqMik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9wb2ludExpZ2h0RnJhZ21lbnRDb25zdGFudHMgPSBuZXcgQXJyYXk8U2hhZGVyUmVnaXN0ZXJFbGVtZW50Pih0aGlzLl9zaGFkZXJMaWdodGluZ09iamVjdC5udW1Qb2ludExpZ2h0cyozKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5fc2hhZGVyTGlnaHRpbmdPYmplY3QudXNlc1RhbmdlbnRTcGFjZSkge1xyXG5cdFx0XHR0aGlzLl9kaXJMaWdodFZlcnRleENvbnN0YW50cyA9IG5ldyBBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+KHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0Lm51bURpcmVjdGlvbmFsTGlnaHRzKTtcclxuXHRcdFx0dGhpcy5fZGlyTGlnaHRGcmFnbWVudENvbnN0YW50cyA9IG5ldyBBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+KHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0Lm51bURpcmVjdGlvbmFsTGlnaHRzKjIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fZGlyTGlnaHRGcmFnbWVudENvbnN0YW50cyA9IG5ldyBBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+KHRoaXMuX3NoYWRlckxpZ2h0aW5nT2JqZWN0Lm51bURpcmVjdGlvbmFsTGlnaHRzKjMpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0ID0gU2hhZGVyTGlnaHRpbmdDb21waWxlcjsiXX0=