var Event = require("awayjs-core/lib/events/Event");
var AssetType = require("awayjs-core/lib/library/AssetType");
/**
 *
 * @class away.pool.ScreenPasses
 */
var RenderObjectBase = (function () {
    function RenderObjectBase(pool, renderObjectOwner, renderableClass, stage) {
        var _this = this;
        this._forceSeparateMVP = false;
        this._invalidAnimation = true;
        this._invalidRenderObject = true;
        this._shaderObjects = new Array();
        this._pRequiresBlending = false;
        this._pool = pool;
        this.renderObjectId = renderObjectOwner.id;
        this._renderObjectOwner = renderObjectOwner;
        this._renderableClass = renderableClass;
        this._stage = stage;
        this._onShaderChangeDelegate = function (event) { return _this.onShaderChange(event); };
    }
    Object.defineProperty(RenderObjectBase.prototype, "requiresBlending", {
        /**
         * Indicates whether or not the renderable requires alpha blending during rendering.
         */
        get: function () {
            return this._pRequiresBlending;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderObjectBase.prototype, "renderOrderId", {
        get: function () {
            if (this._invalidAnimation)
                this._updateAnimation();
            return this._renderOrderId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderObjectBase.prototype, "shaderObjects", {
        get: function () {
            if (this._invalidAnimation)
                this._updateAnimation();
            return this._shaderObjects;
        },
        enumerable: true,
        configurable: true
    });
    RenderObjectBase.prototype._iIncludeDependencies = function (shaderObject) {
        if (this._renderObjectOwner.assetType = AssetType.MATERIAL) {
            var material = this._renderObjectOwner;
            shaderObject.useAlphaPremultiplied = material.alphaPremultiplied;
            shaderObject.useBothSides = material.bothSides;
            shaderObject.repeatTextures = material.repeat;
            shaderObject.usesUVTransform = material.animateUVs;
            shaderObject.texture = material.texture;
            shaderObject.color = material.color;
        }
        if (this._forceSeparateMVP)
            shaderObject.globalPosDependencies++;
        shaderObject.outputsNormals = this._pOutputsNormals(shaderObject);
        shaderObject.outputsTangentNormals = shaderObject.outputsNormals && this._pOutputsTangentNormals(shaderObject);
        shaderObject.usesTangentSpace = shaderObject.outputsTangentNormals && this._pUsesTangentSpace(shaderObject);
        if (!shaderObject.usesTangentSpace && shaderObject.viewDirDependencies > 0)
            shaderObject.globalPosDependencies++;
    };
    /**
     * Renders the current pass. Before calling renderPass, activatePass needs to be called with the same index.
     * @param pass The pass used to render the renderable.
     * @param renderable The IRenderable object to draw.
     * @param stage The Stage object used for rendering.
     * @param entityCollector The EntityCollector object that contains the visible scene data.
     * @param viewProjection The view-projection matrix used to project to the screen. This is not the same as
     * camera.viewProjection as it includes the scaling factors when rendering to textures.
     *
     * @internal
     */
    RenderObjectBase.prototype._iRender = function (renderable, shader, camera, viewProjection) {
        if (this._renderObjectOwner.lightPicker)
            this._renderObjectOwner.lightPicker.collectLights(renderable);
        shader._iRender(renderable, camera, viewProjection);
    };
    /**
     *
     */
    RenderObjectBase.prototype.dispose = function () {
        this._pClearScreenShaders();
        var len = this._shaderObjects.length;
        for (var i = 0; i < len; i++)
            this._shaderObjects[i].dispose();
        this._shaderObjects = null;
        this._pool.disposeItem(this._renderObjectOwner);
    };
    /**
     *
     */
    RenderObjectBase.prototype.invalidateRenderObject = function () {
        this._invalidRenderObject = true;
        this._invalidAnimation = true;
    };
    /**
     *
     */
    RenderObjectBase.prototype.invalidateProperties = function () {
        var len = this._shaderObjects.length;
        for (var i = 0; i < len; i++)
            this._shaderObjects[i].invalidateShader();
        this._invalidAnimation = true;
    };
    /**
     *
     */
    RenderObjectBase.prototype.invalidateAnimation = function () {
        this._invalidAnimation = true;
    };
    /**
     *
     * @param renderObjectOwner
     */
    RenderObjectBase.prototype._updateAnimation = function () {
        if (this._invalidRenderObject)
            this._pUpdateRenderObject();
        this._invalidAnimation = false;
        var enabledGPUAnimation = this._getEnabledGPUAnimation();
        var renderOrderId = 0;
        var mult = 1;
        var shaderObject;
        var len = this._shaderObjects.length;
        for (var i = 0; i < len; i++) {
            shaderObject = this._shaderObjects[i];
            if (shaderObject.usesAnimation != enabledGPUAnimation) {
                shaderObject.usesAnimation = enabledGPUAnimation;
                shaderObject.invalidateProgram();
            }
            renderOrderId += shaderObject.programData.id * mult;
            mult *= 1000;
        }
        this._renderOrderId = renderOrderId;
    };
    /**
     * Performs any processing that needs to occur before any of its passes are used.
     *
     * @private
     */
    RenderObjectBase.prototype._pUpdateRenderObject = function () {
        this._invalidRenderObject = false;
        //overrride to update shader object properties
    };
    /**
     * Removes a pass from the renderObjectOwner.
     * @param pass The pass to be removed.
     */
    RenderObjectBase.prototype._pRemoveScreenShader = function (shader) {
        shader.removeEventListener(Event.CHANGE, this._onShaderChangeDelegate);
        this._shaderObjects.splice(this._shaderObjects.indexOf(shader), 1);
    };
    /**
     * Removes all passes from the renderObjectOwner
     */
    RenderObjectBase.prototype._pClearScreenShaders = function () {
        var len = this._shaderObjects.length;
        for (var i = 0; i < len; ++i)
            this._shaderObjects[i].removeEventListener(Event.CHANGE, this._onShaderChangeDelegate);
        this._shaderObjects.length = 0;
    };
    /**
     * Adds a pass to the renderObjectOwner
     * @param pass
     */
    RenderObjectBase.prototype._pAddScreenShader = function (shader) {
        this._shaderObjects.push(shader);
        shader.addEventListener(Event.CHANGE, this._onShaderChangeDelegate);
    };
    /**
     * Sets the render state for a pass that is independent of the rendered object. This needs to be called before
     * calling renderPass. Before activating a pass, the previously used pass needs to be deactivated.
     * @param pass The pass data to activate.
     * @param stage The Stage object which is currently used for rendering.
     * @param camera The camera from which the scene is viewed.
     * @private
     */
    RenderObjectBase.prototype._iActivate = function (shader, camera) {
        shader._iActivate(camera);
    };
    /**
     * Clears the render state for a pass. This needs to be called before activating another pass.
     * @param pass The pass to deactivate.
     * @param stage The Stage used for rendering
     *
     * @internal
     */
    RenderObjectBase.prototype._iDeactivate = function (shader) {
        shader._iDeactivate();
    };
    RenderObjectBase.prototype._iInitConstantData = function (shaderObject) {
    };
    RenderObjectBase.prototype._iGetPreLightingVertexCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    RenderObjectBase.prototype._iGetPreLightingFragmentCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    RenderObjectBase.prototype._iGetVertexCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    RenderObjectBase.prototype._iGetFragmentCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    RenderObjectBase.prototype._iGetNormalVertexCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    RenderObjectBase.prototype._iGetNormalFragmentCode = function (shaderObject, registerCache, sharedRegisters) {
        return "";
    };
    /**
     * Indicates whether or not normals are calculated at all.
     */
    RenderObjectBase.prototype._pOutputsNormals = function (shaderObject) {
        return false;
    };
    /**
     * Indicates whether or not normals are calculated in tangent space.
     */
    RenderObjectBase.prototype._pOutputsTangentNormals = function (shaderObject) {
        return false;
    };
    /**
     * Indicates whether or not normals are allowed in tangent space. This is only the case if no object-space
     * dependencies exist.
     */
    RenderObjectBase.prototype._pUsesTangentSpace = function (shaderObject) {
        return false;
    };
    /**
     * Listener for when a pass's shader code changes. It recalculates the render order id.
     */
    RenderObjectBase.prototype.onShaderChange = function (event) {
        this.invalidateAnimation();
    };
    /**
     * test if animation will be able to run on gpu BEFORE compiling materials
     * test if the shader objects supports animating the animation set in the vertex shader
     * if any object using this material fails to support accelerated animations for any of the shader objects,
     * we should do everything on cpu (otherwise we have the cost of both gpu + cpu animations)
     */
    RenderObjectBase.prototype._getEnabledGPUAnimation = function () {
        if (this._renderObjectOwner.animationSet) {
            this._renderObjectOwner.animationSet.resetGPUCompatibility();
            var owners = this._renderObjectOwner.iOwners;
            var numOwners = owners.length;
            var len = this._shaderObjects.length;
            for (var i = 0; i < len; i++)
                for (var j = 0; j < numOwners; j++)
                    if (owners[j].animator)
                        owners[j].animator.testGPUCompatibility(this._shaderObjects[i]);
            return !this._renderObjectOwner.animationSet.usesCPU;
        }
        return false;
    };
    return RenderObjectBase;
})();
module.exports = RenderObjectBase;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9yZW5kZXJvYmplY3RiYXNlLnRzIl0sIm5hbWVzIjpbIlJlbmRlck9iamVjdEJhc2UiLCJSZW5kZXJPYmplY3RCYXNlLmNvbnN0cnVjdG9yIiwiUmVuZGVyT2JqZWN0QmFzZS5yZXF1aXJlc0JsZW5kaW5nIiwiUmVuZGVyT2JqZWN0QmFzZS5yZW5kZXJPcmRlcklkIiwiUmVuZGVyT2JqZWN0QmFzZS5zaGFkZXJPYmplY3RzIiwiUmVuZGVyT2JqZWN0QmFzZS5faUluY2x1ZGVEZXBlbmRlbmNpZXMiLCJSZW5kZXJPYmplY3RCYXNlLl9pUmVuZGVyIiwiUmVuZGVyT2JqZWN0QmFzZS5kaXNwb3NlIiwiUmVuZGVyT2JqZWN0QmFzZS5pbnZhbGlkYXRlUmVuZGVyT2JqZWN0IiwiUmVuZGVyT2JqZWN0QmFzZS5pbnZhbGlkYXRlUHJvcGVydGllcyIsIlJlbmRlck9iamVjdEJhc2UuaW52YWxpZGF0ZUFuaW1hdGlvbiIsIlJlbmRlck9iamVjdEJhc2UuX3VwZGF0ZUFuaW1hdGlvbiIsIlJlbmRlck9iamVjdEJhc2UuX3BVcGRhdGVSZW5kZXJPYmplY3QiLCJSZW5kZXJPYmplY3RCYXNlLl9wUmVtb3ZlU2NyZWVuU2hhZGVyIiwiUmVuZGVyT2JqZWN0QmFzZS5fcENsZWFyU2NyZWVuU2hhZGVycyIsIlJlbmRlck9iamVjdEJhc2UuX3BBZGRTY3JlZW5TaGFkZXIiLCJSZW5kZXJPYmplY3RCYXNlLl9pQWN0aXZhdGUiLCJSZW5kZXJPYmplY3RCYXNlLl9pRGVhY3RpdmF0ZSIsIlJlbmRlck9iamVjdEJhc2UuX2lJbml0Q29uc3RhbnREYXRhIiwiUmVuZGVyT2JqZWN0QmFzZS5faUdldFByZUxpZ2h0aW5nVmVydGV4Q29kZSIsIlJlbmRlck9iamVjdEJhc2UuX2lHZXRQcmVMaWdodGluZ0ZyYWdtZW50Q29kZSIsIlJlbmRlck9iamVjdEJhc2UuX2lHZXRWZXJ0ZXhDb2RlIiwiUmVuZGVyT2JqZWN0QmFzZS5faUdldEZyYWdtZW50Q29kZSIsIlJlbmRlck9iamVjdEJhc2UuX2lHZXROb3JtYWxWZXJ0ZXhDb2RlIiwiUmVuZGVyT2JqZWN0QmFzZS5faUdldE5vcm1hbEZyYWdtZW50Q29kZSIsIlJlbmRlck9iamVjdEJhc2UuX3BPdXRwdXRzTm9ybWFscyIsIlJlbmRlck9iamVjdEJhc2UuX3BPdXRwdXRzVGFuZ2VudE5vcm1hbHMiLCJSZW5kZXJPYmplY3RCYXNlLl9wVXNlc1RhbmdlbnRTcGFjZSIsIlJlbmRlck9iamVjdEJhc2Uub25TaGFkZXJDaGFuZ2UiLCJSZW5kZXJPYmplY3RCYXNlLl9nZXRFbmFibGVkR1BVQW5pbWF0aW9uIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFPLEtBQUssV0FBZ0IsOEJBQThCLENBQUMsQ0FBQztBQUM1RCxJQUFPLFNBQVMsV0FBZSxtQ0FBbUMsQ0FBQyxDQUFDO0FBbUJwRSxBQUlBOzs7R0FERztJQUNHLGdCQUFnQjtJQThDckJBLFNBOUNLQSxnQkFBZ0JBLENBOENUQSxJQUFxQkEsRUFBRUEsaUJBQW9DQSxFQUFFQSxlQUFnQ0EsRUFBRUEsS0FBV0E7UUE5Q3ZIQyxpQkFvVkNBO1FBbFZPQSxzQkFBaUJBLEdBQVdBLEtBQUtBLENBQUNBO1FBUWpDQSxzQkFBaUJBLEdBQVdBLElBQUlBLENBQUNBO1FBQ2pDQSx5QkFBb0JBLEdBQVdBLElBQUlBLENBQUNBO1FBQ3BDQSxtQkFBY0EsR0FBMkJBLElBQUlBLEtBQUtBLEVBQW9CQSxDQUFDQTtRQUl4RUEsdUJBQWtCQSxHQUFXQSxLQUFLQSxDQUFDQTtRQWdDekNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2xCQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxpQkFBaUJBLENBQUNBLEVBQUVBLENBQUNBO1FBQzNDQSxJQUFJQSxDQUFDQSxrQkFBa0JBLEdBQUdBLGlCQUFpQkEsQ0FBQ0E7UUFDNUNBLElBQUlBLENBQUNBLGdCQUFnQkEsR0FBR0EsZUFBZUEsQ0FBQ0E7UUFDeENBLElBQUlBLENBQUNBLE1B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QUFNQSxHQUEyQkEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxPQUFPQSxDQUFDQTtZQUNyRUEsSUFBSUEsU0FBU0EsR0FBVUEsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7WUFFckNBLElBQUlBLEdBQUdBLEdBQVVBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLE1BQU1BLENBQUNBO1lBQzVDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFVQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxDQUFDQSxFQUFFQTtnQkFDbENBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQVVBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLFNBQVNBLEVBQUVBLENBQUNBLEVBQUVBO29CQUN4Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0E7d0JBQ05BLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLENBQUNBLFFBQVNBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFcEZBLE1BQU1BLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGtCQUFrQkEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7UUFDdERBLENBQUNBO1FBRURBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBO0lBQ2RBLENBQUNBO0lBQ0Y3Qix1QkFBQ0E7QUFBREEsQ0FwVkEsQUFvVkNBLElBQUE7QUFFRCxBQUEwQixpQkFBakIsZ0JBQWdCLENBQUMiLCJmaWxlIjoiY29tcGlsYXRpb24vUmVuZGVyT2JqZWN0QmFzZS5qcyIsInNvdXJjZVJvb3QiOiIuLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWF0cml4M0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9NYXRyaXgzRFwiKTtcbmltcG9ydCBFdmVudFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvRXZlbnRcIik7XG5pbXBvcnQgQXNzZXRUeXBlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9saWJyYXJ5L0Fzc2V0VHlwZVwiKTtcblxuaW1wb3J0IElSZW5kZXJPYmplY3RcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9wb29sL0lSZW5kZXJPYmplY3RcIik7XG5pbXBvcnQgSVJlbmRlck9iamVjdE93bmVyXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvSVJlbmRlck9iamVjdE93bmVyXCIpO1xuaW1wb3J0IENhbWVyYVx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9lbnRpdGllcy9DYW1lcmFcIik7XG5pbXBvcnQgSVJlbmRlcmFibGVPd25lclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvSVJlbmRlcmFibGVPd25lclwiKTtcbmltcG9ydCBNYXRlcmlhbEJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL21hdGVyaWFscy9NYXRlcmlhbEJhc2VcIik7XG5cbmltcG9ydCBTdGFnZVx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL1N0YWdlXCIpO1xuXG5pbXBvcnQgSVJlbmRlck9iamVjdEJhc2VcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vSVJlbmRlck9iamVjdEJhc2VcIik7XG5pbXBvcnQgQW5pbWF0b3JCYXNlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvQW5pbWF0b3JCYXNlXCIpO1xuaW1wb3J0IFNoYWRlck9iamVjdEJhc2VcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJPYmplY3RCYXNlXCIpO1xuaW1wb3J0IFNoYWRlclJlZ2lzdGVyQ2FjaGVcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJDYWNoZVwiKTtcbmltcG9ydCBTaGFkZXJSZWdpc3RlckRhdGFcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJEYXRhXCIpO1xuaW1wb3J0IFJlbmRlck9iamVjdFBvb2xcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9SZW5kZXJPYmplY3RQb29sXCIpO1xuaW1wb3J0IFJlbmRlcmFibGVCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcG9vbC9SZW5kZXJhYmxlQmFzZVwiKTtcbmltcG9ydCBJUmVuZGVyYWJsZUNsYXNzXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcG9vbC9JUmVuZGVyYWJsZUNsYXNzXCIpO1xuXG4vKipcbiAqXG4gKiBAY2xhc3MgYXdheS5wb29sLlNjcmVlblBhc3Nlc1xuICovXG5jbGFzcyBSZW5kZXJPYmplY3RCYXNlIGltcGxlbWVudHMgSVJlbmRlck9iamVjdCwgSVJlbmRlck9iamVjdEJhc2Vcbntcblx0cHVibGljIF9mb3JjZVNlcGFyYXRlTVZQOmJvb2xlYW4gPSBmYWxzZTtcblxuXHRwcml2YXRlIF9wb29sOlJlbmRlck9iamVjdFBvb2w7XG5cdHB1YmxpYyBfcmVuZGVyT2JqZWN0T3duZXI6SVJlbmRlck9iamVjdE93bmVyO1xuXHRwdWJsaWMgX3JlbmRlcmFibGVDbGFzczpJUmVuZGVyYWJsZUNsYXNzO1xuXHRwdWJsaWMgX3N0YWdlOlN0YWdlO1xuXG5cdHByaXZhdGUgX3JlbmRlck9yZGVySWQ6bnVtYmVyO1xuXHRwcml2YXRlIF9pbnZhbGlkQW5pbWF0aW9uOmJvb2xlYW4gPSB0cnVlO1xuXHRwcml2YXRlIF9pbnZhbGlkUmVuZGVyT2JqZWN0OmJvb2xlYW4gPSB0cnVlO1xuXHRwcml2YXRlIF9zaGFkZXJPYmplY3RzOkFycmF5PFNoYWRlck9iamVjdEJhc2U+ID0gbmV3IEFycmF5PFNoYWRlck9iamVjdEJhc2U+KCk7XG5cblxuXG5cdHB1YmxpYyBfcFJlcXVpcmVzQmxlbmRpbmc6Ym9vbGVhbiA9IGZhbHNlO1xuXG5cdHByaXZhdGUgX29uU2hhZGVyQ2hhbmdlRGVsZWdhdGU6KGV2ZW50OkV2ZW50KSA9PiB2b2lkO1xuXG5cdHB1YmxpYyByZW5kZXJPYmplY3RJZDpudW1iZXI7XG5cblx0LyoqXG5cdCAqIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0aGUgcmVuZGVyYWJsZSByZXF1aXJlcyBhbHBoYSBibGVuZGluZyBkdXJpbmcgcmVuZGVyaW5nLlxuXHQgKi9cblx0cHVibGljIGdldCByZXF1aXJlc0JsZW5kaW5nKCk6Ym9vbGVhblxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3BSZXF1aXJlc0JsZW5kaW5nO1xuXHR9XG5cblx0cHVibGljIGdldCByZW5kZXJPcmRlcklkKCk6bnVtYmVyXG5cdHtcblx0XHRpZiAodGhpcy5faW52YWxpZEFuaW1hdGlvbilcblx0XHRcdHRoaXMuX3VwZGF0ZUFuaW1hdGlvbigpO1xuXG5cdFx0cmV0dXJuIHRoaXMuX3JlbmRlck9yZGVySWQ7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IHNoYWRlck9iamVjdHMoKTpBcnJheTxTaGFkZXJPYmplY3RCYXNlPlxuXHR7XG5cdFx0aWYgKHRoaXMuX2ludmFsaWRBbmltYXRpb24pXG5cdFx0XHR0aGlzLl91cGRhdGVBbmltYXRpb24oKTtcblxuXHRcdHJldHVybiB0aGlzLl9zaGFkZXJPYmplY3RzO1xuXHR9XG5cblx0Y29uc3RydWN0b3IocG9vbDpSZW5kZXJPYmplY3RQb29sLCByZW5kZXJPYmplY3RPd25lcjpJUmVuZGVyT2JqZWN0T3duZXIsIHJlbmRlcmFibGVDbGFzczpJUmVuZGVyYWJsZUNsYXNzLCBzdGFnZTpTdGFnZSlcblx0e1xuXHRcdHRoaXMuX3Bvb2wgPSBwb29sO1xuXHRcdHRoaXMucmVuZGVyT2JqZWN0SWQgPSByZW5kZXJPYmplY3RPd25lci5pZDtcblx0XHR0aGlzLl9yZW5kZXJPYmplY3RPd25lciA9IHJlbmRlck9iamVjdE93bmVyO1xuXHRcdHRoaXMuX3JlbmRlcmFibGVDbGFzcyA9IHJlbmRlcmFibGVDbGFzcztcblx0XHR0aGlzLl9zdGFnZSA9IHN0YWdlO1xuXG5cblx0XHR0aGlzLl9vblNoYWRlckNoYW5nZURlbGVnYXRlID0gKGV2ZW50OkV2ZW50KSA9PiB0aGlzLm9uU2hhZGVyQ2hhbmdlKGV2ZW50KTtcblx0fVxuXG5cdHB1YmxpYyBfaUluY2x1ZGVEZXBlbmRlbmNpZXMoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UpXG5cdHtcblx0XHRpZiAodGhpcy5fcmVuZGVyT2JqZWN0T3duZXIuYXNzZXRUeXBlID0gQXNzZXRUeXBlLk1BVEVSSUFMKSB7XG5cdFx0XHR2YXIgbWF0ZXJpYWw6TWF0ZXJpYWxCYXNlID0gPE1hdGVyaWFsQmFzZT4gdGhpcy5fcmVuZGVyT2JqZWN0T3duZXI7XG5cdFx0XHRzaGFkZXJPYmplY3QudXNlQWxwaGFQcmVtdWx0aXBsaWVkID0gbWF0ZXJpYWwuYWxwaGFQcmVtdWx0aXBsaWVkO1xuXHRcdFx0c2hhZGVyT2JqZWN0LnVzZUJvdGhTaWRlcyA9IG1hdGVyaWFsLmJvdGhTaWRlcztcblx0XHRcdHNoYWRlck9iamVjdC5yZXBlYXRUZXh0dXJlcyA9IG1hdGVyaWFsLnJlcGVhdDtcblx0XHRcdHNoYWRlck9iamVjdC51c2VzVVZUcmFuc2Zvcm0gPSBtYXRlcmlhbC5hbmltYXRlVVZzO1xuXHRcdFx0c2hhZGVyT2JqZWN0LnRleHR1cmUgPSBtYXRlcmlhbC50ZXh0dXJlO1xuXHRcdFx0c2hhZGVyT2JqZWN0LmNvbG9yID0gbWF0ZXJpYWwuY29sb3I7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX2ZvcmNlU2VwYXJhdGVNVlApXG5cdFx0XHRzaGFkZXJPYmplY3QuZ2xvYmFsUG9zRGVwZW5kZW5jaWVzKys7XG5cblx0XHRzaGFkZXJPYmplY3Qub3V0cHV0c05vcm1hbHMgPSB0aGlzLl9wT3V0cHV0c05vcm1hbHMoc2hhZGVyT2JqZWN0KTtcblx0XHRzaGFkZXJPYmplY3Qub3V0cHV0c1RhbmdlbnROb3JtYWxzID0gc2hhZGVyT2JqZWN0Lm91dHB1dHNOb3JtYWxzICYmIHRoaXMuX3BPdXRwdXRzVGFuZ2VudE5vcm1hbHMoc2hhZGVyT2JqZWN0KTtcblx0XHRzaGFkZXJPYmplY3QudXNlc1RhbmdlbnRTcGFjZSA9IHNoYWRlck9iamVjdC5vdXRwdXRzVGFuZ2VudE5vcm1hbHMgJiYgdGhpcy5fcFVzZXNUYW5nZW50U3BhY2Uoc2hhZGVyT2JqZWN0KTtcblxuXHRcdGlmICghc2hhZGVyT2JqZWN0LnVzZXNUYW5nZW50U3BhY2UgJiYgc2hhZGVyT2JqZWN0LnZpZXdEaXJEZXBlbmRlbmNpZXMgPiAwKVxuXHRcdFx0c2hhZGVyT2JqZWN0Lmdsb2JhbFBvc0RlcGVuZGVuY2llcysrO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbmRlcnMgdGhlIGN1cnJlbnQgcGFzcy4gQmVmb3JlIGNhbGxpbmcgcmVuZGVyUGFzcywgYWN0aXZhdGVQYXNzIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSBzYW1lIGluZGV4LlxuXHQgKiBAcGFyYW0gcGFzcyBUaGUgcGFzcyB1c2VkIHRvIHJlbmRlciB0aGUgcmVuZGVyYWJsZS5cblx0ICogQHBhcmFtIHJlbmRlcmFibGUgVGhlIElSZW5kZXJhYmxlIG9iamVjdCB0byBkcmF3LlxuXHQgKiBAcGFyYW0gc3RhZ2UgVGhlIFN0YWdlIG9iamVjdCB1c2VkIGZvciByZW5kZXJpbmcuXG5cdCAqIEBwYXJhbSBlbnRpdHlDb2xsZWN0b3IgVGhlIEVudGl0eUNvbGxlY3RvciBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgdmlzaWJsZSBzY2VuZSBkYXRhLlxuXHQgKiBAcGFyYW0gdmlld1Byb2plY3Rpb24gVGhlIHZpZXctcHJvamVjdGlvbiBtYXRyaXggdXNlZCB0byBwcm9qZWN0IHRvIHRoZSBzY3JlZW4uIFRoaXMgaXMgbm90IHRoZSBzYW1lIGFzXG5cdCAqIGNhbWVyYS52aWV3UHJvamVjdGlvbiBhcyBpdCBpbmNsdWRlcyB0aGUgc2NhbGluZyBmYWN0b3JzIHdoZW4gcmVuZGVyaW5nIHRvIHRleHR1cmVzLlxuXHQgKlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHB1YmxpYyBfaVJlbmRlcihyZW5kZXJhYmxlOlJlbmRlcmFibGVCYXNlLCBzaGFkZXI6U2hhZGVyT2JqZWN0QmFzZSwgY2FtZXJhOkNhbWVyYSwgdmlld1Byb2plY3Rpb246TWF0cml4M0QpXG5cdHtcblx0XHRpZiAodGhpcy5fcmVuZGVyT2JqZWN0T3duZXIubGlnaHRQaWNrZXIpXG5cdFx0XHR0aGlzLl9yZW5kZXJPYmplY3RPd25lci5saWdodFBpY2tlci5jb2xsZWN0TGlnaHRzKHJlbmRlcmFibGUpO1xuXG5cdFx0c2hhZGVyLl9pUmVuZGVyKHJlbmRlcmFibGUsIGNhbWVyYSwgdmlld1Byb2plY3Rpb24pO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgZGlzcG9zZSgpXG5cdHtcblx0XHR0aGlzLl9wQ2xlYXJTY3JlZW5TaGFkZXJzKCk7XG5cblx0XHR2YXIgbGVuOm51bWJlciA9IHRoaXMuX3NoYWRlck9iamVjdHMubGVuZ3RoO1xuXHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IGxlbjsgaSsrKVxuXHRcdFx0dGhpcy5fc2hhZGVyT2JqZWN0c1tpXS5kaXNwb3NlKCk7XG5cblx0XHR0aGlzLl9zaGFkZXJPYmplY3RzID0gbnVsbDtcblxuXHRcdHRoaXMuX3Bvb2wuZGlzcG9zZUl0ZW0odGhpcy5fcmVuZGVyT2JqZWN0T3duZXIpO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgaW52YWxpZGF0ZVJlbmRlck9iamVjdCgpXG5cdHtcblx0XHR0aGlzLl9pbnZhbGlkUmVuZGVyT2JqZWN0ID0gdHJ1ZTtcblx0XHR0aGlzLl9pbnZhbGlkQW5pbWF0aW9uID0gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGludmFsaWRhdGVQcm9wZXJ0aWVzKClcblx0e1xuXHRcdHZhciBsZW46bnVtYmVyID0gdGhpcy5fc2hhZGVyT2JqZWN0cy5sZW5ndGg7XG5cdFx0Zm9yICh2YXIgaTpudW1iZXIgPSAwOyBpIDwgbGVuOyBpKyspXG5cdFx0XHR0aGlzLl9zaGFkZXJPYmplY3RzW2ldLmludmFsaWRhdGVTaGFkZXIoKTtcblxuXHRcdHRoaXMuX2ludmFsaWRBbmltYXRpb24gPSB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgaW52YWxpZGF0ZUFuaW1hdGlvbigpXG5cdHtcblx0XHR0aGlzLl9pbnZhbGlkQW5pbWF0aW9uID0gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0gcmVuZGVyT2JqZWN0T3duZXJcblx0ICovXG5cdHByaXZhdGUgX3VwZGF0ZUFuaW1hdGlvbigpXG5cdHtcblx0XHRpZiAodGhpcy5faW52YWxpZFJlbmRlck9iamVjdClcblx0XHRcdHRoaXMuX3BVcGRhdGVSZW5kZXJPYmplY3QoKTtcblxuXHRcdHRoaXMuX2ludmFsaWRBbmltYXRpb24gPSBmYWxzZTtcblxuXHRcdHZhciBlbmFibGVkR1BVQW5pbWF0aW9uOmJvb2xlYW4gPSB0aGlzLl9nZXRFbmFibGVkR1BVQW5pbWF0aW9uKCk7XG5cblx0XHR2YXIgcmVuZGVyT3JkZXJJZCA9IDA7XG5cdFx0dmFyIG11bHQ6bnVtYmVyID0gMTtcblx0XHR2YXIgc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2U7XG5cdFx0dmFyIGxlbjpudW1iZXIgPSB0aGlzLl9zaGFkZXJPYmplY3RzLmxlbmd0aDtcblx0XHRmb3IgKHZhciBpOm51bWJlciA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0c2hhZGVyT2JqZWN0ID0gdGhpcy5fc2hhZGVyT2JqZWN0c1tpXTtcblxuXHRcdFx0aWYgKHNoYWRlck9iamVjdC51c2VzQW5pbWF0aW9uICE9IGVuYWJsZWRHUFVBbmltYXRpb24pIHtcblx0XHRcdFx0c2hhZGVyT2JqZWN0LnVzZXNBbmltYXRpb24gPSBlbmFibGVkR1BVQW5pbWF0aW9uO1xuXHRcdFx0XHRzaGFkZXJPYmplY3QuaW52YWxpZGF0ZVByb2dyYW0oKTtcblx0XHRcdH1cblxuXHRcdFx0cmVuZGVyT3JkZXJJZCArPSBzaGFkZXJPYmplY3QucHJvZ3JhbURhdGEuaWQqbXVsdDtcblx0XHRcdG11bHQgKj0gMTAwMDtcblx0XHR9XG5cblx0XHR0aGlzLl9yZW5kZXJPcmRlcklkID0gcmVuZGVyT3JkZXJJZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBQZXJmb3JtcyBhbnkgcHJvY2Vzc2luZyB0aGF0IG5lZWRzIHRvIG9jY3VyIGJlZm9yZSBhbnkgb2YgaXRzIHBhc3NlcyBhcmUgdXNlZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHB1YmxpYyBfcFVwZGF0ZVJlbmRlck9iamVjdCgpXG5cdHtcblx0XHR0aGlzLl9pbnZhbGlkUmVuZGVyT2JqZWN0ID0gZmFsc2U7XG5cblx0XHQvL292ZXJycmlkZSB0byB1cGRhdGUgc2hhZGVyIG9iamVjdCBwcm9wZXJ0aWVzXG5cdH1cblxuXHQvKipcblx0ICogUmVtb3ZlcyBhIHBhc3MgZnJvbSB0aGUgcmVuZGVyT2JqZWN0T3duZXIuXG5cdCAqIEBwYXJhbSBwYXNzIFRoZSBwYXNzIHRvIGJlIHJlbW92ZWQuXG5cdCAqL1xuXHRwdWJsaWMgX3BSZW1vdmVTY3JlZW5TaGFkZXIoc2hhZGVyOlNoYWRlck9iamVjdEJhc2UpXG5cdHtcblx0XHRzaGFkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudC5DSEFOR0UsIHRoaXMuX29uU2hhZGVyQ2hhbmdlRGVsZWdhdGUpO1xuXHRcdHRoaXMuX3NoYWRlck9iamVjdHMuc3BsaWNlKHRoaXMuX3NoYWRlck9iamVjdHMuaW5kZXhPZihzaGFkZXIpLCAxKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBwYXNzZXMgZnJvbSB0aGUgcmVuZGVyT2JqZWN0T3duZXJcblx0ICovXG5cdHB1YmxpYyBfcENsZWFyU2NyZWVuU2hhZGVycygpXG5cdHtcblx0XHR2YXIgbGVuOm51bWJlciA9IHRoaXMuX3NoYWRlck9iamVjdHMubGVuZ3RoO1xuXHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IGxlbjsgKytpKVxuXHRcdFx0dGhpcy5fc2hhZGVyT2JqZWN0c1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50LkNIQU5HRSwgdGhpcy5fb25TaGFkZXJDaGFuZ2VEZWxlZ2F0ZSk7XG5cblx0XHR0aGlzLl9zaGFkZXJPYmplY3RzLmxlbmd0aCA9IDA7XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyBhIHBhc3MgdG8gdGhlIHJlbmRlck9iamVjdE93bmVyXG5cdCAqIEBwYXJhbSBwYXNzXG5cdCAqL1xuXHRwdWJsaWMgX3BBZGRTY3JlZW5TaGFkZXIoc2hhZGVyOlNoYWRlck9iamVjdEJhc2UpXG5cdHtcblx0XHR0aGlzLl9zaGFkZXJPYmplY3RzLnB1c2goc2hhZGVyKTtcblx0XHRzaGFkZXIuYWRkRXZlbnRMaXN0ZW5lcihFdmVudC5DSEFOR0UsIHRoaXMuX29uU2hhZGVyQ2hhbmdlRGVsZWdhdGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldHMgdGhlIHJlbmRlciBzdGF0ZSBmb3IgYSBwYXNzIHRoYXQgaXMgaW5kZXBlbmRlbnQgb2YgdGhlIHJlbmRlcmVkIG9iamVjdC4gVGhpcyBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlXG5cdCAqIGNhbGxpbmcgcmVuZGVyUGFzcy4gQmVmb3JlIGFjdGl2YXRpbmcgYSBwYXNzLCB0aGUgcHJldmlvdXNseSB1c2VkIHBhc3MgbmVlZHMgdG8gYmUgZGVhY3RpdmF0ZWQuXG5cdCAqIEBwYXJhbSBwYXNzIFRoZSBwYXNzIGRhdGEgdG8gYWN0aXZhdGUuXG5cdCAqIEBwYXJhbSBzdGFnZSBUaGUgU3RhZ2Ugb2JqZWN0IHdoaWNoIGlzIGN1cnJlbnRseSB1c2VkIGZvciByZW5kZXJpbmcuXG5cdCAqIEBwYXJhbSBjYW1lcmEgVGhlIGNhbWVyYSBmcm9tIHdoaWNoIHRoZSBzY2VuZSBpcyB2aWV3ZWQuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRwdWJsaWMgX2lBY3RpdmF0ZShzaGFkZXI6U2hhZGVyT2JqZWN0QmFzZSwgY2FtZXJhOkNhbWVyYSkgLy8gQVJDQU5FXG5cdHtcblx0XHRzaGFkZXIuX2lBY3RpdmF0ZShjYW1lcmEpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENsZWFycyB0aGUgcmVuZGVyIHN0YXRlIGZvciBhIHBhc3MuIFRoaXMgbmVlZHMgdG8gYmUgY2FsbGVkIGJlZm9yZSBhY3RpdmF0aW5nIGFub3RoZXIgcGFzcy5cblx0ICogQHBhcmFtIHBhc3MgVGhlIHBhc3MgdG8gZGVhY3RpdmF0ZS5cblx0ICogQHBhcmFtIHN0YWdlIFRoZSBTdGFnZSB1c2VkIGZvciByZW5kZXJpbmdcblx0ICpcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwdWJsaWMgX2lEZWFjdGl2YXRlKHNoYWRlcjpTaGFkZXJPYmplY3RCYXNlKSAvLyBBUkNBTkVcblx0e1xuXHRcdHNoYWRlci5faURlYWN0aXZhdGUoKTtcblx0fVxuXG5cdHB1YmxpYyBfaUluaXRDb25zdGFudERhdGEoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UpXG5cdHtcblxuXHR9XG5cblx0cHVibGljIF9pR2V0UHJlTGlnaHRpbmdWZXJ0ZXhDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCByZWdpc3RlckNhY2hlOlNoYWRlclJlZ2lzdGVyQ2FjaGUsIHNoYXJlZFJlZ2lzdGVyczpTaGFkZXJSZWdpc3RlckRhdGEpOnN0cmluZ1xuXHR7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblxuXHRwdWJsaWMgX2lHZXRQcmVMaWdodGluZ0ZyYWdtZW50Q29kZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgcmVnaXN0ZXJDYWNoZTpTaGFkZXJSZWdpc3RlckNhY2hlLCBzaGFyZWRSZWdpc3RlcnM6U2hhZGVyUmVnaXN0ZXJEYXRhKTpzdHJpbmdcblx0e1xuXHRcdHJldHVybiBcIlwiO1xuXHR9XG5cblx0cHVibGljIF9pR2V0VmVydGV4Q29kZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgcmVnaXN0ZXJDYWNoZTpTaGFkZXJSZWdpc3RlckNhY2hlLCBzaGFyZWRSZWdpc3RlcnM6U2hhZGVyUmVnaXN0ZXJEYXRhKTpzdHJpbmdcblx0e1xuXHRcdHJldHVybiBcIlwiO1xuXHR9XG5cblx0cHVibGljIF9pR2V0RnJhZ21lbnRDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCByZWdpc3RlckNhY2hlOlNoYWRlclJlZ2lzdGVyQ2FjaGUsIHNoYXJlZFJlZ2lzdGVyczpTaGFkZXJSZWdpc3RlckRhdGEpOnN0cmluZ1xuXHR7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblxuXHRwdWJsaWMgX2lHZXROb3JtYWxWZXJ0ZXhDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCByZWdpc3RlckNhY2hlOlNoYWRlclJlZ2lzdGVyQ2FjaGUsIHNoYXJlZFJlZ2lzdGVyczpTaGFkZXJSZWdpc3RlckRhdGEpOnN0cmluZ1xuXHR7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblxuXHRwdWJsaWMgX2lHZXROb3JtYWxGcmFnbWVudENvZGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIHJlZ2lzdGVyQ2FjaGU6U2hhZGVyUmVnaXN0ZXJDYWNoZSwgc2hhcmVkUmVnaXN0ZXJzOlNoYWRlclJlZ2lzdGVyRGF0YSk6c3RyaW5nXG5cdHtcblx0XHRyZXR1cm4gXCJcIjtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbmRpY2F0ZXMgd2hldGhlciBvciBub3Qgbm9ybWFscyBhcmUgY2FsY3VsYXRlZCBhdCBhbGwuXG5cdCAqL1xuXHRwdWJsaWMgX3BPdXRwdXRzTm9ybWFscyhzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSk6Ym9vbGVhblxuXHR7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCBub3JtYWxzIGFyZSBjYWxjdWxhdGVkIGluIHRhbmdlbnQgc3BhY2UuXG5cdCAqL1xuXHRwdWJsaWMgX3BPdXRwdXRzVGFuZ2VudE5vcm1hbHMoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UpOmJvb2xlYW5cblx0e1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbmRpY2F0ZXMgd2hldGhlciBvciBub3Qgbm9ybWFscyBhcmUgYWxsb3dlZCBpbiB0YW5nZW50IHNwYWNlLiBUaGlzIGlzIG9ubHkgdGhlIGNhc2UgaWYgbm8gb2JqZWN0LXNwYWNlXG5cdCAqIGRlcGVuZGVuY2llcyBleGlzdC5cblx0ICovXG5cdHB1YmxpYyBfcFVzZXNUYW5nZW50U3BhY2Uoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UpOmJvb2xlYW5cblx0e1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMaXN0ZW5lciBmb3Igd2hlbiBhIHBhc3MncyBzaGFkZXIgY29kZSBjaGFuZ2VzLiBJdCByZWNhbGN1bGF0ZXMgdGhlIHJlbmRlciBvcmRlciBpZC5cblx0ICovXG5cdHByaXZhdGUgb25TaGFkZXJDaGFuZ2UoZXZlbnQ6RXZlbnQpXG5cdHtcblx0XHR0aGlzLmludmFsaWRhdGVBbmltYXRpb24oKTtcblx0fVxuXG5cblx0LyoqXG5cdCAqIHRlc3QgaWYgYW5pbWF0aW9uIHdpbGwgYmUgYWJsZSB0byBydW4gb24gZ3B1IEJFRk9SRSBjb21waWxpbmcgbWF0ZXJpYWxzXG5cdCAqIHRlc3QgaWYgdGhlIHNoYWRlciBvYmplY3RzIHN1cHBvcnRzIGFuaW1hdGluZyB0aGUgYW5pbWF0aW9uIHNldCBpbiB0aGUgdmVydGV4IHNoYWRlclxuXHQgKiBpZiBhbnkgb2JqZWN0IHVzaW5nIHRoaXMgbWF0ZXJpYWwgZmFpbHMgdG8gc3VwcG9ydCBhY2NlbGVyYXRlZCBhbmltYXRpb25zIGZvciBhbnkgb2YgdGhlIHNoYWRlciBvYmplY3RzLFxuXHQgKiB3ZSBzaG91bGQgZG8gZXZlcnl0aGluZyBvbiBjcHUgKG90aGVyd2lzZSB3ZSBoYXZlIHRoZSBjb3N0IG9mIGJvdGggZ3B1ICsgY3B1IGFuaW1hdGlvbnMpXG5cdCAqL1xuXHRwcml2YXRlIF9nZXRFbmFibGVkR1BVQW5pbWF0aW9uKCk6Ym9vbGVhblxuXHR7XG5cdFx0aWYgKHRoaXMuX3JlbmRlck9iamVjdE93bmVyLmFuaW1hdGlvblNldCkge1xuXHRcdFx0dGhpcy5fcmVuZGVyT2JqZWN0T3duZXIuYW5pbWF0aW9uU2V0LnJlc2V0R1BVQ29tcGF0aWJpbGl0eSgpO1xuXG5cdFx0XHR2YXIgb3duZXJzOkFycmF5PElSZW5kZXJhYmxlT3duZXI+ID0gdGhpcy5fcmVuZGVyT2JqZWN0T3duZXIuaU93bmVycztcblx0XHRcdHZhciBudW1Pd25lcnM6bnVtYmVyID0gb3duZXJzLmxlbmd0aDtcblxuXHRcdFx0dmFyIGxlbjpudW1iZXIgPSB0aGlzLl9zaGFkZXJPYmplY3RzLmxlbmd0aDtcblx0XHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IGxlbjsgaSsrKVxuXHRcdFx0XHRmb3IgKHZhciBqOm51bWJlciA9IDA7IGogPCBudW1Pd25lcnM7IGorKylcblx0XHRcdFx0XHRpZiAob3duZXJzW2pdLmFuaW1hdG9yKVxuXHRcdFx0XHRcdFx0KDxBbmltYXRvckJhc2U+IG93bmVyc1tqXS5hbmltYXRvcikudGVzdEdQVUNvbXBhdGliaWxpdHkodGhpcy5fc2hhZGVyT2JqZWN0c1tpXSk7XG5cblx0XHRcdHJldHVybiAhdGhpcy5fcmVuZGVyT2JqZWN0T3duZXIuYW5pbWF0aW9uU2V0LnVzZXNDUFU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbmV4cG9ydCA9IFJlbmRlck9iamVjdEJhc2U7Il19