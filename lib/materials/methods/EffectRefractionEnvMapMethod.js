var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var EffectMethodBase = require("awayjs-renderergl/lib/materials/methods/EffectMethodBase");
var ShaderCompilerHelper = require("awayjs-renderergl/lib/materials/utils/ShaderCompilerHelper");
/**
 * EffectRefractionEnvMapMethod provides a method to add refracted transparency based on cube maps.
 */
var EffectRefractionEnvMapMethod = (function (_super) {
    __extends(EffectRefractionEnvMapMethod, _super);
    /**
     * Creates a new EffectRefractionEnvMapMethod object. Example values for dispersion are: dispersionR: -0.03, dispersionG: -0.01, dispersionB: = .0015
     *
     * @param envMap The environment map containing the refracted scene.
     * @param refractionIndex The refractive index of the material.
     * @param dispersionR The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
     * @param dispersionG The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
     * @param dispersionB The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
     */
    function EffectRefractionEnvMapMethod(envMap, refractionIndex, dispersionR, dispersionG, dispersionB) {
        if (refractionIndex === void 0) { refractionIndex = .1; }
        if (dispersionR === void 0) { dispersionR = 0; }
        if (dispersionG === void 0) { dispersionG = 0; }
        if (dispersionB === void 0) { dispersionB = 0; }
        _super.call(this);
        this._dispersionR = 0;
        this._dispersionG = 0;
        this._dispersionB = 0;
        this._alpha = 1;
        this._envMap = envMap;
        this._dispersionR = dispersionR;
        this._dispersionG = dispersionG;
        this._dispersionB = dispersionB;
        this._useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
        this._refractionIndex = refractionIndex;
    }
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitConstants = function (shaderObject, methodVO) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index + 4] = 1;
        data[index + 5] = 0;
        data[index + 7] = 1;
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitVO = function (shaderObject, methodVO) {
        methodVO.needsNormals = true;
        methodVO.needsView = true;
    };
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "envMap", {
        /**
         * The cube environment map to use for the refraction.
         */
        get: function () {
            return this._envMap;
        },
        set: function (value) {
            this._envMap = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "refractionIndex", {
        /**
         * The refractive index of the material.
         */
        get: function () {
            return this._refractionIndex;
        },
        set: function (value) {
            this._refractionIndex = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionR", {
        /**
         * The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionR;
        },
        set: function (value) {
            this._dispersionR = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionG", {
        /**
         * The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionG;
        },
        set: function (value) {
            this._dispersionG = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionB", {
        /**
         * The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionB;
        },
        set: function (value) {
            this._dispersionB = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "alpha", {
        /**
         * The amount of transparency of the object. Warning: the alpha applies to the refracted color, not the actual
         * material. A value of 1 will make it appear fully transparent.
         */
        get: function () {
            return this._alpha;
        },
        set: function (value) {
            this._alpha = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iActivate = function (shaderObject, methodVO, stage) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index] = this._dispersionR + this._refractionIndex;
        if (this._useDispersion) {
            data[index + 1] = this._dispersionG + this._refractionIndex;
            data[index + 2] = this._dispersionB + this._refractionIndex;
        }
        data[index + 3] = this._alpha;
        stage.activateCubeTexture(methodVO.texturesIndex, this._envMap);
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iGetFragmentCode = function (shaderObject, methodVO, targetReg, registerCache, sharedRegisters) {
        // todo: data2.x could use common reg, so only 1 reg is used
        var data = registerCache.getFreeFragmentConstant();
        var data2 = registerCache.getFreeFragmentConstant();
        var code = "";
        var cubeMapReg = registerCache.getFreeTextureReg();
        var refractionDir;
        var refractionColor;
        var temp;
        methodVO.texturesIndex = cubeMapReg.index;
        methodVO.fragmentConstantsIndex = data.index * 4;
        refractionDir = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionDir, 1);
        refractionColor = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionColor, 1);
        temp = registerCache.getFreeFragmentVectorTemp();
        var viewDirReg = sharedRegisters.viewDirFragment;
        var normalReg = sharedRegisters.normalFragment;
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".x, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".x, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
        code += ShaderCompilerHelper.getTexCubeSampleCode(refractionColor, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "sub " + refractionColor + ".w, " + refractionColor + ".w, fc0.x	\n" + "kil " + refractionColor + ".w\n";
        if (this._useDispersion) {
            // GREEN
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".y, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".y, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".y, " + temp + ".y\n";
            // BLUE
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".z, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".z, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".z, " + temp + ".z\n";
        }
        registerCache.removeFragmentTempUsage(refractionDir);
        code += "sub " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + targetReg + ".xyz\n" + "mul " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + data + ".w\n" + "add " + targetReg + ".xyz, " + targetReg + ".xyz, " + refractionColor + ".xyz\n";
        registerCache.removeFragmentTempUsage(refractionColor);
        // restore
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        return code;
    };
    return EffectRefractionEnvMapMethod;
})(EffectMethodBase);
module.exports = EffectRefractionEnvMapMethod;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvbWV0aG9kcy9lZmZlY3RyZWZyYWN0aW9uZW52bWFwbWV0aG9kLnRzIl0sIm5hbWVzIjpbIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmNvbnN0cnVjdG9yIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5pSW5pdENvbnN0YW50cyIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuaUluaXRWTyIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuZW52TWFwIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5yZWZyYWN0aW9uSW5kZXgiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmRpc3BlcnNpb25SIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5kaXNwZXJzaW9uRyIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuZGlzcGVyc2lvbkIiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmFscGhhIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5pQWN0aXZhdGUiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmlHZXRGcmFnbWVudENvZGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQVNBLElBQU8sZ0JBQWdCLFdBQWUsMERBQTBELENBQUMsQ0FBQztBQUNsRyxJQUFPLG9CQUFvQixXQUFjLDREQUE0RCxDQUFDLENBQUM7QUFFdkcsQUFHQTs7R0FERztJQUNHLDRCQUE0QjtJQUFTQSxVQUFyQ0EsNEJBQTRCQSxVQUF5QkE7SUFXMURBOzs7Ozs7OztPQVFHQTtJQUNIQSxTQXBCS0EsNEJBQTRCQSxDQW9CckJBLE1BQXNCQSxFQUFFQSxlQUEyQkEsRUFBRUEsV0FBc0JBLEVBQUVBLFdBQXNCQSxFQUFFQSxXQUFzQkE7UUFBbkdDLCtCQUEyQkEsR0FBM0JBLG9CQUEyQkE7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QUNBLHlCQUF5QkEsRUFBRUEsQ0FBQ0E7UUFDNURBLGFBQWFBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsZUFBZUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFeERBLElBQUlBLEdBQUdBLGFBQWFBLENBQUNBLHlCQUF5QkEsRUFBRUEsQ0FBQ0E7UUFFakRBLElBQUlBLFVBQVVBLEdBQXlCQSxlQUFlQSxDQUFDQSxlQUFlQSxDQUFDQTtRQUN2RUEsSUFBSUEsU0FBU0EsR0FBeUJBLGVBQWVBLENBQUNBLGNBQWNBLENBQUNBO1FBRXJFQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUUvREEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsUUFBUUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FDNUVBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN2REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN2REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FFdENBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FFL0RBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLElBQUlBLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLElBQUlBLEdBQ2pFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxRQUFRQSxHQUM5RUEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsQ0FBQ0E7UUFDOURBLElBQUlBLElBQUlBLG9CQUFvQkEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxlQUFlQSxFQUFFQSxVQUFVQSxFQUFFQSxJQUFJQSxDQUFDQSxPQUFPQSxFQUFFQSxZQUFZQSxDQUFDQSxpQkFBaUJBLEVBQUVBLFlBQVlBLENBQUNBLGFBQWFBLEVBQUVBLGFBQWFBLENBQUNBLEdBQ3RLQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxjQUFjQSxHQUNwRUEsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsTUFBTUEsQ0FBQ0E7UUFFbkNBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3pCQSxBQUNBQSxRQURRQTtZQUNSQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUM1RUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUV0Q0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUUvREEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsSUFBSUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsSUFBSUEsR0FDakVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQzlFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxDQUFDQTtZQUM5REEsSUFBSUEsSUFBSUEsb0JBQW9CQSxDQUFDQSxvQkFBb0JBLENBQUNBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLENBQUNBLE9BQU9BLEVBQUVBLFlBQVlBLENBQUNBLGlCQUFpQkEsRUFBRUEsWUFBWUEsQ0FBQ0EsYUFBYUEsRUFBRUEsYUFBYUEsQ0FBQ0EsR0FDM0pBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLENBQUNBO1lBRW5EQSxBQUNBQSxPQURPQTtZQUNQQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUM1RUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUV0Q0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUUvREEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsSUFBSUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsSUFBSUEsR0FDakVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQzlFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxDQUFDQTtZQUM5REEsSUFBSUEsSUFBSUEsb0JBQW9CQSxDQUFDQSxvQkFBb0JBLENBQUNBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLENBQUNBLE9BQU9BLEVBQUVBLFlBQVlBLENBQUNBLGlCQUFpQkEsRUFBRUEsWUFBWUEsQ0FBQ0EsYUFBYUEsRUFBRUEsYUFBYUEsQ0FBQ0EsR0FDM0pBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLENBQUNBO1FBQ3BEQSxDQUFDQTtRQUVEQSxhQUFhQSxDQUFDQSx1QkFBdUJBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBO1FBRXJEQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxRQUFRQSxHQUFHQSxlQUFlQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUM5RkEsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsUUFBUUEsR0FBR0EsZUFBZUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDaEZBLE1BQU1BLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQUdBLGVBQWVBLEdBQUdBLFFBQVFBLENBQUNBO1FBRW5GQSxhQUFhQSxDQUFDQSx1QkFBdUJBLENBQUNBLGVBQWVBLENBQUNBLENBQUNBO1FBRXZEQSxBQUNBQSxVQURVQTtRQUNWQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUUvREEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7SUFDYkEsQ0FBQ0E7SUFDRlgsbUNBQUNBO0FBQURBLENBN1FBLEFBNlFDQSxFQTdRMEMsZ0JBQWdCLEVBNlExRDtBQUVELEFBQXNDLGlCQUE3Qiw0QkFBNEIsQ0FBQyIsImZpbGUiOiJtYXRlcmlhbHMvbWV0aG9kcy9FZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDdWJlVGV4dHVyZUJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL0N1YmVUZXh0dXJlQmFzZVwiKTtcblxuaW1wb3J0IFN0YWdlXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9TdGFnZVwiKTtcblxuaW1wb3J0IE1ldGhvZFZPXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvbWF0ZXJpYWxzL2NvbXBpbGF0aW9uL01ldGhvZFZPXCIpO1xuaW1wb3J0IFNoYWRlck9iamVjdEJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL21hdGVyaWFscy9jb21waWxhdGlvbi9TaGFkZXJPYmplY3RCYXNlXCIpO1xuaW1wb3J0IFNoYWRlclJlZ2lzdGVyQ2FjaGVcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJDYWNoZVwiKTtcbmltcG9ydCBTaGFkZXJSZWdpc3RlckRhdGFcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJEYXRhXCIpO1xuaW1wb3J0IFNoYWRlclJlZ2lzdGVyRWxlbWVudFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJFbGVtZW50XCIpO1xuaW1wb3J0IEVmZmVjdE1ldGhvZEJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL21hdGVyaWFscy9tZXRob2RzL0VmZmVjdE1ldGhvZEJhc2VcIik7XG5pbXBvcnQgU2hhZGVyQ29tcGlsZXJIZWxwZXJcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvdXRpbHMvU2hhZGVyQ29tcGlsZXJIZWxwZXJcIik7XG5cbi8qKlxuICogRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZCBwcm92aWRlcyBhIG1ldGhvZCB0byBhZGQgcmVmcmFjdGVkIHRyYW5zcGFyZW5jeSBiYXNlZCBvbiBjdWJlIG1hcHMuXG4gKi9cbmNsYXNzIEVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QgZXh0ZW5kcyBFZmZlY3RNZXRob2RCYXNlXG57XG5cdHByaXZhdGUgX2Vudk1hcDpDdWJlVGV4dHVyZUJhc2U7XG5cblx0cHJpdmF0ZSBfZGlzcGVyc2lvblI6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfZGlzcGVyc2lvbkc6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfZGlzcGVyc2lvbkI6bnVtYmVyID0gMDtcblx0cHJpdmF0ZSBfdXNlRGlzcGVyc2lvbjpib29sZWFuO1xuXHRwcml2YXRlIF9yZWZyYWN0aW9uSW5kZXg6bnVtYmVyO1xuXHRwcml2YXRlIF9hbHBoYTpudW1iZXIgPSAxO1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IEVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2Qgb2JqZWN0LiBFeGFtcGxlIHZhbHVlcyBmb3IgZGlzcGVyc2lvbiBhcmU6IGRpc3BlcnNpb25SOiAtMC4wMywgZGlzcGVyc2lvbkc6IC0wLjAxLCBkaXNwZXJzaW9uQjogPSAuMDAxNVxuXHQgKlxuXHQgKiBAcGFyYW0gZW52TWFwIFRoZSBlbnZpcm9ubWVudCBtYXAgY29udGFpbmluZyB0aGUgcmVmcmFjdGVkIHNjZW5lLlxuXHQgKiBAcGFyYW0gcmVmcmFjdGlvbkluZGV4IFRoZSByZWZyYWN0aXZlIGluZGV4IG9mIHRoZSBtYXRlcmlhbC5cblx0ICogQHBhcmFtIGRpc3BlcnNpb25SIFRoZSBhbW91bnQgb2YgY2hyb21hdGljIGRpc3BlcnNpb24gb2YgdGhlIHJlZCBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cblx0ICogQHBhcmFtIGRpc3BlcnNpb25HIFRoZSBhbW91bnQgb2YgY2hyb21hdGljIGRpc3BlcnNpb24gb2YgdGhlIGdyZWVuIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxuXHQgKiBAcGFyYW0gZGlzcGVyc2lvbkIgVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgYmx1ZSBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cblx0ICovXG5cdGNvbnN0cnVjdG9yKGVudk1hcDpDdWJlVGV4dHVyZUJhc2UsIHJlZnJhY3Rpb25JbmRleDpudW1iZXIgPSAuMSwgZGlzcGVyc2lvblI6bnVtYmVyID0gMCwgZGlzcGVyc2lvbkc6bnVtYmVyID0gMCwgZGlzcGVyc2lvbkI6bnVtYmVyID0gMClcblx0e1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5fZW52TWFwID0gZW52TWFwO1xuXHRcdHRoaXMuX2Rpc3BlcnNpb25SID0gZGlzcGVyc2lvblI7XG5cdFx0dGhpcy5fZGlzcGVyc2lvbkcgPSBkaXNwZXJzaW9uRztcblx0XHR0aGlzLl9kaXNwZXJzaW9uQiA9IGRpc3BlcnNpb25CO1xuXHRcdHRoaXMuX3VzZURpc3BlcnNpb24gPSAhKHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25CICYmIHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25HKTtcblx0XHR0aGlzLl9yZWZyYWN0aW9uSW5kZXggPSByZWZyYWN0aW9uSW5kZXg7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBpSW5pdENvbnN0YW50cyhzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgbWV0aG9kVk86TWV0aG9kVk8pXG5cdHtcblx0XHR2YXIgaW5kZXg6bnVtYmVyIC8qaW50Ki8gPSBtZXRob2RWTy5mcmFnbWVudENvbnN0YW50c0luZGV4O1xuXHRcdHZhciBkYXRhOkFycmF5PG51bWJlcj4gPSBzaGFkZXJPYmplY3QuZnJhZ21lbnRDb25zdGFudERhdGE7XG5cdFx0ZGF0YVtpbmRleCArIDRdID0gMTtcblx0XHRkYXRhW2luZGV4ICsgNV0gPSAwO1xuXHRcdGRhdGFbaW5kZXggKyA3XSA9IDE7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBpSW5pdFZPKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCBtZXRob2RWTzpNZXRob2RWTylcblx0e1xuXHRcdG1ldGhvZFZPLm5lZWRzTm9ybWFscyA9IHRydWU7XG5cdFx0bWV0aG9kVk8ubmVlZHNWaWV3ID0gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgY3ViZSBlbnZpcm9ubWVudCBtYXAgdG8gdXNlIGZvciB0aGUgcmVmcmFjdGlvbi5cblx0ICovXG5cdHB1YmxpYyBnZXQgZW52TWFwKCk6Q3ViZVRleHR1cmVCYXNlXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZW52TWFwO1xuXHR9XG5cblx0cHVibGljIHNldCBlbnZNYXAodmFsdWU6Q3ViZVRleHR1cmVCYXNlKVxuXHR7XG5cdFx0dGhpcy5fZW52TWFwID0gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHJlZnJhY3RpdmUgaW5kZXggb2YgdGhlIG1hdGVyaWFsLlxuXHQgKi9cblx0cHVibGljIGdldCByZWZyYWN0aW9uSW5kZXgoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9yZWZyYWN0aW9uSW5kZXg7XG5cdH1cblxuXHRwdWJsaWMgc2V0IHJlZnJhY3Rpb25JbmRleCh2YWx1ZTpudW1iZXIpXG5cdHtcblx0XHR0aGlzLl9yZWZyYWN0aW9uSW5kZXggPSB2YWx1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSByZWQgY2hhbm5lbC4gRGVmYXVsdHMgdG8gMCAobm9uZSkuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGRpc3BlcnNpb25SKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZGlzcGVyc2lvblI7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGRpc3BlcnNpb25SKHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX2Rpc3BlcnNpb25SID0gdmFsdWU7XG5cblx0XHR2YXIgdXNlRGlzcGVyc2lvbjpib29sZWFuID0gISh0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uQiAmJiB0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uRyk7XG5cdFx0aWYgKHRoaXMuX3VzZURpc3BlcnNpb24gIT0gdXNlRGlzcGVyc2lvbikge1xuXHRcdFx0dGhpcy5pSW52YWxpZGF0ZVNoYWRlclByb2dyYW0oKTtcblx0XHRcdHRoaXMuX3VzZURpc3BlcnNpb24gPSB1c2VEaXNwZXJzaW9uO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSBncmVlbiBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cblx0ICovXG5cdHB1YmxpYyBnZXQgZGlzcGVyc2lvbkcoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9kaXNwZXJzaW9uRztcblx0fVxuXG5cdHB1YmxpYyBzZXQgZGlzcGVyc2lvbkcodmFsdWU6bnVtYmVyKVxuXHR7XG5cdFx0dGhpcy5fZGlzcGVyc2lvbkcgPSB2YWx1ZTtcblxuXHRcdHZhciB1c2VEaXNwZXJzaW9uOmJvb2xlYW4gPSAhKHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25CICYmIHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25HKTtcblx0XHRpZiAodGhpcy5fdXNlRGlzcGVyc2lvbiAhPSB1c2VEaXNwZXJzaW9uKSB7XG5cdFx0XHR0aGlzLmlJbnZhbGlkYXRlU2hhZGVyUHJvZ3JhbSgpO1xuXHRcdFx0dGhpcy5fdXNlRGlzcGVyc2lvbiA9IHVzZURpc3BlcnNpb247XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBhbW91bnQgb2YgY2hyb21hdGljIGRpc3BlcnNpb24gb2YgdGhlIGJsdWUgY2hhbm5lbC4gRGVmYXVsdHMgdG8gMCAobm9uZSkuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGRpc3BlcnNpb25CKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZGlzcGVyc2lvbkI7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGRpc3BlcnNpb25CKHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX2Rpc3BlcnNpb25CID0gdmFsdWU7XG5cblx0XHR2YXIgdXNlRGlzcGVyc2lvbjpib29sZWFuID0gISh0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uQiAmJiB0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uRyk7XG5cdFx0aWYgKHRoaXMuX3VzZURpc3BlcnNpb24gIT0gdXNlRGlzcGVyc2lvbikge1xuXHRcdFx0dGhpcy5pSW52YWxpZGF0ZVNoYWRlclByb2dyYW0oKTtcblx0XHRcdHRoaXMuX3VzZURpc3BlcnNpb24gPSB1c2VEaXNwZXJzaW9uO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYW1vdW50IG9mIHRyYW5zcGFyZW5jeSBvZiB0aGUgb2JqZWN0LiBXYXJuaW5nOiB0aGUgYWxwaGEgYXBwbGllcyB0byB0aGUgcmVmcmFjdGVkIGNvbG9yLCBub3QgdGhlIGFjdHVhbFxuXHQgKiBtYXRlcmlhbC4gQSB2YWx1ZSBvZiAxIHdpbGwgbWFrZSBpdCBhcHBlYXIgZnVsbHkgdHJhbnNwYXJlbnQuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGFscGhhKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fYWxwaGE7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGFscGhhKHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX2FscGhhID0gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBpQWN0aXZhdGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIG1ldGhvZFZPOk1ldGhvZFZPLCBzdGFnZTpTdGFnZSlcblx0e1xuXHRcdHZhciBpbmRleDpudW1iZXIgLyppbnQqLyA9IG1ldGhvZFZPLmZyYWdtZW50Q29uc3RhbnRzSW5kZXg7XG5cdFx0dmFyIGRhdGE6QXJyYXk8bnVtYmVyPiA9IHNoYWRlck9iamVjdC5mcmFnbWVudENvbnN0YW50RGF0YTtcblxuXHRcdGRhdGFbaW5kZXhdID0gdGhpcy5fZGlzcGVyc2lvblIgKyB0aGlzLl9yZWZyYWN0aW9uSW5kZXg7XG5cblx0XHRpZiAodGhpcy5fdXNlRGlzcGVyc2lvbikge1xuXHRcdFx0ZGF0YVtpbmRleCArIDFdID0gdGhpcy5fZGlzcGVyc2lvbkcgKyB0aGlzLl9yZWZyYWN0aW9uSW5kZXg7XG5cdFx0XHRkYXRhW2luZGV4ICsgMl0gPSB0aGlzLl9kaXNwZXJzaW9uQiArIHRoaXMuX3JlZnJhY3Rpb25JbmRleDtcblx0XHR9XG5cdFx0ZGF0YVtpbmRleCArIDNdID0gdGhpcy5fYWxwaGE7XG5cblx0XHRzdGFnZS5hY3RpdmF0ZUN1YmVUZXh0dXJlKG1ldGhvZFZPLnRleHR1cmVzSW5kZXgsIHRoaXMuX2Vudk1hcCk7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBpR2V0RnJhZ21lbnRDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCBtZXRob2RWTzpNZXRob2RWTywgdGFyZ2V0UmVnOlNoYWRlclJlZ2lzdGVyRWxlbWVudCwgcmVnaXN0ZXJDYWNoZTpTaGFkZXJSZWdpc3RlckNhY2hlLCBzaGFyZWRSZWdpc3RlcnM6U2hhZGVyUmVnaXN0ZXJEYXRhKTpzdHJpbmdcblx0e1xuXHRcdC8vIHRvZG86IGRhdGEyLnggY291bGQgdXNlIGNvbW1vbiByZWcsIHNvIG9ubHkgMSByZWcgaXMgdXNlZFxuXHRcdHZhciBkYXRhOlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50Q29uc3RhbnQoKTtcblx0XHR2YXIgZGF0YTI6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRDb25zdGFudCgpO1xuXHRcdHZhciBjb2RlOnN0cmluZyA9IFwiXCI7XG5cdFx0dmFyIGN1YmVNYXBSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlVGV4dHVyZVJlZygpO1xuXHRcdHZhciByZWZyYWN0aW9uRGlyOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0XHR2YXIgcmVmcmFjdGlvbkNvbG9yOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0XHR2YXIgdGVtcDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cblx0XHRtZXRob2RWTy50ZXh0dXJlc0luZGV4ID0gY3ViZU1hcFJlZy5pbmRleDtcblx0XHRtZXRob2RWTy5mcmFnbWVudENvbnN0YW50c0luZGV4ID0gZGF0YS5pbmRleCo0O1xuXG5cdFx0cmVmcmFjdGlvbkRpciA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xuXHRcdHJlZ2lzdGVyQ2FjaGUuYWRkRnJhZ21lbnRUZW1wVXNhZ2VzKHJlZnJhY3Rpb25EaXIsIDEpO1xuXHRcdHJlZnJhY3Rpb25Db2xvciA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xuXHRcdHJlZ2lzdGVyQ2FjaGUuYWRkRnJhZ21lbnRUZW1wVXNhZ2VzKHJlZnJhY3Rpb25Db2xvciwgMSk7XG5cblx0XHR0ZW1wID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XG5cblx0XHR2YXIgdmlld0RpclJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSBzaGFyZWRSZWdpc3RlcnMudmlld0RpckZyYWdtZW50O1xuXHRcdHZhciBub3JtYWxSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gc2hhcmVkUmVnaXN0ZXJzLm5vcm1hbEZyYWdtZW50O1xuXG5cdFx0Y29kZSArPSBcIm5lZyBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgdmlld0RpclJlZyArIFwiLnh5elxcblwiO1xuXG5cdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcblx0XHRcdFwic3ViIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YTIgKyBcIi54LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YSArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cblx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLngsIFwiICsgZGF0YSArIFwiLngsIFwiICsgdGVtcCArIFwiLnhcXG5cIiArXG5cdFx0XHRcImFkZCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi55XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIG5vcm1hbFJlZyArIFwiLnh5elxcblwiICtcblxuXHRcdFx0XCJtdWwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIsIFwiICsgZGF0YSArIFwiLngsIFwiICsgdmlld0RpclJlZyArIFwiXFxuXCIgK1xuXHRcdFx0XCJzdWIgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLnh5elxcblwiICtcblx0XHRcdFwibnJtIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6XFxuXCI7XG5cdFx0Y29kZSArPSBTaGFkZXJDb21waWxlckhlbHBlci5nZXRUZXhDdWJlU2FtcGxlQ29kZShyZWZyYWN0aW9uQ29sb3IsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xuXHRcdFx0XCJzdWIgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi53LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLncsIGZjMC54XHRcXG5cIiArXG5cdFx0XHRcImtpbCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLndcXG5cIjtcblxuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uKSB7XG5cdFx0XHQvLyBHUkVFTlxuXHRcdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xuXHRcdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cdFx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcblx0XHRcdFx0XCJhZGQgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueVxcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIG5vcm1hbFJlZyArIFwiLnh5elxcblwiICtcblxuXHRcdFx0XHRcIm11bCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIiwgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB2aWV3RGlyUmVnICsgXCJcXG5cIiArXG5cdFx0XHRcdFwic3ViIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcdFwibnJtIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6XFxuXCI7XG5cdFx0XHRjb2RlICs9IFNoYWRlckNvbXBpbGVySGVscGVyLmdldFRleEN1YmVTYW1wbGVDb2RlKHRlbXAsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xuXHRcdFx0XHRcIm1vdiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnksIFwiICsgdGVtcCArIFwiLnlcXG5cIjtcblxuXHRcdFx0Ly8gQkxVRVxuXHRcdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xuXHRcdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cdFx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcblx0XHRcdFx0XCJhZGQgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueVxcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIG5vcm1hbFJlZyArIFwiLnh5elxcblwiICtcblxuXHRcdFx0XHRcIm11bCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIiwgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB2aWV3RGlyUmVnICsgXCJcXG5cIiArXG5cdFx0XHRcdFwic3ViIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcdFwibnJtIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6XFxuXCI7XG5cdFx0XHRjb2RlICs9IFNoYWRlckNvbXBpbGVySGVscGVyLmdldFRleEN1YmVTYW1wbGVDb2RlKHRlbXAsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xuXHRcdFx0XHRcIm1vdiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnosIFwiICsgdGVtcCArIFwiLnpcXG5cIjtcblx0XHR9XG5cblx0XHRyZWdpc3RlckNhY2hlLnJlbW92ZUZyYWdtZW50VGVtcFVzYWdlKHJlZnJhY3Rpb25EaXIpO1xuXG5cdFx0Y29kZSArPSBcInN1YiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi54eXosIFwiICsgdGFyZ2V0UmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueHl6LCBcIiArIGRhdGEgKyBcIi53XFxuXCIgK1xuXHRcdFx0XCJhZGQgXCIgKyB0YXJnZXRSZWcgKyBcIi54eXosIFwiICsgdGFyZ2V0UmVnICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5elxcblwiO1xuXG5cdFx0cmVnaXN0ZXJDYWNoZS5yZW1vdmVGcmFnbWVudFRlbXBVc2FnZShyZWZyYWN0aW9uQ29sb3IpO1xuXG5cdFx0Ly8gcmVzdG9yZVxuXHRcdGNvZGUgKz0gXCJuZWcgXCIgKyB2aWV3RGlyUmVnICsgXCIueHl6LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXpcXG5cIjtcblxuXHRcdHJldHVybiBjb2RlO1xuXHR9XG59XG5cbmV4cG9ydCA9IEVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2Q7Il19