var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var EffectMethodBase = require("awayjs-stagegl/lib/materials/methods/EffectMethodBase");
var ShaderCompilerHelper = require("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper");
/**
 * EffectRefractionEnvMapMethod provides a method to add refracted transparency based on cube maps.
 */
var EffectRefractionEnvMapMethod = (function (_super) {
    __extends(EffectRefractionEnvMapMethod, _super);
    /**
     * Creates a new EffectRefractionEnvMapMethod object. Example values for dispersion are: dispersionR: -0.03, dispersionG: -0.01, dispersionB: = .0015
     *
     * @param envMap The environment map containing the refracted scene.
     * @param refractionIndex The refractive index of the material.
     * @param dispersionR The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
     * @param dispersionG The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
     * @param dispersionB The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
     */
    function EffectRefractionEnvMapMethod(envMap, refractionIndex, dispersionR, dispersionG, dispersionB) {
        if (refractionIndex === void 0) { refractionIndex = .1; }
        if (dispersionR === void 0) { dispersionR = 0; }
        if (dispersionG === void 0) { dispersionG = 0; }
        if (dispersionB === void 0) { dispersionB = 0; }
        _super.call(this);
        this._dispersionR = 0;
        this._dispersionG = 0;
        this._dispersionB = 0;
        this._alpha = 1;
        this._envMap = envMap;
        this._dispersionR = dispersionR;
        this._dispersionG = dispersionG;
        this._dispersionB = dispersionB;
        this._useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
        this._refractionIndex = refractionIndex;
    }
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitConstants = function (shaderObject, methodVO) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index + 4] = 1;
        data[index + 5] = 0;
        data[index + 7] = 1;
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitVO = function (shaderObject, methodVO) {
        methodVO.needsNormals = true;
        methodVO.needsView = true;
    };
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "envMap", {
        /**
         * The cube environment map to use for the refraction.
         */
        get: function () {
            return this._envMap;
        },
        set: function (value) {
            this._envMap = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "refractionIndex", {
        /**
         * The refractive index of the material.
         */
        get: function () {
            return this._refractionIndex;
        },
        set: function (value) {
            this._refractionIndex = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionR", {
        /**
         * The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionR;
        },
        set: function (value) {
            this._dispersionR = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionG", {
        /**
         * The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionG;
        },
        set: function (value) {
            this._dispersionG = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionB", {
        /**
         * The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionB;
        },
        set: function (value) {
            this._dispersionB = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "alpha", {
        /**
         * The amount of transparency of the object. Warning: the alpha applies to the refracted color, not the actual
         * material. A value of 1 will make it appear fully transparent.
         */
        get: function () {
            return this._alpha;
        },
        set: function (value) {
            this._alpha = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iActivate = function (shaderObject, methodVO, stage) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index] = this._dispersionR + this._refractionIndex;
        if (this._useDispersion) {
            data[index + 1] = this._dispersionG + this._refractionIndex;
            data[index + 2] = this._dispersionB + this._refractionIndex;
        }
        data[index + 3] = this._alpha;
        stage.context.activateCubeTexture(methodVO.texturesIndex, this._envMap);
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iGetFragmentCode = function (shaderObject, methodVO, targetReg, registerCache, sharedRegisters) {
        // todo: data2.x could use common reg, so only 1 reg is used
        var data = registerCache.getFreeFragmentConstant();
        var data2 = registerCache.getFreeFragmentConstant();
        var code = "";
        var cubeMapReg = registerCache.getFreeTextureReg();
        var refractionDir;
        var refractionColor;
        var temp;
        methodVO.texturesIndex = cubeMapReg.index;
        methodVO.fragmentConstantsIndex = data.index * 4;
        refractionDir = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionDir, 1);
        refractionColor = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionColor, 1);
        temp = registerCache.getFreeFragmentVectorTemp();
        var viewDirReg = sharedRegisters.viewDirFragment;
        var normalReg = sharedRegisters.normalFragment;
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".x, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".x, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
        code += ShaderCompilerHelper.getTexCubeSampleCode(refractionColor, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "sub " + refractionColor + ".w, " + refractionColor + ".w, fc0.x	\n" + "kil " + refractionColor + ".w\n";
        if (this._useDispersion) {
            // GREEN
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".y, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".y, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".y, " + temp + ".y\n";
            // BLUE
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".z, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".z, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".z, " + temp + ".z\n";
        }
        registerCache.removeFragmentTempUsage(refractionDir);
        code += "sub " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + targetReg + ".xyz\n" + "mul " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + data + ".w\n" + "add " + targetReg + ".xyz, " + targetReg + ".xyz, " + refractionColor + ".xyz\n";
        registerCache.removeFragmentTempUsage(refractionColor);
        // restore
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        return code;
    };
    return EffectRefractionEnvMapMethod;
})(EffectMethodBase);
module.exports = EffectRefractionEnvMapMethod;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hdGVyaWFscy9tZXRob2RzL2VmZmVjdHJlZnJhY3Rpb25lbnZtYXBtZXRob2QudHMiXSwibmFtZXMiOlsiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZCIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuY29uc3RydWN0b3IiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmlJbml0Q29uc3RhbnRzIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5pSW5pdFZPIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5lbnZNYXAiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLnJlZnJhY3Rpb25JbmRleCIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuZGlzcGVyc2lvblIiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmRpc3BlcnNpb25HIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5kaXNwZXJzaW9uQiIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuYWxwaGEiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmlBY3RpdmF0ZSIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuaUdldEZyYWdtZW50Q29kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBU0EsSUFBTyxnQkFBZ0IsV0FBZSx1REFBdUQsQ0FBQyxDQUFDO0FBQy9GLElBQU8sb0JBQW9CLFdBQWMseURBQXlELENBQUMsQ0FBQztBQUVwRyxBQUdBOztHQURHO0lBQ0csNEJBQTRCO0lBQVNBLFVBQXJDQSw0QkFBNEJBLFVBQXlCQTtJQVcxREE7Ozs7Ozs7O09BUUdBO0lBQ0hBLFNBcEJLQSw0QkFBNEJBLENBb0JyQkEsTUFBc0JBLEVBQUVBLGVBQTJCQSxFQUFFQSxXQUFzQkEsRUFBRUEsV0FBc0JBLEVBQUVBLFdBQXNCQTtRQUFuR0MsK0JBQTJCQSxHQUEzQkEsb0JBQTJCQTtRQUFFQSwyQkFBc0JBLEdBQXRCQSxl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LEVBQUVBLENBQUNBO1FBQzVEQSxhQUFhQSxDQUFDQSxxQkFBcUJBLENBQUNBLGVBQWVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBRXhEQSxJQUFJQSxHQUFHQSxhQUFhQSxDQUFDQSx5QkFBeUJBLEVBQUVBLENBQUNBO1FBRWpEQSxJQUFJQSxVQUFVQSxHQUF5QkEsZUFBZUEsQ0FBQ0EsZUFBZUEsQ0FBQ0E7UUFDdkVBLElBQUlBLFNBQVNBLEdBQXlCQSxlQUFlQSxDQUFDQSxjQUFjQSxDQUFDQTtRQUVyRUEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsUUFBUUEsR0FBR0EsVUFBVUEsR0FBR0EsUUFBUUEsQ0FBQ0E7UUFFL0RBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQzVFQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdkRBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdkRBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBRXRDQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBRS9EQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxJQUFJQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxJQUFJQSxHQUNqRUEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FDOUVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLENBQUNBO1FBQzlEQSxJQUFJQSxJQUFJQSxvQkFBb0JBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsZUFBZUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsQ0FBQ0EsT0FBT0EsRUFBRUEsWUFBWUEsQ0FBQ0EsaUJBQWlCQSxFQUFFQSxZQUFZQSxDQUFDQSxhQUFhQSxFQUFFQSxhQUFhQSxDQUFDQSxHQUN0S0EsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsY0FBY0EsR0FDcEVBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLE1BQU1BLENBQUNBO1FBRW5DQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN6QkEsQUFDQUEsUUFEUUE7WUFDUkEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsUUFBUUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FDNUVBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN2REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN2REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FFdENBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FFL0RBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLElBQUlBLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLElBQUlBLEdBQ2pFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxR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OUZBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLFFBQVFBLEdBQUdBLGVBQWVBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ2hGQSxNQUFNQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUFHQSxlQUFlQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUVuRkEsYUFBYUEsQ0FBQ0EsdUJBQXVCQSxDQUFDQSxlQUFlQSxDQUFDQSxDQUFDQTtRQUV2REEsQUFDQUEsVUFEVUE7UUFDVkEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsUUFBUUEsR0FBR0EsVUFBVUEsR0FBR0EsUUFBUUEsQ0FBQ0E7UUFFL0RBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO0lBQ2JBLENBQUNBO0lBQ0ZYLG1DQUFDQTtBQUFEQSxDQTdRQSxBQTZRQ0EsRUE3UTBDLGdCQUFnQixFQTZRMUQ7QUFFRCxBQUFzQyxpQkFBN0IsNEJBQTRCLENBQUMiLCJmaWxlIjoibWF0ZXJpYWxzL21ldGhvZHMvRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvcm9iYmF0ZW1hbi9XZWJzdG9ybVByb2plY3RzL2F3YXlqcy1yZW5kZXJlcmdsLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDdWJlVGV4dHVyZUJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL0N1YmVUZXh0dXJlQmFzZVwiKTtcblxuaW1wb3J0IFN0YWdlXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9iYXNlL1N0YWdlXCIpO1xuaW1wb3J0IElDb250ZXh0U3RhZ2VHTFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9zdGFnZWdsL0lDb250ZXh0U3RhZ2VHTFwiKTtcbmltcG9ydCBNZXRob2RWT1x0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy9jb21waWxhdGlvbi9NZXRob2RWT1wiKTtcbmltcG9ydCBTaGFkZXJPYmplY3RCYXNlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9tYXRlcmlhbHMvY29tcGlsYXRpb24vU2hhZGVyT2JqZWN0QmFzZVwiKTtcbmltcG9ydCBTaGFkZXJSZWdpc3RlckNhY2hlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyQ2FjaGVcIik7XG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJEYXRhXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyRGF0YVwiKTtcbmltcG9ydCBTaGFkZXJSZWdpc3RlckVsZW1lbnRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyRWxlbWVudFwiKTtcbmltcG9ydCBFZmZlY3RNZXRob2RCYXNlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9tYXRlcmlhbHMvbWV0aG9kcy9FZmZlY3RNZXRob2RCYXNlXCIpO1xuaW1wb3J0IFNoYWRlckNvbXBpbGVySGVscGVyXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL3V0aWxzL1NoYWRlckNvbXBpbGVySGVscGVyXCIpO1xuXG4vKipcbiAqIEVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QgcHJvdmlkZXMgYSBtZXRob2QgdG8gYWRkIHJlZnJhY3RlZCB0cmFuc3BhcmVuY3kgYmFzZWQgb24gY3ViZSBtYXBzLlxuICovXG5jbGFzcyBFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kIGV4dGVuZHMgRWZmZWN0TWV0aG9kQmFzZVxue1xuXHRwcml2YXRlIF9lbnZNYXA6Q3ViZVRleHR1cmVCYXNlO1xuXG5cdHByaXZhdGUgX2Rpc3BlcnNpb25SOm51bWJlciA9IDA7XG5cdHByaXZhdGUgX2Rpc3BlcnNpb25HOm51bWJlciA9IDA7XG5cdHByaXZhdGUgX2Rpc3BlcnNpb25COm51bWJlciA9IDA7XG5cdHByaXZhdGUgX3VzZURpc3BlcnNpb246Ym9vbGVhbjtcblx0cHJpdmF0ZSBfcmVmcmFjdGlvbkluZGV4Om51bWJlcjtcblx0cHJpdmF0ZSBfYWxwaGE6bnVtYmVyID0gMTtcblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyBFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kIG9iamVjdC4gRXhhbXBsZSB2YWx1ZXMgZm9yIGRpc3BlcnNpb24gYXJlOiBkaXNwZXJzaW9uUjogLTAuMDMsIGRpc3BlcnNpb25HOiAtMC4wMSwgZGlzcGVyc2lvbkI6ID0gLjAwMTVcblx0ICpcblx0ICogQHBhcmFtIGVudk1hcCBUaGUgZW52aXJvbm1lbnQgbWFwIGNvbnRhaW5pbmcgdGhlIHJlZnJhY3RlZCBzY2VuZS5cblx0ICogQHBhcmFtIHJlZnJhY3Rpb25JbmRleCBUaGUgcmVmcmFjdGl2ZSBpbmRleCBvZiB0aGUgbWF0ZXJpYWwuXG5cdCAqIEBwYXJhbSBkaXNwZXJzaW9uUiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSByZWQgY2hhbm5lbC4gRGVmYXVsdHMgdG8gMCAobm9uZSkuXG5cdCAqIEBwYXJhbSBkaXNwZXJzaW9uRyBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSBncmVlbiBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cblx0ICogQHBhcmFtIGRpc3BlcnNpb25CIFRoZSBhbW91bnQgb2YgY2hyb21hdGljIGRpc3BlcnNpb24gb2YgdGhlIGJsdWUgY2hhbm5lbC4gRGVmYXVsdHMgdG8gMCAobm9uZSkuXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcihlbnZNYXA6Q3ViZVRleHR1cmVCYXNlLCByZWZyYWN0aW9uSW5kZXg6bnVtYmVyID0gLjEsIGRpc3BlcnNpb25SOm51bWJlciA9IDAsIGRpc3BlcnNpb25HOm51bWJlciA9IDAsIGRpc3BlcnNpb25COm51bWJlciA9IDApXG5cdHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuX2Vudk1hcCA9IGVudk1hcDtcblx0XHR0aGlzLl9kaXNwZXJzaW9uUiA9IGRpc3BlcnNpb25SO1xuXHRcdHRoaXMuX2Rpc3BlcnNpb25HID0gZGlzcGVyc2lvbkc7XG5cdFx0dGhpcy5fZGlzcGVyc2lvbkIgPSBkaXNwZXJzaW9uQjtcblx0XHR0aGlzLl91c2VEaXNwZXJzaW9uID0gISh0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uQiAmJiB0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uRyk7XG5cdFx0dGhpcy5fcmVmcmFjdGlvbkluZGV4ID0gcmVmcmFjdGlvbkluZGV4O1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgaUluaXRDb25zdGFudHMoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIG1ldGhvZFZPOk1ldGhvZFZPKVxuXHR7XG5cdFx0dmFyIGluZGV4Om51bWJlciAvKmludCovID0gbWV0aG9kVk8uZnJhZ21lbnRDb25zdGFudHNJbmRleDtcblx0XHR2YXIgZGF0YTpBcnJheTxudW1iZXI+ID0gc2hhZGVyT2JqZWN0LmZyYWdtZW50Q29uc3RhbnREYXRhO1xuXHRcdGRhdGFbaW5kZXggKyA0XSA9IDE7XG5cdFx0ZGF0YVtpbmRleCArIDVdID0gMDtcblx0XHRkYXRhW2luZGV4ICsgN10gPSAxO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgaUluaXRWTyhzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgbWV0aG9kVk86TWV0aG9kVk8pXG5cdHtcblx0XHRtZXRob2RWTy5uZWVkc05vcm1hbHMgPSB0cnVlO1xuXHRcdG1ldGhvZFZPLm5lZWRzVmlldyA9IHRydWU7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGN1YmUgZW52aXJvbm1lbnQgbWFwIHRvIHVzZSBmb3IgdGhlIHJlZnJhY3Rpb24uXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGVudk1hcCgpOkN1YmVUZXh0dXJlQmFzZVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2Vudk1hcDtcblx0fVxuXG5cdHB1YmxpYyBzZXQgZW52TWFwKHZhbHVlOkN1YmVUZXh0dXJlQmFzZSlcblx0e1xuXHRcdHRoaXMuX2Vudk1hcCA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSByZWZyYWN0aXZlIGluZGV4IG9mIHRoZSBtYXRlcmlhbC5cblx0ICovXG5cdHB1YmxpYyBnZXQgcmVmcmFjdGlvbkluZGV4KCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fcmVmcmFjdGlvbkluZGV4O1xuXHR9XG5cblx0cHVibGljIHNldCByZWZyYWN0aW9uSW5kZXgodmFsdWU6bnVtYmVyKVxuXHR7XG5cdFx0dGhpcy5fcmVmcmFjdGlvbkluZGV4ID0gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgcmVkIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxuXHQgKi9cblx0cHVibGljIGdldCBkaXNwZXJzaW9uUigpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2Rpc3BlcnNpb25SO1xuXHR9XG5cblx0cHVibGljIHNldCBkaXNwZXJzaW9uUih2YWx1ZTpudW1iZXIpXG5cdHtcblx0XHR0aGlzLl9kaXNwZXJzaW9uUiA9IHZhbHVlO1xuXG5cdFx0dmFyIHVzZURpc3BlcnNpb246Ym9vbGVhbiA9ICEodGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkIgJiYgdGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkcpO1xuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uICE9IHVzZURpc3BlcnNpb24pIHtcblx0XHRcdHRoaXMuaUludmFsaWRhdGVTaGFkZXJQcm9ncmFtKCk7XG5cdFx0XHR0aGlzLl91c2VEaXNwZXJzaW9uID0gdXNlRGlzcGVyc2lvbjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgZ3JlZW4gY2hhbm5lbC4gRGVmYXVsdHMgdG8gMCAobm9uZSkuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGRpc3BlcnNpb25HKCk6bnVtYmVyXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZGlzcGVyc2lvbkc7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGRpc3BlcnNpb25HKHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX2Rpc3BlcnNpb25HID0gdmFsdWU7XG5cblx0XHR2YXIgdXNlRGlzcGVyc2lvbjpib29sZWFuID0gISh0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uQiAmJiB0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uRyk7XG5cdFx0aWYgKHRoaXMuX3VzZURpc3BlcnNpb24gIT0gdXNlRGlzcGVyc2lvbikge1xuXHRcdFx0dGhpcy5pSW52YWxpZGF0ZVNoYWRlclByb2dyYW0oKTtcblx0XHRcdHRoaXMuX3VzZURpc3BlcnNpb24gPSB1c2VEaXNwZXJzaW9uO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSBibHVlIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxuXHQgKi9cblx0cHVibGljIGdldCBkaXNwZXJzaW9uQigpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2Rpc3BlcnNpb25CO1xuXHR9XG5cblx0cHVibGljIHNldCBkaXNwZXJzaW9uQih2YWx1ZTpudW1iZXIpXG5cdHtcblx0XHR0aGlzLl9kaXNwZXJzaW9uQiA9IHZhbHVlO1xuXG5cdFx0dmFyIHVzZURpc3BlcnNpb246Ym9vbGVhbiA9ICEodGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkIgJiYgdGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkcpO1xuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uICE9IHVzZURpc3BlcnNpb24pIHtcblx0XHRcdHRoaXMuaUludmFsaWRhdGVTaGFkZXJQcm9ncmFtKCk7XG5cdFx0XHR0aGlzLl91c2VEaXNwZXJzaW9uID0gdXNlRGlzcGVyc2lvbjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGFtb3VudCBvZiB0cmFuc3BhcmVuY3kgb2YgdGhlIG9iamVjdC4gV2FybmluZzogdGhlIGFscGhhIGFwcGxpZXMgdG8gdGhlIHJlZnJhY3RlZCBjb2xvciwgbm90IHRoZSBhY3R1YWxcblx0ICogbWF0ZXJpYWwuIEEgdmFsdWUgb2YgMSB3aWxsIG1ha2UgaXQgYXBwZWFyIGZ1bGx5IHRyYW5zcGFyZW50LlxuXHQgKi9cblx0cHVibGljIGdldCBhbHBoYSgpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2FscGhhO1xuXHR9XG5cblx0cHVibGljIHNldCBhbHBoYSh2YWx1ZTpudW1iZXIpXG5cdHtcblx0XHR0aGlzLl9hbHBoYSA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgaUFjdGl2YXRlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCBtZXRob2RWTzpNZXRob2RWTywgc3RhZ2U6U3RhZ2UpXG5cdHtcblx0XHR2YXIgaW5kZXg6bnVtYmVyIC8qaW50Ki8gPSBtZXRob2RWTy5mcmFnbWVudENvbnN0YW50c0luZGV4O1xuXHRcdHZhciBkYXRhOkFycmF5PG51bWJlcj4gPSBzaGFkZXJPYmplY3QuZnJhZ21lbnRDb25zdGFudERhdGE7XG5cblx0XHRkYXRhW2luZGV4XSA9IHRoaXMuX2Rpc3BlcnNpb25SICsgdGhpcy5fcmVmcmFjdGlvbkluZGV4O1xuXG5cdFx0aWYgKHRoaXMuX3VzZURpc3BlcnNpb24pIHtcblx0XHRcdGRhdGFbaW5kZXggKyAxXSA9IHRoaXMuX2Rpc3BlcnNpb25HICsgdGhpcy5fcmVmcmFjdGlvbkluZGV4O1xuXHRcdFx0ZGF0YVtpbmRleCArIDJdID0gdGhpcy5fZGlzcGVyc2lvbkIgKyB0aGlzLl9yZWZyYWN0aW9uSW5kZXg7XG5cdFx0fVxuXHRcdGRhdGFbaW5kZXggKyAzXSA9IHRoaXMuX2FscGhhO1xuXG5cdFx0KDxJQ29udGV4dFN0YWdlR0w+IHN0YWdlLmNvbnRleHQpLmFjdGl2YXRlQ3ViZVRleHR1cmUobWV0aG9kVk8udGV4dHVyZXNJbmRleCwgdGhpcy5fZW52TWFwKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGlHZXRGcmFnbWVudENvZGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIG1ldGhvZFZPOk1ldGhvZFZPLCB0YXJnZXRSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50LCByZWdpc3RlckNhY2hlOlNoYWRlclJlZ2lzdGVyQ2FjaGUsIHNoYXJlZFJlZ2lzdGVyczpTaGFkZXJSZWdpc3RlckRhdGEpOnN0cmluZ1xuXHR7XG5cdFx0Ly8gdG9kbzogZGF0YTIueCBjb3VsZCB1c2UgY29tbW9uIHJlZywgc28gb25seSAxIHJlZyBpcyB1c2VkXG5cdFx0dmFyIGRhdGE6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRDb25zdGFudCgpO1xuXHRcdHZhciBkYXRhMjpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSByZWdpc3RlckNhY2hlLmdldEZyZWVGcmFnbWVudENvbnN0YW50KCk7XG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcblx0XHR2YXIgY3ViZU1hcFJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSByZWdpc3RlckNhY2hlLmdldEZyZWVUZXh0dXJlUmVnKCk7XG5cdFx0dmFyIHJlZnJhY3Rpb25EaXI6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRcdHZhciByZWZyYWN0aW9uQ29sb3I6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRcdHZhciB0ZW1wOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblxuXHRcdG1ldGhvZFZPLnRleHR1cmVzSW5kZXggPSBjdWJlTWFwUmVnLmluZGV4O1xuXHRcdG1ldGhvZFZPLmZyYWdtZW50Q29uc3RhbnRzSW5kZXggPSBkYXRhLmluZGV4KjQ7XG5cblx0XHRyZWZyYWN0aW9uRGlyID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XG5cdFx0cmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXMocmVmcmFjdGlvbkRpciwgMSk7XG5cdFx0cmVmcmFjdGlvbkNvbG9yID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XG5cdFx0cmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXMocmVmcmFjdGlvbkNvbG9yLCAxKTtcblxuXHRcdHRlbXAgPSByZWdpc3RlckNhY2hlLmdldEZyZWVGcmFnbWVudFZlY3RvclRlbXAoKTtcblxuXHRcdHZhciB2aWV3RGlyUmVnOlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHNoYXJlZFJlZ2lzdGVycy52aWV3RGlyRnJhZ21lbnQ7XG5cdFx0dmFyIG5vcm1hbFJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSBzaGFyZWRSZWdpc3RlcnMubm9ybWFsRnJhZ21lbnQ7XG5cblx0XHRjb2RlICs9IFwibmVnIFwiICsgdmlld0RpclJlZyArIFwiLnh5eiwgXCIgKyB2aWV3RGlyUmVnICsgXCIueHl6XFxuXCI7XG5cblx0XHRjb2RlICs9IFwiZHAzIFwiICsgdGVtcCArIFwiLngsIFwiICsgdmlld0RpclJlZyArIFwiLnh5eiwgXCIgKyBub3JtYWxSZWcgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xuXHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEgKyBcIi54LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFwic3ViIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YTIgKyBcIi54LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XCJzcXQgXCIgKyB0ZW1wICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblxuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyBkYXRhICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcblx0XHRcdFwiYWRkIFwiICsgdGVtcCArIFwiLngsIFwiICsgdGVtcCArIFwiLngsIFwiICsgdGVtcCArIFwiLnlcXG5cIiArXG5cdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLngsIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXG5cdFx0XHRcIm11bCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIiwgXCIgKyBkYXRhICsgXCIueCwgXCIgKyB2aWV3RGlyUmVnICsgXCJcXG5cIiArXG5cdFx0XHRcInN1YiBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyB0ZW1wICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XCJucm0gXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXpcXG5cIjtcblx0XHRjb2RlICs9IFNoYWRlckNvbXBpbGVySGVscGVyLmdldFRleEN1YmVTYW1wbGVDb2RlKHJlZnJhY3Rpb25Db2xvciwgY3ViZU1hcFJlZywgdGhpcy5fZW52TWFwLCBzaGFkZXJPYmplY3QudXNlU21vb3RoVGV4dHVyZXMsIHNoYWRlck9iamVjdC51c2VNaXBtYXBwaW5nLCByZWZyYWN0aW9uRGlyKSArXG5cdFx0XHRcInN1YiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLncsIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIudywgZmMwLnhcdFxcblwiICtcblx0XHRcdFwia2lsIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIud1xcblwiO1xuXG5cdFx0aWYgKHRoaXMuX3VzZURpc3BlcnNpb24pIHtcblx0XHRcdC8vIEdSRUVOXG5cdFx0XHRjb2RlICs9IFwiZHAzIFwiICsgdGVtcCArIFwiLngsIFwiICsgdmlld0RpclJlZyArIFwiLnh5eiwgXCIgKyBub3JtYWxSZWcgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLncsIFwiICsgdGVtcCArIFwiLngsIFwiICsgdGVtcCArIFwiLnhcXG5cIiArXG5cdFx0XHRcdFwic3ViIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YTIgKyBcIi54LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEgKyBcIi55LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEgKyBcIi55LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJzcXQgXCIgKyB0ZW1wICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblxuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54LCBcIiArIGRhdGEgKyBcIi55LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xuXHRcdFx0XHRcImFkZCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi55XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLngsIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXG5cdFx0XHRcdFwibXVsIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLCBcIiArIGRhdGEgKyBcIi55LCBcIiArIHZpZXdEaXJSZWcgKyBcIlxcblwiICtcblx0XHRcdFx0XCJzdWIgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLnh5elxcblwiICtcblx0XHRcdFx0XCJucm0gXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXpcXG5cIjtcblx0XHRcdGNvZGUgKz0gU2hhZGVyQ29tcGlsZXJIZWxwZXIuZ2V0VGV4Q3ViZVNhbXBsZUNvZGUodGVtcCwgY3ViZU1hcFJlZywgdGhpcy5fZW52TWFwLCBzaGFkZXJPYmplY3QudXNlU21vb3RoVGV4dHVyZXMsIHNoYWRlck9iamVjdC51c2VNaXBtYXBwaW5nLCByZWZyYWN0aW9uRGlyKSArXG5cdFx0XHRcdFwibW92IFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueSwgXCIgKyB0ZW1wICsgXCIueVxcblwiO1xuXG5cdFx0XHQvLyBCTFVFXG5cdFx0XHRjb2RlICs9IFwiZHAzIFwiICsgdGVtcCArIFwiLngsIFwiICsgdmlld0RpclJlZyArIFwiLnh5eiwgXCIgKyBub3JtYWxSZWcgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLncsIFwiICsgdGVtcCArIFwiLngsIFwiICsgdGVtcCArIFwiLnhcXG5cIiArXG5cdFx0XHRcdFwic3ViIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YTIgKyBcIi54LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEgKyBcIi56LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEgKyBcIi56LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJzcXQgXCIgKyB0ZW1wICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblxuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54LCBcIiArIGRhdGEgKyBcIi56LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xuXHRcdFx0XHRcImFkZCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi55XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLngsIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXG5cdFx0XHRcdFwibXVsIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLCBcIiArIGRhdGEgKyBcIi56LCBcIiArIHZpZXdEaXJSZWcgKyBcIlxcblwiICtcblx0XHRcdFx0XCJzdWIgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLnh5elxcblwiICtcblx0XHRcdFx0XCJucm0gXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXpcXG5cIjtcblx0XHRcdGNvZGUgKz0gU2hhZGVyQ29tcGlsZXJIZWxwZXIuZ2V0VGV4Q3ViZVNhbXBsZUNvZGUodGVtcCwgY3ViZU1hcFJlZywgdGhpcy5fZW52TWFwLCBzaGFkZXJPYmplY3QudXNlU21vb3RoVGV4dHVyZXMsIHNoYWRlck9iamVjdC51c2VNaXBtYXBwaW5nLCByZWZyYWN0aW9uRGlyKSArXG5cdFx0XHRcdFwibW92IFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueiwgXCIgKyB0ZW1wICsgXCIuelxcblwiO1xuXHRcdH1cblxuXHRcdHJlZ2lzdGVyQ2FjaGUucmVtb3ZlRnJhZ21lbnRUZW1wVXNhZ2UocmVmcmFjdGlvbkRpcik7XG5cblx0XHRjb2RlICs9IFwic3ViIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5eiwgXCIgKyB0YXJnZXRSZWcgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcIm11bCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi54eXosIFwiICsgZGF0YSArIFwiLndcXG5cIiArXG5cdFx0XHRcImFkZCBcIiArIHRhcmdldFJlZyArIFwiLnh5eiwgXCIgKyB0YXJnZXRSZWcgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueHl6XFxuXCI7XG5cblx0XHRyZWdpc3RlckNhY2hlLnJlbW92ZUZyYWdtZW50VGVtcFVzYWdlKHJlZnJhY3Rpb25Db2xvcik7XG5cblx0XHQvLyByZXN0b3JlXG5cdFx0Y29kZSArPSBcIm5lZyBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgdmlld0RpclJlZyArIFwiLnh5elxcblwiO1xuXG5cdFx0cmV0dXJuIGNvZGU7XG5cdH1cbn1cblxuZXhwb3J0ID0gRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZDsiXX0=