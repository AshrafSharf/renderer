var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var EffectMethodBase = require("awayjs-stagegl/lib/materials/methods/EffectMethodBase");
var ShaderCompilerHelper = require("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper");
/**
 * EffectRefractionEnvMapMethod provides a method to add refracted transparency based on cube maps.
 */
var EffectRefractionEnvMapMethod = (function (_super) {
    __extends(EffectRefractionEnvMapMethod, _super);
    /**
     * Creates a new EffectRefractionEnvMapMethod object. Example values for dispersion are: dispersionR: -0.03, dispersionG: -0.01, dispersionB: = .0015
     *
     * @param envMap The environment map containing the refracted scene.
     * @param refractionIndex The refractive index of the material.
     * @param dispersionR The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
     * @param dispersionG The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
     * @param dispersionB The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
     */
    function EffectRefractionEnvMapMethod(envMap, refractionIndex, dispersionR, dispersionG, dispersionB) {
        if (refractionIndex === void 0) { refractionIndex = .1; }
        if (dispersionR === void 0) { dispersionR = 0; }
        if (dispersionG === void 0) { dispersionG = 0; }
        if (dispersionB === void 0) { dispersionB = 0; }
        _super.call(this);
        this._dispersionR = 0;
        this._dispersionG = 0;
        this._dispersionB = 0;
        this._alpha = 1;
        this._envMap = envMap;
        this._dispersionR = dispersionR;
        this._dispersionG = dispersionG;
        this._dispersionB = dispersionB;
        this._useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
        this._refractionIndex = refractionIndex;
    }
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitConstants = function (shaderObject, methodVO) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index + 4] = 1;
        data[index + 5] = 0;
        data[index + 7] = 1;
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitVO = function (shaderObject, methodVO) {
        methodVO.needsNormals = true;
        methodVO.needsView = true;
    };
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "envMap", {
        /**
         * The cube environment map to use for the refraction.
         */
        get: function () {
            return this._envMap;
        },
        set: function (value) {
            this._envMap = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "refractionIndex", {
        /**
         * The refractive index of the material.
         */
        get: function () {
            return this._refractionIndex;
        },
        set: function (value) {
            this._refractionIndex = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionR", {
        /**
         * The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionR;
        },
        set: function (value) {
            this._dispersionR = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionG", {
        /**
         * The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionG;
        },
        set: function (value) {
            this._dispersionG = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionB", {
        /**
         * The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionB;
        },
        set: function (value) {
            this._dispersionB = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "alpha", {
        /**
         * The amount of transparency of the object. Warning: the alpha applies to the refracted color, not the actual
         * material. A value of 1 will make it appear fully transparent.
         */
        get: function () {
            return this._alpha;
        },
        set: function (value) {
            this._alpha = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iActivate = function (shaderObject, methodVO, stage) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index] = this._dispersionR + this._refractionIndex;
        if (this._useDispersion) {
            data[index + 1] = this._dispersionG + this._refractionIndex;
            data[index + 2] = this._dispersionB + this._refractionIndex;
        }
        data[index + 3] = this._alpha;
        stage.context.activateCubeTexture(methodVO.texturesIndex, this._envMap);
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iGetFragmentCode = function (shaderObject, methodVO, targetReg, registerCache, sharedRegisters) {
        // todo: data2.x could use common reg, so only 1 reg is used
        var data = registerCache.getFreeFragmentConstant();
        var data2 = registerCache.getFreeFragmentConstant();
        var code = "";
        var cubeMapReg = registerCache.getFreeTextureReg();
        var refractionDir;
        var refractionColor;
        var temp;
        methodVO.texturesIndex = cubeMapReg.index;
        methodVO.fragmentConstantsIndex = data.index * 4;
        refractionDir = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionDir, 1);
        refractionColor = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionColor, 1);
        temp = registerCache.getFreeFragmentVectorTemp();
        var viewDirReg = sharedRegisters.viewDirFragment;
        var normalReg = sharedRegisters.normalFragment;
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".x, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".x, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
        code += ShaderCompilerHelper.getTexCubeSampleCode(refractionColor, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "sub " + refractionColor + ".w, " + refractionColor + ".w, fc0.x	\n" + "kil " + refractionColor + ".w\n";
        if (this._useDispersion) {
            // GREEN
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".y, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".y, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".y, " + temp + ".y\n";
            // BLUE
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".z, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".z, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".z, " + temp + ".z\n";
        }
        registerCache.removeFragmentTempUsage(refractionDir);
        code += "sub " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + targetReg + ".xyz\n" + "mul " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + data + ".w\n" + "add " + targetReg + ".xyz, " + targetReg + ".xyz, " + refractionColor + ".xyz\n";
        registerCache.removeFragmentTempUsage(refractionColor);
        // restore
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        return code;
    };
    return EffectRefractionEnvMapMethod;
})(EffectMethodBase);
module.exports = EffectRefractionEnvMapMethod;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvbWV0aG9kcy9lZmZlY3RyZWZyYWN0aW9uZW52bWFwbWV0aG9kLnRzIl0sIm5hbWVzIjpbIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmNvbnN0cnVjdG9yIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5pSW5pdENvbnN0YW50cyIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuaUluaXRWTyIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuZW52TWFwIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5yZWZyYWN0aW9uSW5kZXgiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmRpc3BlcnNpb25SIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5kaXNwZXJzaW9uRyIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuZGlzcGVyc2lvbkIiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmFscGhhIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5pQWN0aXZhdGUiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmlHZXRGcmFnbWVudENvZGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQVNBLElBQU8sZ0JBQWdCLFdBQWUsdURBQXVELENBQUMsQ0FBQztBQUMvRixJQUFPLG9CQUFvQixXQUFjLHlEQUF5RCxDQUFDLENBQUM7QUFFcEcsQUFHQTs7R0FERztJQUNHLDRCQUE0QjtJQUFTQSxVQUFyQ0EsNEJBQTRCQSxVQUF5QkE7SUFXMURBOzs7Ozs7OztPQVFHQTtJQUNIQSxTQXBCS0EsNEJBQTRCQSxDQW9CckJBLE1BQXNCQSxFQUFFQSxlQUEyQkEsRUFBRUEsV0FBc0JBLEVBQUVBLFdBQXNCQSxFQUFFQSxXQUFzQkE7UUFBbkdDLCtCQUEyQkEsR0FBM0JBLG9CQUEyQkE7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R0EsYUFBYUEsQ0FBQ0EseUJBQXlCQSxFQUFFQSxDQUFDQTtRQUM1REEsYUFBYUEsQ0FBQ0EscUJBQXFCQSxDQUFDQSxlQUFlQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUV4REEsSUFBSUEsR0FBR0EsYUFBYUEsQ0FBQ0EseUJBQXlCQSxFQUFFQSxDQUFDQTtRQUVqREEsSUFBSUEsVUFBVUEsR0FBeUJBLGVBQWVBLENBQUNBLGVBQWVBLENBQUNBO1FBQ3ZFQSxJQUFJQSxTQUFTQSxHQUF5QkEsZUFBZUEsQ0FBQ0EsY0FBY0EsQ0FBQ0E7UUFFckVBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLENBQUNBO1FBRS9EQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUM1RUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUV0Q0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUUvREEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsSUFBSUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsSUFBSUEsR0FDakVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQzlFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUM5REEsSUFBSUEsSUFBSUEsb0JBQW9CQSxDQUFDQSxvQkFBb0JBLENBQUNBLGVBQWVBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLENBQUNBLE9BQU9BLEVBQUVBLFlBQVlBLENBQUNBLGlCQUFpQkEsRUFBRUEsWUFBWUEsQ0FBQ0EsYUFBYUEsRUFBRUEsYUFBYUEsQ0FBQ0EsR0FDdEtBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLGNBQWNBLEdBQ3BFQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxNQUFNQSxDQUFDQTtRQUVuQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDekJBLEFBQ0FBLFFBRFFBO1lBQ1JBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQzVFQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdkRBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdkRBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBRXRDQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBRS9EQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxJQUFJQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxJQUFJQSxHQUNqRUEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FDOUVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLENBQUNBO1lBQzlEQSxJQUFJQSxJQUFJQSxvQkFBb0JBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsQ0FBQ0EsT0FBT0EsRUFBRUEsWUFBWUEsQ0FBQ0EsaUJBQWlCQSxFQUFFQSxZQUFZQSxDQUFDQSxhQUFhQSxFQUFFQSxhQUFhQSxDQUFDQSxHQUMzSkEsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsQ0FBQ0E7WUFFbkRBLEFBQ0FBLE9BRE9BO1lBQ1BBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQzVFQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdkRBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdkRBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBRXRDQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBRS9EQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxJQUFJQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxJQUFJQSxHQUNqRUEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FDOUVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLENBQUNBO1lBQzlEQSxJQUFJQSxJQUFJQSxvQkFBb0JBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsQ0FBQ0EsT0FBT0EsRUFBRUEsWUFBWUEsQ0FBQ0EsaUJBQWlCQSxFQUFFQSxZQUFZQSxDQUFDQSxhQUFhQSxFQUFFQSxhQUFhQSxDQUFDQSxHQUMzSkEsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsQ0FBQ0E7UUFDcERBLENBQUNBO1FBRURBLGFBQWFBLENBQUNBLHVCQUF1QkEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7UUFFckRBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLFFBQVFBLEdBQUdBLGVBQWVBLEdBQUdBLFFBQVFBLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQzlGQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxRQUFRQSxHQUFHQSxlQUFlQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUNoRkEsTUFBTUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FBR0EsZUFBZUEsR0FBR0EsUUFBUUEsQ0FBQ0E7UUFFbkZBLGFBQWFBLENBQUNBLHVCQUF1QkEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0E7UUFFdkRBLEFBQ0FBLFVBRFVBO1FBQ1ZBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLEdBQUdBLFVBQVVBLEdBQUdBLFFBQVFBLENBQUNBO1FBRS9EQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtJQUNiQSxDQUFDQTtJQUNGWCxtQ0FBQ0E7QUFBREEsQ0E3UUEsQUE2UUNBLEVBN1EwQyxnQkFBZ0IsRUE2UTFEO0FBRUQsQUFBc0MsaUJBQTdCLDRCQUE0QixDQUFDIiwiZmlsZSI6Im1hdGVyaWFscy9tZXRob2RzL0VmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEN1YmVUZXh0dXJlQmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdGV4dHVyZXMvQ3ViZVRleHR1cmVCYXNlXCIpO1xuXG5pbXBvcnQgU3RhZ2VcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL1N0YWdlXCIpO1xuaW1wb3J0IElDb250ZXh0U3RhZ2VHTFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9JQ29udGV4dFN0YWdlR0xcIik7XG5pbXBvcnQgTWV0aG9kVk9cdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9tYXRlcmlhbHMvY29tcGlsYXRpb24vTWV0aG9kVk9cIik7XG5pbXBvcnQgU2hhZGVyT2JqZWN0QmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL2NvbXBpbGF0aW9uL1NoYWRlck9iamVjdEJhc2VcIik7XG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJDYWNoZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckNhY2hlXCIpO1xuaW1wb3J0IFNoYWRlclJlZ2lzdGVyRGF0YVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckRhdGFcIik7XG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJFbGVtZW50XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckVsZW1lbnRcIik7XG5pbXBvcnQgRWZmZWN0TWV0aG9kQmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL21ldGhvZHMvRWZmZWN0TWV0aG9kQmFzZVwiKTtcbmltcG9ydCBTaGFkZXJDb21waWxlckhlbHBlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy91dGlscy9TaGFkZXJDb21waWxlckhlbHBlclwiKTtcblxuLyoqXG4gKiBFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kIHByb3ZpZGVzIGEgbWV0aG9kIHRvIGFkZCByZWZyYWN0ZWQgdHJhbnNwYXJlbmN5IGJhc2VkIG9uIGN1YmUgbWFwcy5cbiAqL1xuY2xhc3MgRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZCBleHRlbmRzIEVmZmVjdE1ldGhvZEJhc2Vcbntcblx0cHJpdmF0ZSBfZW52TWFwOkN1YmVUZXh0dXJlQmFzZTtcblxuXHRwcml2YXRlIF9kaXNwZXJzaW9uUjpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9kaXNwZXJzaW9uRzpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF9kaXNwZXJzaW9uQjpudW1iZXIgPSAwO1xuXHRwcml2YXRlIF91c2VEaXNwZXJzaW9uOmJvb2xlYW47XG5cdHByaXZhdGUgX3JlZnJhY3Rpb25JbmRleDpudW1iZXI7XG5cdHByaXZhdGUgX2FscGhhOm51bWJlciA9IDE7XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZCBvYmplY3QuIEV4YW1wbGUgdmFsdWVzIGZvciBkaXNwZXJzaW9uIGFyZTogZGlzcGVyc2lvblI6IC0wLjAzLCBkaXNwZXJzaW9uRzogLTAuMDEsIGRpc3BlcnNpb25COiA9IC4wMDE1XG5cdCAqXG5cdCAqIEBwYXJhbSBlbnZNYXAgVGhlIGVudmlyb25tZW50IG1hcCBjb250YWluaW5nIHRoZSByZWZyYWN0ZWQgc2NlbmUuXG5cdCAqIEBwYXJhbSByZWZyYWN0aW9uSW5kZXggVGhlIHJlZnJhY3RpdmUgaW5kZXggb2YgdGhlIG1hdGVyaWFsLlxuXHQgKiBAcGFyYW0gZGlzcGVyc2lvblIgVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgcmVkIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxuXHQgKiBAcGFyYW0gZGlzcGVyc2lvbkcgVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgZ3JlZW4gY2hhbm5lbC4gRGVmYXVsdHMgdG8gMCAobm9uZSkuXG5cdCAqIEBwYXJhbSBkaXNwZXJzaW9uQiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSBibHVlIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxuXHQgKi9cblx0Y29uc3RydWN0b3IoZW52TWFwOkN1YmVUZXh0dXJlQmFzZSwgcmVmcmFjdGlvbkluZGV4Om51bWJlciA9IC4xLCBkaXNwZXJzaW9uUjpudW1iZXIgPSAwLCBkaXNwZXJzaW9uRzpudW1iZXIgPSAwLCBkaXNwZXJzaW9uQjpudW1iZXIgPSAwKVxuXHR7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9lbnZNYXAgPSBlbnZNYXA7XG5cdFx0dGhpcy5fZGlzcGVyc2lvblIgPSBkaXNwZXJzaW9uUjtcblx0XHR0aGlzLl9kaXNwZXJzaW9uRyA9IGRpc3BlcnNpb25HO1xuXHRcdHRoaXMuX2Rpc3BlcnNpb25CID0gZGlzcGVyc2lvbkI7XG5cdFx0dGhpcy5fdXNlRGlzcGVyc2lvbiA9ICEodGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkIgJiYgdGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkcpO1xuXHRcdHRoaXMuX3JlZnJhY3Rpb25JbmRleCA9IHJlZnJhY3Rpb25JbmRleDtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGlJbml0Q29uc3RhbnRzKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCBtZXRob2RWTzpNZXRob2RWTylcblx0e1xuXHRcdHZhciBpbmRleDpudW1iZXIgLyppbnQqLyA9IG1ldGhvZFZPLmZyYWdtZW50Q29uc3RhbnRzSW5kZXg7XG5cdFx0dmFyIGRhdGE6QXJyYXk8bnVtYmVyPiA9IHNoYWRlck9iamVjdC5mcmFnbWVudENvbnN0YW50RGF0YTtcblx0XHRkYXRhW2luZGV4ICsgNF0gPSAxO1xuXHRcdGRhdGFbaW5kZXggKyA1XSA9IDA7XG5cdFx0ZGF0YVtpbmRleCArIDddID0gMTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGlJbml0Vk8oc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIG1ldGhvZFZPOk1ldGhvZFZPKVxuXHR7XG5cdFx0bWV0aG9kVk8ubmVlZHNOb3JtYWxzID0gdHJ1ZTtcblx0XHRtZXRob2RWTy5uZWVkc1ZpZXcgPSB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBjdWJlIGVudmlyb25tZW50IG1hcCB0byB1c2UgZm9yIHRoZSByZWZyYWN0aW9uLlxuXHQgKi9cblx0cHVibGljIGdldCBlbnZNYXAoKTpDdWJlVGV4dHVyZUJhc2Vcblx0e1xuXHRcdHJldHVybiB0aGlzLl9lbnZNYXA7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGVudk1hcCh2YWx1ZTpDdWJlVGV4dHVyZUJhc2UpXG5cdHtcblx0XHR0aGlzLl9lbnZNYXAgPSB2YWx1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgcmVmcmFjdGl2ZSBpbmRleCBvZiB0aGUgbWF0ZXJpYWwuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHJlZnJhY3Rpb25JbmRleCgpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3JlZnJhY3Rpb25JbmRleDtcblx0fVxuXG5cdHB1YmxpYyBzZXQgcmVmcmFjdGlvbkluZGV4KHZhbHVlOm51bWJlcilcblx0e1xuXHRcdHRoaXMuX3JlZnJhY3Rpb25JbmRleCA9IHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBhbW91bnQgb2YgY2hyb21hdGljIGRpc3BlcnNpb24gb2YgdGhlIHJlZCBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cblx0ICovXG5cdHB1YmxpYyBnZXQgZGlzcGVyc2lvblIoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9kaXNwZXJzaW9uUjtcblx0fVxuXG5cdHB1YmxpYyBzZXQgZGlzcGVyc2lvblIodmFsdWU6bnVtYmVyKVxuXHR7XG5cdFx0dGhpcy5fZGlzcGVyc2lvblIgPSB2YWx1ZTtcblxuXHRcdHZhciB1c2VEaXNwZXJzaW9uOmJvb2xlYW4gPSAhKHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25CICYmIHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25HKTtcblx0XHRpZiAodGhpcy5fdXNlRGlzcGVyc2lvbiAhPSB1c2VEaXNwZXJzaW9uKSB7XG5cdFx0XHR0aGlzLmlJbnZhbGlkYXRlU2hhZGVyUHJvZ3JhbSgpO1xuXHRcdFx0dGhpcy5fdXNlRGlzcGVyc2lvbiA9IHVzZURpc3BlcnNpb247XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBhbW91bnQgb2YgY2hyb21hdGljIGRpc3BlcnNpb24gb2YgdGhlIGdyZWVuIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxuXHQgKi9cblx0cHVibGljIGdldCBkaXNwZXJzaW9uRygpOm51bWJlclxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2Rpc3BlcnNpb25HO1xuXHR9XG5cblx0cHVibGljIHNldCBkaXNwZXJzaW9uRyh2YWx1ZTpudW1iZXIpXG5cdHtcblx0XHR0aGlzLl9kaXNwZXJzaW9uRyA9IHZhbHVlO1xuXG5cdFx0dmFyIHVzZURpc3BlcnNpb246Ym9vbGVhbiA9ICEodGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkIgJiYgdGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkcpO1xuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uICE9IHVzZURpc3BlcnNpb24pIHtcblx0XHRcdHRoaXMuaUludmFsaWRhdGVTaGFkZXJQcm9ncmFtKCk7XG5cdFx0XHR0aGlzLl91c2VEaXNwZXJzaW9uID0gdXNlRGlzcGVyc2lvbjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgYmx1ZSBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cblx0ICovXG5cdHB1YmxpYyBnZXQgZGlzcGVyc2lvbkIoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9kaXNwZXJzaW9uQjtcblx0fVxuXG5cdHB1YmxpYyBzZXQgZGlzcGVyc2lvbkIodmFsdWU6bnVtYmVyKVxuXHR7XG5cdFx0dGhpcy5fZGlzcGVyc2lvbkIgPSB2YWx1ZTtcblxuXHRcdHZhciB1c2VEaXNwZXJzaW9uOmJvb2xlYW4gPSAhKHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25CICYmIHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25HKTtcblx0XHRpZiAodGhpcy5fdXNlRGlzcGVyc2lvbiAhPSB1c2VEaXNwZXJzaW9uKSB7XG5cdFx0XHR0aGlzLmlJbnZhbGlkYXRlU2hhZGVyUHJvZ3JhbSgpO1xuXHRcdFx0dGhpcy5fdXNlRGlzcGVyc2lvbiA9IHVzZURpc3BlcnNpb247XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBhbW91bnQgb2YgdHJhbnNwYXJlbmN5IG9mIHRoZSBvYmplY3QuIFdhcm5pbmc6IHRoZSBhbHBoYSBhcHBsaWVzIHRvIHRoZSByZWZyYWN0ZWQgY29sb3IsIG5vdCB0aGUgYWN0dWFsXG5cdCAqIG1hdGVyaWFsLiBBIHZhbHVlIG9mIDEgd2lsbCBtYWtlIGl0IGFwcGVhciBmdWxseSB0cmFuc3BhcmVudC5cblx0ICovXG5cdHB1YmxpYyBnZXQgYWxwaGEoKTpudW1iZXJcblx0e1xuXHRcdHJldHVybiB0aGlzLl9hbHBoYTtcblx0fVxuXG5cdHB1YmxpYyBzZXQgYWxwaGEodmFsdWU6bnVtYmVyKVxuXHR7XG5cdFx0dGhpcy5fYWxwaGEgPSB2YWx1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGlBY3RpdmF0ZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgbWV0aG9kVk86TWV0aG9kVk8sIHN0YWdlOlN0YWdlKVxuXHR7XG5cdFx0dmFyIGluZGV4Om51bWJlciAvKmludCovID0gbWV0aG9kVk8uZnJhZ21lbnRDb25zdGFudHNJbmRleDtcblx0XHR2YXIgZGF0YTpBcnJheTxudW1iZXI+ID0gc2hhZGVyT2JqZWN0LmZyYWdtZW50Q29uc3RhbnREYXRhO1xuXG5cdFx0ZGF0YVtpbmRleF0gPSB0aGlzLl9kaXNwZXJzaW9uUiArIHRoaXMuX3JlZnJhY3Rpb25JbmRleDtcblxuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uKSB7XG5cdFx0XHRkYXRhW2luZGV4ICsgMV0gPSB0aGlzLl9kaXNwZXJzaW9uRyArIHRoaXMuX3JlZnJhY3Rpb25JbmRleDtcblx0XHRcdGRhdGFbaW5kZXggKyAyXSA9IHRoaXMuX2Rpc3BlcnNpb25CICsgdGhpcy5fcmVmcmFjdGlvbkluZGV4O1xuXHRcdH1cblx0XHRkYXRhW2luZGV4ICsgM10gPSB0aGlzLl9hbHBoYTtcblxuXHRcdCg8SUNvbnRleHRTdGFnZUdMPiBzdGFnZS5jb250ZXh0KS5hY3RpdmF0ZUN1YmVUZXh0dXJlKG1ldGhvZFZPLnRleHR1cmVzSW5kZXgsIHRoaXMuX2Vudk1hcCk7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBpR2V0RnJhZ21lbnRDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlLCBtZXRob2RWTzpNZXRob2RWTywgdGFyZ2V0UmVnOlNoYWRlclJlZ2lzdGVyRWxlbWVudCwgcmVnaXN0ZXJDYWNoZTpTaGFkZXJSZWdpc3RlckNhY2hlLCBzaGFyZWRSZWdpc3RlcnM6U2hhZGVyUmVnaXN0ZXJEYXRhKTpzdHJpbmdcblx0e1xuXHRcdC8vIHRvZG86IGRhdGEyLnggY291bGQgdXNlIGNvbW1vbiByZWcsIHNvIG9ubHkgMSByZWcgaXMgdXNlZFxuXHRcdHZhciBkYXRhOlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50Q29uc3RhbnQoKTtcblx0XHR2YXIgZGF0YTI6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRDb25zdGFudCgpO1xuXHRcdHZhciBjb2RlOnN0cmluZyA9IFwiXCI7XG5cdFx0dmFyIGN1YmVNYXBSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlVGV4dHVyZVJlZygpO1xuXHRcdHZhciByZWZyYWN0aW9uRGlyOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0XHR2YXIgcmVmcmFjdGlvbkNvbG9yOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0XHR2YXIgdGVtcDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cblx0XHRtZXRob2RWTy50ZXh0dXJlc0luZGV4ID0gY3ViZU1hcFJlZy5pbmRleDtcblx0XHRtZXRob2RWTy5mcmFnbWVudENvbnN0YW50c0luZGV4ID0gZGF0YS5pbmRleCo0O1xuXG5cdFx0cmVmcmFjdGlvbkRpciA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xuXHRcdHJlZ2lzdGVyQ2FjaGUuYWRkRnJhZ21lbnRUZW1wVXNhZ2VzKHJlZnJhY3Rpb25EaXIsIDEpO1xuXHRcdHJlZnJhY3Rpb25Db2xvciA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xuXHRcdHJlZ2lzdGVyQ2FjaGUuYWRkRnJhZ21lbnRUZW1wVXNhZ2VzKHJlZnJhY3Rpb25Db2xvciwgMSk7XG5cblx0XHR0ZW1wID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRWZWN0b3JUZW1wKCk7XG5cblx0XHR2YXIgdmlld0RpclJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSBzaGFyZWRSZWdpc3RlcnMudmlld0RpckZyYWdtZW50O1xuXHRcdHZhciBub3JtYWxSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gc2hhcmVkUmVnaXN0ZXJzLm5vcm1hbEZyYWdtZW50O1xuXG5cdFx0Y29kZSArPSBcIm5lZyBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgdmlld0RpclJlZyArIFwiLnh5elxcblwiO1xuXG5cdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcblx0XHRcdFwic3ViIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YTIgKyBcIi54LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YSArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cblx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLngsIFwiICsgZGF0YSArIFwiLngsIFwiICsgdGVtcCArIFwiLnhcXG5cIiArXG5cdFx0XHRcImFkZCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi55XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIG5vcm1hbFJlZyArIFwiLnh5elxcblwiICtcblxuXHRcdFx0XCJtdWwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIsIFwiICsgZGF0YSArIFwiLngsIFwiICsgdmlld0RpclJlZyArIFwiXFxuXCIgK1xuXHRcdFx0XCJzdWIgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLnh5elxcblwiICtcblx0XHRcdFwibnJtIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6XFxuXCI7XG5cdFx0Y29kZSArPSBTaGFkZXJDb21waWxlckhlbHBlci5nZXRUZXhDdWJlU2FtcGxlQ29kZShyZWZyYWN0aW9uQ29sb3IsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xuXHRcdFx0XCJzdWIgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi53LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLncsIGZjMC54XHRcXG5cIiArXG5cdFx0XHRcImtpbCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLndcXG5cIjtcblxuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uKSB7XG5cdFx0XHQvLyBHUkVFTlxuXHRcdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xuXHRcdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cdFx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcblx0XHRcdFx0XCJhZGQgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueVxcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIG5vcm1hbFJlZyArIFwiLnh5elxcblwiICtcblxuXHRcdFx0XHRcIm11bCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIiwgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB2aWV3RGlyUmVnICsgXCJcXG5cIiArXG5cdFx0XHRcdFwic3ViIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcdFwibnJtIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6XFxuXCI7XG5cdFx0XHRjb2RlICs9IFNoYWRlckNvbXBpbGVySGVscGVyLmdldFRleEN1YmVTYW1wbGVDb2RlKHRlbXAsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xuXHRcdFx0XHRcIm1vdiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnksIFwiICsgdGVtcCArIFwiLnlcXG5cIjtcblxuXHRcdFx0Ly8gQkxVRVxuXHRcdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xuXHRcdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcblx0XHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cdFx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXG5cblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcblx0XHRcdFx0XCJhZGQgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueVxcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIG5vcm1hbFJlZyArIFwiLnh5elxcblwiICtcblxuXHRcdFx0XHRcIm11bCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIiwgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB2aWV3RGlyUmVnICsgXCJcXG5cIiArXG5cdFx0XHRcdFwic3ViIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHRlbXAgKyBcIi54eXpcXG5cIiArXG5cdFx0XHRcdFwibnJtIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6XFxuXCI7XG5cdFx0XHRjb2RlICs9IFNoYWRlckNvbXBpbGVySGVscGVyLmdldFRleEN1YmVTYW1wbGVDb2RlKHRlbXAsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xuXHRcdFx0XHRcIm1vdiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnosIFwiICsgdGVtcCArIFwiLnpcXG5cIjtcblx0XHR9XG5cblx0XHRyZWdpc3RlckNhY2hlLnJlbW92ZUZyYWdtZW50VGVtcFVzYWdlKHJlZnJhY3Rpb25EaXIpO1xuXG5cdFx0Y29kZSArPSBcInN1YiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi54eXosIFwiICsgdGFyZ2V0UmVnICsgXCIueHl6XFxuXCIgK1xuXHRcdFx0XCJtdWwgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueHl6LCBcIiArIGRhdGEgKyBcIi53XFxuXCIgK1xuXHRcdFx0XCJhZGQgXCIgKyB0YXJnZXRSZWcgKyBcIi54eXosIFwiICsgdGFyZ2V0UmVnICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5elxcblwiO1xuXG5cdFx0cmVnaXN0ZXJDYWNoZS5yZW1vdmVGcmFnbWVudFRlbXBVc2FnZShyZWZyYWN0aW9uQ29sb3IpO1xuXG5cdFx0Ly8gcmVzdG9yZVxuXHRcdGNvZGUgKz0gXCJuZWcgXCIgKyB2aWV3RGlyUmVnICsgXCIueHl6LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXpcXG5cIjtcblxuXHRcdHJldHVybiBjb2RlO1xuXHR9XG59XG5cbmV4cG9ydCA9IEVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2Q7Il19