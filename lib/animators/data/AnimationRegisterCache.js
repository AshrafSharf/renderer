var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ShaderRegisterCache = require("awayjs-renderergl/lib/compilation/ShaderRegisterCache");
var ShaderRegisterElement = require("awayjs-renderergl/lib/compilation/ShaderRegisterElement");
/**
 * ...
 */
var AnimationRegisterCache = (function (_super) {
    __extends(AnimationRegisterCache, _super);
    function AnimationRegisterCache(profile) {
        _super.call(this, profile);
        this.indexDictionary = new Object();
        this.vertexConstantData = new Array();
        this.fragmentConstantData = new Array();
    }
    AnimationRegisterCache.prototype.reset = function () {
        _super.prototype.reset.call(this);
        this.rotationRegisters = new Array();
        this.positionAttribute = this.getRegisterFromString(this.sourceRegisters[0]);
        this.scaleAndRotateTarget = this.getRegisterFromString(this.targetRegisters[0]);
        this.addVertexTempUsages(this.scaleAndRotateTarget, 1);
        for (var i = 1; i < this.targetRegisters.length; i++) {
            this.rotationRegisters.push(this.getRegisterFromString(this.targetRegisters[i]));
            this.addVertexTempUsages(this.rotationRegisters[i - 1], 1);
        }
        this.scaleAndRotateTarget = new ShaderRegisterElement(this.scaleAndRotateTarget.regName, this.scaleAndRotateTarget.index); //only use xyz, w is used as vertexLife
        //allot const register
        this.vertexZeroConst = this.getFreeVertexConstant();
        this.vertexZeroConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 0);
        this.vertexOneConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 1);
        this.vertexTwoConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 2);
        //allot temp register
        this.positionTarget = this.getFreeVertexVectorTemp();
        this.addVertexTempUsages(this.positionTarget, 1);
        this.positionTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);
        if (this.needVelocity) {
            this.velocityTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.velocityTarget, 1);
            this.velocityTarget = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index);
            this.vertexTime = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index, 3);
            this.vertexLife = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index, 3);
        }
        else {
            var tempTime = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(tempTime, 1);
            this.vertexTime = new ShaderRegisterElement(tempTime.regName, tempTime.index, 0);
            this.vertexLife = new ShaderRegisterElement(tempTime.regName, tempTime.index, 1);
        }
    };
    AnimationRegisterCache.prototype.setUVSourceAndTarget = function (UVAttribute, UVVaring) {
        this.uvVar = this.getRegisterFromString(UVVaring);
        this.uvAttribute = this.getRegisterFromString(UVAttribute);
        //uv action is processed after normal actions,so use offsetTarget as uvTarget
        this.uvTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);
    };
    AnimationRegisterCache.prototype.setRegisterIndex = function (node, parameterIndex /*int*/, registerIndex /*int*/) {
        //8 should be enough for any node.
        var t = this.indexDictionary[node.id];
        if (t == null)
            t = this.indexDictionary[node.id] = new Array(8);
        t[parameterIndex] = registerIndex;
    };
    AnimationRegisterCache.prototype.getRegisterIndex = function (node, parameterIndex /*int*/) {
        return this.indexDictionary[node.id][parameterIndex];
    };
    AnimationRegisterCache.prototype.getInitCode = function () {
        var len = this.sourceRegisters.length;
        var code = "";
        for (var i = 0; i < len; i++)
            code += "mov " + this.targetRegisters[i] + "," + this.sourceRegisters[i] + "\n";
        code += "mov " + this.positionTarget + ".xyz," + this.vertexZeroConst.toString() + "\n";
        if (this.needVelocity)
            code += "mov " + this.velocityTarget + ".xyz," + this.vertexZeroConst.toString() + "\n";
        return code;
    };
    AnimationRegisterCache.prototype.getCombinationCode = function () {
        return "add " + this.scaleAndRotateTarget + ".xyz," + this.scaleAndRotateTarget + ".xyz," + this.positionTarget + ".xyz\n";
    };
    AnimationRegisterCache.prototype.initColorRegisters = function () {
        var code = "";
        if (this.hasColorMulNode) {
            this.colorMulTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.colorMulTarget, 1);
            this.colorMulVary = this.getFreeVarying();
            code += "mov " + this.colorMulTarget + "," + this.vertexOneConst + "\n";
        }
        if (this.hasColorAddNode) {
            this.colorAddTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.colorAddTarget, 1);
            this.colorAddVary = this.getFreeVarying();
            code += "mov " + this.colorAddTarget + "," + this.vertexZeroConst + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getColorPassCode = function () {
        var code = "";
        if (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {
            if (this.hasColorMulNode)
                code += "mov " + this.colorMulVary + "," + this.colorMulTarget + "\n";
            if (this.hasColorAddNode)
                code += "mov " + this.colorAddVary + "," + this.colorAddTarget + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getColorCombinationCode = function (shadedTarget) {
        var code = "";
        if (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {
            var colorTarget = this.getRegisterFromString(shadedTarget);
            this.addFragmentTempUsages(colorTarget, 1);
            if (this.hasColorMulNode)
                code += "mul " + colorTarget + "," + colorTarget + "," + this.colorMulVary + "\n";
            if (this.hasColorAddNode)
                code += "add " + colorTarget + "," + colorTarget + "," + this.colorAddVary + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getRegisterFromString = function (code) {
        var temp = code.split(/(\d+)/);
        return new ShaderRegisterElement(temp[0], parseInt(temp[1]));
    };
    Object.defineProperty(AnimationRegisterCache.prototype, "numVertexConstant", {
        get: function () {
            return this._numVertexConstant;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AnimationRegisterCache.prototype, "numFragmentConstant", {
        get: function () {
            return this._numFragmentConstant;
        },
        enumerable: true,
        configurable: true
    });
    AnimationRegisterCache.prototype.setDataLength = function () {
        this._numVertexConstant = this.numUsedVertexConstants - this.vertexConstantOffset;
        this._numFragmentConstant = this.numUsedFragmentConstants - this.fragmentConstantOffset;
        this.vertexConstantData.length = this._numVertexConstant * 4;
        this.fragmentConstantData.length = this._numFragmentConstant * 4;
    };
    AnimationRegisterCache.prototype.setVertexConst = function (index /*int*/, x, y, z, w) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (z === void 0) { z = 0; }
        if (w === void 0) { w = 0; }
        var _index = (index - this.vertexConstantOffset) * 4;
        this.vertexConstantData[_index++] = x;
        this.vertexConstantData[_index++] = y;
        this.vertexConstantData[_index++] = z;
        this.vertexConstantData[_index] = w;
    };
    AnimationRegisterCache.prototype.setVertexConstFromArray = function (index /*int*/, data) {
        var _index = (index - this.vertexConstantOffset) * 4;
        for (var i = 0; i < data.length; i++)
            this.vertexConstantData[_index++] = data[i];
    };
    AnimationRegisterCache.prototype.setVertexConstFromMatrix = function (index /*int*/, matrix) {
        var rawData = matrix.rawData;
        var _index = (index - this.vertexConstantOffset) * 4;
        this.vertexConstantData[_index++] = rawData[0];
        this.vertexConstantData[_index++] = rawData[4];
        this.vertexConstantData[_index++] = rawData[8];
        this.vertexConstantData[_index++] = rawData[12];
        this.vertexConstantData[_index++] = rawData[1];
        this.vertexConstantData[_index++] = rawData[5];
        this.vertexConstantData[_index++] = rawData[9];
        this.vertexConstantData[_index++] = rawData[13];
        this.vertexConstantData[_index++] = rawData[2];
        this.vertexConstantData[_index++] = rawData[6];
        this.vertexConstantData[_index++] = rawData[10];
        this.vertexConstantData[_index++] = rawData[14];
        this.vertexConstantData[_index++] = rawData[3];
        this.vertexConstantData[_index++] = rawData[7];
        this.vertexConstantData[_index++] = rawData[11];
        this.vertexConstantData[_index] = rawData[15];
    };
    AnimationRegisterCache.prototype.setFragmentConst = function (index /*int*/, x, y, z, w) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (z === void 0) { z = 0; }
        if (w === void 0) { w = 0; }
        var _index = (index - this.fragmentConstantOffset) * 4;
        this.fragmentConstantData[_index++] = x;
        this.fragmentConstantData[_index++] = y;
        this.fragmentConstantData[_index++] = z;
        this.fragmentConstantData[_index] = w;
    };
    return AnimationRegisterCache;
})(ShaderRegisterCache);
module.exports = AnimationRegisterCache;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvZGF0YS9BbmltYXRpb25SZWdpc3RlckNhY2hlLnRzIl0sIm5hbWVzIjpbIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmNvbnN0cnVjdG9yIiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5yZXNldCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VVZTb3VyY2VBbmRUYXJnZXQiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldFJlZ2lzdGVySW5kZXgiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmdldFJlZ2lzdGVySW5kZXgiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmdldEluaXRDb2RlIiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRDb21iaW5hdGlvbkNvZGUiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmluaXRDb2xvclJlZ2lzdGVycyIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuZ2V0Q29sb3JQYXNzQ29kZSIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuZ2V0Q29sb3JDb21iaW5hdGlvbkNvZGUiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmdldFJlZ2lzdGVyRnJvbVN0cmluZyIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUubnVtVmVydGV4Q29uc3RhbnQiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLm51bUZyYWdtZW50Q29uc3RhbnQiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldERhdGFMZW5ndGgiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldFZlcnRleENvbnN0IiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRWZXJ0ZXhDb25zdEZyb21BcnJheSIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VmVydGV4Q29uc3RGcm9tTWF0cml4IiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRGcmFnbWVudENvbnN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJQSxJQUFPLG1CQUFtQixXQUFhLHVEQUF1RCxDQUFDLENBQUM7QUFDaEcsSUFBTyxxQkFBcUIsV0FBWSx5REFBeUQsQ0FBQyxDQUFDO0FBR25HLEFBR0E7O0dBREc7SUFDRyxzQkFBc0I7SUFBU0EsVUFBL0JBLHNCQUFzQkEsVUFBNEJBO0lBOEN2REEsU0E5Q0tBLHNCQUFzQkEsQ0E4Q2ZBLE9BQWNBO1FBRXpCQyxrQkFBTUEsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFmUkEsb0JBQWVBLEdBQVVBLElBQUlBLE1BQU1BLEVBQUVBLENBQUNBO1FBMkp2Q0EsdUJBQWtCQSxHQUFpQkEsSUFBSUEsS0FBS0EsRUFBVUEsQ0FBQ0E7UUFDdkRBLHlCQUFvQkEsR0FBaUJBLElBQUlBLEtBQUtBLEVBQVVBLENBQUNBO0lBNUloRUEsQ0FBQ0E7SUFFTUQsc0NBQUtBLEdBQVpBO1FBRUNFLGdCQUFLQSxDQUFDQSxLQUFLQSxXQUFFQSxDQUFDQTtRQUVkQSxJQUFJQSxDQUFDQSxpQkFBaUJBLEdBQUdBLElBQUlBLEtBQUtBLEVBQXlCQSxDQUFDQTtRQUM1REEsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxHQUFHQSxJQUFJQSxDQUFDQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQzdFQSxJQUFJQSxDQUFDQSxvQkFBb0JBLEdBQUdBLElBQUlBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDaEZBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUV2REEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBa0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO1lBQ3JFQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDakZBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUM1REEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsT0FBT0EsRUFBRUEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxLQUFLQSxDQUFDQSxFQUFFQSx1Q0FBdUNBO1FBRWxLQSxBQUVBQSxzQkFGc0JBO1FBRXRCQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQSxxQkFBcUJBLEVBQUVBLENBQUNBO1FBQ3BEQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQzlHQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQzdHQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FB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Q0EsQ0FBQ0E7WUFDMUJBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLHVCQUF1QkEsRUFBRUEsQ0FBQ0E7WUFDckRBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDakRBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLEVBQUVBLENBQUNBO1lBQzFDQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUMxRUEsQ0FBQ0E7UUFDREEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7SUFDYkEsQ0FBQ0E7SUFFTVIsaURBQWdCQSxHQUF2QkE7UUFFQ1MsSUFBSUEsSUFBSUEsR0FBVUEsRUFBRUEsQ0FBQ0E7UUFDckJBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLHFCQUFxQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsSUFBSUEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbEZBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBO2dCQUN4QkEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0E7WUFDdkVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBO2dCQUN4QkEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDeEVBLENBQUNBO1FBQ0RBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO0lBQ2JB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QSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtJQUUvQ0EsQ0FBQ0E7SUFFTWpCLGlEQUFnQkEsR0FBdkJBLFVBQXdCQSxLQUFLQSxDQUFRQSxPQUFEQSxBQUFRQSxFQUFFQSxDQUFZQSxFQUFFQSxDQUFZQSxFQUFFQSxDQUFZQSxFQUFFQSxDQUFZQTtRQUF0RGtCLGlCQUFZQSxHQUFaQSxLQUFZQTtRQUFFQSxpQkFBWUEsR0FBWkEsS0FBWUE7UUFBRUEsaUJBQVlBLEdBQVpBLEtBQVlBO1FBQUVBLGlCQUFZQSxHQUFaQSxLQUFZQTtRQUVuR0EsSUFBSUEsTUFBTUEsR0FBa0JBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLHNCQUFzQkEsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDcEVBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDeENBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDeENBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDeENBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDdkNBLENBQUNBO0lBQ0ZsQiw2QkFBQ0E7QUFBREEsQ0FuUUEsQUFtUUNBLEVBblFvQyxtQkFBbUIsRUFtUXZEO0FBRUQsQUFBZ0MsaUJBQXZCLHNCQUFzQixDQUFDIiwiZmlsZSI6ImFuaW1hdG9ycy9kYXRhL0FuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1hdHJpeDNEXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vTWF0cml4M0RcIik7XHJcblxyXG5pbXBvcnQgQW5pbWF0aW9uTm9kZUJhc2VcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYW5pbWF0b3JzL25vZGVzL0FuaW1hdGlvbk5vZGVCYXNlXCIpO1xyXG5cclxuaW1wb3J0IFNoYWRlclJlZ2lzdGVyQ2FjaGVcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJDYWNoZVwiKTtcclxuaW1wb3J0IFNoYWRlclJlZ2lzdGVyRWxlbWVudFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJFbGVtZW50XCIpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiAuLi5cclxuICovXHJcbmNsYXNzIEFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUgZXh0ZW5kcyBTaGFkZXJSZWdpc3RlckNhY2hlXHJcbntcclxuXHQvL3ZlcnRleFxyXG5cdHB1YmxpYyBwb3NpdGlvbkF0dHJpYnV0ZTpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0cHVibGljIHV2QXR0cmlidXRlOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHRwdWJsaWMgcG9zaXRpb25UYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cdHB1YmxpYyBzY2FsZUFuZFJvdGF0ZVRhcmdldDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0cHVibGljIHZlbG9jaXR5VGFyZ2V0OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHRwdWJsaWMgdmVydGV4VGltZTpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0cHVibGljIHZlcnRleExpZmU6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cdHB1YmxpYyB2ZXJ0ZXhaZXJvQ29uc3Q6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cdHB1YmxpYyB2ZXJ0ZXhPbmVDb25zdDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0cHVibGljIHZlcnRleFR3b0NvbnN0OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHRwdWJsaWMgdXZUYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cdHB1YmxpYyBjb2xvckFkZFRhcmdldDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0cHVibGljIGNvbG9yTXVsVGFyZ2V0OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHQvL3ZhcnlcclxuXHRwdWJsaWMgY29sb3JBZGRWYXJ5OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHRwdWJsaWMgY29sb3JNdWxWYXJ5OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHJcblx0Ly9mcmFnbWVudFxyXG5cclxuXHRwdWJsaWMgdXZWYXI6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xyXG5cclxuXHQvL3RoZXNlIGFyZSB0YXJnZXRzIG9ubHkgbmVlZCB0byByb3RhdGUgKCBub3JtYWwgYW5kIHRhbmdlbnQgKVxyXG5cdHB1YmxpYyByb3RhdGlvblJlZ2lzdGVyczpBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+O1xyXG5cclxuXHRwdWJsaWMgbmVlZEZyYWdtZW50QW5pbWF0aW9uOmJvb2xlYW47XHJcblx0cHVibGljIG5lZWRVVkFuaW1hdGlvbjpib29sZWFuO1xyXG5cclxuXHRwdWJsaWMgc291cmNlUmVnaXN0ZXJzOkFycmF5PHN0cmluZz47XHJcblx0cHVibGljIHRhcmdldFJlZ2lzdGVyczpBcnJheTxzdHJpbmc+O1xyXG5cclxuXHRwcml2YXRlIGluZGV4RGljdGlvbmFyeTpPYmplY3QgPSBuZXcgT2JqZWN0KCk7XHJcblxyXG5cdC8vc2V0IHRydWUgaWYgaGFzIGFuIG5vZGUgd2hpY2ggd2lsbCBjaGFuZ2UgVVZcclxuXHRwdWJsaWMgaGFzVVZOb2RlOmJvb2xlYW47XHJcblx0Ly9zZXQgaWYgdGhlIG90aGVyIG5vZGVzIG5lZWQgdG8gYWNjZXNzIHRoZSB2ZWxvY2l0eVxyXG5cdHB1YmxpYyBuZWVkVmVsb2NpdHk6Ym9vbGVhbjtcclxuXHQvL3NldCBpZiBoYXMgYSBiaWxsYm9hcmQgbm9kZS5cclxuXHRwdWJsaWMgaGFzQmlsbGJvYXJkOmJvb2xlYW47XHJcblx0Ly9zZXQgaWYgaGFzIGFuIG5vZGUgd2hpY2ggd2lsbCBhcHBseSBjb2xvciBtdWx0aXBsZSBvcGVyYXRpb25cclxuXHRwdWJsaWMgaGFzQ29sb3JNdWxOb2RlOmJvb2xlYW47XHJcblx0Ly9zZXQgaWYgaGFzIGFuIG5vZGUgd2hpY2ggd2lsbCBhcHBseSBjb2xvciBhZGQgb3BlcmF0aW9uXHJcblx0cHVibGljIGhhc0NvbG9yQWRkTm9kZTpib29sZWFuO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihwcm9maWxlOnN0cmluZylcclxuXHR7XHJcblx0XHRzdXBlcihwcm9maWxlKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZXNldCgpXHJcblx0e1xyXG5cdFx0c3VwZXIucmVzZXQoKTtcclxuXHJcblx0XHR0aGlzLnJvdGF0aW9uUmVnaXN0ZXJzID0gbmV3IEFycmF5PFNoYWRlclJlZ2lzdGVyRWxlbWVudD4oKTtcclxuXHRcdHRoaXMucG9zaXRpb25BdHRyaWJ1dGUgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyh0aGlzLnNvdXJjZVJlZ2lzdGVyc1swXSk7XHJcblx0XHR0aGlzLnNjYWxlQW5kUm90YXRlVGFyZ2V0ID0gdGhpcy5nZXRSZWdpc3RlckZyb21TdHJpbmcodGhpcy50YXJnZXRSZWdpc3RlcnNbMF0pO1xyXG5cdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMuc2NhbGVBbmRSb3RhdGVUYXJnZXQsIDEpO1xyXG5cclxuXHRcdGZvciAodmFyIGk6bnVtYmVyIC8qaW50Ki8gPSAxOyBpIDwgdGhpcy50YXJnZXRSZWdpc3RlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dGhpcy5yb3RhdGlvblJlZ2lzdGVycy5wdXNoKHRoaXMuZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKHRoaXMudGFyZ2V0UmVnaXN0ZXJzW2ldKSk7XHJcblx0XHRcdHRoaXMuYWRkVmVydGV4VGVtcFVzYWdlcyh0aGlzLnJvdGF0aW9uUmVnaXN0ZXJzW2kgLSAxXSwgMSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldCA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldC5yZWdOYW1lLCB0aGlzLnNjYWxlQW5kUm90YXRlVGFyZ2V0LmluZGV4KTsgLy9vbmx5IHVzZSB4eXosIHcgaXMgdXNlZCBhcyB2ZXJ0ZXhMaWZlXHJcblxyXG5cdFx0Ly9hbGxvdCBjb25zdCByZWdpc3RlclxyXG5cclxuXHRcdHRoaXMudmVydGV4WmVyb0NvbnN0ID0gdGhpcy5nZXRGcmVlVmVydGV4Q29uc3RhbnQoKTtcclxuXHRcdHRoaXMudmVydGV4WmVyb0NvbnN0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlcnRleFplcm9Db25zdC5yZWdOYW1lLCB0aGlzLnZlcnRleFplcm9Db25zdC5pbmRleCwgMCk7XHJcblx0XHR0aGlzLnZlcnRleE9uZUNvbnN0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlcnRleFplcm9Db25zdC5yZWdOYW1lLCB0aGlzLnZlcnRleFplcm9Db25zdC5pbmRleCwgMSk7XHJcblx0XHR0aGlzLnZlcnRleFR3b0NvbnN0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlcnRleFplcm9Db25zdC5yZWdOYW1lLCB0aGlzLnZlcnRleFplcm9Db25zdC5pbmRleCwgMik7XHJcblxyXG5cdFx0Ly9hbGxvdCB0ZW1wIHJlZ2lzdGVyXHJcblx0XHR0aGlzLnBvc2l0aW9uVGFyZ2V0ID0gdGhpcy5nZXRGcmVlVmVydGV4VmVjdG9yVGVtcCgpO1xyXG5cdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMucG9zaXRpb25UYXJnZXQsIDEpO1xyXG5cdFx0dGhpcy5wb3NpdGlvblRhcmdldCA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy5wb3NpdGlvblRhcmdldC5yZWdOYW1lLCB0aGlzLnBvc2l0aW9uVGFyZ2V0LmluZGV4KTtcclxuXHJcblx0XHRpZiAodGhpcy5uZWVkVmVsb2NpdHkpIHtcclxuXHRcdFx0dGhpcy52ZWxvY2l0eVRhcmdldCA9IHRoaXMuZ2V0RnJlZVZlcnRleFZlY3RvclRlbXAoKTtcclxuXHRcdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMudmVsb2NpdHlUYXJnZXQsIDEpO1xyXG5cdFx0XHR0aGlzLnZlbG9jaXR5VGFyZ2V0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlbG9jaXR5VGFyZ2V0LnJlZ05hbWUsIHRoaXMudmVsb2NpdHlUYXJnZXQuaW5kZXgpO1xyXG5cdFx0XHR0aGlzLnZlcnRleFRpbWUgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMudmVsb2NpdHlUYXJnZXQucmVnTmFtZSwgdGhpcy52ZWxvY2l0eVRhcmdldC5pbmRleCwgMyk7XHJcblx0XHRcdHRoaXMudmVydGV4TGlmZSA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy5wb3NpdGlvblRhcmdldC5yZWdOYW1lLCB0aGlzLnBvc2l0aW9uVGFyZ2V0LmluZGV4LCAzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZhciB0ZW1wVGltZTpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XHJcblx0XHRcdHRoaXMuYWRkVmVydGV4VGVtcFVzYWdlcyh0ZW1wVGltZSwgMSk7XHJcblx0XHRcdHRoaXMudmVydGV4VGltZSA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGVtcFRpbWUucmVnTmFtZSwgdGVtcFRpbWUuaW5kZXgsIDApO1xyXG5cdFx0XHR0aGlzLnZlcnRleExpZmUgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRlbXBUaW1lLnJlZ05hbWUsIHRlbXBUaW1lLmluZGV4LCAxKTtcclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0VVZTb3VyY2VBbmRUYXJnZXQoVVZBdHRyaWJ1dGU6c3RyaW5nLCBVVlZhcmluZzpzdHJpbmcpXHJcblx0e1xyXG5cdFx0dGhpcy51dlZhciA9IHRoaXMuZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKFVWVmFyaW5nKTtcclxuXHRcdHRoaXMudXZBdHRyaWJ1dGUgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyhVVkF0dHJpYnV0ZSk7XHJcblx0XHQvL3V2IGFjdGlvbiBpcyBwcm9jZXNzZWQgYWZ0ZXIgbm9ybWFsIGFjdGlvbnMsc28gdXNlIG9mZnNldFRhcmdldCBhcyB1dlRhcmdldFxyXG5cdFx0dGhpcy51dlRhcmdldCA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy5wb3NpdGlvblRhcmdldC5yZWdOYW1lLCB0aGlzLnBvc2l0aW9uVGFyZ2V0LmluZGV4KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRSZWdpc3RlckluZGV4KG5vZGU6QW5pbWF0aW9uTm9kZUJhc2UsIHBhcmFtZXRlckluZGV4Om51bWJlciAvKmludCovLCByZWdpc3RlckluZGV4Om51bWJlciAvKmludCovKVxyXG5cdHtcclxuXHRcdC8vOCBzaG91bGQgYmUgZW5vdWdoIGZvciBhbnkgbm9kZS5cclxuXHRcdHZhciB0OkFycmF5PG51bWJlcj4gLyppbnQqLyA9IHRoaXMuaW5kZXhEaWN0aW9uYXJ5W25vZGUuaWRdO1xyXG5cclxuXHRcdGlmICh0ID09IG51bGwpXHJcblx0XHRcdHQgPSB0aGlzLmluZGV4RGljdGlvbmFyeVtub2RlLmlkXSA9IG5ldyBBcnJheTxudW1iZXI+KDgpIC8qaW50Ki87XHJcblxyXG5cdFx0dFtwYXJhbWV0ZXJJbmRleF0gPSByZWdpc3RlckluZGV4O1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldFJlZ2lzdGVySW5kZXgobm9kZTpBbmltYXRpb25Ob2RlQmFzZSwgcGFyYW1ldGVySW5kZXg6bnVtYmVyIC8qaW50Ki8pOm51bWJlciAvKmludCovXHJcblx0e1xyXG5cdFx0cmV0dXJuICg8QXJyYXk8bnVtYmVyPj4gdGhpcy5pbmRleERpY3Rpb25hcnlbbm9kZS5pZF0pW3BhcmFtZXRlckluZGV4XTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRJbml0Q29kZSgpOnN0cmluZ1xyXG5cdHtcclxuXHRcdHZhciBsZW46bnVtYmVyIC8qaW50Ki8gPSB0aGlzLnNvdXJjZVJlZ2lzdGVycy5sZW5ndGg7XHJcblx0XHR2YXIgY29kZTpzdHJpbmcgPSBcIlwiO1xyXG5cdFx0Zm9yICh2YXIgaTpudW1iZXIgLyppbnQqLyA9IDA7IGkgPCBsZW47IGkrKylcclxuXHRcdFx0Y29kZSArPSBcIm1vdiBcIiArIHRoaXMudGFyZ2V0UmVnaXN0ZXJzW2ldICsgXCIsXCIgKyB0aGlzLnNvdXJjZVJlZ2lzdGVyc1tpXSArIFwiXFxuXCI7XHJcblxyXG5cdFx0Y29kZSArPSBcIm1vdiBcIiArIHRoaXMucG9zaXRpb25UYXJnZXQgKyBcIi54eXosXCIgKyB0aGlzLnZlcnRleFplcm9Db25zdC50b1N0cmluZygpICsgXCJcXG5cIjtcclxuXHJcblx0XHRpZiAodGhpcy5uZWVkVmVsb2NpdHkpXHJcblx0XHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLnZlbG9jaXR5VGFyZ2V0ICsgXCIueHl6LFwiICsgdGhpcy52ZXJ0ZXhaZXJvQ29uc3QudG9TdHJpbmcoKSArIFwiXFxuXCI7XHJcblxyXG5cdFx0cmV0dXJuIGNvZGU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0Q29tYmluYXRpb25Db2RlKCk6c3RyaW5nXHJcblx0e1xyXG5cdFx0cmV0dXJuIFwiYWRkIFwiICsgdGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldCArIFwiLnh5eixcIiArIHRoaXMuc2NhbGVBbmRSb3RhdGVUYXJnZXQgKyBcIi54eXosXCIgKyB0aGlzLnBvc2l0aW9uVGFyZ2V0ICsgXCIueHl6XFxuXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgaW5pdENvbG9yUmVnaXN0ZXJzKCk6c3RyaW5nXHJcblx0e1xyXG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcclxuXHRcdGlmICh0aGlzLmhhc0NvbG9yTXVsTm9kZSkge1xyXG5cdFx0XHR0aGlzLmNvbG9yTXVsVGFyZ2V0ID0gdGhpcy5nZXRGcmVlVmVydGV4VmVjdG9yVGVtcCgpO1xyXG5cdFx0XHR0aGlzLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5jb2xvck11bFRhcmdldCwgMSk7XHJcblx0XHRcdHRoaXMuY29sb3JNdWxWYXJ5ID0gdGhpcy5nZXRGcmVlVmFyeWluZygpO1xyXG5cdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy5jb2xvck11bFRhcmdldCArIFwiLFwiICsgdGhpcy52ZXJ0ZXhPbmVDb25zdCArIFwiXFxuXCI7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5oYXNDb2xvckFkZE5vZGUpIHtcclxuXHRcdFx0dGhpcy5jb2xvckFkZFRhcmdldCA9IHRoaXMuZ2V0RnJlZVZlcnRleFZlY3RvclRlbXAoKTtcclxuXHRcdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMuY29sb3JBZGRUYXJnZXQsIDEpO1xyXG5cdFx0XHR0aGlzLmNvbG9yQWRkVmFyeSA9IHRoaXMuZ2V0RnJlZVZhcnlpbmcoKTtcclxuXHRcdFx0Y29kZSArPSBcIm1vdiBcIiArIHRoaXMuY29sb3JBZGRUYXJnZXQgKyBcIixcIiArIHRoaXMudmVydGV4WmVyb0NvbnN0ICsgXCJcXG5cIjtcclxuXHRcdH1cclxuXHRcdHJldHVybiBjb2RlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldENvbG9yUGFzc0NvZGUoKTpzdHJpbmdcclxuXHR7XHJcblx0XHR2YXIgY29kZTpzdHJpbmcgPSBcIlwiO1xyXG5cdFx0aWYgKHRoaXMubmVlZEZyYWdtZW50QW5pbWF0aW9uICYmICh0aGlzLmhhc0NvbG9yQWRkTm9kZSB8fCB0aGlzLmhhc0NvbG9yTXVsTm9kZSkpIHtcclxuXHRcdFx0aWYgKHRoaXMuaGFzQ29sb3JNdWxOb2RlKVxyXG5cdFx0XHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLmNvbG9yTXVsVmFyeSArIFwiLFwiICsgdGhpcy5jb2xvck11bFRhcmdldCArIFwiXFxuXCI7XHJcblx0XHRcdGlmICh0aGlzLmhhc0NvbG9yQWRkTm9kZSlcclxuXHRcdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy5jb2xvckFkZFZhcnkgKyBcIixcIiArIHRoaXMuY29sb3JBZGRUYXJnZXQgKyBcIlxcblwiO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNvZGU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0Q29sb3JDb21iaW5hdGlvbkNvZGUoc2hhZGVkVGFyZ2V0OnN0cmluZyk6c3RyaW5nXHJcblx0e1xyXG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcclxuXHRcdGlmICh0aGlzLm5lZWRGcmFnbWVudEFuaW1hdGlvbiAmJiAodGhpcy5oYXNDb2xvckFkZE5vZGUgfHwgdGhpcy5oYXNDb2xvck11bE5vZGUpKSB7XHJcblx0XHRcdHZhciBjb2xvclRhcmdldDpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyhzaGFkZWRUYXJnZXQpO1xyXG5cdFx0XHR0aGlzLmFkZEZyYWdtZW50VGVtcFVzYWdlcyhjb2xvclRhcmdldCwgMSk7XHJcblx0XHRcdGlmICh0aGlzLmhhc0NvbG9yTXVsTm9kZSlcclxuXHRcdFx0XHRjb2RlICs9IFwibXVsIFwiICsgY29sb3JUYXJnZXQgKyBcIixcIiArIGNvbG9yVGFyZ2V0ICsgXCIsXCIgKyB0aGlzLmNvbG9yTXVsVmFyeSArIFwiXFxuXCI7XHJcblx0XHRcdGlmICh0aGlzLmhhc0NvbG9yQWRkTm9kZSlcclxuXHRcdFx0XHRjb2RlICs9IFwiYWRkIFwiICsgY29sb3JUYXJnZXQgKyBcIixcIiArIGNvbG9yVGFyZ2V0ICsgXCIsXCIgKyB0aGlzLmNvbG9yQWRkVmFyeSArIFwiXFxuXCI7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY29kZTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKGNvZGU6c3RyaW5nKTpTaGFkZXJSZWdpc3RlckVsZW1lbnRcclxuXHR7XHJcblx0XHR2YXIgdGVtcDpBcnJheTxzdHJpbmc+ID0gY29kZS5zcGxpdCgvKFxcZCspLyk7XHJcblx0XHRyZXR1cm4gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0ZW1wWzBdLCBwYXJzZUludCh0ZW1wWzFdKSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdmVydGV4Q29uc3RhbnREYXRhOkFycmF5PG51bWJlcj4gPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG5cdHB1YmxpYyBmcmFnbWVudENvbnN0YW50RGF0YTpBcnJheTxudW1iZXI+ID0gbmV3IEFycmF5PG51bWJlcj4oKTtcclxuXHJcblx0cHJpdmF0ZSBfbnVtVmVydGV4Q29uc3RhbnQ6bnVtYmVyIC8qaW50Ki87XHJcblx0cHJpdmF0ZSBfbnVtRnJhZ21lbnRDb25zdGFudDpudW1iZXIgLyppbnQqLztcclxuXHJcblx0cHVibGljIGdldCBudW1WZXJ0ZXhDb25zdGFudCgpOm51bWJlciAvKmludCovXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX251bVZlcnRleENvbnN0YW50O1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBudW1GcmFnbWVudENvbnN0YW50KCk6bnVtYmVyIC8qaW50Ki9cclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fbnVtRnJhZ21lbnRDb25zdGFudDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXREYXRhTGVuZ3RoKClcclxuXHR7XHJcblx0XHR0aGlzLl9udW1WZXJ0ZXhDb25zdGFudCA9IHRoaXMubnVtVXNlZFZlcnRleENvbnN0YW50cyAtIHRoaXMudmVydGV4Q29uc3RhbnRPZmZzZXQ7XHJcblx0XHR0aGlzLl9udW1GcmFnbWVudENvbnN0YW50ID0gdGhpcy5udW1Vc2VkRnJhZ21lbnRDb25zdGFudHMgLSB0aGlzLmZyYWdtZW50Q29uc3RhbnRPZmZzZXQ7XHJcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YS5sZW5ndGggPSB0aGlzLl9udW1WZXJ0ZXhDb25zdGFudCo0O1xyXG5cdFx0dGhpcy5mcmFnbWVudENvbnN0YW50RGF0YS5sZW5ndGggPSB0aGlzLl9udW1GcmFnbWVudENvbnN0YW50KjQ7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0VmVydGV4Q29uc3QoaW5kZXg6bnVtYmVyIC8qaW50Ki8sIHg6bnVtYmVyID0gMCwgeTpudW1iZXIgPSAwLCB6Om51bWJlciA9IDAsIHc6bnVtYmVyID0gMClcclxuXHR7XHJcblx0XHR2YXIgX2luZGV4Om51bWJlciAvKmludCovID0gKGluZGV4IC0gdGhpcy52ZXJ0ZXhDb25zdGFudE9mZnNldCkqNDtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHg7XHJcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSB5O1xyXG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gejtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleF0gPSB3O1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldFZlcnRleENvbnN0RnJvbUFycmF5KGluZGV4Om51bWJlciAvKmludCovLCBkYXRhOkFycmF5PG51bWJlcj4pXHJcblx0e1xyXG5cdFx0dmFyIF9pbmRleDpudW1iZXIgLyppbnQqLyA9IChpbmRleCAtIHRoaXMudmVydGV4Q29uc3RhbnRPZmZzZXQpKjQ7XHJcblx0XHRmb3IgKHZhciBpOm51bWJlciAvKmludCovID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspXHJcblx0XHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IGRhdGFbaV07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0VmVydGV4Q29uc3RGcm9tTWF0cml4KGluZGV4Om51bWJlciAvKmludCovLCBtYXRyaXg6TWF0cml4M0QpXHJcblx0e1xyXG5cdFx0dmFyIHJhd0RhdGE6QXJyYXk8bnVtYmVyPiA9IG1hdHJpeC5yYXdEYXRhO1xyXG5cdFx0dmFyIF9pbmRleDpudW1iZXIgLyppbnQqLyA9IChpbmRleCAtIHRoaXMudmVydGV4Q29uc3RhbnRPZmZzZXQpKjQ7XHJcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzBdO1xyXG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVs0XTtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbOF07XHJcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzEyXTtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMV07XHJcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzVdO1xyXG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVs5XTtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMTNdO1xyXG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVsyXTtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbNl07XHJcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzEwXTtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMTRdO1xyXG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVszXTtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbN107XHJcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzExXTtcclxuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleF0gPSByYXdEYXRhWzE1XTtcclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0RnJhZ21lbnRDb25zdChpbmRleDpudW1iZXIgLyppbnQqLywgeDpudW1iZXIgPSAwLCB5Om51bWJlciA9IDAsIHo6bnVtYmVyID0gMCwgdzpudW1iZXIgPSAwKVxyXG5cdHtcclxuXHRcdHZhciBfaW5kZXg6bnVtYmVyIC8qaW50Ki8gPSAoaW5kZXggLSB0aGlzLmZyYWdtZW50Q29uc3RhbnRPZmZzZXQpKjQ7XHJcblx0XHR0aGlzLmZyYWdtZW50Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHg7XHJcblx0XHR0aGlzLmZyYWdtZW50Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHk7XHJcblx0XHR0aGlzLmZyYWdtZW50Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHo7XHJcblx0XHR0aGlzLmZyYWdtZW50Q29uc3RhbnREYXRhW19pbmRleF0gPSB3O1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0ID0gQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZTsiXX0=