var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ParticleStateBase = require("awayjs-renderergl/lib/animators/states/ParticleStateBase");
/**
 *
 */
var ParticleSegmentedColorState = (function (_super) {
    __extends(ParticleSegmentedColorState, _super);
    function ParticleSegmentedColorState(animator, particleSegmentedColorNode) {
        _super.call(this, animator, particleSegmentedColorNode);
        this._usesMultiplier = particleSegmentedColorNode._iUsesMultiplier;
        this._usesOffset = particleSegmentedColorNode._iUsesOffset;
        this._startColor = particleSegmentedColorNode._iStartColor;
        this._endColor = particleSegmentedColorNode._iEndColor;
        this._segmentPoints = particleSegmentedColorNode._iSegmentPoints;
        this._numSegmentPoint = particleSegmentedColorNode._iNumSegmentPoint;
        this.updateColorData();
    }
    Object.defineProperty(ParticleSegmentedColorState.prototype, "startColor", {
        /**
         * Defines the start color transform of the state, when in global mode.
         */
        get: function () {
            return this._startColor;
        },
        set: function (value) {
            this._startColor = value;
            this.updateColorData();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "endColor", {
        /**
         * Defines the end color transform of the state, when in global mode.
         */
        get: function () {
            return this._endColor;
        },
        set: function (value) {
            this._endColor = value;
            this.updateColorData();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "numSegmentPoint", {
        /**
         * Defines the number of segments.
         */
        get: function () {
            return this._numSegmentPoint;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "segmentPoints", {
        /**
         * Defines the key points of color
         */
        get: function () {
            return this._segmentPoints;
        },
        set: function (value) {
            this._segmentPoints = value;
            this.updateColorData();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "usesMultiplier", {
        get: function () {
            return this._usesMultiplier;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "usesOffset", {
        get: function () {
            return this._usesOffset;
        },
        enumerable: true,
        configurable: true
    });
    ParticleSegmentedColorState.prototype.setRenderState = function (stage, renderable, animationSubGeometry, animationRegisterCache, camera) {
        if (animationRegisterCache.needFragmentAnimation) {
            if (this._numSegmentPoint > 0)
                animationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.TIME_DATA_INDEX), this._timeLifeData[0], this._timeLifeData[1], this._timeLifeData[2], this._timeLifeData[3]);
            if (this._usesMultiplier)
                animationRegisterCache.setVertexConstFromArray(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_MULTIPLIER_INDEX), this._multiplierData);
            if (this._usesOffset)
                animationRegisterCache.setVertexConstFromArray(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_OFFSET_INDEX), this._offsetData);
        }
    };
    ParticleSegmentedColorState.prototype.updateColorData = function () {
        this._timeLifeData = new Array();
        this._multiplierData = new Array();
        this._offsetData = new Array();
        var i /*int*/;
        for (i = 0; i < this._numSegmentPoint; i++) {
            if (i == 0)
                this._timeLifeData.push(this._segmentPoints[i].life);
            else
                this._timeLifeData.push(this._segmentPoints[i].life - this._segmentPoints[i - 1].life);
        }
        if (this._numSegmentPoint == 0)
            this._timeLifeData.push(1);
        else
            this._timeLifeData.push(1 - this._segmentPoints[i - 1].life);
        if (this._usesMultiplier) {
            this._multiplierData.push(this._startColor.redMultiplier, this._startColor.greenMultiplier, this._startColor.blueMultiplier, this._startColor.alphaMultiplier);
            for (i = 0; i < this._numSegmentPoint; i++) {
                if (i == 0)
                    this._multiplierData.push((this._segmentPoints[i].color.redMultiplier - this._startColor.redMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.greenMultiplier - this._startColor.greenMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.blueMultiplier - this._startColor.blueMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.alphaMultiplier - this._startColor.alphaMultiplier) / this._timeLifeData[i]);
                else
                    this._multiplierData.push((this._segmentPoints[i].color.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier) / this._timeLifeData[i]);
            }
            if (this._numSegmentPoint == 0)
                this._multiplierData.push(this._endColor.redMultiplier - this._startColor.redMultiplier, this._endColor.greenMultiplier - this._startColor.greenMultiplier, this._endColor.blueMultiplier - this._startColor.blueMultiplier, this._endColor.alphaMultiplier - this._startColor.alphaMultiplier);
            else
                this._multiplierData.push((this._endColor.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier) / this._timeLifeData[i], (this._endColor.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier) / this._timeLifeData[i], (this._endColor.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier) / this._timeLifeData[i], (this._endColor.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier) / this._timeLifeData[i]);
        }
        if (this._usesOffset) {
            this._offsetData.push(this._startColor.redOffset / 255, this._startColor.greenOffset / 255, this._startColor.blueOffset / 255, this._startColor.alphaOffset / 255);
            for (i = 0; i < this._numSegmentPoint; i++) {
                if (i == 0)
                    this._offsetData.push((this._segmentPoints[i].color.redOffset - this._startColor.redOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.greenOffset - this._startColor.greenOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.blueOffset - this._startColor.blueOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.alphaOffset - this._startColor.alphaOffset) / this._timeLifeData[i] / 255);
                else
                    this._offsetData.push((this._segmentPoints[i].color.redOffset - this._segmentPoints[i - 1].color.redOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.greenOffset - this._segmentPoints[i - 1].color.greenOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.blueOffset - this._segmentPoints[i - 1].color.blueOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset) / this._timeLifeData[i] / 255);
            }
            if (this._numSegmentPoint == 0)
                this._offsetData.push((this._endColor.redOffset - this._startColor.redOffset) / 255, (this._endColor.greenOffset - this._startColor.greenOffset) / 255, (this._endColor.blueOffset - this._startColor.blueOffset) / 255, (this._endColor.alphaOffset - this._startColor.alphaOffset) / 255);
            else
                this._offsetData.push((this._endColor.redOffset - this._segmentPoints[i - 1].color.redOffset) / this._timeLifeData[i] / 255, (this._endColor.greenOffset - this._segmentPoints[i - 1].color.greenOffset) / this._timeLifeData[i] / 255, (this._endColor.blueOffset - this._segmentPoints[i - 1].color.blueOffset) / this._timeLifeData[i] / 255, (this._endColor.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset) / this._timeLifeData[i] / 255);
        }
        //cut off the data
        this._timeLifeData.length = 4;
    };
    /** @private */
    ParticleSegmentedColorState.START_MULTIPLIER_INDEX = 0;
    /** @private */
    ParticleSegmentedColorState.START_OFFSET_INDEX = 1;
    /** @private */
    ParticleSegmentedColorState.TIME_DATA_INDEX = 2;
    return ParticleSegmentedColorState;
})(ParticleStateBase);
module.exports = ParticleSegmentedColorState;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvc3RhdGVzL1BhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS50cyJdLCJuYW1lcyI6WyJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUiLCJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuY29uc3RydWN0b3IiLCJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuc3RhcnRDb2xvciIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS5lbmRDb2xvciIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS5udW1TZWdtZW50UG9pbnQiLCJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuc2VnbWVudFBvaW50cyIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS51c2VzTXVsdGlwbGllciIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS51c2VzT2Zmc2V0IiwiUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlLnNldFJlbmRlclN0YXRlIiwiUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlLnVwZGF0ZUNvbG9yRGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBY0EsSUFBTyxpQkFBaUIsV0FBYywwREFBMEQsQ0FBQyxDQUFDO0FBR2xHLEFBR0E7O0dBREc7SUFDRywyQkFBMkI7SUFBU0EsVUFBcENBLDJCQUEyQkEsVUFBMEJBO0lBbUYxREEsU0FuRktBLDJCQUEyQkEsQ0FtRnBCQSxRQUF5QkEsRUFBRUEsMEJBQXFEQTtRQUUzRkMsa0JBQU1BLFFBQVFBLEVBQUVBLDBCQUEwQkEsQ0FBQ0EsQ0FBQ0E7UUFFNUNBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLDBCQUEwQkEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQTtRQUNuRUEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsMEJBQTBCQSxDQUFDQSxZQUFZQSxDQUFDQTtRQUMzREEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsMEJBQTBCQSxDQUFDQSxZ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QUNBLGFBQWFBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGNBQWNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUN6YkEsSUFBSUE7b0JBQ0hBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGFBQWFBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGFBQWFBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGNBQWNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzFmQSxDQUFDQTtZQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLElBQUlBLENBQUNBLENBQUNBO2dCQUM5QkEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsYUFBYUEsRUFBRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsZUFBZUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsZUFBZUEsRUFBRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsY0FBY0EsRUFBRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsZUFBZUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0E7WUFDalNBLElBQUlBO2dCQUNIQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxhQUFhQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxlQUFlQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxjQUFjQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxlQUFlQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNsY0EsQ0FBQ0E7UUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdEJBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFNBQVNBLEdBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLEdBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFVBQVVBLEdBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLEdBQUNBLEdBQUdBLENBQUNBLENBQUNBO1lBQzNKQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO2dCQUM1Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ1ZBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFNBQVNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFVBQVVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBLENBQUNBO2dCQUNyYUEsSUFBSUE7b0JBQ0hBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFNBQVNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFVBQVVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBLENBQUNBO1lBQ3RlQSxDQUFDQTtZQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLElBQUlBLENBQUNBLENBQUNBO2dCQUM5QkEsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsV0FBV0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsR0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsV0FBV0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDclJBLElBQUlBO2dCQUNIQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxTQUFTQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxTQUFTQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUM5YUEsQ0FBQ0E7UUFDREEsQUFDQUEsa0JBRGtCQTtRQUNsQkEsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDL0JBLENBQUNBO0lBeEpEVCxlQUFlQTtJQUNEQSxrREFBc0JBLEdBQW1CQSxDQUFDQSxDQUFDQTtJQUV6REEsZUFBZUE7SUFDREEsOENBQWtCQSxHQUFtQkEsQ0FBQ0EsQ0FBQ0E7SUFFckRBLGVBQWVBO0lBQ0RBLDJDQUFlQSxHQUFtQkEsQ0FBQ0EsQ0FBQ0E7SUFrSm5EQSxrQ0FBQ0E7QUFBREEsQ0EzSkEsQUEySkNBLEVBM0p5QyxpQkFBaUIsRUEySjFEO0FBRUQsQUFBcUMsaUJBQTVCLDJCQUEyQixDQUFDIiwiZmlsZSI6ImFuaW1hdG9ycy9zdGF0ZXMvUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb2xvclRyYW5zZm9ybVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9Db2xvclRyYW5zZm9ybVwiKTtcbmltcG9ydCBWZWN0b3IzRFx0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vVmVjdG9yM0RcIik7XG5cbmltcG9ydCBDYW1lcmFcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9lbnRpdGllcy9DYW1lcmFcIik7XG5cbmltcG9ydCBTdGFnZVx0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvU3RhZ2VcIik7XG5pbXBvcnQgQ29udGV4dEdMVmVydGV4QnVmZmVyRm9ybWF0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL0NvbnRleHRHTFZlcnRleEJ1ZmZlckZvcm1hdFwiKTtcblxuaW1wb3J0IFBhcnRpY2xlQW5pbWF0b3JcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2FuaW1hdG9ycy9QYXJ0aWNsZUFuaW1hdG9yXCIpO1xuaW1wb3J0IEFuaW1hdGlvblJlZ2lzdGVyQ2FjaGVcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL2RhdGEvQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZVwiKTtcbmltcG9ydCBBbmltYXRpb25TdWJHZW9tZXRyeVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2FuaW1hdG9ycy9kYXRhL0FuaW1hdGlvblN1Ykdlb21ldHJ5XCIpO1xuaW1wb3J0IENvbG9yU2VnbWVudFBvaW50XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL2RhdGEvQ29sb3JTZWdtZW50UG9pbnRcIik7XG5pbXBvcnQgUGFydGljbGVQcm9wZXJ0aWVzTW9kZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvZGF0YS9QYXJ0aWNsZVByb3BlcnRpZXNNb2RlXCIpO1xuaW1wb3J0IFBhcnRpY2xlU2VnbWVudGVkQ29sb3JOb2RlXHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvbm9kZXMvUGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGVcIik7XG5pbXBvcnQgUGFydGljbGVTdGF0ZUJhc2VcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvc3RhdGVzL1BhcnRpY2xlU3RhdGVCYXNlXCIpO1xuaW1wb3J0IFJlbmRlcmFibGVCYXNlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wb29sL1JlbmRlcmFibGVCYXNlXCIpO1xuXG4vKipcbiAqXG4gKi9cbmNsYXNzIFBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZSBleHRlbmRzIFBhcnRpY2xlU3RhdGVCYXNlXG57XG5cdC8qKiBAcHJpdmF0ZSAqL1xuXHRwdWJsaWMgc3RhdGljIFNUQVJUX01VTFRJUExJRVJfSU5ERVg6bnVtYmVyIC8qdWludCovID0gMDtcblxuXHQvKiogQHByaXZhdGUgKi9cblx0cHVibGljIHN0YXRpYyBTVEFSVF9PRkZTRVRfSU5ERVg6bnVtYmVyIC8qdWludCovID0gMTtcblxuXHQvKiogQHByaXZhdGUgKi9cblx0cHVibGljIHN0YXRpYyBUSU1FX0RBVEFfSU5ERVg6bnVtYmVyIC8qdWludCovID0gMjtcblxuXHRwcml2YXRlIF91c2VzTXVsdGlwbGllcjpib29sZWFuO1xuXHRwcml2YXRlIF91c2VzT2Zmc2V0OmJvb2xlYW47XG5cdHByaXZhdGUgX3N0YXJ0Q29sb3I6Q29sb3JUcmFuc2Zvcm07XG5cdHByaXZhdGUgX2VuZENvbG9yOkNvbG9yVHJhbnNmb3JtO1xuXHRwcml2YXRlIF9zZWdtZW50UG9pbnRzOkFycmF5PENvbG9yU2VnbWVudFBvaW50Pjtcblx0cHJpdmF0ZSBfbnVtU2VnbWVudFBvaW50Om51bWJlciAvKmludCovO1xuXG5cdHByaXZhdGUgX3RpbWVMaWZlRGF0YTpBcnJheTxudW1iZXI+O1xuXHRwcml2YXRlIF9tdWx0aXBsaWVyRGF0YTpBcnJheTxudW1iZXI+O1xuXHRwcml2YXRlIF9vZmZzZXREYXRhOkFycmF5PG51bWJlcj47XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIHN0YXJ0IGNvbG9yIHRyYW5zZm9ybSBvZiB0aGUgc3RhdGUsIHdoZW4gaW4gZ2xvYmFsIG1vZGUuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IHN0YXJ0Q29sb3IoKTpDb2xvclRyYW5zZm9ybVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3N0YXJ0Q29sb3I7XG5cdH1cblxuXHRwdWJsaWMgc2V0IHN0YXJ0Q29sb3IodmFsdWU6Q29sb3JUcmFuc2Zvcm0pXG5cdHtcblx0XHR0aGlzLl9zdGFydENvbG9yID0gdmFsdWU7XG5cblx0XHR0aGlzLnVwZGF0ZUNvbG9yRGF0YSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIGVuZCBjb2xvciB0cmFuc2Zvcm0gb2YgdGhlIHN0YXRlLCB3aGVuIGluIGdsb2JhbCBtb2RlLlxuXHQgKi9cblx0cHVibGljIGdldCBlbmRDb2xvcigpOkNvbG9yVHJhbnNmb3JtXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZW5kQ29sb3I7XG5cdH1cblxuXHRwdWJsaWMgc2V0IGVuZENvbG9yKHZhbHVlOkNvbG9yVHJhbnNmb3JtKVxuXHR7XG5cdFx0dGhpcy5fZW5kQ29sb3IgPSB2YWx1ZTtcblx0XHR0aGlzLnVwZGF0ZUNvbG9yRGF0YSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIG51bWJlciBvZiBzZWdtZW50cy5cblx0ICovXG5cdHB1YmxpYyBnZXQgbnVtU2VnbWVudFBvaW50KCk6bnVtYmVyIC8qaW50Ki9cblx0e1xuXHRcdHJldHVybiB0aGlzLl9udW1TZWdtZW50UG9pbnQ7XG5cdH1cblxuXHQvKipcblx0ICogRGVmaW5lcyB0aGUga2V5IHBvaW50cyBvZiBjb2xvclxuXHQgKi9cblx0cHVibGljIGdldCBzZWdtZW50UG9pbnRzKCk6QXJyYXk8Q29sb3JTZWdtZW50UG9pbnQ+XG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fc2VnbWVudFBvaW50cztcblx0fVxuXG5cdHB1YmxpYyBzZXQgc2VnbWVudFBvaW50cyh2YWx1ZTpBcnJheTxDb2xvclNlZ21lbnRQb2ludD4pXG5cdHtcblx0XHR0aGlzLl9zZWdtZW50UG9pbnRzID0gdmFsdWU7XG5cdFx0dGhpcy51cGRhdGVDb2xvckRhdGEoKTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgdXNlc011bHRpcGxpZXIoKTpib29sZWFuXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fdXNlc011bHRpcGxpZXI7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IHVzZXNPZmZzZXQoKTpib29sZWFuXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fdXNlc09mZnNldDtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKGFuaW1hdG9yOlBhcnRpY2xlQW5pbWF0b3IsIHBhcnRpY2xlU2VnbWVudGVkQ29sb3JOb2RlOlBhcnRpY2xlU2VnbWVudGVkQ29sb3JOb2RlKVxuXHR7XG5cdFx0c3VwZXIoYW5pbWF0b3IsIHBhcnRpY2xlU2VnbWVudGVkQ29sb3JOb2RlKTtcblxuXHRcdHRoaXMuX3VzZXNNdWx0aXBsaWVyID0gcGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGUuX2lVc2VzTXVsdGlwbGllcjtcblx0XHR0aGlzLl91c2VzT2Zmc2V0ID0gcGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGUuX2lVc2VzT2Zmc2V0O1xuXHRcdHRoaXMuX3N0YXJ0Q29sb3IgPSBwYXJ0aWNsZVNlZ21lbnRlZENvbG9yTm9kZS5faVN0YXJ0Q29sb3I7XG5cdFx0dGhpcy5fZW5kQ29sb3IgPSBwYXJ0aWNsZVNlZ21lbnRlZENvbG9yTm9kZS5faUVuZENvbG9yO1xuXHRcdHRoaXMuX3NlZ21lbnRQb2ludHMgPSBwYXJ0aWNsZVNlZ21lbnRlZENvbG9yTm9kZS5faVNlZ21lbnRQb2ludHM7XG5cdFx0dGhpcy5fbnVtU2VnbWVudFBvaW50ID0gcGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGUuX2lOdW1TZWdtZW50UG9pbnQ7XG5cdFx0dGhpcy51cGRhdGVDb2xvckRhdGEoKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRSZW5kZXJTdGF0ZShzdGFnZTpTdGFnZSwgcmVuZGVyYWJsZTpSZW5kZXJhYmxlQmFzZSwgYW5pbWF0aW9uU3ViR2VvbWV0cnk6QW5pbWF0aW9uU3ViR2VvbWV0cnksIGFuaW1hdGlvblJlZ2lzdGVyQ2FjaGU6QW5pbWF0aW9uUmVnaXN0ZXJDYWNoZSwgY2FtZXJhOkNhbWVyYSlcblx0e1xuXHRcdGlmIChhbmltYXRpb25SZWdpc3RlckNhY2hlLm5lZWRGcmFnbWVudEFuaW1hdGlvbikge1xuXHRcdFx0aWYgKHRoaXMuX251bVNlZ21lbnRQb2ludCA+IDApXG5cdFx0XHRcdGFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VmVydGV4Q29uc3QoYW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRSZWdpc3RlckluZGV4KHRoaXMuX3BBbmltYXRpb25Ob2RlLCBQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuVElNRV9EQVRBX0lOREVYKSwgdGhpcy5fdGltZUxpZmVEYXRhWzBdLCB0aGlzLl90aW1lTGlmZURhdGFbMV0sIHRoaXMuX3RpbWVMaWZlRGF0YVsyXSwgdGhpcy5fdGltZUxpZmVEYXRhWzNdKTtcblx0XHRcdGlmICh0aGlzLl91c2VzTXVsdGlwbGllcilcblx0XHRcdFx0YW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRWZXJ0ZXhDb25zdEZyb21BcnJheShhbmltYXRpb25SZWdpc3RlckNhY2hlLmdldFJlZ2lzdGVySW5kZXgodGhpcy5fcEFuaW1hdGlvbk5vZGUsIFBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS5TVEFSVF9NVUxUSVBMSUVSX0lOREVYKSwgdGhpcy5fbXVsdGlwbGllckRhdGEpO1xuXHRcdFx0aWYgKHRoaXMuX3VzZXNPZmZzZXQpXG5cdFx0XHRcdGFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VmVydGV4Q29uc3RGcm9tQXJyYXkoYW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRSZWdpc3RlckluZGV4KHRoaXMuX3BBbmltYXRpb25Ob2RlLCBQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuU1RBUlRfT0ZGU0VUX0lOREVYKSwgdGhpcy5fb2Zmc2V0RGF0YSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVDb2xvckRhdGEoKVxuXHR7XG5cdFx0dGhpcy5fdGltZUxpZmVEYXRhID0gbmV3IEFycmF5PG51bWJlcj4oKTtcblx0XHR0aGlzLl9tdWx0aXBsaWVyRGF0YSA9IG5ldyBBcnJheTxudW1iZXI+KCk7XG5cdFx0dGhpcy5fb2Zmc2V0RGF0YSA9IG5ldyBBcnJheTxudW1iZXI+KCk7XG5cdFx0dmFyIGk6bnVtYmVyIC8qaW50Ki87XG5cdFx0Zm9yIChpID0gMDsgaSA8IHRoaXMuX251bVNlZ21lbnRQb2ludDsgaSsrKSB7XG5cdFx0XHRpZiAoaSA9PSAwKVxuXHRcdFx0XHR0aGlzLl90aW1lTGlmZURhdGEucHVzaCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmxpZmUpO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHR0aGlzLl90aW1lTGlmZURhdGEucHVzaCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmxpZmUgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5saWZlKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuX251bVNlZ21lbnRQb2ludCA9PSAwKVxuXHRcdFx0dGhpcy5fdGltZUxpZmVEYXRhLnB1c2goMSk7XG5cdFx0ZWxzZVxuXHRcdFx0dGhpcy5fdGltZUxpZmVEYXRhLnB1c2goMSAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmxpZmUpO1xuXG5cdFx0aWYgKHRoaXMuX3VzZXNNdWx0aXBsaWVyKSB7XG5cdFx0XHR0aGlzLl9tdWx0aXBsaWVyRGF0YS5wdXNoKHRoaXMuX3N0YXJ0Q29sb3IucmVkTXVsdGlwbGllciwgdGhpcy5fc3RhcnRDb2xvci5ncmVlbk11bHRpcGxpZXIsIHRoaXMuX3N0YXJ0Q29sb3IuYmx1ZU11bHRpcGxpZXIsIHRoaXMuX3N0YXJ0Q29sb3IuYWxwaGFNdWx0aXBsaWVyKTtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLl9udW1TZWdtZW50UG9pbnQ7IGkrKykge1xuXHRcdFx0XHRpZiAoaSA9PSAwKVxuXHRcdFx0XHRcdHRoaXMuX211bHRpcGxpZXJEYXRhLnB1c2goKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IucmVkTXVsdGlwbGllciAtIHRoaXMuX3N0YXJ0Q29sb3IucmVkTXVsdGlwbGllcikvdGhpcy5fdGltZUxpZmVEYXRhW2ldLCAodGhpcy5fc2VnbWVudFBvaW50c1tpXS5jb2xvci5ncmVlbk11bHRpcGxpZXIgLSB0aGlzLl9zdGFydENvbG9yLmdyZWVuTXVsdGlwbGllcikvdGhpcy5fdGltZUxpZmVEYXRhW2ldLCAodGhpcy5fc2VnbWVudFBvaW50c1tpXS5jb2xvci5ibHVlTXVsdGlwbGllciAtIHRoaXMuX3N0YXJ0Q29sb3IuYmx1ZU11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuYWxwaGFNdWx0aXBsaWVyIC0gdGhpcy5fc3RhcnRDb2xvci5hbHBoYU11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSk7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR0aGlzLl9tdWx0aXBsaWVyRGF0YS5wdXNoKCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLnJlZE11bHRpcGxpZXIgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5yZWRNdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0sICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmdyZWVuTXVsdGlwbGllciAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmdyZWVuTXVsdGlwbGllcikvdGhpcy5fdGltZUxpZmVEYXRhW2ldLCAodGhpcy5fc2VnbWVudFBvaW50c1tpXS5jb2xvci5ibHVlTXVsdGlwbGllciAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmJsdWVNdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0sICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmFscGhhTXVsdGlwbGllciAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmFscGhhTXVsdGlwbGllcikvdGhpcy5fdGltZUxpZmVEYXRhW2ldKTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLl9udW1TZWdtZW50UG9pbnQgPT0gMClcblx0XHRcdFx0dGhpcy5fbXVsdGlwbGllckRhdGEucHVzaCh0aGlzLl9lbmRDb2xvci5yZWRNdWx0aXBsaWVyIC0gdGhpcy5fc3RhcnRDb2xvci5yZWRNdWx0aXBsaWVyLCB0aGlzLl9lbmRDb2xvci5ncmVlbk11bHRpcGxpZXIgLSB0aGlzLl9zdGFydENvbG9yLmdyZWVuTXVsdGlwbGllciwgdGhpcy5fZW5kQ29sb3IuYmx1ZU11bHRpcGxpZXIgLSB0aGlzLl9zdGFydENvbG9yLmJsdWVNdWx0aXBsaWVyLCB0aGlzLl9lbmRDb2xvci5hbHBoYU11bHRpcGxpZXIgLSB0aGlzLl9zdGFydENvbG9yLmFscGhhTXVsdGlwbGllcik7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHRoaXMuX211bHRpcGxpZXJEYXRhLnB1c2goKHRoaXMuX2VuZENvbG9yLnJlZE11bHRpcGxpZXIgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5yZWRNdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0sICh0aGlzLl9lbmRDb2xvci5ncmVlbk11bHRpcGxpZXIgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5ncmVlbk11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX2VuZENvbG9yLmJsdWVNdWx0aXBsaWVyIC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IuYmx1ZU11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX2VuZENvbG9yLmFscGhhTXVsdGlwbGllciAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmFscGhhTXVsdGlwbGllcikvdGhpcy5fdGltZUxpZmVEYXRhW2ldKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fdXNlc09mZnNldCkge1xuXHRcdFx0dGhpcy5fb2Zmc2V0RGF0YS5wdXNoKHRoaXMuX3N0YXJ0Q29sb3IucmVkT2Zmc2V0LzI1NSwgdGhpcy5fc3RhcnRDb2xvci5ncmVlbk9mZnNldC8yNTUsIHRoaXMuX3N0YXJ0Q29sb3IuYmx1ZU9mZnNldC8yNTUsIHRoaXMuX3N0YXJ0Q29sb3IuYWxwaGFPZmZzZXQvMjU1KTtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLl9udW1TZWdtZW50UG9pbnQ7IGkrKykge1xuXHRcdFx0XHRpZiAoaSA9PSAwKVxuXHRcdFx0XHRcdHRoaXMuX29mZnNldERhdGEucHVzaCgodGhpcy5fc2VnbWVudFBvaW50c1tpXS5jb2xvci5yZWRPZmZzZXQgLSB0aGlzLl9zdGFydENvbG9yLnJlZE9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuZ3JlZW5PZmZzZXQgLSB0aGlzLl9zdGFydENvbG9yLmdyZWVuT2Zmc2V0KS90aGlzLl90aW1lTGlmZURhdGFbaV0vMjU1LCAodGhpcy5fc2VnbWVudFBvaW50c1tpXS5jb2xvci5ibHVlT2Zmc2V0IC0gdGhpcy5fc3RhcnRDb2xvci5ibHVlT2Zmc2V0KS90aGlzLl90aW1lTGlmZURhdGFbaV0vMjU1LCAodGhpcy5fc2VnbWVudFBvaW50c1tpXS5jb2xvci5hbHBoYU9mZnNldCAtIHRoaXMuX3N0YXJ0Q29sb3IuYWxwaGFPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUpO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0dGhpcy5fb2Zmc2V0RGF0YS5wdXNoKCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLnJlZE9mZnNldCAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLnJlZE9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuZ3JlZW5PZmZzZXQgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5ncmVlbk9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuYmx1ZU9mZnNldCAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmJsdWVPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUsICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmFscGhhT2Zmc2V0IC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IuYWxwaGFPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMuX251bVNlZ21lbnRQb2ludCA9PSAwKVxuXHRcdFx0XHR0aGlzLl9vZmZzZXREYXRhLnB1c2goKHRoaXMuX2VuZENvbG9yLnJlZE9mZnNldCAtIHRoaXMuX3N0YXJ0Q29sb3IucmVkT2Zmc2V0KS8yNTUsICh0aGlzLl9lbmRDb2xvci5ncmVlbk9mZnNldCAtIHRoaXMuX3N0YXJ0Q29sb3IuZ3JlZW5PZmZzZXQpLzI1NSwgKHRoaXMuX2VuZENvbG9yLmJsdWVPZmZzZXQgLSB0aGlzLl9zdGFydENvbG9yLmJsdWVPZmZzZXQpLzI1NSwgKHRoaXMuX2VuZENvbG9yLmFscGhhT2Zmc2V0IC0gdGhpcy5fc3RhcnRDb2xvci5hbHBoYU9mZnNldCkvMjU1KTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0dGhpcy5fb2Zmc2V0RGF0YS5wdXNoKCh0aGlzLl9lbmRDb2xvci5yZWRPZmZzZXQgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5yZWRPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUsICh0aGlzLl9lbmRDb2xvci5ncmVlbk9mZnNldCAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmdyZWVuT2Zmc2V0KS90aGlzLl90aW1lTGlmZURhdGFbaV0vMjU1LCAodGhpcy5fZW5kQ29sb3IuYmx1ZU9mZnNldCAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmJsdWVPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUsICh0aGlzLl9lbmRDb2xvci5hbHBoYU9mZnNldCAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmFscGhhT2Zmc2V0KS90aGlzLl90aW1lTGlmZURhdGFbaV0vMjU1KTtcblx0XHR9XG5cdFx0Ly9jdXQgb2ZmIHRoZSBkYXRhXG5cdFx0dGhpcy5fdGltZUxpZmVEYXRhLmxlbmd0aCA9IDQ7XG5cdH1cbn1cblxuZXhwb3J0ID0gUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlOyJdfQ==