var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ParticleStateBase = require("awayjs-renderergl/lib/animators/states/ParticleStateBase");
/**
 *
 */
var ParticleSegmentedColorState = (function (_super) {
    __extends(ParticleSegmentedColorState, _super);
    function ParticleSegmentedColorState(animator, particleSegmentedColorNode) {
        _super.call(this, animator, particleSegmentedColorNode);
        this._usesMultiplier = particleSegmentedColorNode._iUsesMultiplier;
        this._usesOffset = particleSegmentedColorNode._iUsesOffset;
        this._startColor = particleSegmentedColorNode._iStartColor;
        this._endColor = particleSegmentedColorNode._iEndColor;
        this._segmentPoints = particleSegmentedColorNode._iSegmentPoints;
        this._numSegmentPoint = particleSegmentedColorNode._iNumSegmentPoint;
        this.updateColorData();
    }
    Object.defineProperty(ParticleSegmentedColorState.prototype, "startColor", {
        /**
         * Defines the start color transform of the state, when in global mode.
         */
        get: function () {
            return this._startColor;
        },
        set: function (value) {
            this._startColor = value;
            this.updateColorData();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "endColor", {
        /**
         * Defines the end color transform of the state, when in global mode.
         */
        get: function () {
            return this._endColor;
        },
        set: function (value) {
            this._endColor = value;
            this.updateColorData();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "numSegmentPoint", {
        /**
         * Defines the number of segments.
         */
        get: function () {
            return this._numSegmentPoint;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "segmentPoints", {
        /**
         * Defines the key points of color
         */
        get: function () {
            return this._segmentPoints;
        },
        set: function (value) {
            this._segmentPoints = value;
            this.updateColorData();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "usesMultiplier", {
        get: function () {
            return this._usesMultiplier;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ParticleSegmentedColorState.prototype, "usesOffset", {
        get: function () {
            return this._usesOffset;
        },
        enumerable: true,
        configurable: true
    });
    ParticleSegmentedColorState.prototype.setRenderState = function (stage, renderable, animationSubGeometry, animationRegisterCache, camera) {
        if (animationRegisterCache.needFragmentAnimation) {
            if (this._numSegmentPoint > 0)
                animationRegisterCache.setVertexConst(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.TIME_DATA_INDEX), this._timeLifeData[0], this._timeLifeData[1], this._timeLifeData[2], this._timeLifeData[3]);
            if (this._usesMultiplier)
                animationRegisterCache.setVertexConstFromArray(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_MULTIPLIER_INDEX), this._multiplierData);
            if (this._usesOffset)
                animationRegisterCache.setVertexConstFromArray(animationRegisterCache.getRegisterIndex(this._pAnimationNode, ParticleSegmentedColorState.START_OFFSET_INDEX), this._offsetData);
        }
    };
    ParticleSegmentedColorState.prototype.updateColorData = function () {
        this._timeLifeData = new Array();
        this._multiplierData = new Array();
        this._offsetData = new Array();
        var i /*int*/;
        for (i = 0; i < this._numSegmentPoint; i++) {
            if (i == 0)
                this._timeLifeData.push(this._segmentPoints[i].life);
            else
                this._timeLifeData.push(this._segmentPoints[i].life - this._segmentPoints[i - 1].life);
        }
        if (this._numSegmentPoint == 0)
            this._timeLifeData.push(1);
        else
            this._timeLifeData.push(1 - this._segmentPoints[i - 1].life);
        if (this._usesMultiplier) {
            this._multiplierData.push(this._startColor.redMultiplier, this._startColor.greenMultiplier, this._startColor.blueMultiplier, this._startColor.alphaMultiplier);
            for (i = 0; i < this._numSegmentPoint; i++) {
                if (i == 0)
                    this._multiplierData.push((this._segmentPoints[i].color.redMultiplier - this._startColor.redMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.greenMultiplier - this._startColor.greenMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.blueMultiplier - this._startColor.blueMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.alphaMultiplier - this._startColor.alphaMultiplier) / this._timeLifeData[i]);
                else
                    this._multiplierData.push((this._segmentPoints[i].color.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier) / this._timeLifeData[i], (this._segmentPoints[i].color.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier) / this._timeLifeData[i]);
            }
            if (this._numSegmentPoint == 0)
                this._multiplierData.push(this._endColor.redMultiplier - this._startColor.redMultiplier, this._endColor.greenMultiplier - this._startColor.greenMultiplier, this._endColor.blueMultiplier - this._startColor.blueMultiplier, this._endColor.alphaMultiplier - this._startColor.alphaMultiplier);
            else
                this._multiplierData.push((this._endColor.redMultiplier - this._segmentPoints[i - 1].color.redMultiplier) / this._timeLifeData[i], (this._endColor.greenMultiplier - this._segmentPoints[i - 1].color.greenMultiplier) / this._timeLifeData[i], (this._endColor.blueMultiplier - this._segmentPoints[i - 1].color.blueMultiplier) / this._timeLifeData[i], (this._endColor.alphaMultiplier - this._segmentPoints[i - 1].color.alphaMultiplier) / this._timeLifeData[i]);
        }
        if (this._usesOffset) {
            this._offsetData.push(this._startColor.redOffset / 255, this._startColor.greenOffset / 255, this._startColor.blueOffset / 255, this._startColor.alphaOffset / 255);
            for (i = 0; i < this._numSegmentPoint; i++) {
                if (i == 0)
                    this._offsetData.push((this._segmentPoints[i].color.redOffset - this._startColor.redOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.greenOffset - this._startColor.greenOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.blueOffset - this._startColor.blueOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.alphaOffset - this._startColor.alphaOffset) / this._timeLifeData[i] / 255);
                else
                    this._offsetData.push((this._segmentPoints[i].color.redOffset - this._segmentPoints[i - 1].color.redOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.greenOffset - this._segmentPoints[i - 1].color.greenOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.blueOffset - this._segmentPoints[i - 1].color.blueOffset) / this._timeLifeData[i] / 255, (this._segmentPoints[i].color.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset) / this._timeLifeData[i] / 255);
            }
            if (this._numSegmentPoint == 0)
                this._offsetData.push((this._endColor.redOffset - this._startColor.redOffset) / 255, (this._endColor.greenOffset - this._startColor.greenOffset) / 255, (this._endColor.blueOffset - this._startColor.blueOffset) / 255, (this._endColor.alphaOffset - this._startColor.alphaOffset) / 255);
            else
                this._offsetData.push((this._endColor.redOffset - this._segmentPoints[i - 1].color.redOffset) / this._timeLifeData[i] / 255, (this._endColor.greenOffset - this._segmentPoints[i - 1].color.greenOffset) / this._timeLifeData[i] / 255, (this._endColor.blueOffset - this._segmentPoints[i - 1].color.blueOffset) / this._timeLifeData[i] / 255, (this._endColor.alphaOffset - this._segmentPoints[i - 1].color.alphaOffset) / this._timeLifeData[i] / 255);
        }
        //cut off the data
        this._timeLifeData.length = 4;
    };
    /** @private */
    ParticleSegmentedColorState.START_MULTIPLIER_INDEX = 0;
    /** @private */
    ParticleSegmentedColorState.START_OFFSET_INDEX = 1;
    /** @private */
    ParticleSegmentedColorState.TIME_DATA_INDEX = 2;
    return ParticleSegmentedColorState;
})(ParticleStateBase);
module.exports = ParticleSegmentedColorState;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvc3RhdGVzL1BhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS50cyJdLCJuYW1lcyI6WyJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUiLCJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuY29uc3RydWN0b3IiLCJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuc3RhcnRDb2xvciIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS5lbmRDb2xvciIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS5udW1TZWdtZW50UG9pbnQiLCJQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuc2VnbWVudFBvaW50cyIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS51c2VzTXVsdGlwbGllciIsIlBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS51c2VzT2Zmc2V0IiwiUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlLnNldFJlbmRlclN0YXRlIiwiUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlLnVwZGF0ZUNvbG9yRGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBY0EsSUFBTyxpQkFBaUIsV0FBYywwREFBMEQsQ0FBQyxDQUFDO0FBR2xHLEFBR0E7O0dBREc7SUFDRywyQkFBMkI7SUFBU0EsVUFBcENBLDJCQUEyQkEsVUFBMEJBO0lBbUYxREEsU0FuRktBLDJCQUEyQkEsQ0FtRnBCQSxRQUF5QkEsRUFBRUEsMEJBQXFEQTtRQUUzRkMsa0JBQU1BLFFBQVFBLEVBQUVBLDBCQUEwQkEsQ0FBQ0EsQ0FBQ0E7UUFFNUNBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLDBCQUEwQkEsQ0FBQ0EsZ0JBQWdCQSxDQUFDQTtRQUNuRUEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsMEJBQTBCQSxDQUFDQSxZQUFZQSxDQUFDQTtRQUMzREEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsMEJBQTBCQSxDQUFDQSxZ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QUNBLGFBQWFBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGNBQWNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUN6YkEsSUFBSUE7b0JBQ0hBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGFBQWFBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGFBQWFBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGNBQWNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzFmQSxDQUFDQTtZQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLElBQUlBLENBQUNBLENBQUNBO2dCQUM5QkEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsYUFBYUEsRUFBRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsZUFBZUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsZUFBZUEsRUFBRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsY0FBY0EsRUFBRUEsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsZUFBZUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0E7WUFDalNBLElBQUlBO2dCQUNIQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxhQUFhQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxlQUFlQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxjQUFjQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxlQUFlQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNsY0EsQ0FBQ0E7UUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdEJBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFNBQVNBLEdBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLEdBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFVBQVVBLEdBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLEdBQUNBLEdBQUdBLENBQUNBLENBQUNBO1lBQzNKQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO2dCQUM1Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ1ZBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFNBQVNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFVBQVVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBLENBQUNBO2dCQUNyYUEsSUFBSUE7b0JBQ0hBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFNBQVNBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFVBQVVBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFVBQVVBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLENBQUNBLEdBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBLENBQUNBO1lBQ3RlQSxDQUFDQTtZQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLElBQUlBLENBQUNBLENBQUNBO2dCQUM5QkEsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsV0FBV0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsR0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsV0FBV0EsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsR0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDclJBLElBQUlBO2dCQUNIQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxTQUFTQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxTQUFTQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUM5YUEsQ0FBQ0E7UUFDREEsQUFDQUEsa0JBRGtCQTtRQUNsQkEsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDL0JBLENBQUNBO0lBeEpEVCxlQUFlQTtJQUNEQSxrREFBc0JBLEdBQW1CQSxDQUFDQSxDQUFDQTtJQUV6REEsZUFBZUE7SUFDREEsOENBQWtCQSxHQUFtQkEsQ0FBQ0EsQ0FBQ0E7SUFFckRBLGVBQWVBO0lBQ0RBLDJDQUFlQSxHQUFtQkEsQ0FBQ0EsQ0FBQ0E7SUFrSm5EQSxrQ0FBQ0E7QUFBREEsQ0EzSkEsQUEySkNBLEVBM0p5QyxpQkFBaUIsRUEySjFEO0FBRUQsQUFBcUMsaUJBQTVCLDJCQUEyQixDQUFDIiwiZmlsZSI6ImFuaW1hdG9ycy9zdGF0ZXMvUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb2xvclRyYW5zZm9ybVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9Db2xvclRyYW5zZm9ybVwiKTtcclxuaW1wb3J0IFZlY3RvcjNEXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9WZWN0b3IzRFwiKTtcclxuXHJcbmltcG9ydCBDYW1lcmFcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9lbnRpdGllcy9DYW1lcmFcIik7XHJcblxyXG5pbXBvcnQgU3RhZ2VcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL1N0YWdlXCIpO1xyXG5pbXBvcnQgQ29udGV4dEdMVmVydGV4QnVmZmVyRm9ybWF0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL0NvbnRleHRHTFZlcnRleEJ1ZmZlckZvcm1hdFwiKTtcclxuXHJcbmltcG9ydCBQYXJ0aWNsZUFuaW1hdG9yXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvUGFydGljbGVBbmltYXRvclwiKTtcclxuaW1wb3J0IEFuaW1hdGlvblJlZ2lzdGVyQ2FjaGVcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL2RhdGEvQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZVwiKTtcclxuaW1wb3J0IEFuaW1hdGlvblN1Ykdlb21ldHJ5XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL2RhdGEvQW5pbWF0aW9uU3ViR2VvbWV0cnlcIik7XHJcbmltcG9ydCBDb2xvclNlZ21lbnRQb2ludFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2FuaW1hdG9ycy9kYXRhL0NvbG9yU2VnbWVudFBvaW50XCIpO1xyXG5pbXBvcnQgUGFydGljbGVQcm9wZXJ0aWVzTW9kZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvZGF0YS9QYXJ0aWNsZVByb3BlcnRpZXNNb2RlXCIpO1xyXG5pbXBvcnQgUGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGVcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2FuaW1hdG9ycy9ub2Rlcy9QYXJ0aWNsZVNlZ21lbnRlZENvbG9yTm9kZVwiKTtcclxuaW1wb3J0IFBhcnRpY2xlU3RhdGVCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL3N0YXRlcy9QYXJ0aWNsZVN0YXRlQmFzZVwiKTtcclxuaW1wb3J0IFJlbmRlcmFibGVCYXNlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wb29sL1JlbmRlcmFibGVCYXNlXCIpO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUgZXh0ZW5kcyBQYXJ0aWNsZVN0YXRlQmFzZVxyXG57XHJcblx0LyoqIEBwcml2YXRlICovXHJcblx0cHVibGljIHN0YXRpYyBTVEFSVF9NVUxUSVBMSUVSX0lOREVYOm51bWJlciAvKnVpbnQqLyA9IDA7XHJcblxyXG5cdC8qKiBAcHJpdmF0ZSAqL1xyXG5cdHB1YmxpYyBzdGF0aWMgU1RBUlRfT0ZGU0VUX0lOREVYOm51bWJlciAvKnVpbnQqLyA9IDE7XHJcblxyXG5cdC8qKiBAcHJpdmF0ZSAqL1xyXG5cdHB1YmxpYyBzdGF0aWMgVElNRV9EQVRBX0lOREVYOm51bWJlciAvKnVpbnQqLyA9IDI7XHJcblxyXG5cdHByaXZhdGUgX3VzZXNNdWx0aXBsaWVyOmJvb2xlYW47XHJcblx0cHJpdmF0ZSBfdXNlc09mZnNldDpib29sZWFuO1xyXG5cdHByaXZhdGUgX3N0YXJ0Q29sb3I6Q29sb3JUcmFuc2Zvcm07XHJcblx0cHJpdmF0ZSBfZW5kQ29sb3I6Q29sb3JUcmFuc2Zvcm07XHJcblx0cHJpdmF0ZSBfc2VnbWVudFBvaW50czpBcnJheTxDb2xvclNlZ21lbnRQb2ludD47XHJcblx0cHJpdmF0ZSBfbnVtU2VnbWVudFBvaW50Om51bWJlciAvKmludCovO1xyXG5cclxuXHRwcml2YXRlIF90aW1lTGlmZURhdGE6QXJyYXk8bnVtYmVyPjtcclxuXHRwcml2YXRlIF9tdWx0aXBsaWVyRGF0YTpBcnJheTxudW1iZXI+O1xyXG5cdHByaXZhdGUgX29mZnNldERhdGE6QXJyYXk8bnVtYmVyPjtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmaW5lcyB0aGUgc3RhcnQgY29sb3IgdHJhbnNmb3JtIG9mIHRoZSBzdGF0ZSwgd2hlbiBpbiBnbG9iYWwgbW9kZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHN0YXJ0Q29sb3IoKTpDb2xvclRyYW5zZm9ybVxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9zdGFydENvbG9yO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBzdGFydENvbG9yKHZhbHVlOkNvbG9yVHJhbnNmb3JtKVxyXG5cdHtcclxuXHRcdHRoaXMuX3N0YXJ0Q29sb3IgPSB2YWx1ZTtcclxuXHJcblx0XHR0aGlzLnVwZGF0ZUNvbG9yRGF0YSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVmaW5lcyB0aGUgZW5kIGNvbG9yIHRyYW5zZm9ybSBvZiB0aGUgc3RhdGUsIHdoZW4gaW4gZ2xvYmFsIG1vZGUuXHJcblx0ICovXHJcblx0cHVibGljIGdldCBlbmRDb2xvcigpOkNvbG9yVHJhbnNmb3JtXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX2VuZENvbG9yO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBlbmRDb2xvcih2YWx1ZTpDb2xvclRyYW5zZm9ybSlcclxuXHR7XHJcblx0XHR0aGlzLl9lbmRDb2xvciA9IHZhbHVlO1xyXG5cdFx0dGhpcy51cGRhdGVDb2xvckRhdGEoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmluZXMgdGhlIG51bWJlciBvZiBzZWdtZW50cy5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IG51bVNlZ21lbnRQb2ludCgpOm51bWJlciAvKmludCovXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX251bVNlZ21lbnRQb2ludDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmluZXMgdGhlIGtleSBwb2ludHMgb2YgY29sb3JcclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IHNlZ21lbnRQb2ludHMoKTpBcnJheTxDb2xvclNlZ21lbnRQb2ludD5cclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2VnbWVudFBvaW50cztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgc2VnbWVudFBvaW50cyh2YWx1ZTpBcnJheTxDb2xvclNlZ21lbnRQb2ludD4pXHJcblx0e1xyXG5cdFx0dGhpcy5fc2VnbWVudFBvaW50cyA9IHZhbHVlO1xyXG5cdFx0dGhpcy51cGRhdGVDb2xvckRhdGEoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgdXNlc011bHRpcGxpZXIoKTpib29sZWFuXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX3VzZXNNdWx0aXBsaWVyO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCB1c2VzT2Zmc2V0KCk6Ym9vbGVhblxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl91c2VzT2Zmc2V0O1xyXG5cdH1cclxuXHJcblx0Y29uc3RydWN0b3IoYW5pbWF0b3I6UGFydGljbGVBbmltYXRvciwgcGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGU6UGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGUpXHJcblx0e1xyXG5cdFx0c3VwZXIoYW5pbWF0b3IsIHBhcnRpY2xlU2VnbWVudGVkQ29sb3JOb2RlKTtcclxuXHJcblx0XHR0aGlzLl91c2VzTXVsdGlwbGllciA9IHBhcnRpY2xlU2VnbWVudGVkQ29sb3JOb2RlLl9pVXNlc011bHRpcGxpZXI7XHJcblx0XHR0aGlzLl91c2VzT2Zmc2V0ID0gcGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGUuX2lVc2VzT2Zmc2V0O1xyXG5cdFx0dGhpcy5fc3RhcnRDb2xvciA9IHBhcnRpY2xlU2VnbWVudGVkQ29sb3JOb2RlLl9pU3RhcnRDb2xvcjtcclxuXHRcdHRoaXMuX2VuZENvbG9yID0gcGFydGljbGVTZWdtZW50ZWRDb2xvck5vZGUuX2lFbmRDb2xvcjtcclxuXHRcdHRoaXMuX3NlZ21lbnRQb2ludHMgPSBwYXJ0aWNsZVNlZ21lbnRlZENvbG9yTm9kZS5faVNlZ21lbnRQb2ludHM7XHJcblx0XHR0aGlzLl9udW1TZWdtZW50UG9pbnQgPSBwYXJ0aWNsZVNlZ21lbnRlZENvbG9yTm9kZS5faU51bVNlZ21lbnRQb2ludDtcclxuXHRcdHRoaXMudXBkYXRlQ29sb3JEYXRhKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0UmVuZGVyU3RhdGUoc3RhZ2U6U3RhZ2UsIHJlbmRlcmFibGU6UmVuZGVyYWJsZUJhc2UsIGFuaW1hdGlvblN1Ykdlb21ldHJ5OkFuaW1hdGlvblN1Ykdlb21ldHJ5LCBhbmltYXRpb25SZWdpc3RlckNhY2hlOkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUsIGNhbWVyYTpDYW1lcmEpXHJcblx0e1xyXG5cdFx0aWYgKGFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUubmVlZEZyYWdtZW50QW5pbWF0aW9uKSB7XHJcblx0XHRcdGlmICh0aGlzLl9udW1TZWdtZW50UG9pbnQgPiAwKVxyXG5cdFx0XHRcdGFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VmVydGV4Q29uc3QoYW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRSZWdpc3RlckluZGV4KHRoaXMuX3BBbmltYXRpb25Ob2RlLCBQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuVElNRV9EQVRBX0lOREVYKSwgdGhpcy5fdGltZUxpZmVEYXRhWzBdLCB0aGlzLl90aW1lTGlmZURhdGFbMV0sIHRoaXMuX3RpbWVMaWZlRGF0YVsyXSwgdGhpcy5fdGltZUxpZmVEYXRhWzNdKTtcclxuXHRcdFx0aWYgKHRoaXMuX3VzZXNNdWx0aXBsaWVyKVxyXG5cdFx0XHRcdGFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VmVydGV4Q29uc3RGcm9tQXJyYXkoYW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRSZWdpc3RlckluZGV4KHRoaXMuX3BBbmltYXRpb25Ob2RlLCBQYXJ0aWNsZVNlZ21lbnRlZENvbG9yU3RhdGUuU1RBUlRfTVVMVElQTElFUl9JTkRFWCksIHRoaXMuX211bHRpcGxpZXJEYXRhKTtcclxuXHRcdFx0aWYgKHRoaXMuX3VzZXNPZmZzZXQpXHJcblx0XHRcdFx0YW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRWZXJ0ZXhDb25zdEZyb21BcnJheShhbmltYXRpb25SZWdpc3RlckNhY2hlLmdldFJlZ2lzdGVySW5kZXgodGhpcy5fcEFuaW1hdGlvbk5vZGUsIFBhcnRpY2xlU2VnbWVudGVkQ29sb3JTdGF0ZS5TVEFSVF9PRkZTRVRfSU5ERVgpLCB0aGlzLl9vZmZzZXREYXRhKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlQ29sb3JEYXRhKClcclxuXHR7XHJcblx0XHR0aGlzLl90aW1lTGlmZURhdGEgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG5cdFx0dGhpcy5fbXVsdGlwbGllckRhdGEgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG5cdFx0dGhpcy5fb2Zmc2V0RGF0YSA9IG5ldyBBcnJheTxudW1iZXI+KCk7XHJcblx0XHR2YXIgaTpudW1iZXIgLyppbnQqLztcclxuXHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLl9udW1TZWdtZW50UG9pbnQ7IGkrKykge1xyXG5cdFx0XHRpZiAoaSA9PSAwKVxyXG5cdFx0XHRcdHRoaXMuX3RpbWVMaWZlRGF0YS5wdXNoKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0ubGlmZSk7XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHR0aGlzLl90aW1lTGlmZURhdGEucHVzaCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmxpZmUgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5saWZlKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLl9udW1TZWdtZW50UG9pbnQgPT0gMClcclxuXHRcdFx0dGhpcy5fdGltZUxpZmVEYXRhLnB1c2goMSk7XHJcblx0XHRlbHNlXHJcblx0XHRcdHRoaXMuX3RpbWVMaWZlRGF0YS5wdXNoKDEgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5saWZlKTtcclxuXHJcblx0XHRpZiAodGhpcy5fdXNlc011bHRpcGxpZXIpIHtcclxuXHRcdFx0dGhpcy5fbXVsdGlwbGllckRhdGEucHVzaCh0aGlzLl9zdGFydENvbG9yLnJlZE11bHRpcGxpZXIsIHRoaXMuX3N0YXJ0Q29sb3IuZ3JlZW5NdWx0aXBsaWVyLCB0aGlzLl9zdGFydENvbG9yLmJsdWVNdWx0aXBsaWVyLCB0aGlzLl9zdGFydENvbG9yLmFscGhhTXVsdGlwbGllcik7XHJcblx0XHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLl9udW1TZWdtZW50UG9pbnQ7IGkrKykge1xyXG5cdFx0XHRcdGlmIChpID09IDApXHJcblx0XHRcdFx0XHR0aGlzLl9tdWx0aXBsaWVyRGF0YS5wdXNoKCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLnJlZE11bHRpcGxpZXIgLSB0aGlzLl9zdGFydENvbG9yLnJlZE11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuZ3JlZW5NdWx0aXBsaWVyIC0gdGhpcy5fc3RhcnRDb2xvci5ncmVlbk11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuYmx1ZU11bHRpcGxpZXIgLSB0aGlzLl9zdGFydENvbG9yLmJsdWVNdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0sICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmFscGhhTXVsdGlwbGllciAtIHRoaXMuX3N0YXJ0Q29sb3IuYWxwaGFNdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0pO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHRoaXMuX211bHRpcGxpZXJEYXRhLnB1c2goKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IucmVkTXVsdGlwbGllciAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLnJlZE11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuZ3JlZW5NdWx0aXBsaWVyIC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IuZ3JlZW5NdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0sICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmJsdWVNdWx0aXBsaWVyIC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IuYmx1ZU11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuYWxwaGFNdWx0aXBsaWVyIC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IuYWxwaGFNdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLl9udW1TZWdtZW50UG9pbnQgPT0gMClcclxuXHRcdFx0XHR0aGlzLl9tdWx0aXBsaWVyRGF0YS5wdXNoKHRoaXMuX2VuZENvbG9yLnJlZE11bHRpcGxpZXIgLSB0aGlzLl9zdGFydENvbG9yLnJlZE11bHRpcGxpZXIsIHRoaXMuX2VuZENvbG9yLmdyZWVuTXVsdGlwbGllciAtIHRoaXMuX3N0YXJ0Q29sb3IuZ3JlZW5NdWx0aXBsaWVyLCB0aGlzLl9lbmRDb2xvci5ibHVlTXVsdGlwbGllciAtIHRoaXMuX3N0YXJ0Q29sb3IuYmx1ZU11bHRpcGxpZXIsIHRoaXMuX2VuZENvbG9yLmFscGhhTXVsdGlwbGllciAtIHRoaXMuX3N0YXJ0Q29sb3IuYWxwaGFNdWx0aXBsaWVyKTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHRoaXMuX211bHRpcGxpZXJEYXRhLnB1c2goKHRoaXMuX2VuZENvbG9yLnJlZE11bHRpcGxpZXIgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5yZWRNdWx0aXBsaWVyKS90aGlzLl90aW1lTGlmZURhdGFbaV0sICh0aGlzLl9lbmRDb2xvci5ncmVlbk11bHRpcGxpZXIgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5ncmVlbk11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX2VuZENvbG9yLmJsdWVNdWx0aXBsaWVyIC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IuYmx1ZU11bHRpcGxpZXIpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXSwgKHRoaXMuX2VuZENvbG9yLmFscGhhTXVsdGlwbGllciAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmFscGhhTXVsdGlwbGllcikvdGhpcy5fdGltZUxpZmVEYXRhW2ldKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5fdXNlc09mZnNldCkge1xyXG5cdFx0XHR0aGlzLl9vZmZzZXREYXRhLnB1c2godGhpcy5fc3RhcnRDb2xvci5yZWRPZmZzZXQvMjU1LCB0aGlzLl9zdGFydENvbG9yLmdyZWVuT2Zmc2V0LzI1NSwgdGhpcy5fc3RhcnRDb2xvci5ibHVlT2Zmc2V0LzI1NSwgdGhpcy5fc3RhcnRDb2xvci5hbHBoYU9mZnNldC8yNTUpO1xyXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgdGhpcy5fbnVtU2VnbWVudFBvaW50OyBpKyspIHtcclxuXHRcdFx0XHRpZiAoaSA9PSAwKVxyXG5cdFx0XHRcdFx0dGhpcy5fb2Zmc2V0RGF0YS5wdXNoKCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLnJlZE9mZnNldCAtIHRoaXMuX3N0YXJ0Q29sb3IucmVkT2Zmc2V0KS90aGlzLl90aW1lTGlmZURhdGFbaV0vMjU1LCAodGhpcy5fc2VnbWVudFBvaW50c1tpXS5jb2xvci5ncmVlbk9mZnNldCAtIHRoaXMuX3N0YXJ0Q29sb3IuZ3JlZW5PZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUsICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmJsdWVPZmZzZXQgLSB0aGlzLl9zdGFydENvbG9yLmJsdWVPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUsICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmFscGhhT2Zmc2V0IC0gdGhpcy5fc3RhcnRDb2xvci5hbHBoYU9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0dGhpcy5fb2Zmc2V0RGF0YS5wdXNoKCh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLnJlZE9mZnNldCAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLnJlZE9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuZ3JlZW5PZmZzZXQgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5ncmVlbk9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSwgKHRoaXMuX3NlZ21lbnRQb2ludHNbaV0uY29sb3IuYmx1ZU9mZnNldCAtIHRoaXMuX3NlZ21lbnRQb2ludHNbaSAtIDFdLmNvbG9yLmJsdWVPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUsICh0aGlzLl9zZWdtZW50UG9pbnRzW2ldLmNvbG9yLmFscGhhT2Zmc2V0IC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IuYWxwaGFPZmZzZXQpL3RoaXMuX3RpbWVMaWZlRGF0YVtpXS8yNTUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLl9udW1TZWdtZW50UG9pbnQgPT0gMClcclxuXHRcdFx0XHR0aGlzLl9vZmZzZXREYXRhLnB1c2goKHRoaXMuX2VuZENvbG9yLnJlZE9mZnNldCAtIHRoaXMuX3N0YXJ0Q29sb3IucmVkT2Zmc2V0KS8yNTUsICh0aGlzLl9lbmRDb2xvci5ncmVlbk9mZnNldCAtIHRoaXMuX3N0YXJ0Q29sb3IuZ3JlZW5PZmZzZXQpLzI1NSwgKHRoaXMuX2VuZENvbG9yLmJsdWVPZmZzZXQgLSB0aGlzLl9zdGFydENvbG9yLmJsdWVPZmZzZXQpLzI1NSwgKHRoaXMuX2VuZENvbG9yLmFscGhhT2Zmc2V0IC0gdGhpcy5fc3RhcnRDb2xvci5hbHBoYU9mZnNldCkvMjU1KTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHRoaXMuX29mZnNldERhdGEucHVzaCgodGhpcy5fZW5kQ29sb3IucmVkT2Zmc2V0IC0gdGhpcy5fc2VnbWVudFBvaW50c1tpIC0gMV0uY29sb3IucmVkT2Zmc2V0KS90aGlzLl90aW1lTGlmZURhdGFbaV0vMjU1LCAodGhpcy5fZW5kQ29sb3IuZ3JlZW5PZmZzZXQgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5ncmVlbk9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSwgKHRoaXMuX2VuZENvbG9yLmJsdWVPZmZzZXQgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5ibHVlT2Zmc2V0KS90aGlzLl90aW1lTGlmZURhdGFbaV0vMjU1LCAodGhpcy5fZW5kQ29sb3IuYWxwaGFPZmZzZXQgLSB0aGlzLl9zZWdtZW50UG9pbnRzW2kgLSAxXS5jb2xvci5hbHBoYU9mZnNldCkvdGhpcy5fdGltZUxpZmVEYXRhW2ldLzI1NSk7XHJcblx0XHR9XHJcblx0XHQvL2N1dCBvZmYgdGhlIGRhdGFcclxuXHRcdHRoaXMuX3RpbWVMaWZlRGF0YS5sZW5ndGggPSA0O1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0ID0gUGFydGljbGVTZWdtZW50ZWRDb2xvclN0YXRlOyJdfQ==