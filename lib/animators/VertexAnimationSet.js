var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var AnimationSetBase = require("awayjs-renderergl/lib/animators/AnimationSetBase");
var VertexAnimationMode = require("awayjs-renderergl/lib/animators/data/VertexAnimationMode");
/**
 * The animation data set used by vertex-based animators, containing vertex animation state data.
 *
 * @see VertexAnimator
 */
var VertexAnimationSet = (function (_super) {
    __extends(VertexAnimationSet, _super);
    /**
     * Returns whether or not normal data is used in last set GPU pass of the vertex shader.
     */
    //		public get useNormals():boolean
    //		{
    //			return this._uploadNormals;
    //		}
    /**
     * Creates a new <code>VertexAnimationSet</code> object.
     *
     * @param numPoses The number of poses made available at once to the GPU animation code.
     * @param blendMode Optional value for setting the animation mode of the vertex animator object.
     *
     * @see away3d.animators.data.VertexAnimationMode
     */
    function VertexAnimationSet(numPoses, blendMode) {
        if (numPoses === void 0) { numPoses = 2; }
        if (blendMode === void 0) { blendMode = "absolute"; }
        _super.call(this);
        this._numPoses = numPoses;
        this._blendMode = blendMode;
    }
    Object.defineProperty(VertexAnimationSet.prototype, "numPoses", {
        /**
         * Returns the number of poses made available at once to the GPU animation code.
         */
        get: function () {
            return this._numPoses;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(VertexAnimationSet.prototype, "blendMode", {
        /**
         * Returns the active blend mode of the vertex animator object.
         */
        get: function () {
            return this._blendMode;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    VertexAnimationSet.prototype.getAGALVertexCode = function (shaderObject) {
        if (this._blendMode == VertexAnimationMode.ABSOLUTE)
            return this.getAbsoluteAGALCode(shaderObject);
        else
            return this.getAdditiveAGALCode(shaderObject);
    };
    /**
     * @inheritDoc
     */
    VertexAnimationSet.prototype.activate = function (shaderObject, stage) {
        //			var uID:number = pass._iUniqueId;
        //			this._uploadNormals = <boolean> this._useNormals[uID];
        //			this._uploadTangents = <boolean> this._useTangents[uID];
    };
    /**
     * @inheritDoc
     */
    VertexAnimationSet.prototype.deactivate = function (shaderObject, stage) {
        //			var uID:number = pass._iUniqueId;
        //			var index:number /*uint*/ = this._streamIndices[uID];
        //			var context:IContextGL = <IContextGL> stage.context;
        //			context.setVertexBufferAt(index, null);
        //			if (this._uploadNormals)
        //				context.setVertexBufferAt(index + 1, null);
        //			if (this._uploadTangents)
        //				context.setVertexBufferAt(index + 2, null);
    };
    /**
     * @inheritDoc
     */
    VertexAnimationSet.prototype.getAGALFragmentCode = function (shaderObject, shadedTarget) {
        return "";
    };
    /**
     * @inheritDoc
     */
    VertexAnimationSet.prototype.getAGALUVCode = function (shaderObject) {
        return "mov " + shaderObject.uvTarget + "," + shaderObject.uvSource + "\n";
    };
    /**
     * @inheritDoc
     */
    VertexAnimationSet.prototype.doneAGALCode = function (shaderObject) {
    };
    /**
     * Generates the vertex AGAL code for absolute blending.
     */
    VertexAnimationSet.prototype.getAbsoluteAGALCode = function (shaderObject) {
        var code = "";
        var temp1 = this._pFindTempReg(shaderObject.animationTargetRegisters);
        var temp2 = this._pFindTempReg(shaderObject.animationTargetRegisters, temp1);
        var regs = new Array("x", "y", "z", "w");
        var len = shaderObject.animatableAttributes.length;
        var constantReg = "vc" + shaderObject.numUsedVertexConstants;
        if (len > 2)
            len = 2;
        var streamIndex = shaderObject.numUsedStreams;
        for (var i = 0; i < len; ++i) {
            code += "mul " + temp1 + ", " + shaderObject.animatableAttributes[i] + ", " + constantReg + "." + regs[0] + "\n";
            for (var j = 1; j < this._numPoses; ++j) {
                code += "mul " + temp2 + ", va" + streamIndex + ", " + constantReg + "." + regs[j] + "\n";
                if (j < this._numPoses - 1)
                    code += "add " + temp1 + ", " + temp1 + ", " + temp2 + "\n";
                ++streamIndex;
            }
            code += "add " + shaderObject.animationTargetRegisters[i] + ", " + temp1 + ", " + temp2 + "\n";
        }
        // add code for bitangents if tangents are used
        if (shaderObject.tangentDependencies > 0 || shaderObject.outputsNormals) {
            code += "dp3 " + temp1 + ".x, " + shaderObject.animatableAttributes[2] + ", " + shaderObject.animationTargetRegisters[1] + "\n" + "mul " + temp1 + ", " + shaderObject.animationTargetRegisters[1] + ", " + temp1 + ".x\n" + "sub " + shaderObject.animationTargetRegisters[2] + ", " + shaderObject.animationTargetRegisters[2] + ", " + temp1 + "\n";
        }
        return code;
    };
    /**
     * Generates the vertex AGAL code for additive blending.
     */
    VertexAnimationSet.prototype.getAdditiveAGALCode = function (shaderObject) {
        var code = "";
        var len = shaderObject.animatableAttributes.length;
        var regs = ["x", "y", "z", "w"];
        var temp1 = this._pFindTempReg(shaderObject.animationTargetRegisters);
        var k /*uint*/;
        var streamIndex = shaderObject.numUsedStreams;
        if (len > 2)
            len = 2;
        code += "mov  " + shaderObject.animationTargetRegisters[0] + ", " + shaderObject.animatableAttributes[0] + "\n";
        if (shaderObject.normalDependencies > 0)
            code += "mov " + shaderObject.animationTargetRegisters[1] + ", " + shaderObject.animatableAttributes[1] + "\n";
        for (var i = 0; i < len; ++i) {
            for (var j = 0; j < this._numPoses; ++j) {
                code += "mul " + temp1 + ", va" + (streamIndex + k) + ", vc" + shaderObject.numUsedVertexConstants + "." + regs[j] + "\n" + "add " + shaderObject.animationTargetRegisters[i] + ", " + shaderObject.animationTargetRegisters[i] + ", " + temp1 + "\n";
                k++;
            }
        }
        if (shaderObject.tangentDependencies > 0 || shaderObject.outputsNormals) {
            code += "dp3 " + temp1 + ".x, " + shaderObject.animatableAttributes[2] + ", " + shaderObject.animationTargetRegisters[1] + "\n" + "mul " + temp1 + ", " + shaderObject.animationTargetRegisters[1] + ", " + temp1 + ".x\n" + "sub " + shaderObject.animationTargetRegisters[2] + ", " + shaderObject.animatableAttributes[2] + ", " + temp1 + "\n";
        }
        return code;
    };
    return VertexAnimationSet;
})(AnimationSetBase);
module.exports = VertexAnimationSet;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvVmVydGV4QW5pbWF0aW9uU2V0LnRzIl0sIm5hbWVzIjpbIlZlcnRleEFuaW1hdGlvblNldCIsIlZlcnRleEFuaW1hdGlvblNldC5jb25zdHJ1Y3RvciIsIlZlcnRleEFuaW1hdGlvblNldC5udW1Qb3NlcyIsIlZlcnRleEFuaW1hdGlvblNldC5ibGVuZE1vZGUiLCJWZXJ0ZXhBbmltYXRpb25TZXQuZ2V0QUdBTFZlcnRleENvZGUiLCJWZXJ0ZXhBbmltYXRpb25TZXQuYWN0aXZhdGUiLCJWZXJ0ZXhBbmltYXRpb25TZXQuZGVhY3RpdmF0ZSIsIlZlcnRleEFuaW1hdGlvblNldC5nZXRBR0FMRnJhZ21lbnRDb2RlIiwiVmVydGV4QW5pbWF0aW9uU2V0LmdldEFHQUxVVkNvZGUiLCJWZXJ0ZXhBbmltYXRpb25TZXQuZG9uZUFHQUxDb2RlIiwiVmVydGV4QW5pbWF0aW9uU2V0LmdldEFic29sdXRlQUdBTENvZGUiLCJWZXJ0ZXhBbmltYXRpb25TZXQuZ2V0QWRkaXRpdmVBR0FMQ29kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBSUEsSUFBTyxnQkFBZ0IsV0FBZSxrREFBa0QsQ0FBQyxDQUFDO0FBQzFGLElBQU8sbUJBQW1CLFdBQWMsMERBQTBELENBQUMsQ0FBQztBQUdwRyxBQUtBOzs7O0dBREc7SUFDRyxrQkFBa0I7SUFBU0EsVUFBM0JBLGtCQUFrQkEsVUFBeUJBO0lBcUJoREE7O09BRUdBO0lBQ0pBLG1DQUFtQ0E7SUFDbkNBLEtBQUtBO0lBQ0xBLGdDQUFnQ0E7SUFDaENBLEtBQUtBO0lBRUpBOzs7Ozs7O09BT0dBO0lBQ0hBLFNBckNLQSxrQkFBa0JBLENBcUNYQSxRQUE0QkEsRUFBRUEsU0FBNkJBO1FBQTNEQyx3QkFBNEJBLEdBQTVCQSxZQUE0QkE7UUFBRUEseUJBQTZCQSxHQUE3QkEsc0JBQTZCQTtRQUV0RUEsaUJBQU9BLENBQUNBO1FBQ1JBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLFFB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QSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFtQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDOUNBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLElBQUlBLEdBQUdBLFlBQVlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsR0FBR0EsV0FBV0EsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0E7WUFFakhBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQW1CQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxTQUFTQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQTtnQkFDekRBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLFdBQVdBLEdBQUdBLElBQUlBLEdBQUdBLFdBQVdBLEdBQUdBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO2dCQUUxRkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7b0JBQzFCQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxLQUFLQSxHQUFHQSxJQUFJQSxHQUFHQSxLQUFLQSxHQUFHQSxJQUFJQSxHQUFHQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQTtnQkFFN0RBLEVBQUVBLFdBQVdBLENBQUNBO1lBQ2ZBLENBQUNBO1lBRURBLElBQUlBLElBQUlBLE1BQU1BLEdBQUdBLFlBQVlBLENBQUNBLHdCQUF3QkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsR0FBR0EsS0FBS0EsR0FBR0EsSUFBSUEsR0FBR0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7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Z0IsRUFxTGhEO0FBRUQsQUFBNEIsaUJBQW5CLGtCQUFrQixDQUFDIiwiZmlsZSI6ImFuaW1hdG9ycy9WZXJ0ZXhBbmltYXRpb25TZXQuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IElBbmltYXRpb25TZXRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2FuaW1hdG9ycy9JQW5pbWF0aW9uU2V0XCIpO1xuXG5pbXBvcnQgU3RhZ2VcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL1N0YWdlXCIpO1xuXG5pbXBvcnQgQW5pbWF0aW9uU2V0QmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL0FuaW1hdGlvblNldEJhc2VcIik7XG5pbXBvcnQgVmVydGV4QW5pbWF0aW9uTW9kZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2FuaW1hdG9ycy9kYXRhL1ZlcnRleEFuaW1hdGlvbk1vZGVcIik7XG5pbXBvcnQgU2hhZGVyT2JqZWN0QmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyT2JqZWN0QmFzZVwiKTtcblxuLyoqXG4gKiBUaGUgYW5pbWF0aW9uIGRhdGEgc2V0IHVzZWQgYnkgdmVydGV4LWJhc2VkIGFuaW1hdG9ycywgY29udGFpbmluZyB2ZXJ0ZXggYW5pbWF0aW9uIHN0YXRlIGRhdGEuXG4gKlxuICogQHNlZSBWZXJ0ZXhBbmltYXRvclxuICovXG5jbGFzcyBWZXJ0ZXhBbmltYXRpb25TZXQgZXh0ZW5kcyBBbmltYXRpb25TZXRCYXNlIGltcGxlbWVudHMgSUFuaW1hdGlvblNldFxue1xuXHRwcml2YXRlIF9udW1Qb3NlczpudW1iZXIgLyp1aW50Ki87XG5cdHByaXZhdGUgX2JsZW5kTW9kZTpzdHJpbmc7XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIG51bWJlciBvZiBwb3NlcyBtYWRlIGF2YWlsYWJsZSBhdCBvbmNlIHRvIHRoZSBHUFUgYW5pbWF0aW9uIGNvZGUuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IG51bVBvc2VzKCk6bnVtYmVyIC8qdWludCovXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fbnVtUG9zZXM7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgYWN0aXZlIGJsZW5kIG1vZGUgb2YgdGhlIHZlcnRleCBhbmltYXRvciBvYmplY3QuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGJsZW5kTW9kZSgpOnN0cmluZ1xuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2JsZW5kTW9kZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IG5vcm1hbCBkYXRhIGlzIHVzZWQgaW4gbGFzdCBzZXQgR1BVIHBhc3Mgb2YgdGhlIHZlcnRleCBzaGFkZXIuXG5cdCAqL1xuLy9cdFx0cHVibGljIGdldCB1c2VOb3JtYWxzKCk6Ym9vbGVhblxuLy9cdFx0e1xuLy9cdFx0XHRyZXR1cm4gdGhpcy5fdXBsb2FkTm9ybWFscztcbi8vXHRcdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyA8Y29kZT5WZXJ0ZXhBbmltYXRpb25TZXQ8L2NvZGU+IG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIG51bVBvc2VzIFRoZSBudW1iZXIgb2YgcG9zZXMgbWFkZSBhdmFpbGFibGUgYXQgb25jZSB0byB0aGUgR1BVIGFuaW1hdGlvbiBjb2RlLlxuXHQgKiBAcGFyYW0gYmxlbmRNb2RlIE9wdGlvbmFsIHZhbHVlIGZvciBzZXR0aW5nIHRoZSBhbmltYXRpb24gbW9kZSBvZiB0aGUgdmVydGV4IGFuaW1hdG9yIG9iamVjdC5cblx0ICpcblx0ICogQHNlZSBhd2F5M2QuYW5pbWF0b3JzLmRhdGEuVmVydGV4QW5pbWF0aW9uTW9kZVxuXHQgKi9cblx0Y29uc3RydWN0b3IobnVtUG9zZXM6bnVtYmVyIC8qdWludCovID0gMiwgYmxlbmRNb2RlOnN0cmluZyA9IFwiYWJzb2x1dGVcIilcblx0e1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5fbnVtUG9zZXMgPSBudW1Qb3Nlcztcblx0XHR0aGlzLl9ibGVuZE1vZGUgPSBibGVuZE1vZGU7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGdldEFHQUxWZXJ0ZXhDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlKTpzdHJpbmdcblx0e1xuXHRcdGlmICh0aGlzLl9ibGVuZE1vZGUgPT0gVmVydGV4QW5pbWF0aW9uTW9kZS5BQlNPTFVURSlcblx0XHRcdHJldHVybiB0aGlzLmdldEFic29sdXRlQUdBTENvZGUoc2hhZGVyT2JqZWN0KTtcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRBZGRpdGl2ZUFHQUxDb2RlKHNoYWRlck9iamVjdCk7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBhY3RpdmF0ZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgc3RhZ2U6U3RhZ2UpXG5cdHtcbi8vXHRcdFx0dmFyIHVJRDpudW1iZXIgPSBwYXNzLl9pVW5pcXVlSWQ7XG4vL1x0XHRcdHRoaXMuX3VwbG9hZE5vcm1hbHMgPSA8Ym9vbGVhbj4gdGhpcy5fdXNlTm9ybWFsc1t1SURdO1xuLy9cdFx0XHR0aGlzLl91cGxvYWRUYW5nZW50cyA9IDxib29sZWFuPiB0aGlzLl91c2VUYW5nZW50c1t1SURdO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbmhlcml0RG9jXG5cdCAqL1xuXHRwdWJsaWMgZGVhY3RpdmF0ZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgc3RhZ2U6U3RhZ2UpXG5cdHtcbi8vXHRcdFx0dmFyIHVJRDpudW1iZXIgPSBwYXNzLl9pVW5pcXVlSWQ7XG4vL1x0XHRcdHZhciBpbmRleDpudW1iZXIgLyp1aW50Ki8gPSB0aGlzLl9zdHJlYW1JbmRpY2VzW3VJRF07XG4vL1x0XHRcdHZhciBjb250ZXh0OklDb250ZXh0R0wgPSA8SUNvbnRleHRHTD4gc3RhZ2UuY29udGV4dDtcbi8vXHRcdFx0Y29udGV4dC5zZXRWZXJ0ZXhCdWZmZXJBdChpbmRleCwgbnVsbCk7XG4vL1x0XHRcdGlmICh0aGlzLl91cGxvYWROb3JtYWxzKVxuLy9cdFx0XHRcdGNvbnRleHQuc2V0VmVydGV4QnVmZmVyQXQoaW5kZXggKyAxLCBudWxsKTtcbi8vXHRcdFx0aWYgKHRoaXMuX3VwbG9hZFRhbmdlbnRzKVxuLy9cdFx0XHRcdGNvbnRleHQuc2V0VmVydGV4QnVmZmVyQXQoaW5kZXggKyAyLCBudWxsKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGdldEFHQUxGcmFnbWVudENvZGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIHNoYWRlZFRhcmdldDpzdHJpbmcpOnN0cmluZ1xuXHR7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblxuXHQvKipcblx0ICogQGluaGVyaXREb2Ncblx0ICovXG5cdHB1YmxpYyBnZXRBR0FMVVZDb2RlKHNoYWRlck9iamVjdDpTaGFkZXJPYmplY3RCYXNlKTpzdHJpbmdcblx0e1xuXHRcdHJldHVybiBcIm1vdiBcIiArIHNoYWRlck9iamVjdC51dlRhcmdldCArIFwiLFwiICsgc2hhZGVyT2JqZWN0LnV2U291cmNlICsgXCJcXG5cIjtcblx0fVxuXG5cdC8qKlxuXHQgKiBAaW5oZXJpdERvY1xuXHQgKi9cblx0cHVibGljIGRvbmVBR0FMQ29kZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSlcblx0e1xuXG5cdH1cblxuXHQvKipcblx0ICogR2VuZXJhdGVzIHRoZSB2ZXJ0ZXggQUdBTCBjb2RlIGZvciBhYnNvbHV0ZSBibGVuZGluZy5cblx0ICovXG5cdHByaXZhdGUgZ2V0QWJzb2x1dGVBR0FMQ29kZShzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSk6c3RyaW5nXG5cdHtcblx0XHR2YXIgY29kZTpzdHJpbmcgPSBcIlwiO1xuXHRcdHZhciB0ZW1wMTpzdHJpbmcgPSB0aGlzLl9wRmluZFRlbXBSZWcoc2hhZGVyT2JqZWN0LmFuaW1hdGlvblRhcmdldFJlZ2lzdGVycyk7XG5cdFx0dmFyIHRlbXAyOnN0cmluZyA9IHRoaXMuX3BGaW5kVGVtcFJlZyhzaGFkZXJPYmplY3QuYW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzLCB0ZW1wMSk7XG5cdFx0dmFyIHJlZ3M6QXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheTxzdHJpbmc+KFwieFwiLCBcInlcIiwgXCJ6XCIsIFwid1wiKTtcblx0XHR2YXIgbGVuOm51bWJlciAvKnVpbnQqLyA9IHNoYWRlck9iamVjdC5hbmltYXRhYmxlQXR0cmlidXRlcy5sZW5ndGg7XG5cdFx0dmFyIGNvbnN0YW50UmVnOnN0cmluZyA9IFwidmNcIiArIHNoYWRlck9iamVjdC5udW1Vc2VkVmVydGV4Q29uc3RhbnRzO1xuXG5cdFx0aWYgKGxlbiA+IDIpXG5cdFx0XHRsZW4gPSAyO1xuXHRcdHZhciBzdHJlYW1JbmRleDpudW1iZXIgLyp1aW50Ki8gPSBzaGFkZXJPYmplY3QubnVtVXNlZFN0cmVhbXM7XG5cblx0XHRmb3IgKHZhciBpOm51bWJlciAvKnVpbnQqLyA9IDA7IGkgPCBsZW47ICsraSkge1xuXHRcdFx0Y29kZSArPSBcIm11bCBcIiArIHRlbXAxICsgXCIsIFwiICsgc2hhZGVyT2JqZWN0LmFuaW1hdGFibGVBdHRyaWJ1dGVzW2ldICsgXCIsIFwiICsgY29uc3RhbnRSZWcgKyBcIi5cIiArIHJlZ3NbMF0gKyBcIlxcblwiO1xuXG5cdFx0XHRmb3IgKHZhciBqOm51bWJlciAvKnVpbnQqLyA9IDE7IGogPCB0aGlzLl9udW1Qb3NlczsgKytqKSB7XG5cdFx0XHRcdGNvZGUgKz0gXCJtdWwgXCIgKyB0ZW1wMiArIFwiLCB2YVwiICsgc3RyZWFtSW5kZXggKyBcIiwgXCIgKyBjb25zdGFudFJlZyArIFwiLlwiICsgcmVnc1tqXSArIFwiXFxuXCI7XG5cblx0XHRcdFx0aWYgKGogPCB0aGlzLl9udW1Qb3NlcyAtIDEpXG5cdFx0XHRcdFx0Y29kZSArPSBcImFkZCBcIiArIHRlbXAxICsgXCIsIFwiICsgdGVtcDEgKyBcIiwgXCIgKyB0ZW1wMiArIFwiXFxuXCI7XG5cblx0XHRcdFx0KytzdHJlYW1JbmRleDtcblx0XHRcdH1cblxuXHRcdFx0Y29kZSArPSBcImFkZCBcIiArIHNoYWRlck9iamVjdC5hbmltYXRpb25UYXJnZXRSZWdpc3RlcnNbaV0gKyBcIiwgXCIgKyB0ZW1wMSArIFwiLCBcIiArIHRlbXAyICsgXCJcXG5cIjtcblx0XHR9XG5cblx0XHQvLyBhZGQgY29kZSBmb3IgYml0YW5nZW50cyBpZiB0YW5nZW50cyBhcmUgdXNlZFxuXHRcdGlmIChzaGFkZXJPYmplY3QudGFuZ2VudERlcGVuZGVuY2llcyA+IDAgfHwgc2hhZGVyT2JqZWN0Lm91dHB1dHNOb3JtYWxzKSB7XG5cdFx0XHRjb2RlICs9IFwiZHAzIFwiICsgdGVtcDEgKyBcIi54LCBcIiArIHNoYWRlck9iamVjdC5hbmltYXRhYmxlQXR0cmlidXRlc1syXSArIFwiLCBcIiArIHNoYWRlck9iamVjdC5hbmltYXRpb25UYXJnZXRSZWdpc3RlcnNbMV0gKyBcIlxcblwiICtcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wMSArIFwiLCBcIiArIHNoYWRlck9iamVjdC5hbmltYXRpb25UYXJnZXRSZWdpc3RlcnNbMV0gKyBcIiwgXCIgKyB0ZW1wMSArIFwiLnhcXG5cIiArXG5cdFx0XHRcdFwic3ViIFwiICsgc2hhZGVyT2JqZWN0LmFuaW1hdGlvblRhcmdldFJlZ2lzdGVyc1syXSArIFwiLCBcIiArIHNoYWRlck9iamVjdC5hbmltYXRpb25UYXJnZXRSZWdpc3RlcnNbMl0gKyBcIiwgXCIgKyB0ZW1wMSArIFwiXFxuXCI7XG5cdFx0fVxuXHRcdHJldHVybiBjb2RlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlcyB0aGUgdmVydGV4IEFHQUwgY29kZSBmb3IgYWRkaXRpdmUgYmxlbmRpbmcuXG5cdCAqL1xuXHRwcml2YXRlIGdldEFkZGl0aXZlQUdBTENvZGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UpOnN0cmluZ1xuXHR7XG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcblx0XHR2YXIgbGVuOm51bWJlciAvKnVpbnQqLyA9IHNoYWRlck9iamVjdC5hbmltYXRhYmxlQXR0cmlidXRlcy5sZW5ndGg7XG5cdFx0dmFyIHJlZ3M6QXJyYXk8c3RyaW5nPiA9IFtcInhcIiwgXCJ5XCIsIFwielwiLCBcIndcIl07XG5cdFx0dmFyIHRlbXAxOnN0cmluZyA9IHRoaXMuX3BGaW5kVGVtcFJlZyhzaGFkZXJPYmplY3QuYW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzKTtcblx0XHR2YXIgazpudW1iZXIgLyp1aW50Ki87XG5cblx0XHR2YXIgc3RyZWFtSW5kZXg6bnVtYmVyIC8qdWludCovID0gc2hhZGVyT2JqZWN0Lm51bVVzZWRTdHJlYW1zO1xuXG5cdFx0aWYgKGxlbiA+IDIpXG5cdFx0XHRsZW4gPSAyO1xuXG5cdFx0Y29kZSArPSBcIm1vdiAgXCIgKyBzaGFkZXJPYmplY3QuYW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzWzBdICsgXCIsIFwiICsgc2hhZGVyT2JqZWN0LmFuaW1hdGFibGVBdHRyaWJ1dGVzWzBdICsgXCJcXG5cIjtcblx0XHRpZiAoc2hhZGVyT2JqZWN0Lm5vcm1hbERlcGVuZGVuY2llcyA+IDApXG5cdFx0XHRjb2RlICs9IFwibW92IFwiICsgc2hhZGVyT2JqZWN0LmFuaW1hdGlvblRhcmdldFJlZ2lzdGVyc1sxXSArIFwiLCBcIiArIHNoYWRlck9iamVjdC5hbmltYXRhYmxlQXR0cmlidXRlc1sxXSArIFwiXFxuXCI7XG5cblx0XHRmb3IgKHZhciBpOm51bWJlciAvKnVpbnQqLyA9IDA7IGkgPCBsZW47ICsraSkge1xuXHRcdFx0Zm9yICh2YXIgajpudW1iZXIgLyp1aW50Ki8gPSAwOyBqIDwgdGhpcy5fbnVtUG9zZXM7ICsraikge1xuXHRcdFx0XHRjb2RlICs9IFwibXVsIFwiICsgdGVtcDEgKyBcIiwgdmFcIiArIChzdHJlYW1JbmRleCArIGspICsgXCIsIHZjXCIgKyBzaGFkZXJPYmplY3QubnVtVXNlZFZlcnRleENvbnN0YW50cyArIFwiLlwiICsgcmVnc1tqXSArIFwiXFxuXCIgK1xuXHRcdFx0XHRcdFwiYWRkIFwiICsgc2hhZGVyT2JqZWN0LmFuaW1hdGlvblRhcmdldFJlZ2lzdGVyc1tpXSArIFwiLCBcIiArIHNoYWRlck9iamVjdC5hbmltYXRpb25UYXJnZXRSZWdpc3RlcnNbaV0gKyBcIiwgXCIgKyB0ZW1wMSArIFwiXFxuXCI7XG5cdFx0XHRcdGsrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2hhZGVyT2JqZWN0LnRhbmdlbnREZXBlbmRlbmNpZXMgPiAwIHx8IHNoYWRlck9iamVjdC5vdXRwdXRzTm9ybWFscykge1xuXHRcdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAxICsgXCIueCwgXCIgKyBzaGFkZXJPYmplY3QuYW5pbWF0YWJsZUF0dHJpYnV0ZXNbMl0gKyBcIiwgXCIgKyBzaGFkZXJPYmplY3QuYW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzWzFdICsgXCJcXG5cIiArXG5cdFx0XHRcdFwibXVsIFwiICsgdGVtcDEgKyBcIiwgXCIgKyBzaGFkZXJPYmplY3QuYW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzWzFdICsgXCIsIFwiICsgdGVtcDEgKyBcIi54XFxuXCIgK1xuXHRcdFx0XHRcInN1YiBcIiArIHNoYWRlck9iamVjdC5hbmltYXRpb25UYXJnZXRSZWdpc3RlcnNbMl0gKyBcIiwgXCIgKyBzaGFkZXJPYmplY3QuYW5pbWF0YWJsZUF0dHJpYnV0ZXNbMl0gKyBcIiwgXCIgKyB0ZW1wMSArIFwiXFxuXCI7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvZGU7XG5cdH1cbn1cblxuZXhwb3J0ID0gVmVydGV4QW5pbWF0aW9uU2V0OyJdfQ==